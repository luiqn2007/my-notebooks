"use strict";var hV=Object.defineProperty;var pV=(t,n,e)=>n in t?hV(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var T=(t,n,e)=>(pV(t,typeof n!="symbol"?n+"":n,e),e);const Wc=require("siyuan");function gV(t,n){for(var e=0;e<n.length;e++){const r=n[e];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(t,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}window.process=Object.assign({env:{}},window.process);const bf={plugin:null};var To=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Of(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $P={exports:{}},Cn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fO;function mV(){if(fO)return Cn;fO=1;var t=Symbol.for("react.element"),n=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=v&&V[v]||V["@@iterator"],typeof V=="function"?V:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function E(V,Z,Ce){this.props=V,this.context=Z,this.refs=C,this.updater=Ce||w}E.prototype.isReactComponent={},E.prototype.setState=function(V,Z){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Z,"setState")},E.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function R(){}R.prototype=E.prototype;function L(V,Z,Ce){this.props=V,this.context=Z,this.refs=C,this.updater=Ce||w}var A=L.prototype=new R;A.constructor=L,k(A,E.prototype),A.isPureReactComponent=!0;var O=Array.isArray,D=Object.prototype.hasOwnProperty,z={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function Y(V,Z,Ce){var Ae,De={},Ie=null,Ne=null;if(Z!=null)for(Ae in Z.ref!==void 0&&(Ne=Z.ref),Z.key!==void 0&&(Ie=""+Z.key),Z)D.call(Z,Ae)&&!U.hasOwnProperty(Ae)&&(De[Ae]=Z[Ae]);var Ve=arguments.length-2;if(Ve===1)De.children=Ce;else if(1<Ve){for(var Ke=Array(Ve),Xe=0;Xe<Ve;Xe++)Ke[Xe]=arguments[Xe+2];De.children=Ke}if(V&&V.defaultProps)for(Ae in Ve=V.defaultProps,Ve)De[Ae]===void 0&&(De[Ae]=Ve[Ae]);return{$$typeof:t,type:V,key:Ie,ref:Ne,props:De,_owner:z.current}}function q(V,Z){return{$$typeof:t,type:V.type,key:Z,ref:V.ref,props:V.props,_owner:V._owner}}function X(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function ie(V){var Z={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Ce){return Z[Ce]})}var pe=/\/+/g;function ae(V,Z){return typeof V=="object"&&V!==null&&V.key!=null?ie(""+V.key):Z.toString(36)}function te(V,Z,Ce,Ae,De){var Ie=typeof V;(Ie==="undefined"||Ie==="boolean")&&(V=null);var Ne=!1;if(V===null)Ne=!0;else switch(Ie){case"string":case"number":Ne=!0;break;case"object":switch(V.$$typeof){case t:case n:Ne=!0}}if(Ne)return Ne=V,De=De(Ne),V=Ae===""?"."+ae(Ne,0):Ae,O(De)?(Ce="",V!=null&&(Ce=V.replace(pe,"$&/")+"/"),te(De,Z,Ce,"",function(Xe){return Xe})):De!=null&&(X(De)&&(De=q(De,Ce+(!De.key||Ne&&Ne.key===De.key?"":(""+De.key).replace(pe,"$&/")+"/")+V)),Z.push(De)),1;if(Ne=0,Ae=Ae===""?".":Ae+":",O(V))for(var Ve=0;Ve<V.length;Ve++){Ie=V[Ve];var Ke=Ae+ae(Ie,Ve);Ne+=te(Ie,Z,Ce,Ke,De)}else if(Ke=S(V),typeof Ke=="function")for(V=Ke.call(V),Ve=0;!(Ie=V.next()).done;)Ie=Ie.value,Ke=Ae+ae(Ie,Ve++),Ne+=te(Ie,Z,Ce,Ke,De);else if(Ie==="object")throw Z=String(V),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return Ne}function he(V,Z,Ce){if(V==null)return V;var Ae=[],De=0;return te(V,Ae,"","",function(Ie){return Z.call(Ce,Ie,De++)}),Ae}function ce(V){if(V._status===-1){var Z=V._result;Z=Z(),Z.then(function(Ce){(V._status===0||V._status===-1)&&(V._status=1,V._result=Ce)},function(Ce){(V._status===0||V._status===-1)&&(V._status=2,V._result=Ce)}),V._status===-1&&(V._status=0,V._result=Z)}if(V._status===1)return V._result.default;throw V._result}var ge={current:null},me={transition:null},we={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:me,ReactCurrentOwner:z};return Cn.Children={map:he,forEach:function(V,Z,Ce){he(V,function(){Z.apply(this,arguments)},Ce)},count:function(V){var Z=0;return he(V,function(){Z++}),Z},toArray:function(V){return he(V,function(Z){return Z})||[]},only:function(V){if(!X(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Cn.Component=E,Cn.Fragment=e,Cn.Profiler=o,Cn.PureComponent=L,Cn.StrictMode=r,Cn.Suspense=d,Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,Cn.cloneElement=function(V,Z,Ce){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Ae=k({},V.props),De=V.key,Ie=V.ref,Ne=V._owner;if(Z!=null){if(Z.ref!==void 0&&(Ie=Z.ref,Ne=z.current),Z.key!==void 0&&(De=""+Z.key),V.type&&V.type.defaultProps)var Ve=V.type.defaultProps;for(Ke in Z)D.call(Z,Ke)&&!U.hasOwnProperty(Ke)&&(Ae[Ke]=Z[Ke]===void 0&&Ve!==void 0?Ve[Ke]:Z[Ke])}var Ke=arguments.length-2;if(Ke===1)Ae.children=Ce;else if(1<Ke){Ve=Array(Ke);for(var Xe=0;Xe<Ke;Xe++)Ve[Xe]=arguments[Xe+2];Ae.children=Ve}return{$$typeof:t,type:V.type,key:De,ref:Ie,props:Ae,_owner:Ne}},Cn.createContext=function(V){return V={$$typeof:l,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:a,_context:V},V.Consumer=V},Cn.createElement=Y,Cn.createFactory=function(V){var Z=Y.bind(null,V);return Z.type=V,Z},Cn.createRef=function(){return{current:null}},Cn.forwardRef=function(V){return{$$typeof:u,render:V}},Cn.isValidElement=X,Cn.lazy=function(V){return{$$typeof:g,_payload:{_status:-1,_result:V},_init:ce}},Cn.memo=function(V,Z){return{$$typeof:h,type:V,compare:Z===void 0?null:Z}},Cn.startTransition=function(V){var Z=me.transition;me.transition={};try{V()}finally{me.transition=Z}},Cn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Cn.useCallback=function(V,Z){return ge.current.useCallback(V,Z)},Cn.useContext=function(V){return ge.current.useContext(V)},Cn.useDebugValue=function(){},Cn.useDeferredValue=function(V){return ge.current.useDeferredValue(V)},Cn.useEffect=function(V,Z){return ge.current.useEffect(V,Z)},Cn.useId=function(){return ge.current.useId()},Cn.useImperativeHandle=function(V,Z,Ce){return ge.current.useImperativeHandle(V,Z,Ce)},Cn.useInsertionEffect=function(V,Z){return ge.current.useInsertionEffect(V,Z)},Cn.useLayoutEffect=function(V,Z){return ge.current.useLayoutEffect(V,Z)},Cn.useMemo=function(V,Z){return ge.current.useMemo(V,Z)},Cn.useReducer=function(V,Z,Ce){return ge.current.useReducer(V,Z,Ce)},Cn.useRef=function(V){return ge.current.useRef(V)},Cn.useState=function(V){return ge.current.useState(V)},Cn.useSyncExternalStore=function(V,Z,Ce){return ge.current.useSyncExternalStore(V,Z,Ce)},Cn.useTransition=function(){return ge.current.useTransition()},Cn.version="18.2.0",Cn}var PS={exports:{}};/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */PS.exports;var hO;function vV(){return hO||(hO=1,function(t,n){process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e="18.2.0",r=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),E=Symbol.iterator,R="@@iterator";function L(B){if(B===null||typeof B!="object")return null;var ee=E&&B[E]||B[R];return typeof ee=="function"?ee:null}var A={current:null},O={transition:null},D={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},z={current:null},U={},Y=null;function q(B){Y=B}U.setExtraStackFrame=function(B){Y=B},U.getCurrentStack=null,U.getStackAddendum=function(){var B="";Y&&(B+=Y);var ee=U.getCurrentStack;return ee&&(B+=ee()||""),B};var X=!1,ie=!1,pe=!1,ae=!1,te=!1,he={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:O,ReactCurrentOwner:z};he.ReactDebugCurrentFrame=U,he.ReactCurrentActQueue=D;function ce(B){{for(var ee=arguments.length,ye=new Array(ee>1?ee-1:0),Ee=1;Ee<ee;Ee++)ye[Ee-1]=arguments[Ee];me("warn",B,ye)}}function ge(B){{for(var ee=arguments.length,ye=new Array(ee>1?ee-1:0),Ee=1;Ee<ee;Ee++)ye[Ee-1]=arguments[Ee];me("error",B,ye)}}function me(B,ee,ye){{var Ee=he.ReactDebugCurrentFrame,Fe=Ee.getStackAddendum();Fe!==""&&(ee+="%s",ye=ye.concat([Fe]));var pt=ye.map(function(Je){return String(Je)});pt.unshift("Warning: "+ee),Function.prototype.apply.call(console[B],console,pt)}}var we={};function V(B,ee){{var ye=B.constructor,Ee=ye&&(ye.displayName||ye.name)||"ReactClass",Fe=Ee+"."+ee;if(we[Fe])return;ge("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",ee,Ee),we[Fe]=!0}}var Z={isMounted:function(B){return!1},enqueueForceUpdate:function(B,ee,ye){V(B,"forceUpdate")},enqueueReplaceState:function(B,ee,ye,Ee){V(B,"replaceState")},enqueueSetState:function(B,ee,ye,Ee){V(B,"setState")}},Ce=Object.assign,Ae={};Object.freeze(Ae);function De(B,ee,ye){this.props=B,this.context=ee,this.refs=Ae,this.updater=ye||Z}De.prototype.isReactComponent={},De.prototype.setState=function(B,ee){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ee,"setState")},De.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};{var Ie={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},Ne=function(B,ee){Object.defineProperty(De.prototype,B,{get:function(){ce("%s(...) is deprecated in plain JavaScript React classes. %s",ee[0],ee[1])}})};for(var Ve in Ie)Ie.hasOwnProperty(Ve)&&Ne(Ve,Ie[Ve])}function Ke(){}Ke.prototype=De.prototype;function Xe(B,ee,ye){this.props=B,this.context=ee,this.refs=Ae,this.updater=ye||Z}var at=Xe.prototype=new Ke;at.constructor=Xe,Ce(at,De.prototype),at.isPureReactComponent=!0;function _t(){var B={current:null};return Object.seal(B),B}var We=Array.isArray;function Ht(B){return We(B)}function dn(B){{var ee=typeof Symbol=="function"&&Symbol.toStringTag,ye=ee&&B[Symbol.toStringTag]||B.constructor.name||"Object";return ye}}function Xt(B){try{return ln(B),!1}catch{return!0}}function ln(B){return""+B}function jn(B){if(Xt(B))return ge("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",dn(B)),ln(B)}function qr(B,ee,ye){var Ee=B.displayName;if(Ee)return Ee;var Fe=ee.displayName||ee.name||"";return Fe!==""?ye+"("+Fe+")":ye}function fi(B){return B.displayName||"Context"}function jr(B){if(B==null)return null;if(typeof B.tag=="number"&&ge("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof B=="function")return B.displayName||B.name||null;if(typeof B=="string")return B;switch(B){case a:return"Fragment";case o:return"Portal";case u:return"Profiler";case l:return"StrictMode";case v:return"Suspense";case S:return"SuspenseList"}if(typeof B=="object")switch(B.$$typeof){case h:var ee=B;return fi(ee)+".Consumer";case d:var ye=B;return fi(ye._context)+".Provider";case g:return qr(B,B.render,"ForwardRef");case w:var Ee=B.displayName||null;return Ee!==null?Ee:jr(B.type)||"Memo";case k:{var Fe=B,pt=Fe._payload,Je=Fe._init;try{return jr(Je(pt))}catch{return null}}}return null}var Mr=Object.prototype.hasOwnProperty,Bi={key:!0,ref:!0,__self:!0,__source:!0},hi,io,ri;ri={};function Hi(B){if(Mr.call(B,"ref")){var ee=Object.getOwnPropertyDescriptor(B,"ref").get;if(ee&&ee.isReactWarning)return!1}return B.ref!==void 0}function Kn(B){if(Mr.call(B,"key")){var ee=Object.getOwnPropertyDescriptor(B,"key").get;if(ee&&ee.isReactWarning)return!1}return B.key!==void 0}function ii(B,ee){var ye=function(){hi||(hi=!0,ge("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ee))};ye.isReactWarning=!0,Object.defineProperty(B,"key",{get:ye,configurable:!0})}function ss(B,ee){var ye=function(){io||(io=!0,ge("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ee))};ye.isReactWarning=!0,Object.defineProperty(B,"ref",{get:ye,configurable:!0})}function wr(B){if(typeof B.ref=="string"&&z.current&&B.__self&&z.current.stateNode!==B.__self){var ee=jr(z.current.type);ri[ee]||(ge('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ee,B.ref),ri[ee]=!0)}}var et=function(B,ee,ye,Ee,Fe,pt,Je){var St={$$typeof:r,type:B,key:ee,ref:ye,props:Je,_owner:pt};return St._store={},Object.defineProperty(St._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(St,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Ee}),Object.defineProperty(St,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Fe}),Object.freeze&&(Object.freeze(St.props),Object.freeze(St)),St};function wt(B,ee,ye){var Ee,Fe={},pt=null,Je=null,St=null,Gt=null;if(ee!=null){Hi(ee)&&(Je=ee.ref,wr(ee)),Kn(ee)&&(jn(ee.key),pt=""+ee.key),St=ee.__self===void 0?null:ee.__self,Gt=ee.__source===void 0?null:ee.__source;for(Ee in ee)Mr.call(ee,Ee)&&!Bi.hasOwnProperty(Ee)&&(Fe[Ee]=ee[Ee])}var pn=arguments.length-2;if(pn===1)Fe.children=ye;else if(pn>1){for(var $n=Array(pn),Tn=0;Tn<pn;Tn++)$n[Tn]=arguments[Tn+2];Object.freeze&&Object.freeze($n),Fe.children=$n}if(B&&B.defaultProps){var tr=B.defaultProps;for(Ee in tr)Fe[Ee]===void 0&&(Fe[Ee]=tr[Ee])}if(pt||Je){var lr=typeof B=="function"?B.displayName||B.name||"Unknown":B;pt&&ii(Fe,lr),Je&&ss(Fe,lr)}return et(B,pt,Je,St,Gt,z.current,Fe)}function rn(B,ee){var ye=et(B.type,ee,B.ref,B._self,B._source,B._owner,B.props);return ye}function En(B,ee,ye){if(B==null)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Ee,Fe=Ce({},B.props),pt=B.key,Je=B.ref,St=B._self,Gt=B._source,pn=B._owner;if(ee!=null){Hi(ee)&&(Je=ee.ref,pn=z.current),Kn(ee)&&(jn(ee.key),pt=""+ee.key);var $n;B.type&&B.type.defaultProps&&($n=B.type.defaultProps);for(Ee in ee)Mr.call(ee,Ee)&&!Bi.hasOwnProperty(Ee)&&(ee[Ee]===void 0&&$n!==void 0?Fe[Ee]=$n[Ee]:Fe[Ee]=ee[Ee])}var Tn=arguments.length-2;if(Tn===1)Fe.children=ye;else if(Tn>1){for(var tr=Array(Tn),lr=0;lr<Tn;lr++)tr[lr]=arguments[lr+2];Fe.children=tr}return et(B.type,pt,Je,St,Gt,pn,Fe)}function Sn(B){return typeof B=="object"&&B!==null&&B.$$typeof===r}var xr=".",ar=":";function pi(B){var ee=/[=:]/g,ye={"=":"=0",":":"=2"},Ee=B.replace(ee,function(Fe){return ye[Fe]});return"$"+Ee}var fn=!1,gi=/\/+/g;function Rn(B){return B.replace(gi,"$&/")}function Mn(B,ee){return typeof B=="object"&&B!==null&&B.key!=null?(jn(B.key),pi(""+B.key)):ee.toString(36)}function oo(B,ee,ye,Ee,Fe){var pt=typeof B;(pt==="undefined"||pt==="boolean")&&(B=null);var Je=!1;if(B===null)Je=!0;else switch(pt){case"string":case"number":Je=!0;break;case"object":switch(B.$$typeof){case r:case o:Je=!0}}if(Je){var St=B,Gt=Fe(St),pn=Ee===""?xr+Mn(St,0):Ee;if(Ht(Gt)){var $n="";pn!=null&&($n=Rn(pn)+"/"),oo(Gt,ee,$n,"",function(tv){return tv})}else Gt!=null&&(Sn(Gt)&&(Gt.key&&(!St||St.key!==Gt.key)&&jn(Gt.key),Gt=rn(Gt,ye+(Gt.key&&(!St||St.key!==Gt.key)?Rn(""+Gt.key)+"/":"")+pn)),ee.push(Gt));return 1}var Tn,tr,lr=0,yn=Ee===""?xr:Ee+ar;if(Ht(B))for(var gl=0;gl<B.length;gl++)Tn=B[gl],tr=yn+Mn(Tn,gl),lr+=oo(Tn,ee,ye,tr,Fe);else{var wd=L(B);if(typeof wd=="function"){var Vf=B;wd===Vf.entries&&(fn||ce("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),fn=!0);for(var ev=wd.call(Vf),ua,Kf=0;!(ua=ev.next()).done;)Tn=ua.value,tr=yn+Mn(Tn,Kf++),lr+=oo(Tn,ee,ye,tr,Fe)}else if(pt==="object"){var Yf=String(B);throw new Error("Objects are not valid as a React child (found: "+(Yf==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Yf)+"). If you meant to render a collection of children, use an array instead.")}}return lr}function mi(B,ee,ye){if(B==null)return B;var Ee=[],Fe=0;return oo(B,Ee,"","",function(pt){return ee.call(ye,pt,Fe++)}),Ee}function Is(B){var ee=0;return mi(B,function(){ee++}),ee}function aa(B,ee,ye){mi(B,function(){ee.apply(this,arguments)},ye)}function $a(B){return mi(B,function(ee){return ee})||[]}function so(B){if(!Sn(B))throw new Error("React.Children.only expected to receive a single React element child.");return B}function Oa(B){var ee={$$typeof:h,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};ee.Provider={$$typeof:d,_context:ee};var ye=!1,Ee=!1,Fe=!1;{var pt={$$typeof:h,_context:ee};Object.defineProperties(pt,{Provider:{get:function(){return Ee||(Ee=!0,ge("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),ee.Provider},set:function(Je){ee.Provider=Je}},_currentValue:{get:function(){return ee._currentValue},set:function(Je){ee._currentValue=Je}},_currentValue2:{get:function(){return ee._currentValue2},set:function(Je){ee._currentValue2=Je}},_threadCount:{get:function(){return ee._threadCount},set:function(Je){ee._threadCount=Je}},Consumer:{get:function(){return ye||(ye=!0,ge("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),ee.Consumer}},displayName:{get:function(){return ee.displayName},set:function(Je){Fe||(ce("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",Je),Fe=!0)}}}),ee.Consumer=pt}return ee._currentRenderer=null,ee._currentRenderer2=null,ee}var ao=-1,Rs=0,lo=1,Ms=2;function vi(B){if(B._status===ao){var ee=B._result,ye=ee();if(ye.then(function(pt){if(B._status===Rs||B._status===ao){var Je=B;Je._status=lo,Je._result=pt}},function(pt){if(B._status===Rs||B._status===ao){var Je=B;Je._status=Ms,Je._result=pt}}),B._status===ao){var Ee=B;Ee._status=Rs,Ee._result=ye}}if(B._status===lo){var Fe=B._result;return Fe===void 0&&ge(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,Fe),"default"in Fe||ge(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,Fe),Fe.default}else throw B._result}function Ii(B){var ee={_status:ao,_result:B},ye={$$typeof:k,_payload:ee,_init:vi};{var Ee,Fe;Object.defineProperties(ye,{defaultProps:{configurable:!0,get:function(){return Ee},set:function(pt){ge("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),Ee=pt,Object.defineProperty(ye,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return Fe},set:function(pt){ge("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),Fe=pt,Object.defineProperty(ye,"propTypes",{enumerable:!0})}}})}return ye}function yi(B){B!=null&&B.$$typeof===w?ge("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof B!="function"?ge("forwardRef requires a render function but was given %s.",B===null?"null":typeof B):B.length!==0&&B.length!==2&&ge("forwardRef render functions accept exactly two parameters: props and ref. %s",B.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),B!=null&&(B.defaultProps!=null||B.propTypes!=null)&&ge("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?");var ee={$$typeof:g,render:B};{var ye;Object.defineProperty(ee,"displayName",{enumerable:!1,configurable:!0,get:function(){return ye},set:function(Ee){ye=Ee,!B.name&&!B.displayName&&(B.displayName=Ee)}})}return ee}var ne;ne=Symbol.for("react.module.reference");function ze(B){return!!(typeof B=="string"||typeof B=="function"||B===a||B===u||te||B===l||B===v||B===S||ae||B===C||X||ie||pe||typeof B=="object"&&B!==null&&(B.$$typeof===k||B.$$typeof===w||B.$$typeof===d||B.$$typeof===h||B.$$typeof===g||B.$$typeof===ne||B.getModuleId!==void 0))}function tt(B,ee){ze(B)||ge("memo: The first argument must be a component. Instead received: %s",B===null?"null":typeof B);var ye={$$typeof:w,type:B,compare:ee===void 0?null:ee};{var Ee;Object.defineProperty(ye,"displayName",{enumerable:!1,configurable:!0,get:function(){return Ee},set:function(Fe){Ee=Fe,!B.name&&!B.displayName&&(B.displayName=Fe)}})}return ye}function st(){var B=A.current;return B===null&&ge(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`),B}function qt(B){var ee=st();if(B._context!==void 0){var ye=B._context;ye.Consumer===B?ge("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):ye.Provider===B&&ge("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return ee.useContext(B)}function Zt(B){var ee=st();return ee.useState(B)}function Jt(B,ee,ye){var Ee=st();return Ee.useReducer(B,ee,ye)}function Pt(B){var ee=st();return ee.useRef(B)}function Nr(B,ee){var ye=st();return ye.useEffect(B,ee)}function Yn(B,ee){var ye=st();return ye.useInsertionEffect(B,ee)}function Wn(B,ee){var ye=st();return ye.useLayoutEffect(B,ee)}function pr(B,ee){var ye=st();return ye.useCallback(B,ee)}function As(B,ee){var ye=st();return ye.useMemo(B,ee)}function rc(B,ee,ye){var Ee=st();return Ee.useImperativeHandle(B,ee,ye)}function vn(B,ee){{var ye=st();return ye.useDebugValue(B,ee)}}function Bf(){var B=st();return B.useTransition()}function as(B){var ee=st();return ee.useDeferredValue(B)}function tn(){var B=st();return B.useId()}function $s(B,ee,ye){var Ee=st();return Ee.useSyncExternalStore(B,ee,ye)}var Da=0,co,La,Vi,ou,Ri,su,au;function dl(){}dl.__reactDisabledLog=!0;function ic(){{if(Da===0){co=console.log,La=console.info,Vi=console.warn,ou=console.error,Ri=console.group,su=console.groupCollapsed,au=console.groupEnd;var B={configurable:!0,enumerable:!0,value:dl,writable:!0};Object.defineProperties(console,{info:B,log:B,warn:B,error:B,group:B,groupCollapsed:B,groupEnd:B})}Da++}}function Io(){{if(Da--,Da===0){var B={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Ce({},B,{value:co}),info:Ce({},B,{value:La}),warn:Ce({},B,{value:Vi}),error:Ce({},B,{value:ou}),group:Ce({},B,{value:Ri}),groupCollapsed:Ce({},B,{value:su}),groupEnd:Ce({},B,{value:au})})}Da<0&&ge("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Ro=he.ReactCurrentDispatcher,Si;function ja(B,ee,ye){{if(Si===void 0)try{throw Error()}catch(Fe){var Ee=Fe.stack.trim().match(/\n( *(at )?)/);Si=Ee&&Ee[1]||""}return`
`+Si+B}}var Na=!1,za;{var oc=typeof WeakMap=="function"?WeakMap:Map;za=new oc}function fl(B,ee){if(!B||Na)return"";{var ye=za.get(B);if(ye!==void 0)return ye}var Ee;Na=!0;var Fe=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var pt;pt=Ro.current,Ro.current=null,ic();try{if(ee){var Je=function(){throw Error()};if(Object.defineProperty(Je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Je,[])}catch(yn){Ee=yn}Reflect.construct(B,[],Je)}else{try{Je.call()}catch(yn){Ee=yn}B.call(Je.prototype)}}else{try{throw Error()}catch(yn){Ee=yn}B()}}catch(yn){if(yn&&Ee&&typeof yn.stack=="string"){for(var St=yn.stack.split(`
`),Gt=Ee.stack.split(`
`),pn=St.length-1,$n=Gt.length-1;pn>=1&&$n>=0&&St[pn]!==Gt[$n];)$n--;for(;pn>=1&&$n>=0;pn--,$n--)if(St[pn]!==Gt[$n]){if(pn!==1||$n!==1)do if(pn--,$n--,$n<0||St[pn]!==Gt[$n]){var Tn=`
`+St[pn].replace(" at new "," at ");return B.displayName&&Tn.includes("<anonymous>")&&(Tn=Tn.replace("<anonymous>",B.displayName)),typeof B=="function"&&za.set(B,Tn),Tn}while(pn>=1&&$n>=0);break}}}finally{Na=!1,Ro.current=pt,Io(),Error.prepareStackTrace=Fe}var tr=B?B.displayName||B.name:"",lr=tr?ja(tr):"";return typeof B=="function"&&za.set(B,lr),lr}function la(B,ee,ye){return fl(B,!1)}function Hf(B){var ee=B.prototype;return!!(ee&&ee.isReactComponent)}function ls(B,ee,ye){if(B==null)return"";if(typeof B=="function")return fl(B,Hf(B));if(typeof B=="string")return ja(B);switch(B){case v:return ja("Suspense");case S:return ja("SuspenseList")}if(typeof B=="object")switch(B.$$typeof){case g:return la(B.render);case w:return ls(B.type,ee,ye);case k:{var Ee=B,Fe=Ee._payload,pt=Ee._init;try{return ls(pt(Fe),ee,ye)}catch{}}}return""}var hn={},cs=he.ReactDebugCurrentFrame;function hl(B){if(B){var ee=B._owner,ye=ls(B.type,B._source,ee?ee.type:null);cs.setExtraStackFrame(ye)}else cs.setExtraStackFrame(null)}function sc(B,ee,ye,Ee,Fe){{var pt=Function.call.bind(Mr);for(var Je in B)if(pt(B,Je)){var St=void 0;try{if(typeof B[Je]!="function"){var Gt=Error((Ee||"React class")+": "+ye+" type `"+Je+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof B[Je]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Gt.name="Invariant Violation",Gt}St=B[Je](ee,Je,Ee,ye,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(pn){St=pn}St&&!(St instanceof Error)&&(hl(Fe),ge("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Ee||"React class",ye,Je,typeof St),hl(null)),St instanceof Error&&!(St.message in hn)&&(hn[St.message]=!0,hl(Fe),ge("Failed %s type: %s",ye,St.message),hl(null))}}}function on(B){if(B){var ee=B._owner,ye=ls(B.type,B._source,ee?ee.type:null);q(ye)}else q(null)}var ac;ac=!1;function lc(){if(z.current){var B=jr(z.current.type);if(B)return`

Check the render method of \``+B+"`."}return""}function Vt(B){if(B!==void 0){var ee=B.fileName.replace(/^.*[\\\/]/,""),ye=B.lineNumber;return`

Check your code at `+ee+":"+ye+"."}return""}function pl(B){return B!=null?Vt(B.__source):""}var gr={};function zr(B){var ee=lc();if(!ee){var ye=typeof B=="string"?B:B.displayName||B.name;ye&&(ee=`

Check the top-level render call using <`+ye+">.")}return ee}function bi(B,ee){if(!(!B._store||B._store.validated||B.key!=null)){B._store.validated=!0;var ye=zr(ee);if(!gr[ye]){gr[ye]=!0;var Ee="";B&&B._owner&&B._owner!==z.current&&(Ee=" It was passed a child from "+jr(B._owner.type)+"."),on(B),ge('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',ye,Ee),on(null)}}}function Fa(B,ee){if(typeof B=="object"){if(Ht(B))for(var ye=0;ye<B.length;ye++){var Ee=B[ye];Sn(Ee)&&bi(Ee,ee)}else if(Sn(B))B._store&&(B._store.validated=!0);else if(B){var Fe=L(B);if(typeof Fe=="function"&&Fe!==B.entries)for(var pt=Fe.call(B),Je;!(Je=pt.next()).done;)Sn(Je.value)&&bi(Je.value,ee)}}}function er(B){{var ee=B.type;if(ee==null||typeof ee=="string")return;var ye;if(typeof ee=="function")ye=ee.propTypes;else if(typeof ee=="object"&&(ee.$$typeof===g||ee.$$typeof===w))ye=ee.propTypes;else return;if(ye){var Ee=jr(ee);sc(ye,B.props,"prop",Ee,B)}else if(ee.PropTypes!==void 0&&!ac){ac=!0;var Fe=jr(ee);ge("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Fe||"Unknown")}typeof ee.getDefaultProps=="function"&&!ee.getDefaultProps.isReactClassApproved&&ge("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function An(B){{for(var ee=Object.keys(B.props),ye=0;ye<ee.length;ye++){var Ee=ee[ye];if(Ee!=="children"&&Ee!=="key"){on(B),ge("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Ee),on(null);break}}B.ref!==null&&(on(B),ge("Invalid attribute `ref` supplied to `React.Fragment`."),on(null))}}function cc(B,ee,ye){var Ee=ze(B);if(!Ee){var Fe="";(B===void 0||typeof B=="object"&&B!==null&&Object.keys(B).length===0)&&(Fe+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var pt=pl(ee);pt?Fe+=pt:Fe+=lc();var Je;B===null?Je="null":Ht(B)?Je="array":B!==void 0&&B.$$typeof===r?(Je="<"+(jr(B.type)||"Unknown")+" />",Fe=" Did you accidentally export a JSX literal instead of a component?"):Je=typeof B,ge("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Je,Fe)}var St=wt.apply(this,arguments);if(St==null)return St;if(Ee)for(var Gt=2;Gt<arguments.length;Gt++)Fa(arguments[Gt],B);return B===a?An(St):er(St),St}var Ki=!1;function Vr(B){var ee=cc.bind(null,B);return ee.type=B,Ki||(Ki=!0,ce("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(ee,"type",{enumerable:!1,get:function(){return ce("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:B}),B}}),ee}function us(B,ee,ye){for(var Ee=En.apply(this,arguments),Fe=2;Fe<arguments.length;Fe++)Fa(arguments[Fe],Ee.type);return er(Ee),Ee}function lu(B,ee){var ye=O.transition;O.transition={};var Ee=O.transition;O.transition._updatedFibers=new Set;try{B()}finally{if(O.transition=ye,ye===null&&Ee._updatedFibers){var Fe=Ee._updatedFibers.size;Fe>10&&ce("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),Ee._updatedFibers.clear()}}}var uo=!1,ca=null;function bd(B){if(ca===null)try{var ee=("require"+Math.random()).slice(0,7),ye=t&&t[ee];ca=ye.call(t,"timers").setImmediate}catch{ca=function(Fe){uo===!1&&(uo=!0,typeof MessageChannel>"u"&&ge("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var pt=new MessageChannel;pt.port1.onmessage=Fe,pt.port2.postMessage(void 0)}}return ca(B)}var Mo=0,Ua=!1;function Q(B){{var ee=Mo;Mo++,D.current===null&&(D.current=[]);var ye=D.isBatchingLegacy,Ee;try{if(D.isBatchingLegacy=!0,Ee=B(),!ye&&D.didScheduleLegacyUpdate){var Fe=D.current;Fe!==null&&(D.didScheduleLegacyUpdate=!1,_n(Fe))}}catch(tr){throw ue(ee),tr}finally{D.isBatchingLegacy=ye}if(Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var pt=Ee,Je=!1,St={then:function(tr,lr){Je=!0,pt.then(function(yn){ue(ee),Mo===0?je(yn,tr,lr):tr(yn)},function(yn){ue(ee),lr(yn)})}};return!Ua&&typeof Promise<"u"&&Promise.resolve().then(function(){}).then(function(){Je||(Ua=!0,ge("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),St}else{var Gt=Ee;if(ue(ee),Mo===0){var pn=D.current;pn!==null&&(_n(pn),D.current=null);var $n={then:function(tr,lr){D.current===null?(D.current=[],je(Gt,tr,lr)):tr(Gt)}};return $n}else{var Tn={then:function(tr,lr){tr(Gt)}};return Tn}}}}function ue(B){B!==Mo-1&&ge("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),Mo=B}function je(B,ee,ye){{var Ee=D.current;if(Ee!==null)try{_n(Ee),bd(function(){Ee.length===0?(D.current=null,ee(B)):je(B,ee,ye)})}catch(Fe){ye(Fe)}else ee(B)}}var it=!1;function _n(B){if(!it){it=!0;var ee=0;try{for(;ee<B.length;ee++){var ye=B[ee];do ye=ye(!0);while(ye!==null)}B.length=0}catch(Ee){throw B=B.slice(ee+1),Ee}finally{it=!1}}}var Ft=cc,Hn=us,Cr=Vr,Vn={map:mi,forEach:aa,count:Is,toArray:$a,only:so};n.Children=Vn,n.Component=De,n.Fragment=a,n.Profiler=u,n.PureComponent=Xe,n.StrictMode=l,n.Suspense=v,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,n.cloneElement=Hn,n.createContext=Oa,n.createElement=Ft,n.createFactory=Cr,n.createRef=_t,n.forwardRef=yi,n.isValidElement=Sn,n.lazy=Ii,n.memo=tt,n.startTransition=lu,n.unstable_act=Q,n.useCallback=pr,n.useContext=qt,n.useDebugValue=vn,n.useDeferredValue=as,n.useEffect=Nr,n.useId=tn,n.useImperativeHandle=rc,n.useInsertionEffect=Yn,n.useLayoutEffect=Wn,n.useMemo=As,n.useReducer=Jt,n.useRef=Pt,n.useState=Zt,n.useSyncExternalStore=$s,n.useTransition=Bf,n.version=e,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()}(PS,PS.exports)),PS.exports}process.env.NODE_ENV==="production"?$P.exports=mV():$P.exports=vV();var I=$P.exports;const ft=Of(I),yV=gV({__proto__:null,default:ft},[I]);var nd={},OP={exports:{}},Qs={},bx={exports:{}},Hk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pO;function SV(){return pO||(pO=1,function(t){function n(me,we){var V=me.length;me.push(we);e:for(;0<V;){var Z=V-1>>>1,Ce=me[Z];if(0<o(Ce,we))me[Z]=we,me[V]=Ce,V=Z;else break e}}function e(me){return me.length===0?null:me[0]}function r(me){if(me.length===0)return null;var we=me[0],V=me.pop();if(V!==we){me[0]=V;e:for(var Z=0,Ce=me.length,Ae=Ce>>>1;Z<Ae;){var De=2*(Z+1)-1,Ie=me[De],Ne=De+1,Ve=me[Ne];if(0>o(Ie,V))Ne<Ce&&0>o(Ve,Ie)?(me[Z]=Ve,me[Ne]=V,Z=Ne):(me[Z]=Ie,me[De]=V,Z=De);else if(Ne<Ce&&0>o(Ve,V))me[Z]=Ve,me[Ne]=V,Z=Ne;else break e}}return we}function o(me,we){var V=me.sortIndex-we.sortIndex;return V!==0?V:me.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],h=[],g=1,v=null,S=3,w=!1,k=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(me){for(var we=e(h);we!==null;){if(we.callback===null)r(h);else if(we.startTime<=me)r(h),we.sortIndex=we.expirationTime,n(d,we);else break;we=e(h)}}function O(me){if(C=!1,A(me),!k)if(e(d)!==null)k=!0,ce(D);else{var we=e(h);we!==null&&ge(O,we.startTime-me)}}function D(me,we){k=!1,C&&(C=!1,R(Y),Y=-1),w=!0;var V=S;try{for(A(we),v=e(d);v!==null&&(!(v.expirationTime>we)||me&&!ie());){var Z=v.callback;if(typeof Z=="function"){v.callback=null,S=v.priorityLevel;var Ce=Z(v.expirationTime<=we);we=t.unstable_now(),typeof Ce=="function"?v.callback=Ce:v===e(d)&&r(d),A(we)}else r(d);v=e(d)}if(v!==null)var Ae=!0;else{var De=e(h);De!==null&&ge(O,De.startTime-we),Ae=!1}return Ae}finally{v=null,S=V,w=!1}}var z=!1,U=null,Y=-1,q=5,X=-1;function ie(){return!(t.unstable_now()-X<q)}function pe(){if(U!==null){var me=t.unstable_now();X=me;var we=!0;try{we=U(!0,me)}finally{we?ae():(z=!1,U=null)}}else z=!1}var ae;if(typeof L=="function")ae=function(){L(pe)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,he=te.port2;te.port1.onmessage=pe,ae=function(){he.postMessage(null)}}else ae=function(){E(pe,0)};function ce(me){U=me,z||(z=!0,ae())}function ge(me,we){Y=E(function(){me(t.unstable_now())},we)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(me){me.callback=null},t.unstable_continueExecution=function(){k||w||(k=!0,ce(D))},t.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<me?Math.floor(1e3/me):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return e(d)},t.unstable_next=function(me){switch(S){case 1:case 2:case 3:var we=3;break;default:we=S}var V=S;S=we;try{return me()}finally{S=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(me,we){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var V=S;S=me;try{return we()}finally{S=V}},t.unstable_scheduleCallback=function(me,we,V){var Z=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Z+V:Z):V=Z,me){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=V+Ce,me={id:g++,callback:we,priorityLevel:me,startTime:V,expirationTime:Ce,sortIndex:-1},V>Z?(me.sortIndex=V,n(h,me),e(d)===null&&me===e(h)&&(C?(R(Y),Y=-1):C=!0,ge(O,V-Z))):(me.sortIndex=Ce,n(d,me),k||w||(k=!0,ce(D))),me},t.unstable_shouldYield=ie,t.unstable_wrapCallback=function(me){var we=S;return function(){var V=S;S=we;try{return me.apply(this,arguments)}finally{S=V}}}}(Hk)),Hk}var Vk={};/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gO;function bV(){return gO||(gO=1,function(t){process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var n=!1,e=!1,r=5;function o(et,wt){var rn=et.length;et.push(wt),u(et,wt,rn)}function a(et){return et.length===0?null:et[0]}function l(et){if(et.length===0)return null;var wt=et[0],rn=et.pop();return rn!==wt&&(et[0]=rn,d(et,rn,0)),wt}function u(et,wt,rn){for(var En=rn;En>0;){var Sn=En-1>>>1,xr=et[Sn];if(h(xr,wt)>0)et[Sn]=wt,et[En]=xr,En=Sn;else return}}function d(et,wt,rn){for(var En=rn,Sn=et.length,xr=Sn>>>1;En<xr;){var ar=(En+1)*2-1,pi=et[ar],fn=ar+1,gi=et[fn];if(h(pi,wt)<0)fn<Sn&&h(gi,pi)<0?(et[En]=gi,et[fn]=wt,En=fn):(et[En]=pi,et[ar]=wt,En=ar);else if(fn<Sn&&h(gi,wt)<0)et[En]=gi,et[fn]=wt,En=fn;else return}}function h(et,wt){var rn=et.sortIndex-wt.sortIndex;return rn!==0?rn:et.id-wt.id}var g=1,v=2,S=3,w=4,k=5;function C(et,wt){}var E=typeof performance=="object"&&typeof performance.now=="function";if(E){var R=performance;t.unstable_now=function(){return R.now()}}else{var L=Date,A=L.now();t.unstable_now=function(){return L.now()-A}}var O=1073741823,D=-1,z=250,U=5e3,Y=1e4,q=O,X=[],ie=[],pe=1,ae=null,te=S,he=!1,ce=!1,ge=!1,me=typeof setTimeout=="function"?setTimeout:null,we=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(et){for(var wt=a(ie);wt!==null;){if(wt.callback===null)l(ie);else if(wt.startTime<=et)l(ie),wt.sortIndex=wt.expirationTime,o(X,wt);else return;wt=a(ie)}}function Ce(et){if(ge=!1,Z(et),!ce)if(a(X)!==null)ce=!0,Hi(Ae);else{var wt=a(ie);wt!==null&&Kn(Ce,wt.startTime-et)}}function Ae(et,wt){ce=!1,ge&&(ge=!1,ii()),he=!0;var rn=te;try{var En;if(!e)return De(et,wt)}finally{ae=null,te=rn,he=!1}}function De(et,wt){var rn=wt;for(Z(rn),ae=a(X);ae!==null&&!n&&!(ae.expirationTime>rn&&(!et||fi()));){var En=ae.callback;if(typeof En=="function"){ae.callback=null,te=ae.priorityLevel;var Sn=ae.expirationTime<=rn,xr=En(Sn);rn=t.unstable_now(),typeof xr=="function"?ae.callback=xr:ae===a(X)&&l(X),Z(rn)}else l(X);ae=a(X)}if(ae!==null)return!0;var ar=a(ie);return ar!==null&&Kn(Ce,ar.startTime-rn),!1}function Ie(et,wt){switch(et){case g:case v:case S:case w:case k:break;default:et=S}var rn=te;te=et;try{return wt()}finally{te=rn}}function Ne(et){var wt;switch(te){case g:case v:case S:wt=S;break;default:wt=te;break}var rn=te;te=wt;try{return et()}finally{te=rn}}function Ve(et){var wt=te;return function(){var rn=te;te=wt;try{return et.apply(this,arguments)}finally{te=rn}}}function Ke(et,wt,rn){var En=t.unstable_now(),Sn;if(typeof rn=="object"&&rn!==null){var xr=rn.delay;typeof xr=="number"&&xr>0?Sn=En+xr:Sn=En}else Sn=En;var ar;switch(et){case g:ar=D;break;case v:ar=z;break;case k:ar=q;break;case w:ar=Y;break;case S:default:ar=U;break}var pi=Sn+ar,fn={id:pe++,callback:wt,priorityLevel:et,startTime:Sn,expirationTime:pi,sortIndex:-1};return Sn>En?(fn.sortIndex=Sn,o(ie,fn),a(X)===null&&fn===a(ie)&&(ge?ii():ge=!0,Kn(Ce,Sn-En))):(fn.sortIndex=pi,o(X,fn),!ce&&!he&&(ce=!0,Hi(Ae))),fn}function Xe(){}function at(){!ce&&!he&&(ce=!0,Hi(Ae))}function _t(){return a(X)}function We(et){et.callback=null}function Ht(){return te}var dn=!1,Xt=null,ln=-1,jn=r,qr=-1;function fi(){var et=t.unstable_now()-qr;return!(et<jn)}function jr(){}function Mr(et){if(et<0||et>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}et>0?jn=Math.floor(1e3/et):jn=r}var Bi=function(){if(Xt!==null){var et=t.unstable_now();qr=et;var wt=!0,rn=!0;try{rn=Xt(wt,et)}finally{rn?hi():(dn=!1,Xt=null)}}else dn=!1},hi;if(typeof V=="function")hi=function(){V(Bi)};else if(typeof MessageChannel<"u"){var io=new MessageChannel,ri=io.port2;io.port1.onmessage=Bi,hi=function(){ri.postMessage(null)}}else hi=function(){me(Bi,0)};function Hi(et){Xt=et,dn||(dn=!0,hi())}function Kn(et,wt){ln=me(function(){et(t.unstable_now())},wt)}function ii(){we(ln),ln=-1}var ss=jr,wr=null;t.unstable_IdlePriority=k,t.unstable_ImmediatePriority=g,t.unstable_LowPriority=w,t.unstable_NormalPriority=S,t.unstable_Profiling=wr,t.unstable_UserBlockingPriority=v,t.unstable_cancelCallback=We,t.unstable_continueExecution=at,t.unstable_forceFrameRate=Mr,t.unstable_getCurrentPriorityLevel=Ht,t.unstable_getFirstCallbackNode=_t,t.unstable_next=Ne,t.unstable_pauseExecution=Xe,t.unstable_requestPaint=ss,t.unstable_runWithPriority=Ie,t.unstable_scheduleCallback=Ke,t.unstable_shouldYield=fi,t.unstable_wrapCallback=Ve,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()}(Vk)),Vk}var mO;function sL(){return mO||(mO=1,process.env.NODE_ENV==="production"?bx.exports=SV():bx.exports=bV()),bx.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vO;function wV(){if(vO)return Qs;vO=1;var t=I,n=sL();function e(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(c,f){l(c,f),l(c+"Capture",f)}function l(c,f){for(o[c]=f,c=0;c<f.length;c++)r.add(f[c])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function S(c){return d.call(v,c)?!0:d.call(g,c)?!1:h.test(c)?v[c]=!0:(g[c]=!0,!1)}function w(c,f,y,_){if(y!==null&&y.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return _?!1:y!==null?!y.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function k(c,f,y,_){if(f===null||typeof f>"u"||w(c,f,y,_))return!0;if(_)return!1;if(y!==null)switch(y.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function C(c,f,y,_,M,j,K){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=_,this.attributeNamespace=M,this.mustUseProperty=y,this.propertyName=c,this.type=f,this.sanitizeURL=j,this.removeEmptyString=K}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){E[c]=new C(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var f=c[0];E[f]=new C(f,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){E[c]=new C(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){E[c]=new C(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){E[c]=new C(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){E[c]=new C(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){E[c]=new C(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){E[c]=new C(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){E[c]=new C(c,5,!1,c.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function L(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var f=c.replace(R,L);E[f]=new C(f,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var f=c.replace(R,L);E[f]=new C(f,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var f=c.replace(R,L);E[f]=new C(f,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){E[c]=new C(c,1,!1,c.toLowerCase(),null,!1,!1)}),E.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){E[c]=new C(c,1,!1,c.toLowerCase(),null,!0,!0)});function A(c,f,y,_){var M=E.hasOwnProperty(f)?E[f]:null;(M!==null?M.type!==0:_||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(k(f,y,M,_)&&(y=null),_||M===null?S(f)&&(y===null?c.removeAttribute(f):c.setAttribute(f,""+y)):M.mustUseProperty?c[M.propertyName]=y===null?M.type===3?!1:"":y:(f=M.attributeName,_=M.attributeNamespace,y===null?c.removeAttribute(f):(M=M.type,y=M===3||M===4&&y===!0?"":""+y,_?c.setAttributeNS(_,f,y):c.setAttribute(f,y))))}var O=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),z=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),X=Symbol.for("react.provider"),ie=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),me=Symbol.iterator;function we(c){return c===null||typeof c!="object"?null:(c=me&&c[me]||c["@@iterator"],typeof c=="function"?c:null)}var V=Object.assign,Z;function Ce(c){if(Z===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);Z=f&&f[1]||""}return`
`+Z+c}var Ae=!1;function De(c,f){if(!c||Ae)return"";Ae=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Pe){var _=Pe}Reflect.construct(c,[],f)}else{try{f.call()}catch(Pe){_=Pe}c.call(f.prototype)}else{try{throw Error()}catch(Pe){_=Pe}c()}}catch(Pe){if(Pe&&_&&typeof Pe.stack=="string"){for(var M=Pe.stack.split(`
`),j=_.stack.split(`
`),K=M.length-1,J=j.length-1;1<=K&&0<=J&&M[K]!==j[J];)J--;for(;1<=K&&0<=J;K--,J--)if(M[K]!==j[J]){if(K!==1||J!==1)do if(K--,J--,0>J||M[K]!==j[J]){var se=`
`+M[K].replace(" at new "," at ");return c.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",c.displayName)),se}while(1<=K&&0<=J);break}}}finally{Ae=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?Ce(c):""}function Ie(c){switch(c.tag){case 5:return Ce(c.type);case 16:return Ce("Lazy");case 13:return Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 2:case 15:return c=De(c.type,!1),c;case 11:return c=De(c.type.render,!1),c;case 1:return c=De(c.type,!0),c;default:return""}}function Ne(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case U:return"Fragment";case z:return"Portal";case q:return"Profiler";case Y:return"StrictMode";case ae:return"Suspense";case te:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case ie:return(c.displayName||"Context")+".Consumer";case X:return(c._context.displayName||"Context")+".Provider";case pe:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case he:return f=c.displayName||null,f!==null?f:Ne(c.type)||"Memo";case ce:f=c._payload,c=c._init;try{return Ne(c(f))}catch{}}return null}function Ve(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(f);case 8:return f===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function Ke(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Xe(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function at(c){var f=Xe(c)?"checked":"value",y=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),_=""+c[f];if(!c.hasOwnProperty(f)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var M=y.get,j=y.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return M.call(this)},set:function(K){_=""+K,j.call(this,K)}}),Object.defineProperty(c,f,{enumerable:y.enumerable}),{getValue:function(){return _},setValue:function(K){_=""+K},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function _t(c){c._valueTracker||(c._valueTracker=at(c))}function We(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var y=f.getValue(),_="";return c&&(_=Xe(c)?c.checked?"true":"false":c.value),c=_,c!==y?(f.setValue(c),!0):!1}function Ht(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function dn(c,f){var y=f.checked;return V({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:y??c._wrapperState.initialChecked})}function Xt(c,f){var y=f.defaultValue==null?"":f.defaultValue,_=f.checked!=null?f.checked:f.defaultChecked;y=Ke(f.value!=null?f.value:y),c._wrapperState={initialChecked:_,initialValue:y,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function ln(c,f){f=f.checked,f!=null&&A(c,"checked",f,!1)}function jn(c,f){ln(c,f);var y=Ke(f.value),_=f.type;if(y!=null)_==="number"?(y===0&&c.value===""||c.value!=y)&&(c.value=""+y):c.value!==""+y&&(c.value=""+y);else if(_==="submit"||_==="reset"){c.removeAttribute("value");return}f.hasOwnProperty("value")?fi(c,f.type,y):f.hasOwnProperty("defaultValue")&&fi(c,f.type,Ke(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(c.defaultChecked=!!f.defaultChecked)}function qr(c,f,y){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var _=f.type;if(!(_!=="submit"&&_!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+c._wrapperState.initialValue,y||f===c.value||(c.value=f),c.defaultValue=f}y=c.name,y!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,y!==""&&(c.name=y)}function fi(c,f,y){(f!=="number"||Ht(c.ownerDocument)!==c)&&(y==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+y&&(c.defaultValue=""+y))}var jr=Array.isArray;function Mr(c,f,y,_){if(c=c.options,f){f={};for(var M=0;M<y.length;M++)f["$"+y[M]]=!0;for(y=0;y<c.length;y++)M=f.hasOwnProperty("$"+c[y].value),c[y].selected!==M&&(c[y].selected=M),M&&_&&(c[y].defaultSelected=!0)}else{for(y=""+Ke(y),f=null,M=0;M<c.length;M++){if(c[M].value===y){c[M].selected=!0,_&&(c[M].defaultSelected=!0);return}f!==null||c[M].disabled||(f=c[M])}f!==null&&(f.selected=!0)}}function Bi(c,f){if(f.dangerouslySetInnerHTML!=null)throw Error(e(91));return V({},f,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function hi(c,f){var y=f.value;if(y==null){if(y=f.children,f=f.defaultValue,y!=null){if(f!=null)throw Error(e(92));if(jr(y)){if(1<y.length)throw Error(e(93));y=y[0]}f=y}f==null&&(f=""),y=f}c._wrapperState={initialValue:Ke(y)}}function io(c,f){var y=Ke(f.value),_=Ke(f.defaultValue);y!=null&&(y=""+y,y!==c.value&&(c.value=y),f.defaultValue==null&&c.defaultValue!==y&&(c.defaultValue=y)),_!=null&&(c.defaultValue=""+_)}function ri(c){var f=c.textContent;f===c._wrapperState.initialValue&&f!==""&&f!==null&&(c.value=f)}function Hi(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kn(c,f){return c==null||c==="http://www.w3.org/1999/xhtml"?Hi(f):c==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var ii,ss=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,y,_,M){MSApp.execUnsafeLocalFunction(function(){return c(f,y,_,M)})}:c}(function(c,f){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=f;else{for(ii=ii||document.createElement("div"),ii.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=ii.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;f.firstChild;)c.appendChild(f.firstChild)}});function wr(c,f){if(f){var y=c.firstChild;if(y&&y===c.lastChild&&y.nodeType===3){y.nodeValue=f;return}}c.textContent=f}var et={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wt=["Webkit","ms","Moz","O"];Object.keys(et).forEach(function(c){wt.forEach(function(f){f=f+c.charAt(0).toUpperCase()+c.substring(1),et[f]=et[c]})});function rn(c,f,y){return f==null||typeof f=="boolean"||f===""?"":y||typeof f!="number"||f===0||et.hasOwnProperty(c)&&et[c]?(""+f).trim():f+"px"}function En(c,f){c=c.style;for(var y in f)if(f.hasOwnProperty(y)){var _=y.indexOf("--")===0,M=rn(y,f[y],_);y==="float"&&(y="cssFloat"),_?c.setProperty(y,M):c[y]=M}}var Sn=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xr(c,f){if(f){if(Sn[c]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(e(137,c));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(e(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(e(61))}if(f.style!=null&&typeof f.style!="object")throw Error(e(62))}}function ar(c,f){if(c.indexOf("-")===-1)return typeof f.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pi=null;function fn(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var gi=null,Rn=null,Mn=null;function oo(c){if(c=rh(c)){if(typeof gi!="function")throw Error(e(280));var f=c.stateNode;f&&(f=Rt(f),gi(c.stateNode,c.type,f))}}function mi(c){Rn?Mn?Mn.push(c):Mn=[c]:Rn=c}function Is(){if(Rn){var c=Rn,f=Mn;if(Mn=Rn=null,oo(c),f)for(c=0;c<f.length;c++)oo(f[c])}}function aa(c,f){return c(f)}function $a(){}var so=!1;function Oa(c,f,y){if(so)return c(f,y);so=!0;try{return aa(c,f,y)}finally{so=!1,(Rn!==null||Mn!==null)&&($a(),Is())}}function ao(c,f){var y=c.stateNode;if(y===null)return null;var _=Rt(y);if(_===null)return null;y=_[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(c=c.type,_=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!_;break e;default:c=!1}if(c)return null;if(y&&typeof y!="function")throw Error(e(231,f,typeof y));return y}var Rs=!1;if(u)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){Rs=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{Rs=!1}function Ms(c,f,y,_,M,j,K,J,se){var Pe=Array.prototype.slice.call(arguments,3);try{f.apply(y,Pe)}catch(Be){this.onError(Be)}}var vi=!1,Ii=null,yi=!1,ne=null,ze={onError:function(c){vi=!0,Ii=c}};function tt(c,f,y,_,M,j,K,J,se){vi=!1,Ii=null,Ms.apply(ze,arguments)}function st(c,f,y,_,M,j,K,J,se){if(tt.apply(this,arguments),vi){if(vi){var Pe=Ii;vi=!1,Ii=null}else throw Error(e(198));yi||(yi=!0,ne=Pe)}}function qt(c){var f=c,y=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,f.flags&4098&&(y=f.return),c=f.return;while(c)}return f.tag===3?y:null}function Zt(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function Jt(c){if(qt(c)!==c)throw Error(e(188))}function Pt(c){var f=c.alternate;if(!f){if(f=qt(c),f===null)throw Error(e(188));return f!==c?null:c}for(var y=c,_=f;;){var M=y.return;if(M===null)break;var j=M.alternate;if(j===null){if(_=M.return,_!==null){y=_;continue}break}if(M.child===j.child){for(j=M.child;j;){if(j===y)return Jt(M),c;if(j===_)return Jt(M),f;j=j.sibling}throw Error(e(188))}if(y.return!==_.return)y=M,_=j;else{for(var K=!1,J=M.child;J;){if(J===y){K=!0,y=M,_=j;break}if(J===_){K=!0,_=M,y=j;break}J=J.sibling}if(!K){for(J=j.child;J;){if(J===y){K=!0,y=j,_=M;break}if(J===_){K=!0,_=j,y=M;break}J=J.sibling}if(!K)throw Error(e(189))}}if(y.alternate!==_)throw Error(e(190))}if(y.tag!==3)throw Error(e(188));return y.stateNode.current===y?c:f}function Nr(c){return c=Pt(c),c!==null?Yn(c):null}function Yn(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=Yn(c);if(f!==null)return f;c=c.sibling}return null}var Wn=n.unstable_scheduleCallback,pr=n.unstable_cancelCallback,As=n.unstable_shouldYield,rc=n.unstable_requestPaint,vn=n.unstable_now,Bf=n.unstable_getCurrentPriorityLevel,as=n.unstable_ImmediatePriority,tn=n.unstable_UserBlockingPriority,$s=n.unstable_NormalPriority,Da=n.unstable_LowPriority,co=n.unstable_IdlePriority,La=null,Vi=null;function ou(c){if(Vi&&typeof Vi.onCommitFiberRoot=="function")try{Vi.onCommitFiberRoot(La,c,void 0,(c.current.flags&128)===128)}catch{}}var Ri=Math.clz32?Math.clz32:dl,su=Math.log,au=Math.LN2;function dl(c){return c>>>=0,c===0?32:31-(su(c)/au|0)|0}var ic=64,Io=4194304;function Ro(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Si(c,f){var y=c.pendingLanes;if(y===0)return 0;var _=0,M=c.suspendedLanes,j=c.pingedLanes,K=y&268435455;if(K!==0){var J=K&~M;J!==0?_=Ro(J):(j&=K,j!==0&&(_=Ro(j)))}else K=y&~M,K!==0?_=Ro(K):j!==0&&(_=Ro(j));if(_===0)return 0;if(f!==0&&f!==_&&!(f&M)&&(M=_&-_,j=f&-f,M>=j||M===16&&(j&4194240)!==0))return f;if(_&4&&(_|=y&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=_;0<f;)y=31-Ri(f),M=1<<y,_|=c[y],f&=~M;return _}function ja(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Na(c,f){for(var y=c.suspendedLanes,_=c.pingedLanes,M=c.expirationTimes,j=c.pendingLanes;0<j;){var K=31-Ri(j),J=1<<K,se=M[K];se===-1?(!(J&y)||J&_)&&(M[K]=ja(J,f)):se<=f&&(c.expiredLanes|=J),j&=~J}}function za(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function oc(){var c=ic;return ic<<=1,!(ic&4194240)&&(ic=64),c}function fl(c){for(var f=[],y=0;31>y;y++)f.push(c);return f}function la(c,f,y){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-Ri(f),c[f]=y}function Hf(c,f){var y=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var _=c.eventTimes;for(c=c.expirationTimes;0<y;){var M=31-Ri(y),j=1<<M;f[M]=0,_[M]=-1,c[M]=-1,y&=~j}}function ls(c,f){var y=c.entangledLanes|=f;for(c=c.entanglements;y;){var _=31-Ri(y),M=1<<_;M&f|c[_]&f&&(c[_]|=f),y&=~M}}var hn=0;function cs(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var hl,sc,on,ac,lc,Vt=!1,pl=[],gr=null,zr=null,bi=null,Fa=new Map,er=new Map,An=[],cc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ki(c,f){switch(c){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":Fa.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":er.delete(f.pointerId)}}function Vr(c,f,y,_,M,j){return c===null||c.nativeEvent!==j?(c={blockedOn:f,domEventName:y,eventSystemFlags:_,nativeEvent:j,targetContainers:[M]},f!==null&&(f=rh(f),f!==null&&sc(f)),c):(c.eventSystemFlags|=_,f=c.targetContainers,M!==null&&f.indexOf(M)===-1&&f.push(M),c)}function us(c,f,y,_,M){switch(f){case"focusin":return gr=Vr(gr,c,f,y,_,M),!0;case"dragenter":return zr=Vr(zr,c,f,y,_,M),!0;case"mouseover":return bi=Vr(bi,c,f,y,_,M),!0;case"pointerover":var j=M.pointerId;return Fa.set(j,Vr(Fa.get(j)||null,c,f,y,_,M)),!0;case"gotpointercapture":return j=M.pointerId,er.set(j,Vr(er.get(j)||null,c,f,y,_,M)),!0}return!1}function lu(c){var f=Ds(c.target);if(f!==null){var y=qt(f);if(y!==null){if(f=y.tag,f===13){if(f=Zt(y),f!==null){c.blockedOn=f,lc(c.priority,function(){on(y)});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){c.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}c.blockedOn=null}function uo(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var y=Hn(c.domEventName,c.eventSystemFlags,f[0],c.nativeEvent);if(y===null){y=c.nativeEvent;var _=new y.constructor(y.type,y);pi=_,y.target.dispatchEvent(_),pi=null}else return f=rh(y),f!==null&&sc(f),c.blockedOn=y,!1;f.shift()}return!0}function ca(c,f,y){uo(c)&&y.delete(f)}function bd(){Vt=!1,gr!==null&&uo(gr)&&(gr=null),zr!==null&&uo(zr)&&(zr=null),bi!==null&&uo(bi)&&(bi=null),Fa.forEach(ca),er.forEach(ca)}function Mo(c,f){c.blockedOn===f&&(c.blockedOn=null,Vt||(Vt=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,bd)))}function Ua(c){function f(M){return Mo(M,c)}if(0<pl.length){Mo(pl[0],c);for(var y=1;y<pl.length;y++){var _=pl[y];_.blockedOn===c&&(_.blockedOn=null)}}for(gr!==null&&Mo(gr,c),zr!==null&&Mo(zr,c),bi!==null&&Mo(bi,c),Fa.forEach(f),er.forEach(f),y=0;y<An.length;y++)_=An[y],_.blockedOn===c&&(_.blockedOn=null);for(;0<An.length&&(y=An[0],y.blockedOn===null);)lu(y),y.blockedOn===null&&An.shift()}var Q=O.ReactCurrentBatchConfig,ue=!0;function je(c,f,y,_){var M=hn,j=Q.transition;Q.transition=null;try{hn=1,_n(c,f,y,_)}finally{hn=M,Q.transition=j}}function it(c,f,y,_){var M=hn,j=Q.transition;Q.transition=null;try{hn=4,_n(c,f,y,_)}finally{hn=M,Q.transition=j}}function _n(c,f,y,_){if(ue){var M=Hn(c,f,y,_);if(M===null)wp(c,f,_,Ft,y),Ki(c,_);else if(us(M,c,f,y,_))_.stopPropagation();else if(Ki(c,_),f&4&&-1<cc.indexOf(c)){for(;M!==null;){var j=rh(M);if(j!==null&&hl(j),j=Hn(c,f,y,_),j===null&&wp(c,f,_,Ft,y),j===M)break;M=j}M!==null&&_.stopPropagation()}else wp(c,f,_,null,y)}}var Ft=null;function Hn(c,f,y,_){if(Ft=null,c=fn(_),c=Ds(c),c!==null)if(f=qt(c),f===null)c=null;else if(y=f.tag,y===13){if(c=Zt(f),c!==null)return c;c=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null);return Ft=c,null}function Cr(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bf()){case as:return 1;case tn:return 4;case $s:case Da:return 16;case co:return 536870912;default:return 16}default:return 16}}var Vn=null,B=null,ee=null;function ye(){if(ee)return ee;var c,f=B,y=f.length,_,M="value"in Vn?Vn.value:Vn.textContent,j=M.length;for(c=0;c<y&&f[c]===M[c];c++);var K=y-c;for(_=1;_<=K&&f[y-_]===M[j-_];_++);return ee=M.slice(c,1<_?1-_:void 0)}function Ee(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function Fe(){return!0}function pt(){return!1}function Je(c){function f(y,_,M,j,K){this._reactName=y,this._targetInst=M,this.type=_,this.nativeEvent=j,this.target=K,this.currentTarget=null;for(var J in c)c.hasOwnProperty(J)&&(y=c[J],this[J]=y?y(j):j[J]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Fe:pt,this.isPropagationStopped=pt,this}return V(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Fe)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Fe)},persist:function(){},isPersistent:Fe}),f}var St={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gt=Je(St),pn=V({},St,{view:0,detail:0}),$n=Je(pn),Tn,tr,lr,yn=V({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iv,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==lr&&(lr&&c.type==="mousemove"?(Tn=c.screenX-lr.screenX,tr=c.screenY-lr.screenY):tr=Tn=0,lr=c),Tn)},movementY:function(c){return"movementY"in c?c.movementY:tr}}),gl=Je(yn),wd=V({},yn,{dataTransfer:0}),Vf=Je(wd),ev=V({},pn,{relatedTarget:0}),ua=Je(ev),Kf=V({},St,{animationName:0,elapsedTime:0,pseudoElement:0}),Yf=Je(Kf),tv=V({},St,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),yE=Je(tv),SE=V({},St,{data:0}),nv=Je(SE),rv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},L0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j0(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=L0[c])?!!f[c]:!1}function iv(){return j0}var ml=V({},pn,{key:function(c){if(c.key){var f=rv[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=Ee(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?D0[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iv,charCode:function(c){return c.type==="keypress"?Ee(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Ee(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),bE=Je(ml),ov=V({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hp=Je(ov),sv=V({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iv}),wE=Je(sv),pp=V({},St,{propertyName:0,elapsedTime:0,pseudoElement:0}),N0=Je(pp),Ao=V({},yn,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),vl=Je(Ao),Qr=[9,13,27,32],da=u&&"CompositionEvent"in window,cu=null;u&&"documentMode"in document&&(cu=document.documentMode);var gp=u&&"TextEvent"in window&&!cu,z0=u&&(!da||cu&&8<cu&&11>=cu),xd=String.fromCharCode(32),F0=!1;function U0(c,f){switch(c){case"keyup":return Qr.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mp(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Cd=!1;function xE(c,f){switch(c){case"compositionend":return mp(f);case"keypress":return f.which!==32?null:(F0=!0,xd);case"textInput":return c=f.data,c===xd&&F0?null:c;default:return null}}function CE(c,f){if(Cd)return c==="compositionend"||!da&&U0(c,f)?(c=ye(),ee=B=Vn=null,Cd=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return z0&&f.locale!=="ko"?null:f.data;default:return null}}var B0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function H0(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!B0[c.type]:f==="textarea"}function V0(c,f,y,_){mi(_),f=eh(f,"onChange"),0<f.length&&(y=new Gt("onChange","change",null,y,_),c.push({event:y,listeners:f}))}var Wf=null,Ed=null;function _d(c){bp(c,0)}function Td(c){var f=Pd(c);if(We(f))return c}function K0(c,f){if(c==="change")return f}var av=!1;if(u){var lv;if(u){var cv="oninput"in document;if(!cv){var Y0=document.createElement("div");Y0.setAttribute("oninput","return;"),cv=typeof Y0.oninput=="function"}lv=cv}else lv=!1;av=lv&&(!document.documentMode||9<document.documentMode)}function W0(){Wf&&(Wf.detachEvent("onpropertychange",G0),Ed=Wf=null)}function G0(c){if(c.propertyName==="value"&&Td(Ed)){var f=[];V0(f,Ed,c,fn(c)),Oa(_d,f)}}function EE(c,f,y){c==="focusin"?(W0(),Wf=f,Ed=y,Wf.attachEvent("onpropertychange",G0)):c==="focusout"&&W0()}function _E(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Td(Ed)}function TE(c,f){if(c==="click")return Td(f)}function X0(c,f){if(c==="input"||c==="change")return Td(f)}function kE(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Os=typeof Object.is=="function"?Object.is:kE;function Gf(c,f){if(Os(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var y=Object.keys(c),_=Object.keys(f);if(y.length!==_.length)return!1;for(_=0;_<y.length;_++){var M=y[_];if(!d.call(f,M)||!Os(c[M],f[M]))return!1}return!0}function q0(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Q0(c,f){var y=q0(c);c=0;for(var _;y;){if(y.nodeType===3){if(_=c+y.textContent.length,c<=f&&_>=f)return{node:y,offset:f-c};c=_}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=q0(y)}}function Z0(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?Z0(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function vp(){for(var c=window,f=Ht();f instanceof c.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)c=f.contentWindow;else break;f=Ht(c.document)}return f}function yl(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}function yp(c){var f=vp(),y=c.focusedElem,_=c.selectionRange;if(f!==y&&y&&y.ownerDocument&&Z0(y.ownerDocument.documentElement,y)){if(_!==null&&yl(y)){if(f=_.start,c=_.end,c===void 0&&(c=f),"selectionStart"in y)y.selectionStart=f,y.selectionEnd=Math.min(c,y.value.length);else if(c=(f=y.ownerDocument||document)&&f.defaultView||window,c.getSelection){c=c.getSelection();var M=y.textContent.length,j=Math.min(_.start,M);_=_.end===void 0?j:Math.min(_.end,M),!c.extend&&j>_&&(M=_,_=j,j=M),M=Q0(y,j);var K=Q0(y,_);M&&K&&(c.rangeCount!==1||c.anchorNode!==M.node||c.anchorOffset!==M.offset||c.focusNode!==K.node||c.focusOffset!==K.offset)&&(f=f.createRange(),f.setStart(M.node,M.offset),c.removeAllRanges(),j>_?(c.addRange(f),c.extend(K.node,K.offset)):(f.setEnd(K.node,K.offset),c.addRange(f)))}}for(f=[],c=y;c=c.parentNode;)c.nodeType===1&&f.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<f.length;y++)c=f[y],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var J0=u&&"documentMode"in document&&11>=document.documentMode,fa=null,uv=null,Xf=null,dv=!1;function eb(c,f,y){var _=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;dv||fa==null||fa!==Ht(_)||(_=fa,"selectionStart"in _&&yl(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Xf&&Gf(Xf,_)||(Xf=_,_=eh(uv,"onSelect"),0<_.length&&(f=new Gt("onSelect","select",null,f,y),c.push({event:f,listeners:_}),f.target=fa)))}function Sp(c,f){var y={};return y[c.toLowerCase()]=f.toLowerCase(),y["Webkit"+c]="webkit"+f,y["Moz"+c]="moz"+f,y}var uu={animationend:Sp("Animation","AnimationEnd"),animationiteration:Sp("Animation","AnimationIteration"),animationstart:Sp("Animation","AnimationStart"),transitionend:Sp("Transition","TransitionEnd")},fv={},hv={};u&&(hv=document.createElement("div").style,"AnimationEvent"in window||(delete uu.animationend.animation,delete uu.animationiteration.animation,delete uu.animationstart.animation),"TransitionEvent"in window||delete uu.transitionend.transition);function wi(c){if(fv[c])return fv[c];if(!uu[c])return c;var f=uu[c],y;for(y in f)if(f.hasOwnProperty(y)&&y in hv)return fv[c]=f[y];return c}var pv=wi("animationend"),tb=wi("animationiteration"),nb=wi("animationstart"),rb=wi("transitionend"),ib=new Map,ob="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sl(c,f){ib.set(c,f),a(f,[c])}for(var qf=0;qf<ob.length;qf++){var du=ob[qf],PE=du.toLowerCase(),Qf=du[0].toUpperCase()+du.slice(1);Sl(PE,"on"+Qf)}Sl(pv,"onAnimationEnd"),Sl(tb,"onAnimationIteration"),Sl(nb,"onAnimationStart"),Sl("dblclick","onDoubleClick"),Sl("focusin","onFocus"),Sl("focusout","onBlur"),Sl(rb,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zf));function sb(c,f,y){var _=c.type||"unknown-event";c.currentTarget=y,st(_,f,void 0,c),c.currentTarget=null}function bp(c,f){f=(f&4)!==0;for(var y=0;y<c.length;y++){var _=c[y],M=_.event;_=_.listeners;e:{var j=void 0;if(f)for(var K=_.length-1;0<=K;K--){var J=_[K],se=J.instance,Pe=J.currentTarget;if(J=J.listener,se!==j&&M.isPropagationStopped())break e;sb(M,J,Pe),j=se}else for(K=0;K<_.length;K++){if(J=_[K],se=J.instance,Pe=J.currentTarget,J=J.listener,se!==j&&M.isPropagationStopped())break e;sb(M,J,Pe),j=se}}}if(yi)throw c=ne,yi=!1,ne=null,c}function nr(c,f){var y=f[wv];y===void 0&&(y=f[wv]=new Set);var _=c+"__bubble";y.has(_)||(ab(f,c,2,!1),y.add(_))}function uc(c,f,y){var _=0;f&&(_|=4),ab(y,c,_,f)}var bl="_reactListening"+Math.random().toString(36).slice(2);function kd(c){if(!c[bl]){c[bl]=!0,r.forEach(function(y){y!=="selectionchange"&&(IE.has(y)||uc(y,!1,c),uc(y,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[bl]||(f[bl]=!0,uc("selectionchange",!1,f))}}function ab(c,f,y,_){switch(Cr(f)){case 1:var M=je;break;case 4:M=it;break;default:M=_n}y=M.bind(null,f,y,c),M=void 0,!Rs||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(M=!0),_?M!==void 0?c.addEventListener(f,y,{capture:!0,passive:M}):c.addEventListener(f,y,!0):M!==void 0?c.addEventListener(f,y,{passive:M}):c.addEventListener(f,y,!1)}function wp(c,f,y,_,M){var j=_;if(!(f&1)&&!(f&2)&&_!==null)e:for(;;){if(_===null)return;var K=_.tag;if(K===3||K===4){var J=_.stateNode.containerInfo;if(J===M||J.nodeType===8&&J.parentNode===M)break;if(K===4)for(K=_.return;K!==null;){var se=K.tag;if((se===3||se===4)&&(se=K.stateNode.containerInfo,se===M||se.nodeType===8&&se.parentNode===M))return;K=K.return}for(;J!==null;){if(K=Ds(J),K===null)return;if(se=K.tag,se===5||se===6){_=j=K;continue e}J=J.parentNode}}_=_.return}Oa(function(){var Pe=j,Be=fn(y),Ye=[];e:{var Ue=ib.get(c);if(Ue!==void 0){var lt=Gt,gt=c;switch(c){case"keypress":if(Ee(y)===0)break e;case"keydown":case"keyup":lt=bE;break;case"focusin":gt="focus",lt=ua;break;case"focusout":gt="blur",lt=ua;break;case"beforeblur":case"afterblur":lt=ua;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=Vf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=wE;break;case pv:case tb:case nb:lt=Yf;break;case rb:lt=N0;break;case"scroll":lt=$n;break;case"wheel":lt=vl;break;case"copy":case"cut":case"paste":lt=yE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=hp}var bt=(f&4)!==0,Yr=!bt&&c==="scroll",ve=bt?Ue!==null?Ue+"Capture":null:Ue;bt=[];for(var de=Pe,xe;de!==null;){xe=de;var qe=xe.stateNode;if(xe.tag===5&&qe!==null&&(xe=qe,ve!==null&&(qe=ao(de,ve),qe!=null&&bt.push(Jf(de,qe,xe)))),Yr)break;de=de.return}0<bt.length&&(Ue=new lt(Ue,gt,null,y,Be),Ye.push({event:Ue,listeners:bt}))}}if(!(f&7)){e:{if(Ue=c==="mouseover"||c==="pointerover",lt=c==="mouseout"||c==="pointerout",Ue&&y!==pi&&(gt=y.relatedTarget||y.fromElement)&&(Ds(gt)||gt[wl]))break e;if((lt||Ue)&&(Ue=Be.window===Be?Be:(Ue=Be.ownerDocument)?Ue.defaultView||Ue.parentWindow:window,lt?(gt=y.relatedTarget||y.toElement,lt=Pe,gt=gt?Ds(gt):null,gt!==null&&(Yr=qt(gt),gt!==Yr||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(lt=null,gt=Pe),lt!==gt)){if(bt=gl,qe="onMouseLeave",ve="onMouseEnter",de="mouse",(c==="pointerout"||c==="pointerover")&&(bt=hp,qe="onPointerLeave",ve="onPointerEnter",de="pointer"),Yr=lt==null?Ue:Pd(lt),xe=gt==null?Ue:Pd(gt),Ue=new bt(qe,de+"leave",lt,y,Be),Ue.target=Yr,Ue.relatedTarget=xe,qe=null,Ds(Be)===Pe&&(bt=new bt(ve,de+"enter",gt,y,Be),bt.target=xe,bt.relatedTarget=Yr,qe=bt),Yr=qe,lt&&gt)t:{for(bt=lt,ve=gt,de=0,xe=bt;xe;xe=fu(xe))de++;for(xe=0,qe=ve;qe;qe=fu(qe))xe++;for(;0<de-xe;)bt=fu(bt),de--;for(;0<xe-de;)ve=fu(ve),xe--;for(;de--;){if(bt===ve||ve!==null&&bt===ve.alternate)break t;bt=fu(bt),ve=fu(ve)}bt=null}else bt=null;lt!==null&&gv(Ye,Ue,lt,bt,!1),gt!==null&&Yr!==null&&gv(Ye,Yr,gt,bt,!0)}}e:{if(Ue=Pe?Pd(Pe):window,lt=Ue.nodeName&&Ue.nodeName.toLowerCase(),lt==="select"||lt==="input"&&Ue.type==="file")var xt=K0;else if(H0(Ue))if(av)xt=X0;else{xt=_E;var mt=EE}else(lt=Ue.nodeName)&&lt.toLowerCase()==="input"&&(Ue.type==="checkbox"||Ue.type==="radio")&&(xt=TE);if(xt&&(xt=xt(c,Pe))){V0(Ye,xt,y,Be);break e}mt&&mt(c,Ue,Pe),c==="focusout"&&(mt=Ue._wrapperState)&&mt.controlled&&Ue.type==="number"&&fi(Ue,"number",Ue.value)}switch(mt=Pe?Pd(Pe):window,c){case"focusin":(H0(mt)||mt.contentEditable==="true")&&(fa=mt,uv=Pe,Xf=null);break;case"focusout":Xf=uv=fa=null;break;case"mousedown":dv=!0;break;case"contextmenu":case"mouseup":case"dragend":dv=!1,eb(Ye,y,Be);break;case"selectionchange":if(J0)break;case"keydown":case"keyup":eb(Ye,y,Be)}var It;if(da)e:{switch(c){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Cd?U0(c,y)&&(Yt="onCompositionEnd"):c==="keydown"&&y.keyCode===229&&(Yt="onCompositionStart");Yt&&(z0&&y.locale!=="ko"&&(Cd||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Cd&&(It=ye()):(Vn=Be,B="value"in Vn?Vn.value:Vn.textContent,Cd=!0)),mt=eh(Pe,Yt),0<mt.length&&(Yt=new nv(Yt,c,null,y,Be),Ye.push({event:Yt,listeners:mt}),It?Yt.data=It:(It=mp(y),It!==null&&(Yt.data=It)))),(It=gp?xE(c,y):CE(c,y))&&(Pe=eh(Pe,"onBeforeInput"),0<Pe.length&&(Be=new nv("onBeforeInput","beforeinput",null,y,Be),Ye.push({event:Be,listeners:Pe}),Be.data=It))}bp(Ye,f)})}function Jf(c,f,y){return{instance:c,listener:f,currentTarget:y}}function eh(c,f){for(var y=f+"Capture",_=[];c!==null;){var M=c,j=M.stateNode;M.tag===5&&j!==null&&(M=j,j=ao(c,y),j!=null&&_.unshift(Jf(c,j,M)),j=ao(c,f),j!=null&&_.push(Jf(c,j,M))),c=c.return}return _}function fu(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function gv(c,f,y,_,M){for(var j=f._reactName,K=[];y!==null&&y!==_;){var J=y,se=J.alternate,Pe=J.stateNode;if(se!==null&&se===_)break;J.tag===5&&Pe!==null&&(J=Pe,M?(se=ao(y,j),se!=null&&K.unshift(Jf(y,se,J))):M||(se=ao(y,j),se!=null&&K.push(Jf(y,se,J)))),y=y.return}K.length!==0&&c.push({event:f,listeners:K})}var mv=/\r\n?/g,RE=/\u0000|\uFFFD/g;function vv(c){return(typeof c=="string"?c:""+c).replace(mv,`
`).replace(RE,"")}function xp(c,f,y){if(f=vv(f),vv(c)!==f&&y)throw Error(e(425))}function Cp(){}var yv=null,hu=null;function th(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var pu=typeof setTimeout=="function"?setTimeout:void 0,lb=typeof clearTimeout=="function"?clearTimeout:void 0,Sv=typeof Promise=="function"?Promise:void 0,bv=typeof queueMicrotask=="function"?queueMicrotask:typeof Sv<"u"?function(c){return Sv.resolve(null).then(c).catch(ME)}:pu;function ME(c){setTimeout(function(){throw c})}function dc(c,f){var y=f,_=0;do{var M=y.nextSibling;if(c.removeChild(y),M&&M.nodeType===8)if(y=M.data,y==="/$"){if(_===0){c.removeChild(M),Ua(f);return}_--}else y!=="$"&&y!=="$?"&&y!=="$!"||_++;y=M}while(y);Ua(f)}function ha(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return c}function nh(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var y=c.data;if(y==="$"||y==="$!"||y==="$?"){if(f===0)return c;f--}else y==="/$"&&f++}c=c.previousSibling}return null}var fc=Math.random().toString(36).slice(2),Ba="__reactFiber$"+fc,gu="__reactProps$"+fc,wl="__reactContainer$"+fc,wv="__reactEvents$"+fc,AE="__reactListeners$"+fc,xv="__reactHandles$"+fc;function Ds(c){var f=c[Ba];if(f)return f;for(var y=c.parentNode;y;){if(f=y[wl]||y[Ba]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(c=nh(c);c!==null;){if(y=c[Ba])return y;c=nh(c)}return f}c=y,y=c.parentNode}return null}function rh(c){return c=c[Ba]||c[wl],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Pd(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(e(33))}function Rt(c){return c[gu]||null}var hc=[],mr=-1;function sn(c){return{current:c}}function Nn(c){0>mr||(c.current=hc[mr],hc[mr]=null,mr--)}function zn(c,f){mr++,hc[mr]=c.current,c.current=f}var Ha={},Kt=sn(Ha),Fr=sn(!1),$o=Ha;function Ls(c,f){var y=c.type.contextTypes;if(!y)return Ha;var _=c.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===f)return _.__reactInternalMemoizedMaskedChildContext;var M={},j;for(j in y)M[j]=f[j];return _&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=M),M}function Er(c){return c=c.childContextTypes,c!=null}function js(){Nn(Fr),Nn(Kt)}function pc(c,f,y){if(Kt.current!==Ha)throw Error(e(168));zn(Kt,f),zn(Fr,y)}function ih(c,f,y){var _=c.stateNode;if(f=f.childContextTypes,typeof _.getChildContext!="function")return y;_=_.getChildContext();for(var M in _)if(!(M in f))throw Error(e(108,Ve(c)||"Unknown",M));return V({},y,_)}function Ep(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Ha,$o=Kt.current,zn(Kt,c),zn(Fr,Fr.current),!0}function cb(c,f,y){var _=c.stateNode;if(!_)throw Error(e(169));y?(c=ih(c,f,$o),_.__reactInternalMemoizedMergedChildContext=c,Nn(Fr),Nn(Kt),zn(Kt,c)):Nn(Fr),zn(Fr,y)}var ds=null,xi=!1,oh=!1;function Cv(c){ds===null?ds=[c]:ds.push(c)}function Ev(c){xi=!0,Cv(c)}function Oo(){if(!oh&&ds!==null){oh=!0;var c=0,f=hn;try{var y=ds;for(hn=1;c<y.length;c++){var _=y[c];do _=_(!0);while(_!==null)}ds=null,xi=!1}catch(M){throw ds!==null&&(ds=ds.slice(c+1)),Wn(as,Oo),M}finally{hn=f,oh=!1}}return null}var gc=[],Do=0,mu=null,Id=0,Lo=[],Yi=0,Ns=null,Mi=1,xl="";function fs(c,f){gc[Do++]=Id,gc[Do++]=mu,mu=c,Id=f}function _v(c,f,y){Lo[Yi++]=Mi,Lo[Yi++]=xl,Lo[Yi++]=Ns,Ns=c;var _=Mi;c=xl;var M=32-Ri(_)-1;_&=~(1<<M),y+=1;var j=32-Ri(f)+M;if(30<j){var K=M-M%5;j=(_&(1<<K)-1).toString(32),_>>=K,M-=K,Mi=1<<32-Ri(f)+M|y<<M|_,xl=j+c}else Mi=1<<j|y<<M|_,xl=c}function _p(c){c.return!==null&&(fs(c,1),_v(c,1,0))}function Tv(c){for(;c===mu;)mu=gc[--Do],gc[Do]=null,Id=gc[--Do],gc[Do]=null;for(;c===Ns;)Ns=Lo[--Yi],Lo[Yi]=null,xl=Lo[--Yi],Lo[Yi]=null,Mi=Lo[--Yi],Lo[Yi]=null}var hs=null,jo=null,vr=!1,zs=null;function kv(c,f){var y=Ks(5,null,null,0);y.elementType="DELETED",y.stateNode=f,y.return=c,f=c.deletions,f===null?(c.deletions=[y],c.flags|=16):f.push(y)}function ub(c,f){switch(c.tag){case 5:var y=c.type;return f=f.nodeType!==1||y.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(c.stateNode=f,hs=c,jo=ha(f.firstChild),!0):!1;case 6:return f=c.pendingProps===""||f.nodeType!==3?null:f,f!==null?(c.stateNode=f,hs=c,jo=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(y=Ns!==null?{id:Mi,overflow:xl}:null,c.memoizedState={dehydrated:f,treeContext:y,retryLane:1073741824},y=Ks(18,null,null,0),y.stateNode=f,y.return=c,c.child=y,hs=c,jo=null,!0):!1;default:return!1}}function Tp(c){return(c.mode&1)!==0&&(c.flags&128)===0}function kp(c){if(vr){var f=jo;if(f){var y=f;if(!ub(c,f)){if(Tp(c))throw Error(e(418));f=ha(y.nextSibling);var _=hs;f&&ub(c,f)?kv(_,y):(c.flags=c.flags&-4097|2,vr=!1,hs=c)}}else{if(Tp(c))throw Error(e(418));c.flags=c.flags&-4097|2,vr=!1,hs=c}}}function db(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;hs=c}function Pp(c){if(c!==hs)return!1;if(!vr)return db(c),vr=!0,!1;var f;if((f=c.tag!==3)&&!(f=c.tag!==5)&&(f=c.type,f=f!=="head"&&f!=="body"&&!th(c.type,c.memoizedProps)),f&&(f=jo)){if(Tp(c))throw fb(),Error(e(418));for(;f;)kv(c,f),f=ha(f.nextSibling)}if(db(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(e(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8){var y=c.data;if(y==="/$"){if(f===0){jo=ha(c.nextSibling);break e}f--}else y!=="$"&&y!=="$!"&&y!=="$?"||f++}c=c.nextSibling}jo=null}}else jo=hs?ha(c.stateNode.nextSibling):null;return!0}function fb(){for(var c=jo;c;)c=ha(c.nextSibling)}function Ar(){jo=hs=null,vr=!1}function Pv(c){zs===null?zs=[c]:zs.push(c)}var Ip=O.ReactCurrentBatchConfig;function ps(c,f){if(c&&c.defaultProps){f=V({},f),c=c.defaultProps;for(var y in c)f[y]===void 0&&(f[y]=c[y]);return f}return f}var Va=sn(null),Rp=null,mc=null,Iv=null;function Rv(){Iv=mc=Rp=null}function vc(c){var f=Va.current;Nn(Va),c._currentValue=f}function Ci(c,f,y){for(;c!==null;){var _=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,_!==null&&(_.childLanes|=f)):_!==null&&(_.childLanes&f)!==f&&(_.childLanes|=f),c===y)break;c=c.return}}function nt(c,f){Rp=c,Iv=mc=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&f&&(Zr=!0),c.firstContext=null)}function Kr(c){var f=c._currentValue;if(Iv!==c)if(c={context:c,memoizedValue:f,next:null},mc===null){if(Rp===null)throw Error(e(308));mc=c,Rp.dependencies={lanes:0,firstContext:c}}else mc=mc.next=c;return f}var Ai=null;function Mv(c){Ai===null?Ai=[c]:Ai.push(c)}function hb(c,f,y,_){var M=f.interleaved;return M===null?(y.next=y,Mv(f)):(y.next=M.next,M.next=y),f.interleaved=y,Cl(c,_)}function Cl(c,f){c.lanes|=f;var y=c.alternate;for(y!==null&&(y.lanes|=f),y=c,c=c.return;c!==null;)c.childLanes|=f,y=c.alternate,y!==null&&(y.childLanes|=f),y=c,c=c.return;return y.tag===3?y.stateNode:null}var yc=!1;function Av(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oi(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function El(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function Sc(c,f,y){var _=c.updateQueue;if(_===null)return null;if(_=_.shared,gn&2){var M=_.pending;return M===null?f.next=f:(f.next=M.next,M.next=f),_.pending=f,Cl(c,y)}return M=_.interleaved,M===null?(f.next=f,Mv(_)):(f.next=M.next,M.next=f),_.interleaved=f,Cl(c,y)}function Mp(c,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194240)!==0)){var _=f.lanes;_&=c.pendingLanes,y|=_,f.lanes=y,ls(c,y)}}function $v(c,f){var y=c.updateQueue,_=c.alternate;if(_!==null&&(_=_.updateQueue,y===_)){var M=null,j=null;if(y=y.firstBaseUpdate,y!==null){do{var K={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};j===null?M=j=K:j=j.next=K,y=y.next}while(y!==null);j===null?M=j=f:j=j.next=f}else M=j=f;y={baseState:_.baseState,firstBaseUpdate:M,lastBaseUpdate:j,shared:_.shared,effects:_.effects},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=f:c.next=f,y.lastBaseUpdate=f}function bc(c,f,y,_){var M=c.updateQueue;yc=!1;var j=M.firstBaseUpdate,K=M.lastBaseUpdate,J=M.shared.pending;if(J!==null){M.shared.pending=null;var se=J,Pe=se.next;se.next=null,K===null?j=Pe:K.next=Pe,K=se;var Be=c.alternate;Be!==null&&(Be=Be.updateQueue,J=Be.lastBaseUpdate,J!==K&&(J===null?Be.firstBaseUpdate=Pe:J.next=Pe,Be.lastBaseUpdate=se))}if(j!==null){var Ye=M.baseState;K=0,Be=Pe=se=null,J=j;do{var Ue=J.lane,lt=J.eventTime;if((_&Ue)===Ue){Be!==null&&(Be=Be.next={eventTime:lt,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var gt=c,bt=J;switch(Ue=f,lt=y,bt.tag){case 1:if(gt=bt.payload,typeof gt=="function"){Ye=gt.call(lt,Ye,Ue);break e}Ye=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=bt.payload,Ue=typeof gt=="function"?gt.call(lt,Ye,Ue):gt,Ue==null)break e;Ye=V({},Ye,Ue);break e;case 2:yc=!0}}J.callback!==null&&J.lane!==0&&(c.flags|=64,Ue=M.effects,Ue===null?M.effects=[J]:Ue.push(J))}else lt={eventTime:lt,lane:Ue,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Be===null?(Pe=Be=lt,se=Ye):Be=Be.next=lt,K|=Ue;if(J=J.next,J===null){if(J=M.shared.pending,J===null)break;Ue=J,J=Ue.next,Ue.next=null,M.lastBaseUpdate=Ue,M.shared.pending=null}}while(1);if(Be===null&&(se=Ye),M.baseState=se,M.firstBaseUpdate=Pe,M.lastBaseUpdate=Be,f=M.shared.interleaved,f!==null){M=f;do K|=M.lane,M=M.next;while(M!==f)}else j===null&&(M.shared.lanes=0);Pl|=K,c.lanes=K,c.memoizedState=Ye}}function vu(c,f,y){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var _=c[f],M=_.callback;if(M!==null){if(_.callback=null,_=y,typeof M!="function")throw Error(e(191,M));M.call(_)}}}var pb=new t.Component().refs;function Ov(c,f,y,_){f=c.memoizedState,y=y(_,f),y=y==null?f:V({},f,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var Ap={isMounted:function(c){return(c=c._reactInternals)?qt(c)===c:!1},enqueueSetState:function(c,f,y){c=c._reactInternals;var _=qi(),M=Jr(c),j=El(_,M);j.payload=f,y!=null&&(j.callback=y),f=Sc(c,j,M),f!==null&&(Qi(f,c,M,_),Mp(f,c,M))},enqueueReplaceState:function(c,f,y){c=c._reactInternals;var _=qi(),M=Jr(c),j=El(_,M);j.tag=1,j.payload=f,y!=null&&(j.callback=y),f=Sc(c,j,M),f!==null&&(Qi(f,c,M,_),Mp(f,c,M))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var y=qi(),_=Jr(c),M=El(y,_);M.tag=2,f!=null&&(M.callback=f),f=Sc(c,M,_),f!==null&&(Qi(f,c,_,y),Mp(f,c,_))}};function gb(c,f,y,_,M,j,K){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(_,j,K):f.prototype&&f.prototype.isPureReactComponent?!Gf(y,_)||!Gf(M,j):!0}function mb(c,f,y){var _=!1,M=Ha,j=f.contextType;return typeof j=="object"&&j!==null?j=Kr(j):(M=Er(f)?$o:Kt.current,_=f.contextTypes,j=(_=_!=null)?Ls(c,M):Ha),f=new f(y,j),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Ap,c.stateNode=f,f._reactInternals=c,_&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=M,c.__reactInternalMemoizedMaskedChildContext=j),f}function vb(c,f,y,_){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,_),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,_),f.state!==c&&Ap.enqueueReplaceState(f,f.state,null)}function $p(c,f,y,_){var M=c.stateNode;M.props=y,M.state=c.memoizedState,M.refs=pb,Av(c);var j=f.contextType;typeof j=="object"&&j!==null?M.context=Kr(j):(j=Er(f)?$o:Kt.current,M.context=Ls(c,j)),M.state=c.memoizedState,j=f.getDerivedStateFromProps,typeof j=="function"&&(Ov(c,f,j,y),M.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(f=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),f!==M.state&&Ap.enqueueReplaceState(M,M.state,null),bc(c,y,M,_),M.state=c.memoizedState),typeof M.componentDidMount=="function"&&(c.flags|=4194308)}function Rd(c,f,y){if(c=y.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(e(309));var _=y.stateNode}if(!_)throw Error(e(147,c));var M=_,j=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===j?f.ref:(f=function(K){var J=M.refs;J===pb&&(J=M.refs={}),K===null?delete J[j]:J[j]=K},f._stringRef=j,f)}if(typeof c!="string")throw Error(e(284));if(!y._owner)throw Error(e(290,c))}return c}function Op(c,f){throw c=Object.prototype.toString.call(f),Error(e(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function yb(c){var f=c._init;return f(c._payload)}function Sb(c){function f(ve,de){if(c){var xe=ve.deletions;xe===null?(ve.deletions=[de],ve.flags|=16):xe.push(de)}}function y(ve,de){if(!c)return null;for(;de!==null;)f(ve,de),de=de.sibling;return null}function _(ve,de){for(ve=new Map;de!==null;)de.key!==null?ve.set(de.key,de):ve.set(de.index,de),de=de.sibling;return ve}function M(ve,de){return ve=Pc(ve,de),ve.index=0,ve.sibling=null,ve}function j(ve,de,xe){return ve.index=xe,c?(xe=ve.alternate,xe!==null?(xe=xe.index,xe<de?(ve.flags|=2,de):xe):(ve.flags|=2,de)):(ve.flags|=1048576,de)}function K(ve){return c&&ve.alternate===null&&(ve.flags|=2),ve}function J(ve,de,xe,qe){return de===null||de.tag!==6?(de=Eh(xe,ve.mode,qe),de.return=ve,de):(de=M(de,xe),de.return=ve,de)}function se(ve,de,xe,qe){var xt=xe.type;return xt===U?Be(ve,de,xe.props.children,qe,xe.key):de!==null&&(de.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===ce&&yb(xt)===de.type)?(qe=M(de,xe.props),qe.ref=Rd(ve,de,xe),qe.return=ve,qe):(qe=fg(xe.type,xe.key,xe.props,null,ve.mode,qe),qe.ref=Rd(ve,de,xe),qe.return=ve,qe)}function Pe(ve,de,xe,qe){return de===null||de.tag!==4||de.stateNode.containerInfo!==xe.containerInfo||de.stateNode.implementation!==xe.implementation?(de=Lu(xe,ve.mode,qe),de.return=ve,de):(de=M(de,xe.children||[]),de.return=ve,de)}function Be(ve,de,xe,qe,xt){return de===null||de.tag!==7?(de=Du(xe,ve.mode,qe,xt),de.return=ve,de):(de=M(de,xe),de.return=ve,de)}function Ye(ve,de,xe){if(typeof de=="string"&&de!==""||typeof de=="number")return de=Eh(""+de,ve.mode,xe),de.return=ve,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case D:return xe=fg(de.type,de.key,de.props,null,ve.mode,xe),xe.ref=Rd(ve,null,de),xe.return=ve,xe;case z:return de=Lu(de,ve.mode,xe),de.return=ve,de;case ce:var qe=de._init;return Ye(ve,qe(de._payload),xe)}if(jr(de)||we(de))return de=Du(de,ve.mode,xe,null),de.return=ve,de;Op(ve,de)}return null}function Ue(ve,de,xe,qe){var xt=de!==null?de.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number")return xt!==null?null:J(ve,de,""+xe,qe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case D:return xe.key===xt?se(ve,de,xe,qe):null;case z:return xe.key===xt?Pe(ve,de,xe,qe):null;case ce:return xt=xe._init,Ue(ve,de,xt(xe._payload),qe)}if(jr(xe)||we(xe))return xt!==null?null:Be(ve,de,xe,qe,null);Op(ve,xe)}return null}function lt(ve,de,xe,qe,xt){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return ve=ve.get(xe)||null,J(de,ve,""+qe,xt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case D:return ve=ve.get(qe.key===null?xe:qe.key)||null,se(de,ve,qe,xt);case z:return ve=ve.get(qe.key===null?xe:qe.key)||null,Pe(de,ve,qe,xt);case ce:var mt=qe._init;return lt(ve,de,xe,mt(qe._payload),xt)}if(jr(qe)||we(qe))return ve=ve.get(xe)||null,Be(de,ve,qe,xt,null);Op(de,qe)}return null}function gt(ve,de,xe,qe){for(var xt=null,mt=null,It=de,Yt=de=0,Ti=null;It!==null&&Yt<xe.length;Yt++){It.index>Yt?(Ti=It,It=null):Ti=It.sibling;var Pn=Ue(ve,It,xe[Yt],qe);if(Pn===null){It===null&&(It=Ti);break}c&&It&&Pn.alternate===null&&f(ve,It),de=j(Pn,de,Yt),mt===null?xt=Pn:mt.sibling=Pn,mt=Pn,It=Ti}if(Yt===xe.length)return y(ve,It),vr&&fs(ve,Yt),xt;if(It===null){for(;Yt<xe.length;Yt++)It=Ye(ve,xe[Yt],qe),It!==null&&(de=j(It,de,Yt),mt===null?xt=It:mt.sibling=It,mt=It);return vr&&fs(ve,Yt),xt}for(It=_(ve,It);Yt<xe.length;Yt++)Ti=lt(It,ve,Yt,xe[Yt],qe),Ti!==null&&(c&&Ti.alternate!==null&&It.delete(Ti.key===null?Yt:Ti.key),de=j(Ti,de,Yt),mt===null?xt=Ti:mt.sibling=Ti,mt=Ti);return c&&It.forEach(function(Ic){return f(ve,Ic)}),vr&&fs(ve,Yt),xt}function bt(ve,de,xe,qe){var xt=we(xe);if(typeof xt!="function")throw Error(e(150));if(xe=xt.call(xe),xe==null)throw Error(e(151));for(var mt=xt=null,It=de,Yt=de=0,Ti=null,Pn=xe.next();It!==null&&!Pn.done;Yt++,Pn=xe.next()){It.index>Yt?(Ti=It,It=null):Ti=It.sibling;var Ic=Ue(ve,It,Pn.value,qe);if(Ic===null){It===null&&(It=Ti);break}c&&It&&Ic.alternate===null&&f(ve,It),de=j(Ic,de,Yt),mt===null?xt=Ic:mt.sibling=Ic,mt=Ic,It=Ti}if(Pn.done)return y(ve,It),vr&&fs(ve,Yt),xt;if(It===null){for(;!Pn.done;Yt++,Pn=xe.next())Pn=Ye(ve,Pn.value,qe),Pn!==null&&(de=j(Pn,de,Yt),mt===null?xt=Pn:mt.sibling=Pn,mt=Pn);return vr&&fs(ve,Yt),xt}for(It=_(ve,It);!Pn.done;Yt++,Pn=xe.next())Pn=lt(It,ve,Yt,Pn.value,qe),Pn!==null&&(c&&Pn.alternate!==null&&It.delete(Pn.key===null?Yt:Pn.key),de=j(Pn,de,Yt),mt===null?xt=Pn:mt.sibling=Pn,mt=Pn);return c&&It.forEach(function(ZE){return f(ve,ZE)}),vr&&fs(ve,Yt),xt}function Yr(ve,de,xe,qe){if(typeof xe=="object"&&xe!==null&&xe.type===U&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case D:e:{for(var xt=xe.key,mt=de;mt!==null;){if(mt.key===xt){if(xt=xe.type,xt===U){if(mt.tag===7){y(ve,mt.sibling),de=M(mt,xe.props.children),de.return=ve,ve=de;break e}}else if(mt.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===ce&&yb(xt)===mt.type){y(ve,mt.sibling),de=M(mt,xe.props),de.ref=Rd(ve,mt,xe),de.return=ve,ve=de;break e}y(ve,mt);break}else f(ve,mt);mt=mt.sibling}xe.type===U?(de=Du(xe.props.children,ve.mode,qe,xe.key),de.return=ve,ve=de):(qe=fg(xe.type,xe.key,xe.props,null,ve.mode,qe),qe.ref=Rd(ve,de,xe),qe.return=ve,ve=qe)}return K(ve);case z:e:{for(mt=xe.key;de!==null;){if(de.key===mt)if(de.tag===4&&de.stateNode.containerInfo===xe.containerInfo&&de.stateNode.implementation===xe.implementation){y(ve,de.sibling),de=M(de,xe.children||[]),de.return=ve,ve=de;break e}else{y(ve,de);break}else f(ve,de);de=de.sibling}de=Lu(xe,ve.mode,qe),de.return=ve,ve=de}return K(ve);case ce:return mt=xe._init,Yr(ve,de,mt(xe._payload),qe)}if(jr(xe))return gt(ve,de,xe,qe);if(we(xe))return bt(ve,de,xe,qe);Op(ve,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"?(xe=""+xe,de!==null&&de.tag===6?(y(ve,de.sibling),de=M(de,xe),de.return=ve,ve=de):(y(ve,de),de=Eh(xe,ve.mode,qe),de.return=ve,ve=de),K(ve)):y(ve,de)}return Yr}var Md=Sb(!0),bb=Sb(!1),sh={},pa=sn(sh),ah=sn(sh),Ad=sn(sh);function yu(c){if(c===sh)throw Error(e(174));return c}function Dv(c,f){switch(zn(Ad,f),zn(ah,c),zn(pa,sh),c=f.nodeType,c){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:Kn(null,"");break;default:c=c===8?f.parentNode:f,f=c.namespaceURI||null,c=c.tagName,f=Kn(f,c)}Nn(pa),zn(pa,f)}function wc(){Nn(pa),Nn(ah),Nn(Ad)}function Ot(c){yu(Ad.current);var f=yu(pa.current),y=Kn(f,c.type);f!==y&&(zn(ah,c),zn(pa,y))}function cn(c){ah.current===c&&(Nn(pa),Nn(ah))}var Lt=sn(0);function $r(c){for(var f=c;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||y.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Fs=[];function Dp(){for(var c=0;c<Fs.length;c++)Fs[c]._workInProgressVersionPrimary=null;Fs.length=0}var Lp=O.ReactCurrentDispatcher,Lv=O.ReactCurrentBatchConfig,Su=0,yr=null,$e=null,bn=null,jt=!1,Ka=!1,gs=0,bu=0;function Sr(){throw Error(e(321))}function wu(c,f){if(f===null)return!1;for(var y=0;y<f.length&&y<c.length;y++)if(!Os(c[y],f[y]))return!1;return!0}function xc(c,f,y,_,M,j){if(Su=j,yr=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Lp.current=c===null||c.memoizedState===null?OE:DE,c=y(_,M),Ka){j=0;do{if(Ka=!1,gs=0,25<=j)throw Error(e(301));j+=1,bn=$e=null,f.updateQueue=null,Lp.current=Nv,c=y(_,M)}while(Ka)}if(Lp.current=Zp,f=$e!==null&&$e.next!==null,Su=0,bn=$e=yr=null,jt=!1,f)throw Error(e(300));return c}function xu(){var c=gs!==0;return gs=0,c}function Us(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?yr.memoizedState=bn=c:bn=bn.next=c,bn}function No(){if($e===null){var c=yr.alternate;c=c!==null?c.memoizedState:null}else c=$e.next;var f=bn===null?yr.memoizedState:bn.next;if(f!==null)bn=f,$e=c;else{if(c===null)throw Error(e(310));$e=c,c={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},bn===null?yr.memoizedState=bn=c:bn=bn.next=c}return bn}function Cu(c,f){return typeof f=="function"?f(c):f}function lh(c){var f=No(),y=f.queue;if(y===null)throw Error(e(311));y.lastRenderedReducer=c;var _=$e,M=_.baseQueue,j=y.pending;if(j!==null){if(M!==null){var K=M.next;M.next=j.next,j.next=K}_.baseQueue=M=j,y.pending=null}if(M!==null){j=M.next,_=_.baseState;var J=K=null,se=null,Pe=j;do{var Be=Pe.lane;if((Su&Be)===Be)se!==null&&(se=se.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),_=Pe.hasEagerState?Pe.eagerState:c(_,Pe.action);else{var Ye={lane:Be,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};se===null?(J=se=Ye,K=_):se=se.next=Ye,yr.lanes|=Be,Pl|=Be}Pe=Pe.next}while(Pe!==null&&Pe!==j);se===null?K=_:se.next=J,Os(_,f.memoizedState)||(Zr=!0),f.memoizedState=_,f.baseState=K,f.baseQueue=se,y.lastRenderedState=_}if(c=y.interleaved,c!==null){M=c;do j=M.lane,yr.lanes|=j,Pl|=j,M=M.next;while(M!==c)}else M===null&&(y.lanes=0);return[f.memoizedState,y.dispatch]}function ch(c){var f=No(),y=f.queue;if(y===null)throw Error(e(311));y.lastRenderedReducer=c;var _=y.dispatch,M=y.pending,j=f.memoizedState;if(M!==null){y.pending=null;var K=M=M.next;do j=c(j,K.action),K=K.next;while(K!==M);Os(j,f.memoizedState)||(Zr=!0),f.memoizedState=j,f.baseQueue===null&&(f.baseState=j),y.lastRenderedState=j}return[j,_]}function jp(){}function Np(c,f){var y=yr,_=No(),M=f(),j=!Os(_.memoizedState,M);if(j&&(_.memoizedState=M,Zr=!0),_=_.queue,uh(Up.bind(null,y,_,c),[c]),_.getSnapshot!==f||j||bn!==null&&bn.memoizedState.tag&1){if(y.flags|=2048,Eu(9,Fp.bind(null,y,_,M,f),void 0,null),Or===null)throw Error(e(349));Su&30||zp(y,f,M)}return M}function zp(c,f,y){c.flags|=16384,c={getSnapshot:f,value:y},f=yr.updateQueue,f===null?(f={lastEffect:null,stores:null},yr.updateQueue=f,f.stores=[c]):(y=f.stores,y===null?f.stores=[c]:y.push(c))}function Fp(c,f,y,_){f.value=y,f.getSnapshot=_,Bp(f)&&Hp(c)}function Up(c,f,y){return y(function(){Bp(f)&&Hp(c)})}function Bp(c){var f=c.getSnapshot;c=c.value;try{var y=f();return!Os(c,y)}catch{return!0}}function Hp(c){var f=Cl(c,1);f!==null&&Qi(f,c,1,-1)}function Vp(c){var f=Us();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cu,lastRenderedState:c},f.queue=c,c=c.dispatch=Qp.bind(null,yr,c),[f.memoizedState,c]}function Eu(c,f,y,_){return c={tag:c,create:f,destroy:y,deps:_,next:null},f=yr.updateQueue,f===null?(f={lastEffect:null,stores:null},yr.updateQueue=f,f.lastEffect=c.next=c):(y=f.lastEffect,y===null?f.lastEffect=c.next=c:(_=y.next,y.next=c,c.next=_,f.lastEffect=c)),c}function Kp(){return No().memoizedState}function _u(c,f,y,_){var M=Us();yr.flags|=c,M.memoizedState=Eu(1|f,y,void 0,_===void 0?null:_)}function _l(c,f,y,_){var M=No();_=_===void 0?null:_;var j=void 0;if($e!==null){var K=$e.memoizedState;if(j=K.destroy,_!==null&&wu(_,K.deps)){M.memoizedState=Eu(f,y,j,_);return}}yr.flags|=c,M.memoizedState=Eu(1|f,y,j,_)}function Yp(c,f){return _u(8390656,8,c,f)}function uh(c,f){return _l(2048,8,c,f)}function Wp(c,f){return _l(4,2,c,f)}function Gp(c,f){return _l(4,4,c,f)}function jv(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function $d(c,f,y){return y=y!=null?y.concat([c]):null,_l(4,4,jv.bind(null,f,c),y)}function Xp(){}function Od(c,f){var y=No();f=f===void 0?null:f;var _=y.memoizedState;return _!==null&&f!==null&&wu(f,_[1])?_[0]:(y.memoizedState=[c,f],c)}function Cc(c,f){var y=No();f=f===void 0?null:f;var _=y.memoizedState;return _!==null&&f!==null&&wu(f,_[1])?_[0]:(c=c(),y.memoizedState=[c,f],c)}function zo(c,f,y){return Su&21?(Os(y,f)||(y=oc(),yr.lanes|=y,Pl|=y,c.baseState=!0),f):(c.baseState&&(c.baseState=!1,Zr=!0),c.memoizedState=y)}function $E(c,f){var y=hn;hn=y!==0&&4>y?y:4,c(!0);var _=Lv.transition;Lv.transition={};try{c(!1),f()}finally{hn=y,Lv.transition=_}}function rr(){return No().memoizedState}function qp(c,f,y){var _=Jr(c);if(y={lane:_,action:y,hasEagerState:!1,eagerState:null,next:null},Dd(c))dh(f,y);else if(y=hb(c,f,y,_),y!==null){var M=qi();Qi(y,c,_,M),wb(y,f,_)}}function Qp(c,f,y){var _=Jr(c),M={lane:_,action:y,hasEagerState:!1,eagerState:null,next:null};if(Dd(c))dh(f,M);else{var j=c.alternate;if(c.lanes===0&&(j===null||j.lanes===0)&&(j=f.lastRenderedReducer,j!==null))try{var K=f.lastRenderedState,J=j(K,y);if(M.hasEagerState=!0,M.eagerState=J,Os(J,K)){var se=f.interleaved;se===null?(M.next=M,Mv(f)):(M.next=se.next,se.next=M),f.interleaved=M;return}}catch{}finally{}y=hb(c,f,M,_),y!==null&&(M=qi(),Qi(y,c,_,M),wb(y,f,_))}}function Dd(c){var f=c.alternate;return c===yr||f!==null&&f===yr}function dh(c,f){Ka=jt=!0;var y=c.pending;y===null?f.next=f:(f.next=y.next,y.next=f),c.pending=f}function wb(c,f,y){if(y&4194240){var _=f.lanes;_&=c.pendingLanes,y|=_,f.lanes=y,ls(c,y)}}var Zp={readContext:Kr,useCallback:Sr,useContext:Sr,useEffect:Sr,useImperativeHandle:Sr,useInsertionEffect:Sr,useLayoutEffect:Sr,useMemo:Sr,useReducer:Sr,useRef:Sr,useState:Sr,useDebugValue:Sr,useDeferredValue:Sr,useTransition:Sr,useMutableSource:Sr,useSyncExternalStore:Sr,useId:Sr,unstable_isNewReconciler:!1},OE={readContext:Kr,useCallback:function(c,f){return Us().memoizedState=[c,f===void 0?null:f],c},useContext:Kr,useEffect:Yp,useImperativeHandle:function(c,f,y){return y=y!=null?y.concat([c]):null,_u(4194308,4,jv.bind(null,f,c),y)},useLayoutEffect:function(c,f){return _u(4194308,4,c,f)},useInsertionEffect:function(c,f){return _u(4,2,c,f)},useMemo:function(c,f){var y=Us();return f=f===void 0?null:f,c=c(),y.memoizedState=[c,f],c},useReducer:function(c,f,y){var _=Us();return f=y!==void 0?y(f):f,_.memoizedState=_.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},_.queue=c,c=c.dispatch=qp.bind(null,yr,c),[_.memoizedState,c]},useRef:function(c){var f=Us();return c={current:c},f.memoizedState=c},useState:Vp,useDebugValue:Xp,useDeferredValue:function(c){return Us().memoizedState=c},useTransition:function(){var c=Vp(!1),f=c[0];return c=$E.bind(null,c[1]),Us().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,y){var _=yr,M=Us();if(vr){if(y===void 0)throw Error(e(407));y=y()}else{if(y=f(),Or===null)throw Error(e(349));Su&30||zp(_,f,y)}M.memoizedState=y;var j={value:y,getSnapshot:f};return M.queue=j,Yp(Up.bind(null,_,j,c),[c]),_.flags|=2048,Eu(9,Fp.bind(null,_,j,y,f),void 0,null),y},useId:function(){var c=Us(),f=Or.identifierPrefix;if(vr){var y=xl,_=Mi;y=(_&~(1<<32-Ri(_)-1)).toString(32)+y,f=":"+f+"R"+y,y=gs++,0<y&&(f+="H"+y.toString(32)),f+=":"}else y=bu++,f=":"+f+"r"+y.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},DE={readContext:Kr,useCallback:Od,useContext:Kr,useEffect:uh,useImperativeHandle:$d,useInsertionEffect:Wp,useLayoutEffect:Gp,useMemo:Cc,useReducer:lh,useRef:Kp,useState:function(){return lh(Cu)},useDebugValue:Xp,useDeferredValue:function(c){var f=No();return zo(f,$e.memoizedState,c)},useTransition:function(){var c=lh(Cu)[0],f=No().memoizedState;return[c,f]},useMutableSource:jp,useSyncExternalStore:Np,useId:rr,unstable_isNewReconciler:!1},Nv={readContext:Kr,useCallback:Od,useContext:Kr,useEffect:uh,useImperativeHandle:$d,useInsertionEffect:Wp,useLayoutEffect:Gp,useMemo:Cc,useReducer:ch,useRef:Kp,useState:function(){return ch(Cu)},useDebugValue:Xp,useDeferredValue:function(c){var f=No();return $e===null?f.memoizedState=c:zo(f,$e.memoizedState,c)},useTransition:function(){var c=ch(Cu)[0],f=No().memoizedState;return[c,f]},useMutableSource:jp,useSyncExternalStore:Np,useId:rr,unstable_isNewReconciler:!1};function Ld(c,f){try{var y="",_=f;do y+=Ie(_),_=_.return;while(_);var M=y}catch(j){M=`
Error generating stack: `+j.message+`
`+j.stack}return{value:c,source:f,stack:M,digest:null}}function fh(c,f,y){return{value:c,source:null,stack:y??null,digest:f??null}}function Jp(c,f){try{console.error(f.value)}catch(y){setTimeout(function(){throw y})}}var LE=typeof WeakMap=="function"?WeakMap:Map;function xb(c,f,y){y=El(-1,y),y.tag=3,y.payload={element:null};var _=f.value;return y.callback=function(){sg||(sg=!0,Ru=_),Jp(c,f)},y}function hh(c,f,y){y=El(-1,y),y.tag=3;var _=c.type.getDerivedStateFromError;if(typeof _=="function"){var M=f.value;y.payload=function(){return _(M)},y.callback=function(){Jp(c,f)}}var j=c.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(y.callback=function(){Jp(c,f),typeof _!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var K=f.stack;this.componentDidCatch(f.value,{componentStack:K!==null?K:""})}),y}function Cb(c,f,y){var _=c.pingCache;if(_===null){_=c.pingCache=new LE;var M=new Set;_.set(f,M)}else M=_.get(f),M===void 0&&(M=new Set,_.set(f,M));M.has(y)||(M.add(y),c=HE.bind(null,c,f,y),f.then(c,c))}function zv(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function Fv(c,f,y,_,M){return c.mode&1?(c.flags|=65536,c.lanes=M,c):(c===f?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(f=El(-1,1),f.tag=2,Sc(y,f,1))),y.lanes|=1),c)}var jE=O.ReactCurrentOwner,Zr=!1;function si(c,f,y,_){f.child=c===null?bb(f,null,y,_):Md(f,c.child,y,_)}function Ec(c,f,y,_,M){y=y.render;var j=f.ref;return nt(f,M),_=xc(c,f,y,_,j,M),y=xu(),c!==null&&!Zr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~M,$i(c,f,M)):(vr&&y&&_p(f),f.flags|=1,si(c,f,_,M),f.child)}function eg(c,f,y,_,M){if(c===null){var j=y.type;return typeof j=="function"&&!oy(j)&&j.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(f.tag=15,f.type=j,Fo(c,f,j,_,M)):(c=fg(y.type,null,_,f,f.mode,M),c.ref=f.ref,c.return=f,f.child=c)}if(j=c.child,!(c.lanes&M)){var K=j.memoizedProps;if(y=y.compare,y=y!==null?y:Gf,y(K,_)&&c.ref===f.ref)return $i(c,f,M)}return f.flags|=1,c=Pc(j,_),c.ref=f.ref,c.return=f,f.child=c}function Fo(c,f,y,_,M){if(c!==null){var j=c.memoizedProps;if(Gf(j,_)&&c.ref===f.ref)if(Zr=!1,f.pendingProps=_=j,(c.lanes&M)!==0)c.flags&131072&&(Zr=!0);else return f.lanes=c.lanes,$i(c,f,M)}return jd(c,f,y,_,M)}function Tu(c,f,y){var _=f.pendingProps,M=_.children,j=c!==null?c.memoizedState:null;if(_.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null,transitions:null},zn(Hd,ms),ms|=y;else{if(!(y&1073741824))return c=j!==null?j.baseLanes|y:y,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null,transitions:null},f.updateQueue=null,zn(Hd,ms),ms|=c,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=j!==null?j.baseLanes:y,zn(Hd,ms),ms|=_}else j!==null?(_=j.baseLanes|y,f.memoizedState=null):_=y,zn(Hd,ms),ms|=_;return si(c,f,M,y),f.child}function an(c,f){var y=f.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(f.flags|=512,f.flags|=2097152)}function jd(c,f,y,_,M){var j=Er(y)?$o:Kt.current;return j=Ls(f,j),nt(f,M),y=xc(c,f,y,_,j,M),_=xu(),c!==null&&!Zr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~M,$i(c,f,M)):(vr&&_&&_p(f),f.flags|=1,si(c,f,y,M),f.child)}function Uv(c,f,y,_,M){if(Er(y)){var j=!0;Ep(f)}else j=!1;if(nt(f,M),f.stateNode===null)Wi(c,f),mb(f,y,_),$p(f,y,_,M),_=!0;else if(c===null){var K=f.stateNode,J=f.memoizedProps;K.props=J;var se=K.context,Pe=y.contextType;typeof Pe=="object"&&Pe!==null?Pe=Kr(Pe):(Pe=Er(y)?$o:Kt.current,Pe=Ls(f,Pe));var Be=y.getDerivedStateFromProps,Ye=typeof Be=="function"||typeof K.getSnapshotBeforeUpdate=="function";Ye||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(J!==_||se!==Pe)&&vb(f,K,_,Pe),yc=!1;var Ue=f.memoizedState;K.state=Ue,bc(f,_,K,M),se=f.memoizedState,J!==_||Ue!==se||Fr.current||yc?(typeof Be=="function"&&(Ov(f,y,Be,_),se=f.memoizedState),(J=yc||gb(f,y,J,_,Ue,se,Pe))?(Ye||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(f.flags|=4194308)):(typeof K.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=_,f.memoizedState=se),K.props=_,K.state=se,K.context=Pe,_=J):(typeof K.componentDidMount=="function"&&(f.flags|=4194308),_=!1)}else{K=f.stateNode,oi(c,f),J=f.memoizedProps,Pe=f.type===f.elementType?J:ps(f.type,J),K.props=Pe,Ye=f.pendingProps,Ue=K.context,se=y.contextType,typeof se=="object"&&se!==null?se=Kr(se):(se=Er(y)?$o:Kt.current,se=Ls(f,se));var lt=y.getDerivedStateFromProps;(Be=typeof lt=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(J!==Ye||Ue!==se)&&vb(f,K,_,se),yc=!1,Ue=f.memoizedState,K.state=Ue,bc(f,_,K,M);var gt=f.memoizedState;J!==Ye||Ue!==gt||Fr.current||yc?(typeof lt=="function"&&(Ov(f,y,lt,_),gt=f.memoizedState),(Pe=yc||gb(f,y,Pe,_,Ue,gt,se)||!1)?(Be||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(_,gt,se),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(_,gt,se)),typeof K.componentDidUpdate=="function"&&(f.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof K.componentDidUpdate!="function"||J===c.memoizedProps&&Ue===c.memoizedState||(f.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||J===c.memoizedProps&&Ue===c.memoizedState||(f.flags|=1024),f.memoizedProps=_,f.memoizedState=gt),K.props=_,K.state=gt,K.context=se,_=Pe):(typeof K.componentDidUpdate!="function"||J===c.memoizedProps&&Ue===c.memoizedState||(f.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||J===c.memoizedProps&&Ue===c.memoizedState||(f.flags|=1024),_=!1)}return Eb(c,f,y,_,j,M)}function Eb(c,f,y,_,M,j){an(c,f);var K=(f.flags&128)!==0;if(!_&&!K)return M&&cb(f,y,!1),$i(c,f,j);_=f.stateNode,jE.current=f;var J=K&&typeof y.getDerivedStateFromError!="function"?null:_.render();return f.flags|=1,c!==null&&K?(f.child=Md(f,c.child,null,j),f.child=Md(f,null,J,j)):si(c,f,J,j),f.memoizedState=_.state,M&&cb(f,y,!0),f.child}function _b(c){var f=c.stateNode;f.pendingContext?pc(c,f.pendingContext,f.pendingContext!==f.context):f.context&&pc(c,f.context,!1),Dv(c,f.containerInfo)}function tg(c,f,y,_,M){return Ar(),Pv(M),f.flags|=256,si(c,f,y,_),f.child}var ku={dehydrated:null,treeContext:null,retryLane:0};function Bv(c){return{baseLanes:c,cachePool:null,transitions:null}}function Hv(c,f,y){var _=f.pendingProps,M=Lt.current,j=!1,K=(f.flags&128)!==0,J;if((J=K)||(J=c!==null&&c.memoizedState===null?!1:(M&2)!==0),J?(j=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(M|=1),zn(Lt,M&1),c===null)return kp(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(f.mode&1?c.data==="$!"?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(K=_.children,c=_.fallback,j?(_=f.mode,j=f.child,K={mode:"hidden",children:K},!(_&1)&&j!==null?(j.childLanes=0,j.pendingProps=K):j=Ch(K,_,0,null),c=Du(c,_,y,null),j.return=f,c.return=f,j.sibling=c,f.child=j,f.child.memoizedState=Bv(y),f.memoizedState=ku,c):Vv(f,K));if(M=c.memoizedState,M!==null&&(J=M.dehydrated,J!==null))return NE(c,f,K,_,J,M,y);if(j){j=_.fallback,K=f.mode,M=c.child,J=M.sibling;var se={mode:"hidden",children:_.children};return!(K&1)&&f.child!==M?(_=f.child,_.childLanes=0,_.pendingProps=se,f.deletions=null):(_=Pc(M,se),_.subtreeFlags=M.subtreeFlags&14680064),J!==null?j=Pc(J,j):(j=Du(j,K,y,null),j.flags|=2),j.return=f,_.return=f,_.sibling=j,f.child=_,_=j,j=f.child,K=c.child.memoizedState,K=K===null?Bv(y):{baseLanes:K.baseLanes|y,cachePool:null,transitions:K.transitions},j.memoizedState=K,j.childLanes=c.childLanes&~y,f.memoizedState=ku,_}return j=c.child,c=j.sibling,_=Pc(j,{mode:"visible",children:_.children}),!(f.mode&1)&&(_.lanes=y),_.return=f,_.sibling=null,c!==null&&(y=f.deletions,y===null?(f.deletions=[c],f.flags|=16):y.push(c)),f.child=_,f.memoizedState=null,_}function Vv(c,f){return f=Ch({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function Nd(c,f,y,_){return _!==null&&Pv(_),Md(f,c.child,null,y),c=Vv(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function NE(c,f,y,_,M,j,K){if(y)return f.flags&256?(f.flags&=-257,_=fh(Error(e(422))),Nd(c,f,K,_)):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(j=_.fallback,M=f.mode,_=Ch({mode:"visible",children:_.children},M,0,null),j=Du(j,M,K,null),j.flags|=2,_.return=f,j.return=f,_.sibling=j,f.child=_,f.mode&1&&Md(f,c.child,null,K),f.child.memoizedState=Bv(K),f.memoizedState=ku,j);if(!(f.mode&1))return Nd(c,f,K,null);if(M.data==="$!"){if(_=M.nextSibling&&M.nextSibling.dataset,_)var J=_.dgst;return _=J,j=Error(e(419)),_=fh(j,_,void 0),Nd(c,f,K,_)}if(J=(K&c.childLanes)!==0,Zr||J){if(_=Or,_!==null){switch(K&-K){case 4:M=2;break;case 16:M=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:M=32;break;case 536870912:M=268435456;break;default:M=0}M=M&(_.suspendedLanes|K)?0:M,M!==0&&M!==j.retryLane&&(j.retryLane=M,Cl(c,M),Qi(_,c,M,-1))}return ny(),_=fh(Error(e(421))),Nd(c,f,K,_)}return M.data==="$?"?(f.flags|=128,f.child=c.child,f=VE.bind(null,c),M._reactRetry=f,null):(c=j.treeContext,jo=ha(M.nextSibling),hs=f,vr=!0,zs=null,c!==null&&(Lo[Yi++]=Mi,Lo[Yi++]=xl,Lo[Yi++]=Ns,Mi=c.id,xl=c.overflow,Ns=f),f=Vv(f,_.children),f.flags|=4096,f)}function Kv(c,f,y){c.lanes|=f;var _=c.alternate;_!==null&&(_.lanes|=f),Ci(c.return,f,y)}function ng(c,f,y,_,M){var j=c.memoizedState;j===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:_,tail:y,tailMode:M}:(j.isBackwards=f,j.rendering=null,j.renderingStartTime=0,j.last=_,j.tail=y,j.tailMode=M)}function Yv(c,f,y){var _=f.pendingProps,M=_.revealOrder,j=_.tail;if(si(c,f,_.children,y),_=Lt.current,_&2)_=_&1|2,f.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Kv(c,y,f);else if(c.tag===19)Kv(c,y,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}_&=1}if(zn(Lt,_),!(f.mode&1))f.memoizedState=null;else switch(M){case"forwards":for(y=f.child,M=null;y!==null;)c=y.alternate,c!==null&&$r(c)===null&&(M=y),y=y.sibling;y=M,y===null?(M=f.child,f.child=null):(M=y.sibling,y.sibling=null),ng(f,!1,M,y,j);break;case"backwards":for(y=null,M=f.child,f.child=null;M!==null;){if(c=M.alternate,c!==null&&$r(c)===null){f.child=M;break}c=M.sibling,M.sibling=y,y=M,M=c}ng(f,!0,y,null,j);break;case"together":ng(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Wi(c,f){!(f.mode&1)&&c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2)}function $i(c,f,y){if(c!==null&&(f.dependencies=c.dependencies),Pl|=f.lanes,!(y&f.childLanes))return null;if(c!==null&&f.child!==c.child)throw Error(e(153));if(f.child!==null){for(c=f.child,y=Pc(c,c.pendingProps),f.child=y,y.return=f;c.sibling!==null;)c=c.sibling,y=y.sibling=Pc(c,c.pendingProps),y.return=f;y.sibling=null}return f.child}function Tl(c,f,y){switch(f.tag){case 3:_b(f),Ar();break;case 5:Ot(f);break;case 1:Er(f.type)&&Ep(f);break;case 4:Dv(f,f.stateNode.containerInfo);break;case 10:var _=f.type._context,M=f.memoizedProps.value;zn(Va,_._currentValue),_._currentValue=M;break;case 13:if(_=f.memoizedState,_!==null)return _.dehydrated!==null?(zn(Lt,Lt.current&1),f.flags|=128,null):y&f.child.childLanes?Hv(c,f,y):(zn(Lt,Lt.current&1),c=$i(c,f,y),c!==null?c.sibling:null);zn(Lt,Lt.current&1);break;case 19:if(_=(y&f.childLanes)!==0,c.flags&128){if(_)return Yv(c,f,y);f.flags|=128}if(M=f.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),zn(Lt,Lt.current),_)break;return null;case 22:case 23:return f.lanes=0,Tu(c,f,y)}return $i(c,f,y)}var ph,Pu,Bs,ai;ph=function(c,f){for(var y=f.child;y!==null;){if(y.tag===5||y.tag===6)c.appendChild(y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===f)break;for(;y.sibling===null;){if(y.return===null||y.return===f)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},Pu=function(){},Bs=function(c,f,y,_){var M=c.memoizedProps;if(M!==_){c=f.stateNode,yu(pa.current);var j=null;switch(y){case"input":M=dn(c,M),_=dn(c,_),j=[];break;case"select":M=V({},M,{value:void 0}),_=V({},_,{value:void 0}),j=[];break;case"textarea":M=Bi(c,M),_=Bi(c,_),j=[];break;default:typeof M.onClick!="function"&&typeof _.onClick=="function"&&(c.onclick=Cp)}xr(y,_);var K;y=null;for(Pe in M)if(!_.hasOwnProperty(Pe)&&M.hasOwnProperty(Pe)&&M[Pe]!=null)if(Pe==="style"){var J=M[Pe];for(K in J)J.hasOwnProperty(K)&&(y||(y={}),y[K]="")}else Pe!=="dangerouslySetInnerHTML"&&Pe!=="children"&&Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&Pe!=="autoFocus"&&(o.hasOwnProperty(Pe)?j||(j=[]):(j=j||[]).push(Pe,null));for(Pe in _){var se=_[Pe];if(J=M!=null?M[Pe]:void 0,_.hasOwnProperty(Pe)&&se!==J&&(se!=null||J!=null))if(Pe==="style")if(J){for(K in J)!J.hasOwnProperty(K)||se&&se.hasOwnProperty(K)||(y||(y={}),y[K]="");for(K in se)se.hasOwnProperty(K)&&J[K]!==se[K]&&(y||(y={}),y[K]=se[K])}else y||(j||(j=[]),j.push(Pe,y)),y=se;else Pe==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,J=J?J.__html:void 0,se!=null&&J!==se&&(j=j||[]).push(Pe,se)):Pe==="children"?typeof se!="string"&&typeof se!="number"||(j=j||[]).push(Pe,""+se):Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&(o.hasOwnProperty(Pe)?(se!=null&&Pe==="onScroll"&&nr("scroll",c),j||J===se||(j=[])):(j=j||[]).push(Pe,se))}y&&(j=j||[]).push("style",y);var Pe=j;(f.updateQueue=Pe)&&(f.flags|=4)}},ai=function(c,f,y,_){y!==_&&(f.flags|=4)};function gh(c,f){if(!vr)switch(c.tailMode){case"hidden":f=c.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var _=null;y!==null;)y.alternate!==null&&(_=y),y=y.sibling;_===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:_.sibling=null}}function Gi(c){var f=c.alternate!==null&&c.alternate.child===c.child,y=0,_=0;if(f)for(var M=c.child;M!==null;)y|=M.lanes|M.childLanes,_|=M.subtreeFlags&14680064,_|=M.flags&14680064,M.return=c,M=M.sibling;else for(M=c.child;M!==null;)y|=M.lanes|M.childLanes,_|=M.subtreeFlags,_|=M.flags,M.return=c,M=M.sibling;return c.subtreeFlags|=_,c.childLanes=y,f}function zE(c,f,y){var _=f.pendingProps;switch(Tv(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gi(f),null;case 1:return Er(f.type)&&js(),Gi(f),null;case 3:return _=f.stateNode,wc(),Nn(Fr),Nn(Kt),Dp(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(c===null||c.child===null)&&(Pp(f)?f.flags|=4:c===null||c.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,zs!==null&&(xh(zs),zs=null))),Pu(c,f),Gi(f),null;case 5:cn(f);var M=yu(Ad.current);if(y=f.type,c!==null&&f.stateNode!=null)Bs(c,f,y,_,M),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!_){if(f.stateNode===null)throw Error(e(166));return Gi(f),null}if(c=yu(pa.current),Pp(f)){_=f.stateNode,y=f.type;var j=f.memoizedProps;switch(_[Ba]=f,_[gu]=j,c=(f.mode&1)!==0,y){case"dialog":nr("cancel",_),nr("close",_);break;case"iframe":case"object":case"embed":nr("load",_);break;case"video":case"audio":for(M=0;M<Zf.length;M++)nr(Zf[M],_);break;case"source":nr("error",_);break;case"img":case"image":case"link":nr("error",_),nr("load",_);break;case"details":nr("toggle",_);break;case"input":Xt(_,j),nr("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!j.multiple},nr("invalid",_);break;case"textarea":hi(_,j),nr("invalid",_)}xr(y,j),M=null;for(var K in j)if(j.hasOwnProperty(K)){var J=j[K];K==="children"?typeof J=="string"?_.textContent!==J&&(j.suppressHydrationWarning!==!0&&xp(_.textContent,J,c),M=["children",J]):typeof J=="number"&&_.textContent!==""+J&&(j.suppressHydrationWarning!==!0&&xp(_.textContent,J,c),M=["children",""+J]):o.hasOwnProperty(K)&&J!=null&&K==="onScroll"&&nr("scroll",_)}switch(y){case"input":_t(_),qr(_,j,!0);break;case"textarea":_t(_),ri(_);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(_.onclick=Cp)}_=M,f.updateQueue=_,_!==null&&(f.flags|=4)}else{K=M.nodeType===9?M:M.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Hi(y)),c==="http://www.w3.org/1999/xhtml"?y==="script"?(c=K.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof _.is=="string"?c=K.createElement(y,{is:_.is}):(c=K.createElement(y),y==="select"&&(K=c,_.multiple?K.multiple=!0:_.size&&(K.size=_.size))):c=K.createElementNS(c,y),c[Ba]=f,c[gu]=_,ph(c,f,!1,!1),f.stateNode=c;e:{switch(K=ar(y,_),y){case"dialog":nr("cancel",c),nr("close",c),M=_;break;case"iframe":case"object":case"embed":nr("load",c),M=_;break;case"video":case"audio":for(M=0;M<Zf.length;M++)nr(Zf[M],c);M=_;break;case"source":nr("error",c),M=_;break;case"img":case"image":case"link":nr("error",c),nr("load",c),M=_;break;case"details":nr("toggle",c),M=_;break;case"input":Xt(c,_),M=dn(c,_),nr("invalid",c);break;case"option":M=_;break;case"select":c._wrapperState={wasMultiple:!!_.multiple},M=V({},_,{value:void 0}),nr("invalid",c);break;case"textarea":hi(c,_),M=Bi(c,_),nr("invalid",c);break;default:M=_}xr(y,M),J=M;for(j in J)if(J.hasOwnProperty(j)){var se=J[j];j==="style"?En(c,se):j==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,se!=null&&ss(c,se)):j==="children"?typeof se=="string"?(y!=="textarea"||se!=="")&&wr(c,se):typeof se=="number"&&wr(c,""+se):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(o.hasOwnProperty(j)?se!=null&&j==="onScroll"&&nr("scroll",c):se!=null&&A(c,j,se,K))}switch(y){case"input":_t(c),qr(c,_,!1);break;case"textarea":_t(c),ri(c);break;case"option":_.value!=null&&c.setAttribute("value",""+Ke(_.value));break;case"select":c.multiple=!!_.multiple,j=_.value,j!=null?Mr(c,!!_.multiple,j,!1):_.defaultValue!=null&&Mr(c,!!_.multiple,_.defaultValue,!0);break;default:typeof M.onClick=="function"&&(c.onclick=Cp)}switch(y){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Gi(f),null;case 6:if(c&&f.stateNode!=null)ai(c,f,c.memoizedProps,_);else{if(typeof _!="string"&&f.stateNode===null)throw Error(e(166));if(y=yu(Ad.current),yu(pa.current),Pp(f)){if(_=f.stateNode,y=f.memoizedProps,_[Ba]=f,(j=_.nodeValue!==y)&&(c=hs,c!==null))switch(c.tag){case 3:xp(_.nodeValue,y,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&xp(_.nodeValue,y,(c.mode&1)!==0)}j&&(f.flags|=4)}else _=(y.nodeType===9?y:y.ownerDocument).createTextNode(_),_[Ba]=f,f.stateNode=_}return Gi(f),null;case 13:if(Nn(Lt),_=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(vr&&jo!==null&&f.mode&1&&!(f.flags&128))fb(),Ar(),f.flags|=98560,j=!1;else if(j=Pp(f),_!==null&&_.dehydrated!==null){if(c===null){if(!j)throw Error(e(318));if(j=f.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(e(317));j[Ba]=f}else Ar(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;Gi(f),j=!1}else zs!==null&&(xh(zs),zs=null),j=!0;if(!j)return f.flags&65536?f:null}return f.flags&128?(f.lanes=y,f):(_=_!==null,_!==(c!==null&&c.memoizedState!==null)&&_&&(f.child.flags|=8192,f.mode&1&&(c===null||Lt.current&1?ci===0&&(ci=3):ny())),f.updateQueue!==null&&(f.flags|=4),Gi(f),null);case 4:return wc(),Pu(c,f),c===null&&kd(f.stateNode.containerInfo),Gi(f),null;case 10:return vc(f.type._context),Gi(f),null;case 17:return Er(f.type)&&js(),Gi(f),null;case 19:if(Nn(Lt),j=f.memoizedState,j===null)return Gi(f),null;if(_=(f.flags&128)!==0,K=j.rendering,K===null)if(_)gh(j,!1);else{if(ci!==0||c!==null&&c.flags&128)for(c=f.child;c!==null;){if(K=$r(c),K!==null){for(f.flags|=128,gh(j,!1),_=K.updateQueue,_!==null&&(f.updateQueue=_,f.flags|=4),f.subtreeFlags=0,_=y,y=f.child;y!==null;)j=y,c=_,j.flags&=14680066,K=j.alternate,K===null?(j.childLanes=0,j.lanes=c,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=K.childLanes,j.lanes=K.lanes,j.child=K.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=K.memoizedProps,j.memoizedState=K.memoizedState,j.updateQueue=K.updateQueue,j.type=K.type,c=K.dependencies,j.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),y=y.sibling;return zn(Lt,Lt.current&1|2),f.child}c=c.sibling}j.tail!==null&&vn()>Kd&&(f.flags|=128,_=!0,gh(j,!1),f.lanes=4194304)}else{if(!_)if(c=$r(K),c!==null){if(f.flags|=128,_=!0,y=c.updateQueue,y!==null&&(f.updateQueue=y,f.flags|=4),gh(j,!0),j.tail===null&&j.tailMode==="hidden"&&!K.alternate&&!vr)return Gi(f),null}else 2*vn()-j.renderingStartTime>Kd&&y!==1073741824&&(f.flags|=128,_=!0,gh(j,!1),f.lanes=4194304);j.isBackwards?(K.sibling=f.child,f.child=K):(y=j.last,y!==null?y.sibling=K:f.child=K,j.last=K)}return j.tail!==null?(f=j.tail,j.rendering=f,j.tail=f.sibling,j.renderingStartTime=vn(),f.sibling=null,y=Lt.current,zn(Lt,_?y&1|2:y&1),f):(Gi(f),null);case 22:case 23:return ty(),_=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==_&&(f.flags|=8192),_&&f.mode&1?ms&1073741824&&(Gi(f),f.subtreeFlags&6&&(f.flags|=8192)):Gi(f),null;case 24:return null;case 25:return null}throw Error(e(156,f.tag))}function Wv(c,f){switch(Tv(f),f.tag){case 1:return Er(f.type)&&js(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return wc(),Nn(Fr),Nn(Kt),Dp(),c=f.flags,c&65536&&!(c&128)?(f.flags=c&-65537|128,f):null;case 5:return cn(f),null;case 13:if(Nn(Lt),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(e(340));Ar()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return Nn(Lt),null;case 4:return wc(),null;case 10:return vc(f.type._context),null;case 22:case 23:return ty(),null;case 24:return null;default:return null}}var mh=!1,li=!1,Tb=typeof WeakSet=="function"?WeakSet:Set,ht=null;function zd(c,f){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(_){Br(c,f,_)}else y.current=null}function vh(c,f,y){try{y()}catch(_){Br(c,f,_)}}var kb=!1;function Pb(c,f){if(yv=ue,c=vp(),yl(c)){if("selectionStart"in c)var y={start:c.selectionStart,end:c.selectionEnd};else e:{y=(y=c.ownerDocument)&&y.defaultView||window;var _=y.getSelection&&y.getSelection();if(_&&_.rangeCount!==0){y=_.anchorNode;var M=_.anchorOffset,j=_.focusNode;_=_.focusOffset;try{y.nodeType,j.nodeType}catch{y=null;break e}var K=0,J=-1,se=-1,Pe=0,Be=0,Ye=c,Ue=null;t:for(;;){for(var lt;Ye!==y||M!==0&&Ye.nodeType!==3||(J=K+M),Ye!==j||_!==0&&Ye.nodeType!==3||(se=K+_),Ye.nodeType===3&&(K+=Ye.nodeValue.length),(lt=Ye.firstChild)!==null;)Ue=Ye,Ye=lt;for(;;){if(Ye===c)break t;if(Ue===y&&++Pe===M&&(J=K),Ue===j&&++Be===_&&(se=K),(lt=Ye.nextSibling)!==null)break;Ye=Ue,Ue=Ye.parentNode}Ye=lt}y=J===-1||se===-1?null:{start:J,end:se}}else y=null}y=y||{start:0,end:0}}else y=null;for(hu={focusedElem:c,selectionRange:y},ue=!1,ht=f;ht!==null;)if(f=ht,c=f.child,(f.subtreeFlags&1028)!==0&&c!==null)c.return=f,ht=c;else for(;ht!==null;){f=ht;try{var gt=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var bt=gt.memoizedProps,Yr=gt.memoizedState,ve=f.stateNode,de=ve.getSnapshotBeforeUpdate(f.elementType===f.type?bt:ps(f.type,bt),Yr);ve.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var xe=f.stateNode.containerInfo;xe.nodeType===1?xe.textContent="":xe.nodeType===9&&xe.documentElement&&xe.removeChild(xe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(qe){Br(f,f.return,qe)}if(c=f.sibling,c!==null){c.return=f.return,ht=c;break}ht=f.return}return gt=kb,kb=!1,gt}function yh(c,f,y){var _=f.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var M=_=_.next;do{if((M.tag&c)===c){var j=M.destroy;M.destroy=void 0,j!==void 0&&vh(f,y,j)}M=M.next}while(M!==_)}}function Sh(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&c)===c){var _=y.create;y.destroy=_()}y=y.next}while(y!==f)}}function Gv(c){var f=c.ref;if(f!==null){var y=c.stateNode;switch(c.tag){case 5:c=y;break;default:c=y}typeof f=="function"?f(c):f.current=c}}function Xv(c){var f=c.alternate;f!==null&&(c.alternate=null,Xv(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&(delete f[Ba],delete f[gu],delete f[wv],delete f[AE],delete f[xv])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Ib(c){return c.tag===5||c.tag===3||c.tag===4}function rg(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Ib(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Fd(c,f,y){var _=c.tag;if(_===5||_===6)c=c.stateNode,f?y.nodeType===8?y.parentNode.insertBefore(c,f):y.insertBefore(c,f):(y.nodeType===8?(f=y.parentNode,f.insertBefore(c,y)):(f=y,f.appendChild(c)),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=Cp));else if(_!==4&&(c=c.child,c!==null))for(Fd(c,f,y),c=c.sibling;c!==null;)Fd(c,f,y),c=c.sibling}function Ya(c,f,y){var _=c.tag;if(_===5||_===6)c=c.stateNode,f?y.insertBefore(c,f):y.appendChild(c);else if(_!==4&&(c=c.child,c!==null))for(Ya(c,f,y),c=c.sibling;c!==null;)Ya(c,f,y),c=c.sibling}var _r=null,Ei=!1;function Hs(c,f,y){for(y=y.child;y!==null;)Ud(c,f,y),y=y.sibling}function Ud(c,f,y){if(Vi&&typeof Vi.onCommitFiberUnmount=="function")try{Vi.onCommitFiberUnmount(La,y)}catch{}switch(y.tag){case 5:li||zd(y,f);case 6:var _=_r,M=Ei;_r=null,Hs(c,f,y),_r=_,Ei=M,_r!==null&&(Ei?(c=_r,y=y.stateNode,c.nodeType===8?c.parentNode.removeChild(y):c.removeChild(y)):_r.removeChild(y.stateNode));break;case 18:_r!==null&&(Ei?(c=_r,y=y.stateNode,c.nodeType===8?dc(c.parentNode,y):c.nodeType===1&&dc(c,y),Ua(c)):dc(_r,y.stateNode));break;case 4:_=_r,M=Ei,_r=y.stateNode.containerInfo,Ei=!0,Hs(c,f,y),_r=_,Ei=M;break;case 0:case 11:case 14:case 15:if(!li&&(_=y.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){M=_=_.next;do{var j=M,K=j.destroy;j=j.tag,K!==void 0&&(j&2||j&4)&&vh(y,f,K),M=M.next}while(M!==_)}Hs(c,f,y);break;case 1:if(!li&&(zd(y,f),_=y.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=y.memoizedProps,_.state=y.memoizedState,_.componentWillUnmount()}catch(J){Br(y,f,J)}Hs(c,f,y);break;case 21:Hs(c,f,y);break;case 22:y.mode&1?(li=(_=li)||y.memoizedState!==null,Hs(c,f,y),li=_):Hs(c,f,y);break;default:Hs(c,f,y)}}function kl(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new Tb),f.forEach(function(_){var M=KE.bind(null,c,_);y.has(_)||(y.add(_),_.then(M,M))})}}function ga(c,f){var y=f.deletions;if(y!==null)for(var _=0;_<y.length;_++){var M=y[_];try{var j=c,K=f,J=K;e:for(;J!==null;){switch(J.tag){case 5:_r=J.stateNode,Ei=!1;break e;case 3:_r=J.stateNode.containerInfo,Ei=!0;break e;case 4:_r=J.stateNode.containerInfo,Ei=!0;break e}J=J.return}if(_r===null)throw Error(e(160));Ud(j,K,M),_r=null,Ei=!1;var se=M.alternate;se!==null&&(se.return=null),M.return=null}catch(Pe){Br(M,f,Pe)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)Rb(f,c),f=f.sibling}function Rb(c,f){var y=c.alternate,_=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(ga(f,c),Wa(c),_&4){try{yh(3,c,c.return),Sh(3,c)}catch(bt){Br(c,c.return,bt)}try{yh(5,c,c.return)}catch(bt){Br(c,c.return,bt)}}break;case 1:ga(f,c),Wa(c),_&512&&y!==null&&zd(y,y.return);break;case 5:if(ga(f,c),Wa(c),_&512&&y!==null&&zd(y,y.return),c.flags&32){var M=c.stateNode;try{wr(M,"")}catch(bt){Br(c,c.return,bt)}}if(_&4&&(M=c.stateNode,M!=null)){var j=c.memoizedProps,K=y!==null?y.memoizedProps:j,J=c.type,se=c.updateQueue;if(c.updateQueue=null,se!==null)try{J==="input"&&j.type==="radio"&&j.name!=null&&ln(M,j),ar(J,K);var Pe=ar(J,j);for(K=0;K<se.length;K+=2){var Be=se[K],Ye=se[K+1];Be==="style"?En(M,Ye):Be==="dangerouslySetInnerHTML"?ss(M,Ye):Be==="children"?wr(M,Ye):A(M,Be,Ye,Pe)}switch(J){case"input":jn(M,j);break;case"textarea":io(M,j);break;case"select":var Ue=M._wrapperState.wasMultiple;M._wrapperState.wasMultiple=!!j.multiple;var lt=j.value;lt!=null?Mr(M,!!j.multiple,lt,!1):Ue!==!!j.multiple&&(j.defaultValue!=null?Mr(M,!!j.multiple,j.defaultValue,!0):Mr(M,!!j.multiple,j.multiple?[]:"",!1))}M[gu]=j}catch(bt){Br(c,c.return,bt)}}break;case 6:if(ga(f,c),Wa(c),_&4){if(c.stateNode===null)throw Error(e(162));M=c.stateNode,j=c.memoizedProps;try{M.nodeValue=j}catch(bt){Br(c,c.return,bt)}}break;case 3:if(ga(f,c),Wa(c),_&4&&y!==null&&y.memoizedState.isDehydrated)try{Ua(f.containerInfo)}catch(bt){Br(c,c.return,bt)}break;case 4:ga(f,c),Wa(c);break;case 13:ga(f,c),Wa(c),M=c.child,M.flags&8192&&(j=M.memoizedState!==null,M.stateNode.isHidden=j,!j||M.alternate!==null&&M.alternate.memoizedState!==null||(Zv=vn())),_&4&&kl(c);break;case 22:if(Be=y!==null&&y.memoizedState!==null,c.mode&1?(li=(Pe=li)||Be,ga(f,c),li=Pe):ga(f,c),Wa(c),_&8192){if(Pe=c.memoizedState!==null,(c.stateNode.isHidden=Pe)&&!Be&&c.mode&1)for(ht=c,Be=c.child;Be!==null;){for(Ye=ht=Be;ht!==null;){switch(Ue=ht,lt=Ue.child,Ue.tag){case 0:case 11:case 14:case 15:yh(4,Ue,Ue.return);break;case 1:zd(Ue,Ue.return);var gt=Ue.stateNode;if(typeof gt.componentWillUnmount=="function"){_=Ue,y=Ue.return;try{f=_,gt.props=f.memoizedProps,gt.state=f.memoizedState,gt.componentWillUnmount()}catch(bt){Br(_,y,bt)}}break;case 5:zd(Ue,Ue.return);break;case 22:if(Ue.memoizedState!==null){qv(Ye);continue}}lt!==null?(lt.return=Ue,ht=lt):qv(Ye)}Be=Be.sibling}e:for(Be=null,Ye=c;;){if(Ye.tag===5){if(Be===null){Be=Ye;try{M=Ye.stateNode,Pe?(j=M.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(J=Ye.stateNode,se=Ye.memoizedProps.style,K=se!=null&&se.hasOwnProperty("display")?se.display:null,J.style.display=rn("display",K))}catch(bt){Br(c,c.return,bt)}}}else if(Ye.tag===6){if(Be===null)try{Ye.stateNode.nodeValue=Pe?"":Ye.memoizedProps}catch(bt){Br(c,c.return,bt)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===c)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===c)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===c)break e;Be===Ye&&(Be=null),Ye=Ye.return}Be===Ye&&(Be=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:ga(f,c),Wa(c),_&4&&kl(c);break;case 21:break;default:ga(f,c),Wa(c)}}function Wa(c){var f=c.flags;if(f&2){try{e:{for(var y=c.return;y!==null;){if(Ib(y)){var _=y;break e}y=y.return}throw Error(e(160))}switch(_.tag){case 5:var M=_.stateNode;_.flags&32&&(wr(M,""),_.flags&=-33);var j=rg(c);Ya(c,j,M);break;case 3:case 4:var K=_.stateNode.containerInfo,J=rg(c);Fd(c,J,K);break;default:throw Error(e(161))}}catch(se){Br(c,c.return,se)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function Mb(c,f,y){ht=c,Bd(c)}function Bd(c,f,y){for(var _=(c.mode&1)!==0;ht!==null;){var M=ht,j=M.child;if(M.tag===22&&_){var K=M.memoizedState!==null||mh;if(!K){var J=M.alternate,se=J!==null&&J.memoizedState!==null||li;J=mh;var Pe=li;if(mh=K,(li=se)&&!Pe)for(ht=M;ht!==null;)K=ht,se=K.child,K.tag===22&&K.memoizedState!==null?$b(M):se!==null?(se.return=K,ht=se):$b(M);for(;j!==null;)ht=j,Bd(j),j=j.sibling;ht=M,mh=J,li=Pe}Ab(c)}else M.subtreeFlags&8772&&j!==null?(j.return=M,ht=j):Ab(c)}}function Ab(c){for(;ht!==null;){var f=ht;if(f.flags&8772){var y=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:li||Sh(5,f);break;case 1:var _=f.stateNode;if(f.flags&4&&!li)if(y===null)_.componentDidMount();else{var M=f.elementType===f.type?y.memoizedProps:ps(f.type,y.memoizedProps);_.componentDidUpdate(M,y.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var j=f.updateQueue;j!==null&&vu(f,j,_);break;case 3:var K=f.updateQueue;if(K!==null){if(y=null,f.child!==null)switch(f.child.tag){case 5:y=f.child.stateNode;break;case 1:y=f.child.stateNode}vu(f,K,y)}break;case 5:var J=f.stateNode;if(y===null&&f.flags&4){y=J;var se=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":se.autoFocus&&y.focus();break;case"img":se.src&&(y.src=se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var Pe=f.alternate;if(Pe!==null){var Be=Pe.memoizedState;if(Be!==null){var Ye=Be.dehydrated;Ye!==null&&Ua(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}li||f.flags&512&&Gv(f)}catch(Ue){Br(f,f.return,Ue)}}if(f===c){ht=null;break}if(y=f.sibling,y!==null){y.return=f.return,ht=y;break}ht=f.return}}function qv(c){for(;ht!==null;){var f=ht;if(f===c){ht=null;break}var y=f.sibling;if(y!==null){y.return=f.return,ht=y;break}ht=f.return}}function $b(c){for(;ht!==null;){var f=ht;try{switch(f.tag){case 0:case 11:case 15:var y=f.return;try{Sh(4,f)}catch(se){Br(f,y,se)}break;case 1:var _=f.stateNode;if(typeof _.componentDidMount=="function"){var M=f.return;try{_.componentDidMount()}catch(se){Br(f,M,se)}}var j=f.return;try{Gv(f)}catch(se){Br(f,j,se)}break;case 5:var K=f.return;try{Gv(f)}catch(se){Br(f,K,se)}}}catch(se){Br(f,f.return,se)}if(f===c){ht=null;break}var J=f.sibling;if(J!==null){J.return=f.return,ht=J;break}ht=f.return}}var ig=Math.ceil,bh=O.ReactCurrentDispatcher,Qv=O.ReactCurrentOwner,Xi=O.ReactCurrentBatchConfig,gn=0,Or=null,Ur=null,_i=0,ms=0,Hd=sn(0),ci=0,wh=null,Pl=0,og=0,Vd=0,Iu=null,fo=null,Zv=0,Kd=1/0,Il=null,sg=!1,Ru=null,Ga=null,_c=!1,Tc=null,ag=0,Yd=0,lg=null,Mu=-1,Au=0;function qi(){return gn&6?vn():Mu!==-1?Mu:Mu=vn()}function Jr(c){return c.mode&1?gn&2&&_i!==0?_i&-_i:Ip.transition!==null?(Au===0&&(Au=oc()),Au):(c=hn,c!==0||(c=window.event,c=c===void 0?16:Cr(c.type)),c):1}function Qi(c,f,y,_){if(50<Yd)throw Yd=0,lg=null,Error(e(185));la(c,y,_),(!(gn&2)||c!==Or)&&(c===Or&&(!(gn&2)&&(og|=y),ci===4&&Vs(c,_i)),Zi(c,_),y===1&&gn===0&&!(f.mode&1)&&(Kd=vn()+500,xi&&Oo()))}function Zi(c,f){var y=c.callbackNode;Na(c,f);var _=Si(c,c===Or?_i:0);if(_===0)y!==null&&pr(y),c.callbackNode=null,c.callbackPriority=0;else if(f=_&-_,c.callbackPriority!==f){if(y!=null&&pr(y),f===1)c.tag===0?Ev(Ob.bind(null,c)):Cv(Ob.bind(null,c)),bv(function(){!(gn&6)&&Oo()}),y=null;else{switch(cs(_)){case 1:y=as;break;case 4:y=tn;break;case 16:y=$s;break;case 536870912:y=co;break;default:y=$s}y=iy(y,Wd.bind(null,c))}c.callbackPriority=f,c.callbackNode=y}}function Wd(c,f){if(Mu=-1,Au=0,gn&6)throw Error(e(327));var y=c.callbackNode;if(Xd()&&c.callbackNode!==y)return null;var _=Si(c,c===Or?_i:0);if(_===0)return null;if(_&30||_&c.expiredLanes||f)f=ug(c,_);else{f=_;var M=gn;gn|=2;var j=cg();(Or!==c||_i!==f)&&(Il=null,Kd=vn()+500,$u(c,f));do try{UE();break}catch(J){Db(c,J)}while(1);Rv(),bh.current=j,gn=M,Ur!==null?f=0:(Or=null,_i=0,f=ci)}if(f!==0){if(f===2&&(M=za(c),M!==0&&(_=M,f=Jv(c,M))),f===1)throw y=wh,$u(c,0),Vs(c,_),Zi(c,vn()),y;if(f===6)Vs(c,_);else{if(M=c.current.alternate,!(_&30)&&!ey(M)&&(f=ug(c,_),f===2&&(j=za(c),j!==0&&(_=j,f=Jv(c,j))),f===1))throw y=wh,$u(c,0),Vs(c,_),Zi(c,vn()),y;switch(c.finishedWork=M,c.finishedLanes=_,f){case 0:case 1:throw Error(e(345));case 2:Ou(c,fo,Il);break;case 3:if(Vs(c,_),(_&130023424)===_&&(f=Zv+500-vn(),10<f)){if(Si(c,0)!==0)break;if(M=c.suspendedLanes,(M&_)!==_){qi(),c.pingedLanes|=c.suspendedLanes&M;break}c.timeoutHandle=pu(Ou.bind(null,c,fo,Il),f);break}Ou(c,fo,Il);break;case 4:if(Vs(c,_),(_&4194240)===_)break;for(f=c.eventTimes,M=-1;0<_;){var K=31-Ri(_);j=1<<K,K=f[K],K>M&&(M=K),_&=~j}if(_=M,_=vn()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*ig(_/1960))-_,10<_){c.timeoutHandle=pu(Ou.bind(null,c,fo,Il),_);break}Ou(c,fo,Il);break;case 5:Ou(c,fo,Il);break;default:throw Error(e(329))}}}return Zi(c,vn()),c.callbackNode===y?Wd.bind(null,c):null}function Jv(c,f){var y=Iu;return c.current.memoizedState.isDehydrated&&($u(c,f).flags|=256),c=ug(c,f),c!==2&&(f=fo,fo=y,f!==null&&xh(f)),c}function xh(c){fo===null?fo=c:fo.push.apply(fo,c)}function ey(c){for(var f=c;;){if(f.flags&16384){var y=f.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var _=0;_<y.length;_++){var M=y[_],j=M.getSnapshot;M=M.value;try{if(!Os(j(),M))return!1}catch{return!1}}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Vs(c,f){for(f&=~Vd,f&=~og,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var y=31-Ri(f),_=1<<y;c[y]=-1,f&=~_}}function Ob(c){if(gn&6)throw Error(e(327));Xd();var f=Si(c,0);if(!(f&1))return Zi(c,vn()),null;var y=ug(c,f);if(c.tag!==0&&y===2){var _=za(c);_!==0&&(f=_,y=Jv(c,_))}if(y===1)throw y=wh,$u(c,0),Vs(c,f),Zi(c,vn()),y;if(y===6)throw Error(e(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,Ou(c,fo,Il),Zi(c,vn()),null}function Gd(c,f){var y=gn;gn|=1;try{return c(f)}finally{gn=y,gn===0&&(Kd=vn()+500,xi&&Oo())}}function kc(c){Tc!==null&&Tc.tag===0&&!(gn&6)&&Xd();var f=gn;gn|=1;var y=Xi.transition,_=hn;try{if(Xi.transition=null,hn=1,c)return c()}finally{hn=_,Xi.transition=y,gn=f,!(gn&6)&&Oo()}}function ty(){ms=Hd.current,Nn(Hd)}function $u(c,f){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==-1&&(c.timeoutHandle=-1,lb(y)),Ur!==null)for(y=Ur.return;y!==null;){var _=y;switch(Tv(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&js();break;case 3:wc(),Nn(Fr),Nn(Kt),Dp();break;case 5:cn(_);break;case 4:wc();break;case 13:Nn(Lt);break;case 19:Nn(Lt);break;case 10:vc(_.type._context);break;case 22:case 23:ty()}y=y.return}if(Or=c,Ur=c=Pc(c.current,null),_i=ms=f,ci=0,wh=null,Vd=og=Pl=0,fo=Iu=null,Ai!==null){for(f=0;f<Ai.length;f++)if(y=Ai[f],_=y.interleaved,_!==null){y.interleaved=null;var M=_.next,j=y.pending;if(j!==null){var K=j.next;j.next=M,_.next=K}y.pending=_}Ai=null}return c}function Db(c,f){do{var y=Ur;try{if(Rv(),Lp.current=Zp,jt){for(var _=yr.memoizedState;_!==null;){var M=_.queue;M!==null&&(M.pending=null),_=_.next}jt=!1}if(Su=0,bn=$e=yr=null,Ka=!1,gs=0,Qv.current=null,y===null||y.return===null){ci=1,wh=f,Ur=null;break}e:{var j=c,K=y.return,J=y,se=f;if(f=_i,J.flags|=32768,se!==null&&typeof se=="object"&&typeof se.then=="function"){var Pe=se,Be=J,Ye=Be.tag;if(!(Be.mode&1)&&(Ye===0||Ye===11||Ye===15)){var Ue=Be.alternate;Ue?(Be.updateQueue=Ue.updateQueue,Be.memoizedState=Ue.memoizedState,Be.lanes=Ue.lanes):(Be.updateQueue=null,Be.memoizedState=null)}var lt=zv(K);if(lt!==null){lt.flags&=-257,Fv(lt,K,J,j,f),lt.mode&1&&Cb(j,Pe,f),f=lt,se=Pe;var gt=f.updateQueue;if(gt===null){var bt=new Set;bt.add(se),f.updateQueue=bt}else gt.add(se);break e}else{if(!(f&1)){Cb(j,Pe,f),ny();break e}se=Error(e(426))}}else if(vr&&J.mode&1){var Yr=zv(K);if(Yr!==null){!(Yr.flags&65536)&&(Yr.flags|=256),Fv(Yr,K,J,j,f),Pv(Ld(se,J));break e}}j=se=Ld(se,J),ci!==4&&(ci=2),Iu===null?Iu=[j]:Iu.push(j),j=K;do{switch(j.tag){case 3:j.flags|=65536,f&=-f,j.lanes|=f;var ve=xb(j,se,f);$v(j,ve);break e;case 1:J=se;var de=j.type,xe=j.stateNode;if(!(j.flags&128)&&(typeof de.getDerivedStateFromError=="function"||xe!==null&&typeof xe.componentDidCatch=="function"&&(Ga===null||!Ga.has(xe)))){j.flags|=65536,f&=-f,j.lanes|=f;var qe=hh(j,J,f);$v(j,qe);break e}}j=j.return}while(j!==null)}ry(y)}catch(xt){f=xt,Ur===y&&y!==null&&(Ur=y=y.return);continue}break}while(1)}function cg(){var c=bh.current;return bh.current=Zp,c===null?Zp:c}function ny(){(ci===0||ci===3||ci===2)&&(ci=4),Or===null||!(Pl&268435455)&&!(og&268435455)||Vs(Or,_i)}function ug(c,f){var y=gn;gn|=2;var _=cg();(Or!==c||_i!==f)&&(Il=null,$u(c,f));do try{FE();break}catch(M){Db(c,M)}while(1);if(Rv(),gn=y,bh.current=_,Ur!==null)throw Error(e(261));return Or=null,_i=0,ci}function FE(){for(;Ur!==null;)Lb(Ur)}function UE(){for(;Ur!==null&&!As();)Lb(Ur)}function Lb(c){var f=Nb(c.alternate,c,ms);c.memoizedProps=c.pendingProps,f===null?ry(c):Ur=f,Qv.current=null}function ry(c){var f=c;do{var y=f.alternate;if(c=f.return,f.flags&32768){if(y=Wv(y,f),y!==null){y.flags&=32767,Ur=y;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{ci=6,Ur=null;return}}else if(y=zE(y,f,ms),y!==null){Ur=y;return}if(f=f.sibling,f!==null){Ur=f;return}Ur=f=c}while(f!==null);ci===0&&(ci=5)}function Ou(c,f,y){var _=hn,M=Xi.transition;try{Xi.transition=null,hn=1,BE(c,f,y,_)}finally{Xi.transition=M,hn=_}return null}function BE(c,f,y,_){do Xd();while(Tc!==null);if(gn&6)throw Error(e(327));y=c.finishedWork;var M=c.finishedLanes;if(y===null)return null;if(c.finishedWork=null,c.finishedLanes=0,y===c.current)throw Error(e(177));c.callbackNode=null,c.callbackPriority=0;var j=y.lanes|y.childLanes;if(Hf(c,j),c===Or&&(Ur=Or=null,_i=0),!(y.subtreeFlags&2064)&&!(y.flags&2064)||_c||(_c=!0,iy($s,function(){return Xd(),null})),j=(y.flags&15990)!==0,y.subtreeFlags&15990||j){j=Xi.transition,Xi.transition=null;var K=hn;hn=1;var J=gn;gn|=4,Qv.current=null,Pb(c,y),Rb(y,c),yp(hu),ue=!!yv,hu=yv=null,c.current=y,Mb(y),rc(),gn=J,hn=K,Xi.transition=j}else c.current=y;if(_c&&(_c=!1,Tc=c,ag=M),j=c.pendingLanes,j===0&&(Ga=null),ou(y.stateNode),Zi(c,vn()),f!==null)for(_=c.onRecoverableError,y=0;y<f.length;y++)M=f[y],_(M.value,{componentStack:M.stack,digest:M.digest});if(sg)throw sg=!1,c=Ru,Ru=null,c;return ag&1&&c.tag!==0&&Xd(),j=c.pendingLanes,j&1?c===lg?Yd++:(Yd=0,lg=c):Yd=0,Oo(),null}function Xd(){if(Tc!==null){var c=cs(ag),f=Xi.transition,y=hn;try{if(Xi.transition=null,hn=16>c?16:c,Tc===null)var _=!1;else{if(c=Tc,Tc=null,ag=0,gn&6)throw Error(e(331));var M=gn;for(gn|=4,ht=c.current;ht!==null;){var j=ht,K=j.child;if(ht.flags&16){var J=j.deletions;if(J!==null){for(var se=0;se<J.length;se++){var Pe=J[se];for(ht=Pe;ht!==null;){var Be=ht;switch(Be.tag){case 0:case 11:case 15:yh(8,Be,j)}var Ye=Be.child;if(Ye!==null)Ye.return=Be,ht=Ye;else for(;ht!==null;){Be=ht;var Ue=Be.sibling,lt=Be.return;if(Xv(Be),Be===Pe){ht=null;break}if(Ue!==null){Ue.return=lt,ht=Ue;break}ht=lt}}}var gt=j.alternate;if(gt!==null){var bt=gt.child;if(bt!==null){gt.child=null;do{var Yr=bt.sibling;bt.sibling=null,bt=Yr}while(bt!==null)}}ht=j}}if(j.subtreeFlags&2064&&K!==null)K.return=j,ht=K;else e:for(;ht!==null;){if(j=ht,j.flags&2048)switch(j.tag){case 0:case 11:case 15:yh(9,j,j.return)}var ve=j.sibling;if(ve!==null){ve.return=j.return,ht=ve;break e}ht=j.return}}var de=c.current;for(ht=de;ht!==null;){K=ht;var xe=K.child;if(K.subtreeFlags&2064&&xe!==null)xe.return=K,ht=xe;else e:for(K=de;ht!==null;){if(J=ht,J.flags&2048)try{switch(J.tag){case 0:case 11:case 15:Sh(9,J)}}catch(xt){Br(J,J.return,xt)}if(J===K){ht=null;break e}var qe=J.sibling;if(qe!==null){qe.return=J.return,ht=qe;break e}ht=J.return}}if(gn=M,Oo(),Vi&&typeof Vi.onPostCommitFiberRoot=="function")try{Vi.onPostCommitFiberRoot(La,c)}catch{}_=!0}return _}finally{hn=y,Xi.transition=f}}return!1}function jb(c,f,y){f=Ld(y,f),f=xb(c,f,1),c=Sc(c,f,1),f=qi(),c!==null&&(la(c,1,f),Zi(c,f))}function Br(c,f,y){if(c.tag===3)jb(c,c,y);else for(;f!==null;){if(f.tag===3){jb(f,c,y);break}else if(f.tag===1){var _=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Ga===null||!Ga.has(_))){c=Ld(y,c),c=hh(f,c,1),f=Sc(f,c,1),c=qi(),f!==null&&(la(f,1,c),Zi(f,c));break}}f=f.return}}function HE(c,f,y){var _=c.pingCache;_!==null&&_.delete(f),f=qi(),c.pingedLanes|=c.suspendedLanes&y,Or===c&&(_i&y)===y&&(ci===4||ci===3&&(_i&130023424)===_i&&500>vn()-Zv?$u(c,0):Vd|=y),Zi(c,f)}function dg(c,f){f===0&&(c.mode&1?(f=Io,Io<<=1,!(Io&130023424)&&(Io=4194304)):f=1);var y=qi();c=Cl(c,f),c!==null&&(la(c,f,y),Zi(c,y))}function VE(c){var f=c.memoizedState,y=0;f!==null&&(y=f.retryLane),dg(c,y)}function KE(c,f){var y=0;switch(c.tag){case 13:var _=c.stateNode,M=c.memoizedState;M!==null&&(y=M.retryLane);break;case 19:_=c.stateNode;break;default:throw Error(e(314))}_!==null&&_.delete(f),dg(c,y)}var Nb;Nb=function(c,f,y){if(c!==null)if(c.memoizedProps!==f.pendingProps||Fr.current)Zr=!0;else{if(!(c.lanes&y)&&!(f.flags&128))return Zr=!1,Tl(c,f,y);Zr=!!(c.flags&131072)}else Zr=!1,vr&&f.flags&1048576&&_v(f,Id,f.index);switch(f.lanes=0,f.tag){case 2:var _=f.type;Wi(c,f),c=f.pendingProps;var M=Ls(f,Kt.current);nt(f,y),M=xc(null,f,_,c,M,y);var j=xu();return f.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Er(_)?(j=!0,Ep(f)):j=!1,f.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,Av(f),M.updater=Ap,f.stateNode=M,M._reactInternals=f,$p(f,_,c,y),f=Eb(null,f,_,!0,j,y)):(f.tag=0,vr&&j&&_p(f),si(null,f,M,y),f=f.child),f;case 16:_=f.elementType;e:{switch(Wi(c,f),c=f.pendingProps,M=_._init,_=M(_._payload),f.type=_,M=f.tag=WE(_),c=ps(_,c),M){case 0:f=jd(null,f,_,c,y);break e;case 1:f=Uv(null,f,_,c,y);break e;case 11:f=Ec(null,f,_,c,y);break e;case 14:f=eg(null,f,_,ps(_.type,c),y);break e}throw Error(e(306,_,""))}return f;case 0:return _=f.type,M=f.pendingProps,M=f.elementType===_?M:ps(_,M),jd(c,f,_,M,y);case 1:return _=f.type,M=f.pendingProps,M=f.elementType===_?M:ps(_,M),Uv(c,f,_,M,y);case 3:e:{if(_b(f),c===null)throw Error(e(387));_=f.pendingProps,j=f.memoizedState,M=j.element,oi(c,f),bc(f,_,null,y);var K=f.memoizedState;if(_=K.element,j.isDehydrated)if(j={element:_,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},f.updateQueue.baseState=j,f.memoizedState=j,f.flags&256){M=Ld(Error(e(423)),f),f=tg(c,f,_,y,M);break e}else if(_!==M){M=Ld(Error(e(424)),f),f=tg(c,f,_,y,M);break e}else for(jo=ha(f.stateNode.containerInfo.firstChild),hs=f,vr=!0,zs=null,y=bb(f,null,_,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Ar(),_===M){f=$i(c,f,y);break e}si(c,f,_,y)}f=f.child}return f;case 5:return Ot(f),c===null&&kp(f),_=f.type,M=f.pendingProps,j=c!==null?c.memoizedProps:null,K=M.children,th(_,M)?K=null:j!==null&&th(_,j)&&(f.flags|=32),an(c,f),si(c,f,K,y),f.child;case 6:return c===null&&kp(f),null;case 13:return Hv(c,f,y);case 4:return Dv(f,f.stateNode.containerInfo),_=f.pendingProps,c===null?f.child=Md(f,null,_,y):si(c,f,_,y),f.child;case 11:return _=f.type,M=f.pendingProps,M=f.elementType===_?M:ps(_,M),Ec(c,f,_,M,y);case 7:return si(c,f,f.pendingProps,y),f.child;case 8:return si(c,f,f.pendingProps.children,y),f.child;case 12:return si(c,f,f.pendingProps.children,y),f.child;case 10:e:{if(_=f.type._context,M=f.pendingProps,j=f.memoizedProps,K=M.value,zn(Va,_._currentValue),_._currentValue=K,j!==null)if(Os(j.value,K)){if(j.children===M.children&&!Fr.current){f=$i(c,f,y);break e}}else for(j=f.child,j!==null&&(j.return=f);j!==null;){var J=j.dependencies;if(J!==null){K=j.child;for(var se=J.firstContext;se!==null;){if(se.context===_){if(j.tag===1){se=El(-1,y&-y),se.tag=2;var Pe=j.updateQueue;if(Pe!==null){Pe=Pe.shared;var Be=Pe.pending;Be===null?se.next=se:(se.next=Be.next,Be.next=se),Pe.pending=se}}j.lanes|=y,se=j.alternate,se!==null&&(se.lanes|=y),Ci(j.return,y,f),J.lanes|=y;break}se=se.next}}else if(j.tag===10)K=j.type===f.type?null:j.child;else if(j.tag===18){if(K=j.return,K===null)throw Error(e(341));K.lanes|=y,J=K.alternate,J!==null&&(J.lanes|=y),Ci(K,y,f),K=j.sibling}else K=j.child;if(K!==null)K.return=j;else for(K=j;K!==null;){if(K===f){K=null;break}if(j=K.sibling,j!==null){j.return=K.return,K=j;break}K=K.return}j=K}si(c,f,M.children,y),f=f.child}return f;case 9:return M=f.type,_=f.pendingProps.children,nt(f,y),M=Kr(M),_=_(M),f.flags|=1,si(c,f,_,y),f.child;case 14:return _=f.type,M=ps(_,f.pendingProps),M=ps(_.type,M),eg(c,f,_,M,y);case 15:return Fo(c,f,f.type,f.pendingProps,y);case 17:return _=f.type,M=f.pendingProps,M=f.elementType===_?M:ps(_,M),Wi(c,f),f.tag=1,Er(_)?(c=!0,Ep(f)):c=!1,nt(f,y),mb(f,_,M),$p(f,_,M,y),Eb(null,f,_,!0,c,y);case 19:return Yv(c,f,y);case 22:return Tu(c,f,y)}throw Error(e(156,f.tag))};function iy(c,f){return Wn(c,f)}function YE(c,f,y,_){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(c,f,y,_){return new YE(c,f,y,_)}function oy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function WE(c){if(typeof c=="function")return oy(c)?1:0;if(c!=null){if(c=c.$$typeof,c===pe)return 11;if(c===he)return 14}return 2}function Pc(c,f){var y=c.alternate;return y===null?(y=Ks(c.tag,f,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=f,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&14680064,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,f=c.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function fg(c,f,y,_,M,j){var K=2;if(_=c,typeof c=="function")oy(c)&&(K=1);else if(typeof c=="string")K=5;else e:switch(c){case U:return Du(y.children,M,j,f);case Y:K=8,M|=8;break;case q:return c=Ks(12,y,f,M|2),c.elementType=q,c.lanes=j,c;case ae:return c=Ks(13,y,f,M),c.elementType=ae,c.lanes=j,c;case te:return c=Ks(19,y,f,M),c.elementType=te,c.lanes=j,c;case ge:return Ch(y,M,j,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case X:K=10;break e;case ie:K=9;break e;case pe:K=11;break e;case he:K=14;break e;case ce:K=16,_=null;break e}throw Error(e(130,c==null?c:typeof c,""))}return f=Ks(K,y,f,M),f.elementType=c,f.type=_,f.lanes=j,f}function Du(c,f,y,_){return c=Ks(7,c,_,f),c.lanes=y,c}function Ch(c,f,y,_){return c=Ks(22,c,_,f),c.elementType=ge,c.lanes=y,c.stateNode={isHidden:!1},c}function Eh(c,f,y){return c=Ks(6,c,null,f),c.lanes=y,c}function Lu(c,f,y){return f=Ks(4,c.children!==null?c.children:[],c.key,f),f.lanes=y,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function GE(c,f,y,_,M){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fl(0),this.expirationTimes=fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.identifierPrefix=_,this.onRecoverableError=M,this.mutableSourceEagerHydrationData=null}function hg(c,f,y,_,M,j,K,J,se){return c=new GE(c,f,y,J,se),f===1?(f=1,j===!0&&(f|=8)):f=0,j=Ks(3,null,null,f),c.current=j,j.stateNode=c,j.memoizedState={element:_,isDehydrated:y,cache:null,transitions:null,pendingSuspenseBoundaries:null},Av(j),c}function zb(c,f,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:_==null?null:""+_,children:c,containerInfo:f,implementation:y}}function sy(c){if(!c)return Ha;c=c._reactInternals;e:{if(qt(c)!==c||c.tag!==1)throw Error(e(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Er(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(e(171))}if(c.tag===1){var y=c.type;if(Er(y))return ih(c,y,f)}return f}function Fb(c,f,y,_,M,j,K,J,se){return c=hg(y,_,!0,c,M,j,K,J,se),c.context=sy(null),y=c.current,_=qi(),M=Jr(y),j=El(_,M),j.callback=f??null,Sc(y,j,M),c.current.lanes=M,la(c,M,_),Zi(c,_),c}function _h(c,f,y,_){var M=f.current,j=qi(),K=Jr(M);return y=sy(y),f.context===null?f.context=y:f.pendingContext=y,f=El(j,K),f.payload={element:c},_=_===void 0?null:_,_!==null&&(f.callback=_),c=Sc(M,f,K),c!==null&&(Qi(c,M,K,j),Mp(c,M,K)),K}function pg(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function Ub(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<f?y:f}}function ay(c,f){Ub(c,f),(c=c.alternate)&&Ub(c,f)}function Bb(){return null}var ly=typeof reportError=="function"?reportError:function(c){console.error(c)};function gg(c){this._internalRoot=c}Rl.prototype.render=gg.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(e(409));_h(c,f,null,null)},Rl.prototype.unmount=gg.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;kc(function(){_h(null,c,null,null)}),f[wl]=null}};function Rl(c){this._internalRoot=c}Rl.prototype.unstable_scheduleHydration=function(c){if(c){var f=ac();c={blockedOn:null,target:c,priority:f};for(var y=0;y<An.length&&f!==0&&f<An[y].priority;y++);An.splice(y,0,c),y===0&&lu(c)}};function cy(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function mg(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function Hb(){}function XE(c,f,y,_,M){if(M){if(typeof _=="function"){var j=_;_=function(){var Pe=pg(K);j.call(Pe)}}var K=Fb(f,_,c,0,null,!1,!1,"",Hb);return c._reactRootContainer=K,c[wl]=K.current,kd(c.nodeType===8?c.parentNode:c),kc(),K}for(;M=c.lastChild;)c.removeChild(M);if(typeof _=="function"){var J=_;_=function(){var Pe=pg(se);J.call(Pe)}}var se=hg(c,0,!1,null,null,!1,!1,"",Hb);return c._reactRootContainer=se,c[wl]=se.current,kd(c.nodeType===8?c.parentNode:c),kc(function(){_h(f,se,y,_)}),se}function vg(c,f,y,_,M){var j=y._reactRootContainer;if(j){var K=j;if(typeof M=="function"){var J=M;M=function(){var se=pg(K);J.call(se)}}_h(f,K,c,M)}else K=XE(y,f,c,M,_);return pg(K)}hl=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var y=Ro(f.pendingLanes);y!==0&&(ls(f,y|1),Zi(f,vn()),!(gn&6)&&(Kd=vn()+500,Oo()))}break;case 13:kc(function(){var _=Cl(c,1);if(_!==null){var M=qi();Qi(_,c,1,M)}}),ay(c,1)}},sc=function(c){if(c.tag===13){var f=Cl(c,134217728);if(f!==null){var y=qi();Qi(f,c,134217728,y)}ay(c,134217728)}},on=function(c){if(c.tag===13){var f=Jr(c),y=Cl(c,f);if(y!==null){var _=qi();Qi(y,c,f,_)}ay(c,f)}},ac=function(){return hn},lc=function(c,f){var y=hn;try{return hn=c,f()}finally{hn=y}},gi=function(c,f,y){switch(f){case"input":if(jn(c,y),f=y.name,y.type==="radio"&&f!=null){for(y=c;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<y.length;f++){var _=y[f];if(_!==c&&_.form===c.form){var M=Rt(_);if(!M)throw Error(e(90));We(_),jn(_,M)}}}break;case"textarea":io(c,y);break;case"select":f=y.value,f!=null&&Mr(c,!!y.multiple,f,!1)}},aa=Gd,$a=kc;var qE={usingClientEntryPoint:!1,Events:[rh,Pd,Rt,mi,Is,Gd]},qd={findFiberByHostInstance:Ds,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},QE={bundleType:qd.bundleType,version:qd.version,rendererPackageName:qd.rendererPackageName,rendererConfig:qd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=Nr(c),c===null?null:c.stateNode},findFiberByHostInstance:qd.findFiberByHostInstance||Bb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yg.isDisabled&&yg.supportsFiber)try{La=yg.inject(QE),Vi=yg}catch{}}return Qs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qE,Qs.createPortal=function(c,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cy(f))throw Error(e(200));return zb(c,f,null,y)},Qs.createRoot=function(c,f){if(!cy(c))throw Error(e(299));var y=!1,_="",M=ly;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onRecoverableError!==void 0&&(M=f.onRecoverableError)),f=hg(c,1,!1,null,null,y,!1,_,M),c[wl]=f.current,kd(c.nodeType===8?c.parentNode:c),new gg(f)},Qs.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(e(188)):(c=Object.keys(c).join(","),Error(e(268,c)));return c=Nr(f),c=c===null?null:c.stateNode,c},Qs.flushSync=function(c){return kc(c)},Qs.hydrate=function(c,f,y){if(!mg(f))throw Error(e(200));return vg(null,c,f,!0,y)},Qs.hydrateRoot=function(c,f,y){if(!cy(c))throw Error(e(405));var _=y!=null&&y.hydratedSources||null,M=!1,j="",K=ly;if(y!=null&&(y.unstable_strictMode===!0&&(M=!0),y.identifierPrefix!==void 0&&(j=y.identifierPrefix),y.onRecoverableError!==void 0&&(K=y.onRecoverableError)),f=Fb(f,null,c,1,y??null,M,!1,j,K),c[wl]=f.current,kd(c),_)for(c=0;c<_.length;c++)y=_[c],M=y._getVersion,M=M(y._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[y,M]:f.mutableSourceEagerHydrationData.push(y,M);return new Rl(f)},Qs.render=function(c,f,y){if(!mg(f))throw Error(e(200));return vg(null,c,f,!1,y)},Qs.unmountComponentAtNode=function(c){if(!mg(c))throw Error(e(40));return c._reactRootContainer?(kc(function(){vg(null,null,c,!1,function(){c._reactRootContainer=null,c[wl]=null})}),!0):!1},Qs.unstable_batchedUpdates=Gd,Qs.unstable_renderSubtreeIntoContainer=function(c,f,y,_){if(!mg(y))throw Error(e(200));if(c==null||c._reactInternals===void 0)throw Error(e(38));return vg(c,f,y,!1,_)},Qs.version="18.2.0-next-9e3b772b8-20220608",Qs}var Zs={};/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yO;function xV(){return yO||(yO=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=I,n=sL(),e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,r=!1;function o(i){r=i}function a(i){if(!r){for(var s=arguments.length,p=new Array(s>1?s-1:0),m=1;m<s;m++)p[m-1]=arguments[m];u("warn",i,p)}}function l(i){if(!r){for(var s=arguments.length,p=new Array(s>1?s-1:0),m=1;m<s;m++)p[m-1]=arguments[m];u("error",i,p)}}function u(i,s,p){{var m=e.ReactDebugCurrentFrame,b=m.getStackAddendum();b!==""&&(s+="%s",p=p.concat([b]));var P=p.map(function($){return String($)});P.unshift("Warning: "+s),Function.prototype.apply.call(console[i],console,P)}}var d=0,h=1,g=2,v=3,S=4,w=5,k=6,C=7,E=8,R=9,L=10,A=11,O=12,D=13,z=14,U=15,Y=16,q=17,X=18,ie=19,pe=21,ae=22,te=23,he=24,ce=25,ge=!0,me=!1,we=!1,V=!1,Z=!1,Ce=!0,Ae=!1,De=!1,Ie=!0,Ne=!0,Ve=!0,Ke=new Set,Xe={},at={};function _t(i,s){We(i,s),We(i+"Capture",s)}function We(i,s){Xe[i]&&l("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",i),Xe[i]=s;{var p=i.toLowerCase();at[p]=i,i==="onDoubleClick"&&(at.ondblclick=i)}for(var m=0;m<s.length;m++)Ke.add(s[m])}var Ht=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dn=Object.prototype.hasOwnProperty;function Xt(i){{var s=typeof Symbol=="function"&&Symbol.toStringTag,p=s&&i[Symbol.toStringTag]||i.constructor.name||"Object";return p}}function ln(i){try{return jn(i),!1}catch{return!0}}function jn(i){return""+i}function qr(i,s){if(ln(i))return l("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",s,Xt(i)),jn(i)}function fi(i){if(ln(i))return l("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Xt(i)),jn(i)}function jr(i,s){if(ln(i))return l("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.",s,Xt(i)),jn(i)}function Mr(i,s){if(ln(i))return l("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",s,Xt(i)),jn(i)}function Bi(i){if(ln(i))return l("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",Xt(i)),jn(i)}function hi(i){if(ln(i))return l("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",Xt(i)),jn(i)}var io=0,ri=1,Hi=2,Kn=3,ii=4,ss=5,wr=6,et=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",wt=et+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",rn=new RegExp("^["+et+"]["+wt+"]*$"),En={},Sn={};function xr(i){return dn.call(Sn,i)?!0:dn.call(En,i)?!1:rn.test(i)?(Sn[i]=!0,!0):(En[i]=!0,l("Invalid attribute name: `%s`",i),!1)}function ar(i,s,p){return s!==null?s.type===io:p?!1:i.length>2&&(i[0]==="o"||i[0]==="O")&&(i[1]==="n"||i[1]==="N")}function pi(i,s,p,m){if(p!==null&&p.type===io)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":{if(m)return!1;if(p!==null)return!p.acceptsBooleans;var b=i.toLowerCase().slice(0,5);return b!=="data-"&&b!=="aria-"}default:return!1}}function fn(i,s,p,m){if(s===null||typeof s>"u"||pi(i,s,p,m))return!0;if(m)return!1;if(p!==null)switch(p.type){case Kn:return!s;case ii:return s===!1;case ss:return isNaN(s);case wr:return isNaN(s)||s<1}return!1}function gi(i){return Mn.hasOwnProperty(i)?Mn[i]:null}function Rn(i,s,p,m,b,P,$){this.acceptsBooleans=s===Hi||s===Kn||s===ii,this.attributeName=m,this.attributeNamespace=b,this.mustUseProperty=p,this.propertyName=i,this.type=s,this.sanitizeURL=P,this.removeEmptyString=$}var Mn={},oo=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];oo.forEach(function(i){Mn[i]=new Rn(i,io,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0],p=i[1];Mn[s]=new Rn(s,ri,!1,p,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){Mn[i]=new Rn(i,Hi,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Mn[i]=new Rn(i,Hi,!1,i,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(i){Mn[i]=new Rn(i,Kn,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){Mn[i]=new Rn(i,Kn,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){Mn[i]=new Rn(i,ii,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){Mn[i]=new Rn(i,wr,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){Mn[i]=new Rn(i,ss,!1,i.toLowerCase(),null,!1,!1)});var mi=/[\-\:]([a-z])/g,Is=function(i){return i[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(i){var s=i.replace(mi,Is);Mn[s]=new Rn(s,ri,!1,i,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(i){var s=i.replace(mi,Is);Mn[s]=new Rn(s,ri,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(mi,Is);Mn[s]=new Rn(s,ri,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){Mn[i]=new Rn(i,ri,!1,i.toLowerCase(),null,!1,!1)});var aa="xlinkHref";Mn[aa]=new Rn("xlinkHref",ri,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){Mn[i]=new Rn(i,ri,!1,i.toLowerCase(),null,!0,!0)});var $a=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,so=!1;function Oa(i){!so&&$a.test(i)&&(so=!0,l("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(i)))}function ao(i,s,p,m){if(m.mustUseProperty){var b=m.propertyName;return i[b]}else{qr(p,s),m.sanitizeURL&&Oa(""+p);var P=m.attributeName,$=null;if(m.type===ii){if(i.hasAttribute(P)){var F=i.getAttribute(P);return F===""?!0:fn(s,p,m,!1)?F:F===""+p?p:F}}else if(i.hasAttribute(P)){if(fn(s,p,m,!1))return i.getAttribute(P);if(m.type===Kn)return p;$=i.getAttribute(P)}return fn(s,p,m,!1)?$===null?p:$:$===""+p?p:$}}function Rs(i,s,p,m){{if(!xr(s))return;if(!i.hasAttribute(s))return p===void 0?void 0:null;var b=i.getAttribute(s);return qr(p,s),b===""+p?p:b}}function lo(i,s,p,m){var b=gi(s);if(!ar(s,b,m)){if(fn(s,p,b,m)&&(p=null),m||b===null){if(xr(s)){var P=s;p===null?i.removeAttribute(P):(qr(p,s),i.setAttribute(P,""+p))}return}var $=b.mustUseProperty;if($){var F=b.propertyName;if(p===null){var H=b.type;i[F]=H===Kn?!1:""}else i[F]=p;return}var W=b.attributeName,G=b.attributeNamespace;if(p===null)i.removeAttribute(W);else{var fe=b.type,le;fe===Kn||fe===ii&&p===!0?le="":(qr(p,W),le=""+p,b.sanitizeURL&&Oa(le.toString())),G?i.setAttributeNS(G,W,le):i.setAttribute(W,le)}}}var Ms=Symbol.for("react.element"),vi=Symbol.for("react.portal"),Ii=Symbol.for("react.fragment"),yi=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),ze=Symbol.for("react.provider"),tt=Symbol.for("react.context"),st=Symbol.for("react.forward_ref"),qt=Symbol.for("react.suspense"),Zt=Symbol.for("react.suspense_list"),Jt=Symbol.for("react.memo"),Pt=Symbol.for("react.lazy"),Nr=Symbol.for("react.scope"),Yn=Symbol.for("react.debug_trace_mode"),Wn=Symbol.for("react.offscreen"),pr=Symbol.for("react.legacy_hidden"),As=Symbol.for("react.cache"),rc=Symbol.for("react.tracing_marker"),vn=Symbol.iterator,Bf="@@iterator";function as(i){if(i===null||typeof i!="object")return null;var s=vn&&i[vn]||i[Bf];return typeof s=="function"?s:null}var tn=Object.assign,$s=0,Da,co,La,Vi,ou,Ri,su;function au(){}au.__reactDisabledLog=!0;function dl(){{if($s===0){Da=console.log,co=console.info,La=console.warn,Vi=console.error,ou=console.group,Ri=console.groupCollapsed,su=console.groupEnd;var i={configurable:!0,enumerable:!0,value:au,writable:!0};Object.defineProperties(console,{info:i,log:i,warn:i,error:i,group:i,groupCollapsed:i,groupEnd:i})}$s++}}function ic(){{if($s--,$s===0){var i={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:tn({},i,{value:Da}),info:tn({},i,{value:co}),warn:tn({},i,{value:La}),error:tn({},i,{value:Vi}),group:tn({},i,{value:ou}),groupCollapsed:tn({},i,{value:Ri}),groupEnd:tn({},i,{value:su})})}$s<0&&l("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Io=e.ReactCurrentDispatcher,Ro;function Si(i,s,p){{if(Ro===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);Ro=m&&m[1]||""}return`
`+Ro+i}}var ja=!1,Na;{var za=typeof WeakMap=="function"?WeakMap:Map;Na=new za}function oc(i,s){if(!i||ja)return"";{var p=Na.get(i);if(p!==void 0)return p}var m;ja=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var P;P=Io.current,Io.current=null,dl();try{if(s){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(ke){m=ke}Reflect.construct(i,[],$)}else{try{$.call()}catch(ke){m=ke}i.call($.prototype)}}else{try{throw Error()}catch(ke){m=ke}i()}}catch(ke){if(ke&&m&&typeof ke.stack=="string"){for(var F=ke.stack.split(`
`),H=m.stack.split(`
`),W=F.length-1,G=H.length-1;W>=1&&G>=0&&F[W]!==H[G];)G--;for(;W>=1&&G>=0;W--,G--)if(F[W]!==H[G]){if(W!==1||G!==1)do if(W--,G--,G<0||F[W]!==H[G]){var fe=`
`+F[W].replace(" at new "," at ");return i.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",i.displayName)),typeof i=="function"&&Na.set(i,fe),fe}while(W>=1&&G>=0);break}}}finally{ja=!1,Io.current=P,ic(),Error.prepareStackTrace=b}var le=i?i.displayName||i.name:"",Te=le?Si(le):"";return typeof i=="function"&&Na.set(i,Te),Te}function fl(i,s,p){return oc(i,!0)}function la(i,s,p){return oc(i,!1)}function Hf(i){var s=i.prototype;return!!(s&&s.isReactComponent)}function ls(i,s,p){if(i==null)return"";if(typeof i=="function")return oc(i,Hf(i));if(typeof i=="string")return Si(i);switch(i){case qt:return Si("Suspense");case Zt:return Si("SuspenseList")}if(typeof i=="object")switch(i.$$typeof){case st:return la(i.render);case Jt:return ls(i.type,s,p);case Pt:{var m=i,b=m._payload,P=m._init;try{return ls(P(b),s,p)}catch{}}}return""}function hn(i){switch(i._debugOwner&&i._debugOwner.type,i._debugSource,i.tag){case w:return Si(i.type);case Y:return Si("Lazy");case D:return Si("Suspense");case ie:return Si("SuspenseList");case d:case g:case U:return la(i.type);case A:return la(i.type.render);case h:return fl(i.type);default:return""}}function cs(i){try{var s="",p=i;do s+=hn(p),p=p.return;while(p);return s}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function hl(i,s,p){var m=i.displayName;if(m)return m;var b=s.displayName||s.name||"";return b!==""?p+"("+b+")":p}function sc(i){return i.displayName||"Context"}function on(i){if(i==null)return null;if(typeof i.tag=="number"&&l("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Ii:return"Fragment";case vi:return"Portal";case ne:return"Profiler";case yi:return"StrictMode";case qt:return"Suspense";case Zt:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case tt:var s=i;return sc(s)+".Consumer";case ze:var p=i;return sc(p._context)+".Provider";case st:return hl(i,i.render,"ForwardRef");case Jt:var m=i.displayName||null;return m!==null?m:on(i.type)||"Memo";case Pt:{var b=i,P=b._payload,$=b._init;try{return on($(P))}catch{return null}}}return null}function ac(i,s,p){var m=s.displayName||s.name||"";return i.displayName||(m!==""?p+"("+m+")":p)}function lc(i){return i.displayName||"Context"}function Vt(i){var s=i.tag,p=i.type;switch(s){case he:return"Cache";case R:var m=p;return lc(m)+".Consumer";case L:var b=p;return lc(b._context)+".Provider";case X:return"DehydratedFragment";case A:return ac(p,p.render,"ForwardRef");case C:return"Fragment";case w:return p;case S:return"Portal";case v:return"Root";case k:return"Text";case Y:return on(p);case E:return p===yi?"StrictMode":"Mode";case ae:return"Offscreen";case O:return"Profiler";case pe:return"Scope";case D:return"Suspense";case ie:return"SuspenseList";case ce:return"TracingMarker";case h:case d:case q:case g:case z:case U:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;break}return null}var pl=e.ReactDebugCurrentFrame,gr=null,zr=!1;function bi(){{if(gr===null)return null;var i=gr._debugOwner;if(i!==null&&typeof i<"u")return Vt(i)}return null}function Fa(){return gr===null?"":cs(gr)}function er(){pl.getCurrentStack=null,gr=null,zr=!1}function An(i){pl.getCurrentStack=i===null?null:Fa,gr=i,zr=!1}function cc(){return gr}function Ki(i){zr=i}function Vr(i){return""+i}function us(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return hi(i),i;default:return""}}var lu={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function uo(i,s){lu[s.type]||s.onChange||s.onInput||s.readOnly||s.disabled||s.value==null||l("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),s.onChange||s.readOnly||s.disabled||s.checked==null||l("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function ca(i){var s=i.type,p=i.nodeName;return p&&p.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function bd(i){return i._valueTracker}function Mo(i){i._valueTracker=null}function Ua(i){var s="";return i&&(ca(i)?s=i.checked?"true":"false":s=i.value),s}function Q(i){var s=ca(i)?"checked":"value",p=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);hi(i[s]);var m=""+i[s];if(!(i.hasOwnProperty(s)||typeof p>"u"||typeof p.get!="function"||typeof p.set!="function")){var b=p.get,P=p.set;Object.defineProperty(i,s,{configurable:!0,get:function(){return b.call(this)},set:function(F){hi(F),m=""+F,P.call(this,F)}}),Object.defineProperty(i,s,{enumerable:p.enumerable});var $={getValue:function(){return m},setValue:function(F){hi(F),m=""+F},stopTracking:function(){Mo(i),delete i[s]}};return $}}function ue(i){bd(i)||(i._valueTracker=Q(i))}function je(i){if(!i)return!1;var s=bd(i);if(!s)return!0;var p=s.getValue(),m=Ua(i);return m!==p?(s.setValue(m),!0):!1}function it(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var _n=!1,Ft=!1,Hn=!1,Cr=!1;function Vn(i){var s=i.type==="checkbox"||i.type==="radio";return s?i.checked!=null:i.value!=null}function B(i,s){var p=i,m=s.checked,b=tn({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??p._wrapperState.initialChecked});return b}function ee(i,s){uo("input",s),s.checked!==void 0&&s.defaultChecked!==void 0&&!Ft&&(l("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",bi()||"A component",s.type),Ft=!0),s.value!==void 0&&s.defaultValue!==void 0&&!_n&&(l("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",bi()||"A component",s.type),_n=!0);var p=i,m=s.defaultValue==null?"":s.defaultValue;p._wrapperState={initialChecked:s.checked!=null?s.checked:s.defaultChecked,initialValue:us(s.value!=null?s.value:m),controlled:Vn(s)}}function ye(i,s){var p=i,m=s.checked;m!=null&&lo(p,"checked",m,!1)}function Ee(i,s){var p=i;{var m=Vn(s);!p._wrapperState.controlled&&m&&!Cr&&(l("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Cr=!0),p._wrapperState.controlled&&!m&&!Hn&&(l("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Hn=!0)}ye(i,s);var b=us(s.value),P=s.type;if(b!=null)P==="number"?(b===0&&p.value===""||p.value!=b)&&(p.value=Vr(b)):p.value!==Vr(b)&&(p.value=Vr(b));else if(P==="submit"||P==="reset"){p.removeAttribute("value");return}s.hasOwnProperty("value")?St(p,s.type,b):s.hasOwnProperty("defaultValue")&&St(p,s.type,us(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(p.defaultChecked=!!s.defaultChecked)}function Fe(i,s,p){var m=i;if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var b=s.type,P=b==="submit"||b==="reset";if(P&&(s.value===void 0||s.value===null))return;var $=Vr(m._wrapperState.initialValue);p||$!==m.value&&(m.value=$),m.defaultValue=$}var F=m.name;F!==""&&(m.name=""),m.defaultChecked=!m.defaultChecked,m.defaultChecked=!!m._wrapperState.initialChecked,F!==""&&(m.name=F)}function pt(i,s){var p=i;Ee(p,s),Je(p,s)}function Je(i,s){var p=s.name;if(s.type==="radio"&&p!=null){for(var m=i;m.parentNode;)m=m.parentNode;qr(p,"name");for(var b=m.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),P=0;P<b.length;P++){var $=b[P];if(!($===i||$.form!==i.form)){var F=sw($);if(!F)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");je($),Ee($,F)}}}}function St(i,s,p){(s!=="number"||it(i.ownerDocument)!==i)&&(p==null?i.defaultValue=Vr(i._wrapperState.initialValue):i.defaultValue!==Vr(p)&&(i.defaultValue=Vr(p)))}var Gt=!1,pn=!1,$n=!1;function Tn(i,s){s.value==null&&(typeof s.children=="object"&&s.children!==null?t.Children.forEach(s.children,function(p){p!=null&&(typeof p=="string"||typeof p=="number"||pn||(pn=!0,l("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}):s.dangerouslySetInnerHTML!=null&&($n||($n=!0,l("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")))),s.selected!=null&&!Gt&&(l("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),Gt=!0)}function tr(i,s){s.value!=null&&i.setAttribute("value",Vr(us(s.value)))}var lr=Array.isArray;function yn(i){return lr(i)}var gl;gl=!1;function wd(){var i=bi();return i?`

Check the render method of \``+i+"`.":""}var Vf=["value","defaultValue"];function ev(i){{uo("select",i);for(var s=0;s<Vf.length;s++){var p=Vf[s];if(i[p]!=null){var m=yn(i[p]);i.multiple&&!m?l("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",p,wd()):!i.multiple&&m&&l("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",p,wd())}}}}function ua(i,s,p,m){var b=i.options;if(s){for(var P=p,$={},F=0;F<P.length;F++)$["$"+P[F]]=!0;for(var H=0;H<b.length;H++){var W=$.hasOwnProperty("$"+b[H].value);b[H].selected!==W&&(b[H].selected=W),W&&m&&(b[H].defaultSelected=!0)}}else{for(var G=Vr(us(p)),fe=null,le=0;le<b.length;le++){if(b[le].value===G){b[le].selected=!0,m&&(b[le].defaultSelected=!0);return}fe===null&&!b[le].disabled&&(fe=b[le])}fe!==null&&(fe.selected=!0)}}function Kf(i,s){return tn({},s,{value:void 0})}function Yf(i,s){var p=i;ev(s),p._wrapperState={wasMultiple:!!s.multiple},s.value!==void 0&&s.defaultValue!==void 0&&!gl&&(l("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),gl=!0)}function tv(i,s){var p=i;p.multiple=!!s.multiple;var m=s.value;m!=null?ua(p,!!s.multiple,m,!1):s.defaultValue!=null&&ua(p,!!s.multiple,s.defaultValue,!0)}function yE(i,s){var p=i,m=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!s.multiple;var b=s.value;b!=null?ua(p,!!s.multiple,b,!1):m!==!!s.multiple&&(s.defaultValue!=null?ua(p,!!s.multiple,s.defaultValue,!0):ua(p,!!s.multiple,s.multiple?[]:"",!1))}function SE(i,s){var p=i,m=s.value;m!=null&&ua(p,!!s.multiple,m,!1)}var nv=!1;function rv(i,s){var p=i;if(s.dangerouslySetInnerHTML!=null)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");var m=tn({},s,{value:void 0,defaultValue:void 0,children:Vr(p._wrapperState.initialValue)});return m}function D0(i,s){var p=i;uo("textarea",s),s.value!==void 0&&s.defaultValue!==void 0&&!nv&&(l("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",bi()||"A component"),nv=!0);var m=s.value;if(m==null){var b=s.children,P=s.defaultValue;if(b!=null){l("Use the `defaultValue` or `value` props instead of setting children on <textarea>.");{if(P!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(yn(b)){if(b.length>1)throw new Error("<textarea> can only have at most one child.");b=b[0]}P=b}}P==null&&(P=""),m=P}p._wrapperState={initialValue:us(m)}}function L0(i,s){var p=i,m=us(s.value),b=us(s.defaultValue);if(m!=null){var P=Vr(m);P!==p.value&&(p.value=P),s.defaultValue==null&&p.defaultValue!==P&&(p.defaultValue=P)}b!=null&&(p.defaultValue=Vr(b))}function j0(i,s){var p=i,m=p.textContent;m===p._wrapperState.initialValue&&m!==""&&m!==null&&(p.value=m)}function iv(i,s){L0(i,s)}var ml="http://www.w3.org/1999/xhtml",bE="http://www.w3.org/1998/Math/MathML",ov="http://www.w3.org/2000/svg";function hp(i){switch(i){case"svg":return ov;case"math":return bE;default:return ml}}function sv(i,s){return i==null||i===ml?hp(s):i===ov&&s==="foreignObject"?ml:i}var wE=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,p,m,b){MSApp.execUnsafeLocalFunction(function(){return i(s,p,m,b)})}:i},pp,N0=wE(function(i,s){if(i.namespaceURI===ov&&!("innerHTML"in i)){pp=pp||document.createElement("div"),pp.innerHTML="<svg>"+s.valueOf().toString()+"</svg>";for(var p=pp.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;p.firstChild;)i.appendChild(p.firstChild);return}i.innerHTML=s}),Ao=1,vl=3,Qr=8,da=9,cu=11,gp=function(i,s){if(s){var p=i.firstChild;if(p&&p===i.lastChild&&p.nodeType===vl){p.nodeValue=s;return}}i.textContent=s},z0={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},xd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function F0(i,s){return i+s.charAt(0).toUpperCase()+s.substring(1)}var U0=["Webkit","ms","Moz","O"];Object.keys(xd).forEach(function(i){U0.forEach(function(s){xd[F0(s,i)]=xd[i]})});function mp(i,s,p){var m=s==null||typeof s=="boolean"||s==="";return m?"":!p&&typeof s=="number"&&s!==0&&!(xd.hasOwnProperty(i)&&xd[i])?s+"px":(Mr(s,i),(""+s).trim())}var Cd=/([A-Z])/g,xE=/^ms-/;function CE(i){return i.replace(Cd,"-$1").toLowerCase().replace(xE,"-ms-")}var B0=function(){};{var H0=/^(?:webkit|moz|o)[A-Z]/,V0=/^-ms-/,Wf=/-(.)/g,Ed=/;\s*$/,_d={},Td={},K0=!1,av=!1,lv=function(i){return i.replace(Wf,function(s,p){return p.toUpperCase()})},cv=function(i){_d.hasOwnProperty(i)&&_d[i]||(_d[i]=!0,l("Unsupported style property %s. Did you mean %s?",i,lv(i.replace(V0,"ms-"))))},Y0=function(i){_d.hasOwnProperty(i)&&_d[i]||(_d[i]=!0,l("Unsupported vendor-prefixed style property %s. Did you mean %s?",i,i.charAt(0).toUpperCase()+i.slice(1)))},W0=function(i,s){Td.hasOwnProperty(s)&&Td[s]||(Td[s]=!0,l(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,i,s.replace(Ed,"")))},G0=function(i,s){K0||(K0=!0,l("`NaN` is an invalid value for the `%s` css style property.",i))},EE=function(i,s){av||(av=!0,l("`Infinity` is an invalid value for the `%s` css style property.",i))};B0=function(i,s){i.indexOf("-")>-1?cv(i):H0.test(i)?Y0(i):Ed.test(s)&&W0(i,s),typeof s=="number"&&(isNaN(s)?G0(i,s):isFinite(s)||EE(i,s))}}var _E=B0;function TE(i){{var s="",p="";for(var m in i)if(i.hasOwnProperty(m)){var b=i[m];if(b!=null){var P=m.indexOf("--")===0;s+=p+(P?m:CE(m))+":",s+=mp(m,b,P),p=";"}}return s||null}}function X0(i,s){var p=i.style;for(var m in s)if(s.hasOwnProperty(m)){var b=m.indexOf("--")===0;b||_E(m,s[m]);var P=mp(m,s[m],b);m==="float"&&(m="cssFloat"),b?p.setProperty(m,P):p[m]=P}}function kE(i){return i==null||typeof i=="boolean"||i===""}function Os(i){var s={};for(var p in i)for(var m=z0[p]||[p],b=0;b<m.length;b++)s[m[b]]=p;return s}function Gf(i,s){{if(!s)return;var p=Os(i),m=Os(s),b={};for(var P in p){var $=p[P],F=m[P];if(F&&$!==F){var H=$+","+F;if(b[H])continue;b[H]=!0,l("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",kE(i[$])?"Removing":"Updating",$,F)}}}}var q0={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Q0=tn({menuitem:!0},q0),Z0="__html";function vp(i,s){if(s){if(Q0[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw new Error(i+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof s.dangerouslySetInnerHTML!="object"||!(Z0 in s.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!s.suppressContentEditableWarning&&s.contentEditable&&s.children!=null&&l("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),s.style!=null&&typeof s.style!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function yl(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yp={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},J0={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},fa={},uv=new RegExp("^(aria)-["+wt+"]*$"),Xf=new RegExp("^(aria)[A-Z]["+wt+"]*$");function dv(i,s){{if(dn.call(fa,s)&&fa[s])return!0;if(Xf.test(s)){var p="aria-"+s.slice(4).toLowerCase(),m=J0.hasOwnProperty(p)?p:null;if(m==null)return l("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",s),fa[s]=!0,!0;if(s!==m)return l("Invalid ARIA attribute `%s`. Did you mean `%s`?",s,m),fa[s]=!0,!0}if(uv.test(s)){var b=s.toLowerCase(),P=J0.hasOwnProperty(b)?b:null;if(P==null)return fa[s]=!0,!1;if(s!==P)return l("Unknown ARIA attribute `%s`. Did you mean `%s`?",s,P),fa[s]=!0,!0}}return!0}function eb(i,s){{var p=[];for(var m in s){var b=dv(i,m);b||p.push(m)}var P=p.map(function($){return"`"+$+"`"}).join(", ");p.length===1?l("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",P,i):p.length>1&&l("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",P,i)}}function Sp(i,s){yl(i,s)||eb(i,s)}var uu=!1;function fv(i,s){{if(i!=="input"&&i!=="textarea"&&i!=="select")return;s!=null&&s.value===null&&!uu&&(uu=!0,i==="select"&&s.multiple?l("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",i):l("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",i))}}var hv=function(){};{var wi={},pv=/^on./,tb=/^on[^A-Z]/,nb=new RegExp("^(aria)-["+wt+"]*$"),rb=new RegExp("^(aria)[A-Z]["+wt+"]*$");hv=function(i,s,p,m){if(dn.call(wi,s)&&wi[s])return!0;var b=s.toLowerCase();if(b==="onfocusin"||b==="onfocusout")return l("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),wi[s]=!0,!0;if(m!=null){var P=m.registrationNameDependencies,$=m.possibleRegistrationNames;if(P.hasOwnProperty(s))return!0;var F=$.hasOwnProperty(b)?$[b]:null;if(F!=null)return l("Invalid event handler property `%s`. Did you mean `%s`?",s,F),wi[s]=!0,!0;if(pv.test(s))return l("Unknown event handler property `%s`. It will be ignored.",s),wi[s]=!0,!0}else if(pv.test(s))return tb.test(s)&&l("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",s),wi[s]=!0,!0;if(nb.test(s)||rb.test(s))return!0;if(b==="innerhtml")return l("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),wi[s]=!0,!0;if(b==="aria")return l("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),wi[s]=!0,!0;if(b==="is"&&p!==null&&p!==void 0&&typeof p!="string")return l("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof p),wi[s]=!0,!0;if(typeof p=="number"&&isNaN(p))return l("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",s),wi[s]=!0,!0;var H=gi(s),W=H!==null&&H.type===io;if(yp.hasOwnProperty(b)){var G=yp[b];if(G!==s)return l("Invalid DOM property `%s`. Did you mean `%s`?",s,G),wi[s]=!0,!0}else if(!W&&s!==b)return l("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",s,b),wi[s]=!0,!0;return typeof p=="boolean"&&pi(s,p,H,!1)?(p?l('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',p,s,s,p,s):l('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',p,s,s,p,s,s,s),wi[s]=!0,!0):W?!0:pi(s,p,H,!1)?(wi[s]=!0,!1):((p==="false"||p==="true")&&H!==null&&H.type===Kn&&(l("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",p,s,p==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',s,p),wi[s]=!0),!0)}}var ib=function(i,s,p){{var m=[];for(var b in s){var P=hv(i,b,s[b],p);P||m.push(b)}var $=m.map(function(F){return"`"+F+"`"}).join(", ");m.length===1?l("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",$,i):m.length>1&&l("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",$,i)}};function ob(i,s,p){yl(i,s)||ib(i,s,p)}var Sl=1,qf=2,du=4,PE=Sl|qf|du,Qf=null;function Zf(i){Qf!==null&&l("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),Qf=i}function IE(){Qf===null&&l("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),Qf=null}function sb(i){return i===Qf}function bp(i){var s=i.target||i.srcElement||window;return s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===vl?s.parentNode:s}var nr=null,uc=null,bl=null;function kd(i){var s=Jd(i);if(s){if(typeof nr!="function")throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var p=s.stateNode;if(p){var m=sw(p);nr(s.stateNode,s.type,m)}}}function ab(i){nr=i}function wp(i){uc?bl?bl.push(i):bl=[i]:uc=i}function Jf(){return uc!==null||bl!==null}function eh(){if(uc){var i=uc,s=bl;if(uc=null,bl=null,kd(i),s)for(var p=0;p<s.length;p++)kd(s[p])}}var fu=function(i,s){return i(s)},gv=function(){},mv=!1;function RE(){var i=Jf();i&&(gv(),eh())}function vv(i,s,p){if(mv)return i(s,p);mv=!0;try{return fu(i,s,p)}finally{mv=!1,RE()}}function xp(i,s,p){fu=i,gv=p}function Cp(i){return i==="button"||i==="input"||i==="select"||i==="textarea"}function yv(i,s,p){switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!!(p.disabled&&Cp(s));default:return!1}}function hu(i,s){var p=i.stateNode;if(p===null)return null;var m=sw(p);if(m===null)return null;var b=m[s];if(yv(s,i.type,m))return null;if(b&&typeof b!="function")throw new Error("Expected `"+s+"` listener to be a function, instead got a value of `"+typeof b+"` type.");return b}var th=!1;if(Ht)try{var pu={};Object.defineProperty(pu,"passive",{get:function(){th=!0}}),window.addEventListener("test",pu,pu),window.removeEventListener("test",pu,pu)}catch{th=!1}function lb(i,s,p,m,b,P,$,F,H){var W=Array.prototype.slice.call(arguments,3);try{s.apply(p,W)}catch(G){this.onError(G)}}var Sv=lb;if(typeof window<"u"&&typeof window.dispatchEvent=="function"&&typeof document<"u"&&typeof document.createEvent=="function"){var bv=document.createElement("react");Sv=function(s,p,m,b,P,$,F,H,W){if(typeof document>"u"||document===null)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var G=document.createEvent("Event"),fe=!1,le=!0,Te=window.event,ke=Object.getOwnPropertyDescriptor(window,"event");function Re(){bv.removeEventListener(Me,At,!1),typeof window.event<"u"&&window.hasOwnProperty("event")&&(window.event=Te)}var ut=Array.prototype.slice.call(arguments,3);function At(){fe=!0,Re(),p.apply(m,ut),le=!1}var Tt,xn=!1,mn=!1;function Se(be){if(Tt=be.error,xn=!0,Tt===null&&be.colno===0&&be.lineno===0&&(mn=!0),be.defaultPrevented&&Tt!=null&&typeof Tt=="object")try{Tt._suppressLogging=!0}catch{}}var Me="react-"+(s||"invokeguardedcallback");if(window.addEventListener("error",Se),bv.addEventListener(Me,At,!1),G.initEvent(Me,!1,!1),bv.dispatchEvent(G),ke&&Object.defineProperty(window,"event",ke),fe&&le&&(xn?mn&&(Tt=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):Tt=new Error(`An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the "Pause on exceptions" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.`),this.onError(Tt)),window.removeEventListener("error",Se),!fe)return Re(),lb.apply(this,arguments)}}var ME=Sv,dc=!1,ha=null,nh=!1,fc=null,Ba={onError:function(i){dc=!0,ha=i}};function gu(i,s,p,m,b,P,$,F,H){dc=!1,ha=null,ME.apply(Ba,arguments)}function wl(i,s,p,m,b,P,$,F,H){if(gu.apply(this,arguments),dc){var W=xv();nh||(nh=!0,fc=W)}}function wv(){if(nh){var i=fc;throw nh=!1,fc=null,i}}function AE(){return dc}function xv(){if(dc){var i=ha;return dc=!1,ha=null,i}else throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function Ds(i){return i._reactInternals}function rh(i){return i._reactInternals!==void 0}function Pd(i,s){i._reactInternals=s}var Rt=0,hc=1,mr=2,sn=4,Nn=16,zn=32,Ha=64,Kt=128,Fr=256,$o=512,Ls=1024,Er=2048,js=4096,pc=8192,ih=16384,Ep=Er|sn|Ha|$o|Ls|ih,cb=32767,ds=32768,xi=65536,oh=131072,Cv=1048576,Ev=2097152,Oo=4194304,gc=8388608,Do=16777216,mu=33554432,Id=sn|Ls|0,Lo=mr|sn|Nn|zn|$o|js|pc,Yi=sn|Ha|$o|pc,Ns=Er|Nn,Mi=Oo|gc|Ev,xl=e.ReactCurrentOwner;function fs(i){var s=i,p=i;if(i.alternate)for(;s.return;)s=s.return;else{var m=s;do s=m,(s.flags&(mr|js))!==Rt&&(p=s.return),m=s.return;while(m)}return s.tag===v?p:null}function _v(i){if(i.tag===D){var s=i.memoizedState;if(s===null){var p=i.alternate;p!==null&&(s=p.memoizedState)}if(s!==null)return s.dehydrated}return null}function _p(i){return i.tag===v?i.stateNode.containerInfo:null}function Tv(i){return fs(i)===i}function hs(i){{var s=xl.current;if(s!==null&&s.tag===h){var p=s,m=p.stateNode;m._warnedAboutRefsInRender||l("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",Vt(p)||"A component"),m._warnedAboutRefsInRender=!0}}var b=Ds(i);return b?fs(b)===b:!1}function jo(i){if(fs(i)!==i)throw new Error("Unable to find node on an unmounted component.")}function vr(i){var s=i.alternate;if(!s){var p=fs(i);if(p===null)throw new Error("Unable to find node on an unmounted component.");return p!==i?null:i}for(var m=i,b=s;;){var P=m.return;if(P===null)break;var $=P.alternate;if($===null){var F=P.return;if(F!==null){m=b=F;continue}break}if(P.child===$.child){for(var H=P.child;H;){if(H===m)return jo(P),i;if(H===b)return jo(P),s;H=H.sibling}throw new Error("Unable to find node on an unmounted component.")}if(m.return!==b.return)m=P,b=$;else{for(var W=!1,G=P.child;G;){if(G===m){W=!0,m=P,b=$;break}if(G===b){W=!0,b=P,m=$;break}G=G.sibling}if(!W){for(G=$.child;G;){if(G===m){W=!0,m=$,b=P;break}if(G===b){W=!0,b=$,m=P;break}G=G.sibling}if(!W)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(m.alternate!==b)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(m.tag!==v)throw new Error("Unable to find node on an unmounted component.");return m.stateNode.current===m?i:s}function zs(i){var s=vr(i);return s!==null?kv(s):null}function kv(i){if(i.tag===w||i.tag===k)return i;for(var s=i.child;s!==null;){var p=kv(s);if(p!==null)return p;s=s.sibling}return null}function ub(i){var s=vr(i);return s!==null?Tp(s):null}function Tp(i){if(i.tag===w||i.tag===k)return i;for(var s=i.child;s!==null;){if(s.tag!==S){var p=Tp(s);if(p!==null)return p}s=s.sibling}return null}var kp=n.unstable_scheduleCallback,db=n.unstable_cancelCallback,Pp=n.unstable_shouldYield,fb=n.unstable_requestPaint,Ar=n.unstable_now,Pv=n.unstable_getCurrentPriorityLevel,Ip=n.unstable_ImmediatePriority,ps=n.unstable_UserBlockingPriority,Va=n.unstable_NormalPriority,Rp=n.unstable_LowPriority,mc=n.unstable_IdlePriority,Iv=n.unstable_yieldValue,Rv=n.unstable_setDisableYieldValue,vc=null,Ci=null,nt=null,Kr=!1,Ai=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u";function Mv(i){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(s.isDisabled)return!0;if(!s.supportsFiber)return l("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{Ie&&(i=tn({},i,{getLaneLabelMap:Sc,injectProfilingHooks:El})),vc=s.inject(i),Ci=s}catch(p){l("React instrumentation encountered an error: %s.",p)}return!!s.checkDCE}function hb(i,s){if(Ci&&typeof Ci.onScheduleFiberRoot=="function")try{Ci.onScheduleFiberRoot(vc,i,s)}catch(p){Kr||(Kr=!0,l("React instrumentation encountered an error: %s",p))}}function Cl(i,s){if(Ci&&typeof Ci.onCommitFiberRoot=="function")try{var p=(i.current.flags&Kt)===Kt;if(Ne){var m;switch(s){case Wi:m=Ip;break;case $i:m=ps;break;case Tl:m=Va;break;case ph:m=mc;break;default:m=Va;break}Ci.onCommitFiberRoot(vc,i,m,p)}}catch(b){Kr||(Kr=!0,l("React instrumentation encountered an error: %s",b))}}function yc(i){if(Ci&&typeof Ci.onPostCommitFiberRoot=="function")try{Ci.onPostCommitFiberRoot(vc,i)}catch(s){Kr||(Kr=!0,l("React instrumentation encountered an error: %s",s))}}function Av(i){if(Ci&&typeof Ci.onCommitFiberUnmount=="function")try{Ci.onCommitFiberUnmount(vc,i)}catch(s){Kr||(Kr=!0,l("React instrumentation encountered an error: %s",s))}}function oi(i){if(typeof Iv=="function"&&(Rv(i),o(i)),Ci&&typeof Ci.setStrictMode=="function")try{Ci.setStrictMode(vc,i)}catch(s){Kr||(Kr=!0,l("React instrumentation encountered an error: %s",s))}}function El(i){nt=i}function Sc(){{for(var i=new Map,s=1,p=0;p<yr;p++){var m=$E(s);i.set(s,m),s*=2}return i}}function Mp(i){nt!==null&&typeof nt.markCommitStarted=="function"&&nt.markCommitStarted(i)}function $v(){nt!==null&&typeof nt.markCommitStopped=="function"&&nt.markCommitStopped()}function bc(i){nt!==null&&typeof nt.markComponentRenderStarted=="function"&&nt.markComponentRenderStarted(i)}function vu(){nt!==null&&typeof nt.markComponentRenderStopped=="function"&&nt.markComponentRenderStopped()}function pb(i){nt!==null&&typeof nt.markComponentPassiveEffectMountStarted=="function"&&nt.markComponentPassiveEffectMountStarted(i)}function Ov(){nt!==null&&typeof nt.markComponentPassiveEffectMountStopped=="function"&&nt.markComponentPassiveEffectMountStopped()}function Ap(i){nt!==null&&typeof nt.markComponentPassiveEffectUnmountStarted=="function"&&nt.markComponentPassiveEffectUnmountStarted(i)}function gb(){nt!==null&&typeof nt.markComponentPassiveEffectUnmountStopped=="function"&&nt.markComponentPassiveEffectUnmountStopped()}function mb(i){nt!==null&&typeof nt.markComponentLayoutEffectMountStarted=="function"&&nt.markComponentLayoutEffectMountStarted(i)}function vb(){nt!==null&&typeof nt.markComponentLayoutEffectMountStopped=="function"&&nt.markComponentLayoutEffectMountStopped()}function $p(i){nt!==null&&typeof nt.markComponentLayoutEffectUnmountStarted=="function"&&nt.markComponentLayoutEffectUnmountStarted(i)}function Rd(){nt!==null&&typeof nt.markComponentLayoutEffectUnmountStopped=="function"&&nt.markComponentLayoutEffectUnmountStopped()}function Op(i,s,p){nt!==null&&typeof nt.markComponentErrored=="function"&&nt.markComponentErrored(i,s,p)}function yb(i,s,p){nt!==null&&typeof nt.markComponentSuspended=="function"&&nt.markComponentSuspended(i,s,p)}function Sb(i){nt!==null&&typeof nt.markLayoutEffectsStarted=="function"&&nt.markLayoutEffectsStarted(i)}function Md(){nt!==null&&typeof nt.markLayoutEffectsStopped=="function"&&nt.markLayoutEffectsStopped()}function bb(i){nt!==null&&typeof nt.markPassiveEffectsStarted=="function"&&nt.markPassiveEffectsStarted(i)}function sh(){nt!==null&&typeof nt.markPassiveEffectsStopped=="function"&&nt.markPassiveEffectsStopped()}function pa(i){nt!==null&&typeof nt.markRenderStarted=="function"&&nt.markRenderStarted(i)}function ah(){nt!==null&&typeof nt.markRenderYielded=="function"&&nt.markRenderYielded()}function Ad(){nt!==null&&typeof nt.markRenderStopped=="function"&&nt.markRenderStopped()}function yu(i){nt!==null&&typeof nt.markRenderScheduled=="function"&&nt.markRenderScheduled(i)}function Dv(i,s){nt!==null&&typeof nt.markForceUpdateScheduled=="function"&&nt.markForceUpdateScheduled(i,s)}function wc(i,s){nt!==null&&typeof nt.markStateUpdateScheduled=="function"&&nt.markStateUpdateScheduled(i,s)}var Ot=0,cn=1,Lt=2,$r=8,Fs=16,Dp=Math.clz32?Math.clz32:Su,Lp=Math.log,Lv=Math.LN2;function Su(i){var s=i>>>0;return s===0?32:31-(Lp(s)/Lv|0)|0}var yr=31,$e=0,bn=0,jt=1,Ka=2,gs=4,bu=8,Sr=16,wu=32,xc=4194240,xu=64,Us=128,No=256,Cu=512,lh=1024,ch=2048,jp=4096,Np=8192,zp=16384,Fp=32768,Up=65536,Bp=131072,Hp=262144,Vp=524288,Eu=1048576,Kp=2097152,_u=130023424,_l=4194304,Yp=8388608,uh=16777216,Wp=33554432,Gp=67108864,jv=_l,$d=134217728,Xp=268435455,Od=268435456,Cc=536870912,zo=1073741824;function $E(i){{if(i&jt)return"Sync";if(i&Ka)return"InputContinuousHydration";if(i&gs)return"InputContinuous";if(i&bu)return"DefaultHydration";if(i&Sr)return"Default";if(i&wu)return"TransitionHydration";if(i&xc)return"Transition";if(i&_u)return"Retry";if(i&$d)return"SelectiveHydration";if(i&Od)return"IdleHydration";if(i&Cc)return"Idle";if(i&zo)return"Offscreen"}}var rr=-1,qp=xu,Qp=_l;function Dd(i){switch(Zr(i)){case jt:return jt;case Ka:return Ka;case gs:return gs;case bu:return bu;case Sr:return Sr;case wu:return wu;case xu:case Us:case No:case Cu:case lh:case ch:case jp:case Np:case zp:case Fp:case Up:case Bp:case Hp:case Vp:case Eu:case Kp:return i&xc;case _l:case Yp:case uh:case Wp:case Gp:return i&_u;case $d:return $d;case Od:return Od;case Cc:return Cc;case zo:return zo;default:return l("Should have found matching lanes. This is a bug in React."),i}}function dh(i,s){var p=i.pendingLanes;if(p===$e)return $e;var m=$e,b=i.suspendedLanes,P=i.pingedLanes,$=p&Xp;if($!==$e){var F=$&~b;if(F!==$e)m=Dd(F);else{var H=$&P;H!==$e&&(m=Dd(H))}}else{var W=p&~b;W!==$e?m=Dd(W):P!==$e&&(m=Dd(P))}if(m===$e)return $e;if(s!==$e&&s!==m&&(s&b)===$e){var G=Zr(m),fe=Zr(s);if(G>=fe||G===Sr&&(fe&xc)!==$e)return s}(m&gs)!==$e&&(m|=p&Sr);var le=i.entangledLanes;if(le!==$e)for(var Te=i.entanglements,ke=m&le;ke>0;){var Re=Ec(ke),ut=1<<Re;m|=Te[Re],ke&=~ut}return m}function wb(i,s){for(var p=i.eventTimes,m=rr;s>0;){var b=Ec(s),P=1<<b,$=p[b];$>m&&(m=$),s&=~P}return m}function Zp(i,s){switch(i){case jt:case Ka:case gs:return s+250;case bu:case Sr:case wu:case xu:case Us:case No:case Cu:case lh:case ch:case jp:case Np:case zp:case Fp:case Up:case Bp:case Hp:case Vp:case Eu:case Kp:return s+5e3;case _l:case Yp:case uh:case Wp:case Gp:return rr;case $d:case Od:case Cc:case zo:return rr;default:return l("Should have found matching lanes. This is a bug in React."),rr}}function OE(i,s){for(var p=i.pendingLanes,m=i.suspendedLanes,b=i.pingedLanes,P=i.expirationTimes,$=p;$>0;){var F=Ec($),H=1<<F,W=P[F];W===rr?((H&m)===$e||(H&b)!==$e)&&(P[F]=Zp(H,s)):W<=s&&(i.expiredLanes|=H),$&=~H}}function DE(i){return Dd(i.pendingLanes)}function Nv(i){var s=i.pendingLanes&~zo;return s!==$e?s:s&zo?zo:$e}function Ld(i){return(i&jt)!==$e}function fh(i){return(i&Xp)!==$e}function Jp(i){return(i&_u)===i}function LE(i){var s=jt|gs|Sr;return(i&s)===$e}function xb(i){return(i&xc)===i}function hh(i,s){var p=Ka|gs|bu|Sr;return(s&p)!==$e}function Cb(i,s){return(s&i.expiredLanes)!==$e}function zv(i){return(i&xc)!==$e}function Fv(){var i=qp;return qp<<=1,(qp&xc)===$e&&(qp=xu),i}function jE(){var i=Qp;return Qp<<=1,(Qp&_u)===$e&&(Qp=_l),i}function Zr(i){return i&-i}function si(i){return Zr(i)}function Ec(i){return 31-Dp(i)}function eg(i){return Ec(i)}function Fo(i,s){return(i&s)!==$e}function Tu(i,s){return(i&s)===s}function an(i,s){return i|s}function jd(i,s){return i&~s}function Uv(i,s){return i&s}function Eb(i){return i}function _b(i,s){return i!==bn&&i<s?i:s}function tg(i){for(var s=[],p=0;p<yr;p++)s.push(i);return s}function ku(i,s,p){i.pendingLanes|=s,s!==Cc&&(i.suspendedLanes=$e,i.pingedLanes=$e);var m=i.eventTimes,b=eg(s);m[b]=p}function Bv(i,s){i.suspendedLanes|=s,i.pingedLanes&=~s;for(var p=i.expirationTimes,m=s;m>0;){var b=Ec(m),P=1<<b;p[b]=rr,m&=~P}}function Hv(i,s,p){i.pingedLanes|=i.suspendedLanes&s}function Vv(i,s){var p=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=$e,i.pingedLanes=$e,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s;for(var m=i.entanglements,b=i.eventTimes,P=i.expirationTimes,$=p;$>0;){var F=Ec($),H=1<<F;m[F]=$e,b[F]=rr,P[F]=rr,$&=~H}}function Nd(i,s){for(var p=i.entangledLanes|=s,m=i.entanglements,b=p;b;){var P=Ec(b),$=1<<P;$&s|m[P]&s&&(m[P]|=s),b&=~$}}function NE(i,s){var p=Zr(s),m;switch(p){case gs:m=Ka;break;case Sr:m=bu;break;case xu:case Us:case No:case Cu:case lh:case ch:case jp:case Np:case zp:case Fp:case Up:case Bp:case Hp:case Vp:case Eu:case Kp:case _l:case Yp:case uh:case Wp:case Gp:m=wu;break;case Cc:m=Od;break;default:m=bn;break}return(m&(i.suspendedLanes|s))!==bn?bn:m}function Kv(i,s,p){if(Ai)for(var m=i.pendingUpdatersLaneMap;p>0;){var b=eg(p),P=1<<b,$=m[b];$.add(s),p&=~P}}function ng(i,s){if(Ai)for(var p=i.pendingUpdatersLaneMap,m=i.memoizedUpdaters;s>0;){var b=eg(s),P=1<<b,$=p[b];$.size>0&&($.forEach(function(F){var H=F.alternate;(H===null||!m.has(H))&&m.add(F)}),$.clear()),s&=~P}}function Yv(i,s){return null}var Wi=jt,$i=gs,Tl=Sr,ph=Cc,Pu=bn;function Bs(){return Pu}function ai(i){Pu=i}function gh(i,s){var p=Pu;try{return Pu=i,s()}finally{Pu=p}}function Gi(i,s){return i!==0&&i<s?i:s}function zE(i,s){return i===0||i>s?i:s}function Wv(i,s){return i!==0&&i<s}function mh(i){var s=Zr(i);return Wv(Wi,s)?Wv($i,s)?fh(s)?Tl:ph:$i:Wi}function li(i){var s=i.current.memoizedState;return s.isDehydrated}var Tb;function ht(i){Tb=i}function zd(i){Tb(i)}var vh;function kb(i){vh=i}var Pb;function yh(i){Pb=i}var Sh;function Gv(i){Sh=i}var Xv;function Ib(i){Xv=i}var rg=!1,Fd=[],Ya=null,_r=null,Ei=null,Hs=new Map,Ud=new Map,kl=[],ga=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function Rb(i){return ga.indexOf(i)>-1}function Wa(i,s,p,m,b){return{blockedOn:i,domEventName:s,eventSystemFlags:p,nativeEvent:b,targetContainers:[m]}}function Mb(i,s){switch(i){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":{var p=s.pointerId;Hs.delete(p);break}case"gotpointercapture":case"lostpointercapture":{var m=s.pointerId;Ud.delete(m);break}}}function Bd(i,s,p,m,b,P){if(i===null||i.nativeEvent!==P){var $=Wa(s,p,m,b,P);if(s!==null){var F=Jd(s);F!==null&&vh(F)}return $}i.eventSystemFlags|=m;var H=i.targetContainers;return b!==null&&H.indexOf(b)===-1&&H.push(b),i}function Ab(i,s,p,m,b){switch(s){case"focusin":{var P=b;return Ya=Bd(Ya,i,s,p,m,P),!0}case"dragenter":{var $=b;return _r=Bd(_r,i,s,p,m,$),!0}case"mouseover":{var F=b;return Ei=Bd(Ei,i,s,p,m,F),!0}case"pointerover":{var H=b,W=H.pointerId;return Hs.set(W,Bd(Hs.get(W)||null,i,s,p,m,H)),!0}case"gotpointercapture":{var G=b,fe=G.pointerId;return Ud.set(fe,Bd(Ud.get(fe)||null,i,s,p,m,G)),!0}}return!1}function qv(i){var s=Ph(i.target);if(s!==null){var p=fs(s);if(p!==null){var m=p.tag;if(m===D){var b=_v(p);if(b!==null){i.blockedOn=b,Xv(i.priority,function(){Pb(p)});return}}else if(m===v){var P=p.stateNode;if(li(P)){i.blockedOn=_p(p);return}}}}i.blockedOn=null}function $b(i){for(var s=Sh(),p={blockedOn:null,target:i,priority:s},m=0;m<kl.length&&Wv(s,kl[m].priority);m++);kl.splice(m,0,p),m===0&&qv(p)}function ig(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;s.length>0;){var p=s[0],m=Iu(i.domEventName,i.eventSystemFlags,p,i.nativeEvent);if(m===null){var b=i.nativeEvent,P=new b.constructor(b.type,b);Zf(P),b.target.dispatchEvent(P),IE()}else{var $=Jd(m);return $!==null&&vh($),i.blockedOn=m,!1}s.shift()}return!0}function bh(i,s,p){ig(i)&&p.delete(s)}function Qv(){rg=!1,Ya!==null&&ig(Ya)&&(Ya=null),_r!==null&&ig(_r)&&(_r=null),Ei!==null&&ig(Ei)&&(Ei=null),Hs.forEach(bh),Ud.forEach(bh)}function Xi(i,s){i.blockedOn===s&&(i.blockedOn=null,rg||(rg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Qv)))}function gn(i){if(Fd.length>0){Xi(Fd[0],i);for(var s=1;s<Fd.length;s++){var p=Fd[s];p.blockedOn===i&&(p.blockedOn=null)}}Ya!==null&&Xi(Ya,i),_r!==null&&Xi(_r,i),Ei!==null&&Xi(Ei,i);var m=function(F){return Xi(F,i)};Hs.forEach(m),Ud.forEach(m);for(var b=0;b<kl.length;b++){var P=kl[b];P.blockedOn===i&&(P.blockedOn=null)}for(;kl.length>0;){var $=kl[0];if($.blockedOn!==null)break;qv($),$.blockedOn===null&&kl.shift()}}var Or=e.ReactCurrentBatchConfig,Ur=!0;function _i(i){Ur=!!i}function ms(){return Ur}function Hd(i,s,p){var m=fo(s),b;switch(m){case Wi:b=ci;break;case $i:b=wh;break;case Tl:default:b=Pl;break}return b.bind(null,s,p,i)}function ci(i,s,p,m){var b=Bs(),P=Or.transition;Or.transition=null;try{ai(Wi),Pl(i,s,p,m)}finally{ai(b),Or.transition=P}}function wh(i,s,p,m){var b=Bs(),P=Or.transition;Or.transition=null;try{ai($i),Pl(i,s,p,m)}finally{ai(b),Or.transition=P}}function Pl(i,s,p,m){Ur&&og(i,s,p,m)}function og(i,s,p,m){var b=Iu(i,s,p,m);if(b===null){o_(i,s,m,Vd,p),Mb(i,m);return}if(Ab(b,i,s,p,m)){m.stopPropagation();return}if(Mb(i,m),s&du&&Rb(i)){for(;b!==null;){var P=Jd(b);P!==null&&zd(P);var $=Iu(i,s,p,m);if($===null&&o_(i,s,m,Vd,p),$===b)break;b=$}b!==null&&m.stopPropagation();return}o_(i,s,m,null,p)}var Vd=null;function Iu(i,s,p,m){Vd=null;var b=bp(m),P=Ph(b);if(P!==null){var $=fs(P);if($===null)P=null;else{var F=$.tag;if(F===D){var H=_v($);if(H!==null)return H;P=null}else if(F===v){var W=$.stateNode;if(li(W))return _p($);P=null}else $!==P&&(P=null)}}return Vd=P,null}function fo(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return Wi;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return $i;case"message":{var s=Pv();switch(s){case Ip:return Wi;case ps:return $i;case Va:case Rp:return Tl;case mc:return ph;default:return Tl}}default:return Tl}}function Zv(i,s,p){return i.addEventListener(s,p,!1),p}function Kd(i,s,p){return i.addEventListener(s,p,!0),p}function Il(i,s,p,m){return i.addEventListener(s,p,{capture:!0,passive:m}),p}function sg(i,s,p,m){return i.addEventListener(s,p,{passive:m}),p}var Ru=null,Ga=null,_c=null;function Tc(i){return Ru=i,Ga=lg(),!0}function ag(){Ru=null,Ga=null,_c=null}function Yd(){if(_c)return _c;var i,s=Ga,p=s.length,m,b=lg(),P=b.length;for(i=0;i<p&&s[i]===b[i];i++);var $=p-i;for(m=1;m<=$&&s[p-m]===b[P-m];m++);var F=m>1?1-m:void 0;return _c=b.slice(i,F),_c}function lg(){return"value"in Ru?Ru.value:Ru.textContent}function Mu(i){var s,p=i.keyCode;return"charCode"in i?(s=i.charCode,s===0&&p===13&&(s=13)):s=p,s===10&&(s=13),s>=32||s===13?s:0}function Au(){return!0}function qi(){return!1}function Jr(i){function s(p,m,b,P,$){this._reactName=p,this._targetInst=b,this.type=m,this.nativeEvent=P,this.target=$,this.currentTarget=null;for(var F in i)if(i.hasOwnProperty(F)){var H=i[F];H?this[F]=H(P):this[F]=P[F]}var W=P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1;return W?this.isDefaultPrevented=Au:this.isDefaultPrevented=qi,this.isPropagationStopped=qi,this}return tn(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Au)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Au)},persist:function(){},isPersistent:Au}),s}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=Jr(Qi),Wd=tn({},Qi,{view:0,detail:0}),Jv=Jr(Wd),xh,ey,Vs;function Ob(i){i!==Vs&&(Vs&&i.type==="mousemove"?(xh=i.screenX-Vs.screenX,ey=i.screenY-Vs.screenY):(xh=0,ey=0),Vs=i)}var Gd=tn({},Wd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dg,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(Ob(i),xh)},movementY:function(i){return"movementY"in i?i.movementY:ey}}),kc=Jr(Gd),ty=tn({},Gd,{dataTransfer:0}),$u=Jr(ty),Db=tn({},Wd,{relatedTarget:0}),cg=Jr(Db),ny=tn({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),ug=Jr(ny),FE=tn({},Qi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),UE=Jr(FE),Lb=tn({},Qi,{data:0}),ry=Jr(Lb),Ou=ry,BE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function jb(i){if(i.key){var s=BE[i.key]||i.key;if(s!=="Unidentified")return s}if(i.type==="keypress"){var p=Mu(i);return p===13?"Enter":String.fromCharCode(p)}return i.type==="keydown"||i.type==="keyup"?Xd[i.keyCode]||"Unidentified":""}var Br={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HE(i){var s=this,p=s.nativeEvent;if(p.getModifierState)return p.getModifierState(i);var m=Br[i];return m?!!p[m]:!1}function dg(i){return HE}var VE=tn({},Wd,{key:jb,code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dg,charCode:function(i){return i.type==="keypress"?Mu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Mu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),KE=Jr(VE),Nb=tn({},Gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iy=Jr(Nb),YE=tn({},Wd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dg}),Ks=Jr(YE),oy=tn({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),WE=Jr(oy),Pc=tn({},Gd,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),fg=Jr(Pc),Du=[9,13,27,32],Ch=229,Eh=Ht&&"CompositionEvent"in window,Lu=null;Ht&&"documentMode"in document&&(Lu=document.documentMode);var GE=Ht&&"TextEvent"in window&&!Lu,hg=Ht&&(!Eh||Lu&&Lu>8&&Lu<=11),zb=32,sy=String.fromCharCode(zb);function Fb(){_t("onBeforeInput",["compositionend","keypress","textInput","paste"]),_t("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),_t("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),_t("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"])}var _h=!1;function pg(i){return(i.ctrlKey||i.altKey||i.metaKey)&&!(i.ctrlKey&&i.altKey)}function Ub(i){switch(i){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}function ay(i,s){return i==="keydown"&&s.keyCode===Ch}function Bb(i,s){switch(i){case"keyup":return Du.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==Ch;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ly(i){var s=i.detail;return typeof s=="object"&&"data"in s?s.data:null}function gg(i){return i.locale==="ko"}var Rl=!1;function cy(i,s,p,m,b){var P,$;if(Eh?P=Ub(s):Rl?Bb(s,m)&&(P="onCompositionEnd"):ay(s,m)&&(P="onCompositionStart"),!P)return null;hg&&!gg(m)&&(!Rl&&P==="onCompositionStart"?Rl=Tc(b):P==="onCompositionEnd"&&Rl&&($=Yd()));var F=Wb(p,P);if(F.length>0){var H=new ry(P,s,null,m,b);if(i.push({event:H,listeners:F}),$)H.data=$;else{var W=ly(m);W!==null&&(H.data=W)}}}function mg(i,s){switch(i){case"compositionend":return ly(s);case"keypress":var p=s.which;return p!==zb?null:(_h=!0,sy);case"textInput":var m=s.data;return m===sy&&_h?null:m;default:return null}}function Hb(i,s){if(Rl){if(i==="compositionend"||!Eh&&Bb(i,s)){var p=Yd();return ag(),Rl=!1,p}return null}switch(i){case"paste":return null;case"keypress":if(!pg(s)){if(s.char&&s.char.length>1)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return hg&&!gg(s)?null:s.data;default:return null}}function XE(i,s,p,m,b){var P;if(GE?P=mg(s,m):P=Hb(s,m),!P)return null;var $=Wb(p,"onBeforeInput");if($.length>0){var F=new Ou("onBeforeInput","beforeinput",null,m,b);i.push({event:F,listeners:$}),F.data=P}}function vg(i,s,p,m,b,P,$){cy(i,s,p,m,b),XE(i,s,p,m,b)}var qE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!qE[i.type]:s==="textarea"}/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function QE(i){if(!Ht)return!1;var s="on"+i,p=s in document;if(!p){var m=document.createElement("div");m.setAttribute(s,"return;"),p=typeof m[s]=="function"}return p}function yg(){_t("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"])}function c(i,s,p,m){wp(m);var b=Wb(s,"onChange");if(b.length>0){var P=new Zi("onChange","change",null,p,m);i.push({event:P,listeners:b})}}var f=null,y=null;function _(i){var s=i.nodeName&&i.nodeName.toLowerCase();return s==="select"||s==="input"&&i.type==="file"}function M(i){var s=[];c(s,y,i,bp(i)),vv(j,s)}function j(i){VM(i,0)}function K(i){var s=Eg(i);if(je(s))return i}function J(i,s){if(i==="change")return s}var se=!1;Ht&&(se=QE("input")&&(!document.documentMode||document.documentMode>9));function Pe(i,s){f=i,y=s,f.attachEvent("onpropertychange",Ye)}function Be(){f&&(f.detachEvent("onpropertychange",Ye),f=null,y=null)}function Ye(i){i.propertyName==="value"&&K(y)&&M(i)}function Ue(i,s,p){i==="focusin"?(Be(),Pe(s,p)):i==="focusout"&&Be()}function lt(i,s){if(i==="selectionchange"||i==="keyup"||i==="keydown")return K(y)}function gt(i){var s=i.nodeName;return s&&s.toLowerCase()==="input"&&(i.type==="checkbox"||i.type==="radio")}function bt(i,s){if(i==="click")return K(s)}function Yr(i,s){if(i==="input"||i==="change")return K(s)}function ve(i){var s=i._wrapperState;!s||!s.controlled||i.type!=="number"||St(i,"number",i.value)}function de(i,s,p,m,b,P,$){var F=p?Eg(p):window,H,W;if(_(F)?H=J:qd(F)?se?H=Yr:(H=lt,W=Ue):gt(F)&&(H=bt),H){var G=H(s,p);if(G){c(i,G,m,b);return}}W&&W(s,F,p),s==="focusout"&&ve(F)}function xe(){We("onMouseEnter",["mouseout","mouseover"]),We("onMouseLeave",["mouseout","mouseover"]),We("onPointerEnter",["pointerout","pointerover"]),We("onPointerLeave",["pointerout","pointerover"])}function qe(i,s,p,m,b,P,$){var F=s==="mouseover"||s==="pointerover",H=s==="mouseout"||s==="pointerout";if(F&&!sb(m)){var W=m.relatedTarget||m.fromElement;if(W&&(Ph(W)||Cy(W)))return}if(!(!H&&!F)){var G;if(b.window===b)G=b;else{var fe=b.ownerDocument;fe?G=fe.defaultView||fe.parentWindow:G=window}var le,Te;if(H){var ke=m.relatedTarget||m.toElement;if(le=p,Te=ke?Ph(ke):null,Te!==null){var Re=fs(Te);(Te!==Re||Te.tag!==w&&Te.tag!==k)&&(Te=null)}}else le=null,Te=p;if(le!==Te){var ut=kc,At="onMouseLeave",Tt="onMouseEnter",xn="mouse";(s==="pointerout"||s==="pointerover")&&(ut=iy,At="onPointerLeave",Tt="onPointerEnter",xn="pointer");var mn=le==null?G:Eg(le),Se=Te==null?G:Eg(Te),Me=new ut(At,xn+"leave",le,m,b);Me.target=mn,Me.relatedTarget=Se;var be=null,Ge=Ph(b);if(Ge===p){var dt=new ut(Tt,xn+"enter",Te,m,b);dt.target=Se,dt.relatedTarget=mn,be=dt}Y7(i,Me,be,le,Te)}}}function xt(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var mt=typeof Object.is=="function"?Object.is:xt;function It(i,s){if(mt(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var p=Object.keys(i),m=Object.keys(s);if(p.length!==m.length)return!1;for(var b=0;b<p.length;b++){var P=p[b];if(!dn.call(s,P)||!mt(i[P],s[P]))return!1}return!0}function Yt(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ti(i){for(;i;){if(i.nextSibling)return i.nextSibling;i=i.parentNode}}function Pn(i,s){for(var p=Yt(i),m=0,b=0;p;){if(p.nodeType===vl){if(b=m+p.textContent.length,m<=s&&b>=s)return{node:p,offset:s-m};m=b}p=Yt(Ti(p))}}function Ic(i){var s=i.ownerDocument,p=s&&s.defaultView||window,m=p.getSelection&&p.getSelection();if(!m||m.rangeCount===0)return null;var b=m.anchorNode,P=m.anchorOffset,$=m.focusNode,F=m.focusOffset;try{b.nodeType,$.nodeType}catch{return null}return ZE(i,b,P,$,F)}function ZE(i,s,p,m,b){var P=0,$=-1,F=-1,H=0,W=0,G=i,fe=null;e:for(;;){for(var le=null;G===s&&(p===0||G.nodeType===vl)&&($=P+p),G===m&&(b===0||G.nodeType===vl)&&(F=P+b),G.nodeType===vl&&(P+=G.nodeValue.length),(le=G.firstChild)!==null;)fe=G,G=le;for(;;){if(G===i)break e;if(fe===s&&++H===p&&($=P),fe===m&&++W===b&&(F=P),(le=G.nextSibling)!==null)break;G=fe,fe=G.parentNode}G=le}return $===-1||F===-1?null:{start:$,end:F}}function k7(i,s){var p=i.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var b=m.getSelection(),P=i.textContent.length,$=Math.min(s.start,P),F=s.end===void 0?$:Math.min(s.end,P);if(!b.extend&&$>F){var H=F;F=$,$=H}var W=Pn(i,$),G=Pn(i,F);if(W&&G){if(b.rangeCount===1&&b.anchorNode===W.node&&b.anchorOffset===W.offset&&b.focusNode===G.node&&b.focusOffset===G.offset)return;var fe=p.createRange();fe.setStart(W.node,W.offset),b.removeAllRanges(),$>F?(b.addRange(fe),b.extend(G.node,G.offset)):(fe.setEnd(G.node,G.offset),b.addRange(fe))}}}function AM(i){return i&&i.nodeType===vl}function $M(i,s){return!i||!s?!1:i===s?!0:AM(i)?!1:AM(s)?$M(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1}function P7(i){return i&&i.ownerDocument&&$M(i.ownerDocument.documentElement,i)}function I7(i){try{return typeof i.contentWindow.location.href=="string"}catch{return!1}}function OM(){for(var i=window,s=it();s instanceof i.HTMLIFrameElement;){if(I7(s))i=s.contentWindow;else return s;s=it(i.document)}return s}function JE(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function R7(){var i=OM();return{focusedElem:i,selectionRange:JE(i)?A7(i):null}}function M7(i){var s=OM(),p=i.focusedElem,m=i.selectionRange;if(s!==p&&P7(p)){m!==null&&JE(p)&&$7(p,m);for(var b=[],P=p;P=P.parentNode;)P.nodeType===Ao&&b.push({element:P,left:P.scrollLeft,top:P.scrollTop});typeof p.focus=="function"&&p.focus();for(var $=0;$<b.length;$++){var F=b[$];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}}function A7(i){var s;return"selectionStart"in i?s={start:i.selectionStart,end:i.selectionEnd}:s=Ic(i),s||{start:0,end:0}}function $7(i,s){var p=s.start,m=s.end;m===void 0&&(m=p),"selectionStart"in i?(i.selectionStart=p,i.selectionEnd=Math.min(m,i.value.length)):k7(i,s)}var O7=Ht&&"documentMode"in document&&document.documentMode<=11;function D7(){_t("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"])}var Sg=null,e_=null,uy=null,t_=!1;function L7(i){if("selectionStart"in i&&JE(i))return{start:i.selectionStart,end:i.selectionEnd};var s=i.ownerDocument&&i.ownerDocument.defaultView||window,p=s.getSelection();return{anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}}function j7(i){return i.window===i?i.document:i.nodeType===da?i:i.ownerDocument}function DM(i,s,p){var m=j7(p);if(!(t_||Sg==null||Sg!==it(m))){var b=L7(Sg);if(!uy||!It(uy,b)){uy=b;var P=Wb(e_,"onSelect");if(P.length>0){var $=new Zi("onSelect","select",null,s,p);i.push({event:$,listeners:P}),$.target=Sg}}}}function N7(i,s,p,m,b,P,$){var F=p?Eg(p):window;switch(s){case"focusin":(qd(F)||F.contentEditable==="true")&&(Sg=F,e_=p,uy=null);break;case"focusout":Sg=null,e_=null,uy=null;break;case"mousedown":t_=!0;break;case"contextmenu":case"mouseup":case"dragend":t_=!1,DM(i,m,b);break;case"selectionchange":if(O7)break;case"keydown":case"keyup":DM(i,m,b)}}function Vb(i,s){var p={};return p[i.toLowerCase()]=s.toLowerCase(),p["Webkit"+i]="webkit"+s,p["Moz"+i]="moz"+s,p}var bg={animationend:Vb("Animation","AnimationEnd"),animationiteration:Vb("Animation","AnimationIteration"),animationstart:Vb("Animation","AnimationStart"),transitionend:Vb("Transition","TransitionEnd")},n_={},LM={};Ht&&(LM=document.createElement("div").style,"AnimationEvent"in window||(delete bg.animationend.animation,delete bg.animationiteration.animation,delete bg.animationstart.animation),"TransitionEvent"in window||delete bg.transitionend.transition);function Kb(i){if(n_[i])return n_[i];if(!bg[i])return i;var s=bg[i];for(var p in s)if(s.hasOwnProperty(p)&&p in LM)return n_[i]=s[p];return i}var jM=Kb("animationend"),NM=Kb("animationiteration"),zM=Kb("animationstart"),FM=Kb("transitionend"),UM=new Map,BM=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function Qd(i,s){UM.set(i,s),_t(s,[i])}function z7(){for(var i=0;i<BM.length;i++){var s=BM[i],p=s.toLowerCase(),m=s[0].toUpperCase()+s.slice(1);Qd(p,"on"+m)}Qd(jM,"onAnimationEnd"),Qd(NM,"onAnimationIteration"),Qd(zM,"onAnimationStart"),Qd("dblclick","onDoubleClick"),Qd("focusin","onFocus"),Qd("focusout","onBlur"),Qd(FM,"onTransitionEnd")}function F7(i,s,p,m,b,P,$){var F=UM.get(s);if(F!==void 0){var H=Zi,W=s;switch(s){case"keypress":if(Mu(m)===0)return;case"keydown":case"keyup":H=KE;break;case"focusin":W="focus",H=cg;break;case"focusout":W="blur",H=cg;break;case"beforeblur":case"afterblur":H=cg;break;case"click":if(m.button===2)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=$u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Ks;break;case jM:case NM:case zM:H=ug;break;case FM:H=WE;break;case"scroll":H=Jv;break;case"wheel":H=fg;break;case"copy":case"cut":case"paste":H=UE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=iy;break}var G=(P&du)!==0;{var fe=!G&&s==="scroll",le=V7(p,F,m.type,G,fe);if(le.length>0){var Te=new H(F,W,null,m,b);i.push({event:Te,listeners:le})}}}}z7(),xe(),yg(),D7(),Fb();function U7(i,s,p,m,b,P,$){F7(i,s,p,m,b,P);var F=(P&PE)===0;F&&(qe(i,s,p,m,b),de(i,s,p,m,b),N7(i,s,p,m,b),vg(i,s,p,m,b))}var dy=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],r_=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(dy));function HM(i,s,p){var m=i.type||"unknown-event";i.currentTarget=p,wl(m,s,void 0,i),i.currentTarget=null}function B7(i,s,p){var m;if(p)for(var b=s.length-1;b>=0;b--){var P=s[b],$=P.instance,F=P.currentTarget,H=P.listener;if($!==m&&i.isPropagationStopped())return;HM(i,H,F),m=$}else for(var W=0;W<s.length;W++){var G=s[W],fe=G.instance,le=G.currentTarget,Te=G.listener;if(fe!==m&&i.isPropagationStopped())return;HM(i,Te,le),m=fe}}function VM(i,s){for(var p=(s&du)!==0,m=0;m<i.length;m++){var b=i[m],P=b.event,$=b.listeners;B7(P,$,p)}wv()}function H7(i,s,p,m,b){var P=bp(p),$=[];U7($,i,m,p,P,s),VM($,s)}function Dr(i,s){r_.has(i)||l('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',i);var p=!1,m=S9(s),b=W7(i,p);m.has(b)||(KM(s,i,qf,p),m.add(b))}function i_(i,s,p){r_.has(i)&&!s&&l('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',i);var m=0;s&&(m|=du),KM(p,i,m,s)}var Yb="_reactListening"+Math.random().toString(36).slice(2);function fy(i){if(!i[Yb]){i[Yb]=!0,Ke.forEach(function(p){p!=="selectionchange"&&(r_.has(p)||i_(p,!1,i),i_(p,!0,i))});var s=i.nodeType===da?i:i.ownerDocument;s!==null&&(s[Yb]||(s[Yb]=!0,i_("selectionchange",!1,s)))}}function KM(i,s,p,m,b){var P=Hd(i,s,p),$=void 0;th&&(s==="touchstart"||s==="touchmove"||s==="wheel")&&($=!0),i=i,m?$!==void 0?Il(i,s,P,$):Kd(i,s,P):$!==void 0?sg(i,s,P,$):Zv(i,s,P)}function YM(i,s){return i===s||i.nodeType===Qr&&i.parentNode===s}function o_(i,s,p,m,b){var P=m;if(!(s&Sl)&&!(s&qf)){var $=b;if(m!==null){var F=m;e:for(;;){if(F===null)return;var H=F.tag;if(H===v||H===S){var W=F.stateNode.containerInfo;if(YM(W,$))break;if(H===S)for(var G=F.return;G!==null;){var fe=G.tag;if(fe===v||fe===S){var le=G.stateNode.containerInfo;if(YM(le,$))return}G=G.return}for(;W!==null;){var Te=Ph(W);if(Te===null)return;var ke=Te.tag;if(ke===w||ke===k){F=P=Te;continue e}W=W.parentNode}}F=F.return}}}vv(function(){return H7(i,s,p,P)})}function hy(i,s,p){return{instance:i,listener:s,currentTarget:p}}function V7(i,s,p,m,b,P){for(var $=s!==null?s+"Capture":null,F=m?$:s,H=[],W=i,G=null;W!==null;){var fe=W,le=fe.stateNode,Te=fe.tag;if(Te===w&&le!==null&&(G=le,F!==null)){var ke=hu(W,F);ke!=null&&H.push(hy(W,ke,G))}if(b)break;W=W.return}return H}function Wb(i,s){for(var p=s+"Capture",m=[],b=i;b!==null;){var P=b,$=P.stateNode,F=P.tag;if(F===w&&$!==null){var H=$,W=hu(b,p);W!=null&&m.unshift(hy(b,W,H));var G=hu(b,s);G!=null&&m.push(hy(b,G,H))}b=b.return}return m}function wg(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==w);return i||null}function K7(i,s){for(var p=i,m=s,b=0,P=p;P;P=wg(P))b++;for(var $=0,F=m;F;F=wg(F))$++;for(;b-$>0;)p=wg(p),b--;for(;$-b>0;)m=wg(m),$--;for(var H=b;H--;){if(p===m||m!==null&&p===m.alternate)return p;p=wg(p),m=wg(m)}return null}function WM(i,s,p,m,b){for(var P=s._reactName,$=[],F=p;F!==null&&F!==m;){var H=F,W=H.alternate,G=H.stateNode,fe=H.tag;if(W!==null&&W===m)break;if(fe===w&&G!==null){var le=G;if(b){var Te=hu(F,P);Te!=null&&$.unshift(hy(F,Te,le))}else if(!b){var ke=hu(F,P);ke!=null&&$.push(hy(F,ke,le))}}F=F.return}$.length!==0&&i.push({event:s,listeners:$})}function Y7(i,s,p,m,b){var P=m&&b?K7(m,b):null;m!==null&&WM(i,s,m,P,!1),b!==null&&p!==null&&WM(i,p,b,P,!0)}function W7(i,s){return i+"__"+(s?"capture":"bubble")}var Ys=!1,py="dangerouslySetInnerHTML",Gb="suppressContentEditableWarning",Zd="suppressHydrationWarning",GM="autoFocus",Th="children",kh="style",Xb="__html",s_,qb,gy,XM,Qb,qM,QM;s_={dialog:!0,webview:!0},qb=function(i,s){Sp(i,s),fv(i,s),ob(i,s,{registrationNameDependencies:Xe,possibleRegistrationNames:at})},qM=Ht&&!document.documentMode,gy=function(i,s,p){if(!Ys){var m=Zb(p),b=Zb(s);b!==m&&(Ys=!0,l("Prop `%s` did not match. Server: %s Client: %s",i,JSON.stringify(b),JSON.stringify(m)))}},XM=function(i){if(!Ys){Ys=!0;var s=[];i.forEach(function(p){s.push(p)}),l("Extra attributes from the server: %s",s)}},Qb=function(i,s){s===!1?l("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",i,i,i):l("Expected `%s` listener to be a function, instead got a value of `%s` type.",i,typeof s)},QM=function(i,s){var p=i.namespaceURI===ml?i.ownerDocument.createElement(i.tagName):i.ownerDocument.createElementNS(i.namespaceURI,i.tagName);return p.innerHTML=s,p.innerHTML};var G7=/\r\n?/g,X7=/\u0000|\uFFFD/g;function Zb(i){Bi(i);var s=typeof i=="string"?i:""+i;return s.replace(G7,`
`).replace(X7,"")}function Jb(i,s,p,m){var b=Zb(s),P=Zb(i);if(P!==b&&(m&&(Ys||(Ys=!0,l('Text content did not match. Server: "%s" Client: "%s"',P,b))),p&&ge))throw new Error("Text content does not match server-rendered HTML.")}function ZM(i){return i.nodeType===da?i:i.ownerDocument}function q7(){}function ew(i){i.onclick=q7}function Q7(i,s,p,m,b){for(var P in m)if(m.hasOwnProperty(P)){var $=m[P];if(P===kh)$&&Object.freeze($),X0(s,$);else if(P===py){var F=$?$[Xb]:void 0;F!=null&&N0(s,F)}else if(P===Th)if(typeof $=="string"){var H=i!=="textarea"||$!=="";H&&gp(s,$)}else typeof $=="number"&&gp(s,""+$);else P===Gb||P===Zd||P===GM||(Xe.hasOwnProperty(P)?$!=null&&(typeof $!="function"&&Qb(P,$),P==="onScroll"&&Dr("scroll",s)):$!=null&&lo(s,P,$,b))}}function Z7(i,s,p,m){for(var b=0;b<s.length;b+=2){var P=s[b],$=s[b+1];P===kh?X0(i,$):P===py?N0(i,$):P===Th?gp(i,$):lo(i,P,$,m)}}function J7(i,s,p,m){var b,P=ZM(p),$,F=m;if(F===ml&&(F=hp(i)),F===ml){if(b=yl(i,s),!b&&i!==i.toLowerCase()&&l("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",i),i==="script"){var H=P.createElement("div");H.innerHTML="<script><\/script>";var W=H.firstChild;$=H.removeChild(W)}else if(typeof s.is=="string")$=P.createElement(i,{is:s.is});else if($=P.createElement(i),i==="select"){var G=$;s.multiple?G.multiple=!0:s.size&&(G.size=s.size)}}else $=P.createElementNS(F,i);return F===ml&&!b&&Object.prototype.toString.call($)==="[object HTMLUnknownElement]"&&!dn.call(s_,i)&&(s_[i]=!0,l("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",i)),$}function eF(i,s){return ZM(s).createTextNode(i)}function tF(i,s,p,m){var b=yl(s,p);qb(s,p);var P;switch(s){case"dialog":Dr("cancel",i),Dr("close",i),P=p;break;case"iframe":case"object":case"embed":Dr("load",i),P=p;break;case"video":case"audio":for(var $=0;$<dy.length;$++)Dr(dy[$],i);P=p;break;case"source":Dr("error",i),P=p;break;case"img":case"image":case"link":Dr("error",i),Dr("load",i),P=p;break;case"details":Dr("toggle",i),P=p;break;case"input":ee(i,p),P=B(i,p),Dr("invalid",i);break;case"option":Tn(i,p),P=p;break;case"select":Yf(i,p),P=Kf(i,p),Dr("invalid",i);break;case"textarea":D0(i,p),P=rv(i,p),Dr("invalid",i);break;default:P=p}switch(vp(s,P),Q7(s,i,m,P,b),s){case"input":ue(i),Fe(i,p,!1);break;case"textarea":ue(i),j0(i);break;case"option":tr(i,p);break;case"select":tv(i,p);break;default:typeof P.onClick=="function"&&ew(i);break}}function nF(i,s,p,m,b){qb(s,m);var P=null,$,F;switch(s){case"input":$=B(i,p),F=B(i,m),P=[];break;case"select":$=Kf(i,p),F=Kf(i,m),P=[];break;case"textarea":$=rv(i,p),F=rv(i,m),P=[];break;default:$=p,F=m,typeof $.onClick!="function"&&typeof F.onClick=="function"&&ew(i);break}vp(s,F);var H,W,G=null;for(H in $)if(!(F.hasOwnProperty(H)||!$.hasOwnProperty(H)||$[H]==null))if(H===kh){var fe=$[H];for(W in fe)fe.hasOwnProperty(W)&&(G||(G={}),G[W]="")}else H===py||H===Th||H===Gb||H===Zd||H===GM||(Xe.hasOwnProperty(H)?P||(P=[]):(P=P||[]).push(H,null));for(H in F){var le=F[H],Te=$!=null?$[H]:void 0;if(!(!F.hasOwnProperty(H)||le===Te||le==null&&Te==null))if(H===kh)if(le&&Object.freeze(le),Te){for(W in Te)Te.hasOwnProperty(W)&&(!le||!le.hasOwnProperty(W))&&(G||(G={}),G[W]="");for(W in le)le.hasOwnProperty(W)&&Te[W]!==le[W]&&(G||(G={}),G[W]=le[W])}else G||(P||(P=[]),P.push(H,G)),G=le;else if(H===py){var ke=le?le[Xb]:void 0,Re=Te?Te[Xb]:void 0;ke!=null&&Re!==ke&&(P=P||[]).push(H,ke)}else H===Th?(typeof le=="string"||typeof le=="number")&&(P=P||[]).push(H,""+le):H===Gb||H===Zd||(Xe.hasOwnProperty(H)?(le!=null&&(typeof le!="function"&&Qb(H,le),H==="onScroll"&&Dr("scroll",i)),!P&&Te!==le&&(P=[])):(P=P||[]).push(H,le))}return G&&(Gf(G,F[kh]),(P=P||[]).push(kh,G)),P}function rF(i,s,p,m,b){p==="input"&&b.type==="radio"&&b.name!=null&&ye(i,b);var P=yl(p,m),$=yl(p,b);switch(Z7(i,s,P,$),p){case"input":Ee(i,b);break;case"textarea":L0(i,b);break;case"select":yE(i,b);break}}function iF(i){{var s=i.toLowerCase();return yp.hasOwnProperty(s)&&yp[s]||null}}function oF(i,s,p,m,b,P,$){var F,H;switch(F=yl(s,p),qb(s,p),s){case"dialog":Dr("cancel",i),Dr("close",i);break;case"iframe":case"object":case"embed":Dr("load",i);break;case"video":case"audio":for(var W=0;W<dy.length;W++)Dr(dy[W],i);break;case"source":Dr("error",i);break;case"img":case"image":case"link":Dr("error",i),Dr("load",i);break;case"details":Dr("toggle",i);break;case"input":ee(i,p),Dr("invalid",i);break;case"option":Tn(i,p);break;case"select":Yf(i,p),Dr("invalid",i);break;case"textarea":D0(i,p),Dr("invalid",i);break}vp(s,p);{H=new Set;for(var G=i.attributes,fe=0;fe<G.length;fe++){var le=G[fe].name.toLowerCase();switch(le){case"value":break;case"checked":break;case"selected":break;default:H.add(G[fe].name)}}}var Te=null;for(var ke in p)if(p.hasOwnProperty(ke)){var Re=p[ke];if(ke===Th)typeof Re=="string"?i.textContent!==Re&&(p[Zd]!==!0&&Jb(i.textContent,Re,P,$),Te=[Th,Re]):typeof Re=="number"&&i.textContent!==""+Re&&(p[Zd]!==!0&&Jb(i.textContent,Re,P,$),Te=[Th,""+Re]);else if(Xe.hasOwnProperty(ke))Re!=null&&(typeof Re!="function"&&Qb(ke,Re),ke==="onScroll"&&Dr("scroll",i));else if($&&typeof F=="boolean"){var ut=void 0,At=F&&Ae?null:gi(ke);if(p[Zd]!==!0){if(!(ke===Gb||ke===Zd||ke==="value"||ke==="checked"||ke==="selected")){if(ke===py){var Tt=i.innerHTML,xn=Re?Re[Xb]:void 0;if(xn!=null){var mn=QM(i,xn);mn!==Tt&&gy(ke,Tt,mn)}}else if(ke===kh){if(H.delete(ke),qM){var Se=TE(Re);ut=i.getAttribute("style"),Se!==ut&&gy(ke,ut,Se)}}else if(F&&!Ae)H.delete(ke.toLowerCase()),ut=Rs(i,ke,Re),Re!==ut&&gy(ke,ut,Re);else if(!ar(ke,At,F)&&!fn(ke,Re,At,F)){var Me=!1;if(At!==null)H.delete(At.attributeName),ut=ao(i,ke,Re,At);else{var be=m;if(be===ml&&(be=hp(s)),be===ml)H.delete(ke.toLowerCase());else{var Ge=iF(ke);Ge!==null&&Ge!==ke&&(Me=!0,H.delete(Ge)),H.delete(ke)}ut=Rs(i,ke,Re)}var dt=Ae;!dt&&Re!==ut&&!Me&&gy(ke,ut,Re)}}}}}switch($&&H.size>0&&p[Zd]!==!0&&XM(H),s){case"input":ue(i),Fe(i,p,!0);break;case"textarea":ue(i),j0(i);break;case"select":case"option":break;default:typeof p.onClick=="function"&&ew(i);break}return Te}function sF(i,s,p){var m=i.nodeValue!==s;return m}function a_(i,s){{if(Ys)return;Ys=!0,l("Did not expect server HTML to contain a <%s> in <%s>.",s.nodeName.toLowerCase(),i.nodeName.toLowerCase())}}function l_(i,s){{if(Ys)return;Ys=!0,l('Did not expect server HTML to contain the text node "%s" in <%s>.',s.nodeValue,i.nodeName.toLowerCase())}}function c_(i,s,p){{if(Ys)return;Ys=!0,l("Expected server HTML to contain a matching <%s> in <%s>.",s,i.nodeName.toLowerCase())}}function u_(i,s){{if(s===""||Ys)return;Ys=!0,l('Expected server HTML to contain a matching text node for "%s" in <%s>.',s,i.nodeName.toLowerCase())}}function aF(i,s,p){switch(s){case"input":pt(i,p);return;case"textarea":iv(i,p);return;case"select":SE(i,p);return}}var my=function(){},vy=function(){};{var lF=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],JM=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],cF=JM.concat(["button"]),uF=["dd","dt","li","option","optgroup","p","rp","rt"],eA={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};vy=function(i,s){var p=tn({},i||eA),m={tag:s};return JM.indexOf(s)!==-1&&(p.aTagInScope=null,p.buttonTagInScope=null,p.nobrTagInScope=null),cF.indexOf(s)!==-1&&(p.pTagInButtonScope=null),lF.indexOf(s)!==-1&&s!=="address"&&s!=="div"&&s!=="p"&&(p.listItemTagAutoclosing=null,p.dlItemTagAutoclosing=null),p.current=m,s==="form"&&(p.formTag=m),s==="a"&&(p.aTagInScope=m),s==="button"&&(p.buttonTagInScope=m),s==="nobr"&&(p.nobrTagInScope=m),s==="p"&&(p.pTagInButtonScope=m),s==="li"&&(p.listItemTagAutoclosing=m),(s==="dd"||s==="dt")&&(p.dlItemTagAutoclosing=m),p};var dF=function(i,s){switch(s){case"select":return i==="option"||i==="optgroup"||i==="#text";case"optgroup":return i==="option"||i==="#text";case"option":return i==="#text";case"tr":return i==="th"||i==="td"||i==="style"||i==="script"||i==="template";case"tbody":case"thead":case"tfoot":return i==="tr"||i==="style"||i==="script"||i==="template";case"colgroup":return i==="col"||i==="template";case"table":return i==="caption"||i==="colgroup"||i==="tbody"||i==="tfoot"||i==="thead"||i==="style"||i==="script"||i==="template";case"head":return i==="base"||i==="basefont"||i==="bgsound"||i==="link"||i==="meta"||i==="title"||i==="noscript"||i==="noframes"||i==="style"||i==="script"||i==="template";case"html":return i==="head"||i==="body"||i==="frameset";case"frameset":return i==="frame";case"#document":return i==="html"}switch(i){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return s!=="h1"&&s!=="h2"&&s!=="h3"&&s!=="h4"&&s!=="h5"&&s!=="h6";case"rp":case"rt":return uF.indexOf(s)===-1;case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return s==null}return!0},fF=function(i,s){switch(i){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return s.pTagInButtonScope;case"form":return s.formTag||s.pTagInButtonScope;case"li":return s.listItemTagAutoclosing;case"dd":case"dt":return s.dlItemTagAutoclosing;case"button":return s.buttonTagInScope;case"a":return s.aTagInScope;case"nobr":return s.nobrTagInScope}return null},tA={};my=function(i,s,p){p=p||eA;var m=p.current,b=m&&m.tag;s!=null&&(i!=null&&l("validateDOMNesting: when childText is passed, childTag should be null"),i="#text");var P=dF(i,b)?null:m,$=P?null:fF(i,p),F=P||$;if(F){var H=F.tag,W=!!P+"|"+i+"|"+H;if(!tA[W]){tA[W]=!0;var G=i,fe="";if(i==="#text"?/\S/.test(s)?G="Text nodes":(G="Whitespace text nodes",fe=" Make sure you don't have any extra whitespace between tags on each line of your source code."):G="<"+i+">",P){var le="";H==="table"&&i==="tr"&&(le+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),l("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",G,H,fe,le)}else l("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",G,H)}}}}var tw="suppressHydrationWarning",nw="$",rw="/$",yy="$?",Sy="$!",hF="style",d_=null,f_=null;function pF(i){var s,p,m=i.nodeType;switch(m){case da:case cu:{s=m===da?"#document":"#fragment";var b=i.documentElement;p=b?b.namespaceURI:sv(null,"");break}default:{var P=m===Qr?i.parentNode:i,$=P.namespaceURI||null;s=P.tagName,p=sv($,s);break}}{var F=s.toLowerCase(),H=vy(null,F);return{namespace:p,ancestorInfo:H}}}function gF(i,s,p){{var m=i,b=sv(m.namespace,s),P=vy(m.ancestorInfo,s);return{namespace:b,ancestorInfo:P}}}function Yme(i){return i}function mF(i){d_=ms(),f_=R7();var s=null;return _i(!1),s}function vF(i){M7(f_),_i(d_),d_=null,f_=null}function yF(i,s,p,m,b){var P;{var $=m;if(my(i,null,$.ancestorInfo),typeof s.children=="string"||typeof s.children=="number"){var F=""+s.children,H=vy($.ancestorInfo,i);my(null,F,H)}P=$.namespace}var W=J7(i,s,p,P);return xy(b,W),b_(W,s),W}function SF(i,s){i.appendChild(s)}function bF(i,s,p,m,b){switch(tF(i,s,p,m),s){case"button":case"input":case"select":case"textarea":return!!p.autoFocus;case"img":return!0;default:return!1}}function wF(i,s,p,m,b,P){{var $=P;if(typeof m.children!=typeof p.children&&(typeof m.children=="string"||typeof m.children=="number")){var F=""+m.children,H=vy($.ancestorInfo,s);my(null,F,H)}}return nF(i,s,p,m)}function h_(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}function xF(i,s,p,m){{var b=p;my(null,i,b.ancestorInfo)}var P=eF(i,s);return xy(m,P),P}function CF(){var i=window.event;return i===void 0?Tl:fo(i.type)}var p_=typeof setTimeout=="function"?setTimeout:void 0,EF=typeof clearTimeout=="function"?clearTimeout:void 0,g_=-1,nA=typeof Promise=="function"?Promise:void 0,_F=typeof queueMicrotask=="function"?queueMicrotask:typeof nA<"u"?function(i){return nA.resolve(null).then(i).catch(TF)}:p_;function TF(i){setTimeout(function(){throw i})}function kF(i,s,p,m){switch(s){case"button":case"input":case"select":case"textarea":p.autoFocus&&i.focus();return;case"img":{p.src&&(i.src=p.src);return}}}function PF(i,s,p,m,b,P){rF(i,s,p,m,b),b_(i,b)}function rA(i){gp(i,"")}function IF(i,s,p){i.nodeValue=p}function RF(i,s){i.appendChild(s)}function MF(i,s){var p;i.nodeType===Qr?(p=i.parentNode,p.insertBefore(s,i)):(p=i,p.appendChild(s));var m=i._reactRootContainer;m==null&&p.onclick===null&&ew(p)}function AF(i,s,p){i.insertBefore(s,p)}function $F(i,s,p){i.nodeType===Qr?i.parentNode.insertBefore(s,p):i.insertBefore(s,p)}function OF(i,s){i.removeChild(s)}function DF(i,s){i.nodeType===Qr?i.parentNode.removeChild(s):i.removeChild(s)}function m_(i,s){var p=s,m=0;do{var b=p.nextSibling;if(i.removeChild(p),b&&b.nodeType===Qr){var P=b.data;if(P===rw)if(m===0){i.removeChild(b),gn(s);return}else m--;else(P===nw||P===yy||P===Sy)&&m++}p=b}while(p);gn(s)}function LF(i,s){i.nodeType===Qr?m_(i.parentNode,s):i.nodeType===Ao&&m_(i,s),gn(i)}function jF(i){i=i;var s=i.style;typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"}function NF(i){i.nodeValue=""}function zF(i,s){i=i;var p=s[hF],m=p!=null&&p.hasOwnProperty("display")?p.display:null;i.style.display=mp("display",m)}function FF(i,s){i.nodeValue=s}function UF(i){i.nodeType===Ao?i.textContent="":i.nodeType===da&&i.documentElement&&i.removeChild(i.documentElement)}function BF(i,s,p){return i.nodeType!==Ao||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i}function HF(i,s){return s===""||i.nodeType!==vl?null:i}function VF(i){return i.nodeType!==Qr?null:i}function iA(i){return i.data===yy}function v_(i){return i.data===Sy}function KF(i){var s=i.nextSibling&&i.nextSibling.dataset,p,m,b;return s&&(p=s.dgst,m=s.msg,b=s.stck),{message:m,digest:p,stack:b}}function YF(i,s){i._reactRetry=s}function iw(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===Ao||s===vl)break;if(s===Qr){var p=i.data;if(p===nw||p===Sy||p===yy)break;if(p===rw)return null}}return i}function by(i){return iw(i.nextSibling)}function WF(i){return iw(i.firstChild)}function GF(i){return iw(i.firstChild)}function XF(i){return iw(i.nextSibling)}function qF(i,s,p,m,b,P,$){xy(P,i),b_(i,p);var F;{var H=b;F=H.namespace}var W=(P.mode&cn)!==Ot;return oF(i,s,p,F,m,W,$)}function QF(i,s,p,m){return xy(p,i),p.mode&cn,sF(i,s)}function ZF(i,s){xy(s,i)}function JF(i){for(var s=i.nextSibling,p=0;s;){if(s.nodeType===Qr){var m=s.data;if(m===rw){if(p===0)return by(s);p--}else(m===nw||m===Sy||m===yy)&&p++}s=s.nextSibling}return null}function oA(i){for(var s=i.previousSibling,p=0;s;){if(s.nodeType===Qr){var m=s.data;if(m===nw||m===Sy||m===yy){if(p===0)return s;p--}else m===rw&&p++}s=s.previousSibling}return null}function e9(i){gn(i)}function t9(i){gn(i)}function n9(i){return i!=="head"&&i!=="body"}function r9(i,s,p,m){var b=!0;Jb(s.nodeValue,p,m,b)}function i9(i,s,p,m,b,P){if(s[tw]!==!0){var $=!0;Jb(m.nodeValue,b,P,$)}}function o9(i,s){s.nodeType===Ao?a_(i,s):s.nodeType===Qr||l_(i,s)}function s9(i,s){{var p=i.parentNode;p!==null&&(s.nodeType===Ao?a_(p,s):s.nodeType===Qr||l_(p,s))}}function a9(i,s,p,m,b){(b||s[tw]!==!0)&&(m.nodeType===Ao?a_(p,m):m.nodeType===Qr||l_(p,m))}function l9(i,s,p){c_(i,s)}function c9(i,s){u_(i,s)}function u9(i,s,p){{var m=i.parentNode;m!==null&&c_(m,s)}}function d9(i,s){{var p=i.parentNode;p!==null&&u_(p,s)}}function f9(i,s,p,m,b,P){(P||s[tw]!==!0)&&c_(p,m)}function h9(i,s,p,m,b){(b||s[tw]!==!0)&&u_(p,m)}function p9(i){l("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",i.nodeName.toLowerCase())}function g9(i){fy(i)}var xg=Math.random().toString(36).slice(2),Cg="__reactFiber$"+xg,y_="__reactProps$"+xg,wy="__reactContainer$"+xg,S_="__reactEvents$"+xg,m9="__reactListeners$"+xg,v9="__reactHandles$"+xg;function y9(i){delete i[Cg],delete i[y_],delete i[S_],delete i[m9],delete i[v9]}function xy(i,s){s[Cg]=i}function ow(i,s){s[wy]=i}function sA(i){i[wy]=null}function Cy(i){return!!i[wy]}function Ph(i){var s=i[Cg];if(s)return s;for(var p=i.parentNode;p;){if(s=p[wy]||p[Cg],s){var m=s.alternate;if(s.child!==null||m!==null&&m.child!==null)for(var b=oA(i);b!==null;){var P=b[Cg];if(P)return P;b=oA(b)}return s}i=p,p=i.parentNode}return null}function Jd(i){var s=i[Cg]||i[wy];return s&&(s.tag===w||s.tag===k||s.tag===D||s.tag===v)?s:null}function Eg(i){if(i.tag===w||i.tag===k)return i.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function sw(i){return i[y_]||null}function b_(i,s){i[y_]=s}function S9(i){var s=i[S_];return s===void 0&&(s=i[S_]=new Set),s}var aA={},lA=e.ReactDebugCurrentFrame;function aw(i){if(i){var s=i._owner,p=ls(i.type,i._source,s?s.type:null);lA.setExtraStackFrame(p)}else lA.setExtraStackFrame(null)}function Ml(i,s,p,m,b){{var P=Function.call.bind(dn);for(var $ in i)if(P(i,$)){var F=void 0;try{if(typeof i[$]!="function"){var H=Error((m||"React class")+": "+p+" type `"+$+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof i[$]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw H.name="Invariant Violation",H}F=i[$](s,$,m,p,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(W){F=W}F&&!(F instanceof Error)&&(aw(b),l("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",m||"React class",p,$,typeof F),aw(null)),F instanceof Error&&!(F.message in aA)&&(aA[F.message]=!0,aw(b),l("Failed %s type: %s",p,F.message),aw(null))}}}var w_=[],lw;lw=[];var ju=-1;function ef(i){return{current:i}}function Uo(i,s){if(ju<0){l("Unexpected pop.");return}s!==lw[ju]&&l("Unexpected Fiber popped."),i.current=w_[ju],w_[ju]=null,lw[ju]=null,ju--}function Bo(i,s,p){ju++,w_[ju]=i.current,lw[ju]=p,i.current=s}var x_;x_={};var ma={};Object.freeze(ma);var Nu=ef(ma),Rc=ef(!1),C_=ma;function _g(i,s,p){return p&&Mc(s)?C_:Nu.current}function cA(i,s,p){{var m=i.stateNode;m.__reactInternalMemoizedUnmaskedChildContext=s,m.__reactInternalMemoizedMaskedChildContext=p}}function Tg(i,s){{var p=i.type,m=p.contextTypes;if(!m)return ma;var b=i.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===s)return b.__reactInternalMemoizedMaskedChildContext;var P={};for(var $ in m)P[$]=s[$];{var F=Vt(i)||"Unknown";Ml(m,P,"context",F)}return b&&cA(i,s,P),P}}function cw(){return Rc.current}function Mc(i){{var s=i.childContextTypes;return s!=null}}function uw(i){Uo(Rc,i),Uo(Nu,i)}function E_(i){Uo(Rc,i),Uo(Nu,i)}function uA(i,s,p){{if(Nu.current!==ma)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");Bo(Nu,s,i),Bo(Rc,p,i)}}function dA(i,s,p){{var m=i.stateNode,b=s.childContextTypes;if(typeof m.getChildContext!="function"){{var P=Vt(i)||"Unknown";x_[P]||(x_[P]=!0,l("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",P,P))}return p}var $=m.getChildContext();for(var F in $)if(!(F in b))throw new Error((Vt(i)||"Unknown")+'.getChildContext(): key "'+F+'" is not defined in childContextTypes.');{var H=Vt(i)||"Unknown";Ml(b,$,"child context",H)}return tn({},p,$)}}function dw(i){{var s=i.stateNode,p=s&&s.__reactInternalMemoizedMergedChildContext||ma;return C_=Nu.current,Bo(Nu,p,i),Bo(Rc,Rc.current,i),!0}}function fA(i,s,p){{var m=i.stateNode;if(!m)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(p){var b=dA(i,s,C_);m.__reactInternalMemoizedMergedChildContext=b,Uo(Rc,i),Uo(Nu,i),Bo(Nu,b,i),Bo(Rc,p,i)}else Uo(Rc,i),Bo(Rc,p,i)}}function b9(i){{if(!Tv(i)||i.tag!==h)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var s=i;do{switch(s.tag){case v:return s.stateNode.context;case h:{var p=s.type;if(Mc(p))return s.stateNode.__reactInternalMemoizedMergedChildContext;break}}s=s.return}while(s!==null);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}}var tf=0,fw=1,zu=null,__=!1,T_=!1;function hA(i){zu===null?zu=[i]:zu.push(i)}function w9(i){__=!0,hA(i)}function pA(){__&&nf()}function nf(){if(!T_&&zu!==null){T_=!0;var i=0,s=Bs();try{var p=!0,m=zu;for(ai(Wi);i<m.length;i++){var b=m[i];do b=b(p);while(b!==null)}zu=null,__=!1}catch(P){throw zu!==null&&(zu=zu.slice(i+1)),kp(Ip,nf),P}finally{ai(s),T_=!1}}return null}var kg=[],Pg=0,hw=null,pw=0,Xa=[],qa=0,Ih=null,Fu=1,Uu="";function x9(i){return Mh(),(i.flags&Cv)!==Rt}function C9(i){return Mh(),pw}function E9(){var i=Uu,s=Fu,p=s&~_9(s);return p.toString(32)+i}function Rh(i,s){Mh(),kg[Pg++]=pw,kg[Pg++]=hw,hw=i,pw=s}function gA(i,s,p){Mh(),Xa[qa++]=Fu,Xa[qa++]=Uu,Xa[qa++]=Ih,Ih=i;var m=Fu,b=Uu,P=gw(m)-1,$=m&~(1<<P),F=p+1,H=gw(s)+P;if(H>30){var W=P-P%5,G=(1<<W)-1,fe=($&G).toString(32),le=$>>W,Te=P-W,ke=gw(s)+Te,Re=F<<Te,ut=Re|le,At=fe+b;Fu=1<<ke|ut,Uu=At}else{var Tt=F<<P,xn=Tt|$,mn=b;Fu=1<<H|xn,Uu=mn}}function k_(i){Mh();var s=i.return;if(s!==null){var p=1,m=0;Rh(i,p),gA(i,p,m)}}function gw(i){return 32-Dp(i)}function _9(i){return 1<<gw(i)-1}function P_(i){for(;i===hw;)hw=kg[--Pg],kg[Pg]=null,pw=kg[--Pg],kg[Pg]=null;for(;i===Ih;)Ih=Xa[--qa],Xa[qa]=null,Uu=Xa[--qa],Xa[qa]=null,Fu=Xa[--qa],Xa[qa]=null}function T9(){return Mh(),Ih!==null?{id:Fu,overflow:Uu}:null}function k9(i,s){Mh(),Xa[qa++]=Fu,Xa[qa++]=Uu,Xa[qa++]=Ih,Fu=s.id,Uu=s.overflow,Ih=i}function Mh(){po()||l("Expected to be hydrating. This is a bug in React. Please file an issue.")}var ho=null,Qa=null,Al=!1,Ah=!1,rf=null;function P9(){Al&&l("We should not be hydrating here. This is a bug in React. Please file a bug.")}function mA(){Ah=!0}function I9(){return Ah}function R9(i){var s=i.stateNode.containerInfo;return Qa=GF(s),ho=i,Al=!0,rf=null,Ah=!1,!0}function M9(i,s,p){return Qa=XF(s),ho=i,Al=!0,rf=null,Ah=!1,p!==null&&k9(i,p),!0}function vA(i,s){switch(i.tag){case v:{o9(i.stateNode.containerInfo,s);break}case w:{var p=(i.mode&cn)!==Ot;a9(i.type,i.memoizedProps,i.stateNode,s,p);break}case D:{var m=i.memoizedState;m.dehydrated!==null&&s9(m.dehydrated,s);break}}}function yA(i,s){vA(i,s);var p=OH();p.stateNode=s,p.return=i;var m=i.deletions;m===null?(i.deletions=[p],i.flags|=Nn):m.push(p)}function I_(i,s){{if(Ah)return;switch(i.tag){case v:{var p=i.stateNode.containerInfo;switch(s.tag){case w:var m=s.type;s.pendingProps,l9(p,m);break;case k:var b=s.pendingProps;c9(p,b);break}break}case w:{var P=i.type,$=i.memoizedProps,F=i.stateNode;switch(s.tag){case w:{var H=s.type,W=s.pendingProps,G=(i.mode&cn)!==Ot;f9(P,$,F,H,W,G);break}case k:{var fe=s.pendingProps,le=(i.mode&cn)!==Ot;h9(P,$,F,fe,le);break}}break}case D:{var Te=i.memoizedState,ke=Te.dehydrated;if(ke!==null)switch(s.tag){case w:var Re=s.type;s.pendingProps,u9(ke,Re);break;case k:var ut=s.pendingProps;d9(ke,ut);break}break}default:return}}}function SA(i,s){s.flags=s.flags&~js|mr,I_(i,s)}function bA(i,s){switch(i.tag){case w:{var p=i.type;i.pendingProps;var m=BF(s,p);return m!==null?(i.stateNode=m,ho=i,Qa=WF(m),!0):!1}case k:{var b=i.pendingProps,P=HF(s,b);return P!==null?(i.stateNode=P,ho=i,Qa=null,!0):!1}case D:{var $=VF(s);if($!==null){var F={dehydrated:$,treeContext:T9(),retryLane:zo};i.memoizedState=F;var H=DH($);return H.return=i,i.child=H,ho=i,Qa=null,!0}return!1}default:return!1}}function R_(i){return(i.mode&cn)!==Ot&&(i.flags&Kt)===Rt}function M_(i){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function A_(i){if(Al){var s=Qa;if(!s){R_(i)&&(I_(ho,i),M_()),SA(ho,i),Al=!1,ho=i;return}var p=s;if(!bA(i,s)){R_(i)&&(I_(ho,i),M_()),s=by(p);var m=ho;if(!s||!bA(i,s)){SA(ho,i),Al=!1,ho=i;return}yA(m,p)}}}function A9(i,s,p){var m=i.stateNode,b=!Ah,P=qF(m,i.type,i.memoizedProps,s,p,i,b);return i.updateQueue=P,P!==null}function $9(i){var s=i.stateNode,p=i.memoizedProps,m=QF(s,p,i);if(m){var b=ho;if(b!==null)switch(b.tag){case v:{var P=b.stateNode.containerInfo,$=(b.mode&cn)!==Ot;r9(P,s,p,$);break}case w:{var F=b.type,H=b.memoizedProps,W=b.stateNode,G=(b.mode&cn)!==Ot;i9(F,H,W,s,p,G);break}}}return m}function O9(i){var s=i.memoizedState,p=s!==null?s.dehydrated:null;if(!p)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");ZF(p,i)}function D9(i){var s=i.memoizedState,p=s!==null?s.dehydrated:null;if(!p)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return JF(p)}function wA(i){for(var s=i.return;s!==null&&s.tag!==w&&s.tag!==v&&s.tag!==D;)s=s.return;ho=s}function mw(i){if(i!==ho)return!1;if(!Al)return wA(i),Al=!0,!1;if(i.tag!==v&&(i.tag!==w||n9(i.type)&&!h_(i.type,i.memoizedProps))){var s=Qa;if(s)if(R_(i))xA(i),M_();else for(;s;)yA(i,s),s=by(s)}return wA(i),i.tag===D?Qa=D9(i):Qa=ho?by(i.stateNode):null,!0}function L9(){return Al&&Qa!==null}function xA(i){for(var s=Qa;s;)vA(i,s),s=by(s)}function Ig(){ho=null,Qa=null,Al=!1,Ah=!1}function CA(){rf!==null&&(v$(rf),rf=null)}function po(){return Al}function $_(i){rf===null?rf=[i]:rf.push(i)}var j9=e.ReactCurrentBatchConfig,N9=null;function z9(){return j9.transition}var $l={recordUnsafeLifecycleWarnings:function(i,s){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(i,s){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}};{var F9=function(i){for(var s=null,p=i;p!==null;)p.mode&$r&&(s=p),p=p.return;return s},$h=function(i){var s=[];return i.forEach(function(p){s.push(p)}),s.sort().join(", ")},Ey=[],_y=[],Ty=[],ky=[],Py=[],Iy=[],Oh=new Set;$l.recordUnsafeLifecycleWarnings=function(i,s){Oh.has(i.type)||(typeof s.componentWillMount=="function"&&s.componentWillMount.__suppressDeprecationWarning!==!0&&Ey.push(i),i.mode&$r&&typeof s.UNSAFE_componentWillMount=="function"&&_y.push(i),typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&Ty.push(i),i.mode&$r&&typeof s.UNSAFE_componentWillReceiveProps=="function"&&ky.push(i),typeof s.componentWillUpdate=="function"&&s.componentWillUpdate.__suppressDeprecationWarning!==!0&&Py.push(i),i.mode&$r&&typeof s.UNSAFE_componentWillUpdate=="function"&&Iy.push(i))},$l.flushPendingUnsafeLifecycleWarnings=function(){var i=new Set;Ey.length>0&&(Ey.forEach(function(le){i.add(Vt(le)||"Component"),Oh.add(le.type)}),Ey=[]);var s=new Set;_y.length>0&&(_y.forEach(function(le){s.add(Vt(le)||"Component"),Oh.add(le.type)}),_y=[]);var p=new Set;Ty.length>0&&(Ty.forEach(function(le){p.add(Vt(le)||"Component"),Oh.add(le.type)}),Ty=[]);var m=new Set;ky.length>0&&(ky.forEach(function(le){m.add(Vt(le)||"Component"),Oh.add(le.type)}),ky=[]);var b=new Set;Py.length>0&&(Py.forEach(function(le){b.add(Vt(le)||"Component"),Oh.add(le.type)}),Py=[]);var P=new Set;if(Iy.length>0&&(Iy.forEach(function(le){P.add(Vt(le)||"Component"),Oh.add(le.type)}),Iy=[]),s.size>0){var $=$h(s);l(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,$)}if(m.size>0){var F=$h(m);l(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state

Please update the following components: %s`,F)}if(P.size>0){var H=$h(P);l(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,H)}if(i.size>0){var W=$h(i);a(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,W)}if(p.size>0){var G=$h(p);a(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,G)}if(b.size>0){var fe=$h(b);a(`componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,fe)}};var vw=new Map,EA=new Set;$l.recordLegacyContextWarning=function(i,s){var p=F9(i);if(p===null){l("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.");return}if(!EA.has(i.type)){var m=vw.get(p);(i.type.contextTypes!=null||i.type.childContextTypes!=null||s!==null&&typeof s.getChildContext=="function")&&(m===void 0&&(m=[],vw.set(p,m)),m.push(i))}},$l.flushLegacyContextWarning=function(){vw.forEach(function(i,s){if(i.length!==0){var p=i[0],m=new Set;i.forEach(function(P){m.add(Vt(P)||"Component"),EA.add(P.type)});var b=$h(m);try{An(p),l(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://reactjs.org/link/legacy-context`,b)}finally{er()}}})},$l.discardPendingWarnings=function(){Ey=[],_y=[],Ty=[],ky=[],Py=[],Iy=[],vw=new Map}}function Ol(i,s){if(i&&i.defaultProps){var p=tn({},s),m=i.defaultProps;for(var b in m)p[b]===void 0&&(p[b]=m[b]);return p}return s}var O_=ef(null),D_;D_={};var yw=null,Rg=null,L_=null,Sw=!1;function bw(){yw=null,Rg=null,L_=null,Sw=!1}function _A(){Sw=!0}function TA(){Sw=!1}function kA(i,s,p){Bo(O_,s._currentValue,i),s._currentValue=p,s._currentRenderer!==void 0&&s._currentRenderer!==null&&s._currentRenderer!==D_&&l("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),s._currentRenderer=D_}function j_(i,s){var p=O_.current;Uo(O_,s),i._currentValue=p}function N_(i,s,p){for(var m=i;m!==null;){var b=m.alternate;if(Tu(m.childLanes,s)?b!==null&&!Tu(b.childLanes,s)&&(b.childLanes=an(b.childLanes,s)):(m.childLanes=an(m.childLanes,s),b!==null&&(b.childLanes=an(b.childLanes,s))),m===p)break;m=m.return}m!==p&&l("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function U9(i,s,p){B9(i,s,p)}function B9(i,s,p){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var b=void 0,P=m.dependencies;if(P!==null){b=m.child;for(var $=P.firstContext;$!==null;){if($.context===s){if(m.tag===h){var F=si(p),H=Bu(rr,F);H.tag=xw;var W=m.updateQueue;if(W!==null){var G=W.shared,fe=G.pending;fe===null?H.next=H:(H.next=fe.next,fe.next=H),G.pending=H}}m.lanes=an(m.lanes,p);var le=m.alternate;le!==null&&(le.lanes=an(le.lanes,p)),N_(m.return,p,i),P.lanes=an(P.lanes,p);break}$=$.next}}else if(m.tag===L)b=m.type===i.type?null:m.child;else if(m.tag===X){var Te=m.return;if(Te===null)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");Te.lanes=an(Te.lanes,p);var ke=Te.alternate;ke!==null&&(ke.lanes=an(ke.lanes,p)),N_(Te,p,i),b=m.sibling}else b=m.child;if(b!==null)b.return=m;else for(b=m;b!==null;){if(b===i){b=null;break}var Re=b.sibling;if(Re!==null){Re.return=b.return,b=Re;break}b=b.return}m=b}}function Mg(i,s){yw=i,Rg=null,L_=null;var p=i.dependencies;if(p!==null){var m=p.firstContext;m!==null&&(Fo(p.lanes,s)&&Hy(),p.firstContext=null)}}function ki(i){Sw&&l("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var s=i._currentValue;if(L_!==i){var p={context:i,memoizedValue:s,next:null};if(Rg===null){if(yw===null)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");Rg=p,yw.dependencies={lanes:$e,firstContext:p}}else Rg=Rg.next=p}return s}var Dh=null;function z_(i){Dh===null?Dh=[i]:Dh.push(i)}function H9(){if(Dh!==null){for(var i=0;i<Dh.length;i++){var s=Dh[i],p=s.interleaved;if(p!==null){s.interleaved=null;var m=p.next,b=s.pending;if(b!==null){var P=b.next;b.next=m,p.next=P}s.pending=p}}Dh=null}}function PA(i,s,p,m){var b=s.interleaved;return b===null?(p.next=p,z_(s)):(p.next=b.next,b.next=p),s.interleaved=p,ww(i,m)}function V9(i,s,p,m){var b=s.interleaved;b===null?(p.next=p,z_(s)):(p.next=b.next,b.next=p),s.interleaved=p}function K9(i,s,p,m){var b=s.interleaved;return b===null?(p.next=p,z_(s)):(p.next=b.next,b.next=p),s.interleaved=p,ww(i,m)}function Ws(i,s){return ww(i,s)}var Y9=ww;function ww(i,s){i.lanes=an(i.lanes,s);var p=i.alternate;p!==null&&(p.lanes=an(p.lanes,s)),p===null&&(i.flags&(mr|js))!==Rt&&I$(i);for(var m=i,b=i.return;b!==null;)b.childLanes=an(b.childLanes,s),p=b.alternate,p!==null?p.childLanes=an(p.childLanes,s):(b.flags&(mr|js))!==Rt&&I$(i),m=b,b=b.return;if(m.tag===v){var P=m.stateNode;return P}else return null}var IA=0,RA=1,xw=2,F_=3,Cw=!1,U_,Ew;U_=!1,Ew=null;function B_(i){var s={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:$e},effects:null};i.updateQueue=s}function MA(i,s){var p=s.updateQueue,m=i.updateQueue;if(p===m){var b={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects};s.updateQueue=b}}function Bu(i,s){var p={eventTime:i,lane:s,tag:IA,payload:null,callback:null,next:null};return p}function of(i,s,p){var m=i.updateQueue;if(m===null)return null;var b=m.shared;if(Ew===b&&!U_&&(l("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),U_=!0),YB()){var P=b.pending;return P===null?s.next=s:(s.next=P.next,P.next=s),b.pending=s,Y9(i,p)}else return K9(i,b,s,p)}function _w(i,s,p){var m=s.updateQueue;if(m!==null){var b=m.shared;if(zv(p)){var P=b.lanes;P=Uv(P,i.pendingLanes);var $=an(P,p);b.lanes=$,Nd(i,$)}}}function H_(i,s){var p=i.updateQueue,m=i.alternate;if(m!==null){var b=m.updateQueue;if(p===b){var P=null,$=null,F=p.firstBaseUpdate;if(F!==null){var H=F;do{var W={eventTime:H.eventTime,lane:H.lane,tag:H.tag,payload:H.payload,callback:H.callback,next:null};$===null?P=$=W:($.next=W,$=W),H=H.next}while(H!==null);$===null?P=$=s:($.next=s,$=s)}else P=$=s;p={baseState:b.baseState,firstBaseUpdate:P,lastBaseUpdate:$,shared:b.shared,effects:b.effects},i.updateQueue=p;return}}var G=p.lastBaseUpdate;G===null?p.firstBaseUpdate=s:G.next=s,p.lastBaseUpdate=s}function W9(i,s,p,m,b,P){switch(p.tag){case RA:{var $=p.payload;if(typeof $=="function"){_A();var F=$.call(P,m,b);{if(i.mode&$r){oi(!0);try{$.call(P,m,b)}finally{oi(!1)}}TA()}return F}return $}case F_:i.flags=i.flags&~xi|Kt;case IA:{var H=p.payload,W;if(typeof H=="function"){_A(),W=H.call(P,m,b);{if(i.mode&$r){oi(!0);try{H.call(P,m,b)}finally{oi(!1)}}TA()}}else W=H;return W==null?m:tn({},m,W)}case xw:return Cw=!0,m}return m}function Tw(i,s,p,m){var b=i.updateQueue;Cw=!1,Ew=b.shared;var P=b.firstBaseUpdate,$=b.lastBaseUpdate,F=b.shared.pending;if(F!==null){b.shared.pending=null;var H=F,W=H.next;H.next=null,$===null?P=W:$.next=W,$=H;var G=i.alternate;if(G!==null){var fe=G.updateQueue,le=fe.lastBaseUpdate;le!==$&&(le===null?fe.firstBaseUpdate=W:le.next=W,fe.lastBaseUpdate=H)}}if(P!==null){var Te=b.baseState,ke=$e,Re=null,ut=null,At=null,Tt=P;do{var xn=Tt.lane,mn=Tt.eventTime;if(Tu(m,xn)){if(At!==null){var Me={eventTime:mn,lane:bn,tag:Tt.tag,payload:Tt.payload,callback:Tt.callback,next:null};At=At.next=Me}Te=W9(i,b,Tt,Te,s,p);var be=Tt.callback;if(be!==null&&Tt.lane!==bn){i.flags|=Ha;var Ge=b.effects;Ge===null?b.effects=[Tt]:Ge.push(Tt)}}else{var Se={eventTime:mn,lane:xn,tag:Tt.tag,payload:Tt.payload,callback:Tt.callback,next:null};At===null?(ut=At=Se,Re=Te):At=At.next=Se,ke=an(ke,xn)}if(Tt=Tt.next,Tt===null){if(F=b.shared.pending,F===null)break;var dt=F,ot=dt.next;dt.next=null,Tt=ot,b.lastBaseUpdate=dt,b.shared.pending=null}}while(!0);At===null&&(Re=Te),b.baseState=Re,b.firstBaseUpdate=ut,b.lastBaseUpdate=At;var Ut=b.shared.interleaved;if(Ut!==null){var en=Ut;do ke=an(ke,en.lane),en=en.next;while(en!==Ut)}else P===null&&(b.shared.lanes=$e);tS(ke),i.lanes=ke,i.memoizedState=Te}Ew=null}function G9(i,s){if(typeof i!="function")throw new Error("Invalid argument passed as callback. Expected a function. Instead "+("received: "+i));i.call(s)}function AA(){Cw=!1}function kw(){return Cw}function $A(i,s,p){var m=s.effects;if(s.effects=null,m!==null)for(var b=0;b<m.length;b++){var P=m[b],$=P.callback;$!==null&&(P.callback=null,G9($,p))}}var V_={},OA=new t.Component().refs,K_,Y_,W_,G_,X_,DA,Pw,q_,Q_,Z_;{K_=new Set,Y_=new Set,W_=new Set,G_=new Set,q_=new Set,X_=new Set,Q_=new Set,Z_=new Set;var LA=new Set;Pw=function(i,s){if(!(i===null||typeof i=="function")){var p=s+"_"+i;LA.has(p)||(LA.add(p),l("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",s,i))}},DA=function(i,s){if(s===void 0){var p=on(i)||"Component";X_.has(p)||(X_.add(p),l("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",p))}},Object.defineProperty(V_,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(V_)}function J_(i,s,p,m){var b=i.memoizedState,P=p(m,b);{if(i.mode&$r){oi(!0);try{P=p(m,b)}finally{oi(!1)}}DA(s,P)}var $=P==null?b:tn({},b,P);if(i.memoizedState=$,i.lanes===$e){var F=i.updateQueue;F.baseState=$}}var eT={isMounted:hs,enqueueSetState:function(i,s,p){var m=Ds(i),b=Ss(),P=hf(m),$=Bu(b,P);$.payload=s,p!=null&&(Pw(p,"setState"),$.callback=p);var F=of(m,$,P);F!==null&&(Ui(F,m,P,b),_w(F,m,P)),wc(m,P)},enqueueReplaceState:function(i,s,p){var m=Ds(i),b=Ss(),P=hf(m),$=Bu(b,P);$.tag=RA,$.payload=s,p!=null&&(Pw(p,"replaceState"),$.callback=p);var F=of(m,$,P);F!==null&&(Ui(F,m,P,b),_w(F,m,P)),wc(m,P)},enqueueForceUpdate:function(i,s){var p=Ds(i),m=Ss(),b=hf(p),P=Bu(m,b);P.tag=xw,s!=null&&(Pw(s,"forceUpdate"),P.callback=s);var $=of(p,P,b);$!==null&&(Ui($,p,b,m),_w($,p,b)),Dv(p,b)}};function jA(i,s,p,m,b,P,$){var F=i.stateNode;if(typeof F.shouldComponentUpdate=="function"){var H=F.shouldComponentUpdate(m,P,$);{if(i.mode&$r){oi(!0);try{H=F.shouldComponentUpdate(m,P,$)}finally{oi(!1)}}H===void 0&&l("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",on(s)||"Component")}return H}return s.prototype&&s.prototype.isPureReactComponent?!It(p,m)||!It(b,P):!0}function X9(i,s,p){var m=i.stateNode;{var b=on(s)||"Component",P=m.render;P||(s.prototype&&typeof s.prototype.render=="function"?l("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",b):l("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",b)),m.getInitialState&&!m.getInitialState.isReactClassApproved&&!m.state&&l("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",b),m.getDefaultProps&&!m.getDefaultProps.isReactClassApproved&&l("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",b),m.propTypes&&l("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",b),m.contextType&&l("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",b),m.contextTypes&&l("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",b),s.contextType&&s.contextTypes&&!Q_.has(s)&&(Q_.add(s),l("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",b)),typeof m.componentShouldUpdate=="function"&&l("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",b),s.prototype&&s.prototype.isPureReactComponent&&typeof m.shouldComponentUpdate<"u"&&l("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",on(s)||"A pure component"),typeof m.componentDidUnmount=="function"&&l("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",b),typeof m.componentDidReceiveProps=="function"&&l("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",b),typeof m.componentWillRecieveProps=="function"&&l("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",b),typeof m.UNSAFE_componentWillRecieveProps=="function"&&l("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",b);var $=m.props!==p;m.props!==void 0&&$&&l("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",b,b),m.defaultProps&&l("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",b,b),typeof m.getSnapshotBeforeUpdate=="function"&&typeof m.componentDidUpdate!="function"&&!W_.has(s)&&(W_.add(s),l("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",on(s))),typeof m.getDerivedStateFromProps=="function"&&l("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",b),typeof m.getDerivedStateFromError=="function"&&l("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",b),typeof s.getSnapshotBeforeUpdate=="function"&&l("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",b);var F=m.state;F&&(typeof F!="object"||yn(F))&&l("%s.state: must be set to an object or null",b),typeof m.getChildContext=="function"&&typeof s.childContextTypes!="object"&&l("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",b)}}function NA(i,s){s.updater=eT,i.stateNode=s,Pd(s,i),s._reactInternalInstance=V_}function zA(i,s,p){var m=!1,b=ma,P=ma,$=s.contextType;if("contextType"in s){var F=$===null||$!==void 0&&$.$$typeof===tt&&$._context===void 0;if(!F&&!Z_.has(s)){Z_.add(s);var H="";$===void 0?H=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof $!="object"?H=" However, it is set to a "+typeof $+".":$.$$typeof===ze?H=" Did you accidentally pass the Context.Provider instead?":$._context!==void 0?H=" Did you accidentally pass the Context.Consumer instead?":H=" However, it is set to an object with keys {"+Object.keys($).join(", ")+"}.",l("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",on(s)||"Component",H)}}if(typeof $=="object"&&$!==null)P=ki($);else{b=_g(i,s,!0);var W=s.contextTypes;m=W!=null,P=m?Tg(i,b):ma}var G=new s(p,P);if(i.mode&$r){oi(!0);try{G=new s(p,P)}finally{oi(!1)}}var fe=i.memoizedState=G.state!==null&&G.state!==void 0?G.state:null;NA(i,G);{if(typeof s.getDerivedStateFromProps=="function"&&fe===null){var le=on(s)||"Component";Y_.has(le)||(Y_.add(le),l("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",le,G.state===null?"null":"undefined",le))}if(typeof s.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"){var Te=null,ke=null,Re=null;if(typeof G.componentWillMount=="function"&&G.componentWillMount.__suppressDeprecationWarning!==!0?Te="componentWillMount":typeof G.UNSAFE_componentWillMount=="function"&&(Te="UNSAFE_componentWillMount"),typeof G.componentWillReceiveProps=="function"&&G.componentWillReceiveProps.__suppressDeprecationWarning!==!0?ke="componentWillReceiveProps":typeof G.UNSAFE_componentWillReceiveProps=="function"&&(ke="UNSAFE_componentWillReceiveProps"),typeof G.componentWillUpdate=="function"&&G.componentWillUpdate.__suppressDeprecationWarning!==!0?Re="componentWillUpdate":typeof G.UNSAFE_componentWillUpdate=="function"&&(Re="UNSAFE_componentWillUpdate"),Te!==null||ke!==null||Re!==null){var ut=on(s)||"Component",At=typeof s.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";G_.has(ut)||(G_.add(ut),l(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,ut,At,Te!==null?`
  `+Te:"",ke!==null?`
  `+ke:"",Re!==null?`
  `+Re:""))}}}return m&&cA(i,b,P),G}function q9(i,s){var p=s.state;typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),p!==s.state&&(l("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",Vt(i)||"Component"),eT.enqueueReplaceState(s,s.state,null))}function FA(i,s,p,m){var b=s.state;if(typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(p,m),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(p,m),s.state!==b){{var P=Vt(i)||"Component";K_.has(P)||(K_.add(P),l("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",P))}eT.enqueueReplaceState(s,s.state,null)}}function tT(i,s,p,m){X9(i,s,p);var b=i.stateNode;b.props=p,b.state=i.memoizedState,b.refs=OA,B_(i);var P=s.contextType;if(typeof P=="object"&&P!==null)b.context=ki(P);else{var $=_g(i,s,!0);b.context=Tg(i,$)}{if(b.state===p){var F=on(s)||"Component";q_.has(F)||(q_.add(F),l("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",F))}i.mode&$r&&$l.recordLegacyContextWarning(i,b),$l.recordUnsafeLifecycleWarnings(i,b)}b.state=i.memoizedState;var H=s.getDerivedStateFromProps;if(typeof H=="function"&&(J_(i,s,H,p),b.state=i.memoizedState),typeof s.getDerivedStateFromProps!="function"&&typeof b.getSnapshotBeforeUpdate!="function"&&(typeof b.UNSAFE_componentWillMount=="function"||typeof b.componentWillMount=="function")&&(q9(i,b),Tw(i,p,b,m),b.state=i.memoizedState),typeof b.componentDidMount=="function"){var W=sn;W|=Oo,(i.mode&Fs)!==Ot&&(W|=Do),i.flags|=W}}function Q9(i,s,p,m){var b=i.stateNode,P=i.memoizedProps;b.props=P;var $=b.context,F=s.contextType,H=ma;if(typeof F=="object"&&F!==null)H=ki(F);else{var W=_g(i,s,!0);H=Tg(i,W)}var G=s.getDerivedStateFromProps,fe=typeof G=="function"||typeof b.getSnapshotBeforeUpdate=="function";!fe&&(typeof b.UNSAFE_componentWillReceiveProps=="function"||typeof b.componentWillReceiveProps=="function")&&(P!==p||$!==H)&&FA(i,b,p,H),AA();var le=i.memoizedState,Te=b.state=le;if(Tw(i,p,b,m),Te=i.memoizedState,P===p&&le===Te&&!cw()&&!kw()){if(typeof b.componentDidMount=="function"){var ke=sn;ke|=Oo,(i.mode&Fs)!==Ot&&(ke|=Do),i.flags|=ke}return!1}typeof G=="function"&&(J_(i,s,G,p),Te=i.memoizedState);var Re=kw()||jA(i,s,P,p,le,Te,H);if(Re){if(!fe&&(typeof b.UNSAFE_componentWillMount=="function"||typeof b.componentWillMount=="function")&&(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"){var ut=sn;ut|=Oo,(i.mode&Fs)!==Ot&&(ut|=Do),i.flags|=ut}}else{if(typeof b.componentDidMount=="function"){var At=sn;At|=Oo,(i.mode&Fs)!==Ot&&(At|=Do),i.flags|=At}i.memoizedProps=p,i.memoizedState=Te}return b.props=p,b.state=Te,b.context=H,Re}function Z9(i,s,p,m,b){var P=s.stateNode;MA(i,s);var $=s.memoizedProps,F=s.type===s.elementType?$:Ol(s.type,$);P.props=F;var H=s.pendingProps,W=P.context,G=p.contextType,fe=ma;if(typeof G=="object"&&G!==null)fe=ki(G);else{var le=_g(s,p,!0);fe=Tg(s,le)}var Te=p.getDerivedStateFromProps,ke=typeof Te=="function"||typeof P.getSnapshotBeforeUpdate=="function";!ke&&(typeof P.UNSAFE_componentWillReceiveProps=="function"||typeof P.componentWillReceiveProps=="function")&&($!==H||W!==fe)&&FA(s,P,m,fe),AA();var Re=s.memoizedState,ut=P.state=Re;if(Tw(s,m,P,b),ut=s.memoizedState,$===H&&Re===ut&&!cw()&&!kw()&&!we)return typeof P.componentDidUpdate=="function"&&($!==i.memoizedProps||Re!==i.memoizedState)&&(s.flags|=sn),typeof P.getSnapshotBeforeUpdate=="function"&&($!==i.memoizedProps||Re!==i.memoizedState)&&(s.flags|=Ls),!1;typeof Te=="function"&&(J_(s,p,Te,m),ut=s.memoizedState);var At=kw()||jA(s,p,F,m,Re,ut,fe)||we;return At?(!ke&&(typeof P.UNSAFE_componentWillUpdate=="function"||typeof P.componentWillUpdate=="function")&&(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(m,ut,fe),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(m,ut,fe)),typeof P.componentDidUpdate=="function"&&(s.flags|=sn),typeof P.getSnapshotBeforeUpdate=="function"&&(s.flags|=Ls)):(typeof P.componentDidUpdate=="function"&&($!==i.memoizedProps||Re!==i.memoizedState)&&(s.flags|=sn),typeof P.getSnapshotBeforeUpdate=="function"&&($!==i.memoizedProps||Re!==i.memoizedState)&&(s.flags|=Ls),s.memoizedProps=m,s.memoizedState=ut),P.props=m,P.state=ut,P.context=fe,At}var nT,rT,iT,oT,sT,UA=function(i,s){};nT=!1,rT=!1,iT={},oT={},sT={},UA=function(i,s){if(!(i===null||typeof i!="object")&&!(!i._store||i._store.validated||i.key!=null)){if(typeof i._store!="object")throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");i._store.validated=!0;var p=Vt(s)||"Component";oT[p]||(oT[p]=!0,l('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};function Ry(i,s,p){var m=p.ref;if(m!==null&&typeof m!="function"&&typeof m!="object"){if((i.mode&$r||De)&&!(p._owner&&p._self&&p._owner.stateNode!==p._self)){var b=Vt(i)||"Component";iT[b]||(l('A string ref, "%s", has been found within a strict mode tree. String refs are a source of potential bugs and should be avoided. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',m),iT[b]=!0)}if(p._owner){var P=p._owner,$;if(P){var F=P;if(F.tag!==h)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");$=F.stateNode}if(!$)throw new Error("Missing owner for string ref "+m+". This error is likely caused by a bug in React. Please file an issue.");var H=$;jr(m,"ref");var W=""+m;if(s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===W)return s.ref;var G=function(fe){var le=H.refs;le===OA&&(le=H.refs={}),fe===null?delete le[W]:le[W]=fe};return G._stringRef=W,G}else{if(typeof m!="string")throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!p._owner)throw new Error("Element ref was specified as a string ("+m+`) but no owner was set. This could happen for one of the following reasons:
1. You may be adding a ref to a function component
2. You may be adding a ref to a component that was not created inside a component's render method
3. You have multiple copies of React loaded
See https://reactjs.org/link/refs-must-have-owner for more information.`)}}return m}function Iw(i,s){var p=Object.prototype.toString.call(s);throw new Error("Objects are not valid as a React child (found: "+(p==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":p)+"). If you meant to render a collection of children, use an array instead.")}function Rw(i){{var s=Vt(i)||"Component";if(sT[s])return;sT[s]=!0,l("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}}function BA(i){var s=i._payload,p=i._init;return p(s)}function HA(i){function s(Se,Me){if(i){var be=Se.deletions;be===null?(Se.deletions=[Me],Se.flags|=Nn):be.push(Me)}}function p(Se,Me){if(!i)return null;for(var be=Me;be!==null;)s(Se,be),be=be.sibling;return null}function m(Se,Me){for(var be=new Map,Ge=Me;Ge!==null;)Ge.key!==null?be.set(Ge.key,Ge):be.set(Ge.index,Ge),Ge=Ge.sibling;return be}function b(Se,Me){var be=Hh(Se,Me);return be.index=0,be.sibling=null,be}function P(Se,Me,be){if(Se.index=be,!i)return Se.flags|=Cv,Me;var Ge=Se.alternate;if(Ge!==null){var dt=Ge.index;return dt<Me?(Se.flags|=mr,Me):dt}else return Se.flags|=mr,Me}function $(Se){return i&&Se.alternate===null&&(Se.flags|=mr),Se}function F(Se,Me,be,Ge){if(Me===null||Me.tag!==k){var dt=$k(be,Se.mode,Ge);return dt.return=Se,dt}else{var ot=b(Me,be);return ot.return=Se,ot}}function H(Se,Me,be,Ge){var dt=be.type;if(dt===Ii)return G(Se,Me,be.props.children,Ge,be.key);if(Me!==null&&(Me.elementType===dt||$$(Me,be)||typeof dt=="object"&&dt!==null&&dt.$$typeof===Pt&&BA(dt)===Me.type)){var ot=b(Me,be.props);return ot.ref=Ry(Se,Me,be),ot.return=Se,ot._debugSource=be._source,ot._debugOwner=be._owner,ot}var Ut=Ak(be,Se.mode,Ge);return Ut.ref=Ry(Se,Me,be),Ut.return=Se,Ut}function W(Se,Me,be,Ge){if(Me===null||Me.tag!==S||Me.stateNode.containerInfo!==be.containerInfo||Me.stateNode.implementation!==be.implementation){var dt=Ok(be,Se.mode,Ge);return dt.return=Se,dt}else{var ot=b(Me,be.children||[]);return ot.return=Se,ot}}function G(Se,Me,be,Ge,dt){if(Me===null||Me.tag!==C){var ot=gf(be,Se.mode,Ge,dt);return ot.return=Se,ot}else{var Ut=b(Me,be);return Ut.return=Se,Ut}}function fe(Se,Me,be){if(typeof Me=="string"&&Me!==""||typeof Me=="number"){var Ge=$k(""+Me,Se.mode,be);return Ge.return=Se,Ge}if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case Ms:{var dt=Ak(Me,Se.mode,be);return dt.ref=Ry(Se,null,Me),dt.return=Se,dt}case vi:{var ot=Ok(Me,Se.mode,be);return ot.return=Se,ot}case Pt:{var Ut=Me._payload,en=Me._init;return fe(Se,en(Ut),be)}}if(yn(Me)||as(Me)){var Xn=gf(Me,Se.mode,be,null);return Xn.return=Se,Xn}Iw(Se,Me)}return typeof Me=="function"&&Rw(Se),null}function le(Se,Me,be,Ge){var dt=Me!==null?Me.key:null;if(typeof be=="string"&&be!==""||typeof be=="number")return dt!==null?null:F(Se,Me,""+be,Ge);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case Ms:return be.key===dt?H(Se,Me,be,Ge):null;case vi:return be.key===dt?W(Se,Me,be,Ge):null;case Pt:{var ot=be._payload,Ut=be._init;return le(Se,Me,Ut(ot),Ge)}}if(yn(be)||as(be))return dt!==null?null:G(Se,Me,be,Ge,null);Iw(Se,be)}return typeof be=="function"&&Rw(Se),null}function Te(Se,Me,be,Ge,dt){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"){var ot=Se.get(be)||null;return F(Me,ot,""+Ge,dt)}if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case Ms:{var Ut=Se.get(Ge.key===null?be:Ge.key)||null;return H(Me,Ut,Ge,dt)}case vi:{var en=Se.get(Ge.key===null?be:Ge.key)||null;return W(Me,en,Ge,dt)}case Pt:var Xn=Ge._payload,On=Ge._init;return Te(Se,Me,be,On(Xn),dt)}if(yn(Ge)||as(Ge)){var ui=Se.get(be)||null;return G(Me,ui,Ge,dt,null)}Iw(Me,Ge)}return typeof Ge=="function"&&Rw(Me),null}function ke(Se,Me,be){{if(typeof Se!="object"||Se===null)return Me;switch(Se.$$typeof){case Ms:case vi:UA(Se,be);var Ge=Se.key;if(typeof Ge!="string")break;if(Me===null){Me=new Set,Me.add(Ge);break}if(!Me.has(Ge)){Me.add(Ge);break}l("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.",Ge);break;case Pt:var dt=Se._payload,ot=Se._init;ke(ot(dt),Me,be);break}}return Me}function Re(Se,Me,be,Ge){for(var dt=null,ot=0;ot<be.length;ot++){var Ut=be[ot];dt=ke(Ut,dt,Se)}for(var en=null,Xn=null,On=Me,ui=0,Dn=0,ei=null;On!==null&&Dn<be.length;Dn++){On.index>Dn?(ei=On,On=null):ei=On.sibling;var Vo=le(Se,On,be[Dn],Ge);if(Vo===null){On===null&&(On=ei);break}i&&On&&Vo.alternate===null&&s(Se,On),ui=P(Vo,ui,Dn),Xn===null?en=Vo:Xn.sibling=Vo,Xn=Vo,On=ei}if(Dn===be.length){if(p(Se,On),po()){var wo=Dn;Rh(Se,wo)}return en}if(On===null){for(;Dn<be.length;Dn++){var ya=fe(Se,be[Dn],Ge);ya!==null&&(ui=P(ya,ui,Dn),Xn===null?en=ya:Xn.sibling=ya,Xn=ya)}if(po()){var bs=Dn;Rh(Se,bs)}return en}for(var ws=m(Se,On);Dn<be.length;Dn++){var Ko=Te(ws,Se,Dn,be[Dn],Ge);Ko!==null&&(i&&Ko.alternate!==null&&ws.delete(Ko.key===null?Dn:Ko.key),ui=P(Ko,ui,Dn),Xn===null?en=Ko:Xn.sibling=Ko,Xn=Ko)}if(i&&ws.forEach(function(Gg){return s(Se,Gg)}),po()){var Gu=Dn;Rh(Se,Gu)}return en}function ut(Se,Me,be,Ge){var dt=as(be);if(typeof dt!="function")throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");{typeof Symbol=="function"&&be[Symbol.toStringTag]==="Generator"&&(rT||l("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),rT=!0),be.entries===dt&&(nT||l("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),nT=!0);var ot=dt.call(be);if(ot)for(var Ut=null,en=ot.next();!en.done;en=ot.next()){var Xn=en.value;Ut=ke(Xn,Ut,Se)}}var On=dt.call(be);if(On==null)throw new Error("An iterable object provided no iterator.");for(var ui=null,Dn=null,ei=Me,Vo=0,wo=0,ya=null,bs=On.next();ei!==null&&!bs.done;wo++,bs=On.next()){ei.index>wo?(ya=ei,ei=null):ya=ei.sibling;var ws=le(Se,ei,bs.value,Ge);if(ws===null){ei===null&&(ei=ya);break}i&&ei&&ws.alternate===null&&s(Se,ei),Vo=P(ws,Vo,wo),Dn===null?ui=ws:Dn.sibling=ws,Dn=ws,ei=ya}if(bs.done){if(p(Se,ei),po()){var Ko=wo;Rh(Se,Ko)}return ui}if(ei===null){for(;!bs.done;wo++,bs=On.next()){var Gu=fe(Se,bs.value,Ge);Gu!==null&&(Vo=P(Gu,Vo,wo),Dn===null?ui=Gu:Dn.sibling=Gu,Dn=Gu)}if(po()){var Gg=wo;Rh(Se,Gg)}return ui}for(var sS=m(Se,ei);!bs.done;wo++,bs=On.next()){var zc=Te(sS,Se,wo,bs.value,Ge);zc!==null&&(i&&zc.alternate!==null&&sS.delete(zc.key===null?wo:zc.key),Vo=P(zc,Vo,wo),Dn===null?ui=zc:Dn.sibling=zc,Dn=zc)}if(i&&sS.forEach(function(fV){return s(Se,fV)}),po()){var dV=wo;Rh(Se,dV)}return ui}function At(Se,Me,be,Ge){if(Me!==null&&Me.tag===k){p(Se,Me.sibling);var dt=b(Me,be);return dt.return=Se,dt}p(Se,Me);var ot=$k(be,Se.mode,Ge);return ot.return=Se,ot}function Tt(Se,Me,be,Ge){for(var dt=be.key,ot=Me;ot!==null;){if(ot.key===dt){var Ut=be.type;if(Ut===Ii){if(ot.tag===C){p(Se,ot.sibling);var en=b(ot,be.props.children);return en.return=Se,en._debugSource=be._source,en._debugOwner=be._owner,en}}else if(ot.elementType===Ut||$$(ot,be)||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===Pt&&BA(Ut)===ot.type){p(Se,ot.sibling);var Xn=b(ot,be.props);return Xn.ref=Ry(Se,ot,be),Xn.return=Se,Xn._debugSource=be._source,Xn._debugOwner=be._owner,Xn}p(Se,ot);break}else s(Se,ot);ot=ot.sibling}if(be.type===Ii){var On=gf(be.props.children,Se.mode,Ge,be.key);return On.return=Se,On}else{var ui=Ak(be,Se.mode,Ge);return ui.ref=Ry(Se,Me,be),ui.return=Se,ui}}function xn(Se,Me,be,Ge){for(var dt=be.key,ot=Me;ot!==null;){if(ot.key===dt)if(ot.tag===S&&ot.stateNode.containerInfo===be.containerInfo&&ot.stateNode.implementation===be.implementation){p(Se,ot.sibling);var Ut=b(ot,be.children||[]);return Ut.return=Se,Ut}else{p(Se,ot);break}else s(Se,ot);ot=ot.sibling}var en=Ok(be,Se.mode,Ge);return en.return=Se,en}function mn(Se,Me,be,Ge){var dt=typeof be=="object"&&be!==null&&be.type===Ii&&be.key===null;if(dt&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case Ms:return $(Tt(Se,Me,be,Ge));case vi:return $(xn(Se,Me,be,Ge));case Pt:var ot=be._payload,Ut=be._init;return mn(Se,Me,Ut(ot),Ge)}if(yn(be))return Re(Se,Me,be,Ge);if(as(be))return ut(Se,Me,be,Ge);Iw(Se,be)}return typeof be=="string"&&be!==""||typeof be=="number"?$(At(Se,Me,""+be,Ge)):(typeof be=="function"&&Rw(Se),p(Se,Me))}return mn}var Ag=HA(!0),VA=HA(!1);function J9(i,s){if(i!==null&&s.child!==i.child)throw new Error("Resuming work not yet implemented.");if(s.child!==null){var p=s.child,m=Hh(p,p.pendingProps);for(s.child=m,m.return=s;p.sibling!==null;)p=p.sibling,m=m.sibling=Hh(p,p.pendingProps),m.return=s;m.sibling=null}}function eU(i,s){for(var p=i.child;p!==null;)IH(p,s),p=p.sibling}var My={},sf=ef(My),Ay=ef(My),Mw=ef(My);function Aw(i){if(i===My)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return i}function KA(){var i=Aw(Mw.current);return i}function aT(i,s){Bo(Mw,s,i),Bo(Ay,i,i),Bo(sf,My,i);var p=pF(s);Uo(sf,i),Bo(sf,p,i)}function $g(i){Uo(sf,i),Uo(Ay,i),Uo(Mw,i)}function lT(){var i=Aw(sf.current);return i}function YA(i){Aw(Mw.current);var s=Aw(sf.current),p=gF(s,i.type);s!==p&&(Bo(Ay,i,i),Bo(sf,p,i))}function cT(i){Ay.current===i&&(Uo(sf,i),Uo(Ay,i))}var tU=0,WA=1,GA=1,$y=2,Dl=ef(tU);function uT(i,s){return(i&s)!==0}function Og(i){return i&WA}function dT(i,s){return i&WA|s}function nU(i,s){return i|s}function af(i,s){Bo(Dl,s,i)}function Dg(i){Uo(Dl,i)}function rU(i,s){var p=i.memoizedState;return p!==null?p.dehydrated!==null:(i.memoizedProps,!0)}function $w(i){for(var s=i;s!==null;){if(s.tag===D){var p=s.memoizedState;if(p!==null){var m=p.dehydrated;if(m===null||iA(m)||v_(m))return s}}else if(s.tag===ie&&s.memoizedProps.revealOrder!==void 0){var b=(s.flags&Kt)!==Rt;if(b)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)return null;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Gs=0,Oi=1,Ac=2,Di=4,go=8,fT=[];function hT(){for(var i=0;i<fT.length;i++){var s=fT[i];s._workInProgressVersionPrimary=null}fT.length=0}function iU(i,s){var p=s._getVersion,m=p(s._source);i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,m]:i.mutableSourceEagerHydrationData.push(s,m)}var ct=e.ReactCurrentDispatcher,Oy=e.ReactCurrentBatchConfig,pT,Lg;pT=new Set;var Lh=$e,Gn=null,Li=null,ji=null,Ow=!1,Dy=!1,Ly=0,oU=0,sU=25,Le=null,Za=null,lf=-1,gT=!1;function Fn(){{var i=Le;Za===null?Za=[i]:Za.push(i)}}function rt(){{var i=Le;Za!==null&&(lf++,Za[lf]!==i&&aU(i))}}function jg(i){i!=null&&!yn(i)&&l("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",Le,typeof i)}function aU(i){{var s=Vt(Gn);if(!pT.has(s)&&(pT.add(s),Za!==null)){for(var p="",m=30,b=0;b<=lf;b++){for(var P=Za[b],$=b===lf?i:P,F=b+1+". "+P;F.length<m;)F+=" ";F+=$+`
`,p+=F}l(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,s,p)}}}function Ho(){throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function mT(i,s){if(gT)return!1;if(s===null)return l("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",Le),!1;i.length!==s.length&&l(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,Le,"["+s.join(", ")+"]","["+i.join(", ")+"]");for(var p=0;p<s.length&&p<i.length;p++)if(!mt(i[p],s[p]))return!1;return!0}function Ng(i,s,p,m,b,P){Lh=P,Gn=s,Za=i!==null?i._debugHookTypes:null,lf=-1,gT=i!==null&&i.type!==s.type,s.memoizedState=null,s.updateQueue=null,s.lanes=$e,i!==null&&i.memoizedState!==null?ct.current=m3:Za!==null?ct.current=g3:ct.current=p3;var $=p(m,b);if(Dy){var F=0;do{if(Dy=!1,Ly=0,F>=sU)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");F+=1,gT=!1,Li=null,ji=null,s.updateQueue=null,lf=-1,ct.current=v3,$=p(m,b)}while(Dy)}ct.current=Ww,s._debugHookTypes=Za;var H=Li!==null&&Li.next!==null;if(Lh=$e,Gn=null,Li=null,ji=null,Le=null,Za=null,lf=-1,i!==null&&(i.flags&Mi)!==(s.flags&Mi)&&(i.mode&cn)!==Ot&&l("Internal React error: Expected static flag was missing. Please notify the React team."),Ow=!1,H)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return $}function zg(){var i=Ly!==0;return Ly=0,i}function XA(i,s,p){s.updateQueue=i.updateQueue,(s.mode&Fs)!==Ot?s.flags&=~(mu|Do|Er|sn):s.flags&=~(Er|sn),i.lanes=jd(i.lanes,p)}function qA(){if(ct.current=Ww,Ow){for(var i=Gn.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Ow=!1}Lh=$e,Gn=null,Li=null,ji=null,Za=null,lf=-1,Le=null,c3=!1,Dy=!1,Ly=0}function $c(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ji===null?Gn.memoizedState=ji=i:ji=ji.next=i,ji}function Ja(){var i;if(Li===null){var s=Gn.alternate;s!==null?i=s.memoizedState:i=null}else i=Li.next;var p;if(ji===null?p=Gn.memoizedState:p=ji.next,p!==null)ji=p,p=ji.next,Li=i;else{if(i===null)throw new Error("Rendered more hooks than during the previous render.");Li=i;var m={memoizedState:Li.memoizedState,baseState:Li.baseState,baseQueue:Li.baseQueue,queue:Li.queue,next:null};ji===null?Gn.memoizedState=ji=m:ji=ji.next=m}return ji}function QA(){return{lastEffect:null,stores:null}}function vT(i,s){return typeof s=="function"?s(i):s}function yT(i,s,p){var m=$c(),b;p!==void 0?b=p(s):b=s,m.memoizedState=m.baseState=b;var P={pending:null,interleaved:null,lanes:$e,dispatch:null,lastRenderedReducer:i,lastRenderedState:b};m.queue=P;var $=P.dispatch=dU.bind(null,Gn,P);return[m.memoizedState,$]}function ST(i,s,p){var m=Ja(),b=m.queue;if(b===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");b.lastRenderedReducer=i;var P=Li,$=P.baseQueue,F=b.pending;if(F!==null){if($!==null){var H=$.next,W=F.next;$.next=W,F.next=H}P.baseQueue!==$&&l("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),P.baseQueue=$=F,b.pending=null}if($!==null){var G=$.next,fe=P.baseState,le=null,Te=null,ke=null,Re=G;do{var ut=Re.lane;if(Tu(Lh,ut)){if(ke!==null){var Tt={lane:bn,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};ke=ke.next=Tt}if(Re.hasEagerState)fe=Re.eagerState;else{var xn=Re.action;fe=i(fe,xn)}}else{var At={lane:ut,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};ke===null?(Te=ke=At,le=fe):ke=ke.next=At,Gn.lanes=an(Gn.lanes,ut),tS(ut)}Re=Re.next}while(Re!==null&&Re!==G);ke===null?le=fe:ke.next=Te,mt(fe,m.memoizedState)||Hy(),m.memoizedState=fe,m.baseState=le,m.baseQueue=ke,b.lastRenderedState=fe}var mn=b.interleaved;if(mn!==null){var Se=mn;do{var Me=Se.lane;Gn.lanes=an(Gn.lanes,Me),tS(Me),Se=Se.next}while(Se!==mn)}else $===null&&(b.lanes=$e);var be=b.dispatch;return[m.memoizedState,be]}function bT(i,s,p){var m=Ja(),b=m.queue;if(b===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");b.lastRenderedReducer=i;var P=b.dispatch,$=b.pending,F=m.memoizedState;if($!==null){b.pending=null;var H=$.next,W=H;do{var G=W.action;F=i(F,G),W=W.next}while(W!==H);mt(F,m.memoizedState)||Hy(),m.memoizedState=F,m.baseQueue===null&&(m.baseState=F),b.lastRenderedState=F}return[F,P]}function Wme(i,s,p){}function Gme(i,s,p){}function wT(i,s,p){var m=Gn,b=$c(),P,$=po();if($){if(p===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");P=p(),Lg||P!==p()&&(l("The result of getServerSnapshot should be cached to avoid an infinite loop"),Lg=!0)}else{if(P=s(),!Lg){var F=s();mt(P,F)||(l("The result of getSnapshot should be cached to avoid an infinite loop"),Lg=!0)}var H=dx();if(H===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");hh(H,Lh)||ZA(m,s,P)}b.memoizedState=P;var W={value:P,getSnapshot:s};return b.queue=W,zw(e3.bind(null,m,W,i),[i]),m.flags|=Er,jy(Oi|go,JA.bind(null,m,W,P,s),void 0,null),P}function Dw(i,s,p){var m=Gn,b=Ja(),P=s();if(!Lg){var $=s();mt(P,$)||(l("The result of getSnapshot should be cached to avoid an infinite loop"),Lg=!0)}var F=b.memoizedState,H=!mt(F,P);H&&(b.memoizedState=P,Hy());var W=b.queue;if(zy(e3.bind(null,m,W,i),[i]),W.getSnapshot!==s||H||ji!==null&&ji.memoizedState.tag&Oi){m.flags|=Er,jy(Oi|go,JA.bind(null,m,W,P,s),void 0,null);var G=dx();if(G===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");hh(G,Lh)||ZA(m,s,P)}return P}function ZA(i,s,p){i.flags|=ih;var m={getSnapshot:s,value:p},b=Gn.updateQueue;if(b===null)b=QA(),Gn.updateQueue=b,b.stores=[m];else{var P=b.stores;P===null?b.stores=[m]:P.push(m)}}function JA(i,s,p,m){s.value=p,s.getSnapshot=m,t3(s)&&n3(i)}function e3(i,s,p){var m=function(){t3(s)&&n3(i)};return p(m)}function t3(i){var s=i.getSnapshot,p=i.value;try{var m=s();return!mt(p,m)}catch{return!0}}function n3(i){var s=Ws(i,jt);s!==null&&Ui(s,i,jt,rr)}function Lw(i){var s=$c();typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i;var p={pending:null,interleaved:null,lanes:$e,dispatch:null,lastRenderedReducer:vT,lastRenderedState:i};s.queue=p;var m=p.dispatch=fU.bind(null,Gn,p);return[s.memoizedState,m]}function xT(i){return ST(vT)}function CT(i){return bT(vT)}function jy(i,s,p,m){var b={tag:i,create:s,destroy:p,deps:m,next:null},P=Gn.updateQueue;if(P===null)P=QA(),Gn.updateQueue=P,P.lastEffect=b.next=b;else{var $=P.lastEffect;if($===null)P.lastEffect=b.next=b;else{var F=$.next;$.next=b,b.next=F,P.lastEffect=b}}return b}function ET(i){var s=$c();{var p={current:i};return s.memoizedState=p,p}}function jw(i){var s=Ja();return s.memoizedState}function Ny(i,s,p,m){var b=$c(),P=m===void 0?null:m;Gn.flags|=i,b.memoizedState=jy(Oi|s,p,void 0,P)}function Nw(i,s,p,m){var b=Ja(),P=m===void 0?null:m,$=void 0;if(Li!==null){var F=Li.memoizedState;if($=F.destroy,P!==null){var H=F.deps;if(mT(P,H)){b.memoizedState=jy(s,p,$,P);return}}}Gn.flags|=i,b.memoizedState=jy(Oi|s,p,$,P)}function zw(i,s){return(Gn.mode&Fs)!==Ot?Ny(mu|Er|gc,go,i,s):Ny(Er|gc,go,i,s)}function zy(i,s){return Nw(Er,go,i,s)}function _T(i,s){return Ny(sn,Ac,i,s)}function Fw(i,s){return Nw(sn,Ac,i,s)}function TT(i,s){var p=sn;return p|=Oo,(Gn.mode&Fs)!==Ot&&(p|=Do),Ny(p,Di,i,s)}function Uw(i,s){return Nw(sn,Di,i,s)}function r3(i,s){if(typeof s=="function"){var p=s,m=i();return p(m),function(){p(null)}}else if(s!=null){var b=s;b.hasOwnProperty("current")||l("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(b).join(", ")+"}");var P=i();return b.current=P,function(){b.current=null}}}function kT(i,s,p){typeof s!="function"&&l("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",s!==null?typeof s:"null");var m=p!=null?p.concat([i]):null,b=sn;return b|=Oo,(Gn.mode&Fs)!==Ot&&(b|=Do),Ny(b,Di,r3.bind(null,s,i),m)}function Bw(i,s,p){typeof s!="function"&&l("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",s!==null?typeof s:"null");var m=p!=null?p.concat([i]):null;return Nw(sn,Di,r3.bind(null,s,i),m)}function lU(i,s){}var Hw=lU;function PT(i,s){var p=$c(),m=s===void 0?null:s;return p.memoizedState=[i,m],i}function Vw(i,s){var p=Ja(),m=s===void 0?null:s,b=p.memoizedState;if(b!==null&&m!==null){var P=b[1];if(mT(m,P))return b[0]}return p.memoizedState=[i,m],i}function IT(i,s){var p=$c(),m=s===void 0?null:s,b=i();return p.memoizedState=[b,m],b}function Kw(i,s){var p=Ja(),m=s===void 0?null:s,b=p.memoizedState;if(b!==null&&m!==null){var P=b[1];if(mT(m,P))return b[0]}var $=i();return p.memoizedState=[$,m],$}function RT(i){var s=$c();return s.memoizedState=i,i}function i3(i){var s=Ja(),p=Li,m=p.memoizedState;return s3(s,m,i)}function o3(i){var s=Ja();if(Li===null)return s.memoizedState=i,i;var p=Li.memoizedState;return s3(s,p,i)}function s3(i,s,p){var m=!LE(Lh);if(m){if(!mt(p,s)){var b=Fv();Gn.lanes=an(Gn.lanes,b),tS(b),i.baseState=!0}return s}else return i.baseState&&(i.baseState=!1,Hy()),i.memoizedState=p,p}function cU(i,s,p){var m=Bs();ai(Gi(m,$i)),i(!0);var b=Oy.transition;Oy.transition={};var P=Oy.transition;Oy.transition._updatedFibers=new Set;try{i(!1),s()}finally{if(ai(m),Oy.transition=b,b===null&&P._updatedFibers){var $=P._updatedFibers.size;$>10&&a("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),P._updatedFibers.clear()}}}function MT(){var i=Lw(!1),s=i[0],p=i[1],m=cU.bind(null,p),b=$c();return b.memoizedState=m,[s,m]}function a3(){var i=xT(),s=i[0],p=Ja(),m=p.memoizedState;return[s,m]}function l3(){var i=CT(),s=i[0],p=Ja(),m=p.memoizedState;return[s,m]}var c3=!1;function uU(){return c3}function AT(){var i=$c(),s=dx(),p=s.identifierPrefix,m;if(po()){var b=E9();m=":"+p+"R"+b;var P=Ly++;P>0&&(m+="H"+P.toString(32)),m+=":"}else{var $=oU++;m=":"+p+"r"+$.toString(32)+":"}return i.memoizedState=m,m}function Yw(){var i=Ja(),s=i.memoizedState;return s}function dU(i,s,p){typeof arguments[3]=="function"&&l("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var m=hf(i),b={lane:m,action:p,hasEagerState:!1,eagerState:null,next:null};if(u3(i))d3(s,b);else{var P=PA(i,s,b,m);if(P!==null){var $=Ss();Ui(P,i,m,$),f3(P,s,m)}}h3(i,m)}function fU(i,s,p){typeof arguments[3]=="function"&&l("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var m=hf(i),b={lane:m,action:p,hasEagerState:!1,eagerState:null,next:null};if(u3(i))d3(s,b);else{var P=i.alternate;if(i.lanes===$e&&(P===null||P.lanes===$e)){var $=s.lastRenderedReducer;if($!==null){var F;F=ct.current,ct.current=Ll;try{var H=s.lastRenderedState,W=$(H,p);if(b.hasEagerState=!0,b.eagerState=W,mt(W,H)){V9(i,s,b,m);return}}catch{}finally{ct.current=F}}}var G=PA(i,s,b,m);if(G!==null){var fe=Ss();Ui(G,i,m,fe),f3(G,s,m)}}h3(i,m)}function u3(i){var s=i.alternate;return i===Gn||s!==null&&s===Gn}function d3(i,s){Dy=Ow=!0;var p=i.pending;p===null?s.next=s:(s.next=p.next,p.next=s),i.pending=s}function f3(i,s,p){if(zv(p)){var m=s.lanes;m=Uv(m,i.pendingLanes);var b=an(m,p);s.lanes=b,Nd(i,b)}}function h3(i,s,p){wc(i,s)}var Ww={readContext:ki,useCallback:Ho,useContext:Ho,useEffect:Ho,useImperativeHandle:Ho,useInsertionEffect:Ho,useLayoutEffect:Ho,useMemo:Ho,useReducer:Ho,useRef:Ho,useState:Ho,useDebugValue:Ho,useDeferredValue:Ho,useTransition:Ho,useMutableSource:Ho,useSyncExternalStore:Ho,useId:Ho,unstable_isNewReconciler:me},p3=null,g3=null,m3=null,v3=null,Oc=null,Ll=null,Gw=null;{var $T=function(){l("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},Qt=function(){l("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};p3={readContext:function(i){return ki(i)},useCallback:function(i,s){return Le="useCallback",Fn(),jg(s),PT(i,s)},useContext:function(i){return Le="useContext",Fn(),ki(i)},useEffect:function(i,s){return Le="useEffect",Fn(),jg(s),zw(i,s)},useImperativeHandle:function(i,s,p){return Le="useImperativeHandle",Fn(),jg(p),kT(i,s,p)},useInsertionEffect:function(i,s){return Le="useInsertionEffect",Fn(),jg(s),_T(i,s)},useLayoutEffect:function(i,s){return Le="useLayoutEffect",Fn(),jg(s),TT(i,s)},useMemo:function(i,s){Le="useMemo",Fn(),jg(s);var p=ct.current;ct.current=Oc;try{return IT(i,s)}finally{ct.current=p}},useReducer:function(i,s,p){Le="useReducer",Fn();var m=ct.current;ct.current=Oc;try{return yT(i,s,p)}finally{ct.current=m}},useRef:function(i){return Le="useRef",Fn(),ET(i)},useState:function(i){Le="useState",Fn();var s=ct.current;ct.current=Oc;try{return Lw(i)}finally{ct.current=s}},useDebugValue:function(i,s){return Le="useDebugValue",Fn(),void 0},useDeferredValue:function(i){return Le="useDeferredValue",Fn(),RT(i)},useTransition:function(){return Le="useTransition",Fn(),MT()},useMutableSource:function(i,s,p){return Le="useMutableSource",Fn(),void 0},useSyncExternalStore:function(i,s,p){return Le="useSyncExternalStore",Fn(),wT(i,s,p)},useId:function(){return Le="useId",Fn(),AT()},unstable_isNewReconciler:me},g3={readContext:function(i){return ki(i)},useCallback:function(i,s){return Le="useCallback",rt(),PT(i,s)},useContext:function(i){return Le="useContext",rt(),ki(i)},useEffect:function(i,s){return Le="useEffect",rt(),zw(i,s)},useImperativeHandle:function(i,s,p){return Le="useImperativeHandle",rt(),kT(i,s,p)},useInsertionEffect:function(i,s){return Le="useInsertionEffect",rt(),_T(i,s)},useLayoutEffect:function(i,s){return Le="useLayoutEffect",rt(),TT(i,s)},useMemo:function(i,s){Le="useMemo",rt();var p=ct.current;ct.current=Oc;try{return IT(i,s)}finally{ct.current=p}},useReducer:function(i,s,p){Le="useReducer",rt();var m=ct.current;ct.current=Oc;try{return yT(i,s,p)}finally{ct.current=m}},useRef:function(i){return Le="useRef",rt(),ET(i)},useState:function(i){Le="useState",rt();var s=ct.current;ct.current=Oc;try{return Lw(i)}finally{ct.current=s}},useDebugValue:function(i,s){return Le="useDebugValue",rt(),void 0},useDeferredValue:function(i){return Le="useDeferredValue",rt(),RT(i)},useTransition:function(){return Le="useTransition",rt(),MT()},useMutableSource:function(i,s,p){return Le="useMutableSource",rt(),void 0},useSyncExternalStore:function(i,s,p){return Le="useSyncExternalStore",rt(),wT(i,s,p)},useId:function(){return Le="useId",rt(),AT()},unstable_isNewReconciler:me},m3={readContext:function(i){return ki(i)},useCallback:function(i,s){return Le="useCallback",rt(),Vw(i,s)},useContext:function(i){return Le="useContext",rt(),ki(i)},useEffect:function(i,s){return Le="useEffect",rt(),zy(i,s)},useImperativeHandle:function(i,s,p){return Le="useImperativeHandle",rt(),Bw(i,s,p)},useInsertionEffect:function(i,s){return Le="useInsertionEffect",rt(),Fw(i,s)},useLayoutEffect:function(i,s){return Le="useLayoutEffect",rt(),Uw(i,s)},useMemo:function(i,s){Le="useMemo",rt();var p=ct.current;ct.current=Ll;try{return Kw(i,s)}finally{ct.current=p}},useReducer:function(i,s,p){Le="useReducer",rt();var m=ct.current;ct.current=Ll;try{return ST(i,s,p)}finally{ct.current=m}},useRef:function(i){return Le="useRef",rt(),jw()},useState:function(i){Le="useState",rt();var s=ct.current;ct.current=Ll;try{return xT(i)}finally{ct.current=s}},useDebugValue:function(i,s){return Le="useDebugValue",rt(),Hw()},useDeferredValue:function(i){return Le="useDeferredValue",rt(),i3(i)},useTransition:function(){return Le="useTransition",rt(),a3()},useMutableSource:function(i,s,p){return Le="useMutableSource",rt(),void 0},useSyncExternalStore:function(i,s,p){return Le="useSyncExternalStore",rt(),Dw(i,s)},useId:function(){return Le="useId",rt(),Yw()},unstable_isNewReconciler:me},v3={readContext:function(i){return ki(i)},useCallback:function(i,s){return Le="useCallback",rt(),Vw(i,s)},useContext:function(i){return Le="useContext",rt(),ki(i)},useEffect:function(i,s){return Le="useEffect",rt(),zy(i,s)},useImperativeHandle:function(i,s,p){return Le="useImperativeHandle",rt(),Bw(i,s,p)},useInsertionEffect:function(i,s){return Le="useInsertionEffect",rt(),Fw(i,s)},useLayoutEffect:function(i,s){return Le="useLayoutEffect",rt(),Uw(i,s)},useMemo:function(i,s){Le="useMemo",rt();var p=ct.current;ct.current=Gw;try{return Kw(i,s)}finally{ct.current=p}},useReducer:function(i,s,p){Le="useReducer",rt();var m=ct.current;ct.current=Gw;try{return bT(i,s,p)}finally{ct.current=m}},useRef:function(i){return Le="useRef",rt(),jw()},useState:function(i){Le="useState",rt();var s=ct.current;ct.current=Gw;try{return CT(i)}finally{ct.current=s}},useDebugValue:function(i,s){return Le="useDebugValue",rt(),Hw()},useDeferredValue:function(i){return Le="useDeferredValue",rt(),o3(i)},useTransition:function(){return Le="useTransition",rt(),l3()},useMutableSource:function(i,s,p){return Le="useMutableSource",rt(),void 0},useSyncExternalStore:function(i,s,p){return Le="useSyncExternalStore",rt(),Dw(i,s)},useId:function(){return Le="useId",rt(),Yw()},unstable_isNewReconciler:me},Oc={readContext:function(i){return $T(),ki(i)},useCallback:function(i,s){return Le="useCallback",Qt(),Fn(),PT(i,s)},useContext:function(i){return Le="useContext",Qt(),Fn(),ki(i)},useEffect:function(i,s){return Le="useEffect",Qt(),Fn(),zw(i,s)},useImperativeHandle:function(i,s,p){return Le="useImperativeHandle",Qt(),Fn(),kT(i,s,p)},useInsertionEffect:function(i,s){return Le="useInsertionEffect",Qt(),Fn(),_T(i,s)},useLayoutEffect:function(i,s){return Le="useLayoutEffect",Qt(),Fn(),TT(i,s)},useMemo:function(i,s){Le="useMemo",Qt(),Fn();var p=ct.current;ct.current=Oc;try{return IT(i,s)}finally{ct.current=p}},useReducer:function(i,s,p){Le="useReducer",Qt(),Fn();var m=ct.current;ct.current=Oc;try{return yT(i,s,p)}finally{ct.current=m}},useRef:function(i){return Le="useRef",Qt(),Fn(),ET(i)},useState:function(i){Le="useState",Qt(),Fn();var s=ct.current;ct.current=Oc;try{return Lw(i)}finally{ct.current=s}},useDebugValue:function(i,s){return Le="useDebugValue",Qt(),Fn(),void 0},useDeferredValue:function(i){return Le="useDeferredValue",Qt(),Fn(),RT(i)},useTransition:function(){return Le="useTransition",Qt(),Fn(),MT()},useMutableSource:function(i,s,p){return Le="useMutableSource",Qt(),Fn(),void 0},useSyncExternalStore:function(i,s,p){return Le="useSyncExternalStore",Qt(),Fn(),wT(i,s,p)},useId:function(){return Le="useId",Qt(),Fn(),AT()},unstable_isNewReconciler:me},Ll={readContext:function(i){return $T(),ki(i)},useCallback:function(i,s){return Le="useCallback",Qt(),rt(),Vw(i,s)},useContext:function(i){return Le="useContext",Qt(),rt(),ki(i)},useEffect:function(i,s){return Le="useEffect",Qt(),rt(),zy(i,s)},useImperativeHandle:function(i,s,p){return Le="useImperativeHandle",Qt(),rt(),Bw(i,s,p)},useInsertionEffect:function(i,s){return Le="useInsertionEffect",Qt(),rt(),Fw(i,s)},useLayoutEffect:function(i,s){return Le="useLayoutEffect",Qt(),rt(),Uw(i,s)},useMemo:function(i,s){Le="useMemo",Qt(),rt();var p=ct.current;ct.current=Ll;try{return Kw(i,s)}finally{ct.current=p}},useReducer:function(i,s,p){Le="useReducer",Qt(),rt();var m=ct.current;ct.current=Ll;try{return ST(i,s,p)}finally{ct.current=m}},useRef:function(i){return Le="useRef",Qt(),rt(),jw()},useState:function(i){Le="useState",Qt(),rt();var s=ct.current;ct.current=Ll;try{return xT(i)}finally{ct.current=s}},useDebugValue:function(i,s){return Le="useDebugValue",Qt(),rt(),Hw()},useDeferredValue:function(i){return Le="useDeferredValue",Qt(),rt(),i3(i)},useTransition:function(){return Le="useTransition",Qt(),rt(),a3()},useMutableSource:function(i,s,p){return Le="useMutableSource",Qt(),rt(),void 0},useSyncExternalStore:function(i,s,p){return Le="useSyncExternalStore",Qt(),rt(),Dw(i,s)},useId:function(){return Le="useId",Qt(),rt(),Yw()},unstable_isNewReconciler:me},Gw={readContext:function(i){return $T(),ki(i)},useCallback:function(i,s){return Le="useCallback",Qt(),rt(),Vw(i,s)},useContext:function(i){return Le="useContext",Qt(),rt(),ki(i)},useEffect:function(i,s){return Le="useEffect",Qt(),rt(),zy(i,s)},useImperativeHandle:function(i,s,p){return Le="useImperativeHandle",Qt(),rt(),Bw(i,s,p)},useInsertionEffect:function(i,s){return Le="useInsertionEffect",Qt(),rt(),Fw(i,s)},useLayoutEffect:function(i,s){return Le="useLayoutEffect",Qt(),rt(),Uw(i,s)},useMemo:function(i,s){Le="useMemo",Qt(),rt();var p=ct.current;ct.current=Ll;try{return Kw(i,s)}finally{ct.current=p}},useReducer:function(i,s,p){Le="useReducer",Qt(),rt();var m=ct.current;ct.current=Ll;try{return bT(i,s,p)}finally{ct.current=m}},useRef:function(i){return Le="useRef",Qt(),rt(),jw()},useState:function(i){Le="useState",Qt(),rt();var s=ct.current;ct.current=Ll;try{return CT(i)}finally{ct.current=s}},useDebugValue:function(i,s){return Le="useDebugValue",Qt(),rt(),Hw()},useDeferredValue:function(i){return Le="useDeferredValue",Qt(),rt(),o3(i)},useTransition:function(){return Le="useTransition",Qt(),rt(),l3()},useMutableSource:function(i,s,p){return Le="useMutableSource",Qt(),rt(),void 0},useSyncExternalStore:function(i,s,p){return Le="useSyncExternalStore",Qt(),rt(),Dw(i,s)},useId:function(){return Le="useId",Qt(),rt(),Yw()},unstable_isNewReconciler:me}}var cf=n.unstable_now,y3=0,Xw=-1,Fy=-1,qw=-1,OT=!1,Qw=!1;function S3(){return OT}function hU(){Qw=!0}function pU(){OT=!1,Qw=!1}function gU(){OT=Qw,Qw=!1}function b3(){return y3}function w3(){y3=cf()}function DT(i){Fy=cf(),i.actualStartTime<0&&(i.actualStartTime=cf())}function x3(i){Fy=-1}function Zw(i,s){if(Fy>=0){var p=cf()-Fy;i.actualDuration+=p,s&&(i.selfBaseDuration=p),Fy=-1}}function Dc(i){if(Xw>=0){var s=cf()-Xw;Xw=-1;for(var p=i.return;p!==null;){switch(p.tag){case v:var m=p.stateNode;m.effectDuration+=s;return;case O:var b=p.stateNode;b.effectDuration+=s;return}p=p.return}}}function LT(i){if(qw>=0){var s=cf()-qw;qw=-1;for(var p=i.return;p!==null;){switch(p.tag){case v:var m=p.stateNode;m!==null&&(m.passiveEffectDuration+=s);return;case O:var b=p.stateNode;b!==null&&(b.passiveEffectDuration+=s);return}p=p.return}}}function Lc(){Xw=cf()}function jT(){qw=cf()}function NT(i){for(var s=i.child;s;)i.actualDuration+=s.actualDuration,s=s.sibling}function jh(i,s){return{value:i,source:s,stack:cs(s),digest:null}}function zT(i,s,p){return{value:i,source:null,stack:p??null,digest:s??null}}function mU(i,s){return!0}function FT(i,s){try{var p=mU(i,s);if(p===!1)return;var m=s.value,b=s.source,P=s.stack,$=P!==null?P:"";if(m!=null&&m._suppressLogging){if(i.tag===h)return;console.error(m)}var F=b?Vt(b):null,H=F?"The above error occurred in the <"+F+"> component:":"The above error occurred in one of your React components:",W;if(i.tag===v)W=`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.`;else{var G=Vt(i)||"Anonymous";W="React will try to recreate this component tree from scratch "+("using the error boundary you provided, "+G+".")}var fe=H+`
`+$+`

`+(""+W);console.error(fe)}catch(le){setTimeout(function(){throw le})}}var vU=typeof WeakMap=="function"?WeakMap:Map;function C3(i,s,p){var m=Bu(rr,p);m.tag=F_,m.payload={element:null};var b=s.value;return m.callback=function(){cH(b),FT(i,s)},m}function UT(i,s,p){var m=Bu(rr,p);m.tag=F_;var b=i.type.getDerivedStateFromError;if(typeof b=="function"){var P=s.value;m.payload=function(){return b(P)},m.callback=function(){O$(i),FT(i,s)}}var $=i.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(m.callback=function(){O$(i),FT(i,s),typeof b!="function"&&aH(this);var H=s.value,W=s.stack;this.componentDidCatch(H,{componentStack:W!==null?W:""}),typeof b!="function"&&(Fo(i.lanes,jt)||l("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",Vt(i)||"Unknown"))}),m}function E3(i,s,p){var m=i.pingCache,b;if(m===null?(m=i.pingCache=new vU,b=new Set,m.set(s,b)):(b=m.get(s),b===void 0&&(b=new Set,m.set(s,b))),!b.has(p)){b.add(p);var P=uH.bind(null,i,s,p);Ai&&nS(i,p),s.then(P,P)}}function yU(i,s,p,m){var b=i.updateQueue;if(b===null){var P=new Set;P.add(p),i.updateQueue=P}else b.add(p)}function SU(i,s){var p=i.tag;if((i.mode&cn)===Ot&&(p===d||p===A||p===U)){var m=i.alternate;m?(i.updateQueue=m.updateQueue,i.memoizedState=m.memoizedState,i.lanes=m.lanes):(i.updateQueue=null,i.memoizedState=null)}}function _3(i){var s=i;do{if(s.tag===D&&rU(s))return s;s=s.return}while(s!==null);return null}function T3(i,s,p,m,b){if((i.mode&cn)===Ot){if(i===s)i.flags|=xi;else{if(i.flags|=Kt,p.flags|=oh,p.flags&=~(Ep|ds),p.tag===h){var P=p.alternate;if(P===null)p.tag=q;else{var $=Bu(rr,jt);$.tag=xw,of(p,$,jt)}}p.lanes=an(p.lanes,jt)}return i}return i.flags|=xi,i.lanes=b,i}function bU(i,s,p,m,b){if(p.flags|=ds,Ai&&nS(i,b),m!==null&&typeof m=="object"&&typeof m.then=="function"){var P=m;SU(p),po()&&p.mode&cn&&mA();var $=_3(s);if($!==null){$.flags&=~Fr,T3($,s,p,i,b),$.mode&cn&&E3(i,P,b),yU($,i,P);return}else{if(!Ld(b)){E3(i,P,b),bk();return}var F=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");m=F}}else if(po()&&p.mode&cn){mA();var H=_3(s);if(H!==null){(H.flags&xi)===Rt&&(H.flags|=Fr),T3(H,s,p,i,b),$_(jh(m,p));return}}m=jh(m,p),JB(m);var W=s;do{switch(W.tag){case v:{var G=m;W.flags|=xi;var fe=si(b);W.lanes=an(W.lanes,fe);var le=C3(W,G,fe);H_(W,le);return}case h:var Te=m,ke=W.type,Re=W.stateNode;if((W.flags&Kt)===Rt&&(typeof ke.getDerivedStateFromError=="function"||Re!==null&&typeof Re.componentDidCatch=="function"&&!_$(Re))){W.flags|=xi;var ut=si(b);W.lanes=an(W.lanes,ut);var At=UT(W,Te,ut);H_(W,At);return}break}W=W.return}while(W!==null)}function wU(){return null}var Uy=e.ReactCurrentOwner,jl=!1,BT,By,HT,VT,KT,Nh,YT,Jw;BT={},By={},HT={},VT={},KT={},Nh=!1,YT={},Jw={};function vs(i,s,p,m){i===null?s.child=VA(s,null,p,m):s.child=Ag(s,i.child,p,m)}function xU(i,s,p,m){s.child=Ag(s,i.child,null,m),s.child=Ag(s,null,p,m)}function k3(i,s,p,m,b){if(s.type!==s.elementType){var P=p.propTypes;P&&Ml(P,m,"prop",on(p))}var $=p.render,F=s.ref,H,W;Mg(s,b),bc(s);{if(Uy.current=s,Ki(!0),H=Ng(i,s,$,m,F,b),W=zg(),s.mode&$r){oi(!0);try{H=Ng(i,s,$,m,F,b),W=zg()}finally{oi(!1)}}Ki(!1)}return vu(),i!==null&&!jl?(XA(i,s,b),Hu(i,s,b)):(po()&&W&&k_(s),s.flags|=hc,vs(i,s,H,b),s.child)}function P3(i,s,p,m,b){if(i===null){var P=p.type;if(kH(P)&&p.compare===null&&p.defaultProps===void 0){var $=P;return $=Wg(P),s.tag=U,s.type=$,XT(s,P),I3(i,s,$,m,b)}{var F=P.propTypes;F&&Ml(F,m,"prop",on(P))}var H=Mk(p.type,null,m,s,s.mode,b);return H.ref=s.ref,H.return=s,s.child=H,H}{var W=p.type,G=W.propTypes;G&&Ml(G,m,"prop",on(W))}var fe=i.child,le=tk(i,b);if(!le){var Te=fe.memoizedProps,ke=p.compare;if(ke=ke!==null?ke:It,ke(Te,m)&&i.ref===s.ref)return Hu(i,s,b)}s.flags|=hc;var Re=Hh(fe,m);return Re.ref=s.ref,Re.return=s,s.child=Re,Re}function I3(i,s,p,m,b){if(s.type!==s.elementType){var P=s.elementType;if(P.$$typeof===Pt){var $=P,F=$._payload,H=$._init;try{P=H(F)}catch{P=null}var W=P&&P.propTypes;W&&Ml(W,m,"prop",on(P))}}if(i!==null){var G=i.memoizedProps;if(It(G,m)&&i.ref===s.ref&&s.type===i.type)if(jl=!1,s.pendingProps=m=G,tk(i,b))(i.flags&oh)!==Rt&&(jl=!0);else return s.lanes=i.lanes,Hu(i,s,b)}return WT(i,s,p,m,b)}function R3(i,s,p){var m=s.pendingProps,b=m.children,P=i!==null?i.memoizedState:null;if(m.mode==="hidden"||V)if((s.mode&cn)===Ot){var $={baseLanes:$e,cachePool:null,transitions:null};s.memoizedState=$,fx(s,p)}else if(Fo(p,zo)){var fe={baseLanes:$e,cachePool:null,transitions:null};s.memoizedState=fe;var le=P!==null?P.baseLanes:p;fx(s,le)}else{var F=null,H;if(P!==null){var W=P.baseLanes;H=an(W,p)}else H=p;s.lanes=s.childLanes=zo;var G={baseLanes:H,cachePool:F,transitions:null};return s.memoizedState=G,s.updateQueue=null,fx(s,H),null}else{var Te;P!==null?(Te=an(P.baseLanes,p),s.memoizedState=null):Te=p,fx(s,Te)}return vs(i,s,b,p),s.child}function CU(i,s,p){var m=s.pendingProps;return vs(i,s,m,p),s.child}function EU(i,s,p){var m=s.pendingProps.children;return vs(i,s,m,p),s.child}function _U(i,s,p){{s.flags|=sn;{var m=s.stateNode;m.effectDuration=0,m.passiveEffectDuration=0}}var b=s.pendingProps,P=b.children;return vs(i,s,P,p),s.child}function M3(i,s){var p=s.ref;(i===null&&p!==null||i!==null&&i.ref!==p)&&(s.flags|=$o,s.flags|=Ev)}function WT(i,s,p,m,b){if(s.type!==s.elementType){var P=p.propTypes;P&&Ml(P,m,"prop",on(p))}var $;{var F=_g(s,p,!0);$=Tg(s,F)}var H,W;Mg(s,b),bc(s);{if(Uy.current=s,Ki(!0),H=Ng(i,s,p,m,$,b),W=zg(),s.mode&$r){oi(!0);try{H=Ng(i,s,p,m,$,b),W=zg()}finally{oi(!1)}}Ki(!1)}return vu(),i!==null&&!jl?(XA(i,s,b),Hu(i,s,b)):(po()&&W&&k_(s),s.flags|=hc,vs(i,s,H,b),s.child)}function A3(i,s,p,m,b){{switch(BH(s)){case!1:{var P=s.stateNode,$=s.type,F=new $(s.memoizedProps,P.context),H=F.state;P.updater.enqueueSetState(P,H,null);break}case!0:{s.flags|=Kt,s.flags|=xi;var W=new Error("Simulated error coming from DevTools"),G=si(b);s.lanes=an(s.lanes,G);var fe=UT(s,jh(W,s),G);H_(s,fe);break}}if(s.type!==s.elementType){var le=p.propTypes;le&&Ml(le,m,"prop",on(p))}}var Te;Mc(p)?(Te=!0,dw(s)):Te=!1,Mg(s,b);var ke=s.stateNode,Re;ke===null?(tx(i,s),zA(s,p,m),tT(s,p,m,b),Re=!0):i===null?Re=Q9(s,p,m,b):Re=Z9(i,s,p,m,b);var ut=GT(i,s,p,Re,Te,b);{var At=s.stateNode;Re&&At.props!==m&&(Nh||l("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",Vt(s)||"a component"),Nh=!0)}return ut}function GT(i,s,p,m,b,P){M3(i,s);var $=(s.flags&Kt)!==Rt;if(!m&&!$)return b&&fA(s,p,!1),Hu(i,s,P);var F=s.stateNode;Uy.current=s;var H;if($&&typeof p.getDerivedStateFromError!="function")H=null,x3();else{bc(s);{if(Ki(!0),H=F.render(),s.mode&$r){oi(!0);try{F.render()}finally{oi(!1)}}Ki(!1)}vu()}return s.flags|=hc,i!==null&&$?xU(i,s,H,P):vs(i,s,H,P),s.memoizedState=F.state,b&&fA(s,p,!0),s.child}function $3(i){var s=i.stateNode;s.pendingContext?uA(i,s.pendingContext,s.pendingContext!==s.context):s.context&&uA(i,s.context,!1),aT(i,s.containerInfo)}function TU(i,s,p){if($3(s),i===null)throw new Error("Should have a current fiber. This is a bug in React.");var m=s.pendingProps,b=s.memoizedState,P=b.element;MA(i,s),Tw(s,m,null,p);var $=s.memoizedState;s.stateNode;var F=$.element;if(b.isDehydrated){var H={element:F,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},W=s.updateQueue;if(W.baseState=H,s.memoizedState=H,s.flags&Fr){var G=jh(new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."),s);return O3(i,s,F,p,G)}else if(F!==P){var fe=jh(new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),s);return O3(i,s,F,p,fe)}else{R9(s);var le=VA(s,null,F,p);s.child=le;for(var Te=le;Te;)Te.flags=Te.flags&~mr|js,Te=Te.sibling}}else{if(Ig(),F===P)return Hu(i,s,p);vs(i,s,F,p)}return s.child}function O3(i,s,p,m,b){return Ig(),$_(b),s.flags|=Fr,vs(i,s,p,m),s.child}function kU(i,s,p){YA(s),i===null&&A_(s);var m=s.type,b=s.pendingProps,P=i!==null?i.memoizedProps:null,$=b.children,F=h_(m,b);return F?$=null:P!==null&&h_(m,P)&&(s.flags|=zn),M3(i,s),vs(i,s,$,p),s.child}function PU(i,s){return i===null&&A_(s),null}function IU(i,s,p,m){tx(i,s);var b=s.pendingProps,P=p,$=P._payload,F=P._init,H=F($);s.type=H;var W=s.tag=PH(H),G=Ol(H,b),fe;switch(W){case d:return XT(s,H),s.type=H=Wg(H),fe=WT(null,s,H,G,m),fe;case h:return s.type=H=_k(H),fe=A3(null,s,H,G,m),fe;case A:return s.type=H=Tk(H),fe=k3(null,s,H,G,m),fe;case z:{if(s.type!==s.elementType){var le=H.propTypes;le&&Ml(le,G,"prop",on(H))}return fe=P3(null,s,H,Ol(H.type,G),m),fe}}var Te="";throw H!==null&&typeof H=="object"&&H.$$typeof===Pt&&(Te=" Did you wrap a component in React.lazy() more than once?"),new Error("Element type is invalid. Received a promise that resolves to: "+H+". "+("Lazy element type must resolve to a class or function."+Te))}function RU(i,s,p,m,b){tx(i,s),s.tag=h;var P;return Mc(p)?(P=!0,dw(s)):P=!1,Mg(s,b),zA(s,p,m),tT(s,p,m,b),GT(null,s,p,!0,P,b)}function MU(i,s,p,m){tx(i,s);var b=s.pendingProps,P;{var $=_g(s,p,!1);P=Tg(s,$)}Mg(s,m);var F,H;bc(s);{if(p.prototype&&typeof p.prototype.render=="function"){var W=on(p)||"Unknown";BT[W]||(l("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",W,W),BT[W]=!0)}s.mode&$r&&$l.recordLegacyContextWarning(s,null),Ki(!0),Uy.current=s,F=Ng(null,s,p,b,P,m),H=zg(),Ki(!1)}if(vu(),s.flags|=hc,typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0){var G=on(p)||"Unknown";By[G]||(l("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",G,G,G),By[G]=!0)}if(typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0){{var fe=on(p)||"Unknown";By[fe]||(l("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",fe,fe,fe),By[fe]=!0)}s.tag=h,s.memoizedState=null,s.updateQueue=null;var le=!1;return Mc(p)?(le=!0,dw(s)):le=!1,s.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,B_(s),NA(s,F),tT(s,p,b,m),GT(null,s,p,!0,le,m)}else{if(s.tag=d,s.mode&$r){oi(!0);try{F=Ng(null,s,p,b,P,m),H=zg()}finally{oi(!1)}}return po()&&H&&k_(s),vs(null,s,F,m),XT(s,p),s.child}}function XT(i,s){{if(s&&s.childContextTypes&&l("%s(...): childContextTypes cannot be defined on a function component.",s.displayName||s.name||"Component"),i.ref!==null){var p="",m=bi();m&&(p+=`

Check the render method of \``+m+"`.");var b=m||"",P=i._debugSource;P&&(b=P.fileName+":"+P.lineNumber),KT[b]||(KT[b]=!0,l("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",p))}if(typeof s.getDerivedStateFromProps=="function"){var $=on(s)||"Unknown";VT[$]||(l("%s: Function components do not support getDerivedStateFromProps.",$),VT[$]=!0)}if(typeof s.contextType=="object"&&s.contextType!==null){var F=on(s)||"Unknown";HT[F]||(l("%s: Function components do not support contextType.",F),HT[F]=!0)}}}var qT={dehydrated:null,treeContext:null,retryLane:bn};function QT(i){return{baseLanes:i,cachePool:wU(),transitions:null}}function AU(i,s){var p=null;return{baseLanes:an(i.baseLanes,s),cachePool:p,transitions:i.transitions}}function $U(i,s,p,m){if(s!==null){var b=s.memoizedState;if(b===null)return!1}return uT(i,$y)}function OU(i,s){return jd(i.childLanes,s)}function D3(i,s,p){var m=s.pendingProps;HH(s)&&(s.flags|=Kt);var b=Dl.current,P=!1,$=(s.flags&Kt)!==Rt;if($||$U(b,i)?(P=!0,s.flags&=~Kt):(i===null||i.memoizedState!==null)&&(b=nU(b,GA)),b=Og(b),af(s,b),i===null){A_(s);var F=s.memoizedState;if(F!==null){var H=F.dehydrated;if(H!==null)return zU(s,H)}var W=m.children,G=m.fallback;if(P){var fe=DU(s,W,G,p),le=s.child;return le.memoizedState=QT(p),s.memoizedState=qT,fe}else return ZT(s,W)}else{var Te=i.memoizedState;if(Te!==null){var ke=Te.dehydrated;if(ke!==null)return FU(i,s,$,m,ke,Te,p)}if(P){var Re=m.fallback,ut=m.children,At=jU(i,s,ut,Re,p),Tt=s.child,xn=i.child.memoizedState;return Tt.memoizedState=xn===null?QT(p):AU(xn,p),Tt.childLanes=OU(i,p),s.memoizedState=qT,At}else{var mn=m.children,Se=LU(i,s,mn,p);return s.memoizedState=null,Se}}}function ZT(i,s,p){var m=i.mode,b={mode:"visible",children:s},P=JT(b,m);return P.return=i,i.child=P,P}function DU(i,s,p,m){var b=i.mode,P=i.child,$={mode:"hidden",children:s},F,H;return(b&cn)===Ot&&P!==null?(F=P,F.childLanes=$e,F.pendingProps=$,i.mode&Lt&&(F.actualDuration=0,F.actualStartTime=-1,F.selfBaseDuration=0,F.treeBaseDuration=0),H=gf(p,b,m,null)):(F=JT($,b),H=gf(p,b,m,null)),F.return=i,H.return=i,F.sibling=H,i.child=F,H}function JT(i,s,p){return L$(i,s,$e,null)}function L3(i,s){return Hh(i,s)}function LU(i,s,p,m){var b=i.child,P=b.sibling,$=L3(b,{mode:"visible",children:p});if((s.mode&cn)===Ot&&($.lanes=m),$.return=s,$.sibling=null,P!==null){var F=s.deletions;F===null?(s.deletions=[P],s.flags|=Nn):F.push(P)}return s.child=$,$}function jU(i,s,p,m,b){var P=s.mode,$=i.child,F=$.sibling,H={mode:"hidden",children:p},W;if((P&cn)===Ot&&s.child!==$){var G=s.child;W=G,W.childLanes=$e,W.pendingProps=H,s.mode&Lt&&(W.actualDuration=0,W.actualStartTime=-1,W.selfBaseDuration=$.selfBaseDuration,W.treeBaseDuration=$.treeBaseDuration),s.deletions=null}else W=L3($,H),W.subtreeFlags=$.subtreeFlags&Mi;var fe;return F!==null?fe=Hh(F,m):(fe=gf(m,P,b,null),fe.flags|=mr),fe.return=s,W.return=s,W.sibling=fe,s.child=W,fe}function ex(i,s,p,m){m!==null&&$_(m),Ag(s,i.child,null,p);var b=s.pendingProps,P=b.children,$=ZT(s,P);return $.flags|=mr,s.memoizedState=null,$}function NU(i,s,p,m,b){var P=s.mode,$={mode:"visible",children:p},F=JT($,P),H=gf(m,P,b,null);return H.flags|=mr,F.return=s,H.return=s,F.sibling=H,s.child=F,(s.mode&cn)!==Ot&&Ag(s,i.child,null,b),H}function zU(i,s,p){return(i.mode&cn)===Ot?(l("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),i.lanes=jt):v_(s)?i.lanes=bu:i.lanes=zo,null}function FU(i,s,p,m,b,P,$){if(p)if(s.flags&Fr){s.flags&=~Fr;var Se=zT(new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));return ex(i,s,$,Se)}else{if(s.memoizedState!==null)return s.child=i.child,s.flags|=Kt,null;var Me=m.children,be=m.fallback,Ge=NU(i,s,Me,be,$),dt=s.child;return dt.memoizedState=QT($),s.memoizedState=qT,Ge}else{if(P9(),(s.mode&cn)===Ot)return ex(i,s,$,null);if(v_(b)){var F,H,W;{var G=KF(b);F=G.digest,H=G.message,W=G.stack}var fe;H?fe=new Error(H):fe=new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.");var le=zT(fe,F,W);return ex(i,s,$,le)}var Te=Fo($,i.childLanes);if(jl||Te){var ke=dx();if(ke!==null){var Re=NE(ke,$);if(Re!==bn&&Re!==P.retryLane){P.retryLane=Re;var ut=rr;Ws(i,Re),Ui(ke,i,Re,ut)}}bk();var At=zT(new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."));return ex(i,s,$,At)}else if(iA(b)){s.flags|=Kt,s.child=i.child;var Tt=dH.bind(null,i);return YF(b,Tt),null}else{M9(s,b,P.treeContext);var xn=m.children,mn=ZT(s,xn);return mn.flags|=js,mn}}}function j3(i,s,p){i.lanes=an(i.lanes,s);var m=i.alternate;m!==null&&(m.lanes=an(m.lanes,s)),N_(i.return,s,p)}function UU(i,s,p){for(var m=s;m!==null;){if(m.tag===D){var b=m.memoizedState;b!==null&&j3(m,p,i)}else if(m.tag===ie)j3(m,p,i);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===i)return;for(;m.sibling===null;){if(m.return===null||m.return===i)return;m=m.return}m.sibling.return=m.return,m=m.sibling}}function BU(i){for(var s=i,p=null;s!==null;){var m=s.alternate;m!==null&&$w(m)===null&&(p=s),s=s.sibling}return p}function HU(i){if(i!==void 0&&i!=="forwards"&&i!=="backwards"&&i!=="together"&&!YT[i])if(YT[i]=!0,typeof i=="string")switch(i.toLowerCase()){case"together":case"forwards":case"backwards":{l('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',i,i.toLowerCase());break}case"forward":case"backward":{l('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',i,i.toLowerCase());break}default:l('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',i);break}else l('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',i)}function VU(i,s){i!==void 0&&!Jw[i]&&(i!=="collapsed"&&i!=="hidden"?(Jw[i]=!0,l('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',i)):s!=="forwards"&&s!=="backwards"&&(Jw[i]=!0,l('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',i)))}function N3(i,s){{var p=yn(i),m=!p&&typeof as(i)=="function";if(p||m){var b=p?"array":"iterable";return l("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",b,s,b),!1}}return!0}function KU(i,s){if((s==="forwards"||s==="backwards")&&i!==void 0&&i!==null&&i!==!1)if(yn(i)){for(var p=0;p<i.length;p++)if(!N3(i[p],p))return}else{var m=as(i);if(typeof m=="function"){var b=m.call(i);if(b)for(var P=b.next(),$=0;!P.done;P=b.next()){if(!N3(P.value,$))return;$++}}else l('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',s)}}function ek(i,s,p,m,b){var P=i.memoizedState;P===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:m,tail:p,tailMode:b}:(P.isBackwards=s,P.rendering=null,P.renderingStartTime=0,P.last=m,P.tail=p,P.tailMode=b)}function z3(i,s,p){var m=s.pendingProps,b=m.revealOrder,P=m.tail,$=m.children;HU(b),VU(P,b),KU($,b),vs(i,s,$,p);var F=Dl.current,H=uT(F,$y);if(H)F=dT(F,$y),s.flags|=Kt;else{var W=i!==null&&(i.flags&Kt)!==Rt;W&&UU(s,s.child,p),F=Og(F)}if(af(s,F),(s.mode&cn)===Ot)s.memoizedState=null;else switch(b){case"forwards":{var G=BU(s.child),fe;G===null?(fe=s.child,s.child=null):(fe=G.sibling,G.sibling=null),ek(s,!1,fe,G,P);break}case"backwards":{var le=null,Te=s.child;for(s.child=null;Te!==null;){var ke=Te.alternate;if(ke!==null&&$w(ke)===null){s.child=Te;break}var Re=Te.sibling;Te.sibling=le,le=Te,Te=Re}ek(s,!0,le,null,P);break}case"together":{ek(s,!1,null,null,void 0);break}default:s.memoizedState=null}return s.child}function YU(i,s,p){aT(s,s.stateNode.containerInfo);var m=s.pendingProps;return i===null?s.child=Ag(s,null,m,p):vs(i,s,m,p),s.child}var F3=!1;function WU(i,s,p){var m=s.type,b=m._context,P=s.pendingProps,$=s.memoizedProps,F=P.value;{"value"in P||F3||(F3=!0,l("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var H=s.type.propTypes;H&&Ml(H,P,"prop","Context.Provider")}if(kA(s,b,F),$!==null){var W=$.value;if(mt(W,F)){if($.children===P.children&&!cw())return Hu(i,s,p)}else U9(s,b,p)}var G=P.children;return vs(i,s,G,p),s.child}var U3=!1;function GU(i,s,p){var m=s.type;m._context===void 0?m!==m.Consumer&&(U3||(U3=!0,l("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):m=m._context;var b=s.pendingProps,P=b.children;typeof P!="function"&&l("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),Mg(s,p);var $=ki(m);bc(s);var F;return Uy.current=s,Ki(!0),F=P($),Ki(!1),vu(),s.flags|=hc,vs(i,s,F,p),s.child}function Hy(){jl=!0}function tx(i,s){(s.mode&cn)===Ot&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=mr)}function Hu(i,s,p){return i!==null&&(s.dependencies=i.dependencies),x3(),tS(s.lanes),Fo(p,s.childLanes)?(J9(i,s),s.child):null}function XU(i,s,p){{var m=s.return;if(m===null)throw new Error("Cannot swap the root fiber.");if(i.alternate=null,s.alternate=null,p.index=s.index,p.sibling=s.sibling,p.return=s.return,p.ref=s.ref,s===m.child)m.child=p;else{var b=m.child;if(b===null)throw new Error("Expected parent to have a child.");for(;b.sibling!==s;)if(b=b.sibling,b===null)throw new Error("Expected to find the previous sibling.");b.sibling=p}var P=m.deletions;return P===null?(m.deletions=[i],m.flags|=Nn):P.push(i),p.flags|=mr,p}}function tk(i,s){var p=i.lanes;return!!Fo(p,s)}function qU(i,s,p){switch(s.tag){case v:$3(s),s.stateNode,Ig();break;case w:YA(s);break;case h:{var m=s.type;Mc(m)&&dw(s);break}case S:aT(s,s.stateNode.containerInfo);break;case L:{var b=s.memoizedProps.value,P=s.type._context;kA(s,P,b);break}case O:{var $=Fo(p,s.childLanes);$&&(s.flags|=sn);{var F=s.stateNode;F.effectDuration=0,F.passiveEffectDuration=0}}break;case D:{var H=s.memoizedState;if(H!==null){if(H.dehydrated!==null)return af(s,Og(Dl.current)),s.flags|=Kt,null;var W=s.child,G=W.childLanes;if(Fo(p,G))return D3(i,s,p);af(s,Og(Dl.current));var fe=Hu(i,s,p);return fe!==null?fe.sibling:null}else af(s,Og(Dl.current));break}case ie:{var le=(i.flags&Kt)!==Rt,Te=Fo(p,s.childLanes);if(le){if(Te)return z3(i,s,p);s.flags|=Kt}var ke=s.memoizedState;if(ke!==null&&(ke.rendering=null,ke.tail=null,ke.lastEffect=null),af(s,Dl.current),Te)break;return null}case ae:case te:return s.lanes=$e,R3(i,s,p)}return Hu(i,s,p)}function B3(i,s,p){if(s._debugNeedsRemount&&i!==null)return XU(i,s,Mk(s.type,s.key,s.pendingProps,s._debugOwner||null,s.mode,s.lanes));if(i!==null){var m=i.memoizedProps,b=s.pendingProps;if(m!==b||cw()||s.type!==i.type)jl=!0;else{var P=tk(i,p);if(!P&&(s.flags&Kt)===Rt)return jl=!1,qU(i,s,p);(i.flags&oh)!==Rt?jl=!0:jl=!1}}else if(jl=!1,po()&&x9(s)){var $=s.index,F=C9();gA(s,F,$)}switch(s.lanes=$e,s.tag){case g:return MU(i,s,s.type,p);case Y:{var H=s.elementType;return IU(i,s,H,p)}case d:{var W=s.type,G=s.pendingProps,fe=s.elementType===W?G:Ol(W,G);return WT(i,s,W,fe,p)}case h:{var le=s.type,Te=s.pendingProps,ke=s.elementType===le?Te:Ol(le,Te);return A3(i,s,le,ke,p)}case v:return TU(i,s,p);case w:return kU(i,s,p);case k:return PU(i,s);case D:return D3(i,s,p);case S:return YU(i,s,p);case A:{var Re=s.type,ut=s.pendingProps,At=s.elementType===Re?ut:Ol(Re,ut);return k3(i,s,Re,At,p)}case C:return CU(i,s,p);case E:return EU(i,s,p);case O:return _U(i,s,p);case L:return WU(i,s,p);case R:return GU(i,s,p);case z:{var Tt=s.type,xn=s.pendingProps,mn=Ol(Tt,xn);if(s.type!==s.elementType){var Se=Tt.propTypes;Se&&Ml(Se,mn,"prop",on(Tt))}return mn=Ol(Tt.type,mn),P3(i,s,Tt,mn,p)}case U:return I3(i,s,s.type,s.pendingProps,p);case q:{var Me=s.type,be=s.pendingProps,Ge=s.elementType===Me?be:Ol(Me,be);return RU(i,s,Me,Ge,p)}case ie:return z3(i,s,p);case pe:break;case ae:return R3(i,s,p)}throw new Error("Unknown unit of work tag ("+s.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function Fg(i){i.flags|=sn}function H3(i){i.flags|=$o,i.flags|=Ev}var V3,nk,K3,Y3;V3=function(i,s,p,m){for(var b=s.child;b!==null;){if(b.tag===w||b.tag===k)SF(i,b.stateNode);else if(b.tag!==S){if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===s)return;for(;b.sibling===null;){if(b.return===null||b.return===s)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},nk=function(i,s){},K3=function(i,s,p,m,b){var P=i.memoizedProps;if(P!==m){var $=s.stateNode,F=lT(),H=wF($,p,P,m,b,F);s.updateQueue=H,H&&Fg(s)}},Y3=function(i,s,p,m){p!==m&&Fg(s)};function Vy(i,s){if(!po())switch(i.tailMode){case"hidden":{for(var p=i.tail,m=null;p!==null;)p.alternate!==null&&(m=p),p=p.sibling;m===null?i.tail=null:m.sibling=null;break}case"collapsed":{for(var b=i.tail,P=null;b!==null;)b.alternate!==null&&(P=b),b=b.sibling;P===null?!s&&i.tail!==null?i.tail.sibling=null:i.tail=null:P.sibling=null;break}}}function mo(i){var s=i.alternate!==null&&i.alternate.child===i.child,p=$e,m=Rt;if(s){if((i.mode&Lt)!==Ot){for(var H=i.selfBaseDuration,W=i.child;W!==null;)p=an(p,an(W.lanes,W.childLanes)),m|=W.subtreeFlags&Mi,m|=W.flags&Mi,H+=W.treeBaseDuration,W=W.sibling;i.treeBaseDuration=H}else for(var G=i.child;G!==null;)p=an(p,an(G.lanes,G.childLanes)),m|=G.subtreeFlags&Mi,m|=G.flags&Mi,G.return=i,G=G.sibling;i.subtreeFlags|=m}else{if((i.mode&Lt)!==Ot){for(var b=i.actualDuration,P=i.selfBaseDuration,$=i.child;$!==null;)p=an(p,an($.lanes,$.childLanes)),m|=$.subtreeFlags,m|=$.flags,b+=$.actualDuration,P+=$.treeBaseDuration,$=$.sibling;i.actualDuration=b,i.treeBaseDuration=P}else for(var F=i.child;F!==null;)p=an(p,an(F.lanes,F.childLanes)),m|=F.subtreeFlags,m|=F.flags,F.return=i,F=F.sibling;i.subtreeFlags|=m}return i.childLanes=p,s}function QU(i,s,p){if(L9()&&(s.mode&cn)!==Ot&&(s.flags&Kt)===Rt)return xA(s),Ig(),s.flags|=Fr|ds|xi,!1;var m=mw(s);if(p!==null&&p.dehydrated!==null)if(i===null){if(!m)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(O9(s),mo(s),(s.mode&Lt)!==Ot){var b=p!==null;if(b){var P=s.child;P!==null&&(s.treeBaseDuration-=P.treeBaseDuration)}}return!1}else{if(Ig(),(s.flags&Kt)===Rt&&(s.memoizedState=null),s.flags|=sn,mo(s),(s.mode&Lt)!==Ot){var $=p!==null;if($){var F=s.child;F!==null&&(s.treeBaseDuration-=F.treeBaseDuration)}}return!1}else return CA(),!0}function W3(i,s,p){var m=s.pendingProps;switch(P_(s),s.tag){case g:case Y:case U:case d:case A:case C:case E:case O:case R:case z:return mo(s),null;case h:{var b=s.type;return Mc(b)&&uw(s),mo(s),null}case v:{var P=s.stateNode;if($g(s),E_(s),hT(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),i===null||i.child===null){var $=mw(s);if($)Fg(s);else if(i!==null){var F=i.memoizedState;(!F.isDehydrated||(s.flags&Fr)!==Rt)&&(s.flags|=Ls,CA())}}return nk(i,s),mo(s),null}case w:{cT(s);var H=KA(),W=s.type;if(i!==null&&s.stateNode!=null)K3(i,s,W,m,H),i.ref!==s.ref&&H3(s);else{if(!m){if(s.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return mo(s),null}var G=lT(),fe=mw(s);if(fe)A9(s,H,G)&&Fg(s);else{var le=yF(W,m,H,G,s);V3(le,s,!1,!1),s.stateNode=le,bF(le,W,m,H)&&Fg(s)}s.ref!==null&&H3(s)}return mo(s),null}case k:{var Te=m;if(i&&s.stateNode!=null){var ke=i.memoizedProps;Y3(i,s,ke,Te)}else{if(typeof Te!="string"&&s.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var Re=KA(),ut=lT(),At=mw(s);At?$9(s)&&Fg(s):s.stateNode=xF(Te,Re,ut,s)}return mo(s),null}case D:{Dg(s);var Tt=s.memoizedState;if(i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){var xn=QU(i,s,Tt);if(!xn)return s.flags&xi?s:null}if((s.flags&Kt)!==Rt)return s.lanes=p,(s.mode&Lt)!==Ot&&NT(s),s;var mn=Tt!==null,Se=i!==null&&i.memoizedState!==null;if(mn!==Se&&mn){var Me=s.child;if(Me.flags|=pc,(s.mode&cn)!==Ot){var be=i===null&&(s.memoizedProps.unstable_avoidThisFallback!==!0||!Z);be||uT(Dl.current,GA)?ZB():bk()}}var Ge=s.updateQueue;if(Ge!==null&&(s.flags|=sn),mo(s),(s.mode&Lt)!==Ot&&mn){var dt=s.child;dt!==null&&(s.treeBaseDuration-=dt.treeBaseDuration)}return null}case S:return $g(s),nk(i,s),i===null&&g9(s.stateNode.containerInfo),mo(s),null;case L:var ot=s.type._context;return j_(ot,s),mo(s),null;case q:{var Ut=s.type;return Mc(Ut)&&uw(s),mo(s),null}case ie:{Dg(s);var en=s.memoizedState;if(en===null)return mo(s),null;var Xn=(s.flags&Kt)!==Rt,On=en.rendering;if(On===null)if(Xn)Vy(en,!1);else{var ui=eH()&&(i===null||(i.flags&Kt)===Rt);if(!ui)for(var Dn=s.child;Dn!==null;){var ei=$w(Dn);if(ei!==null){Xn=!0,s.flags|=Kt,Vy(en,!1);var Vo=ei.updateQueue;return Vo!==null&&(s.updateQueue=Vo,s.flags|=sn),s.subtreeFlags=Rt,eU(s,p),af(s,dT(Dl.current,$y)),s.child}Dn=Dn.sibling}en.tail!==null&&Ar()>p$()&&(s.flags|=Kt,Xn=!0,Vy(en,!1),s.lanes=jv)}else{if(!Xn){var wo=$w(On);if(wo!==null){s.flags|=Kt,Xn=!0;var ya=wo.updateQueue;if(ya!==null&&(s.updateQueue=ya,s.flags|=sn),Vy(en,!0),en.tail===null&&en.tailMode==="hidden"&&!On.alternate&&!po())return mo(s),null}else Ar()*2-en.renderingStartTime>p$()&&p!==zo&&(s.flags|=Kt,Xn=!0,Vy(en,!1),s.lanes=jv)}if(en.isBackwards)On.sibling=s.child,s.child=On;else{var bs=en.last;bs!==null?bs.sibling=On:s.child=On,en.last=On}}if(en.tail!==null){var ws=en.tail;en.rendering=ws,en.tail=ws.sibling,en.renderingStartTime=Ar(),ws.sibling=null;var Ko=Dl.current;return Xn?Ko=dT(Ko,$y):Ko=Og(Ko),af(s,Ko),ws}return mo(s),null}case pe:break;case ae:case te:{Sk(s);var Gu=s.memoizedState,Gg=Gu!==null;if(i!==null){var sS=i.memoizedState,zc=sS!==null;zc!==Gg&&!V&&(s.flags|=pc)}return!Gg||(s.mode&cn)===Ot?mo(s):Fo(Nc,zo)&&(mo(s),s.subtreeFlags&(mr|sn)&&(s.flags|=pc)),null}case he:return null;case ce:return null}throw new Error("Unknown unit of work tag ("+s.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function ZU(i,s,p){switch(P_(s),s.tag){case h:{var m=s.type;Mc(m)&&uw(s);var b=s.flags;return b&xi?(s.flags=b&~xi|Kt,(s.mode&Lt)!==Ot&&NT(s),s):null}case v:{s.stateNode,$g(s),E_(s),hT();var P=s.flags;return(P&xi)!==Rt&&(P&Kt)===Rt?(s.flags=P&~xi|Kt,s):null}case w:return cT(s),null;case D:{Dg(s);var $=s.memoizedState;if($!==null&&$.dehydrated!==null){if(s.alternate===null)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");Ig()}var F=s.flags;return F&xi?(s.flags=F&~xi|Kt,(s.mode&Lt)!==Ot&&NT(s),s):null}case ie:return Dg(s),null;case S:return $g(s),null;case L:var H=s.type._context;return j_(H,s),null;case ae:case te:return Sk(s),null;case he:return null;default:return null}}function G3(i,s,p){switch(P_(s),s.tag){case h:{var m=s.type.childContextTypes;m!=null&&uw(s);break}case v:{s.stateNode,$g(s),E_(s),hT();break}case w:{cT(s);break}case S:$g(s);break;case D:Dg(s);break;case ie:Dg(s);break;case L:var b=s.type._context;j_(b,s);break;case ae:case te:Sk(s);break}}var X3=null;X3=new Set;var nx=!1,vo=!1,JU=typeof WeakSet=="function"?WeakSet:Set,vt=null,Ug=null,Bg=null;function eB(i){gu(null,function(){throw i}),xv()}var tB=function(i,s){if(s.props=i.memoizedProps,s.state=i.memoizedState,i.mode&Lt)try{Lc(),s.componentWillUnmount()}finally{Dc(i)}else s.componentWillUnmount()};function q3(i,s){try{uf(Di,i)}catch(p){br(i,s,p)}}function rk(i,s,p){try{tB(i,p)}catch(m){br(i,s,m)}}function nB(i,s,p){try{p.componentDidMount()}catch(m){br(i,s,m)}}function Q3(i,s){try{J3(i)}catch(p){br(i,s,p)}}function Hg(i,s){var p=i.ref;if(p!==null)if(typeof p=="function"){var m;try{if(Ne&&Ve&&i.mode&Lt)try{Lc(),m=p(null)}finally{Dc(i)}else m=p(null)}catch(b){br(i,s,b)}typeof m=="function"&&l("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",Vt(i))}else p.current=null}function rx(i,s,p){try{p()}catch(m){br(i,s,m)}}var Z3=!1;function rB(i,s){mF(i.containerInfo),vt=s,iB();var p=Z3;return Z3=!1,p}function iB(){for(;vt!==null;){var i=vt,s=i.child;(i.subtreeFlags&Id)!==Rt&&s!==null?(s.return=i,vt=s):oB()}}function oB(){for(;vt!==null;){var i=vt;An(i);try{sB(i)}catch(p){br(i,i.return,p)}er();var s=i.sibling;if(s!==null){s.return=i.return,vt=s;return}vt=i.return}}function sB(i){var s=i.alternate,p=i.flags;if((p&Ls)!==Rt){switch(An(i),i.tag){case d:case A:case U:break;case h:{if(s!==null){var m=s.memoizedProps,b=s.memoizedState,P=i.stateNode;i.type===i.elementType&&!Nh&&(P.props!==i.memoizedProps&&l("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Vt(i)||"instance"),P.state!==i.memoizedState&&l("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Vt(i)||"instance"));var $=P.getSnapshotBeforeUpdate(i.elementType===i.type?m:Ol(i.type,m),b);{var F=X3;$===void 0&&!F.has(i.type)&&(F.add(i.type),l("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",Vt(i)))}P.__reactInternalSnapshotBeforeUpdate=$}break}case v:{{var H=i.stateNode;UF(H.containerInfo)}break}case w:case k:case S:case q:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}er()}}function Nl(i,s,p){var m=s.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var P=b.next,$=P;do{if(($.tag&i)===i){var F=$.destroy;$.destroy=void 0,F!==void 0&&((i&go)!==Gs?Ap(s):(i&Di)!==Gs&&$p(s),(i&Ac)!==Gs&&rS(!0),rx(s,p,F),(i&Ac)!==Gs&&rS(!1),(i&go)!==Gs?gb():(i&Di)!==Gs&&Rd())}$=$.next}while($!==P)}}function uf(i,s){var p=s.updateQueue,m=p!==null?p.lastEffect:null;if(m!==null){var b=m.next,P=b;do{if((P.tag&i)===i){(i&go)!==Gs?pb(s):(i&Di)!==Gs&&mb(s);var $=P.create;(i&Ac)!==Gs&&rS(!0),P.destroy=$(),(i&Ac)!==Gs&&rS(!1),(i&go)!==Gs?Ov():(i&Di)!==Gs&&vb();{var F=P.destroy;if(F!==void 0&&typeof F!="function"){var H=void 0;(P.tag&Di)!==Rt?H="useLayoutEffect":(P.tag&Ac)!==Rt?H="useInsertionEffect":H="useEffect";var W=void 0;F===null?W=" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof F.then=="function"?W=`

It looks like you wrote `+H+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+H+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching`:W=" You returned: "+F,l("%s must not return anything besides a function, which is used for clean-up.%s",H,W)}}}P=P.next}while(P!==b)}}function aB(i,s){if((s.flags&sn)!==Rt)switch(s.tag){case O:{var p=s.stateNode.passiveEffectDuration,m=s.memoizedProps,b=m.id,P=m.onPostCommit,$=b3(),F=s.alternate===null?"mount":"update";S3()&&(F="nested-update"),typeof P=="function"&&P(b,F,p,$);var H=s.return;e:for(;H!==null;){switch(H.tag){case v:var W=H.stateNode;W.passiveEffectDuration+=p;break e;case O:var G=H.stateNode;G.passiveEffectDuration+=p;break e}H=H.return}break}}}function lB(i,s,p,m){if((p.flags&Yi)!==Rt)switch(p.tag){case d:case A:case U:{if(!vo)if(p.mode&Lt)try{Lc(),uf(Di|Oi,p)}finally{Dc(p)}else uf(Di|Oi,p);break}case h:{var b=p.stateNode;if(p.flags&sn&&!vo)if(s===null)if(p.type===p.elementType&&!Nh&&(b.props!==p.memoizedProps&&l("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Vt(p)||"instance"),b.state!==p.memoizedState&&l("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Vt(p)||"instance")),p.mode&Lt)try{Lc(),b.componentDidMount()}finally{Dc(p)}else b.componentDidMount();else{var P=p.elementType===p.type?s.memoizedProps:Ol(p.type,s.memoizedProps),$=s.memoizedState;if(p.type===p.elementType&&!Nh&&(b.props!==p.memoizedProps&&l("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Vt(p)||"instance"),b.state!==p.memoizedState&&l("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Vt(p)||"instance")),p.mode&Lt)try{Lc(),b.componentDidUpdate(P,$,b.__reactInternalSnapshotBeforeUpdate)}finally{Dc(p)}else b.componentDidUpdate(P,$,b.__reactInternalSnapshotBeforeUpdate)}var F=p.updateQueue;F!==null&&(p.type===p.elementType&&!Nh&&(b.props!==p.memoizedProps&&l("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Vt(p)||"instance"),b.state!==p.memoizedState&&l("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Vt(p)||"instance")),$A(p,F,b));break}case v:{var H=p.updateQueue;if(H!==null){var W=null;if(p.child!==null)switch(p.child.tag){case w:W=p.child.stateNode;break;case h:W=p.child.stateNode;break}$A(p,H,W)}break}case w:{var G=p.stateNode;if(s===null&&p.flags&sn){var fe=p.type,le=p.memoizedProps;kF(G,fe,le)}break}case k:break;case S:break;case O:{{var Te=p.memoizedProps,ke=Te.onCommit,Re=Te.onRender,ut=p.stateNode.effectDuration,At=b3(),Tt=s===null?"mount":"update";S3()&&(Tt="nested-update"),typeof Re=="function"&&Re(p.memoizedProps.id,Tt,p.actualDuration,p.treeBaseDuration,p.actualStartTime,At);{typeof ke=="function"&&ke(p.memoizedProps.id,Tt,ut,At),oH(p);var xn=p.return;e:for(;xn!==null;){switch(xn.tag){case v:var mn=xn.stateNode;mn.effectDuration+=ut;break e;case O:var Se=xn.stateNode;Se.effectDuration+=ut;break e}xn=xn.return}}}break}case D:{mB(i,p);break}case ie:case q:case pe:case ae:case te:case ce:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}vo||p.flags&$o&&J3(p)}function cB(i){switch(i.tag){case d:case A:case U:{if(i.mode&Lt)try{Lc(),q3(i,i.return)}finally{Dc(i)}else q3(i,i.return);break}case h:{var s=i.stateNode;typeof s.componentDidMount=="function"&&nB(i,i.return,s),Q3(i,i.return);break}case w:{Q3(i,i.return);break}}}function uB(i,s){for(var p=null,m=i;;){if(m.tag===w){if(p===null){p=m;try{var b=m.stateNode;s?jF(b):zF(m.stateNode,m.memoizedProps)}catch($){br(i,i.return,$)}}}else if(m.tag===k){if(p===null)try{var P=m.stateNode;s?NF(P):FF(P,m.memoizedProps)}catch($){br(i,i.return,$)}}else if(!((m.tag===ae||m.tag===te)&&m.memoizedState!==null&&m!==i)){if(m.child!==null){m.child.return=m,m=m.child;continue}}if(m===i)return;for(;m.sibling===null;){if(m.return===null||m.return===i)return;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}function J3(i){var s=i.ref;if(s!==null){var p=i.stateNode,m;switch(i.tag){case w:m=p;break;default:m=p}if(typeof s=="function"){var b;if(i.mode&Lt)try{Lc(),b=s(m)}finally{Dc(i)}else b=s(m);typeof b=="function"&&l("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",Vt(i))}else s.hasOwnProperty("current")||l("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",Vt(i)),s.current=m}}function dB(i){var s=i.alternate;s!==null&&(s.return=null),i.return=null}function e$(i){var s=i.alternate;s!==null&&(i.alternate=null,e$(s));{if(i.child=null,i.deletions=null,i.sibling=null,i.tag===w){var p=i.stateNode;p!==null&&y9(p)}i.stateNode=null,i._debugOwner=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}}function fB(i){for(var s=i.return;s!==null;){if(t$(s))return s;s=s.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}function t$(i){return i.tag===w||i.tag===v||i.tag===S}function n$(i){var s=i;e:for(;;){for(;s.sibling===null;){if(s.return===null||t$(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==w&&s.tag!==k&&s.tag!==X;){if(s.flags&mr||s.child===null||s.tag===S)continue e;s.child.return=s,s=s.child}if(!(s.flags&mr))return s.stateNode}}function hB(i){var s=fB(i);switch(s.tag){case w:{var p=s.stateNode;s.flags&zn&&(rA(p),s.flags&=~zn);var m=n$(i);ok(i,m,p);break}case v:case S:{var b=s.stateNode.containerInfo,P=n$(i);ik(i,P,b);break}default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function ik(i,s,p){var m=i.tag,b=m===w||m===k;if(b){var P=i.stateNode;s?$F(p,P,s):MF(p,P)}else if(m!==S){var $=i.child;if($!==null){ik($,s,p);for(var F=$.sibling;F!==null;)ik(F,s,p),F=F.sibling}}}function ok(i,s,p){var m=i.tag,b=m===w||m===k;if(b){var P=i.stateNode;s?AF(p,P,s):RF(p,P)}else if(m!==S){var $=i.child;if($!==null){ok($,s,p);for(var F=$.sibling;F!==null;)ok(F,s,p),F=F.sibling}}}var yo=null,zl=!1;function pB(i,s,p){{var m=s;e:for(;m!==null;){switch(m.tag){case w:{yo=m.stateNode,zl=!1;break e}case v:{yo=m.stateNode.containerInfo,zl=!0;break e}case S:{yo=m.stateNode.containerInfo,zl=!0;break e}}m=m.return}if(yo===null)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");r$(i,s,p),yo=null,zl=!1}dB(p)}function df(i,s,p){for(var m=p.child;m!==null;)r$(i,s,m),m=m.sibling}function r$(i,s,p){switch(Av(p),p.tag){case w:vo||Hg(p,s);case k:{{var m=yo,b=zl;yo=null,df(i,s,p),yo=m,zl=b,yo!==null&&(zl?DF(yo,p.stateNode):OF(yo,p.stateNode))}return}case X:{yo!==null&&(zl?LF(yo,p.stateNode):m_(yo,p.stateNode));return}case S:{{var P=yo,$=zl;yo=p.stateNode.containerInfo,zl=!0,df(i,s,p),yo=P,zl=$}return}case d:case A:case z:case U:{if(!vo){var F=p.updateQueue;if(F!==null){var H=F.lastEffect;if(H!==null){var W=H.next,G=W;do{var fe=G,le=fe.destroy,Te=fe.tag;le!==void 0&&((Te&Ac)!==Gs?rx(p,s,le):(Te&Di)!==Gs&&($p(p),p.mode&Lt?(Lc(),rx(p,s,le),Dc(p)):rx(p,s,le),Rd())),G=G.next}while(G!==W)}}}df(i,s,p);return}case h:{if(!vo){Hg(p,s);var ke=p.stateNode;typeof ke.componentWillUnmount=="function"&&rk(p,s,ke)}df(i,s,p);return}case pe:{df(i,s,p);return}case ae:{if(p.mode&cn){var Re=vo;vo=Re||p.memoizedState!==null,df(i,s,p),vo=Re}else df(i,s,p);break}default:{df(i,s,p);return}}}function gB(i){i.memoizedState}function mB(i,s){var p=s.memoizedState;if(p===null){var m=s.alternate;if(m!==null){var b=m.memoizedState;if(b!==null){var P=b.dehydrated;P!==null&&t9(P)}}}}function i$(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var p=i.stateNode;p===null&&(p=i.stateNode=new JU),s.forEach(function(m){var b=fH.bind(null,i,m);if(!p.has(m)){if(p.add(m),Ai)if(Ug!==null&&Bg!==null)nS(Bg,Ug);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");m.then(b,b)}})}}function vB(i,s,p){Ug=p,Bg=i,An(s),o$(s,i),An(s),Ug=null,Bg=null}function Fl(i,s,p){var m=s.deletions;if(m!==null)for(var b=0;b<m.length;b++){var P=m[b];try{pB(i,s,P)}catch(H){br(P,s,H)}}var $=cc();if(s.subtreeFlags&Lo)for(var F=s.child;F!==null;)An(F),o$(F,i),F=F.sibling;An($)}function o$(i,s,p){var m=i.alternate,b=i.flags;switch(i.tag){case d:case A:case z:case U:{if(Fl(s,i),jc(i),b&sn){try{Nl(Ac|Oi,i,i.return),uf(Ac|Oi,i)}catch(Ut){br(i,i.return,Ut)}if(i.mode&Lt){try{Lc(),Nl(Di|Oi,i,i.return)}catch(Ut){br(i,i.return,Ut)}Dc(i)}else try{Nl(Di|Oi,i,i.return)}catch(Ut){br(i,i.return,Ut)}}return}case h:{Fl(s,i),jc(i),b&$o&&m!==null&&Hg(m,m.return);return}case w:{Fl(s,i),jc(i),b&$o&&m!==null&&Hg(m,m.return);{if(i.flags&zn){var P=i.stateNode;try{rA(P)}catch(Ut){br(i,i.return,Ut)}}if(b&sn){var $=i.stateNode;if($!=null){var F=i.memoizedProps,H=m!==null?m.memoizedProps:F,W=i.type,G=i.updateQueue;if(i.updateQueue=null,G!==null)try{PF($,G,W,H,F,i)}catch(Ut){br(i,i.return,Ut)}}}}return}case k:{if(Fl(s,i),jc(i),b&sn){if(i.stateNode===null)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var fe=i.stateNode,le=i.memoizedProps,Te=m!==null?m.memoizedProps:le;try{IF(fe,Te,le)}catch(Ut){br(i,i.return,Ut)}}return}case v:{if(Fl(s,i),jc(i),b&sn&&m!==null){var ke=m.memoizedState;if(ke.isDehydrated)try{e9(s.containerInfo)}catch(Ut){br(i,i.return,Ut)}}return}case S:{Fl(s,i),jc(i);return}case D:{Fl(s,i),jc(i);var Re=i.child;if(Re.flags&pc){var ut=Re.stateNode,At=Re.memoizedState,Tt=At!==null;if(ut.isHidden=Tt,Tt){var xn=Re.alternate!==null&&Re.alternate.memoizedState!==null;xn||QB()}}if(b&sn){try{gB(i)}catch(Ut){br(i,i.return,Ut)}i$(i)}return}case ae:{var mn=m!==null&&m.memoizedState!==null;if(i.mode&cn){var Se=vo;vo=Se||mn,Fl(s,i),vo=Se}else Fl(s,i);if(jc(i),b&pc){var Me=i.stateNode,be=i.memoizedState,Ge=be!==null,dt=i;if(Me.isHidden=Ge,Ge&&!mn&&(dt.mode&cn)!==Ot){vt=dt;for(var ot=dt.child;ot!==null;)vt=ot,SB(ot),ot=ot.sibling}uB(dt,Ge)}return}case ie:{Fl(s,i),jc(i),b&sn&&i$(i);return}case pe:return;default:{Fl(s,i),jc(i);return}}}function jc(i){var s=i.flags;if(s&mr){try{hB(i)}catch(p){br(i,i.return,p)}i.flags&=~mr}s&js&&(i.flags&=~js)}function yB(i,s,p){Ug=p,Bg=s,vt=i,s$(i,s,p),Ug=null,Bg=null}function s$(i,s,p){for(var m=(i.mode&cn)!==Ot;vt!==null;){var b=vt,P=b.child;if(b.tag===ae&&m){var $=b.memoizedState!==null,F=$||nx;if(F){sk(i,s,p);continue}else{var H=b.alternate,W=H!==null&&H.memoizedState!==null,G=W||vo,fe=nx,le=vo;nx=F,vo=G,vo&&!le&&(vt=b,bB(b));for(var Te=P;Te!==null;)vt=Te,s$(Te,s,p),Te=Te.sibling;vt=b,nx=fe,vo=le,sk(i,s,p);continue}}(b.subtreeFlags&Yi)!==Rt&&P!==null?(P.return=b,vt=P):sk(i,s,p)}}function sk(i,s,p){for(;vt!==null;){var m=vt;if((m.flags&Yi)!==Rt){var b=m.alternate;An(m);try{lB(s,b,m,p)}catch($){br(m,m.return,$)}er()}if(m===i){vt=null;return}var P=m.sibling;if(P!==null){P.return=m.return,vt=P;return}vt=m.return}}function SB(i){for(;vt!==null;){var s=vt,p=s.child;switch(s.tag){case d:case A:case z:case U:{if(s.mode&Lt)try{Lc(),Nl(Di,s,s.return)}finally{Dc(s)}else Nl(Di,s,s.return);break}case h:{Hg(s,s.return);var m=s.stateNode;typeof m.componentWillUnmount=="function"&&rk(s,s.return,m);break}case w:{Hg(s,s.return);break}case ae:{var b=s.memoizedState!==null;if(b){a$(i);continue}break}}p!==null?(p.return=s,vt=p):a$(i)}}function a$(i){for(;vt!==null;){var s=vt;if(s===i){vt=null;return}var p=s.sibling;if(p!==null){p.return=s.return,vt=p;return}vt=s.return}}function bB(i){for(;vt!==null;){var s=vt,p=s.child;if(s.tag===ae){var m=s.memoizedState!==null;if(m){l$(i);continue}}p!==null?(p.return=s,vt=p):l$(i)}}function l$(i){for(;vt!==null;){var s=vt;An(s);try{cB(s)}catch(m){br(s,s.return,m)}if(er(),s===i){vt=null;return}var p=s.sibling;if(p!==null){p.return=s.return,vt=p;return}vt=s.return}}function wB(i,s,p,m){vt=s,xB(s,i,p,m)}function xB(i,s,p,m){for(;vt!==null;){var b=vt,P=b.child;(b.subtreeFlags&Ns)!==Rt&&P!==null?(P.return=b,vt=P):CB(i,s,p,m)}}function CB(i,s,p,m){for(;vt!==null;){var b=vt;if((b.flags&Er)!==Rt){An(b);try{EB(s,b,p,m)}catch($){br(b,b.return,$)}er()}if(b===i){vt=null;return}var P=b.sibling;if(P!==null){P.return=b.return,vt=P;return}vt=b.return}}function EB(i,s,p,m){switch(s.tag){case d:case A:case U:{if(s.mode&Lt){jT();try{uf(go|Oi,s)}finally{LT(s)}}else uf(go|Oi,s);break}}}function _B(i){vt=i,TB()}function TB(){for(;vt!==null;){var i=vt,s=i.child;if((vt.flags&Nn)!==Rt){var p=i.deletions;if(p!==null){for(var m=0;m<p.length;m++){var b=p[m];vt=b,IB(b,i)}{var P=i.alternate;if(P!==null){var $=P.child;if($!==null){P.child=null;do{var F=$.sibling;$.sibling=null,$=F}while($!==null)}}}vt=i}}(i.subtreeFlags&Ns)!==Rt&&s!==null?(s.return=i,vt=s):kB()}}function kB(){for(;vt!==null;){var i=vt;(i.flags&Er)!==Rt&&(An(i),PB(i),er());var s=i.sibling;if(s!==null){s.return=i.return,vt=s;return}vt=i.return}}function PB(i){switch(i.tag){case d:case A:case U:{i.mode&Lt?(jT(),Nl(go|Oi,i,i.return),LT(i)):Nl(go|Oi,i,i.return);break}}}function IB(i,s){for(;vt!==null;){var p=vt;An(p),MB(p,s),er();var m=p.child;m!==null?(m.return=p,vt=m):RB(i)}}function RB(i){for(;vt!==null;){var s=vt,p=s.sibling,m=s.return;if(e$(s),s===i){vt=null;return}if(p!==null){p.return=m,vt=p;return}vt=m}}function MB(i,s){switch(i.tag){case d:case A:case U:{i.mode&Lt?(jT(),Nl(go,i,s),LT(i)):Nl(go,i,s);break}}}function AB(i){switch(i.tag){case d:case A:case U:{try{uf(Di|Oi,i)}catch(p){br(i,i.return,p)}break}case h:{var s=i.stateNode;try{s.componentDidMount()}catch(p){br(i,i.return,p)}break}}}function $B(i){switch(i.tag){case d:case A:case U:{try{uf(go|Oi,i)}catch(s){br(i,i.return,s)}break}}}function OB(i){switch(i.tag){case d:case A:case U:{try{Nl(Di|Oi,i,i.return)}catch(p){br(i,i.return,p)}break}case h:{var s=i.stateNode;typeof s.componentWillUnmount=="function"&&rk(i,i.return,s);break}}}function DB(i){switch(i.tag){case d:case A:case U:try{Nl(go|Oi,i,i.return)}catch(s){br(i,i.return,s)}}}if(typeof Symbol=="function"&&Symbol.for){var Ky=Symbol.for;Ky("selector.component"),Ky("selector.has_pseudo_class"),Ky("selector.role"),Ky("selector.test_id"),Ky("selector.text")}var LB=[];function jB(){LB.forEach(function(i){return i()})}var NB=e.ReactCurrentActQueue;function zB(i){{var s=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0,p=typeof jest<"u";return p&&s!==!1}}function c$(){{var i=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return!i&&NB.current!==null&&l("The current testing environment is not configured to support act(...)"),i}}var FB=Math.ceil,ak=e.ReactCurrentDispatcher,lk=e.ReactCurrentOwner,So=e.ReactCurrentBatchConfig,Ul=e.ReactCurrentActQueue,Ni=0,u$=1,bo=2,el=4,Vu=0,Yy=1,zh=2,ix=3,Wy=4,d$=5,ck=6,wn=Ni,ys=null,Wr=null,zi=$e,Nc=$e,uk=ef($e),Fi=Vu,Gy=null,ox=$e,Xy=$e,sx=$e,qy=null,Xs=null,dk=0,f$=500,h$=1/0,UB=500,Ku=null;function Qy(){h$=Ar()+UB}function p$(){return h$}var ax=!1,fk=null,Vg=null,Fh=!1,ff=null,Zy=$e,hk=[],pk=null,BB=50,Jy=0,gk=null,mk=!1,lx=!1,HB=50,Kg=0,cx=null,eS=rr,ux=$e,g$=!1;function dx(){return ys}function Ss(){return(wn&(bo|el))!==Ni?Ar():(eS!==rr||(eS=Ar()),eS)}function hf(i){var s=i.mode;if((s&cn)===Ot)return jt;if((wn&bo)!==Ni&&zi!==$e)return si(zi);var p=z9()!==N9;if(p){if(So.transition!==null){var m=So.transition;m._updatedFibers||(m._updatedFibers=new Set),m._updatedFibers.add(i)}return ux===bn&&(ux=Fv()),ux}var b=Bs();if(b!==bn)return b;var P=CF();return P}function VB(i){var s=i.mode;return(s&cn)===Ot?jt:jE()}function Ui(i,s,p,m){pH(),g$&&l("useInsertionEffect must not schedule updates."),mk&&(lx=!0),ku(i,p,m),(wn&bo)!==$e&&i===ys?vH(s):(Ai&&Kv(i,s,p),yH(s),i===ys&&((wn&bo)===Ni&&(Xy=an(Xy,p)),Fi===Wy&&pf(i,zi)),qs(i,m),p===jt&&wn===Ni&&(s.mode&cn)===Ot&&!Ul.isBatchingLegacy&&(Qy(),pA()))}function KB(i,s,p){var m=i.current;m.lanes=s,ku(i,s,p),qs(i,p)}function YB(i){return(wn&bo)!==Ni}function qs(i,s){var p=i.callbackNode;OE(i,s);var m=dh(i,i===ys?zi:$e);if(m===$e){p!==null&&M$(p),i.callbackNode=null,i.callbackPriority=bn;return}var b=Zr(m),P=i.callbackPriority;if(P===b&&!(Ul.current!==null&&p!==Ck)){p==null&&P!==jt&&l("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.");return}p!=null&&M$(p);var $;if(b===jt)i.tag===tf?(Ul.isBatchingLegacy!==null&&(Ul.didScheduleLegacyUpdate=!0),w9(y$.bind(null,i))):hA(y$.bind(null,i)),Ul.current!==null?Ul.current.push(nf):_F(function(){(wn&(bo|el))===Ni&&nf()}),$=null;else{var F;switch(mh(m)){case Wi:F=Ip;break;case $i:F=ps;break;case Tl:F=Va;break;case ph:F=mc;break;default:F=Va;break}$=Ek(F,m$.bind(null,i))}i.callbackPriority=b,i.callbackNode=$}function m$(i,s){if(pU(),eS=rr,ux=$e,(wn&(bo|el))!==Ni)throw new Error("Should not already be working.");var p=i.callbackNode,m=Wu();if(m&&i.callbackNode!==p)return null;var b=dh(i,i===ys?zi:$e);if(b===$e)return null;var P=!hh(i,b)&&!Cb(i,b)&&!s,$=P?nH(i,b):hx(i,b);if($!==Vu){if($===zh){var F=Nv(i);F!==$e&&(b=F,$=vk(i,F))}if($===Yy){var H=Gy;throw Uh(i,$e),pf(i,b),qs(i,Ar()),H}if($===ck)pf(i,b);else{var W=!hh(i,b),G=i.current.alternate;if(W&&!GB(G)){if($=hx(i,b),$===zh){var fe=Nv(i);fe!==$e&&(b=fe,$=vk(i,fe))}if($===Yy){var le=Gy;throw Uh(i,$e),pf(i,b),qs(i,Ar()),le}}i.finishedWork=G,i.finishedLanes=b,WB(i,$,b)}}return qs(i,Ar()),i.callbackNode===p?m$.bind(null,i):null}function vk(i,s){var p=qy;if(li(i)){var m=Uh(i,s);m.flags|=Fr,p9(i.containerInfo)}var b=hx(i,s);if(b!==zh){var P=Xs;Xs=p,P!==null&&v$(P)}return b}function v$(i){Xs===null?Xs=i:Xs.push.apply(Xs,i)}function WB(i,s,p){switch(s){case Vu:case Yy:throw new Error("Root did not complete. This is a bug in React.");case zh:{Bh(i,Xs,Ku);break}case ix:{if(pf(i,p),Jp(p)&&!A$()){var m=dk+f$-Ar();if(m>10){var b=dh(i,$e);if(b!==$e)break;var P=i.suspendedLanes;if(!Tu(P,p)){Ss(),Hv(i,P);break}i.timeoutHandle=p_(Bh.bind(null,i,Xs,Ku),m);break}}Bh(i,Xs,Ku);break}case Wy:{if(pf(i,p),xb(p))break;if(!A$()){var $=wb(i,p),F=$,H=Ar()-F,W=hH(H)-H;if(W>10){i.timeoutHandle=p_(Bh.bind(null,i,Xs,Ku),W);break}}Bh(i,Xs,Ku);break}case d$:{Bh(i,Xs,Ku);break}default:throw new Error("Unknown root exit status.")}}function GB(i){for(var s=i;;){if(s.flags&ih){var p=s.updateQueue;if(p!==null){var m=p.stores;if(m!==null)for(var b=0;b<m.length;b++){var P=m[b],$=P.getSnapshot,F=P.value;try{if(!mt($(),F))return!1}catch{return!1}}}}var H=s.child;if(s.subtreeFlags&ih&&H!==null){H.return=s,s=H;continue}if(s===i)return!0;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}return!0}function pf(i,s){s=jd(s,sx),s=jd(s,Xy),Bv(i,s)}function y$(i){if(gU(),(wn&(bo|el))!==Ni)throw new Error("Should not already be working.");Wu();var s=dh(i,$e);if(!Fo(s,jt))return qs(i,Ar()),null;var p=hx(i,s);if(i.tag!==tf&&p===zh){var m=Nv(i);m!==$e&&(s=m,p=vk(i,m))}if(p===Yy){var b=Gy;throw Uh(i,$e),pf(i,s),qs(i,Ar()),b}if(p===ck)throw new Error("Root did not complete. This is a bug in React.");var P=i.current.alternate;return i.finishedWork=P,i.finishedLanes=s,Bh(i,Xs,Ku),qs(i,Ar()),null}function XB(i,s){s!==$e&&(Nd(i,an(s,jt)),qs(i,Ar()),(wn&(bo|el))===Ni&&(Qy(),nf()))}function yk(i,s){var p=wn;wn|=u$;try{return i(s)}finally{wn=p,wn===Ni&&!Ul.isBatchingLegacy&&(Qy(),pA())}}function qB(i,s,p,m,b){var P=Bs(),$=So.transition;try{return So.transition=null,ai(Wi),i(s,p,m,b)}finally{ai(P),So.transition=$,wn===Ni&&Qy()}}function Yu(i){ff!==null&&ff.tag===tf&&(wn&(bo|el))===Ni&&Wu();var s=wn;wn|=u$;var p=So.transition,m=Bs();try{return So.transition=null,ai(Wi),i?i():void 0}finally{ai(m),So.transition=p,wn=s,(wn&(bo|el))===Ni&&nf()}}function S$(){return(wn&(bo|el))!==Ni}function fx(i,s){Bo(uk,Nc,i),Nc=an(Nc,s)}function Sk(i){Nc=uk.current,Uo(uk,i)}function Uh(i,s){i.finishedWork=null,i.finishedLanes=$e;var p=i.timeoutHandle;if(p!==g_&&(i.timeoutHandle=g_,EF(p)),Wr!==null)for(var m=Wr.return;m!==null;){var b=m.alternate;G3(b,m),m=m.return}ys=i;var P=Hh(i.current,null);return Wr=P,zi=Nc=s,Fi=Vu,Gy=null,ox=$e,Xy=$e,sx=$e,qy=null,Xs=null,H9(),$l.discardPendingWarnings(),P}function b$(i,s){do{var p=Wr;try{if(bw(),qA(),er(),lk.current=null,p===null||p.return===null){Fi=Yy,Gy=s,Wr=null;return}if(Ne&&p.mode&Lt&&Zw(p,!0),Ie)if(vu(),s!==null&&typeof s=="object"&&typeof s.then=="function"){var m=s;yb(p,m,zi)}else Op(p,s,zi);bU(i,p.return,p,s,zi),E$(p)}catch(b){s=b,Wr===p&&p!==null?(p=p.return,Wr=p):p=Wr;continue}return}while(!0)}function w$(){var i=ak.current;return ak.current=Ww,i===null?Ww:i}function x$(i){ak.current=i}function QB(){dk=Ar()}function tS(i){ox=an(i,ox)}function ZB(){Fi===Vu&&(Fi=ix)}function bk(){(Fi===Vu||Fi===ix||Fi===zh)&&(Fi=Wy),ys!==null&&(fh(ox)||fh(Xy))&&pf(ys,zi)}function JB(i){Fi!==Wy&&(Fi=zh),qy===null?qy=[i]:qy.push(i)}function eH(){return Fi===Vu}function hx(i,s){var p=wn;wn|=bo;var m=w$();if(ys!==i||zi!==s){if(Ai){var b=i.memoizedUpdaters;b.size>0&&(nS(i,zi),b.clear()),ng(i,s)}Ku=Yv(),Uh(i,s)}pa(s);do try{tH();break}catch(P){b$(i,P)}while(!0);if(bw(),wn=p,x$(m),Wr!==null)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return Ad(),ys=null,zi=$e,Fi}function tH(){for(;Wr!==null;)C$(Wr)}function nH(i,s){var p=wn;wn|=bo;var m=w$();if(ys!==i||zi!==s){if(Ai){var b=i.memoizedUpdaters;b.size>0&&(nS(i,zi),b.clear()),ng(i,s)}Ku=Yv(),Qy(),Uh(i,s)}pa(s);do try{rH();break}catch(P){b$(i,P)}while(!0);return bw(),x$(m),wn=p,Wr!==null?(ah(),Vu):(Ad(),ys=null,zi=$e,Fi)}function rH(){for(;Wr!==null&&!Pp();)C$(Wr)}function C$(i){var s=i.alternate;An(i);var p;(i.mode&Lt)!==Ot?(DT(i),p=wk(s,i,Nc),Zw(i,!0)):p=wk(s,i,Nc),er(),i.memoizedProps=i.pendingProps,p===null?E$(i):Wr=p,lk.current=null}function E$(i){var s=i;do{var p=s.alternate,m=s.return;if((s.flags&ds)===Rt){An(s);var b=void 0;if((s.mode&Lt)===Ot?b=W3(p,s,Nc):(DT(s),b=W3(p,s,Nc),Zw(s,!1)),er(),b!==null){Wr=b;return}}else{var P=ZU(p,s);if(P!==null){P.flags&=cb,Wr=P;return}if((s.mode&Lt)!==Ot){Zw(s,!1);for(var $=s.actualDuration,F=s.child;F!==null;)$+=F.actualDuration,F=F.sibling;s.actualDuration=$}if(m!==null)m.flags|=ds,m.subtreeFlags=Rt,m.deletions=null;else{Fi=ck,Wr=null;return}}var H=s.sibling;if(H!==null){Wr=H;return}s=m,Wr=s}while(s!==null);Fi===Vu&&(Fi=d$)}function Bh(i,s,p){var m=Bs(),b=So.transition;try{So.transition=null,ai(Wi),iH(i,s,p,m)}finally{So.transition=b,ai(m)}return null}function iH(i,s,p,m){do Wu();while(ff!==null);if(gH(),(wn&(bo|el))!==Ni)throw new Error("Should not already be working.");var b=i.finishedWork,P=i.finishedLanes;if(Mp(P),b===null)return $v(),null;if(P===$e&&l("root.finishedLanes should not be empty during a commit. This is a bug in React."),i.finishedWork=null,i.finishedLanes=$e,b===i.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");i.callbackNode=null,i.callbackPriority=bn;var $=an(b.lanes,b.childLanes);Vv(i,$),i===ys&&(ys=null,Wr=null,zi=$e),((b.subtreeFlags&Ns)!==Rt||(b.flags&Ns)!==Rt)&&(Fh||(Fh=!0,pk=p,Ek(Va,function(){return Wu(),null})));var F=(b.subtreeFlags&(Id|Lo|Yi|Ns))!==Rt,H=(b.flags&(Id|Lo|Yi|Ns))!==Rt;if(F||H){var W=So.transition;So.transition=null;var G=Bs();ai(Wi);var fe=wn;wn|=el,lk.current=null,rB(i,b),w3(),vB(i,b,P),vF(i.containerInfo),i.current=b,Sb(P),yB(b,i,P),Md(),fb(),wn=fe,ai(G),So.transition=W}else i.current=b,w3();var le=Fh;if(Fh?(Fh=!1,ff=i,Zy=P):(Kg=0,cx=null),$=i.pendingLanes,$===$e&&(Vg=null),le||P$(i.current,!1),Cl(b.stateNode,m),Ai&&i.memoizedUpdaters.clear(),jB(),qs(i,Ar()),s!==null)for(var Te=i.onRecoverableError,ke=0;ke<s.length;ke++){var Re=s[ke],ut=Re.stack,At=Re.digest;Te(Re.value,{componentStack:ut,digest:At})}if(ax){ax=!1;var Tt=fk;throw fk=null,Tt}return Fo(Zy,jt)&&i.tag!==tf&&Wu(),$=i.pendingLanes,Fo($,jt)?(hU(),i===gk?Jy++:(Jy=0,gk=i)):Jy=0,nf(),$v(),null}function Wu(){if(ff!==null){var i=mh(Zy),s=zE(Tl,i),p=So.transition,m=Bs();try{return So.transition=null,ai(s),sH()}finally{ai(m),So.transition=p}}return!1}function oH(i){hk.push(i),Fh||(Fh=!0,Ek(Va,function(){return Wu(),null}))}function sH(){if(ff===null)return!1;var i=pk;pk=null;var s=ff,p=Zy;if(ff=null,Zy=$e,(wn&(bo|el))!==Ni)throw new Error("Cannot flush passive effects while already rendering.");mk=!0,lx=!1,bb(p);var m=wn;wn|=el,_B(s.current),wB(s,s.current,p,i);{var b=hk;hk=[];for(var P=0;P<b.length;P++){var $=b[P];aB(s,$)}}sh(),P$(s.current,!0),wn=m,nf(),lx?s===cx?Kg++:(Kg=0,cx=s):Kg=0,mk=!1,lx=!1,yc(s);{var F=s.current.stateNode;F.effectDuration=0,F.passiveEffectDuration=0}return!0}function _$(i){return Vg!==null&&Vg.has(i)}function aH(i){Vg===null?Vg=new Set([i]):Vg.add(i)}function lH(i){ax||(ax=!0,fk=i)}var cH=lH;function T$(i,s,p){var m=jh(p,s),b=C3(i,m,jt),P=of(i,b,jt),$=Ss();P!==null&&(ku(P,jt,$),qs(P,$))}function br(i,s,p){if(eB(p),rS(!1),i.tag===v){T$(i,i,p);return}var m=null;for(m=s;m!==null;){if(m.tag===v){T$(m,i,p);return}else if(m.tag===h){var b=m.type,P=m.stateNode;if(typeof b.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&!_$(P)){var $=jh(p,i),F=UT(m,$,jt),H=of(m,F,jt),W=Ss();H!==null&&(ku(H,jt,W),qs(H,W));return}}m=m.return}l(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,p)}function uH(i,s,p){var m=i.pingCache;m!==null&&m.delete(s);var b=Ss();Hv(i,p),SH(i),ys===i&&Tu(zi,p)&&(Fi===Wy||Fi===ix&&Jp(zi)&&Ar()-dk<f$?Uh(i,$e):sx=an(sx,p)),qs(i,b)}function k$(i,s){s===bn&&(s=VB(i));var p=Ss(),m=Ws(i,s);m!==null&&(ku(m,s,p),qs(m,p))}function dH(i){var s=i.memoizedState,p=bn;s!==null&&(p=s.retryLane),k$(i,p)}function fH(i,s){var p=bn,m;switch(i.tag){case D:m=i.stateNode;var b=i.memoizedState;b!==null&&(p=b.retryLane);break;case ie:m=i.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}m!==null&&m.delete(s),k$(i,p)}function hH(i){return i<120?120:i<480?480:i<1080?1080:i<1920?1920:i<3e3?3e3:i<4320?4320:FB(i/1960)*1960}function pH(){if(Jy>BB)throw Jy=0,gk=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");Kg>HB&&(Kg=0,cx=null,l("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}function gH(){$l.flushLegacyContextWarning(),$l.flushPendingUnsafeLifecycleWarnings()}function P$(i,s){An(i),px(i,Do,OB),s&&px(i,mu,DB),px(i,Do,AB),s&&px(i,mu,$B),er()}function px(i,s,p){for(var m=i,b=null;m!==null;){var P=m.subtreeFlags&s;m!==b&&m.child!==null&&P!==Rt?m=m.child:((m.flags&s)!==Rt&&p(m),m.sibling!==null?m=m.sibling:m=b=m.return)}}var gx=null;function I$(i){{if((wn&bo)!==Ni||!(i.mode&cn))return;var s=i.tag;if(s!==g&&s!==v&&s!==h&&s!==d&&s!==A&&s!==z&&s!==U)return;var p=Vt(i)||"ReactComponent";if(gx!==null){if(gx.has(p))return;gx.add(p)}else gx=new Set([p]);var m=gr;try{An(i),l("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{m?An(i):er()}}}var wk;{var mH=null;wk=function(i,s,p){var m=j$(mH,s);try{return B3(i,s,p)}catch(P){if(I9()||P!==null&&typeof P=="object"&&typeof P.then=="function")throw P;if(bw(),qA(),G3(i,s),j$(s,m),s.mode&Lt&&DT(s),gu(null,B3,null,i,s,p),AE()){var b=xv();typeof b=="object"&&b!==null&&b._suppressLogging&&typeof P=="object"&&P!==null&&!P._suppressLogging&&(P._suppressLogging=!0)}throw P}}}var R$=!1,xk;xk=new Set;function vH(i){if(zr&&!uU())switch(i.tag){case d:case A:case U:{var s=Wr&&Vt(Wr)||"Unknown",p=s;if(!xk.has(p)){xk.add(p);var m=Vt(i)||"Unknown";l("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",m,s,s)}break}case h:{R$||(l("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),R$=!0);break}}}function nS(i,s){if(Ai){var p=i.memoizedUpdaters;p.forEach(function(m){Kv(i,m,s)})}}var Ck={};function Ek(i,s){{var p=Ul.current;return p!==null?(p.push(s),Ck):kp(i,s)}}function M$(i){if(i!==Ck)return db(i)}function A$(){return Ul.current!==null}function yH(i){{if(i.mode&cn){if(!c$())return}else if(!zB()||wn!==Ni||i.tag!==d&&i.tag!==A&&i.tag!==U)return;if(Ul.current===null){var s=gr;try{An(i),l(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`,Vt(i))}finally{s?An(i):er()}}}}function SH(i){i.tag!==tf&&c$()&&Ul.current===null&&l(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`)}function rS(i){g$=i}var tl=null,Yg=null,bH=function(i){tl=i};function Wg(i){{if(tl===null)return i;var s=tl(i);return s===void 0?i:s.current}}function _k(i){return Wg(i)}function Tk(i){{if(tl===null)return i;var s=tl(i);if(s===void 0){if(i!=null&&typeof i.render=="function"){var p=Wg(i.render);if(i.render!==p){var m={$$typeof:st,render:p};return i.displayName!==void 0&&(m.displayName=i.displayName),m}}return i}return s.current}}function $$(i,s){{if(tl===null)return!1;var p=i.elementType,m=s.type,b=!1,P=typeof m=="object"&&m!==null?m.$$typeof:null;switch(i.tag){case h:{typeof m=="function"&&(b=!0);break}case d:{(typeof m=="function"||P===Pt)&&(b=!0);break}case A:{(P===st||P===Pt)&&(b=!0);break}case z:case U:{(P===Jt||P===Pt)&&(b=!0);break}default:return!1}if(b){var $=tl(p);if($!==void 0&&$===tl(m))return!0}return!1}}function O$(i){{if(tl===null||typeof WeakSet!="function")return;Yg===null&&(Yg=new WeakSet),Yg.add(i)}}var wH=function(i,s){{if(tl===null)return;var p=s.staleFamilies,m=s.updatedFamilies;Wu(),Yu(function(){kk(i.current,m,p)})}},xH=function(i,s){{if(i.context!==ma)return;Wu(),Yu(function(){iS(s,i,null,null)})}};function kk(i,s,p){{var m=i.alternate,b=i.child,P=i.sibling,$=i.tag,F=i.type,H=null;switch($){case d:case U:case h:H=F;break;case A:H=F.render;break}if(tl===null)throw new Error("Expected resolveFamily to be set during hot reload.");var W=!1,G=!1;if(H!==null){var fe=tl(H);fe!==void 0&&(p.has(fe)?G=!0:s.has(fe)&&($===h?G=!0:W=!0))}if(Yg!==null&&(Yg.has(i)||m!==null&&Yg.has(m))&&(G=!0),G&&(i._debugNeedsRemount=!0),G||W){var le=Ws(i,jt);le!==null&&Ui(le,i,jt,rr)}b!==null&&!G&&kk(b,s,p),P!==null&&kk(P,s,p)}}var CH=function(i,s){{var p=new Set,m=new Set(s.map(function(b){return b.current}));return Pk(i.current,m,p),p}};function Pk(i,s,p){{var m=i.child,b=i.sibling,P=i.tag,$=i.type,F=null;switch(P){case d:case U:case h:F=$;break;case A:F=$.render;break}var H=!1;F!==null&&s.has(F)&&(H=!0),H?EH(i,p):m!==null&&Pk(m,s,p),b!==null&&Pk(b,s,p)}}function EH(i,s){{var p=_H(i,s);if(p)return;for(var m=i;;){switch(m.tag){case w:s.add(m.stateNode);return;case S:s.add(m.stateNode.containerInfo);return;case v:s.add(m.stateNode.containerInfo);return}if(m.return===null)throw new Error("Expected to reach root first.");m=m.return}}}function _H(i,s){for(var p=i,m=!1;;){if(p.tag===w)m=!0,s.add(p.stateNode);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)return m;for(;p.sibling===null;){if(p.return===null||p.return===i)return m;p=p.return}p.sibling.return=p.return,p=p.sibling}return!1}var Ik;{Ik=!1;try{var D$=Object.preventExtensions({})}catch{Ik=!0}}function TH(i,s,p,m){this.tag=i,this.key=p,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=s,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=m,this.flags=Rt,this.subtreeFlags=Rt,this.deletions=null,this.lanes=$e,this.childLanes=$e,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,!Ik&&typeof Object.preventExtensions=="function"&&Object.preventExtensions(this)}var va=function(i,s,p,m){return new TH(i,s,p,m)};function Rk(i){var s=i.prototype;return!!(s&&s.isReactComponent)}function kH(i){return typeof i=="function"&&!Rk(i)&&i.defaultProps===void 0}function PH(i){if(typeof i=="function")return Rk(i)?h:d;if(i!=null){var s=i.$$typeof;if(s===st)return A;if(s===Jt)return z}return g}function Hh(i,s){var p=i.alternate;p===null?(p=va(i.tag,s,i.key,i.mode),p.elementType=i.elementType,p.type=i.type,p.stateNode=i.stateNode,p._debugSource=i._debugSource,p._debugOwner=i._debugOwner,p._debugHookTypes=i._debugHookTypes,p.alternate=i,i.alternate=p):(p.pendingProps=s,p.type=i.type,p.flags=Rt,p.subtreeFlags=Rt,p.deletions=null,p.actualDuration=0,p.actualStartTime=-1),p.flags=i.flags&Mi,p.childLanes=i.childLanes,p.lanes=i.lanes,p.child=i.child,p.memoizedProps=i.memoizedProps,p.memoizedState=i.memoizedState,p.updateQueue=i.updateQueue;var m=i.dependencies;switch(p.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},p.sibling=i.sibling,p.index=i.index,p.ref=i.ref,p.selfBaseDuration=i.selfBaseDuration,p.treeBaseDuration=i.treeBaseDuration,p._debugNeedsRemount=i._debugNeedsRemount,p.tag){case g:case d:case U:p.type=Wg(i.type);break;case h:p.type=_k(i.type);break;case A:p.type=Tk(i.type);break}return p}function IH(i,s){i.flags&=Mi|mr;var p=i.alternate;if(p===null)i.childLanes=$e,i.lanes=s,i.child=null,i.subtreeFlags=Rt,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null,i.selfBaseDuration=0,i.treeBaseDuration=0;else{i.childLanes=p.childLanes,i.lanes=p.lanes,i.child=p.child,i.subtreeFlags=Rt,i.deletions=null,i.memoizedProps=p.memoizedProps,i.memoizedState=p.memoizedState,i.updateQueue=p.updateQueue,i.type=p.type;var m=p.dependencies;i.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},i.selfBaseDuration=p.selfBaseDuration,i.treeBaseDuration=p.treeBaseDuration}return i}function RH(i,s,p){var m;return i===fw?(m=cn,s===!0&&(m|=$r,m|=Fs)):m=Ot,Ai&&(m|=Lt),va(v,null,null,m)}function Mk(i,s,p,m,b,P){var $=g,F=i;if(typeof i=="function")Rk(i)?($=h,F=_k(F)):F=Wg(F);else if(typeof i=="string")$=w;else e:switch(i){case Ii:return gf(p.children,b,P,s);case yi:$=E,b|=$r,(b&cn)!==Ot&&(b|=Fs);break;case ne:return MH(p,b,P,s);case qt:return AH(p,b,P,s);case Zt:return $H(p,b,P,s);case Wn:return L$(p,b,P,s);case pr:case Nr:case As:case rc:case Yn:default:{if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ze:$=L;break e;case tt:$=R;break e;case st:$=A,F=Tk(F);break e;case Jt:$=z;break e;case Pt:$=Y,F=null;break e}var H="";{(i===void 0||typeof i=="object"&&i!==null&&Object.keys(i).length===0)&&(H+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var W=m?Vt(m):null;W&&(H+=`

Check the render method of \``+W+"`.")}throw new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(i==null?i:typeof i)+"."+H))}}var G=va($,p,s,b);return G.elementType=i,G.type=F,G.lanes=P,G._debugOwner=m,G}function Ak(i,s,p){var m=null;m=i._owner;var b=i.type,P=i.key,$=i.props,F=Mk(b,P,$,m,s,p);return F._debugSource=i._source,F._debugOwner=i._owner,F}function gf(i,s,p,m){var b=va(C,i,m,s);return b.lanes=p,b}function MH(i,s,p,m){typeof i.id!="string"&&l('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof i.id);var b=va(O,i,m,s|Lt);return b.elementType=ne,b.lanes=p,b.stateNode={effectDuration:0,passiveEffectDuration:0},b}function AH(i,s,p,m){var b=va(D,i,m,s);return b.elementType=qt,b.lanes=p,b}function $H(i,s,p,m){var b=va(ie,i,m,s);return b.elementType=Zt,b.lanes=p,b}function L$(i,s,p,m){var b=va(ae,i,m,s);b.elementType=Wn,b.lanes=p;var P={isHidden:!1};return b.stateNode=P,b}function $k(i,s,p){var m=va(k,i,null,s);return m.lanes=p,m}function OH(){var i=va(w,null,null,Ot);return i.elementType="DELETED",i}function DH(i){var s=va(X,null,null,Ot);return s.stateNode=i,s}function Ok(i,s,p){var m=i.children!==null?i.children:[],b=va(S,m,i.key,s);return b.lanes=p,b.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},b}function j$(i,s){return i===null&&(i=va(g,null,null,Ot)),i.tag=s.tag,i.key=s.key,i.elementType=s.elementType,i.type=s.type,i.stateNode=s.stateNode,i.return=s.return,i.child=s.child,i.sibling=s.sibling,i.index=s.index,i.ref=s.ref,i.pendingProps=s.pendingProps,i.memoizedProps=s.memoizedProps,i.updateQueue=s.updateQueue,i.memoizedState=s.memoizedState,i.dependencies=s.dependencies,i.mode=s.mode,i.flags=s.flags,i.subtreeFlags=s.subtreeFlags,i.deletions=s.deletions,i.lanes=s.lanes,i.childLanes=s.childLanes,i.alternate=s.alternate,i.actualDuration=s.actualDuration,i.actualStartTime=s.actualStartTime,i.selfBaseDuration=s.selfBaseDuration,i.treeBaseDuration=s.treeBaseDuration,i._debugSource=s._debugSource,i._debugOwner=s._debugOwner,i._debugNeedsRemount=s._debugNeedsRemount,i._debugHookTypes=s._debugHookTypes,i}function LH(i,s,p,m,b){this.tag=s,this.containerInfo=i,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=g_,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=bn,this.eventTimes=tg($e),this.expirationTimes=tg(rr),this.pendingLanes=$e,this.suspendedLanes=$e,this.pingedLanes=$e,this.expiredLanes=$e,this.mutableReadLanes=$e,this.finishedLanes=$e,this.entangledLanes=$e,this.entanglements=tg($e),this.identifierPrefix=m,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0;{this.memoizedUpdaters=new Set;for(var P=this.pendingUpdatersLaneMap=[],$=0;$<yr;$++)P.push(new Set)}switch(s){case fw:this._debugRootType=p?"hydrateRoot()":"createRoot()";break;case tf:this._debugRootType=p?"hydrate()":"render()";break}}function N$(i,s,p,m,b,P,$,F,H,W){var G=new LH(i,s,p,F,H),fe=RH(s,P);G.current=fe,fe.stateNode=G;{var le={element:m,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null};fe.memoizedState=le}return B_(fe),G}var Dk="18.2.0";function jH(i,s,p){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return fi(m),{$$typeof:vi,key:m==null?null:""+m,children:i,containerInfo:s,implementation:p}}var Lk,jk;Lk=!1,jk={};function z$(i){if(!i)return ma;var s=Ds(i),p=b9(s);if(s.tag===h){var m=s.type;if(Mc(m))return dA(s,m,p)}return p}function NH(i,s){{var p=Ds(i);if(p===void 0){if(typeof i.render=="function")throw new Error("Unable to find node on an unmounted component.");var m=Object.keys(i).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+m)}var b=zs(p);if(b===null)return null;if(b.mode&$r){var P=Vt(p)||"Component";if(!jk[P]){jk[P]=!0;var $=gr;try{An(b),p.mode&$r?l("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",s,s,P):l("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",s,s,P)}finally{$?An($):er()}}}return b.stateNode}}function F$(i,s,p,m,b,P,$,F){var H=!1,W=null;return N$(i,s,H,W,p,m,b,P,$)}function U$(i,s,p,m,b,P,$,F,H,W){var G=!0,fe=N$(p,m,G,i,b,P,$,F,H);fe.context=z$(null);var le=fe.current,Te=Ss(),ke=hf(le),Re=Bu(Te,ke);return Re.callback=s??null,of(le,Re,ke),KB(fe,ke,Te),fe}function iS(i,s,p,m){hb(s,i);var b=s.current,P=Ss(),$=hf(b);yu($);var F=z$(p);s.context===null?s.context=F:s.pendingContext=F,zr&&gr!==null&&!Lk&&(Lk=!0,l(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,Vt(gr)||"Unknown"));var H=Bu(P,$);H.payload={element:i},m=m===void 0?null:m,m!==null&&(typeof m!="function"&&l("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",m),H.callback=m);var W=of(b,H,$);return W!==null&&(Ui(W,b,$,P),_w(W,b,$)),$}function mx(i){var s=i.current;if(!s.child)return null;switch(s.child.tag){case w:return s.child.stateNode;default:return s.child.stateNode}}function zH(i){switch(i.tag){case v:{var s=i.stateNode;if(li(s)){var p=DE(s);XB(s,p)}break}case D:{Yu(function(){var b=Ws(i,jt);if(b!==null){var P=Ss();Ui(b,i,jt,P)}});var m=jt;Nk(i,m);break}}}function B$(i,s){var p=i.memoizedState;p!==null&&p.dehydrated!==null&&(p.retryLane=_b(p.retryLane,s))}function Nk(i,s){B$(i,s);var p=i.alternate;p&&B$(p,s)}function FH(i){if(i.tag===D){var s=$d,p=Ws(i,s);if(p!==null){var m=Ss();Ui(p,i,s,m)}Nk(i,s)}}function UH(i){if(i.tag===D){var s=hf(i),p=Ws(i,s);if(p!==null){var m=Ss();Ui(p,i,s,m)}Nk(i,s)}}function H$(i){var s=ub(i);return s===null?null:s.stateNode}var V$=function(i){return null};function BH(i){return V$(i)}var K$=function(i){return!1};function HH(i){return K$(i)}var Y$=null,W$=null,G$=null,X$=null,q$=null,Q$=null,Z$=null,J$=null,eO=null;{var tO=function(i,s,p){var m=s[p],b=yn(i)?i.slice():tn({},i);return p+1===s.length?(yn(b)?b.splice(m,1):delete b[m],b):(b[m]=tO(i[m],s,p+1),b)},nO=function(i,s){return tO(i,s,0)},rO=function(i,s,p,m){var b=s[m],P=yn(i)?i.slice():tn({},i);if(m+1===s.length){var $=p[m];P[$]=P[b],yn(P)?P.splice(b,1):delete P[b]}else P[b]=rO(i[b],s,p,m+1);return P},iO=function(i,s,p){if(s.length!==p.length){a("copyWithRename() expects paths of the same length");return}else for(var m=0;m<p.length-1;m++)if(s[m]!==p[m]){a("copyWithRename() expects paths to be the same except for the deepest key");return}return rO(i,s,p,0)},oO=function(i,s,p,m){if(p>=s.length)return m;var b=s[p],P=yn(i)?i.slice():tn({},i);return P[b]=oO(i[b],s,p+1,m),P},sO=function(i,s,p){return oO(i,s,0,p)},zk=function(i,s){for(var p=i.memoizedState;p!==null&&s>0;)p=p.next,s--;return p};Y$=function(i,s,p,m){var b=zk(i,s);if(b!==null){var P=sO(b.memoizedState,p,m);b.memoizedState=P,b.baseState=P,i.memoizedProps=tn({},i.memoizedProps);var $=Ws(i,jt);$!==null&&Ui($,i,jt,rr)}},W$=function(i,s,p){var m=zk(i,s);if(m!==null){var b=nO(m.memoizedState,p);m.memoizedState=b,m.baseState=b,i.memoizedProps=tn({},i.memoizedProps);var P=Ws(i,jt);P!==null&&Ui(P,i,jt,rr)}},G$=function(i,s,p,m){var b=zk(i,s);if(b!==null){var P=iO(b.memoizedState,p,m);b.memoizedState=P,b.baseState=P,i.memoizedProps=tn({},i.memoizedProps);var $=Ws(i,jt);$!==null&&Ui($,i,jt,rr)}},X$=function(i,s,p){i.pendingProps=sO(i.memoizedProps,s,p),i.alternate&&(i.alternate.pendingProps=i.pendingProps);var m=Ws(i,jt);m!==null&&Ui(m,i,jt,rr)},q$=function(i,s){i.pendingProps=nO(i.memoizedProps,s),i.alternate&&(i.alternate.pendingProps=i.pendingProps);var p=Ws(i,jt);p!==null&&Ui(p,i,jt,rr)},Q$=function(i,s,p){i.pendingProps=iO(i.memoizedProps,s,p),i.alternate&&(i.alternate.pendingProps=i.pendingProps);var m=Ws(i,jt);m!==null&&Ui(m,i,jt,rr)},Z$=function(i){var s=Ws(i,jt);s!==null&&Ui(s,i,jt,rr)},J$=function(i){V$=i},eO=function(i){K$=i}}function VH(i){var s=zs(i);return s===null?null:s.stateNode}function KH(i){return null}function YH(){return gr}function WH(i){var s=i.findFiberByHostInstance,p=e.ReactCurrentDispatcher;return Mv({bundleType:i.bundleType,version:i.version,rendererPackageName:i.rendererPackageName,rendererConfig:i.rendererConfig,overrideHookState:Y$,overrideHookStateDeletePath:W$,overrideHookStateRenamePath:G$,overrideProps:X$,overridePropsDeletePath:q$,overridePropsRenamePath:Q$,setErrorHandler:J$,setSuspenseHandler:eO,scheduleUpdate:Z$,currentDispatcherRef:p,findHostInstanceByFiber:VH,findFiberByHostInstance:s||KH,findHostInstancesForRefresh:CH,scheduleRefresh:wH,scheduleRoot:xH,setRefreshHandler:bH,getCurrentFiber:YH,reconcilerVersion:Dk})}var aO=typeof reportError=="function"?reportError:function(i){console.error(i)};function Fk(i){this._internalRoot=i}vx.prototype.render=Fk.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw new Error("Cannot update an unmounted root.");{typeof arguments[1]=="function"?l("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):yx(arguments[1])?l("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof arguments[1]<"u"&&l("You passed a second argument to root.render(...) but it only accepts one argument.");var p=s.containerInfo;if(p.nodeType!==Qr){var m=H$(s.current);m&&m.parentNode!==p&&l("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}}iS(i,s,null,null)},vx.prototype.unmount=Fk.prototype.unmount=function(){typeof arguments[0]=="function"&&l("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;S$()&&l("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),Yu(function(){iS(null,i,null,null)}),sA(s)}};function GH(i,s){if(!yx(i))throw new Error("createRoot(...): Target container is not a DOM element.");lO(i);var p=!1,m=!1,b="",P=aO;s!=null&&(s.hydrate?a("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof s=="object"&&s!==null&&s.$$typeof===Ms&&l(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),s.unstable_strictMode===!0&&(p=!0),s.identifierPrefix!==void 0&&(b=s.identifierPrefix),s.onRecoverableError!==void 0&&(P=s.onRecoverableError),s.transitionCallbacks!==void 0&&s.transitionCallbacks);var $=F$(i,fw,null,p,m,b,P);ow($.current,i);var F=i.nodeType===Qr?i.parentNode:i;return fy(F),new Fk($)}function vx(i){this._internalRoot=i}function XH(i){i&&$b(i)}vx.prototype.unstable_scheduleHydration=XH;function qH(i,s,p){if(!yx(i))throw new Error("hydrateRoot(...): Target container is not a DOM element.");lO(i),s===void 0&&l("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var m=p??null,b=p!=null&&p.hydratedSources||null,P=!1,$=!1,F="",H=aO;p!=null&&(p.unstable_strictMode===!0&&(P=!0),p.identifierPrefix!==void 0&&(F=p.identifierPrefix),p.onRecoverableError!==void 0&&(H=p.onRecoverableError));var W=U$(s,null,i,fw,m,P,$,F,H);if(ow(W.current,i),fy(i),b)for(var G=0;G<b.length;G++){var fe=b[G];iU(W,fe)}return new vx(W)}function yx(i){return!!(i&&(i.nodeType===Ao||i.nodeType===da||i.nodeType===cu||!Ce))}function oS(i){return!!(i&&(i.nodeType===Ao||i.nodeType===da||i.nodeType===cu||i.nodeType===Qr&&i.nodeValue===" react-mount-point-unstable "))}function lO(i){i.nodeType===Ao&&i.tagName&&i.tagName.toUpperCase()==="BODY"&&l("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app."),Cy(i)&&(i._reactRootContainer?l("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):l("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}var QH=e.ReactCurrentOwner,cO;cO=function(i){if(i._reactRootContainer&&i.nodeType!==Qr){var s=H$(i._reactRootContainer.current);s&&s.parentNode!==i&&l("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var p=!!i._reactRootContainer,m=Uk(i),b=!!(m&&Jd(m));b&&!p&&l("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),i.nodeType===Ao&&i.tagName&&i.tagName.toUpperCase()==="BODY"&&l("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};function Uk(i){return i?i.nodeType===da?i.documentElement:i.firstChild:null}function uO(){}function ZH(i,s,p,m,b){if(b){if(typeof m=="function"){var P=m;m=function(){var le=mx($);P.call(le)}}var $=U$(s,m,i,tf,null,!1,!1,"",uO);i._reactRootContainer=$,ow($.current,i);var F=i.nodeType===Qr?i.parentNode:i;return fy(F),Yu(),$}else{for(var H;H=i.lastChild;)i.removeChild(H);if(typeof m=="function"){var W=m;m=function(){var le=mx(G);W.call(le)}}var G=F$(i,tf,null,!1,!1,"",uO);i._reactRootContainer=G,ow(G.current,i);var fe=i.nodeType===Qr?i.parentNode:i;return fy(fe),Yu(function(){iS(s,G,p,m)}),G}}function JH(i,s){i!==null&&typeof i!="function"&&l("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",s,i)}function Sx(i,s,p,m,b){cO(p),JH(b===void 0?null:b,"render");var P=p._reactRootContainer,$;if(!P)$=ZH(p,s,i,b,m);else{if($=P,typeof b=="function"){var F=b;b=function(){var H=mx($);F.call(H)}}iS(s,$,i,b)}return mx($)}function eV(i){{var s=QH.current;if(s!==null&&s.stateNode!==null){var p=s.stateNode._warnedAboutRefsInRender;p||l("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",on(s.type)||"A component"),s.stateNode._warnedAboutRefsInRender=!0}}return i==null?null:i.nodeType===Ao?i:NH(i,"findDOMNode")}function tV(i,s,p){if(l("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!oS(s))throw new Error("Target container is not a DOM element.");{var m=Cy(s)&&s._reactRootContainer===void 0;m&&l("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?")}return Sx(null,i,s,!0,p)}function nV(i,s,p){if(l("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!oS(s))throw new Error("Target container is not a DOM element.");{var m=Cy(s)&&s._reactRootContainer===void 0;m&&l("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?")}return Sx(null,i,s,!1,p)}function rV(i,s,p,m){if(l("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!oS(p))throw new Error("Target container is not a DOM element.");if(i==null||!rh(i))throw new Error("parentComponent must be a valid React Component");return Sx(i,s,p,!1,m)}function iV(i){if(!oS(i))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");{var s=Cy(i)&&i._reactRootContainer===void 0;s&&l("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?")}if(i._reactRootContainer){{var p=Uk(i),m=p&&!Jd(p);m&&l("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.")}return Yu(function(){Sx(null,null,i,!1,function(){i._reactRootContainer=null,sA(i)})}),!0}else{{var b=Uk(i),P=!!(b&&Jd(b)),$=i.nodeType===Ao&&oS(i.parentNode)&&!!i.parentNode._reactRootContainer;P&&l("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",$?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component.")}return!1}}ht(zH),kb(FH),yh(UH),Gv(Bs),Ib(gh),(typeof Map!="function"||Map.prototype==null||typeof Map.prototype.forEach!="function"||typeof Set!="function"||Set.prototype==null||typeof Set.prototype.clear!="function"||typeof Set.prototype.forEach!="function")&&l("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),ab(aF),xp(yk,qB,Yu);function oV(i,s){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!yx(s))throw new Error("Target container is not a DOM element.");return jH(i,s,null,p)}function sV(i,s,p,m){return rV(i,s,p,m)}var Bk={usingClientEntryPoint:!1,Events:[Jd,Eg,sw,wp,eh,yk]};function aV(i,s){return Bk.usingClientEntryPoint||l('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),GH(i,s)}function lV(i,s,p){return Bk.usingClientEntryPoint||l('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),qH(i,s,p)}function cV(i){return S$()&&l("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),Yu(i)}var uV=WH({findFiberByHostInstance:Ph,bundleType:1,version:Dk,rendererPackageName:"react-dom"});if(!uV&&Ht&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var dO=window.location.protocol;/^(https?|file):$/.test(dO)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+(dO==="file:"?`
You might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq`:""),"font-weight:bold")}Zs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bk,Zs.createPortal=oV,Zs.createRoot=aV,Zs.findDOMNode=eV,Zs.flushSync=cV,Zs.hydrate=tV,Zs.hydrateRoot=lV,Zs.render=nV,Zs.unmountComponentAtNode=iV,Zs.unstable_batchedUpdates=yk,Zs.unstable_renderSubtreeIntoContainer=sV,Zs.version=Dk,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Zs}function aL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function")){if(process.env.NODE_ENV!=="production")throw new Error("^_^");try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aL)}catch(t){console.error(t)}}}process.env.NODE_ENV==="production"?(aL(),OP.exports=wV()):OP.exports=xV();var Lm=OP.exports;const CV=Of(Lm);var aS=Lm;if(process.env.NODE_ENV==="production")nd.createRoot=aS.createRoot,nd.hydrateRoot=aS.hydrateRoot;else{var wx=aS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;nd.createRoot=function(t,n){wx.usingClientEntryPoint=!0;try{return aS.createRoot(t,n)}finally{wx.usingClientEntryPoint=!1}},nd.hydrateRoot=function(t,n,e){wx.usingClientEntryPoint=!0;try{return aS.hydrateRoot(t,n,e)}finally{wx.usingClientEntryPoint=!1}}}const EV='<symbol id="iconWhiteboard"  viewBox="0 0 1024 1024"><path d="M682.197333 170.666667l-130.858666 130.688a149.333333 149.333333 0 0 0-33.194667 50.346666l-3.413333 9.557334-31.573334 97.92a96 96 0 0 0 112.341334 123.093333l6.656-1.706667 99.328-29.866666a149.418667 149.418667 0 0 0 54.826666-30.122667l7.722667-7.210667L938.666667 339.029333v375.850667a138.666667 138.666667 0 0 1-138.666667 138.666667H224A138.666667 138.666667 0 0 1 85.333333 714.88v-179.2l3.242667-1.322667 3.114667-1.749333 160.426666-100.821333 4.181334-2.218667a32 32 0 0 1 43.093333 39.808l-1.962667 4.437333-51.541333 97.536-2.986667 6.186667a96 96 0 0 0 127.701334 125.994667l7.253333-3.669334 75.306667-42.496 3.626666-2.432a32 32 0 0 0-31.36-55.125333l-3.925333 1.92-75.050667 42.368-4.181333 1.962667a32 32 0 0 1-41.557333-40.832l1.749333-3.968 51.541333-97.536 3.413334-7.082667a96 96 0 0 0-133.162667-122.624l-6.229333 3.584L85.333333 461.013333V309.333333a138.666667 138.666667 0 0 1 130.816-138.453333L224 170.666667H682.24z m221.312-19.413334l5.546667 5.12 5.12 5.546667a96.810667 96.810667 0 0 1-5.162667 131.413333l-182.656 182.314667a96 96 0 0 1-40.234666 23.978667l-99.285334 29.866666a42.666667 42.666667 0 0 1-52.906666-53.973333l31.573333-97.92c4.650667-14.506667 12.714667-27.733333 23.509333-38.528l183.04-182.741333a96.853333 96.853333 0 0 1 131.413334-5.12z"></path></symbol>',UI=t=>`/data/storage/petal/siyuan-plugin-whiteboard/${t}.whiteboard`,BI=(t,n)=>{const e=new FormData,r=UI(t);let o;typeof n=="object"?o=new File([new Blob([JSON.stringify(n)],{type:"application/json"})],r.split("/").pop()):o=new File([new Blob([n])],r.split("/").pop()),e.append("path",r),e.append("file",o),e.append("isDir","false"),fetch("/api/file/putFile",{method:"POST",body:e})},lL=t=>fetch("/api/file/removeFile",{method:"POST",body:JSON.stringify({path:UI(t)})}),HI=t=>fetch("/api/file/getFile",{method:"POST",body:JSON.stringify({path:UI(t)})}).then(n=>n.json()),cL=()=>fetch("/api/file/readDir",{method:"POST",body:JSON.stringify({path:"/data/storage/petal/siyuan-plugin-whiteboard"})}).then(t=>t.json()).then(t=>((t==null?void 0:t.data)||[]).filter(n=>n.name.endsWith(".whiteboard")).map(n=>n.name.split(".")[0]));function _V(t){BI(t,{})}function TV(t,n){HI(t).then(e=>{BI(n,e),lL(t)})}function kV(t){lL(t)}var DP={exports:{}},lS={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SO;function PV(){if(SO)return lS;SO=1;var t=I,n=Symbol.for("react.element"),e=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,h){var g,v={},S=null,w=null;h!==void 0&&(S=""+h),d.key!==void 0&&(S=""+d.key),d.ref!==void 0&&(w=d.ref);for(g in d)r.call(d,g)&&!a.hasOwnProperty(g)&&(v[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)v[g]===void 0&&(v[g]=d[g]);return{$$typeof:n,type:u,key:S,ref:w,props:v,_owner:o.current}}return lS.Fragment=e,lS.jsx=l,lS.jsxs=l,lS}var cS={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bO;function IV(){return bO||(bO=1,process.env.NODE_ENV!=="production"&&function(){var t=I,n=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),k=Symbol.iterator,C="@@iterator";function E(ne){if(ne===null||typeof ne!="object")return null;var ze=k&&ne[k]||ne[C];return typeof ze=="function"?ze:null}var R=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function L(ne){{for(var ze=arguments.length,tt=new Array(ze>1?ze-1:0),st=1;st<ze;st++)tt[st-1]=arguments[st];A("error",ne,tt)}}function A(ne,ze,tt){{var st=R.ReactDebugCurrentFrame,qt=st.getStackAddendum();qt!==""&&(ze+="%s",tt=tt.concat([qt]));var Zt=tt.map(function(Jt){return String(Jt)});Zt.unshift("Warning: "+ze),Function.prototype.apply.call(console[ne],console,Zt)}}var O=!1,D=!1,z=!1,U=!1,Y=!1,q;q=Symbol.for("react.module.reference");function X(ne){return!!(typeof ne=="string"||typeof ne=="function"||ne===r||ne===a||Y||ne===o||ne===h||ne===g||U||ne===w||O||D||z||typeof ne=="object"&&ne!==null&&(ne.$$typeof===S||ne.$$typeof===v||ne.$$typeof===l||ne.$$typeof===u||ne.$$typeof===d||ne.$$typeof===q||ne.getModuleId!==void 0))}function ie(ne,ze,tt){var st=ne.displayName;if(st)return st;var qt=ze.displayName||ze.name||"";return qt!==""?tt+"("+qt+")":tt}function pe(ne){return ne.displayName||"Context"}function ae(ne){if(ne==null)return null;if(typeof ne.tag=="number"&&L("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof ne=="function")return ne.displayName||ne.name||null;if(typeof ne=="string")return ne;switch(ne){case r:return"Fragment";case e:return"Portal";case a:return"Profiler";case o:return"StrictMode";case h:return"Suspense";case g:return"SuspenseList"}if(typeof ne=="object")switch(ne.$$typeof){case u:var ze=ne;return pe(ze)+".Consumer";case l:var tt=ne;return pe(tt._context)+".Provider";case d:return ie(ne,ne.render,"ForwardRef");case v:var st=ne.displayName||null;return st!==null?st:ae(ne.type)||"Memo";case S:{var qt=ne,Zt=qt._payload,Jt=qt._init;try{return ae(Jt(Zt))}catch{return null}}}return null}var te=Object.assign,he=0,ce,ge,me,we,V,Z,Ce;function Ae(){}Ae.__reactDisabledLog=!0;function De(){{if(he===0){ce=console.log,ge=console.info,me=console.warn,we=console.error,V=console.group,Z=console.groupCollapsed,Ce=console.groupEnd;var ne={configurable:!0,enumerable:!0,value:Ae,writable:!0};Object.defineProperties(console,{info:ne,log:ne,warn:ne,error:ne,group:ne,groupCollapsed:ne,groupEnd:ne})}he++}}function Ie(){{if(he--,he===0){var ne={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:te({},ne,{value:ce}),info:te({},ne,{value:ge}),warn:te({},ne,{value:me}),error:te({},ne,{value:we}),group:te({},ne,{value:V}),groupCollapsed:te({},ne,{value:Z}),groupEnd:te({},ne,{value:Ce})})}he<0&&L("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Ne=R.ReactCurrentDispatcher,Ve;function Ke(ne,ze,tt){{if(Ve===void 0)try{throw Error()}catch(qt){var st=qt.stack.trim().match(/\n( *(at )?)/);Ve=st&&st[1]||""}return`
`+Ve+ne}}var Xe=!1,at;{var _t=typeof WeakMap=="function"?WeakMap:Map;at=new _t}function We(ne,ze){if(!ne||Xe)return"";{var tt=at.get(ne);if(tt!==void 0)return tt}var st;Xe=!0;var qt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Zt;Zt=Ne.current,Ne.current=null,De();try{if(ze){var Jt=function(){throw Error()};if(Object.defineProperty(Jt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Jt,[])}catch(vn){st=vn}Reflect.construct(ne,[],Jt)}else{try{Jt.call()}catch(vn){st=vn}ne.call(Jt.prototype)}}else{try{throw Error()}catch(vn){st=vn}ne()}}catch(vn){if(vn&&st&&typeof vn.stack=="string"){for(var Pt=vn.stack.split(`
`),Nr=st.stack.split(`
`),Yn=Pt.length-1,Wn=Nr.length-1;Yn>=1&&Wn>=0&&Pt[Yn]!==Nr[Wn];)Wn--;for(;Yn>=1&&Wn>=0;Yn--,Wn--)if(Pt[Yn]!==Nr[Wn]){if(Yn!==1||Wn!==1)do if(Yn--,Wn--,Wn<0||Pt[Yn]!==Nr[Wn]){var pr=`
`+Pt[Yn].replace(" at new "," at ");return ne.displayName&&pr.includes("<anonymous>")&&(pr=pr.replace("<anonymous>",ne.displayName)),typeof ne=="function"&&at.set(ne,pr),pr}while(Yn>=1&&Wn>=0);break}}}finally{Xe=!1,Ne.current=Zt,Ie(),Error.prepareStackTrace=qt}var As=ne?ne.displayName||ne.name:"",rc=As?Ke(As):"";return typeof ne=="function"&&at.set(ne,rc),rc}function Ht(ne,ze,tt){return We(ne,!1)}function dn(ne){var ze=ne.prototype;return!!(ze&&ze.isReactComponent)}function Xt(ne,ze,tt){if(ne==null)return"";if(typeof ne=="function")return We(ne,dn(ne));if(typeof ne=="string")return Ke(ne);switch(ne){case h:return Ke("Suspense");case g:return Ke("SuspenseList")}if(typeof ne=="object")switch(ne.$$typeof){case d:return Ht(ne.render);case v:return Xt(ne.type,ze,tt);case S:{var st=ne,qt=st._payload,Zt=st._init;try{return Xt(Zt(qt),ze,tt)}catch{}}}return""}var ln=Object.prototype.hasOwnProperty,jn={},qr=R.ReactDebugCurrentFrame;function fi(ne){if(ne){var ze=ne._owner,tt=Xt(ne.type,ne._source,ze?ze.type:null);qr.setExtraStackFrame(tt)}else qr.setExtraStackFrame(null)}function jr(ne,ze,tt,st,qt){{var Zt=Function.call.bind(ln);for(var Jt in ne)if(Zt(ne,Jt)){var Pt=void 0;try{if(typeof ne[Jt]!="function"){var Nr=Error((st||"React class")+": "+tt+" type `"+Jt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof ne[Jt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Nr.name="Invariant Violation",Nr}Pt=ne[Jt](ze,Jt,st,tt,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Yn){Pt=Yn}Pt&&!(Pt instanceof Error)&&(fi(qt),L("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",st||"React class",tt,Jt,typeof Pt),fi(null)),Pt instanceof Error&&!(Pt.message in jn)&&(jn[Pt.message]=!0,fi(qt),L("Failed %s type: %s",tt,Pt.message),fi(null))}}}var Mr=Array.isArray;function Bi(ne){return Mr(ne)}function hi(ne){{var ze=typeof Symbol=="function"&&Symbol.toStringTag,tt=ze&&ne[Symbol.toStringTag]||ne.constructor.name||"Object";return tt}}function io(ne){try{return ri(ne),!1}catch{return!0}}function ri(ne){return""+ne}function Hi(ne){if(io(ne))return L("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",hi(ne)),ri(ne)}var Kn=R.ReactCurrentOwner,ii={key:!0,ref:!0,__self:!0,__source:!0},ss,wr,et;et={};function wt(ne){if(ln.call(ne,"ref")){var ze=Object.getOwnPropertyDescriptor(ne,"ref").get;if(ze&&ze.isReactWarning)return!1}return ne.ref!==void 0}function rn(ne){if(ln.call(ne,"key")){var ze=Object.getOwnPropertyDescriptor(ne,"key").get;if(ze&&ze.isReactWarning)return!1}return ne.key!==void 0}function En(ne,ze){if(typeof ne.ref=="string"&&Kn.current&&ze&&Kn.current.stateNode!==ze){var tt=ae(Kn.current.type);et[tt]||(L('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ae(Kn.current.type),ne.ref),et[tt]=!0)}}function Sn(ne,ze){{var tt=function(){ss||(ss=!0,L("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ze))};tt.isReactWarning=!0,Object.defineProperty(ne,"key",{get:tt,configurable:!0})}}function xr(ne,ze){{var tt=function(){wr||(wr=!0,L("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ze))};tt.isReactWarning=!0,Object.defineProperty(ne,"ref",{get:tt,configurable:!0})}}var ar=function(ne,ze,tt,st,qt,Zt,Jt){var Pt={$$typeof:n,type:ne,key:ze,ref:tt,props:Jt,_owner:Zt};return Pt._store={},Object.defineProperty(Pt._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Pt,"_self",{configurable:!1,enumerable:!1,writable:!1,value:st}),Object.defineProperty(Pt,"_source",{configurable:!1,enumerable:!1,writable:!1,value:qt}),Object.freeze&&(Object.freeze(Pt.props),Object.freeze(Pt)),Pt};function pi(ne,ze,tt,st,qt){{var Zt,Jt={},Pt=null,Nr=null;tt!==void 0&&(Hi(tt),Pt=""+tt),rn(ze)&&(Hi(ze.key),Pt=""+ze.key),wt(ze)&&(Nr=ze.ref,En(ze,qt));for(Zt in ze)ln.call(ze,Zt)&&!ii.hasOwnProperty(Zt)&&(Jt[Zt]=ze[Zt]);if(ne&&ne.defaultProps){var Yn=ne.defaultProps;for(Zt in Yn)Jt[Zt]===void 0&&(Jt[Zt]=Yn[Zt])}if(Pt||Nr){var Wn=typeof ne=="function"?ne.displayName||ne.name||"Unknown":ne;Pt&&Sn(Jt,Wn),Nr&&xr(Jt,Wn)}return ar(ne,Pt,Nr,qt,st,Kn.current,Jt)}}var fn=R.ReactCurrentOwner,gi=R.ReactDebugCurrentFrame;function Rn(ne){if(ne){var ze=ne._owner,tt=Xt(ne.type,ne._source,ze?ze.type:null);gi.setExtraStackFrame(tt)}else gi.setExtraStackFrame(null)}var Mn;Mn=!1;function oo(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===n}function mi(){{if(fn.current){var ne=ae(fn.current.type);if(ne)return`

Check the render method of \``+ne+"`."}return""}}function Is(ne){{if(ne!==void 0){var ze=ne.fileName.replace(/^.*[\\\/]/,""),tt=ne.lineNumber;return`

Check your code at `+ze+":"+tt+"."}return""}}var aa={};function $a(ne){{var ze=mi();if(!ze){var tt=typeof ne=="string"?ne:ne.displayName||ne.name;tt&&(ze=`

Check the top-level render call using <`+tt+">.")}return ze}}function so(ne,ze){{if(!ne._store||ne._store.validated||ne.key!=null)return;ne._store.validated=!0;var tt=$a(ze);if(aa[tt])return;aa[tt]=!0;var st="";ne&&ne._owner&&ne._owner!==fn.current&&(st=" It was passed a child from "+ae(ne._owner.type)+"."),Rn(ne),L('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',tt,st),Rn(null)}}function Oa(ne,ze){{if(typeof ne!="object")return;if(Bi(ne))for(var tt=0;tt<ne.length;tt++){var st=ne[tt];oo(st)&&so(st,ze)}else if(oo(ne))ne._store&&(ne._store.validated=!0);else if(ne){var qt=E(ne);if(typeof qt=="function"&&qt!==ne.entries)for(var Zt=qt.call(ne),Jt;!(Jt=Zt.next()).done;)oo(Jt.value)&&so(Jt.value,ze)}}}function ao(ne){{var ze=ne.type;if(ze==null||typeof ze=="string")return;var tt;if(typeof ze=="function")tt=ze.propTypes;else if(typeof ze=="object"&&(ze.$$typeof===d||ze.$$typeof===v))tt=ze.propTypes;else return;if(tt){var st=ae(ze);jr(tt,ne.props,"prop",st,ne)}else if(ze.PropTypes!==void 0&&!Mn){Mn=!0;var qt=ae(ze);L("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",qt||"Unknown")}typeof ze.getDefaultProps=="function"&&!ze.getDefaultProps.isReactClassApproved&&L("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Rs(ne){{for(var ze=Object.keys(ne.props),tt=0;tt<ze.length;tt++){var st=ze[tt];if(st!=="children"&&st!=="key"){Rn(ne),L("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",st),Rn(null);break}}ne.ref!==null&&(Rn(ne),L("Invalid attribute `ref` supplied to `React.Fragment`."),Rn(null))}}function lo(ne,ze,tt,st,qt,Zt){{var Jt=X(ne);if(!Jt){var Pt="";(ne===void 0||typeof ne=="object"&&ne!==null&&Object.keys(ne).length===0)&&(Pt+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Nr=Is(qt);Nr?Pt+=Nr:Pt+=mi();var Yn;ne===null?Yn="null":Bi(ne)?Yn="array":ne!==void 0&&ne.$$typeof===n?(Yn="<"+(ae(ne.type)||"Unknown")+" />",Pt=" Did you accidentally export a JSX literal instead of a component?"):Yn=typeof ne,L("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Yn,Pt)}var Wn=pi(ne,ze,tt,qt,Zt);if(Wn==null)return Wn;if(Jt){var pr=ze.children;if(pr!==void 0)if(st)if(Bi(pr)){for(var As=0;As<pr.length;As++)Oa(pr[As],ne);Object.freeze&&Object.freeze(pr)}else L("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Oa(pr,ne)}return ne===r?Rs(Wn):ao(Wn),Wn}}function Ms(ne,ze,tt){return lo(ne,ze,tt,!0)}function vi(ne,ze,tt){return lo(ne,ze,tt,!1)}var Ii=vi,yi=Ms;cS.Fragment=r,cS.jsx=Ii,cS.jsxs=yi}()),cS}process.env.NODE_ENV==="production"?DP.exports=PV():DP.exports=IV();var x=DP.exports,LP={exports:{}},xx={exports:{}},qn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wO;function RV(){if(wO)return qn;wO=1;var t=typeof Symbol=="function"&&Symbol.for,n=t?Symbol.for("react.element"):60103,e=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,o=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,u=t?Symbol.for("react.context"):60110,d=t?Symbol.for("react.async_mode"):60111,h=t?Symbol.for("react.concurrent_mode"):60111,g=t?Symbol.for("react.forward_ref"):60112,v=t?Symbol.for("react.suspense"):60113,S=t?Symbol.for("react.suspense_list"):60120,w=t?Symbol.for("react.memo"):60115,k=t?Symbol.for("react.lazy"):60116,C=t?Symbol.for("react.block"):60121,E=t?Symbol.for("react.fundamental"):60117,R=t?Symbol.for("react.responder"):60118,L=t?Symbol.for("react.scope"):60119;function A(D){if(typeof D=="object"&&D!==null){var z=D.$$typeof;switch(z){case n:switch(D=D.type,D){case d:case h:case r:case a:case o:case v:return D;default:switch(D=D&&D.$$typeof,D){case u:case g:case k:case w:case l:return D;default:return z}}case e:return z}}}function O(D){return A(D)===h}return qn.AsyncMode=d,qn.ConcurrentMode=h,qn.ContextConsumer=u,qn.ContextProvider=l,qn.Element=n,qn.ForwardRef=g,qn.Fragment=r,qn.Lazy=k,qn.Memo=w,qn.Portal=e,qn.Profiler=a,qn.StrictMode=o,qn.Suspense=v,qn.isAsyncMode=function(D){return O(D)||A(D)===d},qn.isConcurrentMode=O,qn.isContextConsumer=function(D){return A(D)===u},qn.isContextProvider=function(D){return A(D)===l},qn.isElement=function(D){return typeof D=="object"&&D!==null&&D.$$typeof===n},qn.isForwardRef=function(D){return A(D)===g},qn.isFragment=function(D){return A(D)===r},qn.isLazy=function(D){return A(D)===k},qn.isMemo=function(D){return A(D)===w},qn.isPortal=function(D){return A(D)===e},qn.isProfiler=function(D){return A(D)===a},qn.isStrictMode=function(D){return A(D)===o},qn.isSuspense=function(D){return A(D)===v},qn.isValidElementType=function(D){return typeof D=="string"||typeof D=="function"||D===r||D===h||D===a||D===o||D===v||D===S||typeof D=="object"&&D!==null&&(D.$$typeof===k||D.$$typeof===w||D.$$typeof===l||D.$$typeof===u||D.$$typeof===g||D.$$typeof===E||D.$$typeof===R||D.$$typeof===L||D.$$typeof===C)},qn.typeOf=A,qn}var Qn={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xO;function MV(){return xO||(xO=1,process.env.NODE_ENV!=="production"&&function(){var t=typeof Symbol=="function"&&Symbol.for,n=t?Symbol.for("react.element"):60103,e=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,o=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,u=t?Symbol.for("react.context"):60110,d=t?Symbol.for("react.async_mode"):60111,h=t?Symbol.for("react.concurrent_mode"):60111,g=t?Symbol.for("react.forward_ref"):60112,v=t?Symbol.for("react.suspense"):60113,S=t?Symbol.for("react.suspense_list"):60120,w=t?Symbol.for("react.memo"):60115,k=t?Symbol.for("react.lazy"):60116,C=t?Symbol.for("react.block"):60121,E=t?Symbol.for("react.fundamental"):60117,R=t?Symbol.for("react.responder"):60118,L=t?Symbol.for("react.scope"):60119;function A(We){return typeof We=="string"||typeof We=="function"||We===r||We===h||We===a||We===o||We===v||We===S||typeof We=="object"&&We!==null&&(We.$$typeof===k||We.$$typeof===w||We.$$typeof===l||We.$$typeof===u||We.$$typeof===g||We.$$typeof===E||We.$$typeof===R||We.$$typeof===L||We.$$typeof===C)}function O(We){if(typeof We=="object"&&We!==null){var Ht=We.$$typeof;switch(Ht){case n:var dn=We.type;switch(dn){case d:case h:case r:case a:case o:case v:return dn;default:var Xt=dn&&dn.$$typeof;switch(Xt){case u:case g:case k:case w:case l:return Xt;default:return Ht}}case e:return Ht}}}var D=d,z=h,U=u,Y=l,q=n,X=g,ie=r,pe=k,ae=w,te=e,he=a,ce=o,ge=v,me=!1;function we(We){return me||(me=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),V(We)||O(We)===d}function V(We){return O(We)===h}function Z(We){return O(We)===u}function Ce(We){return O(We)===l}function Ae(We){return typeof We=="object"&&We!==null&&We.$$typeof===n}function De(We){return O(We)===g}function Ie(We){return O(We)===r}function Ne(We){return O(We)===k}function Ve(We){return O(We)===w}function Ke(We){return O(We)===e}function Xe(We){return O(We)===a}function at(We){return O(We)===o}function _t(We){return O(We)===v}Qn.AsyncMode=D,Qn.ConcurrentMode=z,Qn.ContextConsumer=U,Qn.ContextProvider=Y,Qn.Element=q,Qn.ForwardRef=X,Qn.Fragment=ie,Qn.Lazy=pe,Qn.Memo=ae,Qn.Portal=te,Qn.Profiler=he,Qn.StrictMode=ce,Qn.Suspense=ge,Qn.isAsyncMode=we,Qn.isConcurrentMode=V,Qn.isContextConsumer=Z,Qn.isContextProvider=Ce,Qn.isElement=Ae,Qn.isForwardRef=De,Qn.isFragment=Ie,Qn.isLazy=Ne,Qn.isMemo=Ve,Qn.isPortal=Ke,Qn.isProfiler=Xe,Qn.isStrictMode=at,Qn.isSuspense=_t,Qn.isValidElementType=A,Qn.typeOf=O}()),Qn}var CO;function uL(){return CO||(CO=1,process.env.NODE_ENV==="production"?xx.exports=RV():xx.exports=MV()),xx.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Kk,EO;function AV(){if(EO)return Kk;EO=1;var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;function r(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function o(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var l={},u=0;u<10;u++)l["_"+String.fromCharCode(u)]=u;var d=Object.getOwnPropertyNames(l).map(function(g){return l[g]});if(d.join("")!=="0123456789")return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach(function(g){h[g]=g}),Object.keys(Object.assign({},h)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Kk=o()?Object.assign:function(a,l){for(var u,d=r(a),h,g=1;g<arguments.length;g++){u=Object(arguments[g]);for(var v in u)n.call(u,v)&&(d[v]=u[v]);if(t){h=t(u);for(var S=0;S<h.length;S++)e.call(u,h[S])&&(d[h[S]]=u[h[S]])}}return d},Kk}var Yk,_O;function VI(){if(_O)return Yk;_O=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Yk=t,Yk}var Wk,TO;function dL(){return TO||(TO=1,Wk=Function.call.bind(Object.prototype.hasOwnProperty)),Wk}var Gk,kO;function $V(){if(kO)return Gk;kO=1;var t=function(){};if(process.env.NODE_ENV!=="production"){var n=VI(),e={},r=dL();t=function(a){var l="Warning: "+a;typeof console<"u"&&console.error(l);try{throw new Error(l)}catch{}}}function o(a,l,u,d,h){if(process.env.NODE_ENV!=="production"){for(var g in a)if(r(a,g)){var v;try{if(typeof a[g]!="function"){var S=Error((d||"React class")+": "+u+" type `"+g+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof a[g]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw S.name="Invariant Violation",S}v=a[g](l,g,d,u,null,n)}catch(k){v=k}if(v&&!(v instanceof Error)&&t((d||"React class")+": type specification of "+u+" `"+g+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof v+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),v instanceof Error&&!(v.message in e)){e[v.message]=!0;var w=h?h():"";t("Failed "+u+" type: "+v.message+(w??""))}}}}return o.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(e={})},Gk=o,Gk}var Xk,PO;function OV(){if(PO)return Xk;PO=1;var t=uL(),n=AV(),e=VI(),r=dL(),o=$V(),a=function(){};process.env.NODE_ENV!=="production"&&(a=function(u){var d="Warning: "+u;typeof console<"u"&&console.error(d);try{throw new Error(d)}catch{}});function l(){return null}return Xk=function(u,d){var h=typeof Symbol=="function"&&Symbol.iterator,g="@@iterator";function v(V){var Z=V&&(h&&V[h]||V[g]);if(typeof Z=="function")return Z}var S="<<anonymous>>",w={array:R("array"),bigint:R("bigint"),bool:R("boolean"),func:R("function"),number:R("number"),object:R("object"),string:R("string"),symbol:R("symbol"),any:L(),arrayOf:A,element:O(),elementType:D(),instanceOf:z,node:X(),objectOf:Y,oneOf:U,oneOfType:q,shape:pe,exact:ae};function k(V,Z){return V===Z?V!==0||1/V===1/Z:V!==V&&Z!==Z}function C(V,Z){this.message=V,this.data=Z&&typeof Z=="object"?Z:{},this.stack=""}C.prototype=Error.prototype;function E(V){if(process.env.NODE_ENV!=="production")var Z={},Ce=0;function Ae(Ie,Ne,Ve,Ke,Xe,at,_t){if(Ke=Ke||S,at=at||Ve,_t!==e){if(d){var We=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw We.name="Invariant Violation",We}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var Ht=Ke+":"+Ve;!Z[Ht]&&Ce<3&&(a("You are manually calling a React.PropTypes validation function for the `"+at+"` prop on `"+Ke+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),Z[Ht]=!0,Ce++)}}return Ne[Ve]==null?Ie?Ne[Ve]===null?new C("The "+Xe+" `"+at+"` is marked as required "+("in `"+Ke+"`, but its value is `null`.")):new C("The "+Xe+" `"+at+"` is marked as required in "+("`"+Ke+"`, but its value is `undefined`.")):null:V(Ne,Ve,Ke,Xe,at)}var De=Ae.bind(null,!1);return De.isRequired=Ae.bind(null,!0),De}function R(V){function Z(Ce,Ae,De,Ie,Ne,Ve){var Ke=Ce[Ae],Xe=ce(Ke);if(Xe!==V){var at=ge(Ke);return new C("Invalid "+Ie+" `"+Ne+"` of type "+("`"+at+"` supplied to `"+De+"`, expected ")+("`"+V+"`."),{expectedType:V})}return null}return E(Z)}function L(){return E(l)}function A(V){function Z(Ce,Ae,De,Ie,Ne){if(typeof V!="function")return new C("Property `"+Ne+"` of component `"+De+"` has invalid PropType notation inside arrayOf.");var Ve=Ce[Ae];if(!Array.isArray(Ve)){var Ke=ce(Ve);return new C("Invalid "+Ie+" `"+Ne+"` of type "+("`"+Ke+"` supplied to `"+De+"`, expected an array."))}for(var Xe=0;Xe<Ve.length;Xe++){var at=V(Ve,Xe,De,Ie,Ne+"["+Xe+"]",e);if(at instanceof Error)return at}return null}return E(Z)}function O(){function V(Z,Ce,Ae,De,Ie){var Ne=Z[Ce];if(!u(Ne)){var Ve=ce(Ne);return new C("Invalid "+De+" `"+Ie+"` of type "+("`"+Ve+"` supplied to `"+Ae+"`, expected a single ReactElement."))}return null}return E(V)}function D(){function V(Z,Ce,Ae,De,Ie){var Ne=Z[Ce];if(!t.isValidElementType(Ne)){var Ve=ce(Ne);return new C("Invalid "+De+" `"+Ie+"` of type "+("`"+Ve+"` supplied to `"+Ae+"`, expected a single ReactElement type."))}return null}return E(V)}function z(V){function Z(Ce,Ae,De,Ie,Ne){if(!(Ce[Ae]instanceof V)){var Ve=V.name||S,Ke=we(Ce[Ae]);return new C("Invalid "+Ie+" `"+Ne+"` of type "+("`"+Ke+"` supplied to `"+De+"`, expected ")+("instance of `"+Ve+"`."))}return null}return E(Z)}function U(V){if(!Array.isArray(V))return process.env.NODE_ENV!=="production"&&(arguments.length>1?a("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):a("Invalid argument supplied to oneOf, expected an array.")),l;function Z(Ce,Ae,De,Ie,Ne){for(var Ve=Ce[Ae],Ke=0;Ke<V.length;Ke++)if(k(Ve,V[Ke]))return null;var Xe=JSON.stringify(V,function(_t,We){var Ht=ge(We);return Ht==="symbol"?String(We):We});return new C("Invalid "+Ie+" `"+Ne+"` of value `"+String(Ve)+"` "+("supplied to `"+De+"`, expected one of "+Xe+"."))}return E(Z)}function Y(V){function Z(Ce,Ae,De,Ie,Ne){if(typeof V!="function")return new C("Property `"+Ne+"` of component `"+De+"` has invalid PropType notation inside objectOf.");var Ve=Ce[Ae],Ke=ce(Ve);if(Ke!=="object")return new C("Invalid "+Ie+" `"+Ne+"` of type "+("`"+Ke+"` supplied to `"+De+"`, expected an object."));for(var Xe in Ve)if(r(Ve,Xe)){var at=V(Ve,Xe,De,Ie,Ne+"."+Xe,e);if(at instanceof Error)return at}return null}return E(Z)}function q(V){if(!Array.isArray(V))return process.env.NODE_ENV!=="production"&&a("Invalid argument supplied to oneOfType, expected an instance of array."),l;for(var Z=0;Z<V.length;Z++){var Ce=V[Z];if(typeof Ce!="function")return a("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+me(Ce)+" at index "+Z+"."),l}function Ae(De,Ie,Ne,Ve,Ke){for(var Xe=[],at=0;at<V.length;at++){var _t=V[at],We=_t(De,Ie,Ne,Ve,Ke,e);if(We==null)return null;We.data&&r(We.data,"expectedType")&&Xe.push(We.data.expectedType)}var Ht=Xe.length>0?", expected one of type ["+Xe.join(", ")+"]":"";return new C("Invalid "+Ve+" `"+Ke+"` supplied to "+("`"+Ne+"`"+Ht+"."))}return E(Ae)}function X(){function V(Z,Ce,Ae,De,Ie){return te(Z[Ce])?null:new C("Invalid "+De+" `"+Ie+"` supplied to "+("`"+Ae+"`, expected a ReactNode."))}return E(V)}function ie(V,Z,Ce,Ae,De){return new C((V||"React class")+": "+Z+" type `"+Ce+"."+Ae+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+De+"`.")}function pe(V){function Z(Ce,Ae,De,Ie,Ne){var Ve=Ce[Ae],Ke=ce(Ve);if(Ke!=="object")return new C("Invalid "+Ie+" `"+Ne+"` of type `"+Ke+"` "+("supplied to `"+De+"`, expected `object`."));for(var Xe in V){var at=V[Xe];if(typeof at!="function")return ie(De,Ie,Ne,Xe,ge(at));var _t=at(Ve,Xe,De,Ie,Ne+"."+Xe,e);if(_t)return _t}return null}return E(Z)}function ae(V){function Z(Ce,Ae,De,Ie,Ne){var Ve=Ce[Ae],Ke=ce(Ve);if(Ke!=="object")return new C("Invalid "+Ie+" `"+Ne+"` of type `"+Ke+"` "+("supplied to `"+De+"`, expected `object`."));var Xe=n({},Ce[Ae],V);for(var at in Xe){var _t=V[at];if(r(V,at)&&typeof _t!="function")return ie(De,Ie,Ne,at,ge(_t));if(!_t)return new C("Invalid "+Ie+" `"+Ne+"` key `"+at+"` supplied to `"+De+"`.\nBad object: "+JSON.stringify(Ce[Ae],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(V),null,"  "));var We=_t(Ve,at,De,Ie,Ne+"."+at,e);if(We)return We}return null}return E(Z)}function te(V){switch(typeof V){case"number":case"string":case"undefined":return!0;case"boolean":return!V;case"object":if(Array.isArray(V))return V.every(te);if(V===null||u(V))return!0;var Z=v(V);if(Z){var Ce=Z.call(V),Ae;if(Z!==V.entries){for(;!(Ae=Ce.next()).done;)if(!te(Ae.value))return!1}else for(;!(Ae=Ce.next()).done;){var De=Ae.value;if(De&&!te(De[1]))return!1}}else return!1;return!0;default:return!1}}function he(V,Z){return V==="symbol"?!0:Z?Z["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&Z instanceof Symbol:!1}function ce(V){var Z=typeof V;return Array.isArray(V)?"array":V instanceof RegExp?"object":he(Z,V)?"symbol":Z}function ge(V){if(typeof V>"u"||V===null)return""+V;var Z=ce(V);if(Z==="object"){if(V instanceof Date)return"date";if(V instanceof RegExp)return"regexp"}return Z}function me(V){var Z=ge(V);switch(Z){case"array":case"object":return"an "+Z;case"boolean":case"date":case"regexp":return"a "+Z;default:return Z}}function we(V){return!V.constructor||!V.constructor.name?S:V.constructor.name}return w.checkPropTypes=o,w.resetWarningCache=o.resetWarningCache,w.PropTypes=w,w},Xk}var qk,IO;function DV(){if(IO)return qk;IO=1;var t=VI();function n(){}function e(){}return e.resetWarningCache=n,qk=function(){function r(l,u,d,h,g,v){if(v!==t){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}r.isRequired=r;function o(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:e,resetWarningCache:n};return a.PropTypes=a,a},qk}if(process.env.NODE_ENV!=="production"){var LV=uL(),jV=!0;LP.exports=OV()(LV.isElement,jV)}else LP.exports=DV()();var NV=LP.exports;const KI=Of(NV),zV=["\\","/",":","*","?",'"',"<",">","|","$","&","^","."],fL=t=>{const[n,e]=I.useState(t.oldName),r=a=>{const l=a.trim();if(!l||zV.some(u=>l.indexOf(u)!==-1)){Wc.showMessage(bf.plugin.i18n.nameIsInvalid.replace("${name}",a));return}t.type==="create"?_V(a):TV(t.oldName,a),t.onSave&&t.onSave(a)},o=a=>{a.key==="Enter"&&r(a.target.value)};return x.jsxs("div",{id:"create-whiteboard",children:[x.jsxs("label",{className:"fn__flex b3-label config__item",children:[x.jsxs("div",{className:"fn__flex-1",children:[bf.plugin.i18n.form.name,x.jsx("div",{className:"b3-label__text",children:bf.plugin.i18n.form.nameDesc})]}),x.jsx("span",{className:"fn__space"}),x.jsx("input",{id:"draw-name",className:"b3-text-field fn__flex-center fn__size200",value:n,onChange:a=>e(a.target.value),onKeyUp:a=>o(a)})]}),x.jsx("div",{className:"button-group",style:{float:"right",margin:"20px 0 10px"},children:x.jsx("button",{id:"saveDraw",className:"b3-button",onClick:()=>r(n),children:bf.plugin.i18n.form.save})})]})},FV=t=>{const n=new Wc.Dialog({title:bf.plugin.i18n.createWhiteboard,content:'<div class="b3-dialog__content"><div id="create-whiteboard"></div></div>',width:"520px"});let e;const r={type:"create",oldName:"",onSave:o=>{e.unmount(),n.destroy(),t(o)}};e=nd.createRoot(document.querySelector("#create-whiteboard")),e.render(ft.createElement(fL,r))},UV=(t,n)=>{const e=new Wc.Dialog({title:bf.plugin.i18n.renameWhiteboard,content:'<div class="b3-dialog__content"><div id="rename-whiteboard"></div></div>',width:"520px"});let r;const o={type:"rename",oldName:t,onSave:a=>{r.unmount(),e.destroy(),n(a)}};r=nd.createRoot(document.querySelector("#rename-whiteboard")),r.render(ft.createElement(fL,o))},hL=t=>{const n=t.plugin,[e,r]=I.useState(t.files),o=S=>{const C=`siyuan://plugins/siyuan-plugin-whiteboardwhiteboard?icon=iconWhiteboard&title=${S}&data=${JSON.stringify({name:S})}`;navigator.clipboard.writeText(`[${S}](${encodeURI(C)})`)},a=()=>FV(S=>{r([...e,S])}),l=S=>{UV(S,w=>{e.splice(e.findIndex(k=>k===S),1,w),r([...e])})},u=S=>{n.open(S,{load:!0})},d=(S,w)=>{w.stopPropagation(),o(S)},h=(S,w)=>{w.stopPropagation(),Wc.confirm(n.i18n.deleteWarn+":"+n.i18n.title,n.i18n.deleteConfirm.replace("${file}",S),()=>{kV(S),e.splice(e.findIndex(k=>k===S),1),r([...e])})},g=(S,w)=>{w.stopPropagation(),l(S)},v=async()=>{const S=await cL();r(S)};return x.jsxs("div",{className:"fn__flex-1 fn__flex-column",children:[x.jsxs("div",{className:"block__icons",children:[x.jsxs("div",{className:"block__logo",children:[x.jsx("svg",{className:"block__logoicon",children:x.jsx("use",{xlinkHref:"#iconWhiteboard"})}),n.i18n.title]}),x.jsx("span",{className:"fn__flex-1 fn__space"}),x.jsx("span",{"data-type":"min",className:"block__icon b3-tooltips b3-tooltips__sw","aria-label":n.i18n.min,children:x.jsx("svg",{children:x.jsx("use",{xlinkHref:"#iconMin"})})}),x.jsx("span",{id:"add-draw",className:"block__icon b3-tooltips b3-tooltips__sw","aria-label":n.i18n.create,onClick:()=>a(),children:x.jsx("svg",{children:x.jsx("use",{xlinkHref:"#iconAdd"})})}),x.jsx("span",{id:"refresh",className:"block__icon b3-tooltips b3-tooltips__sw","aria-label":n.i18n.refresh,onClick:()=>v(),children:x.jsx("svg",{children:x.jsx("use",{xlinkHref:"#iconRefresh"})})})]}),x.jsx("div",{className:"fn__flex-1 plugin-whiteboard-dock",children:(e==null?void 0:e.map(S=>x.jsxs("div",{className:"whiteboard-draw","data-name":S,children:[x.jsx("span",{onClick:()=>u(S),children:S}),x.jsx("span",{className:"fileicon editfile b3-tooltips b3-tooltips__s","aria-label":n.i18n.edit,"data-name":S,onClick:w=>g(S,w),children:x.jsx("svg",{children:x.jsx("use",{xlinkHref:"#iconEdit"})})}),x.jsx("span",{className:"fileicon copyfile b3-tooltips b3-tooltips__s","aria-label":n.i18n.copyLink,"data-name":S,onClick:w=>d(S,w),children:x.jsx("svg",{children:x.jsx("use",{xlinkHref:"#iconCopy"})})}),x.jsx("span",{className:"fileicon deletefile b3-tooltips b3-tooltips__s","aria-label":n.i18n.delete,"data-name":S,onClick:w=>h(S,w),children:x.jsx("svg",{children:x.jsx("use",{xlinkHref:"#iconTrashcan"})})})]},S)))||x.jsx("div",{style:{margin:"0 12px"},children:n.i18n.empty})})]})};hL.propTypes={plugin:KI.object.isRequired};function pL(t){return t&&typeof t=="object"&&"parents"in t}function gL(t){for(let n=0,e=t.parents.length;n<e;n++)if(t.parents[n].__unsafe__getWithoutCapture(),t.parents[n].lastChangedEpoch!==t.parentEpochs[n])return!0;return!1}const G1=(t,n)=>{if(t.children.remove(n)&&t.children.isEmpty&&pL(t))for(let e=0,r=t.parents.length;e<r;e++)G1(t.parents[e],t)},YI=(t,n)=>{if(t.children.add(n)&&pL(t))for(let e=0,r=t.parents.length;e<r;e++)YI(t.parents[e],t)};function mL(t,n){return t===n||Object.is(t,n)||!!(t&&n&&typeof t.equals=="function"&&t.equals(n))}function Df(t,n){const e=Symbol.for(`com.tldraw.state/${t}`),r=globalThis;return r[e]??(r[e]=n()),r[e]}const rd=Df("empty_array",()=>Object.freeze([])),RO=8;class vL{constructor(){T(this,"arraySize",0);T(this,"array",Array(RO));T(this,"set",null)}get isEmpty(){if(this.array)return this.arraySize===0;if(this.set)return this.set.size===0;throw new Error("no set or array")}add(n){if(this.array)return this.array.indexOf(n)!==-1?!1:this.arraySize<RO?(this.array[this.arraySize]=n,this.arraySize++,!0):(this.set=new Set(this.array),this.array=null,this.set.add(n),!0);if(this.set)return this.set.has(n)?!1:(this.set.add(n),!0);throw new Error("no set or array")}remove(n){if(this.array){const e=this.array.indexOf(n);return e===-1?!1:(this.array[e]=void 0,this.arraySize--,e!==this.arraySize&&(this.array[e]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return this.set.has(n)?(this.set.delete(n),!0):!1;throw new Error("no set or array")}visit(n){if(this.array){for(let e=0;e<this.arraySize;e++){const r=this.array[e];typeof r<"u"&&n(r)}return}if(this.set){this.set.forEach(n);return}throw new Error("no set or array")}}const ka=Symbol.for("com.tldraw.state/RESET_VALUE");class yL{constructor(n){T(this,"index",0);T(this,"buffer");this.capacity=n,this.buffer=new Array(n)}pushEntry(n,e,r){if(r!==void 0){if(r===ka){this.clear();return}this.buffer[this.index]=[n,e,r],this.index=(this.index+1)%this.capacity}}clear(){this.index=0,this.buffer.fill(void 0)}getChangesSince(n){const{index:e,capacity:r,buffer:o}=this;for(let a=0;a<r;a++){const l=(e-1+r-a)%r,u=o[l];if(!u)return ka;const[d,h]=u;if(a===0&&n>=h)return[];if(d<=n&&n<h){const g=a+1,v=new Array(g);for(let S=0;S<g;S++)v[S]=o[(l+S)%r][2];return v}}return ka}}class BV{constructor(n,e){T(this,"offset",0);T(this,"numNewParents",0);T(this,"maybeRemoved");this.below=n,this.child=e}}const Lr=Df("capture",()=>({stack:null}));function SL(t){Lr.stack=new BV(Lr.stack,t)}function bL(){var e;const t=Lr.stack;if(Lr.stack=t.below,t.numNewParents>0||t.offset!==t.child.parents.length){for(let r=t.offset;r<t.child.parents.length;r++){const o=t.child.parents[r];t.child.parents.indexOf(o)>=t.offset&&G1(o,t.child)}if(t.child.parents.length=t.offset,t.child.parentEpochs.length=t.offset,(e=Lr.stack)!=null&&e.maybeRemoved)for(let r=0;r<Lr.stack.maybeRemoved.length;r++){const o=Lr.stack.maybeRemoved[r];t.child.parents.indexOf(o)===-1&&G1(o,t.child)}}}function jP(t){if(Lr.stack){const n=Lr.stack.child.parents.indexOf(t);if(n<0&&(Lr.stack.numNewParents++,Lr.stack.child.isActivelyListening&&YI(t,Lr.stack.child)),n<0||n>=Lr.stack.offset){if(n!==Lr.stack.offset&&n>0){const e=Lr.stack.child.parents[Lr.stack.offset];Lr.stack.maybeRemoved?Lr.stack.maybeRemoved.indexOf(e)===-1&&Lr.stack.maybeRemoved.push(e):Lr.stack.maybeRemoved=[e]}Lr.stack.child.parents[Lr.stack.offset]=t,Lr.stack.child.parentEpochs[Lr.stack.offset]=t.lastChangedEpoch,Lr.stack.offset++}}}const Yh=-1;class HV{constructor(n,e,r){T(this,"_isActivelyListening",!1);T(this,"lastTraversedEpoch",Yh);T(this,"lastReactedEpoch",Yh);T(this,"_scheduleCount",0);T(this,"parentEpochs",[]);T(this,"parents",[]);T(this,"_scheduleEffect");T(this,"maybeExecute",()=>{this._isActivelyListening&&this.execute()});this.name=n,this.runEffect=e,this._scheduleEffect=r==null?void 0:r.scheduleEffect}get isActivelyListening(){return this._isActivelyListening}get scheduleCount(){return this._scheduleCount}maybeScheduleEffect(){if(this._isActivelyListening&&this.lastReactedEpoch!==xa()){if(this.parents.length&&!gL(this)){this.lastReactedEpoch=xa();return}this.scheduleEffect()}}scheduleEffect(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}attach(){this._isActivelyListening=!0;for(let n=0,e=this.parents.length;n<e;n++)YI(this.parents[n],this)}detach(){this._isActivelyListening=!1;for(let n=0,e=this.parents.length;n<e;n++)G1(this.parents[n],this)}execute(){try{SL(this);const n=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=xa(),n}finally{bL()}}}const jm=Df("EffectScheduler",()=>HV);function u0(t,n,e){const r=new jm(t,n,e);return r.attach(),r.scheduleEffect(),()=>{r.detach()}}function VV(t,n,e){const r=new jm(t,n,e);return{scheduler:r,start:o=>{const a=(o==null?void 0:o.force)??!1;r.attach(),a?r.scheduleEffect():r.maybeScheduleEffect()},stop:()=>{r.detach()}}}class KV{constructor(n){T(this,"initialAtomValues",new Map);this.parent=n}get isRoot(){return this.parent===null}commit(){if(this.isRoot){const n=this.initialAtomValues;this.initialAtomValues=new Map,wL(n.keys())}else this.initialAtomValues.forEach((n,e)=>{this.parent.initialAtomValues.has(e)||this.parent.initialAtomValues.set(e,n)})}abort(){Qo.globalEpoch++,this.initialAtomValues.forEach((n,e)=>{var r;e.set(n),(r=e.historyBuffer)==null||r.clear()}),this.commit()}}const Qo=Df("transactions",()=>({globalEpoch:Yh+1,globalIsReacting:!1,currentTransaction:null}));function xa(){return Qo.globalEpoch}function wL(t){if(Qo.globalIsReacting)throw new Error("cannot change atoms during reaction cycle");try{Qo.globalIsReacting=!0;const n=new Set,e=r=>{r.lastTraversedEpoch!==Qo.globalEpoch&&(r.lastTraversedEpoch=Qo.globalEpoch,r instanceof jm?n.add(r):r.children.visit(e))};for(const r of t)r.children.visit(e);for(const r of n)r.maybeScheduleEffect()}finally{Qo.globalIsReacting=!1}}function YV(t,n){Qo.currentTransaction?Qo.currentTransaction.initialAtomValues.has(t)||Qo.currentTransaction.initialAtomValues.set(t,n):wL([t])}function WV(){Qo.globalEpoch++}function GV(t){const n=new KV(Qo.currentTransaction);Qo.currentTransaction=n;try{let e=!1;const r=t(()=>e=!0);return e?n.abort():n.commit(),r}catch(e){throw n.abort(),e}finally{Qo.currentTransaction=Qo.currentTransaction.parent}}function Vl(t){return Qo.currentTransaction?t():GV(t)}class XV{constructor(n,e,r){T(this,"isEqual");T(this,"computeDiff");T(this,"lastChangedEpoch",xa());T(this,"children",new vL);T(this,"historyBuffer");this.name=n,this.current=e,this.isEqual=(r==null?void 0:r.isEqual)??null,r&&(r.historyLength&&(this.historyBuffer=new yL(r.historyLength)),this.computeDiff=r.computeDiff)}__unsafe__getWithoutCapture(){return this.current}get(){return jP(this),this.current}set(n,e){var o,a;if(((o=this.isEqual)==null?void 0:o.call(this,this.current,n))??mL(this.current,n))return this.current;WV(),this.historyBuffer&&this.historyBuffer.pushEntry(this.lastChangedEpoch,xa(),e??((a=this.computeDiff)==null?void 0:a.call(this,this.current,n,this.lastChangedEpoch,xa()))??ka),this.lastChangedEpoch=xa();const r=this.current;return this.current=n,YV(this,r),n}update(n){return this.set(n(this.current))}getDiffSince(n){var e;return jP(this),n>=this.lastChangedEpoch?rd:((e=this.historyBuffer)==null?void 0:e.getChangesSince(n))??ka}}const qV=Df("Atom",()=>XV);function Es(t,n,e){return new qV(t,n,e)}let MO=!1;function QV(){MO||(MO=!0,console.warn(`Using \`@computed\` as a decorator for getters is deprecated and will be removed in the near future. Please refactor to use \`@computed\` as a decorator for methods.

// Before
@computed
get foo() {
	return 'foo'
}

// After
@computed
getFoo() {
	return 'foo'
}
`))}const NP=Symbol.for("com.tldraw.state/UNINITIALIZED"),xm=t=>t===NP,zP=Df("WithDiff",()=>class{constructor(n,e){this.value=n,this.diff=e}});function IS(t,n){return new zP(t,n)}class ZV{constructor(n,e,r){T(this,"lastChangedEpoch",Yh);T(this,"lastTraversedEpoch",Yh);T(this,"lastCheckedEpoch",Yh);T(this,"parents",[]);T(this,"parentEpochs",[]);T(this,"children",new vL);T(this,"historyBuffer");T(this,"state",NP);T(this,"computeDiff");T(this,"isEqual");this.name=n,this.derive=e,r!=null&&r.historyLength&&(this.historyBuffer=new yL(r.historyLength)),this.computeDiff=r==null?void 0:r.computeDiff,this.isEqual=(r==null?void 0:r.isEqual)??mL}get isActivelyListening(){return!this.children.isEmpty}__unsafe__getWithoutCapture(){var e;const n=this.lastChangedEpoch===Yh;if(!n&&(this.lastCheckedEpoch===xa()||!gL(this)))return this.lastCheckedEpoch=xa(),this.state;try{SL(this);const r=this.derive(this.state,this.lastCheckedEpoch),o=r instanceof zP?r.value:r;if(this.state===NP||!this.isEqual(o,this.state)){if(this.historyBuffer&&!n){const a=r instanceof zP?r.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,xa(),a??((e=this.computeDiff)==null?void 0:e.call(this,this.state,o,this.lastCheckedEpoch,xa()))??ka)}this.lastChangedEpoch=xa(),this.state=o}return this.lastCheckedEpoch=xa(),this.state}finally{bL()}}get(){const n=this.__unsafe__getWithoutCapture();return jP(this),n}getDiffSince(n){var e;return this.get(),n>=this.lastChangedEpoch?rd:((e=this.historyBuffer)==null?void 0:e.getChangesSince(n))??ka}}const WI=Df("Computed",()=>ZV);function JV(t={},n,e,r){const o=r.value,a=Symbol.for("__@tldraw/state__computed__"+e);return r.value=function(){let l=this[a];return l||(l=new WI(e,o.bind(this),t),Object.defineProperty(this,a,{enumerable:!1,configurable:!1,writable:!1,value:l})),l.get()},r.value[tK]=!0,r}function AO(t={},n,e,r){return r.get?(QV(),eK(t,n,e,r)):JV(t,n,e,r)}function eK(t={},n,e,r){const o=r.get,a=Symbol.for("__@tldraw/state__computed__"+e);return r.get=function(){let l=this[a];return l||(l=new WI(e,o.bind(this),t),Object.defineProperty(this,a,{enumerable:!1,configurable:!1,writable:!1,value:l})),l.get()},r}const tK="@@__isComputedMethod__@@";function Qe(){if(arguments.length===1){const t=arguments[0];return(n,e,r)=>AO(t,n,e,r)}else return typeof arguments[0]=="string"?new WI(arguments[0],arguments[1],arguments[2]):AO(void 0,arguments[0],arguments[1],arguments[2])}const xL=1,nK=Df("apiVersion",()=>xL);if(nK!==xL)throw new Error("You have multiple incompatible versions of @tldraw/state in your app. Please deduplicate the package.");function MC(t,n){const e=ft.useRef(n);e.current=n;const[r,o,a]=ft.useMemo(()=>{let l=null;const u=g=>(l=g,()=>{l=null}),d=new jm(`useStateTracking(${t})`,()=>{var g;return(g=e.current)==null?void 0:g.call(e)},{scheduleEffect(){l==null||l()}});return[d,u,()=>d.scheduleCount]},[t]);return ft.useSyncExternalStore(o,a,a),ft.useEffect(()=>(r.attach(),r.maybeScheduleEffect(),()=>{r.detach()}),[r]),r.execute()}const $O={apply(t,n,e){return MC(t.displayName??t.name??"tracked(???)",()=>t.apply(n,e))}},rK=Symbol.for("react.memo"),iK=Symbol.for("react.forward_ref");function sr(t){let n=null;const e=t.$$typeof;return e===rK&&(t=t.type,n=t.compare),e===iK?I.memo(I.forwardRef(new Proxy(t.render,$O))):I.memo(new Proxy(t,$O),n)}function CL(){const t=arguments[0],n=arguments[1],e=arguments.length===3?void 0:arguments[2],r=arguments.length===3?arguments[2]:arguments[3];return I.useMemo(()=>Qe(`useComputed(${t})`,n,e),r)}function qh(t,n,e=rd){I.useEffect(()=>{const r=new jm(t,n);return r.attach(),r.execute(),()=>{r.detach()}},e)}function He(){const t=arguments,n=t.length===3?t[2]:[t[0]],e=t.length===3?t[0]:`useValue(${t[0].name})`,r=I.useRef(!0);r.current=!0;const o=I.useMemo(()=>t.length===1?t[0]:Qe(e,()=>{if(r.current)return t[1]();try{return t[1]()}catch{return{}}}),n);try{const{subscribe:a,getSnapshot:l}=I.useMemo(()=>({subscribe:u=>u0(`useValue(${e})`,()=>{o.get(),u()}),getSnapshot:()=>o.get()}),[o]);return I.useSyncExternalStore(a,l,l)}finally{r.current=!1}}class s1{constructor(n){T(this,"nextValue");T(this,"diff");this.previousValue=n}get(){var r,o,a,l;const n=((o=(r=this.diff)==null?void 0:r.removed)==null?void 0:o.size)??0,e=((l=(a=this.diff)==null?void 0:a.added)==null?void 0:l.size)??0;if(!(n===0&&e===0))return{value:this.nextValue,diff:this.diff}}_add(n,e){var r,o;this.nextValue??(this.nextValue=new Set(this.previousValue)),this.nextValue.add(n),this.diff??(this.diff={}),e?(r=this.diff.removed)==null||r.delete(n):((o=this.diff).added??(o.added=new Set),this.diff.added.add(n))}add(n){var o,a,l;const e=this.previousValue.has(n);if(e)return((a=(o=this.diff)==null?void 0:o.removed)==null?void 0:a.has(n))?this._add(n,e):void 0;(l=this.nextValue)!=null&&l.has(n)||this._add(n,e)}_remove(n,e){var r,o;this.nextValue??(this.nextValue=new Set(this.previousValue)),this.nextValue.delete(n),this.diff??(this.diff={}),e?((r=this.diff).removed??(r.removed=new Set),this.diff.removed.add(n)):(o=this.diff.added)==null||o.delete(n)}remove(n){var o,a,l,u;const e=this.previousValue.has(n);if(!e)return((a=(o=this.diff)==null?void 0:o.added)==null?void 0:a.has(n))?this._remove(n,e):void 0;(u=(l=this.diff)==null?void 0:l.removed)!=null&&u.has(n)||this._remove(n,e)}}function X1(t,n){const e=[];e:for(const r of t){for(const o of e)if(n?n(r,o):r===o)continue e;e.push(r)}return e}function Bt(t){return t.filter(n=>n!=null)}function ea(t){return t[t.length-1]}function oK(t,n){let e,r=1/0;for(const o of t){const a=n(o);a<r&&(e=o,r=a)}return e}function sK(t,n){if(t===n)return!0;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(!Object.is(t[e],n[e]))return!1;return!0}function EL(t){const n=(...e)=>{try{return t(...e)}catch(r){throw r instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(r,n),r}};return n}function Nm(t,n){const e=n&&t&&typeof t=="object"&&n in t?t[n]:t;throw new Error(`Unknown switch case ${e}`)}const Qh=EL((t,n)=>{if(!t)throw new Error(n||"Assertion Error")}),aK=EL((t,n)=>{if(t==null)throw new Error(n??"value must be defined");return t});function _L(t,n){let e;const r=(...o)=>(e||(e={},e.promise=new Promise((a,l)=>{e.resolve=a,e.reject=l})),clearTimeout(e.timeout),e.latestArgs=o,e.timeout=setTimeout(()=>{const a=e;e=void 0;try{a.resolve(t(...a.latestArgs))}catch(l){a.reject(l)}},n),e.promise);return r.cancel=()=>{e&&clearTimeout(e.timeout)},r}const OO=new WeakMap;function GI(t,n){if(typeof t!="object"||t===null)return;let e=OO.get(t);e||(e={tags:{},extras:{}},OO.set(t,e)),n.tags&&(e.tags={...e.tags,...n.tags}),n.extras&&(e.extras={...e.extras,...n.extras})}class lK{static async base64ToFile(n){return fetch(n).then(function(e){return e.arrayBuffer()})}static async fileToBase64(n){return await new Promise((e,r)=>{if(n){const o=new FileReader;o.readAsDataURL(n),o.onload=()=>e(o.result),o.onerror=a=>r(a),o.onabort=a=>r(a)}})}}function a1(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n+""}let FP=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(FP=new Int32Array(FP));const cK=(t,n)=>{let e=n===0?0:~~n^-1;for(let r=0;r<t.length;r++)e=FP[(e^t[r])&255]^e>>>8;return e^-1},DO=4,LO=4;class Vc{static isPng(n,e){return n.getUint8(e+0)===137&&n.getUint8(e+1)===80&&n.getUint8(e+2)===78&&n.getUint8(e+3)===71&&n.getUint8(e+4)===13&&n.getUint8(e+5)===10&&n.getUint8(e+6)===26&&n.getUint8(e+7)===10}static getChunkType(n,e){return[String.fromCharCode(n.getUint8(e)),String.fromCharCode(n.getUint8(e+1)),String.fromCharCode(n.getUint8(e+2)),String.fromCharCode(n.getUint8(e+3))].join("")}static readChunks(n,e=0){const r={};if(!Vc.isPng(n,e))throw new Error("Not a PNG");for(e+=8;e<=n.buffer.byteLength;){const o=e,a=n.getInt32(e);e+=4;const l=Vc.getChunkType(n,e);if(l==="IDAT"&&r[l]){e+=a+DO+LO;continue}if(l==="IEND")break;r[l]={start:o,dataOffset:e+4,size:a},e+=a+DO+LO}return r}static parsePhys(n,e){return{ppux:n.getUint32(e),ppuy:n.getUint32(e+4),unit:n.getUint8(e+4)}}static findChunk(n,e){return Vc.readChunks(n)[e]}static setPhysChunk(n,e=1,r){let o=46,a=0;const l=Vc.findChunk(n,"pHYs");l&&(o=l.start,a=l.size);const u=Vc.findChunk(n,"IDAT");u&&(o=u.start,a=0);const d=new ArrayBuffer(21),h=new DataView(d);h.setUint32(0,9),h.setUint8(4,"p".charCodeAt(0)),h.setUint8(5,"H".charCodeAt(0)),h.setUint8(6,"Y".charCodeAt(0)),h.setUint8(7,"s".charCodeAt(0));const g=2835.5;h.setInt32(8,g*e),h.setInt32(12,g*e),h.setInt8(16,1);const v=new Uint8Array(d.slice(4,17));h.setInt32(17,cK(v));const S=n.buffer.slice(0,o),w=n.buffer.slice(o+a);return new Blob([S,d,w],r)}}class jO{static async getVideoSizeFromSrc(n){return await new Promise((e,r)=>{const o=document.createElement("video");o.onloadeddata=()=>e({w:o.videoWidth,h:o.videoHeight}),o.onerror=a=>{console.error(a),r(new Error("Could not get video size"))},o.crossOrigin="anonymous",o.src=n})}static async getImageSizeFromSrc(n){return await new Promise((e,r)=>{const o=new Image;o.onload=async()=>{try{const a=await lK.base64ToFile(n),l=new DataView(a);if(Vc.isPng(l,0)){const u=Vc.findChunk(l,"pHYs");if(u){const d=Vc.parsePhys(l,u.dataOffset);if(d.unit===0&&d.ppux===d.ppuy){const h=Math.max(d.ppux/2834.5,1);e({w:Math.round(o.width/h),h:Math.round(o.height/h)});return}}}e({w:o.width,h:o.height})}catch(a){console.error(a),e({w:o.width,h:o.height})}},o.onerror=a=>{console.error(a),r(new Error("Could not get image size"))},o.crossOrigin="anonymous",o.src=n})}}function _f(t=""){let n=0,e=0,r=0,o=0;function a(){const l=n^n<<11;return n=e,e=r,r=o,o^=(o>>>19^l^l>>>8)>>>0,o/4294967296*2}for(let l=0;l<t.length+64;l++)n^=t.charCodeAt(l)|0,a();return a}function q1(t,n,e,r=!1){const[o,a]=n,[l,u]=e,d=l+(t-o)/(a-o)*(u-l);return r?l<u?Math.max(Math.min(d,u),l):Math.max(Math.min(d,l),u):d}function AC(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function Zh(t,n){if(AC(t,n))return t[n]}function es(t){if(!t)return t;if(Array.isArray(t)){const n=[],e=t.length;for(let r=0;r<e;r++)n.push(es(t[r]));return n}else if(typeof t=="object"){const n=Object.keys(t),e=n.length,r={};for(let o=0;o<e;o++){const a=n[o];r[a]=es(t[a])}return r}return t}function NO(t){return Object.keys(t)}function ti(t){return Object.values(t)}function id(t){return Object.entries(t)}function TL(t){return Object.fromEntries(t)}function Qk(t,n){const e={};let r=!1;for(const[o,a]of id(t))n(o,a)?e[o]=a:r=!0;return r?e:t}function zO(t,n){const e={};for(const[r,o]of id(t)){const a=n(r,o);e[r]=a}return e}function kL(t,n){if(t===n)return!0;const e=new Set(Object.keys(t)),r=new Set(Object.keys(n));if(e.size!==r.size)return!1;for(const o of e)if(!r.has(o)||!Object.is(t[o],n[o]))return!1;return!0}const uK=()=>typeof process<"u"&&process.env.NODE_ENV==="test"&&!globalThis.__FORCE_RAF_IN_TESTS__,Q1=[],dK=()=>{const t=Q1.splice(0,Q1.length);for(const n of t)n()};let Zk;function fK(){Zk||(Zk=requestAnimationFrame(()=>{Zk=void 0,dK()}))}function hK(t){if(uK())return t();Q1.includes(t)||(Q1.push(t),fK())}function pK(t,n){return t.id>n.id?1:-1}function gK(t){return t!==null}const Tf=typeof window<"u"&&window.structuredClone?window.structuredClone:t=>t&&JSON.parse(JSON.stringify(t));let $C=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((n,e)=>(e&=63,e<36?n+=e.toString(36):e<62?n+=(e-26).toString(36).toUpperCase():e>62?n+="-":n+="_",n),"");class XI{constructor(n,e){T(this,"createDefaultProperties");T(this,"migrations");T(this,"validator");T(this,"scope");T(this,"isInstance",n=>(n==null?void 0:n.typeName)===this.typeName);this.typeName=n,this.createDefaultProperties=e.createDefaultProperties,this.migrations=e.migrations,this.validator=e.validator??{validate:r=>r},this.scope=e.scope??"document"}create(n){const e={...this.createDefaultProperties(),id:this.createId()};for(const[r,o]of Object.entries(n))o!==void 0&&(e[r]=o);return e.typeName=this.typeName,e}clone(n){return{...Tf(n),id:this.createId()}}createId(n){return this.typeName+":"+(n??$C())}createCustomId(n){return this.typeName+":"+n}parseId(n){if(!this.isId(n))throw new Error(`ID "${n}" is not a valid ID for type "${this.typeName}"`);return n.slice(this.typeName.length+1)}isId(n){if(!n)return!1;for(let e=0;e<this.typeName.length;e++)if(n[e]!==this.typeName[e])return!1;return n[this.typeName.length]===":"}withDefaultProperties(n){return new XI(this.typeName,{createDefaultProperties:n,migrations:this.migrations,validator:this.validator,scope:this.scope})}validate(n){return this.validator.validate(n)}}function pd(t,n){return new XI(t,{createDefaultProperties:()=>({}),migrations:n.migrations??{currentVersion:0,firstVersion:0,migrators:{}},validator:n.validator,scope:n.scope})}class FO{constructor(){T(this,"items",new WeakMap)}get(n,e){return this.items.has(n)||this.items.set(n,e(n)),this.items.get(n)}}var Z1={exports:{}};Z1.exports;(function(t,n){var e=200,r="__lodash_hash_undefined__",o=1,a=2,l=9007199254740991,u="[object Arguments]",d="[object Array]",h="[object AsyncFunction]",g="[object Boolean]",v="[object Date]",S="[object Error]",w="[object Function]",k="[object GeneratorFunction]",C="[object Map]",E="[object Number]",R="[object Null]",L="[object Object]",A="[object Promise]",O="[object Proxy]",D="[object RegExp]",z="[object Set]",U="[object String]",Y="[object Symbol]",q="[object Undefined]",X="[object WeakMap]",ie="[object ArrayBuffer]",pe="[object DataView]",ae="[object Float32Array]",te="[object Float64Array]",he="[object Int8Array]",ce="[object Int16Array]",ge="[object Int32Array]",me="[object Uint8Array]",we="[object Uint8ClampedArray]",V="[object Uint16Array]",Z="[object Uint32Array]",Ce=/[\\^$.*+?()[\]{}|]/g,Ae=/^\[object .+?Constructor\]$/,De=/^(?:0|[1-9]\d*)$/,Ie={};Ie[ae]=Ie[te]=Ie[he]=Ie[ce]=Ie[ge]=Ie[me]=Ie[we]=Ie[V]=Ie[Z]=!0,Ie[u]=Ie[d]=Ie[ie]=Ie[g]=Ie[pe]=Ie[v]=Ie[S]=Ie[w]=Ie[C]=Ie[E]=Ie[L]=Ie[D]=Ie[z]=Ie[U]=Ie[X]=!1;var Ne=typeof To=="object"&&To&&To.Object===Object&&To,Ve=typeof self=="object"&&self&&self.Object===Object&&self,Ke=Ne||Ve||Function("return this")(),Xe=n&&!n.nodeType&&n,at=Xe&&!0&&t&&!t.nodeType&&t,_t=at&&at.exports===Xe,We=_t&&Ne.process,Ht=function(){try{return We&&We.binding&&We.binding("util")}catch{}}(),dn=Ht&&Ht.isTypedArray;function Xt(Q,ue){for(var je=-1,it=Q==null?0:Q.length,_n=0,Ft=[];++je<it;){var Hn=Q[je];ue(Hn,je,Q)&&(Ft[_n++]=Hn)}return Ft}function ln(Q,ue){for(var je=-1,it=ue.length,_n=Q.length;++je<it;)Q[_n+je]=ue[je];return Q}function jn(Q,ue){for(var je=-1,it=Q==null?0:Q.length;++je<it;)if(ue(Q[je],je,Q))return!0;return!1}function qr(Q,ue){for(var je=-1,it=Array(Q);++je<Q;)it[je]=ue(je);return it}function fi(Q){return function(ue){return Q(ue)}}function jr(Q,ue){return Q.has(ue)}function Mr(Q,ue){return Q==null?void 0:Q[ue]}function Bi(Q){var ue=-1,je=Array(Q.size);return Q.forEach(function(it,_n){je[++ue]=[_n,it]}),je}function hi(Q,ue){return function(je){return Q(ue(je))}}function io(Q){var ue=-1,je=Array(Q.size);return Q.forEach(function(it){je[++ue]=it}),je}var ri=Array.prototype,Hi=Function.prototype,Kn=Object.prototype,ii=Ke["__core-js_shared__"],ss=Hi.toString,wr=Kn.hasOwnProperty,et=function(){var Q=/[^.]+$/.exec(ii&&ii.keys&&ii.keys.IE_PROTO||"");return Q?"Symbol(src)_1."+Q:""}(),wt=Kn.toString,rn=RegExp("^"+ss.call(wr).replace(Ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),En=_t?Ke.Buffer:void 0,Sn=Ke.Symbol,xr=Ke.Uint8Array,ar=Kn.propertyIsEnumerable,pi=ri.splice,fn=Sn?Sn.toStringTag:void 0,gi=Object.getOwnPropertySymbols,Rn=En?En.isBuffer:void 0,Mn=hi(Object.keys,Object),oo=cs(Ke,"DataView"),mi=cs(Ke,"Map"),Is=cs(Ke,"Promise"),aa=cs(Ke,"Set"),$a=cs(Ke,"WeakMap"),so=cs(Object,"create"),Oa=zr(oo),ao=zr(mi),Rs=zr(Is),lo=zr(aa),Ms=zr($a),vi=Sn?Sn.prototype:void 0,Ii=vi?vi.valueOf:void 0;function yi(Q){var ue=-1,je=Q==null?0:Q.length;for(this.clear();++ue<je;){var it=Q[ue];this.set(it[0],it[1])}}function ne(){this.__data__=so?so(null):{},this.size=0}function ze(Q){var ue=this.has(Q)&&delete this.__data__[Q];return this.size-=ue?1:0,ue}function tt(Q){var ue=this.__data__;if(so){var je=ue[Q];return je===r?void 0:je}return wr.call(ue,Q)?ue[Q]:void 0}function st(Q){var ue=this.__data__;return so?ue[Q]!==void 0:wr.call(ue,Q)}function qt(Q,ue){var je=this.__data__;return this.size+=this.has(Q)?0:1,je[Q]=so&&ue===void 0?r:ue,this}yi.prototype.clear=ne,yi.prototype.delete=ze,yi.prototype.get=tt,yi.prototype.has=st,yi.prototype.set=qt;function Zt(Q){var ue=-1,je=Q==null?0:Q.length;for(this.clear();++ue<je;){var it=Q[ue];this.set(it[0],it[1])}}function Jt(){this.__data__=[],this.size=0}function Pt(Q){var ue=this.__data__,je=dl(ue,Q);if(je<0)return!1;var it=ue.length-1;return je==it?ue.pop():pi.call(ue,je,1),--this.size,!0}function Nr(Q){var ue=this.__data__,je=dl(ue,Q);return je<0?void 0:ue[je][1]}function Yn(Q){return dl(this.__data__,Q)>-1}function Wn(Q,ue){var je=this.__data__,it=dl(je,Q);return it<0?(++this.size,je.push([Q,ue])):je[it][1]=ue,this}Zt.prototype.clear=Jt,Zt.prototype.delete=Pt,Zt.prototype.get=Nr,Zt.prototype.has=Yn,Zt.prototype.set=Wn;function pr(Q){var ue=-1,je=Q==null?0:Q.length;for(this.clear();++ue<je;){var it=Q[ue];this.set(it[0],it[1])}}function As(){this.size=0,this.__data__={hash:new yi,map:new(mi||Zt),string:new yi}}function rc(Q){var ue=hn(this,Q).delete(Q);return this.size-=ue?1:0,ue}function vn(Q){return hn(this,Q).get(Q)}function Bf(Q){return hn(this,Q).has(Q)}function as(Q,ue){var je=hn(this,Q),it=je.size;return je.set(Q,ue),this.size+=je.size==it?0:1,this}pr.prototype.clear=As,pr.prototype.delete=rc,pr.prototype.get=vn,pr.prototype.has=Bf,pr.prototype.set=as;function tn(Q){var ue=-1,je=Q==null?0:Q.length;for(this.__data__=new pr;++ue<je;)this.add(Q[ue])}function $s(Q){return this.__data__.set(Q,r),this}function Da(Q){return this.__data__.has(Q)}tn.prototype.add=tn.prototype.push=$s,tn.prototype.has=Da;function co(Q){var ue=this.__data__=new Zt(Q);this.size=ue.size}function La(){this.__data__=new Zt,this.size=0}function Vi(Q){var ue=this.__data__,je=ue.delete(Q);return this.size=ue.size,je}function ou(Q){return this.__data__.get(Q)}function Ri(Q){return this.__data__.has(Q)}function su(Q,ue){var je=this.__data__;if(je instanceof Zt){var it=je.__data__;if(!mi||it.length<e-1)return it.push([Q,ue]),this.size=++je.size,this;je=this.__data__=new pr(it)}return je.set(Q,ue),this.size=je.size,this}co.prototype.clear=La,co.prototype.delete=Vi,co.prototype.get=ou,co.prototype.has=Ri,co.prototype.set=su;function au(Q,ue){var je=er(Q),it=!je&&Fa(Q),_n=!je&&!it&&cc(Q),Ft=!je&&!it&&!_n&&ca(Q),Hn=je||it||_n||Ft,Cr=Hn?qr(Q.length,String):[],Vn=Cr.length;for(var B in Q)(ue||wr.call(Q,B))&&!(Hn&&(B=="length"||_n&&(B=="offset"||B=="parent")||Ft&&(B=="buffer"||B=="byteLength"||B=="byteOffset")||ac(B,Vn)))&&Cr.push(B);return Cr}function dl(Q,ue){for(var je=Q.length;je--;)if(bi(Q[je][0],ue))return je;return-1}function ic(Q,ue,je){var it=ue(Q);return er(Q)?it:ln(it,je(Q))}function Io(Q){return Q==null?Q===void 0?q:R:fn&&fn in Object(Q)?hl(Q):gr(Q)}function Ro(Q){return uo(Q)&&Io(Q)==u}function Si(Q,ue,je,it,_n){return Q===ue?!0:Q==null||ue==null||!uo(Q)&&!uo(ue)?Q!==Q&&ue!==ue:ja(Q,ue,je,it,Si,_n)}function ja(Q,ue,je,it,_n,Ft){var Hn=er(Q),Cr=er(ue),Vn=Hn?d:on(Q),B=Cr?d:on(ue);Vn=Vn==u?L:Vn,B=B==u?L:B;var ee=Vn==L,ye=B==L,Ee=Vn==B;if(Ee&&cc(Q)){if(!cc(ue))return!1;Hn=!0,ee=!1}if(Ee&&!ee)return Ft||(Ft=new co),Hn||ca(Q)?fl(Q,ue,je,it,_n,Ft):la(Q,ue,Vn,je,it,_n,Ft);if(!(je&o)){var Fe=ee&&wr.call(Q,"__wrapped__"),pt=ye&&wr.call(ue,"__wrapped__");if(Fe||pt){var Je=Fe?Q.value():Q,St=pt?ue.value():ue;return Ft||(Ft=new co),_n(Je,St,je,it,Ft)}}return Ee?(Ft||(Ft=new co),Hf(Q,ue,je,it,_n,Ft)):!1}function Na(Q){if(!lu(Q)||Vt(Q))return!1;var ue=Vr(Q)?rn:Ae;return ue.test(zr(Q))}function za(Q){return uo(Q)&&us(Q.length)&&!!Ie[Io(Q)]}function oc(Q){if(!pl(Q))return Mn(Q);var ue=[];for(var je in Object(Q))wr.call(Q,je)&&je!="constructor"&&ue.push(je);return ue}function fl(Q,ue,je,it,_n,Ft){var Hn=je&o,Cr=Q.length,Vn=ue.length;if(Cr!=Vn&&!(Hn&&Vn>Cr))return!1;var B=Ft.get(Q);if(B&&Ft.get(ue))return B==ue;var ee=-1,ye=!0,Ee=je&a?new tn:void 0;for(Ft.set(Q,ue),Ft.set(ue,Q);++ee<Cr;){var Fe=Q[ee],pt=ue[ee];if(it)var Je=Hn?it(pt,Fe,ee,ue,Q,Ft):it(Fe,pt,ee,Q,ue,Ft);if(Je!==void 0){if(Je)continue;ye=!1;break}if(Ee){if(!jn(ue,function(St,Gt){if(!jr(Ee,Gt)&&(Fe===St||_n(Fe,St,je,it,Ft)))return Ee.push(Gt)})){ye=!1;break}}else if(!(Fe===pt||_n(Fe,pt,je,it,Ft))){ye=!1;break}}return Ft.delete(Q),Ft.delete(ue),ye}function la(Q,ue,je,it,_n,Ft,Hn){switch(je){case pe:if(Q.byteLength!=ue.byteLength||Q.byteOffset!=ue.byteOffset)return!1;Q=Q.buffer,ue=ue.buffer;case ie:return!(Q.byteLength!=ue.byteLength||!Ft(new xr(Q),new xr(ue)));case g:case v:case E:return bi(+Q,+ue);case S:return Q.name==ue.name&&Q.message==ue.message;case D:case U:return Q==ue+"";case C:var Cr=Bi;case z:var Vn=it&o;if(Cr||(Cr=io),Q.size!=ue.size&&!Vn)return!1;var B=Hn.get(Q);if(B)return B==ue;it|=a,Hn.set(Q,ue);var ee=fl(Cr(Q),Cr(ue),it,_n,Ft,Hn);return Hn.delete(Q),ee;case Y:if(Ii)return Ii.call(Q)==Ii.call(ue)}return!1}function Hf(Q,ue,je,it,_n,Ft){var Hn=je&o,Cr=ls(Q),Vn=Cr.length,B=ls(ue),ee=B.length;if(Vn!=ee&&!Hn)return!1;for(var ye=Vn;ye--;){var Ee=Cr[ye];if(!(Hn?Ee in ue:wr.call(ue,Ee)))return!1}var Fe=Ft.get(Q);if(Fe&&Ft.get(ue))return Fe==ue;var pt=!0;Ft.set(Q,ue),Ft.set(ue,Q);for(var Je=Hn;++ye<Vn;){Ee=Cr[ye];var St=Q[Ee],Gt=ue[Ee];if(it)var pn=Hn?it(Gt,St,Ee,ue,Q,Ft):it(St,Gt,Ee,Q,ue,Ft);if(!(pn===void 0?St===Gt||_n(St,Gt,je,it,Ft):pn)){pt=!1;break}Je||(Je=Ee=="constructor")}if(pt&&!Je){var $n=Q.constructor,Tn=ue.constructor;$n!=Tn&&"constructor"in Q&&"constructor"in ue&&!(typeof $n=="function"&&$n instanceof $n&&typeof Tn=="function"&&Tn instanceof Tn)&&(pt=!1)}return Ft.delete(Q),Ft.delete(ue),pt}function ls(Q){return ic(Q,bd,sc)}function hn(Q,ue){var je=Q.__data__;return lc(ue)?je[typeof ue=="string"?"string":"hash"]:je.map}function cs(Q,ue){var je=Mr(Q,ue);return Na(je)?je:void 0}function hl(Q){var ue=wr.call(Q,fn),je=Q[fn];try{Q[fn]=void 0;var it=!0}catch{}var _n=wt.call(Q);return it&&(ue?Q[fn]=je:delete Q[fn]),_n}var sc=gi?function(Q){return Q==null?[]:(Q=Object(Q),Xt(gi(Q),function(ue){return ar.call(Q,ue)}))}:Mo,on=Io;(oo&&on(new oo(new ArrayBuffer(1)))!=pe||mi&&on(new mi)!=C||Is&&on(Is.resolve())!=A||aa&&on(new aa)!=z||$a&&on(new $a)!=X)&&(on=function(Q){var ue=Io(Q),je=ue==L?Q.constructor:void 0,it=je?zr(je):"";if(it)switch(it){case Oa:return pe;case ao:return C;case Rs:return A;case lo:return z;case Ms:return X}return ue});function ac(Q,ue){return ue=ue??l,!!ue&&(typeof Q=="number"||De.test(Q))&&Q>-1&&Q%1==0&&Q<ue}function lc(Q){var ue=typeof Q;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?Q!=="__proto__":Q===null}function Vt(Q){return!!et&&et in Q}function pl(Q){var ue=Q&&Q.constructor,je=typeof ue=="function"&&ue.prototype||Kn;return Q===je}function gr(Q){return wt.call(Q)}function zr(Q){if(Q!=null){try{return ss.call(Q)}catch{}try{return Q+""}catch{}}return""}function bi(Q,ue){return Q===ue||Q!==Q&&ue!==ue}var Fa=Ro(function(){return arguments}())?Ro:function(Q){return uo(Q)&&wr.call(Q,"callee")&&!ar.call(Q,"callee")},er=Array.isArray;function An(Q){return Q!=null&&us(Q.length)&&!Vr(Q)}var cc=Rn||Ua;function Ki(Q,ue){return Si(Q,ue)}function Vr(Q){if(!lu(Q))return!1;var ue=Io(Q);return ue==w||ue==k||ue==h||ue==O}function us(Q){return typeof Q=="number"&&Q>-1&&Q%1==0&&Q<=l}function lu(Q){var ue=typeof Q;return Q!=null&&(ue=="object"||ue=="function")}function uo(Q){return Q!=null&&typeof Q=="object"}var ca=dn?fi(dn):za;function bd(Q){return An(Q)?au(Q):oc(Q)}function Mo(){return[]}function Ua(){return!1}t.exports=Ki})(Z1,Z1.exports);var mK=Z1.exports;const vK=Of(mK);function yK(t){if(t.length===0)return new Set;const n=t[0],e=t.slice(1),r=new Set;for(const o of n)e.every(a=>a.has(o))&&r.add(o);return r}function SK(t,n){const e={};for(const r of n)t.has(r)||(e.added??(e.added=new Set),e.added.add(r));for(const r of t)n.has(r)||(e.removed??(e.removed=new Set),e.removed.add(r));return e.added||e.removed?e:void 0}function UO(t,n){for(const[e,r]of Object.entries(t)){const o=r,a=n[e];if("eq"in o&&a!==o.eq||"neq"in o&&a===o.neq||"gt"in o&&(typeof a!="number"||a<=o.gt))return!1}return!0}function BO(t,n,e){const r=Object.fromEntries(Object.keys(e).map(o=>[o,new Set]));for(const[o,a]of Object.entries(e))if("eq"in a){const u=t.index(n,o).get().get(a.eq);if(u)for(const d of u)r[o].add(d)}else if("neq"in a){const l=t.index(n,o);for(const[u,d]of l.get())if(u!==a.neq)for(const h of d)r[o].add(h)}else if("gt"in a){const l=t.index(n,o);for(const[u,d]of l.get())if(u>a.gt)for(const h of d)r[o].add(h)}return yK(Object.values(r))}class bK{constructor(n,e){T(this,"indexCache",new Map);T(this,"historyCache",new Map);this.atoms=n,this.history=e}filterHistory(n){if(this.historyCache.has(n))return this.historyCache.get(n);const e=Qe("filterHistory:"+n,(r,o)=>{if(xm(r))return this.history.get();const a=this.history.getDiffSince(o);if(a===ka)return this.history.get();const l={added:{},removed:{},updated:{}};let u=0,d=0,h=0;for(const g of a){for(const v of ti(g.added))if(v.typeName===n)if(l.removed[v.id]){const S=l.removed[v.id];delete l.removed[v.id],d--,S!==v&&(l.updated[v.id]=[S,v],h++)}else l.added[v.id]=v,u++;for(const[v,S]of ti(g.updated))S.typeName===n&&(l.added[S.id]?l.added[S.id]=S:l.updated[S.id]?l.updated[S.id]=[l.updated[S.id][0],S]:(l.updated[S.id]=[v,S],h++));for(const v of ti(g.removed))v.typeName===n&&(l.added[v.id]?(delete l.added[v.id],u--):l.updated[v.id]?(l.removed[v.id]=l.updated[v.id][0],delete l.updated[v.id],h--,d++):(l.removed[v.id]=v,d++))}return u||d||h?IS(this.history.get(),l):r},{historyLength:100});return this.historyCache.set(n,e),e}index(n,e){const r=n+":"+e;if(this.indexCache.has(r))return this.indexCache.get(r);const o=this.__uncached_createIndex(n,e);return this.indexCache.set(r,o),o}__uncached_createIndex(n,e){const r=this.filterHistory(n),o=()=>{r.get();const a=new Map;for(const l of ti(this.atoms.get())){const u=l.get();if(u.typeName===n){const d=u[e];a.has(d)||a.set(d,new Set),a.get(d).add(u.id)}}return a};return Qe("index:"+n+":"+e,(a,l)=>{if(xm(a))return o();const u=r.getDiffSince(l);if(u===ka)return o();const d=new Map,h=(w,k)=>{let C=d.get(w);C||(C=new s1(a.get(w)??new Set)),C.add(k),d.set(w,C)},g=(w,k)=>{let C=d.get(w);C||(C=new s1(a.get(w)??new Set)),C.remove(k),d.set(w,C)};for(const w of u){for(const k of ti(w.added))if(k.typeName===n){const C=k[e];h(C,k.id)}for(const[k,C]of ti(w.updated))if(C.typeName===n){const E=k[e],R=C[e];E!==R&&(g(E,C.id),h(R,C.id))}for(const k of ti(w.removed))if(k.typeName===n){const C=k[e];g(C,k.id)}}let v,S;for(const[w,k]of d){const C=k.get();C&&(v||(v=new Map(a)),S||(S=new Map),C.value.size===0?v.delete(w):v.set(w,C.value),S.set(w,C.diff))}return v&&S?IS(v,S):a},{historyLength:100})}record(n,e=()=>({}),r="record:"+n+(e?":"+e.toString():"")){const o=this.ids(n,e,r);return Qe(r,()=>{var a;for(const l of o.get())return(a=this.atoms.get()[l])==null?void 0:a.get()})}records(n,e=()=>({}),r="records:"+n+(e?":"+e.toString():"")){const o=this.ids(n,e,"ids:"+r);return Qe(r,()=>[...o.get()].map(a=>{const l=this.atoms.get()[a];if(!l)throw new Error("no atom found for record id: "+a);return l.get()}))}ids(n,e=()=>({}),r="ids:"+n+(e?":"+e.toString():"")){const o=this.filterHistory(n),a=()=>{o.get();const d=e();return Object.keys(d).length===0?new Set(ti(this.atoms.get()).flatMap(h=>{const g=h.get();return g.typeName===n?g.id:[]})):BO(this,n,d)},l=d=>{const h=a(),g=SK(d,h);return g?IS(h,g):d},u=Qe("ids_query:"+r,e,{isEqual:vK});return Qe("query:"+r,(d,h)=>{const g=u.get();if(xm(d))return a();if(h<u.lastChangedEpoch)return l(d);const v=o.getDiffSince(h);if(v===ka)return l(d);const S=new s1(d);for(const k of v){for(const C of ti(k.added))C.typeName===n&&UO(g,C)&&S.add(C.id);for(const[C,E]of ti(k.updated))E.typeName===n&&(UO(g,E)?S.add(E.id):S.remove(E.id));for(const C of ti(k.removed))C.typeName===n&&S.remove(C.id)}const w=S.get();return w?IS(w.value,w.diff):d},{historyLength:50})}exec(n,e){const r=BO(this,n,e);if(r.size===0)return rd;const o=this.atoms.get();return[...r].map(a=>o[a].get())}}function Pm(t){if(process.env.NODE_ENV==="production")return t;const n=Object.getPrototypeOf(t);if(n&&!(n===Array.prototype||n===Object.prototype))throw console.error("cannot include non-js data in a record",t),new Error("cannot include non-js data in a record");const e=Object.getOwnPropertyNames(t);for(const r of e){const o=t[r];o&&typeof o=="object"&&Pm(o)}return Object.freeze(t)}class PL{constructor(n){T(this,"id",$C());T(this,"atoms",Es("store_atoms",{}));T(this,"history",Es("history",0,{historyLength:1e3}));T(this,"query",new bK(this.atoms,this.history));T(this,"listeners",new Set);T(this,"historyAccumulator",new xK);T(this,"historyReactor");T(this,"schema");T(this,"props");T(this,"scopedTypes");T(this,"onBeforeCreate");T(this,"onAfterCreate");T(this,"onBeforeChange");T(this,"onAfterChange");T(this,"onBeforeDelete");T(this,"onAfterDelete");T(this,"_runCallbacks",!0);T(this,"put",(n,e)=>{Vl(()=>{const r={},o={},a=this.atoms.__unsafe__getWithoutCapture();let l=null,u,d=!1;const h=this.onBeforeCreate&&this._runCallbacks?this.onBeforeCreate:null,g=this.onBeforeChange&&this._runCallbacks?this.onBeforeChange:null,v=this.isMergingRemoteChanges?"remote":"user";for(let S=0,w=n.length;S<w;S++){u=n[S];const k=(l??a)[u.id];if(k){const C=k.__unsafe__getWithoutCapture();g&&(u=g(C,u,v)),u=this.schema.validateRecord(this,u,e??"updateRecord",C),k.set(Pm(u));const E=k.__unsafe__getWithoutCapture();C!==E&&(d=!0,r[u.id]=[C,E])}else h&&(u=h(u,v)),d=!0,u=this.schema.validateRecord(this,u,e??"createRecord",null),o[u.id]=u,l||(l={...a}),l[u.id]=Es("atom:"+u.id,u)}if(l&&this.atoms.set(l),!!d&&(this.updateHistory({added:o,updated:r,removed:{}}),this._runCallbacks)){const{onAfterCreate:S,onAfterChange:w}=this;S&&Object.values(o).forEach(k=>{S(k,v)}),w&&Object.values(r).forEach(([k,C])=>{w(k,C,v)})}})});T(this,"remove",n=>{Vl(()=>{const e=[],r=this.isMergingRemoteChanges?"remote":"user";if(this.onBeforeDelete&&this._runCallbacks)for(const a of n){const l=this.atoms.__unsafe__getWithoutCapture()[a];l&&this.onBeforeDelete(l.get(),r)===!1&&e.push(a)}let o;if(this.atoms.update(a=>{let l;for(const u of n)e.includes(u)||u in a&&(l||(l={...a}),o||(o={}),delete l[u],o[u]=a[u].get());return l??a}),!!o&&(this.updateHistory({added:{},updated:{},removed:o}),this.onAfterDelete&&this._runCallbacks)){let a;for(let l=0,u=n.length;l<u;l++)a=o[n[l]],a&&this.onAfterDelete(a,r)}})});T(this,"get",n=>{var e;return(e=this.atoms.get()[n])==null?void 0:e.get()});T(this,"unsafeGetWithoutCapture",n=>{var e;return(e=this.atoms.get()[n])==null?void 0:e.__unsafe__getWithoutCapture()});T(this,"serialize",(n="document")=>{const e={};for(const[r,o]of id(this.atoms.get())){const a=o.get();(n==="all"||this.scopedTypes[n].has(a.typeName))&&(e[r]=a)}return e});T(this,"allRecords",()=>ti(this.atoms.get()).map(n=>n.get()));T(this,"clear",()=>{this.remove(NO(this.atoms.get()))});T(this,"update",(n,e)=>{const r=this.atoms.get()[n];if(!r){console.error(`Record ${n} not found. This is probably an error`);return}this.put([e(r.__unsafe__getWithoutCapture())])});T(this,"has",n=>!!this.atoms.get()[n]);T(this,"listen",(n,e)=>{this._flushHistory();const r={onHistory:n,filters:{source:(e==null?void 0:e.source)??"all",scope:(e==null?void 0:e.scope)??"all"}};return this.listeners.add(r),this.historyReactor.scheduler.isActivelyListening||this.historyReactor.start(),()=>{this.listeners.delete(r),this.listeners.size===0&&this.historyReactor.stop()}});T(this,"isMergingRemoteChanges",!1);T(this,"mergeRemoteChanges",n=>{if(this.isMergingRemoteChanges)return n();try{this.isMergingRemoteChanges=!0,Vl(n)}finally{this.isMergingRemoteChanges=!1}});T(this,"createComputedCache",(n,e,r)=>{const o=new FO;return{get:a=>{const l=this.atoms.get()[a];if(l)return o.get(l,()=>{const u=r?Qe(l.name+":equals",()=>l.get(),{isEqual:r}):l;return Qe(n+":"+a,()=>e(u.get()))}).get()}}});T(this,"createSelectedComputedCache",(n,e,r)=>{const o=new FO;return{get:a=>{const l=this.atoms.get()[a];if(!l)return;const u=Qe(n+":"+a+":selector",()=>e(l.get()));return o.get(l,()=>Qe(n+":"+a,()=>r(u.get()))).get()}}});T(this,"getRecordType",n=>{const e=this.schema.types[n.typeName];if(!e)throw new Error(`Record type ${n.typeName} not found`);return e});T(this,"_integrityChecker");T(this,"_isPossiblyCorrupted",!1);const{initialData:e,schema:r}=n;this.schema=r,this.props=n.props,e&&this.atoms.set(TL(id(e).map(([o,a])=>[o,Es("atom:"+o,Pm(this.schema.validateRecord(this,a,"initialize",null)))]))),this.historyReactor=VV("Store.historyReactor",()=>{this.history.get(),this._flushHistory()},{scheduleEffect:o=>hK(o)}),this.scopedTypes={document:new Set(ti(this.schema.types).filter(o=>o.scope==="document").map(o=>o.typeName)),session:new Set(ti(this.schema.types).filter(o=>o.scope==="session").map(o=>o.typeName)),presence:new Set(ti(this.schema.types).filter(o=>o.scope==="presence").map(o=>o.typeName))}}_flushHistory(){if(this.historyAccumulator.hasChanges()){const n=this.historyAccumulator.flush();for(const{changes:e,source:r}of n){let o=null,a=null,l=null;for(const{onHistory:u,filters:d}of this.listeners)if(!(d.source!=="all"&&d.source!==r))if(d.scope!=="all")if(d.scope==="document"){if(a??(a=this.filterChangesByScope(e,"document")),!a)continue;u({changes:a,source:r})}else if(d.scope==="session"){if(o??(o=this.filterChangesByScope(e,"session")),!o)continue;u({changes:o,source:r})}else{if(l??(l=this.filterChangesByScope(e,"presence")),!l)continue;u({changes:l,source:r})}else u({changes:e,source:r})}}}filterChangesByScope(n,e){const r={added:Qk(n.added,(o,a)=>this.scopedTypes[e].has(a.typeName)),updated:Qk(n.updated,(o,a)=>this.scopedTypes[e].has(a[1].typeName)),removed:Qk(n.removed,(o,a)=>this.scopedTypes[e].has(a.typeName))};return Object.keys(r.added).length===0&&Object.keys(r.updated).length===0&&Object.keys(r.removed).length===0?null:r}updateHistory(n){this.historyAccumulator.add({changes:n,source:this.isMergingRemoteChanges?"remote":"user"}),this.listeners.size===0&&this.historyAccumulator.clear(),this.history.set(this.history.get()+1,n)}validate(n){this.allRecords().forEach(e=>this.schema.validateRecord(this,e,n,null))}getSnapshot(n="document"){return{store:this.serialize(n),schema:this.schema.serialize()}}migrateSnapshot(n){const e=this.schema.migrateStoreSnapshot(n);if(e.type==="error")throw new Error(`Failed to migrate snapshot: ${e.reason}`);return{store:e.value,schema:this.schema.serialize()}}loadSnapshot(n){const e=this.schema.migrateStoreSnapshot(n);if(e.type==="error")throw new Error(`Failed to migrate snapshot: ${e.reason}`);Vl(()=>{this.clear(),this.put(Object.values(e.value)),this.ensureStoreIsUsable()})}extractingChanges(n){const e=[],r=this.historyAccumulator.intercepting(o=>e.push(o.changes));try{return Vl(n),OC(e)}finally{r()}}applyDiff(n,e=!0){const r=this._runCallbacks;try{this._runCallbacks=e,Vl(()=>{const o=ti(n.added).concat(ti(n.updated).map(([l,u])=>u)),a=NO(n.removed);o.length&&this.put(o),a.length&&this.remove(a)})}finally{this._runCallbacks=r}}ensureStoreIsUsable(){var n;this._integrityChecker??(this._integrityChecker=this.schema.createIntegrityChecker(this)),(n=this._integrityChecker)==null||n.call(this)}markAsPossiblyCorrupted(){this._isPossiblyCorrupted=!0}isPossiblyCorrupted(){return this._isPossiblyCorrupted}}function OC(t){const n={added:{},removed:{},updated:{}};for(const e of t){for(const[r,o]of id(e.added))if(n.removed[r]){const a=n.removed[r];delete n.removed[r],a!==o&&(n.updated[r]=[a,o])}else n.added[r]=o;for(const[r,[o,a]]of id(e.updated)){if(n.added[r]){n.added[r]=a,delete n.updated[r],delete n.removed[r];continue}if(n.updated[r]){n.updated[r]=[n.updated[r][0],a],delete n.removed[r];continue}n.updated[r]=e.updated[r],delete n.removed[r]}for(const[r,o]of id(e.removed))n.added[r]?delete n.added[r]:n.updated[r]?(n.removed[r]=n.updated[r][0],delete n.updated[r]):n.removed[r]=o}return n}function wK(t){const n=[];let e=t[0],r;for(let o=1,a=t.length;o<a;o++)r=t[o],e.source!==r.source?(n.push(e),e=r):e={source:e.source,changes:OC([e.changes,r.changes])};return n.push(e),Pm(n)}class xK{constructor(){T(this,"_history",[]);T(this,"_interceptors",new Set)}intercepting(n){return this._interceptors.add(n),()=>{this._interceptors.delete(n)}}add(n){this._history.push(n);for(const e of this._interceptors)e(n)}flush(){const n=wK(this._history);return this._history=[],n}clear(){this._history=[]}hasChanges(){return this._history.length>0}}function CK(t){return typeof t=="object"&&t!==null&&"id"in t&&"typeName"in t}function Bn(t){const{currentVersion:n,firstVersion:e,migrators:r={},subTypeKey:o,subTypeMigrations:a}=t;if(typeof n=="number"&&typeof e=="number"){if(n===e)throw Error("Current version is equal to initial version.");if(n<e)throw Error("Current version is lower than initial version.")}return{firstVersion:e??0,currentVersion:n??0,migrators:r,subTypeKey:o,subTypeMigrations:a}}var RS=(t=>(t.IncompatibleSubtype="incompatible-subtype",t.UnknownType="unknown-type",t.TargetVersionTooNew="target-version-too-new",t.TargetVersionTooOld="target-version-too-old",t.MigrationError="migration-error",t.UnrecognizedSubtype="unrecognized-subtype",t))(RS||{});function Cx({record:t,migrations:n,fromVersion:e,toVersion:r}){let o=e;if(!CK(t))throw new Error("[migrateRecord] object is not a record");const{typeName:a,id:l,...u}=t;let d=u;for(;o<r;){const h=o+1,g=n.migrators[h];if(!g)return{type:"error",reason:"target-version-too-new"};d=g.up(d),o=h}for(;o>r;){const h=o-1,g=n.migrators[o];if(!g)return{type:"error",reason:"target-version-too-old"};d=g.down(d),o=h}return{type:"success",value:{...d,id:l,typeName:a}}}function qI({value:t,migrations:n,fromVersion:e,toVersion:r}){let o=e;for(;o<r;){const a=o+1,l=n.migrators[a];if(!l)return{type:"error",reason:"target-version-too-new"};t=l.up(t),o=a}for(;o>r;){const a=o-1,l=n.migrators[o];if(!l)return{type:"error",reason:"target-version-too-old"};t=l.down(t),o=a}return{type:"success",value:t}}class QI{constructor(n,e){this.types=n,this.options=e}static create(n,e){return new QI(n,e??{})}get currentStoreVersion(){var n;return((n=this.options.snapshotMigrations)==null?void 0:n.currentVersion)??0}validateRecord(n,e,r,o){try{const a=Zh(this.types,e.typeName);if(!a)throw new Error(`Missing definition for record type ${e.typeName}`);return a.validate(e)}catch(a){if(this.options.onValidationFailure)return this.options.onValidationFailure({store:n,record:e,phase:r,recordBefore:o,error:a});throw a}}migratePersistedRecord(n,e,r="up"){var v;const o=Zh(this.types,n.typeName),a=e.recordVersions[n.typeName];if(!a||!o)return{type:"error",reason:RS.UnknownType};const l=o.migrations.currentVersion,u=a.version;if(l!==u){const S=Cx(r==="up"?{record:n,migrations:o.migrations,fromVersion:u,toVersion:l}:{record:n,migrations:o.migrations,fromVersion:l,toVersion:u});if(S.type==="error")return S;n=S.value}if(!o.migrations.subTypeKey)return{type:"success",value:n};const d=(v=o.migrations.subTypeMigrations)==null?void 0:v[n[o.migrations.subTypeKey]],h="subTypeVersions"in a?a.subTypeVersions[n[o.migrations.subTypeKey]]:void 0;if(d===void 0)return{type:"error",reason:RS.UnrecognizedSubtype};if(h===void 0)return{type:"error",reason:RS.IncompatibleSubtype};const g=Cx(r==="up"?{record:n,migrations:d,fromVersion:h,toVersion:d.currentVersion}:{record:n,migrations:d,fromVersion:d.currentVersion,toVersion:h});return g.type==="error"?g:{type:"success",value:g.value}}migrateStoreSnapshot(n){let{store:e}=n;const r=this.options.snapshotMigrations;if(!r)return{type:"success",value:e};const o=r.currentVersion,a=n.schema.storeVersion??0;if(o<a)return{type:"error",reason:RS.TargetVersionTooOld};if(o>a){const u=qI({value:e,migrations:r,fromVersion:a,toVersion:o});if(u.type==="error")return u;e=u.value}const l=[];for(const u of ti(e)){const d=this.migratePersistedRecord(u,n.schema);if(d.type==="error")return d;d.value&&d.value!==u&&l.push(d.value)}if(l.length){e={...e};for(const u of l)e[u.id]=u}return{type:"success",value:e}}createIntegrityChecker(n){var e,r;return((r=(e=this.options).createIntegrityChecker)==null?void 0:r.call(e,n))??void 0}serialize(){var n;return{schemaVersion:1,storeVersion:((n=this.options.snapshotMigrations)==null?void 0:n.currentVersion)??0,recordVersions:Object.fromEntries(ti(this.types).map(e=>[e.typeName,e.migrations.subTypeKey&&e.migrations.subTypeMigrations?{version:e.migrations.currentVersion,subTypeKey:e.migrations.subTypeKey,subTypeVersions:e.migrations.subTypeMigrations?Object.fromEntries(Object.entries(e.migrations.subTypeMigrations).map(([r,o])=>[r,o.currentVersion])):void 0}:{version:e.migrations.currentVersion}]))}}serializeEarliestVersion(){var n;return{schemaVersion:1,storeVersion:((n=this.options.snapshotMigrations)==null?void 0:n.firstVersion)??0,recordVersions:Object.fromEntries(ti(this.types).map(e=>[e.typeName,e.migrations.subTypeKey&&e.migrations.subTypeMigrations?{version:e.migrations.firstVersion,subTypeKey:e.migrations.subTypeKey,subTypeVersions:e.migrations.subTypeMigrations?Object.fromEntries(Object.entries(e.migrations.subTypeMigrations).map(([r,o])=>[r,o.firstVersion])):void 0}:{version:e.migrations.firstVersion}]))}}}const EK=(t,n)=>{if(t.schemaVersion>n.schemaVersion)return 1;if(t.schemaVersion<n.schemaVersion)return-1;if(t.storeVersion>n.storeVersion)return 1;if(t.storeVersion<n.storeVersion)return-1;for(const e of Object.keys(t.recordVersions)){const r=t.recordVersions[e],o=n.recordVersions[e];if(r.version>o.version)return 1;if(r.version<o.version)return-1;if("subTypeVersions"in r&&!("subTypeVersions"in o))return 1;if(!("subTypeVersions"in r)&&"subTypeVersions"in o)return-1;if(!(!("subTypeVersions"in r)||!("subTypeVersions"in o)))for(const a of Object.keys(r.subTypeVersions)){const l=r.subTypeVersions[a],u=o.subTypeVersions[a];if(l>u)return 1;if(l<u)return-1}}return 0};function _K(t){if(!t.length)return null;let n="";for(const e of t)typeof e=="number"?n+=`.${e}`:e.startsWith("(")?n.endsWith(")")?n=`${n.slice(0,-1)}, ${e.slice(1)}`:n+=e:n+=`.${e}`;return n.startsWith(".")?n.slice(1):n}class fr extends Error{constructor(e,r=[]){const o=_K(r),a=e.split(`
`).map((l,u)=>u===0?l:`  ${l}`).join(`
`);super(r?`At ${o}: ${a}`:a);T(this,"name","ValidationError");this.rawMessage=e,this.path=r}}function zm(t,n){try{return n()}catch(e){throw e instanceof fr?new fr(e.rawMessage,[t,...e.path]):new fr(e.toString(),[t])}}function Im(t){if(t===null)return"null";if(Array.isArray(t))return"an array";const n=typeof t;switch(n){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return`a ${n}`;case"object":return`an ${n}`;case"undefined":return"undefined";default:Nm(n)}}class Ts{constructor(n){this.validationFn=n}validate(n){const e=this.validationFn(n);if(process.env.NODE_ENV!=="production"&&!Object.is(n,e))throw new fr("Validator functions must return the same value they were passed");return e}isValid(n){try{return this.validate(n),!0}catch{return!1}}nullable(){return MK(this)}optional(){return RL(this)}refine(n){return new Ts(e=>n(this.validate(e)))}check(n,e){return typeof n=="string"?this.refine(r=>(zm(`(check ${n})`,()=>e(r)),r)):this.refine(r=>(n(r),r))}}class TK extends Ts{constructor(n){super(e=>{const r=RK.validate(e);for(let o=0;o<r.length;o++)zm(o,()=>n.validate(r[o]));return r}),this.itemValidator=n}nonEmpty(){return this.check(n=>{if(n.length===0)throw new fr("Expected a non-empty array")})}lengthGreaterThan1(){return this.check(n=>{if(n.length<=1)throw new fr("Expected an array with length greater than 1")})}}class J1 extends Ts{constructor(n,e=!1){super(r=>{if(typeof r!="object"||r===null)throw new fr(`Expected object, got ${Im(r)}`);for(const[o,a]of Object.entries(n))zm(o,()=>{a.validate(Zh(r,o))});if(!e){for(const o of Object.keys(r))if(!AC(n,o))throw new fr("Unexpected property",[o])}return r}),this.config=n,this.shouldAllowUnknownProperties=e}allowUnknownProperties(){return new J1(this.config,!0)}extend(n){return new J1({...this.config,...n})}}class ZI extends Ts{constructor(n,e,r){super(o=>{if(typeof o!="object"||o===null)throw new fr(`Expected an object, got ${Im(o)}`,[]);const a=Zh(o,n);if(typeof a!="string")throw new fr(`Expected a string for key "${n}", got ${Im(a)}`);const l=AC(e,a)?e[a]:void 0;return l===void 0?this.unknownValueValidation(o,a):zm(`(${n} = ${a})`,()=>l.validate(o))}),this.key=n,this.config=e,this.unknownValueValidation=r}validateUnknownVariants(n){return new ZI(this.key,this.config,n)}}class kK extends Ts{constructor(n,e){super(r=>{if(typeof r!="object"||r===null)throw new fr(`Expected object, got ${Im(r)}`);for(const[o,a]of Object.entries(r))zm(o,()=>{n.validate(o),e.validate(a)});return r}),this.keyValidator=n,this.valueValidator=e}}function JI(t){return new Ts(n=>{if(typeof n!==t)throw new fr(`Expected ${t}, got ${Im(n)}`);return n})}const PK=new Ts(t=>t),nn=JI("string"),Nt=JI("number").check(t=>{if(Number.isNaN(t))throw new fr("Expected a number, got NaN");if(!Number.isFinite(t))throw new fr(`Expected a finite number, got ${t}`)}),eR=Nt.check(t=>{if(t<0)throw new fr(`Expected a positive number, got ${t}`)}),ra=Nt.check(t=>{if(t<=0)throw new fr(`Expected a non-zero positive number, got ${t}`)}),IL=Nt.check(t=>{if(!Number.isInteger(t))throw new fr(`Expected an integer, got ${t}`)}),Ex=IL.check(t=>{if(t<0)throw new fr(`Expected a positive integer, got ${t}`)}),IK=IL.check(t=>{if(t<=0)throw new fr(`Expected a non-zero positive integer, got ${t}`)}),kn=JI("boolean");function ia(t){return new Ts(n=>{if(n!==t)throw new fr(`Expected ${t}, got ${JSON.stringify(n)}`);return t})}const RK=new Ts(t=>{if(!Array.isArray(t))throw new fr(`Expected an array, got ${Im(t)}`);return t});function _s(t){return new TK(t)}function Ln(t){return new J1(t)}function UP(t){return t===null||typeof t=="number"||typeof t=="string"||typeof t=="boolean"?!0:Array.isArray(t)?t.every(UP):typeof t=="object"?Object.values(t).every(UP):!1}const Gc=new Ts(t=>{if(UP(t))return t;throw new fr(`Expected json serializable value, got ${typeof t}`)});function BP(t,n){return new kK(t,n)}function tR(t,n){return new ZI(t,n,(e,r)=>{throw new fr(`Expected one of ${Object.keys(n).map(o=>JSON.stringify(o)).join(" or ")}, got ${JSON.stringify(r)}`,[t])})}function gd(t,n){return new Ts(e=>{const r=e&&typeof e=="object"&&"id"in e&&typeof e.id=="string"?`${t}(id = ${e.id})`:t;return zm(r,()=>n.validate(e))})}function d0(t){return new Ts(n=>{if(!t.has(n)){const e=Array.from(t,r=>JSON.stringify(r)).join(" or ");throw new fr(`Expected ${e}, got ${n}`)}return n})}function RL(t){return new Ts(n=>{if(n!==void 0)return t.validate(n)})}function MK(t){return new Ts(n=>n===null?null:t.validate(n))}function ML(...t){return d0(new Set(t))}function AL(t){try{return new URL(t)}catch{throw new fr(`Expected a valid url, got ${JSON.stringify(t)}`)}}const AK=new Set(["http:","https:","mailto:"]),Ma=nn.check(t=>{if(t==="")return;const n=AL(t);if(!AK.has(n.protocol.toLowerCase()))throw new fr(`Expected a valid url, got ${JSON.stringify(t)} (invalid protocol)`)}),$K=new Set(["http:","https:","data:"]),Fm=nn.check(t=>{if(t==="")return;const n=AL(t);if(!$K.has(n.protocol.toLowerCase()))throw new fr(`Expected a valid url, got ${JSON.stringify(t)} (invalid protocol)`)});function ql(t){return nn.refine(n=>{if(!n.startsWith(`${t}:`))throw new Error(`${t} ID must start with "${t}:"`);return n})}const DC=ql("asset");function nR(t,n){return Ln({id:DC,typeName:ia("asset"),type:ia(t),props:n,meta:Gc})}const OK=gd("camera",Ln({typeName:ia("camera"),id:ql("camera"),x:Nt,y:Nt,z:Nt,meta:Gc})),HO={AddMeta:1},DK=Bn({currentVersion:HO.AddMeta,migrators:{[HO.AddMeta]:{up:t=>({...t,meta:{}}),down:({meta:t,...n})=>({...n})}}}),Go=pd("camera",{validator:OK,migrations:DK,scope:"session"}).withDefaultProperties(()=>({x:0,y:0,z:1,meta:{}})),US=Ln({x:Nt,y:Nt,z:Nt.optional()}),$S=Ln({x:Nt,y:Nt,w:Nt,h:Nt}),LK=new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate","zoom-in","zoom-out"]),$L=d0(LK),jK=Ln({type:$L,rotation:Nt}),OL=Nt.check(t=>{if(t<0||t>1)throw new fr("Opacity must be between 0 and 1")}),NK=new Set(["accent","white","black","selection-stroke","selection-fill","laser","muted-1"]),zK=d0(NK),FK=new Set(["starting","paused","active","stopping"]),DL=Ln({id:nn,points:_s(US),size:eR,color:zK,opacity:Nt,state:d0(FK),delay:Nt,shrink:Nt,taper:kn}),BS=ql("page"),UK=gd("page",Ln({typeName:ia("page"),id:BS,name:nn,index:nn,meta:Gc})),VO={AddMeta:1},BK=Bn({currentVersion:VO.AddMeta,migrators:{[VO.AddMeta]:{up:t=>({...t,meta:{}}),down:({meta:t,...n})=>({...n})}}}),cd=pd("page",{validator:UK,migrations:BK,scope:"document"}).withDefaultProperties(()=>({meta:{}}));function Js(t){return cd.isId(t)}ql("instance");function HK(t){const n={};for(const[r,o]of t)n[r]=RL(o);const e=gd("instance",Ln({typeName:ia("instance"),id:ql("instance"),currentPageId:BS,followingUserId:nn.nullable(),brush:$S.nullable(),opacityForNextShape:OL,stylesForNextShape:Ln(n),cursor:jK,scribbles:_s(DL),isFocusMode:kn,isDebugMode:kn,isToolLocked:kn,exportBackground:kn,screenBounds:$S,zoomBrush:$S.nullable(),isPenMode:kn,isGridMode:kn,chatMessage:nn,isChatting:kn,highlightedUserIds:_s(nn),canMoveCamera:kn,isFocused:kn,devicePixelRatio:Nt,isCoarsePointer:kn,isHoveringCanvas:kn.nullable(),openMenus:_s(nn),isChangingStyle:kn,isReadonly:kn,meta:Gc}));return pd("instance",{migrations:VK,validator:e,scope:"session"}).withDefaultProperties(()=>({followingUserId:null,opacityForNextShape:1,stylesForNextShape:{},brush:null,scribbles:[],cursor:{type:"default",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:process.env.NODE_ENV==="development",isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720},zoomBrush:null,isGridMode:!1,isPenMode:!1,chatMessage:"",isChatting:!1,highlightedUserIds:[],canMoveCamera:!0,isFocused:!1,devicePixelRatio:typeof window>"u"?1:window.devicePixelRatio,isCoarsePointer:!1,isHoveringCanvas:null,openMenus:[],isChangingStyle:!1,isReadonly:!1,meta:{}}))}const Gr={AddTransparentExportBgs:1,RemoveDialog:2,AddToolLockMode:3,RemoveExtraPropsForNextShape:4,AddLabelColor:5,AddFollowingUserId:6,RemoveAlignJustify:7,AddZoom:8,AddVerticalAlign:9,AddScribbleDelay:10,RemoveUserId:11,AddIsPenModeAndIsGridMode:12,HoistOpacity:13,AddChat:14,AddHighlightedUserIds:15,ReplacePropsForNextShapeWithStylesForNextShape:16,AddMeta:17,RemoveCursorColor:18,AddLonelyProperties:19,ReadOnlyReadonly:20,AddHoveringCanvas:21,AddScribbles:22},VK=Bn({currentVersion:Gr.AddScribbles,migrators:{[Gr.AddTransparentExportBgs]:{up:t=>({...t,exportBackground:!0}),down:({exportBackground:t,...n})=>n},[Gr.RemoveDialog]:{up:({dialog:t,...n})=>n,down:t=>({...t,dialog:null})},[Gr.AddToolLockMode]:{up:t=>({...t,isToolLocked:!1}),down:({isToolLocked:t,...n})=>n},[Gr.RemoveExtraPropsForNextShape]:{up:({propsForNextShape:t,...n})=>({...n,propsForNextShape:Object.fromEntries(Object.entries(t).filter(([e])=>["color","labelColor","dash","fill","size","font","align","verticalAlign","icon","geo","arrowheadStart","arrowheadEnd","spline"].includes(e)))}),down:t=>t},[Gr.AddLabelColor]:{up:({propsForNextShape:t,...n})=>({...n,propsForNextShape:{...t,labelColor:"black"}}),down:t=>{const{labelColor:n,...e}=t.propsForNextShape;return{...t,propsForNextShape:{...e}}}},[Gr.AddFollowingUserId]:{up:t=>({...t,followingUserId:null}),down:({followingUserId:t,...n})=>n},[Gr.RemoveAlignJustify]:{up:t=>{let n=t.propsForNextShape.align;return n==="justify"&&(n="start"),{...t,propsForNextShape:{...t.propsForNextShape,align:n}}},down:t=>({...t})},[Gr.AddZoom]:{up:t=>({...t,zoomBrush:null}),down:({zoomBrush:t,...n})=>n},[Gr.AddVerticalAlign]:{up:t=>({...t,propsForNextShape:{...t.propsForNextShape,verticalAlign:"middle"}}),down:t=>{const{verticalAlign:n,...e}=t.propsForNextShape;return{...t,propsForNextShape:e}}},[Gr.AddScribbleDelay]:{up:t=>t.scribble!==null?{...t,scribble:{...t.scribble,delay:0}}:{...t},down:t=>{if(t.scribble!==null){const{delay:n,...e}=t.scribble;return{...t,scribble:e}}return{...t}}},[Gr.RemoveUserId]:{up:({userId:t,...n})=>n,down:t=>({...t,userId:"user:none"})},[Gr.AddIsPenModeAndIsGridMode]:{up:t=>({...t,isPenMode:!1,isGridMode:!1}),down:({isPenMode:t,isGridMode:n,...e})=>e},[Gr.HoistOpacity]:{up:({propsForNextShape:{opacity:t,...n},...e})=>({...e,opacityForNextShape:Number(t??"1"),propsForNextShape:n}),down:({opacityForNextShape:t,...n})=>({...n,propsForNextShape:{...n.propsForNextShape,opacity:t<.175?"0.1":t<.375?"0.25":t<.625?"0.5":t<.875?"0.75":"1"}})},[Gr.AddChat]:{up:t=>({...t,chatMessage:"",isChatting:!1}),down:({chatMessage:t,isChatting:n,...e})=>e},[Gr.AddHighlightedUserIds]:{up:t=>({...t,highlightedUserIds:[]}),down:({highlightedUserIds:t,...n})=>n},[Gr.ReplacePropsForNextShapeWithStylesForNextShape]:{up:({propsForNextShape:t,...n})=>({...n,stylesForNextShape:{}}),down:({stylesForNextShape:t,...n})=>({...n,propsForNextShape:{color:"black",labelColor:"black",dash:"draw",fill:"none",size:"m",icon:"file",font:"draw",align:"middle",verticalAlign:"middle",geo:"rectangle",arrowheadStart:"none",arrowheadEnd:"arrow",spline:"line"}})},[Gr.AddMeta]:{up:t=>({...t,meta:{}}),down:({meta:t,...n})=>({...n})},[Gr.RemoveCursorColor]:{up:t=>{const{color:n,...e}=t.cursor;return{...t,cursor:e}},down:t=>({...t,cursor:{...t.cursor,color:"black"}})},[Gr.AddLonelyProperties]:{up:t=>({...t,canMoveCamera:!0,isFocused:!1,devicePixelRatio:1,isCoarsePointer:!1,openMenus:[],isChangingStyle:!1,isReadOnly:!1}),down:({canMoveCamera:t,isFocused:n,devicePixelRatio:e,isCoarsePointer:r,openMenus:o,isChangingStyle:a,isReadOnly:l,...u})=>({...u})},[Gr.ReadOnlyReadonly]:{up:({isReadOnly:t,...n})=>({...n,isReadonly:t}),down:({isReadonly:t,...n})=>({...n,isReadOnly:t})},[Gr.AddHoveringCanvas]:{up:t=>({...t,isHoveringCanvas:null}),down:({isHoveringCanvas:t,...n})=>({...n})},[Gr.AddScribbles]:{up:({scribble:t,...n})=>({...n,scribbles:[]}),down:({scribbles:t,...n})=>({...n,scribble:null})}}}),Cs="instance:instance",KK=nn.refine(t=>{if(!t.startsWith("page:")&&!t.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return t}),Bl=ql("shape");function YK(t,n,e){return Ln({id:Bl,typeName:ia("shape"),x:Nt,y:Nt,rotation:Nt,index:nn,parentId:KK,type:ia(t),isLocked:kn,opacity:OL,props:n?Ln(n):Gc,meta:e?Ln(e):Gc})}const WK=gd("instance_page_state",Ln({typeName:ia("instance_page_state"),id:ql("instance_page_state"),pageId:BS,selectedShapeIds:_s(Bl),hintingShapeIds:_s(Bl),erasingShapeIds:_s(Bl),hoveredShapeId:Bl.nullable(),editingShapeId:Bl.nullable(),croppingShapeId:Bl.nullable(),focusedGroupId:Bl.nullable(),meta:Gc})),Xg={AddCroppingId:1,RemoveInstanceIdAndCameraId:2,AddMeta:3,RenameProperties:4,RenamePropertiesAgain:5},GK=Bn({currentVersion:Xg.RenamePropertiesAgain,migrators:{[Xg.AddCroppingId]:{up(t){return{...t,croppingShapeId:null}},down({croppingShapeId:t,...n}){return n}},[Xg.RemoveInstanceIdAndCameraId]:{up({instanceId:t,cameraId:n,...e}){return e},down(t){return{...t,instanceId:Cs,cameraId:Go.createId("void")}}},[Xg.AddMeta]:{up:t=>({...t,meta:{}}),down:({meta:t,...n})=>({...n})},[Xg.RenameProperties]:{up:t=>{const{selectedShapeIds:n,hintingShapeIds:e,erasingShapeIds:r,hoveredShapeId:o,editingShapeId:a,croppingShapeId:l,focusedGroupId:u,...d}=t;return{selectedShapeIds:n,hintingShapeIds:e,erasingShapeIds:r,hoveredShapeId:o,editingShapeId:a,croppingShapeId:l,focusedGroupId:u,...d}},down:t=>{const{selectedShapeIds:n,hintingShapeIds:e,erasingShapeIds:r,hoveredShapeId:o,editingShapeId:a,croppingShapeId:l,focusedGroupId:u,...d}=t;return{selectedShapeIds:n,hintingShapeIds:e,erasingShapeIds:r,hoveredShapeId:o,editingShapeId:a,croppingShapeId:l,focusedGroupId:u,...d}}},[Xg.RenamePropertiesAgain]:{up:t=>{const{selectedIds:n,hintingIds:e,erasingIds:r,hoveredId:o,editingId:a,croppingShapeId:l,croppingId:u,focusLayerId:d,...h}=t;return{...h,selectedShapeIds:n,hintingShapeIds:e,erasingShapeIds:r,hoveredShapeId:o,editingShapeId:a,croppingShapeId:l??u??null,focusedGroupId:d}},down:t=>{const{selectedShapeIds:n,hintingShapeIds:e,erasingShapeIds:r,hoveredShapeId:o,editingShapeId:a,croppingShapeId:l,focusedGroupId:u,...d}=t;return{...d,selectedIds:n,hintingIds:e,erasingIds:r,hoveredId:o,editingId:a,croppingId:l,focusLayerId:u}}}}}),Xo=pd("instance_page_state",{migrations:GK,validator:WK,scope:"session"}).withDefaultProperties(()=>({editingShapeId:null,croppingShapeId:null,selectedShapeIds:[],hoveredShapeId:null,erasingShapeIds:[],hintingShapeIds:[],focusedGroupId:null,meta:{}})),XK=gd("pointer",Ln({typeName:ia("pointer"),id:ql("pointer"),x:Nt,y:Nt,lastActivityTimestamp:Nt,meta:Gc})),KO={AddMeta:1},qK=Bn({currentVersion:KO.AddMeta,migrators:{[KO.AddMeta]:{up:t=>({...t,meta:{}}),down:({meta:t,...n})=>({...n})}}}),rR=pd("pointer",{validator:XK,migrations:qK,scope:"session"}).withDefaultProperties(()=>({x:0,y:0,lastActivityTimestamp:0,meta:{}})),eC=rR.createId("pointer"),QK=gd("instance_presence",Ln({typeName:ia("instance_presence"),id:ql("instance_presence"),userId:nn,userName:nn,lastActivityTimestamp:Nt,followingUserId:nn.nullable(),cursor:Ln({x:Nt,y:Nt,type:$L,rotation:Nt}),color:nn,camera:Ln({x:Nt,y:Nt,z:Nt}),screenBounds:$S,selectedShapeIds:_s(ql("shape")),currentPageId:ql("page"),brush:$S.nullable(),scribbles:_s(DL),chatMessage:nn,meta:Gc})),qg={AddScribbleDelay:1,RemoveInstanceId:2,AddChatMessage:3,AddMeta:4,RenameSelectedShapeIds:5},ZK=Bn({currentVersion:qg.RenameSelectedShapeIds,migrators:{[qg.AddScribbleDelay]:{up:t=>t.scribble!==null?{...t,scribble:{...t.scribble,delay:0}}:{...t},down:t=>{if(t.scribble!==null){const{delay:n,...e}=t.scribble;return{...t,scribble:e}}return{...t}}},[qg.RemoveInstanceId]:{up:({instanceId:t,...n})=>n,down:t=>({...t,instanceId:Cs})},[qg.AddChatMessage]:{up:t=>({...t,chatMessage:""}),down:({chatMessage:t,...n})=>n},[qg.AddMeta]:{up:t=>({...t,meta:{}}),down:({meta:t,...n})=>({...n})},[qg.RenameSelectedShapeIds]:{up:t=>{const{selectedShapeIds:n,...e}=t;return{selectedShapeIds:n,...e}},down:t=>{const{selectedShapeIds:n,...e}=t;return{selectedShapeIds:n,...e}}}}}),JK=pd("instance_presence",{migrations:ZK,validator:QK,scope:"presence"}).withDefaultProperties(()=>({lastActivityTimestamp:0,followingUserId:null,color:"#FF0000",camera:{x:0,y:0,z:1},cursor:{x:0,y:0,type:"default",rotation:0},screenBounds:{x:0,y:0,w:1,h:1},selectedShapeIds:[],brush:null,scribbles:[],chatMessage:"",meta:{}})),eY=gd("document",Ln({typeName:ia("document"),id:ia("document:document"),gridSize:Nt,name:nn,meta:Gc})),Jk={AddName:1,AddMeta:2},tY=Bn({currentVersion:Jk.AddMeta,migrators:{[Jk.AddName]:{up:t=>({...t,name:""}),down:({name:t,...n})=>n},[Jk.AddMeta]:{up:t=>({...t,meta:{}}),down:({meta:t,...n})=>({...n})}}}),iR=pd("document",{migrations:tY,validator:eY,scope:"document"}).withDefaultProperties(()=>({gridSize:10,name:"",meta:{}})),HP=iR.createId("document");function nY(t,n){return t.index<n.index?-1:t.index>n.index?1:0}function YO(t){t.typeName==="asset"&&("src"in t&&(t.src="<redacted>"),"src"in t.props&&(t.props.src="<redacted>"))}const rY=({error:t,phase:n,record:e,recordBefore:r})=>{throw GI(t,{tags:{origin:"store.validateRecord",storePhase:n,isExistingValidationIssue:n==="initialize"},extras:{recordBefore:r?YO(Tf(r)):void 0,recordAfter:YO(Tf(e))}}),t};function iY(){return[cd.create({id:"page:page",name:"Page 1",index:"a1",meta:{}})]}function oY(t){const n=t.query.ids("page"),e=()=>{if(!t.has(HP))return t.put([iR.create({id:HP,name:t.props.defaultName})]),e();if(!t.has(eC))return t.put([rR.create({id:eC})]),e();const r=n.get();if(r.size===0)return t.put(iY()),e();const o=()=>[...r].map(d=>t.get(d)).sort(nY)[0].id,a=t.get(Cs);if(a){if(!r.has(a.currentPageId))return t.put([{...a,currentPageId:o()}]),e()}else return t.put([t.schema.types.instance.create({id:Cs,currentPageId:o(),exportBackground:!0})]),e();const l=new Set,u=new Set;for(const d of r){const h=Xo.createId(d);t.has(h)||l.add(h);const g=Go.createId(d);t.has(g)||u.add(g)}l.size>0&&t.put([...l].map(d=>Xo.create({id:d,pageId:Xo.parseId(d)}))),u.size>0&&t.put([...u].map(d=>Go.create({id:d})))};return e}const sY=nR("bookmark",Ln({title:nn,description:nn,image:nn,src:Fm.nullable()})),WO={MakeUrlsValid:1},aY=Bn({currentVersion:WO.MakeUrlsValid,migrators:{[WO.MakeUrlsValid]:{up:t=>{const n=t.props.src;return n&&!Fm.isValid(n)?{...t,props:{...t.props,src:""}}:t},down:t=>t}}}),lY=nR("image",Ln({w:Nt,h:Nt,name:nn,isAnimated:kn,mimeType:nn.nullable(),src:Fm.nullable()})),_x={AddIsAnimated:1,RenameWidthHeight:2,MakeUrlsValid:3},cY=Bn({currentVersion:_x.MakeUrlsValid,migrators:{[_x.AddIsAnimated]:{up:t=>({...t,props:{...t.props,isAnimated:!1}}),down:t=>{const{isAnimated:n,...e}=t.props;return{...t,props:e}}},[_x.RenameWidthHeight]:{up:t=>{const{width:n,height:e,...r}=t.props;return{...t,props:{w:n,h:e,...r}}},down:t=>{const{w:n,h:e,...r}=t.props;return{...t,props:{width:n,height:e,...r}}}},[_x.MakeUrlsValid]:{up:t=>{const n=t.props.src;return n&&!Fm.isValid(n)?{...t,props:{...t.props,src:""}}:t},down:t=>t}}}),uY=nR("video",Ln({w:Nt,h:Nt,name:nn,isAnimated:kn,mimeType:nn.nullable(),src:Fm.nullable()})),Tx={AddIsAnimated:1,RenameWidthHeight:2,MakeUrlsValid:3},dY=Bn({currentVersion:Tx.MakeUrlsValid,migrators:{[Tx.AddIsAnimated]:{up:t=>({...t,props:{...t.props,isAnimated:!1}}),down:t=>{const{isAnimated:n,...e}=t.props;return{...t,props:e}}},[Tx.RenameWidthHeight]:{up:t=>{const{width:n,height:e,...r}=t.props;return{...t,props:{w:n,h:e,...r}}},down:t=>{const{w:n,h:e,...r}=t.props;return{...t,props:{width:n,height:e,...r}}}},[Tx.MakeUrlsValid]:{up:t=>{const n=t.props.src;return n&&!Fm.isValid(n)?{...t,props:{...t.props,src:""}}:t},down:t=>t}}}),fY=gd("asset",tR("type",{image:lY,video:uY,bookmark:sY})),GO={AddMeta:1},hY=Bn({subTypeKey:"type",subTypeMigrations:{image:cY,video:dY,bookmark:aY},currentVersion:GO.AddMeta,migrators:{[GO.AddMeta]:{up:t=>({...t,meta:{}}),down:({meta:t,...n})=>({...n})}}}),Wh=pd("asset",{migrations:hY,validator:fY,scope:"document"}).withDefaultProperties(()=>({meta:{}}));class Pi{constructor(n,e,r){this.id=n,this.defaultValue=e,this.type=r}static define(n,e){const{defaultValue:r,type:o=PK}=e;return new Pi(n,r,o)}static defineEnum(n,e){const{defaultValue:r,values:o}=e;return new pY(n,r,o)}validate(n){return this.type.validate(n)}}class pY extends Pi{constructor(n,e,r){super(n,e,ML(...r)),this.values=r}}const kx={AddIsLocked:1,HoistOpacity:2,AddMeta:3},e2=Bn({currentVersion:kx.AddMeta,migrators:{[kx.AddIsLocked]:{up:t=>({...t,isLocked:!1}),down:t=>{const{isLocked:n,...e}=t;return{...e}}},[kx.HoistOpacity]:{up:({props:{opacity:t,...n},...e})=>({...e,opacity:Number(t??"1"),props:n}),down:({opacity:t,...n})=>({...n,props:{...n.props,opacity:t<.175?"0.1":t<.375?"0.25":t<.625?"0.5":t<.875?"0.75":"1"}})},[kx.AddMeta]:{up:t=>({...t,meta:{}}),down:({meta:t,...n})=>({...n})}}});function Gh(t){return t?t.typeName==="shape":!1}function il(t){return t?t.startsWith("shape:"):!1}function Ir(t){return`shape:${t??$C()}`}function LL(t){const n=new Map;for(const[e,r]of Object.entries(t))if(r instanceof Pi){if(n.has(r))throw new Error(`Duplicate style prop ${r.id}. Each style prop can only be used once within a shape.`);n.set(r,e)}return n}function gY(t){return pd("shape",{migrations:Bn({currentVersion:e2.currentVersion,firstVersion:e2.firstVersion,migrators:e2.migrators,subTypeKey:"type",subTypeMigrations:zO(t,(n,e)=>e.migrations??Bn({}))}),scope:"document",validator:gd("shape",tR("type",zO(t,(n,{props:e,meta:r})=>YK(n,e,r))))}).withDefaultProperties(()=>({x:0,y:0,rotation:0,isLocked:!1,opacity:1,meta:{}}))}const uS={RemoveCodeAndIconShapeTypes:1,AddInstancePresenceType:2,RemoveTLUserAndPresenceAndAddPointer:3,RemoveUserDocument:4},mY=Bn({currentVersion:uS.RemoveUserDocument,migrators:{[uS.RemoveCodeAndIconShapeTypes]:{up:t=>Object.fromEntries(Object.entries(t).filter(([n,e])=>e.typeName!=="shape"||e.type!=="icon"&&e.type!=="code")),down:t=>t},[uS.AddInstancePresenceType]:{up:t=>t,down:t=>Object.fromEntries(Object.entries(t).filter(([n,e])=>e.typeName!=="instance_presence"))},[uS.RemoveTLUserAndPresenceAndAddPointer]:{up:t=>Object.fromEntries(Object.entries(t).filter(([n,e])=>!e.typeName.match(/^(user|user_presence)$/))),down:t=>Object.fromEntries(Object.entries(t).filter(([n,e])=>e.typeName!=="pointer"))},[uS.RemoveUserDocument]:{up:t=>Object.fromEntries(Object.entries(t).filter(([n,e])=>!e.typeName.match("user_document"))),down:t=>t}}});function vY({shapes:t}){const n=new Map;for(const o of ti(t))for(const a of LL(o.props??{}).keys()){if(n.has(a.id)&&n.get(a.id)!==a)throw new Error(`Multiple StyleProp instances with the same id: ${a.id}`);n.set(a.id,a)}const e=gY(t),r=HK(n);return QI.create({asset:Wh,camera:Go,document:iR,instance:r,instance_page_state:Xo,page:cd,shape:e,instance_presence:JK,pointer:rR},{snapshotMigrations:mY,onValidationFailure:rY,createIntegrityChecker:oY})}const jL=["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red"],tC={lightMode:{id:"light",text:"#000000",background:"rgb(249, 250, 251)",solid:"#fcfffe",black:{solid:"#1d1d1d",semi:"#e8e8e8",pattern:"#494949",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}},blue:{solid:"#4263eb",semi:"#dce1f8",pattern:"#6681ee",highlight:{srgb:"#10acff",p3:"color(display-p3 0.308 0.6632 0.9996)"}},green:{solid:"#099268",semi:"#d3e9e3",pattern:"#39a785",highlight:{srgb:"#00ffc8",p3:"color(display-p3 0.2536 0.984 0.7981)"}},grey:{solid:"#adb5bd",semi:"#eceef0",pattern:"#bcc3c9",highlight:{srgb:"#cbe7f1",p3:"color(display-p3 0.8163 0.9023 0.9416)"}},"light-blue":{solid:"#4dabf7",semi:"#ddedfa",pattern:"#6fbbf8",highlight:{srgb:"#00f4ff",p3:"color(display-p3 0.1512 0.9414 0.9996)"}},"light-green":{solid:"#40c057",semi:"#dbf0e0",pattern:"#65cb78",highlight:{srgb:"#65f641",p3:"color(display-p3 0.563 0.9495 0.3857)"}},"light-red":{solid:"#ff8787",semi:"#f4dadb",pattern:"#fe9e9e",highlight:{srgb:"#ff7fa3",p3:"color(display-p3 0.9988 0.5301 0.6397)"}},"light-violet":{solid:"#e599f7",semi:"#f5eafa",pattern:"#e9acf8",highlight:{srgb:"#ff88ff",p3:"color(display-p3 0.9676 0.5652 0.9999)"}},orange:{solid:"#f76707",semi:"#f8e2d4",pattern:"#f78438",highlight:{srgb:"#ffa500",p3:"color(display-p3 0.9988 0.6905 0.266)"}},red:{solid:"#e03131",semi:"#f4dadb",pattern:"#e55959",highlight:{srgb:"#ff636e",p3:"color(display-p3 0.9992 0.4376 0.45)"}},violet:{solid:"#ae3ec9",semi:"#ecdcf2",pattern:"#bd63d3",highlight:{srgb:"#c77cff",p3:"color(display-p3 0.7469 0.5089 0.9995)"}},yellow:{solid:"#ffc078",semi:"#f9f0e6",pattern:"#fecb92",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}}},darkMode:{id:"dark",text:"#f8f9fa",background:"#212529",solid:"#28292e",black:{solid:"#e1e1e1",semi:"#2c3036",pattern:"#989898",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}},blue:{solid:"#4156be",semi:"#262d40",pattern:"#3a4b9e",highlight:{srgb:"#0079d2",p3:"color(display-p3 0.0032 0.4655 0.7991)"}},green:{solid:"#3b7b5e",semi:"#253231",pattern:"#366a53",highlight:{srgb:"#009774",p3:"color(display-p3 0.0085 0.582 0.4604)"}},grey:{solid:"#93989f",semi:"#33373c",pattern:"#7c8187",highlight:{srgb:"#9cb4cb",p3:"color(display-p3 0.6299 0.7012 0.7856)"}},"light-blue":{solid:"#588fc9",semi:"#2a3642",pattern:"#4d7aa9",highlight:{srgb:"#00bdc8",p3:"color(display-p3 0.0023 0.7259 0.7735)"}},"light-green":{solid:"#599f57",semi:"#2a3830",pattern:"#4e874e",highlight:{srgb:"#00a000",p3:"color(display-p3 0.2711 0.6172 0.0195)"}},"light-red":{solid:"#c67877",semi:"#3b3235",pattern:"#a56767",highlight:{srgb:"#db005b",p3:"color(display-p3 0.7849 0.0585 0.3589)"}},"light-violet":{solid:"#b583c9",semi:"#383442",pattern:"#9770a9",highlight:{srgb:"#c400c7",p3:"color(display-p3 0.7024 0.0403 0.753)"}},orange:{solid:"#bf612e",semi:"#3a2e2a",pattern:"#9f552d",highlight:{srgb:"#d07a00",p3:"color(display-p3 0.7699 0.4937 0.0085)"}},red:{solid:"#aa3c37",semi:"#36292b",pattern:"#8f3734",highlight:{srgb:"#de002c",p3:"color(display-p3 0.7978 0.0509 0.2035)"}},violet:{solid:"#873fa3",semi:"#31293c",pattern:"#763a8b",highlight:{srgb:"#9e00ee",p3:"color(display-p3 0.5651 0.0079 0.8986)"}},yellow:{solid:"#cba371",semi:"#3c3934",pattern:"#fecb92",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}}}};function ns(t){return t.isDarkMode?tC.darkMode:tC.lightMode}const oa=Pi.defineEnum("tldraw:color",{defaultValue:"black",values:jL}),NL=Pi.defineEnum("tldraw:labelColor",{defaultValue:"black",values:jL}),Jh=Pi.defineEnum("tldraw:dash",{defaultValue:"draw",values:["draw","solid","dashed","dotted"]}),Rm=Pi.defineEnum("tldraw:fill",{defaultValue:"none",values:["none","semi","solid","pattern"]}),Xc=Pi.defineEnum("tldraw:font",{defaultValue:"draw",values:["draw","sans","serif","mono"]}),f0={draw:"'tldraw_draw', sans-serif",sans:"'tldraw_sans', sans-serif",serif:"'tldraw_serif', serif",mono:"'tldraw_mono', monospace"},al=Pi.defineEnum("tldraw:size",{defaultValue:"m",values:["s","m","l","xl"]}),zL=["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"],nC=Pi.defineEnum("tldraw:arrowheadStart",{defaultValue:"none",values:zL}),rC=Pi.defineEnum("tldraw:arrowheadEnd",{defaultValue:"arrow",values:zL}),XO=tR("type",{binding:Ln({type:ia("binding"),boundShapeId:Bl,normalizedAnchor:US,isExact:kn,isPrecise:kn}),point:Ln({type:ia("point"),x:Nt,y:Nt})}),yY={labelColor:NL,color:oa,fill:Rm,dash:Jh,size:al,arrowheadStart:nC,arrowheadEnd:rC,font:Xc,start:XO,end:XO,bend:Nt,text:nn},t2={AddLabelColor:1,AddIsPrecise:2},SY=Bn({currentVersion:t2.AddIsPrecise,migrators:{[t2.AddLabelColor]:{up:t=>({...t,props:{...t.props,labelColor:"black"}}),down:t=>{const{labelColor:n,...e}=t.props;return{...t,props:e}}},[t2.AddIsPrecise]:{up:t=>{const{start:n,end:e}=t.props;return{...t,props:{...t.props,start:n.type==="binding"?{...n,isPrecise:!(n.normalizedAnchor.x===.5&&n.normalizedAnchor.y===.5)}:n,end:e.type==="binding"?{...e,isPrecise:!(e.normalizedAnchor.x===.5&&e.normalizedAnchor.y===.5)}:e}}},down:t=>{const{start:n,end:e}=t.props,r={...n},o={...e};return r.type==="binding"&&(r.isPrecise||(r.normalizedAnchor={x:.5,y:.5}),delete r.isPrecise),o.type==="binding"&&(o.isPrecise||(o.normalizedAnchor={x:.5,y:.5}),delete o.isPrecise),{...t,props:{...t.props,start:r,end:o}}}}}}),bY={w:ra,h:ra,assetId:DC.nullable(),url:Ma},n2={NullAssetId:1,MakeUrlsValid:2},wY=Bn({currentVersion:n2.MakeUrlsValid,migrators:{[n2.NullAssetId]:{up:t=>t.props.assetId===void 0?{...t,props:{...t.props,assetId:null}}:t,down:t=>{if(t.props.assetId===null){const{assetId:n,...e}=t.props;return{...t,props:e}}return t}},[n2.MakeUrlsValid]:{up:t=>t.props.url!==""&&!Ma.isValid(t.props.url)?{...t,props:{...t.props,url:""}}:t,down:t=>t}}}),FL=Ln({type:ML("free","straight"),points:_s(US)}),xY={color:oa,fill:Rm,dash:Jh,size:al,segments:_s(FL),isComplete:kn,isClosed:kn,isPen:kn},qO={AddInPen:1},CY=Bn({currentVersion:qO.AddInPen,migrators:{[qO.AddInPen]:{up:t=>{const{points:n}=t.props.segments[0];if(n.length===0)return{...t,props:{...t.props,isPen:!1}};let e=!(n[0].z===0||n[0].z===.5);return n[1]&&(e=e&&!(n[1].z===0||n[1].z===.5)),{...t,props:{...t.props,isPen:e}}},down:t=>{const{isPen:n,...e}=t.props;return{...t,props:{...e}}}}}}),QO=/(^\/r\/[^/]+\/?$)/,cr=t=>{try{return new URL(t)}catch{return}},Mm=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","tldraw.com"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:t=>{const n=cr(t);if(n&&n.pathname.match(QO))return t},fromEmbedUrl:t=>{const n=cr(t);if(n&&n.pathname.match(QO))return t}},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:t=>{if(t.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!t.includes("figma.com/embed"))return`https://www.figma.com/embed?embed_host=share&url=${t}`},fromEmbedUrl:t=>{const n=cr(t);if(n&&n.pathname.match(/^\/embed\/?$/)){const e=n.searchParams.get("url");if(e)return e}}},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:t=>{if(t.includes("/maps/")){const n=t.match(/@(.*),(.*),(.*)z/);let e;if(n){const[,r,o,a]=n;e=`https://${new URL(t).host.replace("www.","")}/maps/embed/v1/view?key=${process.env.NEXT_PUBLIC_GC_API_KEY}&center=${r},${o}&zoom=${a}`}else e="";return e}},fromEmbedUrl:t=>{const n=cr(t);if(!n)return;if(n.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&n.searchParams.has("center")&&n.searchParams.get("zoom")){const r=n.searchParams.get("zoom"),[o,a]=n.searchParams.get("center").split(",");return`https://www.google.com/maps/@${o},${a},${r}z`}}},{type:"val_town",title:"Val Town",hostnames:["val.town"],minWidth:260,minHeight:100,width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:t=>{const n=cr(t),e=n&&n.pathname.match(/\/v\/([^/]+)\/?/);if(e)return`https://www.val.town/embed/${e[1]}`},fromEmbedUrl:t=>{const n=cr(t),e=n&&n.pathname.match(/\/embed\/([^/]+)\/?/);if(e)return`https://www.val.town/v/${e[1]}`}},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:t=>{const n=cr(t),e=n&&n.pathname.match(/\/s\/([^/]+)\/?/);if(e)return`https://codesandbox.io/embed/${e[1]}`},fromEmbedUrl:t=>{const n=cr(t),e=n&&n.pathname.match(/\/embed\/([^/]+)\/?/);if(e)return`https://codesandbox.io/s/${e[1]}`}},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,canUnmount:!1,toEmbedUrl:t=>{const n=/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/,e=t.match(n);if(e){const[r,o,a]=e;return`https://codepen.io/${o}/embed/${a}`}},fromEmbedUrl:t=>{const n=/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/,e=t.match(n);if(e){const[r,o,a]=e;return`https://codepen.io/${o}/pen/${a}`}}},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,canUnmount:!1,toEmbedUrl:t=>{const n=/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/,e=t.match(n);if(e){const[r,o]=e;return`https://scratch.mit.edu/projects/embed/${o}`}},fromEmbedUrl:t=>{const n=/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/,e=t.match(n);if(e){const[r,o]=e;return`https://scratch.mit.edu/projects/${o}`}}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,canUnmount:!1,overridePermissions:{"allow-presentation":!0},isAspectRatioLocked:!0,toEmbedUrl:t=>{const n=cr(t);if(!n)return;const e=n.hostname.replace(/^www./,"");if(e==="youtu.be")return`https://www.youtube.com/embed/${n.pathname.split("/").filter(Boolean)[0]}`;if((e==="youtube.com"||e==="m.youtube.com")&&n.pathname.match(/^\/watch/))return`https://www.youtube.com/embed/${n.searchParams.get("v")}`},fromEmbedUrl:t=>{const n=cr(t);if(!n)return;if(n.hostname.replace(/^www./,"")==="youtube.com"){const r=n.pathname.match(/^\/embed\/([^/]+)\/?/);if(r)return`https://www.youtube.com/watch?v=${r[1]}`}}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,canUnmount:!1,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",toEmbedUrl:t=>{const n=cr(t),e=n==null?void 0:n.searchParams.get("cid");if(n!=null&&n.pathname.match(/\/calendar\/u\/0/)&&e){n.pathname="/calendar/embed";const r=Array.from(n.searchParams.keys());for(const o of r)n.searchParams.delete(o);return n.searchParams.set("src",e),n.href}},fromEmbedUrl:t=>{const n=cr(t),e=n==null?void 0:n.searchParams.get("src");if(n!=null&&n.pathname.match(/\/calendar\/embed/)&&e){n.pathname="/calendar/u/0";const r=Array.from(n.searchParams.keys());for(const o of r)n.searchParams.delete(o);return n.searchParams.set("cid",e),n.href}}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,canUnmount:!1,toEmbedUrl:t=>{const n=cr(t);if(n!=null&&n.pathname.match(/^\/presentation/)&&(n!=null&&n.pathname.match(/\/pub\/?$/))){n.pathname=n.pathname.replace(/\/pub$/,"/embed");const e=Array.from(n.searchParams.keys());for(const r of e)n.searchParams.delete(r);return n.href}},fromEmbedUrl:t=>{const n=cr(t);if(n!=null&&n.pathname.match(/^\/presentation/)&&(n!=null&&n.pathname.match(/\/embed\/?$/))){n.pathname=n.pathname.replace(/\/embed$/,"/pub");const e=Array.from(n.searchParams.keys());for(const r of e)n.searchParams.delete(r);return n.href}}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:t=>{const n=cr(t);if(n&&n.pathname.match(/\/([^/]+)\/([^/]+)/))return t.split("/").pop()?t:void 0},fromEmbedUrl:t=>{const n=cr(t);if(n&&n.pathname.match(/\/([^/]+)\/([^/]+)/))return t.split("/").pop()?t:void 0}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:t=>{const n=cr(t);if(n&&n.pathname.match(/\/@([^/]+)\/([^/]+)/))return`${t}?embed=true`},fromEmbedUrl:t=>{const n=cr(t);if(n&&n.pathname.match(/\/@([^/]+)\/([^/]+)/)&&n.searchParams.has("embed"))return n.searchParams.delete("embed"),n.href}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:t=>{const n=cr(t);if(n&&n.pathname.match(/^\/map\//))return n.origin+"/embed"+n.pathname},fromEmbedUrl:t=>{const n=cr(t);if(n&&n.pathname.match(/^\/embed\/map\//))return n.pathname=n.pathname.replace(/^\/embed/,""),n.href}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,canUnmount:!1,toEmbedUrl:t=>{const n=cr(t);if(n&&n.pathname.match(/^\/(artist|album)\//))return n.origin+"/embed"+n.pathname},fromEmbedUrl:t=>{const n=cr(t);if(n&&n.pathname.match(/^\/embed\/(artist|album)\//))return n.origin+n.pathname.replace(/^\/embed/,"")}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!0,toEmbedUrl:t=>{const n=cr(t);if(n&&n.hostname==="vimeo.com"&&n.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+n.pathname.split("/")[1]+"?title=0&byline=0"},fromEmbedUrl:t=>{const n=cr(t);if(n&&n.hostname==="player.vimeo.com"){const e=n.pathname.match(/^\/video\/([^/]+)\/?$/);if(e)return"https://vimeo.com/"+e[1]}}},{type:"excalidraw",title:"Excalidraw",hostnames:["excalidraw.com"],width:720,height:500,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!0,toEmbedUrl:t=>{const n=cr(t);if(n&&n.hash.match(/#room=/))return t},fromEmbedUrl:t=>{const n=cr(t);if(n&&n.hash.match(/#room=/))return t}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!1,backgroundColor:"#fff",toEmbedUrl:t=>{const n=cr(t);if(n&&n.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return`${n.origin}/embed${n.pathname}?cell=*`;if(n&&n.pathname.match(/^\/d\/([^/]+)\/?$/)){const e=n.pathname.replace(/^\/d/,"");return`${n.origin}/embed${e}?cell=*`}},fromEmbedUrl:t=>{const n=cr(t);if(n&&n.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/))return`${n.origin}${n.pathname.replace("/embed","")}#cell-*`;if(n&&n.pathname.match(/^\/embed\/([^/]+)\/?$/))return`${n.origin}${n.pathname.replace("/embed","/d")}#cell-*`}}],EY={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},_Y={w:ra,h:ra,url:nn},dS={GenOriginalUrlInEmbed:1,RemoveDoesResize:2,RemoveTmpOldUrl:3,RemovePermissionOverrides:4},TY=Bn({currentVersion:dS.RemovePermissionOverrides,migrators:{[dS.GenOriginalUrlInEmbed]:{up:t=>{const n=t.props.url,e=new URL(n).host.replace("www.","");let r;for(const o of Mm)if(o.hostnames.includes(e))try{r=o.fromEmbedUrl(n)}catch(a){console.warn(a)}return{...t,props:{...t.props,tmpOldUrl:t.props.url,url:r??""}}},down:t=>{let n=t.props.tmpOldUrl;if(!n||n===""){const o=t.props.url,a=new URL(o).host.replace("www.","");for(const l of Mm)if(l.hostnames.includes(a))try{n=l.toEmbedUrl(o)}catch(u){console.warn(u)}}const{tmpOldUrl:e,...r}=t.props;return{...t,props:{...r,url:n??""}}}},[dS.RemoveDoesResize]:{up:t=>{const{doesResize:n,...e}=t.props;return{...t,props:{...e}}},down:t=>({...t,props:{...t.props,doesResize:!0}})},[dS.RemoveTmpOldUrl]:{up:t=>{const{tmpOldUrl:n,...e}=t.props;return{...t,props:{...e}}},down:t=>({...t,props:{...t.props}})},[dS.RemovePermissionOverrides]:{up:t=>{const{overridePermissions:n,...e}=t.props;return{...t,props:{...e}}},down:t=>({...t,props:{...t.props}})}}}),kY={w:ra,h:ra,name:nn},PY=Bn({}),HS=Pi.defineEnum("tldraw:horizontalAlign",{defaultValue:"middle",values:["start","middle","end","start-legacy","end-legacy","middle-legacy"]}),iC=Pi.defineEnum("tldraw:verticalAlign",{defaultValue:"middle",values:["start","middle","end"]}),Yc=Pi.defineEnum("tldraw:geo",{defaultValue:"rectangle",values:["cloud","rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box","check-box"]}),IY={geo:Yc,labelColor:NL,color:oa,fill:Rm,dash:Jh,size:al,font:Xc,align:HS,verticalAlign:iC,url:Ma,w:ra,h:ra,growY:eR,text:nn},Xu={AddUrlProp:1,AddLabelColor:2,RemoveJustify:3,AddCheckBox:4,AddVerticalAlign:5,MigrateLegacyAlign:6,AddCloud:7,MakeUrlsValid:8},RY=Bn({currentVersion:Xu.MakeUrlsValid,migrators:{[Xu.AddUrlProp]:{up:t=>({...t,props:{...t.props,url:""}}),down:t=>{const{url:n,...e}=t.props;return{...t,props:e}}},[Xu.AddLabelColor]:{up:t=>({...t,props:{...t.props,labelColor:"black"}}),down:t=>{const{labelColor:n,...e}=t.props;return{...t,props:e}}},[Xu.RemoveJustify]:{up:t=>{let n=t.props.align;return n==="justify"&&(n="start"),{...t,props:{...t.props,align:n}}},down:t=>({...t})},[Xu.AddCheckBox]:{up:t=>({...t}),down:t=>({...t,props:{...t.props,geo:t.props.geo==="check-box"?"rectangle":t.props.geo}})},[Xu.AddVerticalAlign]:{up:t=>({...t,props:{...t.props,verticalAlign:"middle"}}),down:t=>{const{verticalAlign:n,...e}=t.props;return{...t,props:e}}},[Xu.MigrateLegacyAlign]:{up:t=>{let n;switch(t.props.align){case"start":n="start-legacy";break;case"end":n="end-legacy";break;default:n="middle-legacy";break}return{...t,props:{...t.props,align:n}}},down:t=>{let n;switch(t.props.align){case"start-legacy":n="start";break;case"end-legacy":n="end";break;case"middle-legacy":n="middle";break;default:n=t.props.align}return{...t,props:{...t.props,align:n}}}},[Xu.AddCloud]:{up:t=>t,down:t=>{if(t.props.geo==="cloud")return{...t,props:{...t.props,geo:"rectangle"}}}},[Xu.MakeUrlsValid]:{up:t=>t.props.url!==""&&!Ma.isValid(t.props.url)?{...t,props:{...t.props,url:""}}:t,down:t=>t}}}),MY={},AY=Bn({}),$Y={color:oa,size:al,segments:_s(FL),isComplete:kn,isPen:kn},OY=Bn({}),DY=Ln({topLeft:US,bottomRight:US}),LY={w:ra,h:ra,playing:kn,url:Ma,assetId:DC.nullable(),crop:DY.nullable()},Px={AddUrlProp:1,AddCropProp:2,MakeUrlsValid:3},jY=Bn({currentVersion:Px.MakeUrlsValid,migrators:{[Px.AddUrlProp]:{up:t=>({...t,props:{...t.props,url:""}}),down:t=>{const{url:n,...e}=t.props;return{...t,props:e}}},[Px.AddCropProp]:{up:t=>({...t,props:{...t.props,crop:null}}),down:t=>{const{crop:n,...e}=t.props;return{...t,props:e}}},[Px.MakeUrlsValid]:{up:t=>t.props.url!==""&&!Ma.isValid(t.props.url)?{...t,props:{...t.props,url:""}}:t,down:t=>t}}}),NY=new Set(["vertex","virtual","create"]),zY=Ln({id:nn,type:d0(NY),canBind:kn.optional(),canSnap:kn.optional(),index:nn,x:Nt,y:Nt}),oC=Pi.defineEnum("tldraw:spline",{defaultValue:"line",values:["cubic","line"]}),FY={color:oa,dash:Jh,size:al,spline:oC,handles:BP(nn,zY)},ZO={AddSnapHandles:1},UY=Bn({currentVersion:ZO.AddSnapHandles,migrators:{[ZO.AddSnapHandles]:{up:t=>{const n=es(t.props.handles);for(const e in n)n[e].canSnap=!0;return{...t,props:{...t.props,handles:n}}},down:t=>{const n=es(t.props.handles);for(const e in n)delete n[e].canSnap;return{...t,props:{...t.props,handles:n}}}}}}),BY={color:oa,size:al,font:Xc,align:HS,verticalAlign:iC,growY:eR,url:Ma,text:nn},Qg={AddUrlProp:1,RemoveJustify:2,MigrateLegacyAlign:3,AddVerticalAlign:4,MakeUrlsValid:5},HY=Bn({currentVersion:Qg.MakeUrlsValid,migrators:{[Qg.AddUrlProp]:{up:t=>({...t,props:{...t.props,url:""}}),down:t=>{const{url:n,...e}=t.props;return{...t,props:e}}},[Qg.RemoveJustify]:{up:t=>{let n=t.props.align;return n==="justify"&&(n="start"),{...t,props:{...t.props,align:n}}},down:t=>({...t})},[Qg.MigrateLegacyAlign]:{up:t=>{let n;switch(t.props.align){case"start":n="start-legacy";break;case"end":n="end-legacy";break;default:n="middle-legacy";break}return{...t,props:{...t.props,align:n}}},down:t=>{let n;switch(t.props.align){case"start-legacy":n="start";break;case"end-legacy":n="end";break;case"middle-legacy":n="middle";break;default:n=t.props.align}return{...t,props:{...t.props,align:n}}}},[Qg.AddVerticalAlign]:{up:t=>({...t,props:{...t.props,verticalAlign:"middle"}}),down:t=>{const{verticalAlign:n,...e}=t.props;return{...t,props:e}}},[Qg.MakeUrlsValid]:{up:t=>t.props.url!==""&&!Ma.isValid(t.props.url)?{...t,props:{...t.props,url:""}}:t,down:t=>t}}}),VY={color:oa,size:al,font:Xc,align:HS,w:ra,text:nn,scale:ra,autoSize:kn},JO={RemoveJustify:1},KY=Bn({currentVersion:JO.RemoveJustify,migrators:{[JO.RemoveJustify]:{up:t=>{let n=t.props.align;return n==="justify"&&(n="start"),{...t,props:{...t.props,align:n}}},down:t=>({...t})}}}),YY={w:ra,h:ra,time:Nt,playing:kn,url:Ma,assetId:DC.nullable()},r2={AddUrlProp:1,MakeUrlsValid:2},WY=Bn({currentVersion:r2.MakeUrlsValid,migrators:{[r2.AddUrlProp]:{up:t=>({...t,props:{...t.props,url:""}}),down:t=>{const{url:n,...e}=t.props;return{...t,props:e}}},[r2.MakeUrlsValid]:{up:t=>t.props.url!==""&&!Ma.isValid(t.props.url)?{...t,props:{...t.props,url:""}}:t,down:t=>t}}}),VS=[{locale:"ar",label:"عربي"},{locale:"ca",label:"Català"},{locale:"cs",label:"Čeština"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Español"},{locale:"fa",label:"فارسی"},{locale:"fi",label:"Suomi"},{locale:"fr",label:"Français"},{locale:"gl",label:"Galego"},{locale:"he",label:"עברית"},{locale:"it",label:"Italiano"},{locale:"ja",label:"日本語"},{locale:"ko-kr",label:"한국어"},{locale:"ku",label:"کوردی"},{locale:"hi-in",label:"हिन्दी"},{locale:"hu",label:"Magyar"},{locale:"my",label:"မြန်မာစာ"},{locale:"ne",label:"नेपाली"},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Português - Brasil"},{locale:"pt-pt",label:"Português - Europeu"},{locale:"ro",label:"Română"},{locale:"ru",label:"Russian"},{locale:"sv",label:"Svenska"},{locale:"te",label:"తెలుగు"},{locale:"th",label:"ภาษาไทย"},{locale:"tr",label:"Türkçe"},{locale:"uk",label:"Ukrainian"},{locale:"vi",label:"Tiếng Việt"},{locale:"zh-cn",label:"Chinese - Simplified"},{locale:"zh-tw",label:"繁體中文 (台灣)"}];function GY(){const t=typeof window<"u"?window.navigator.languages??["en"]:["en"];return XY(t)}function XY(t){for(const n of t){const e=qY(n);if(e)return e}return"en"}const eD={zh:"zh-cn",pt:"pt-br",ko:"ko-kr",hi:"hi-in"};function qY(t){const n=VS.find(o=>o.locale===t.toLowerCase());if(n)return n.locale;const[e,r]=t.split(/[-_]/).map(o=>o.toLowerCase());if(r){const o=VS.find(a=>a.locale===e);if(o)return o.locale}return e in eD?eD[e]:null}var UL={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var n={}.hasOwnProperty;function e(){for(var r=[],o=0;o<arguments.length;o++){var a=arguments[o];if(a){var l=typeof a;if(l==="string"||l==="number")r.push(a);else if(Array.isArray(a)){if(a.length){var u=e.apply(null,a);u&&r.push(u)}}else if(l==="object"){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){r.push(a.toString());continue}for(var d in a)n.call(a,d)&&a[d]&&r.push(d)}}}return r.join(" ")}t.exports?(e.default=e,t.exports=e):window.classNames=e})()})(UL);var QY=UL.exports;const Wt=Of(QY),ZY={},kr={preventDefaultLogging:Sa("preventDefaultLogging",{defaults:{all:!1}}),pointerCaptureLogging:Sa("pointerCaptureLogging",{defaults:{all:!1}}),pointerCaptureTracking:Sa("pointerCaptureTracking",{defaults:{all:!1}}),pointerCaptureTrackingObject:Sa("pointerCaptureTrackingObject",{defaults:{all:new Map},shouldStoreForSession:!1}),elementRemovalLogging:Sa("elementRemovalLogging",{defaults:{all:!1}}),debugSvg:Sa("debugSvg",{defaults:{all:!1}}),throwToBlob:Sa("throwToBlob",{defaults:{all:!1}}),logMessages:Sa("uiLog",{defaults:{all:[]}}),resetConnectionEveryPing:Sa("resetConnectionEveryPing",{defaults:{all:!1}}),debugCursors:Sa("debugCursors",{defaults:{all:!1}}),forceSrgb:Sa("forceSrgbColors",{defaults:{all:!1}}),debugGeometry:Sa("debugGeometry",{defaults:{all:!1}}),hideShapes:Sa("hideShapes",{defaults:{all:!1}})};typeof window<"u"&&(window.tldrawLog=t=>{kr.logMessages.set(kr.logMessages.get().concat(t))});if(typeof Element<"u"){const t=Element.prototype.removeChild;u0("element removal logging",()=>{kr.elementRemovalLogging.get()?Element.prototype.removeChild=function(n){return console.warn("[tldraw] removing child:",n),t.call(this,n)}:Element.prototype.removeChild=t})}function Sa(t,{defaults:n,shouldStoreForSession:e=!0}){return JY({name:t,defaults:n,shouldStoreForSession:e})}function JY(t){const n=tW(t),e=t.shouldStoreForSession?eW(t.name):null,r=Es(`debug:${t.name}`,e??n);return typeof window<"u"&&(t.shouldStoreForSession&&u0(`debug:${t.name}`,()=>{const o=r.get();try{o===n?window.sessionStorage.removeItem(`tldraw_debug:${t.name}`):window.sessionStorage.setItem(`tldraw_debug:${t.name}`,JSON.stringify(o))}catch{}}),Object.defineProperty(window,`tldraw${t.name.replace(/^[a-z]/,o=>o.toUpperCase())}`,{get(){return r.get()},set(o){r.set(o)},configurable:!0})),Object.assign(r,t)}function eW(t){try{return JSON.parse((window==null?void 0:window.sessionStorage.getItem(`tldraw_debug:${t}`))??"null")}catch{return null}}function i2(t){try{return t()}catch{return null}}function tW(t){switch(i2(()=>process.env.TLDRAW_ENV)??i2(()=>process.env.VERCEL_PUBLIC_TLDRAW_ENV)??i2(()=>process.env.NEXT_PUBLIC_TLDRAW_ENV)??"production"){case"production":return t.defaults.production??t.defaults.all;case"preview":case"staging":return t.defaults.staging??t.defaults.all;default:return t.defaults.development??t.defaults.all}}function sC(t){if(t instanceof HTMLElement)return t;if(t.parentElement)return sC(t.parentElement);throw Error("Could not find a parent element of an HTML type!")}function Un(t){t.preventDefault(),kr.preventDefaultLogging.get()&&console.warn("preventDefault called on event:",t)}function h0(t,n){if(t.setPointerCapture(n.pointerId),kr.pointerCaptureTracking.get()){const e=kr.pointerCaptureTrackingObject.get();e.set(t,(e.get(t)??0)+1)}kr.pointerCaptureLogging.get()&&console.warn("setPointerCapture called on element:",t,n)}function p0(t,n){if(t.hasPointerCapture(n.pointerId)){if(t.releasePointerCapture(n.pointerId),kr.pointerCaptureTracking.get()){const e=kr.pointerCaptureTrackingObject.get();e.get(t)===1?e.delete(t):e.has(t)?e.set(t,e.get(t)-1):console.warn("Release without capture")}kr.pointerCaptureLogging.get()&&console.warn("releasePointerCapture called on element:",t,n)}}const eo=t=>t.stopPropagation();function na(t){return t.isKilled=!0,{point:{x:t.clientX,y:t.clientY,z:t.pressure},shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey,pointerId:t.pointerId,button:t.button,isPen:t.pointerType==="pen"}}const oR=ft.createContext({});function Oe(){return ft.useContext(oR)}function nW(){const t=Oe();return I.useMemo(function(){let r,o;function a(C){if(!C.isKilled){if(C.button===2){t.dispatch({type:"pointer",target:"canvas",name:"right_click",...na(C)});return}C.button!==0&&C.button!==1&&C.button!==5||(h0(C.currentTarget,C),t.dispatch({type:"pointer",target:"canvas",name:"pointer_down",...na(C)}),t.getOpenMenus().length>0&&(t.updateInstanceState({openMenus:[]}),document.body.click(),t.getContainer().focus()))}}function l(C){C.isKilled||C.clientX===r&&C.clientY===o||(r=C.clientX,o=C.clientY,t.dispatch({type:"pointer",target:"canvas",name:"pointer_move",...na(C)}))}function u(C){C.isKilled||C.button!==0&&C.button!==1&&C.button!==2&&C.button!==5||(r=C.clientX,o=C.clientY,p0(C.currentTarget,C),t.dispatch({type:"pointer",target:"canvas",name:"pointer_up",...na(C)}))}function d(C){if(C.isKilled||t.getInstanceState().isPenMode&&C.pointerType!=="pen")return;const E=C.pointerType==="mouse"||C.pointerType==="pen";t.updateInstanceState({isHoveringCanvas:E?!0:null})}function h(C){if(C.isKilled||t.getInstanceState().isPenMode&&C.pointerType!=="pen")return;const E=C.pointerType==="mouse"||C.pointerType==="pen";t.updateInstanceState({isHoveringCanvas:E?!1:null})}function g(C){C.isKilled=!0,document.body.click(),Un(C)}function v(C){C.isKilled=!0,C.target.tagName!=="A"&&C.target.tagName!=="TEXTAREA"&&Un(C)}function S(C){Un(C)}async function w(C){var R,L;if(Un(C),!((L=(R=C.dataTransfer)==null?void 0:R.files)!=null&&L.length))return;const E=Array.from(C.dataTransfer.files);await t.putExternalContent({type:"files",files:E,point:t.screenToPage({x:C.clientX,y:C.clientY}),ignoreParent:!1})}function k(C){eo(C)}return{onPointerDown:a,onPointerMove:l,onPointerUp:u,onPointerEnter:d,onPointerLeave:h,onDragOver:S,onDrop:w,onTouchStart:g,onTouchEnd:v,onClick:k}},[t])}function rW(){const t=Oe();I.useEffect(()=>{if(t.environment.isFirefox&&!t.environment.isAndroid&&!t.environment.isIos){t.updateInstanceState({isCoarsePointer:!1});return}if(window.matchMedia){const n=window.matchMedia("(pointer: coarse)"),e=()=>{t.updateInstanceState({isCoarsePointer:!!n.matches})};if(e(),n)return n.addEventListener("change",e),()=>n.removeEventListener("change",e)}},[t])}const BL=I.createContext(null);function iW({container:t,children:n}){return x.jsx(BL.Provider,{value:t,children:n})}function is(){return aK(I.useContext(BL),"useContainer used outside of <Tldraw />")}function oW(){const t=Oe(),n=is(),e=He("isFocused",()=>t.getInstanceState().isFocused,[t]);I.useEffect(()=>{if(typeof matchMedia===void 0)return;let r=null;const o=()=>{r!=null&&r();const a=`(resolution: ${window.devicePixelRatio}dppx)`,l=matchMedia(a),u=d=>{d.type==="change"&&o()};l.addEventListener?l.addEventListener("change",o):l.addListener&&l.addListener(u),r=()=>{l.removeEventListener?l.removeEventListener("change",o):l.removeListener&&l.removeListener(u)},t.updateInstanceState({devicePixelRatio:window.devicePixelRatio})};return o(),()=>{r==null||r()}},[t]),I.useEffect(()=>{if(!e)return;const r=u=>{if(u.altKey&&(t.isIn("zoom")||!t.getPath().endsWith(".idle"))&&!fS()&&Un(u),u.isKilled)return;switch(u.isKilled=!0,u.key){case"=":case"-":case"0":{if(u.metaKey||u.ctrlKey){Un(u);return}break}case"Tab":{if(fS()||t.getIsMenuOpen())return;break}case",":{if(!fS()&&(Un(u),!t.inputs.keys.has("Comma"))){const{x:h,y:g,z:v}=t.inputs.currentScreenPoint;t.inputs.keys.add("Comma");const S={type:"pointer",name:"pointer_down",point:{x:h,y:g,z:v},shiftKey:u.shiftKey,altKey:u.altKey,ctrlKey:u.metaKey||u.ctrlKey,pointerId:0,button:0,isPen:t.getInstanceState().isPenMode,target:"canvas"};t.dispatch(S);return}break}case"Escape":{if((t.getEditingShape()||t.getSelectedShapeIds().length>0)&&u.preventDefault(),t.getOpenMenus().length>0)return;t.inputs.keys.has("Escape")||(t.inputs.keys.add("Escape"),t.cancel(),n.focus());return}default:if(fS()||t.getIsMenuOpen())return}const d={type:"keyboard",name:u.repeat?"key_repeat":"key_down",key:u.key,code:u.code,shiftKey:u.shiftKey,altKey:u.altKey,ctrlKey:u.metaKey||u.ctrlKey};t.dispatch(d)},o=u=>{var h;if(u.isKilled||(u.isKilled=!0,fS()||t.getIsMenuOpen()))return;if(u.key===","&&((h=document.activeElement)!=null&&h.ELEMENT_NODE&&Un(u),t.inputs.keys.has(u.code))){const{x:g,y:v,z:S}=t.inputs.currentScreenPoint;t.inputs.keys.delete(u.code);const w={type:"pointer",name:"pointer_up",point:{x:g,y:v,z:S},shiftKey:u.shiftKey,altKey:u.altKey,ctrlKey:u.metaKey||u.ctrlKey,pointerId:0,button:0,isPen:t.getInstanceState().isPenMode,target:"canvas"};t.dispatch(w);return}const d={type:"keyboard",name:"key_up",key:u.key,code:u.code,shiftKey:u.shiftKey,altKey:u.altKey,ctrlKey:u.metaKey||u.ctrlKey};t.dispatch(d)};function a(u){var d,h;if(n.contains(u.target)){const g=u.touches[0].pageX,v=u.touches[0].radiusX||0;(g-v<10||g+v>t.getViewportScreenBounds().width-10)&&(((d=u.target)==null?void 0:d.tagName)==="BUTTON"&&((h=u.target)==null||h.click()),Un(u))}}const l=u=>{n.contains(u.target)&&(u.ctrlKey||u.metaKey)&&Un(u)};return n.addEventListener("touchstart",a,{passive:!1}),n.addEventListener("wheel",l,{passive:!1}),document.addEventListener("gesturestart",Un),document.addEventListener("gesturechange",Un),document.addEventListener("gestureend",Un),n.addEventListener("keydown",r),n.addEventListener("keyup",o),()=>{n.removeEventListener("touchstart",a),n.removeEventListener("wheel",l),document.removeEventListener("gesturestart",Un),document.removeEventListener("gesturechange",Un),document.removeEventListener("gestureend",Un),n.removeEventListener("keydown",r),n.removeEventListener("keyup",o)}},[t,n,e])}const sW=["input","select","button","textarea"];function fS(){const{activeElement:t}=document;return!!(t&&(t.getAttribute("contenteditable")||sW.indexOf(t.tagName.toLowerCase())>-1))}const aW={error:null};class HL extends I.Component{constructor(){super(...arguments);T(this,"state",aW)}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e){var r,o;(o=(r=this.props).onError)==null||o.call(r,e)}render(){const{error:e}=this.state;if(e!==null){const{fallback:r}=this.props;return x.jsx(r,{error:e})}return this.props.children}}function KS({children:t,fallback:n,...e}){return n===null?x.jsx(x.Fragment,{children:t}):x.jsx(HL,{fallback:n,...e,children:t})}class lW{constructor(n){this.shape=n}equals(n){var e,r,o,a,l,u;return((e=this.shape)==null?void 0:e.isLocked)===((r=n==null?void 0:n.shape)==null?void 0:r.isLocked)&&((o=this.shape)==null?void 0:o.props)===((a=n==null?void 0:n.shape)==null?void 0:a.props)&&((l=this.shape)==null?void 0:l.meta)===((u=n==null?void 0:n.shape)==null?void 0:u.meta)}}const cW=({shape:t,util:n})=>MC("Indicator:"+t.type,()=>n.indicator(t)),uW=({editor:t,id:n})=>{const e=He("shape",()=>new lW(t.store.get(n)),[t,n]),{ShapeIndicatorErrorFallback:r}=to();return!e.shape||e.shape.isLocked?null:x.jsx(KS,{fallback:r,onError:o=>t.annotateError(o,{origin:"react.shapeIndicator",willCrashApp:!1}),children:x.jsx(cW,{shape:e.shape,util:t.getShapeUtil(e.shape)},e.shape.id)})},dW=({id:t,className:n,color:e,opacity:r})=>{const o=Oe(),a=He("transform",()=>{const l=o.getShapePageTransform(t);return l?l.toCssString():""},[o,t]);return x.jsx("svg",{className:Wt("tl-overlays__item",n),children:x.jsx("g",{className:"tl-shape-indicator",transform:a,stroke:e??"var(--color-selected)",opacity:r,children:x.jsx(uW,{editor:o,id:t})})})},g0=I.memo(dW);function fW(){return x.jsx("div",{className:"tl-background"})}function Um(t,n,e,r,o,a){I.useLayoutEffect(()=>{const l=t.current;if(!l||n===void 0)return;let u=`translate(${n}px, ${e}px)`;r!==void 0&&(u+=` scale(${r})`),o!==void 0&&(u+=` rotate(${o}rad)`),a&&(u+=` translate(${a.x}px, ${a.y}px)`),l.style.transform=u})}const Jo={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t*t:-1+(4-2*t)*t,easeInCubic:t=>t*t*t,easeOutCubic:t=>--t*t*t+1,easeInOutCubic:t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1- --t*t*t*t,easeInOutQuart:t=>t<.5?8*t*t*t*t:1-8*--t*t*t*t,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1+--t*t*t*t*t,easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t<=0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t>=1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t<=0?0:t>=1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2};class N{constructor(n=0,e=0,r=1){this.x=n,this.y=e,this.z=r}get pressure(){return this.z}set(n=this.x,e=this.y,r=this.z){return this.x=n,this.y=e,this.z=r,this}setTo({x:n=0,y:e=0,z:r=1}){return this.x=n,this.y=e,this.z=r,this}rot(n){if(n===0)return this;const{x:e,y:r}=this,o=Math.sin(n),a=Math.cos(n);return this.x=e*a-r*o,this.y=e*o+r*a,this}rotWith(n,e){if(e===0)return this;const r=this.x-n.x,o=this.y-n.y,a=Math.sin(e),l=Math.cos(e);return this.x=n.x+(r*l-o*a),this.y=n.y+(r*a+o*l),this}clone(){const{x:n,y:e,z:r}=this;return new N(n,e,r)}sub(n){return this.x-=n.x,this.y-=n.y,this}subXY(n,e){return this.x-=n,this.y-=e,this}subScalar(n){return this.x-=n,this.y-=n,this}add(n){return this.x+=n.x,this.y+=n.y,this}addXY(n,e){return this.x+=n,this.y+=e,this}addScalar(n){return this.x+=n,this.y+=n,this}clamp(n,e){return this.x=Math.max(this.x,n),this.y=Math.max(this.y,n),e!==void 0&&(this.x=Math.min(this.x,e),this.y=Math.min(this.y,e)),this}div(n){return this.x/=n,this.y/=n,this}divV(n){return this.x/=n.x,this.y/=n.y,this}mul(n){return this.x*=n,this.y*=n,this}mulV(n){return this.x*=n.x,this.y*=n.y,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}nudge(n,e){const r=N.Tan(n,this);return this.add(r.mul(e))}neg(){return this.x*=-1,this.y*=-1,this}cross(n){return this.x=this.y*n.z-this.z*n.y,this.y=this.z*n.x-this.x*n.z,this}dpr(n){return N.Dpr(this,n)}cpr(n){return N.Cpr(this,n)}len2(){return N.Len2(this)}len(){return N.Len(this)}pry(n){return N.Pry(this,n)}per(){const{x:n,y:e}=this;return this.x=e,this.y=-n,this}uni(){return N.Uni(this)}tan(n){return N.Tan(this,n)}dist(n){return N.Dist(this,n)}distanceToLineSegment(n,e){return N.DistanceToLineSegment(n,e,this)}slope(n){return N.Slope(this,n)}snapToGrid(n){return this.x=Math.round(this.x/n)*n,this.y=Math.round(this.y/n)*n,this}angle(n){return N.Angle(this,n)}toAngle(){return N.ToAngle(this)}lrp(n,e){return this.x=this.x+(n.x-this.x)*e,this.y=this.y+(n.y-this.y)*e,this}equals(n){return N.Equals(this,n)}equalsXY(n,e){return N.EqualsXY(this,n,e)}norm(){const n=this.len();return this.x=n===0?0:this.x/n,this.y=n===0?0:this.y/n,this}toFixed(){return N.ToFixed(this)}toString(){return N.ToString(N.ToFixed(this))}toJson(){return N.ToJson(this)}toArray(){return N.ToArray(this)}static Add(n,e){return new N(n.x+e.x,n.y+e.y)}static AddXY(n,e,r){return new N(n.x+e,n.y+r)}static Sub(n,e){return new N(n.x-e.x,n.y-e.y)}static SubXY(n,e,r){return new N(n.x-e,n.y-r)}static AddScalar(n,e){return new N(n.x+e,n.y+e)}static SubScalar(n,e){return new N(n.x-e,n.y-e)}static Div(n,e){return new N(n.x/e,n.y/e)}static Mul(n,e){return new N(n.x*e,n.y*e)}static DivV(n,e){return new N(n.x/e.x,n.y/e.y)}static MulV(n,e){return new N(n.x*e.x,n.y*e.y)}static Neg(n){return new N(-n.x,-n.y)}static Per(n){return new N(n.y,-n.x)}static Dist2(n,e){return N.Sub(n,e).len2()}static Abs(n){return new N(Math.abs(n.x),Math.abs(n.y))}static Dist(n,e){return Math.hypot(n.y-e.y,n.x-e.x)}static Dpr(n,e){return n.x*e.x+n.y*e.y}static Cross(n,e){return new N(n.y*e.z-n.z*e.y,n.z*e.x-n.x*e.z)}static Cpr(n,e){return n.x*e.y-e.x*n.y}static Len2(n){return n.x*n.x+n.y*n.y}static Len(n){return Math.hypot(n.x,n.y)}static Pry(n,e){return N.Dpr(n,e)/N.Len(e)}static Uni(n){return N.Div(n,N.Len(n))}static Tan(n,e){return N.Uni(N.Sub(n,e))}static Min(n,e){return new N(Math.min(n.x,e.x),Math.min(n.y,e.y))}static Max(n,e){return new N(Math.max(n.x,e.x),Math.max(n.y,e.y))}static From({x:n,y:e,z:r=1}){return new N(n,e,r)}static FromArray(n){return new N(n[0],n[1])}static Rot(n,e=0){const r=Math.sin(e),o=Math.cos(e);return new N(n.x*o-n.y*r,n.x*r+n.y*o)}static RotWith(n,e,r){const o=n.x-e.x,a=n.y-e.y,l=Math.sin(r),u=Math.cos(r);return new N(e.x+(o*u-a*l),e.y+(o*l+a*u))}static NearestPointOnLineThroughPoint(n,e,r){return N.Mul(e,N.Sub(r,n).pry(e)).add(n)}static NearestPointOnLineSegment(n,e,r,o=!0){const a=N.Tan(e,n),l=N.Add(n,N.Mul(a,N.Sub(r,n).pry(a)));if(o){if(l.x<Math.min(n.x,e.x))return N.Cast(n.x<e.x?n:e);if(l.x>Math.max(n.x,e.x))return N.Cast(n.x>e.x?n:e);if(l.y<Math.min(n.y,e.y))return N.Cast(n.y<e.y?n:e);if(l.y>Math.max(n.y,e.y))return N.Cast(n.y>e.y?n:e)}return l}static DistanceToLineThroughPoint(n,e,r){return N.Dist(r,N.NearestPointOnLineThroughPoint(n,e,r))}static DistanceToLineSegment(n,e,r,o=!0){return N.Dist(r,N.NearestPointOnLineSegment(n,e,r,o))}static Snap(n,e=1){return new N(Math.round(n.x/e)*e,Math.round(n.y/e)*e)}static Cast(n){return n instanceof N?n:N.From(n)}static Slope(n,e){return n.x===e.y?NaN:(n.y-e.y)/(n.x-e.x)}static Angle(n,e){return Math.atan2(e.y-n.y,e.x-n.x)}static Lrp(n,e,r){return N.Sub(e,n).mul(r).add(n)}static Med(n,e){return new N((n.x+e.x)/2,(n.y+e.y)/2)}static Equals(n,e){return Math.abs(n.x-e.x)<1e-4&&Math.abs(n.y-e.y)<1e-4}static EqualsXY(n,e,r){return n.x===e&&n.y===r}static Clockwise(n,e,r){return(r.x-n.x)*(e.y-n.y)-(e.x-n.x)*(r.y-n.y)<0}static Rescale(n,e){const r=N.Len(n);return new N(e*n.x/r,e*n.y/r)}static ScaleWithOrigin(n,e,r){return N.Sub(n,r).mul(e).add(r)}static ToFixed(n,e=2){return new N(+n.x.toFixed(e),+n.y.toFixed(e),+n.z.toFixed(e))}static Nudge(n,e,r){return N.Add(n,N.Tan(e,n).mul(r))}static ToString(n){return`${n.x}, ${n.y}`}static ToAngle(n){let e=Math.atan2(n.y,n.x);return e<0&&(e+=Math.PI*2),e}static FromAngle(n,e=1){return new N(Math.cos(n)*e,Math.sin(n)*e)}static ToArray(n){return[n.x,n.y,n.z]}static ToJson(n){const{x:e,y:r,z:o}=n;return{x:e,y:r,z:o}}static Average(n){const e=n.length,r=new N(0,0);for(let o=0;o<e;o++)r.add(n[o]);return r.div(e)}static Clamp(n,e,r){return r===void 0?new N(Math.min(Math.max(n.x,e)),Math.min(Math.max(n.y,e))):new N(Math.min(Math.max(n.x,e),r),Math.min(Math.max(n.y,e),r))}static PointsBetween(n,e,r=6){const o=[];for(let a=0;a<r;a++){const l=Jo.easeInQuad(a/(r-1)),u=N.Lrp(n,e,l);u.z=Math.min(1,.5+Math.abs(.5-hW(l))*.65),o.push(u)}return o}static SnapToGrid(n,e=8){return new N(Math.round(n.x/e)*e,Math.round(n.y/e)*e)}}const hW=t=>t<.5?2*t*t:-1+(4-2*t)*t;function Eo(t){return`${oe(t.x)},${oe(t.y)} `}function ta(t,n){return`${oe((t.x+n.x)/2)},${oe((t.y+n.y)/2)} `}const Jn=Math.PI,Pr=Jn/2,or=Jn*2,pW=Math.sin;function Bc(t,n,e){return Math.max(n,typeof e<"u"?Math.min(t,e):t)}function Ix(t,n=1e10){return t?Math.round(t*n)/n:0}function OS(t,n,e=1e-6){return Math.abs(t-n)<=e}function YS(t,n){const e=Math.pow(t-n,2)/Math.pow(t+n,2);return Jn*(t+n)*(1+3*e/(10+Math.sqrt(4-3*e)))}function Ql(t){return t=t%or,t<0?t=t+or:t===0&&(t=0),t}function LC(t,n){return t=Ql(t),n=Ql(n),t>n&&(n+=or),n-t}function gW(t,n){return or-LC(t,n)}function DS(t,n){const e=(n-t)%or;return 2*e%or-e}function VP(t){return(or+t)%or}function aC(t,n){const e=or/n;let r=Math.floor((VP(t)+e/2)/e)*e%or;return r<Jn&&(r+=or),r>Jn&&(r-=or),r}function VL(t,n){return t===n||OS(t%(Math.PI/2)-n%(Math.PI/2),0)}function mW(t){return t*Jn/180}function vW(t){return t*180/Jn}function KL(t,n,e,r){return new N(t+e*Math.cos(r),n+e*Math.sin(r))}function o2(t,n,e){const r=t/2,o=n/2,a=[];let l=1/0,u=-1/0,d=1/0,h=-1/0;for(let k=0;k<e;k++){const C=or/e,E=-Pr+k*C,R=r+r*Math.cos(E),L=o+o*Math.sin(E);R<l&&(l=R),L<d&&(d=L),R>u&&(u=R),L>h&&(h=L),a.push(new N(R,L))}const g=u-l,v=h-d,S=t-g,w=n-v;if(S!==0||w!==0)for(let k=0;k<a.length;k++){const C=a[k];C.x=(C.x-l)/g*t,C.y=(C.y-d)/v*n}return a}function hS(t,n,e,r){return t<r&&e<n}function Hl(t,n,e,r){const o=Math.max(t,e),a=Math.min(n,r);return o<=a?[o,a]:null}function tD(t,n,e){return(n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y)}function qc(t,n){let e=0,r,o;for(let a=0;a<n.length;a++){if(r=n[a],r.x===t.x&&r.y===t.y||(o=n[(a+1)%n.length],N.Dist(t,r)+N.Dist(t,o)===N.Dist(r,o)))return!0;r.y<=t.y?o.y>t.y&&tD(r,o,t)>0&&(e+=1):o.y<=t.y&&tD(r,o,t)<0&&(e-=1)}return e!==0}function oe(t){return+t.toFixed(4)}function lC(t){return+t.toFixed(2)}const nD=t=>Math.abs(t)<Number.MAX_SAFE_INTEGER,Rx=({brush:t,color:n,opacity:e,className:r})=>{const o=I.useRef(null);Um(o,t.x,t.y);const a=oe(Math.max(1,t.w)),l=oe(Math.max(1,t.h));return x.jsx("svg",{className:"tl-overlays__item",ref:o,children:n?x.jsxs("g",{className:"tl-brush",opacity:e,children:[x.jsx("rect",{width:a,height:l,fill:n,opacity:.75}),x.jsx("rect",{width:a,height:l,fill:"none",stroke:n,opacity:.1})]}):x.jsx("rect",{className:`tl-brush tl-brush__default ${r}`,width:a,height:l})})},yW=({className:t,zoom:n,point:e,color:r,viewport:o,opacity:a=1})=>{const l=I.useRef(null);return Um(l,Bc(e.x,o.minX+5/n,o.maxX-5/n),Bc(e.y,o.minY+5/n,o.maxY-5/n),1/n,N.Angle(o.center,e)),x.jsxs("svg",{ref:l,className:Wt("tl-overlays__item",t),children:[x.jsx("use",{href:"#cursor_hint",color:r,strokeWidth:3,stroke:"var(--color-background)"}),x.jsx("use",{href:"#cursor_hint",color:r,opacity:a})]})},SW=({className:t,zoom:n,point:e,color:r,name:o,chatMessage:a})=>{const l=I.useRef(null);return Um(l,e==null?void 0:e.x,e==null?void 0:e.y,1/n),e?x.jsxs("div",{ref:l,className:Wt("tl-overlays__item",t),children:[x.jsx("svg",{className:"tl-cursor",children:x.jsx("use",{href:"#cursor",color:r})}),a?x.jsxs(x.Fragment,{children:[o&&x.jsx("div",{className:"tl-nametag-title",style:{color:r},children:o}),x.jsx("div",{className:"tl-nametag-chat",style:{backgroundColor:r},children:a})]}):o&&x.jsx("div",{className:"tl-nametag",style:{backgroundColor:r},children:o})]}):null},rD=I.memo(SW),sR={openWindow:(t,n)=>window.open(t,n,"noopener noreferrer"),refreshPage:()=>window.location.reload(),hardReset:async()=>{var t;return await((t=window.__tldraw__hardReset)==null?void 0:t.call(window))}};function YL(){sR.hardReset()}function bW(){sR.refreshPage()}const wW="https://github.com/tldraw/tldraw/issues/new";function xW(){}const WL=({error:t,editor:n})=>{const e=I.useRef(null),[r,o]=I.useState(process.env.NODE_ENV==="development"),[a,l]=I.useState(!1),[u,d]=I.useState(!1),h=t instanceof Error?t.message:String(t),g=t instanceof Error?t.stack:null,v=He("isDarkMode",()=>{try{if(n)return n.user.getIsDarkMode()}catch{}return null},[n]),[S,w]=I.useState(null);I.useLayoutEffect(()=>{var O;v!==null&&w(v);let L=(O=e.current)==null?void 0:O.parentElement,A=!1;for(;L;){if(L.classList.contains("tl-theme__dark")||L.classList.contains("tl-theme__light")){A=!0;break}L=L.parentElement}if(A){w(null);return}w(window.matchMedia("(prefers-color-scheme: dark)").matches)},[v]),I.useEffect(()=>{if(a){const L=setTimeout(()=>{l(!1)},2e3);return()=>clearTimeout(L)}},[a]);const k=()=>{const L=document.createElement("textarea");L.value=g??h,document.body.appendChild(L),L.select(),document.execCommand("copy"),L.remove(),l(!0)},C=()=>{bW()},E=async()=>{YL()},R=new URL(wW);return R.searchParams.set("title",h),R.searchParams.set("labels","bug"),R.searchParams.set("body",`Hey, I ran into an error while using tldraw:

\`\`\`js
${g??h}
\`\`\`

My browser: ${navigator.userAgent}`),x.jsxs("div",{ref:e,className:Wt("tl-container tl-error-boundary",S===null?"":S?"tl-theme__dark":"tl-theme__light"),children:[x.jsx("div",{className:"tl-error-boundary__overlay"}),n&&x.jsx(HL,{onError:xW,fallback:()=>null,children:x.jsx(oR.Provider,{value:n,children:x.jsx("div",{className:"tl-overlay tl-error-boundary__canvas",children:x.jsx(hR,{})})})}),x.jsx("div",{className:Wt("tl-modal","tl-error-boundary__content",{"tl-error-boundary__content__expanded":r&&!u}),children:u?x.jsxs(x.Fragment,{children:[x.jsx("h2",{children:"Are you sure?"}),x.jsx("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),x.jsxs("div",{className:"tl-error-boundary__content__actions",children:[x.jsx("button",{onClick:()=>d(!1),children:"Cancel"}),x.jsx("button",{className:"tl-error-boundary__reset",onClick:E,children:"Reset data"})]})]}):x.jsxs(x.Fragment,{children:[x.jsx("h2",{children:"Something's gone wrong."}),x.jsxs("p",{children:["Sorry, we encountered an error. Please refresh the page to continue. If you keep seeing this error, you can ",x.jsx("a",{href:R.toString(),children:"create a GitHub issue"})," or"," ",x.jsx("a",{href:"https://discord.gg/Cq6cPsTfNy",children:"ask for help on Discord"}),"."]}),r&&x.jsxs("div",{className:"tl-error-boundary__content__error",children:[x.jsx("pre",{children:x.jsx("code",{children:g??h})}),x.jsx("button",{onClick:k,children:a?"Copied!":"Copy"})]}),x.jsxs("div",{className:"tl-error-boundary__content__actions",children:[x.jsx("button",{onClick:()=>o(!r),children:r?"Hide details":"Show details"}),x.jsxs("div",{className:"tl-error-boundary__content__actions__group",children:[x.jsx("button",{className:"tl-error-boundary__reset",onClick:()=>d(!0),children:"Reset data"}),x.jsx("button",{className:"tl-error-boundary__refresh",onClick:C,children:"Refresh Page"})]})]})]})})]})},qu=2e3,cC=40,ed=320,Zg=[.1,.25,.5,1,2,4,8],pS=.1,Sf=8,CW=.5,EW=.1,_W=.2,TW=.005,kW=.05,PW=450,IW=200,KP=6,WS=4,RW=32,uC={};for(let t=1;t<=Math.ceil(Sf);t++)uC[t+"_dark"]=`hash_pattern_zoom_${t}_dark`,uC[t+"_light"]=`hash_pattern_zoom_${t}_light`;const MW={duration:0,easing:Jo.easeInOutCubic},l1=.09,iD=[{min:-1,mid:.15,step:64},{min:.05,mid:.375,step:16},{min:.15,mid:1,step:4},{min:.7,mid:2.5,step:1}],AW=6e4,GL=3e3,$W=1200,oD={CAMERA_MOVE:-10},OW=64,DW=620,Jl=8,LW=20,Jg=32,jW=({x:t,y:n,z:e,size:r})=>x.jsxs("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[x.jsx("defs",{children:iD.map(({min:o,mid:a,step:l},u)=>{const d=l*r*e,h=.5+t*e,g=.5+n*e,v=h>0?h%d:d+h%d,S=g>0?g%d:d+g%d,w=e<a?q1(e,[o,a],[0,1]):1;return x.jsx("pattern",{id:`grid-${l}`,width:d,height:d,patternUnits:"userSpaceOnUse",children:x.jsx("circle",{className:"tl-grid-dot",cx:v,cy:S,r:1,opacity:w})},`grid-pattern-${u}`)})}),iD.map(({step:o},a)=>x.jsx("rect",{width:"100%",height:"100%",fill:`url(#grid-${o})`},`grid-rect-${a}`))]}),NW=({handle:t,isCoarse:n,className:e,zoom:r})=>{const o=(n?20:12)/r,a=(t.type==="create"&&n?3:4)/r;return x.jsxs("g",{className:Wt("tl-handle",{"tl-handle__virtual":t.type==="virtual","tl-handle__create":t.type==="create"},e),children:[x.jsx("circle",{className:"tl-handle__bg",r:o}),x.jsx("circle",{className:"tl-handle__fg",r:a})]})},zW=({children:t})=>x.jsx("svg",{className:"tl-user-handles tl-overlays__item",children:t}),FW=({shapeId:t})=>x.jsx(g0,{className:"tl-user-indicator__hovered",id:t});function m0(t,n=!0){const e=t.length;if(e<2)return"";let r=t[0],o=t[1];if(e===2)return`M${Eo(r)}L${Eo(o)}`;let a="";for(let l=2,u=e-1;l<u;l++)r=t[l],o=t[l+1],a+=ta(r,o);return n?`M${ta(t[0],t[1])}Q${Eo(t[1])}${ta(t[1],t[2])}T${a}${ta(t[e-1],t[0])}${ta(t[0],t[1])}Z`:`M${Eo(t[0])}Q${Eo(t[1])}${ta(t[1],t[2])}${t.length>3?"T":""}${a}L${Eo(t[e-1])}`}const sD=({scribble:t,zoom:n,color:e,opacity:r,className:o})=>t.points.length?x.jsx("svg",{className:o&&Wt("tl-overlays__item",o),children:x.jsx("path",{className:"tl-scribble",d:m0(t.points,!1),stroke:e??`var(--color-${t.color})`,fill:"none",strokeWidth:8/n,opacity:r??t.opacity})}):null,XL=({bounds:t,rotation:n})=>{const e=I.useRef(null);return Um(e,t.x,t.y,1,n),I.useLayoutEffect(()=>{const r=e.current;r&&(r.style.width=oe(Math.max(1,t.width))+"px",r.style.height=oe(Math.max(1,t.height))+"px")},[t.width,t.height]),x.jsx("div",{ref:e,className:"tl-selection__bg",draggable:!1})},UW=({bounds:t,rotation:n})=>{const e=Oe(),r=I.useRef(null),o=He("only selected shape",()=>e.getOnlySelectedShape(),[e]),a=o?e.getShapeUtil(o).expandSelectionOutlinePx(o):0;return Um(r,t==null?void 0:t.x,t==null?void 0:t.y,1,n,{x:-a,y:-a}),t=t.clone().expandBy(a).zeroFix(),x.jsx("svg",{ref:r,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:x.jsx("rect",{className:Wt("tl-selection__fg__outline"),width:oe(t.width),height:oe(t.height)})})},BW=()=>x.jsx("div",{className:"tl-shape-error-boundary"}),HW=()=>x.jsx("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"});function VW({points:t,zoom:n}){const e=2.5/n,r=t.reduce((S,w)=>Math.min(S,w.x),1/0),o=t.reduce((S,w)=>Math.max(S,w.x),-1/0),a=t.reduce((S,w)=>Math.min(S,w.y),1/0),l=t.reduce((S,w)=>Math.max(S,w.y),-1/0),u=t.some(S=>S.x===r&&S.y===a);let d,h,g,v;return u?(d=r,h=a,g=o,v=l):(d=r,h=l,g=o,v=a),x.jsxs("g",{className:"tl-snap-line",children:[x.jsx("line",{x1:d,y1:h,x2:g,y2:v}),t.map((S,w)=>x.jsx("g",{transform:`translate(${S.x},${S.y})`,children:x.jsx("path",{className:"tl-snap-point",d:`M ${-e},${-e} L ${e},${e} M ${-e},${e} L ${e},${-e}`})},w))]})}function KW({gaps:t,direction:n,zoom:e}){const r=3.5/e;let o=[-1/0,1/0],a=null;const l=n==="horizontal";for(const d of t){if(a=Hl(o[0],o[1],l?d.startEdge[0].y:d.startEdge[0].x,l?d.startEdge[1].y:d.startEdge[1].x),a)o=a;else continue;if(a=Hl(o[0],o[1],l?d.endEdge[0].y:d.endEdge[0].x,l?d.endEdge[1].y:d.endEdge[1].x),a)o=a;else continue}if(o===null)return null;const u=(o[0]+o[1])/2;return x.jsx("g",{className:"tl-snap-line",children:t.map(({startEdge:d,endEdge:h},g)=>x.jsx(I.Fragment,{children:l?x.jsxs(x.Fragment,{children:[x.jsx("line",{x1:d[0].x,y1:u-2*r,x2:d[1].x,y2:u+2*r}),x.jsx("line",{x1:h[0].x,y1:u-2*r,x2:h[1].x,y2:u+2*r}),x.jsx("line",{x1:d[0].x,y1:u,x2:h[0].x,y2:u}),x.jsx("line",{x1:(d[0].x+h[0].x)/2,y1:u-r,x2:(d[0].x+h[0].x)/2,y2:u+r})]}):x.jsxs(x.Fragment,{children:[x.jsx("line",{x1:u-2*r,y1:d[0].y,x2:u+2*r,y2:d[1].y}),x.jsx("line",{x1:u-2*r,y1:h[0].y,x2:u+2*r,y2:h[1].y}),x.jsx("line",{x1:u,y1:d[0].y,x2:u,y2:h[0].y}),x.jsx("line",{x1:u-r,y1:(d[0].y+h[0].y)/2,x2:u+r,y2:(d[0].y+h[0].y)/2})]})},g))})}const YW=({className:t,line:n,zoom:e})=>x.jsx("svg",{className:Wt("tl-overlays__item",t),children:n.type==="points"?x.jsx(VW,{...n,zoom:e}):n.type==="gaps"?x.jsx(KW,{...n,zoom:e}):null}),WW=()=>x.jsx("svg",{width:16,height:16,viewBox:"0 0 16 16",children:x.jsxs("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[x.jsx("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"var(--color-text-1)"}),x.jsx("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"var(--color-text-1)",children:x.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})}),GW=()=>null,qL=I.createContext({});function XW({overrides:t,children:n}){return x.jsx(qL.Provider,{value:I.useMemo(()=>({Background:fW,SvgDefs:GW,Brush:Rx,ZoomBrush:Rx,ScreenshotBrush:Rx,CollaboratorBrush:Rx,Cursor:rD,CollaboratorCursor:rD,CollaboratorHint:yW,CollaboratorShapeIndicator:g0,Grid:jW,Scribble:sD,SnapLine:YW,Handles:zW,Handle:NW,CollaboratorScribble:sD,ErrorFallback:WL,ShapeErrorFallback:BW,ShapeIndicatorErrorFallback:HW,Spinner:WW,SelectionBackground:XL,SelectionForeground:UW,HoveredShapeIndicator:FW,OnTheCanvas:null,InFrontOfTheCanvas:null,...t}),[t]),children:n})}function to(){return I.useContext(qL)}const qW=["textarea","input"];function QW(t){const n=Oe();I.useEffect(()=>{const e=t.current;if(!e)return;const r=o=>{var a;if(o instanceof PointerEvent&&o.pointerType==="pen"){o.isKilled=!0;const{target:l}=o;if(qW.includes((a=l.tagName)==null?void 0:a.toLocaleLowerCase())||n.isIn("select.editing_shape"))return;Un(o)}};return e.addEventListener("touchstart",r),e.addEventListener("touchend",r),()=>{e.removeEventListener("touchstart",r),e.removeEventListener("touchend",r)}},[n,t])}function ZW(t,n,e){return Math.max(n,Math.min(t,e))}const ko={toVector(t,n){return t===void 0&&(t=n),Array.isArray(t)?t:[t,t]},add(t,n){return[t[0]+n[0],t[1]+n[1]]},sub(t,n){return[t[0]-n[0],t[1]-n[1]]},addTo(t,n){t[0]+=n[0],t[1]+=n[1]},subTo(t,n){t[0]-=n[0],t[1]-=n[1]}};function aD(t,n,e){return n===0||Math.abs(n)===1/0?Math.pow(t,e*5):t*n*e/(n+e*t)}function lD(t,n,e,r=.15){return r===0?ZW(t,n,e):t<n?-aD(n-t,e-n,r)+n:t>e?+aD(t-e,e-n,r)+e:t}function JW(t,[n,e],[r,o]){const[[a,l],[u,d]]=t;return[lD(n,a,l,r),lD(e,u,d,o)]}function eG(t,n){if(typeof t!="object"||t===null)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var r=e.call(t,n||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function tG(t){var n=eG(t,"string");return typeof n=="symbol"?n:String(n)}function Wo(t,n,e){return n=tG(n),n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function cD(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),e.push.apply(e,r)}return e}function Xr(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?cD(Object(e),!0).forEach(function(r){Wo(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):cD(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}const QL={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function uD(t){return t?t[0].toUpperCase()+t.slice(1):""}const nG=["enter","leave"];function rG(t=!1,n){return t&&!nG.includes(n)}function iG(t,n="",e=!1){const r=QL[t],o=r&&r[n]||n;return"on"+uD(t)+uD(o)+(rG(e,o)?"Capture":"")}const oG=["gotpointercapture","lostpointercapture"];function sG(t){let n=t.substring(2).toLowerCase();const e=!!~n.indexOf("passive");e&&(n=n.replace("passive",""));const r=oG.includes(n)?"capturecapture":"capture",o=!!~n.indexOf(r);return o&&(n=n.replace("capture","")),{device:n,capture:o,passive:e}}function aG(t,n=""){const e=QL[t],r=e&&e[n]||n;return t+r}function ZL(t){return"touches"in t}function lG(t){return ZL(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function cG(t){return Array.from(t.touches).filter(n=>{var e,r;return n.target===t.currentTarget||((e=t.currentTarget)===null||e===void 0||(r=e.contains)===null||r===void 0?void 0:r.call(e,n.target))})}function YP(t,n){try{const e=n.clientX-t.clientX,r=n.clientY-t.clientY,o=(n.clientX+t.clientX)/2,a=(n.clientY+t.clientY)/2,l=Math.hypot(e,r);return{angle:-(Math.atan2(e,r)*180)/Math.PI,distance:l,origin:[o,a]}}catch{}return null}function uG(t){return cG(t).map(n=>n.identifier)}function dD(t,n){const[e,r]=Array.from(t.touches).filter(o=>n.includes(o.identifier));return YP(e,r)}const fD=40,hD=800;function JL(t){let{deltaX:n,deltaY:e,deltaMode:r}=t;return r===1?(n*=fD,e*=fD):r===2&&(n*=hD,e*=hD),[n,e]}function dG(t){const n={};if("buttons"in t&&(n.buttons=t.buttons),"shiftKey"in t){const{shiftKey:e,altKey:r,metaKey:o,ctrlKey:a}=t;Object.assign(n,{shiftKey:e,altKey:r,metaKey:o,ctrlKey:a})}return n}function dC(t,...n){return typeof t=="function"?t(...n):t}function fG(){}function hG(...t){return t.length===0?fG:t.length===1?t[0]:function(){let n;for(const e of t)n=e.apply(this,arguments)||n;return n}}function pD(t,n){return Object.assign({},n,t||{})}const pG=32;class e4{constructor(n,e,r){this.ctrl=n,this.args=e,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(n){this.ctrl.state[this.key]=n}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:n,shared:e,ingKey:r,args:o}=this;e[r]=n._active=n.active=n._blocked=n._force=!1,n._step=[!1,!1],n.intentional=!1,n._movement=[0,0],n._distance=[0,0],n._direction=[0,0],n._delta=[0,0],n._bounds=[[-1/0,1/0],[-1/0,1/0]],n.args=o,n.axis=void 0,n.memo=void 0,n.elapsedTime=n.timeDelta=0,n.direction=[0,0],n.distance=[0,0],n.overflow=[0,0],n._movementBound=[!1,!1],n.velocity=[0,0],n.movement=[0,0],n.delta=[0,0],n.timeStamp=0}start(n){const e=this.state,r=this.config;e._active||(this.reset(),this.computeInitial(),e._active=!0,e.target=n.target,e.currentTarget=n.currentTarget,e.lastOffset=r.from?dC(r.from,e):e.offset,e.offset=e.lastOffset,e.startTime=e.timeStamp=n.timeStamp)}computeValues(n){const e=this.state;e._values=n,e.values=this.config.transform(n)}computeInitial(){const n=this.state;n._initial=n._values,n.initial=n.values}compute(n){const{state:e,config:r,shared:o}=this;e.args=this.args;let a=0;if(n&&(e.event=n,r.preventDefault&&n.cancelable&&e.event.preventDefault(),e.type=n.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,dG(n)),o.down=o.pressed=o.buttons%2===1||o.touches>0,a=n.timeStamp-e.timeStamp,e.timeStamp=n.timeStamp,e.elapsedTime=e.timeStamp-e.startTime),e._active){const z=e._delta.map(Math.abs);ko.addTo(e._distance,z)}this.axisIntent&&this.axisIntent(n);const[l,u]=e._movement,[d,h]=r.threshold,{_step:g,values:v}=e;if(r.hasCustomTransform?(g[0]===!1&&(g[0]=Math.abs(l)>=d&&v[0]),g[1]===!1&&(g[1]=Math.abs(u)>=h&&v[1])):(g[0]===!1&&(g[0]=Math.abs(l)>=d&&Math.sign(l)*d),g[1]===!1&&(g[1]=Math.abs(u)>=h&&Math.sign(u)*h)),e.intentional=g[0]!==!1||g[1]!==!1,!e.intentional)return;const S=[0,0];if(r.hasCustomTransform){const[z,U]=v;S[0]=g[0]!==!1?z-g[0]:0,S[1]=g[1]!==!1?U-g[1]:0}else S[0]=g[0]!==!1?l-g[0]:0,S[1]=g[1]!==!1?u-g[1]:0;this.restrictToAxis&&!e._blocked&&this.restrictToAxis(S);const w=e.offset,k=e._active&&!e._blocked||e.active;k&&(e.first=e._active&&!e.active,e.last=!e._active&&e.active,e.active=o[this.ingKey]=e._active,n&&(e.first&&("bounds"in r&&(e._bounds=dC(r.bounds,e)),this.setup&&this.setup()),e.movement=S,this.computeOffset()));const[C,E]=e.offset,[[R,L],[A,O]]=e._bounds;e.overflow=[C<R?-1:C>L?1:0,E<A?-1:E>O?1:0],e._movementBound[0]=e.overflow[0]?e._movementBound[0]===!1?e._movement[0]:e._movementBound[0]:!1,e._movementBound[1]=e.overflow[1]?e._movementBound[1]===!1?e._movement[1]:e._movementBound[1]:!1;const D=e._active?r.rubberband||[0,0]:[0,0];if(e.offset=JW(e._bounds,e.offset,D),e.delta=ko.sub(e.offset,w),this.computeMovement(),k&&(!e.last||a>pG)){e.delta=ko.sub(e.offset,w);const z=e.delta.map(Math.abs);ko.addTo(e.distance,z),e.direction=e.delta.map(Math.sign),e._direction=e._delta.map(Math.sign),!e.first&&a>0&&(e.velocity=[z[0]/a,z[1]/a],e.timeDelta=a)}}emit(){const n=this.state,e=this.shared,r=this.config;if(n._active||this.clean(),(n._blocked||!n.intentional)&&!n._force&&!r.triggerAllEvents)return;const o=this.handler(Xr(Xr(Xr({},e),n),{},{[this.aliasKey]:n.values}));o!==void 0&&(n.memo=o)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function gG([t,n],e){const r=Math.abs(t),o=Math.abs(n);if(r>o&&r>e)return"x";if(o>r&&o>e)return"y"}class mG extends e4{constructor(...n){super(...n),Wo(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ko.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ko.sub(this.state.offset,this.state.lastOffset)}axisIntent(n){const e=this.state,r=this.config;if(!e.axis&&n){const o=typeof r.axisThreshold=="object"?r.axisThreshold[lG(n)]:r.axisThreshold;e.axis=gG(e._movement,o)}e._blocked=(r.lockDirection||!!r.axis)&&!e.axis||!!r.axis&&r.axis!==e.axis}restrictToAxis(n){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":n[1]=0;break;case"y":n[0]=0;break}}}const gD=t=>t,mD=.15,aR={enabled(t=!0){return t},eventOptions(t,n,e){return Xr(Xr({},e.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[mD,mD];case!1:return[0,0];default:return ko.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return ko.toVector(t)},transform(t,n,e){const r=t||e.shared.transform;if(this.hasCustomTransform=!!r,process.env.NODE_ENV==="development"){const o=r||gD;return a=>{const l=o(a);return(!isFinite(l[0])||!isFinite(l[1]))&&console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${l[0]},${[1]}]`),l}}return r||gD},threshold(t){return ko.toVector(t,0)}};process.env.NODE_ENV==="development"&&Object.assign(aR,{domTarget(t){if(t!==void 0)throw Error("[@use-gesture]: `domTarget` option has been renamed to `target`.");return NaN},lockDirection(t){if(t!==void 0)throw Error("[@use-gesture]: `lockDirection` option has been merged with `axis`. Use it as in `{ axis: 'lock' }`");return NaN},initial(t){if(t!==void 0)throw Error("[@use-gesture]: `initial` option has been renamed to `from`.");return NaN}});const vG=0,v0=Xr(Xr({},aR),{},{axis(t,n,{axis:e}){if(this.lockDirection=e==="lock",!this.lockDirection)return e},axisThreshold(t=vG){return t},bounds(t={}){if(typeof t=="function")return a=>v0.bounds(t(a));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:n=-1/0,right:e=1/0,top:r=-1/0,bottom:o=1/0}=t;return[[n,e],[r,o]]}}),y0=typeof window<"u"&&window.document&&window.document.createElement;function t4(){return y0&&"ontouchstart"in window}function yG(){return t4()||y0&&window.navigator.maxTouchPoints>1}function SG(){return y0&&"onpointerdown"in window}function bG(){return y0&&"exitPointerLock"in window.document}function wG(){try{return"constructor"in GestureEvent}catch{return!1}}const ol={isBrowser:y0,gesture:wG(),touch:t4(),touchscreen:yG(),pointer:SG(),pointerLock:bG()},xG=250,CG=180,EG=.5,_G=50,TG=250,kG=10,vD={mouse:0,touch:0,pen:8},PG=Xr(Xr({},v0),{},{device(t,n,{pointer:{touch:e=!1,lock:r=!1,mouse:o=!1}={}}){return this.pointerLock=r&&ol.pointerLock,ol.touch&&e?"touch":this.pointerLock?"mouse":ol.pointer&&!o?"pointer":ol.touch?"touch":"mouse"},preventScrollAxis(t,n,{preventScroll:e}){if(this.preventScrollDelay=typeof e=="number"?e:e||e===void 0&&t?xG:void 0,!(!ol.touchscreen||e===!1))return t||(e!==void 0?"y":void 0)},pointerCapture(t,n,{pointer:{capture:e=!0,buttons:r=1,keys:o=!0}={}}){return this.pointerButtons=r,this.keys=o,!this.pointerLock&&this.device==="pointer"&&e},threshold(t,n,{filterTaps:e=!1,tapsThreshold:r=3,axis:o=void 0}){const a=ko.toVector(t,e?r:o?1:0);return this.filterTaps=e,this.tapsThreshold=r,a},swipe({velocity:t=EG,distance:n=_G,duration:e=TG}={}){return{velocity:this.transform(ko.toVector(t)),distance:this.transform(ko.toVector(n)),duration:e}},delay(t=0){switch(t){case!0:return CG;case!1:return 0;default:return t}},axisThreshold(t){return t?Xr(Xr({},vD),t):vD},keyboardDisplacement(t=kG){return t}});process.env.NODE_ENV==="development"&&Object.assign(PG,{useTouch(t){if(t!==void 0)throw Error("[@use-gesture]: `useTouch` option has been renamed to `pointer.touch`. Use it as in `{ pointer: { touch: true } }`.");return NaN},experimental_preventWindowScrollY(t){if(t!==void 0)throw Error("[@use-gesture]: `experimental_preventWindowScrollY` option has been renamed to `preventScroll`.");return NaN},swipeVelocity(t){if(t!==void 0)throw Error("[@use-gesture]: `swipeVelocity` option has been renamed to `swipe.velocity`. Use it as in `{ swipe: { velocity: 0.5 } }`.");return NaN},swipeDistance(t){if(t!==void 0)throw Error("[@use-gesture]: `swipeDistance` option has been renamed to `swipe.distance`. Use it as in `{ swipe: { distance: 50 } }`.");return NaN},swipeDuration(t){if(t!==void 0)throw Error("[@use-gesture]: `swipeDuration` option has been renamed to `swipe.duration`. Use it as in `{ swipe: { duration: 250 } }`.");return NaN}});function n4(t){const[n,e]=t.overflow,[r,o]=t._delta,[a,l]=t._direction;(n<0&&r>0&&a<0||n>0&&r<0&&a>0)&&(t._movement[0]=t._movementBound[0]),(e<0&&o>0&&l<0||e>0&&o<0&&l>0)&&(t._movement[1]=t._movementBound[1])}const IG=30,RG=100;class MG extends e4{constructor(...n){super(...n),Wo(this,"ingKey","pinching"),Wo(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const n=this.state;n._touchIds=[],n.canceled=!1,n.cancel=this.cancel.bind(this),n.turns=0}computeOffset(){const{type:n,movement:e,lastOffset:r}=this.state;n==="wheel"?this.state.offset=ko.add(e,r):this.state.offset=[(1+e[0])*r[0],e[1]+r[1]]}computeMovement(){const{offset:n,lastOffset:e}=this.state;this.state.movement=[n[0]/e[0],n[1]-e[1]]}axisIntent(){const n=this.state,[e,r]=n._movement;if(!n.axis){const o=Math.abs(e)*IG-Math.abs(r);o<0?n.axis="angle":o>0&&(n.axis="scale")}}restrictToAxis(n){this.config.lockDirection&&(this.state.axis==="scale"?n[1]=0:this.state.axis==="angle"&&(n[0]=0))}cancel(){const n=this.state;n.canceled||setTimeout(()=>{n.canceled=!0,n._active=!1,this.compute(),this.emit()},0)}touchStart(n){this.ctrl.setEventIds(n);const e=this.state,r=this.ctrl.touchIds;if(e._active&&e._touchIds.every(a=>r.has(a))||r.size<2)return;this.start(n),e._touchIds=Array.from(r).slice(0,2);const o=dD(n,e._touchIds);o&&this.pinchStart(n,o)}pointerStart(n){if(n.buttons!=null&&n.buttons%2!==1)return;this.ctrl.setEventIds(n),n.target.setPointerCapture(n.pointerId);const e=this.state,r=e._pointerEvents,o=this.ctrl.pointerIds;if(e._active&&Array.from(r.keys()).every(l=>o.has(l))||(r.size<2&&r.set(n.pointerId,n),e._pointerEvents.size<2))return;this.start(n);const a=YP(...Array.from(r.values()));a&&this.pinchStart(n,a)}pinchStart(n,e){const r=this.state;r.origin=e.origin,this.computeValues([e.distance,e.angle]),this.computeInitial(),this.compute(n),this.emit()}touchMove(n){if(!this.state._active)return;const e=dD(n,this.state._touchIds);e&&this.pinchMove(n,e)}pointerMove(n){const e=this.state._pointerEvents;if(e.has(n.pointerId)&&e.set(n.pointerId,n),!this.state._active)return;const r=YP(...Array.from(e.values()));r&&this.pinchMove(n,r)}pinchMove(n,e){const r=this.state,o=r._values[1],a=e.angle-o;let l=0;Math.abs(a)>270&&(l+=Math.sign(a)),this.computeValues([e.distance,e.angle-360*l]),r.origin=e.origin,r.turns=l,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(n),this.emit()}touchEnd(n){this.ctrl.setEventIds(n),this.state._active&&this.state._touchIds.some(e=>!this.ctrl.touchIds.has(e))&&(this.state._active=!1,this.compute(n),this.emit())}pointerEnd(n){const e=this.state;this.ctrl.setEventIds(n);try{n.target.releasePointerCapture(n.pointerId)}catch{}e._pointerEvents.has(n.pointerId)&&e._pointerEvents.delete(n.pointerId),e._active&&e._pointerEvents.size<2&&(e._active=!1,this.compute(n),this.emit())}gestureStart(n){n.cancelable&&n.preventDefault();const e=this.state;e._active||(this.start(n),this.computeValues([n.scale,n.rotation]),e.origin=[n.clientX,n.clientY],this.compute(n),this.emit())}gestureMove(n){if(n.cancelable&&n.preventDefault(),!this.state._active)return;const e=this.state;this.computeValues([n.scale,n.rotation]),e.origin=[n.clientX,n.clientY];const r=e._movement;e._movement=[n.scale-1,n.rotation],e._delta=ko.sub(e._movement,r),this.compute(n),this.emit()}gestureEnd(n){this.state._active&&(this.state._active=!1,this.compute(n),this.emit())}wheel(n){const e=this.config.modifierKey;e&&(Array.isArray(e)?!e.find(r=>n[r]):!n[e])||(this.state._active?this.wheelChange(n):this.wheelStart(n),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(n){this.start(n),this.wheelChange(n)}wheelChange(n){"uv"in n||(n.cancelable&&n.preventDefault(),process.env.NODE_ENV==="development"&&!n.defaultPrevented&&console.warn("[@use-gesture]: To properly support zoom on trackpads, try using the `target` option.\n\nThis message will only appear in development mode."));const r=this.state;r._delta=[-JL(n)[1]/RG*r.offset[0],0],ko.addTo(r._movement,r._delta),n4(r),this.state.origin=[n.clientX,n.clientY],this.compute(n),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(n){const e=this.config.device;e&&(n(e,"start",this[e+"Start"].bind(this)),n(e,"change",this[e+"Move"].bind(this)),n(e,"end",this[e+"End"].bind(this)),n(e,"cancel",this[e+"End"].bind(this)),n("lostPointerCapture","",this[e+"End"].bind(this))),this.config.pinchOnWheel&&n("wheel","",this.wheel.bind(this),{passive:!1})}}const AG=Xr(Xr({},aR),{},{device(t,n,{shared:e,pointer:{touch:r=!1}={}}){if(e.target&&!ol.touch&&ol.gesture)return"gesture";if(ol.touch&&r)return"touch";if(ol.touchscreen){if(ol.pointer)return"pointer";if(ol.touch)return"touch"}},bounds(t,n,{scaleBounds:e={},angleBounds:r={}}){const o=l=>{const u=pD(dC(e,l),{min:-1/0,max:1/0});return[u.min,u.max]},a=l=>{const u=pD(dC(r,l),{min:-1/0,max:1/0});return[u.min,u.max]};return typeof e!="function"&&typeof r!="function"?[o(),a()]:l=>[o(l),a(l)]},threshold(t,n,e){return this.lockDirection=e.axis==="lock",ko.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});Xr(Xr({},v0),{},{mouseOnly:(t=!0)=>t});class $G extends mG{constructor(...n){super(...n),Wo(this,"ingKey","wheeling")}wheel(n){this.state._active||this.start(n),this.wheelChange(n),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(n){const e=this.state;e._delta=JL(n),ko.addTo(e._movement,e._delta),n4(e),this.compute(n),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(n){n("wheel","",this.wheel.bind(this))}}const OG=v0;Xr(Xr({},v0),{},{mouseOnly:(t=!0)=>t});const lR=new Map,WP=new Map;function DG(t){lR.set(t.key,t.engine),WP.set(t.key,t.resolver)}const LG={key:"pinch",engine:MG,resolver:AG},jG={key:"wheel",engine:$G,resolver:OG};function NG(t,n){if(t==null)return{};var e={},r=Object.keys(t),o,a;for(a=0;a<r.length;a++)o=r[a],!(n.indexOf(o)>=0)&&(e[o]=t[o]);return e}function zG(t,n){if(t==null)return{};var e=NG(t,n),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)r=a[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(e[r]=t[r])}return e}const FG={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=ol.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:n=!1}={}){return{passive:t,capture:n}},transform(t){return t}},UG=["target","eventOptions","window","enabled","transform"];function c1(t={},n){const e={};for(const[r,o]of Object.entries(n))switch(typeof o){case"function":if(process.env.NODE_ENV==="development"){const a=o.call(e,t[r],r,t);Number.isNaN(a)||(e[r]=a)}else e[r]=o.call(e,t[r],r,t);break;case"object":e[r]=c1(t[r],o);break;case"boolean":o&&(e[r]=t[r]);break}return e}function BG(t,n,e={}){const r=t,{target:o,eventOptions:a,window:l,enabled:u,transform:d}=r,h=zG(r,UG);if(e.shared=c1({target:o,eventOptions:a,window:l,enabled:u,transform:d},FG),n){const g=WP.get(n);e[n]=c1(Xr({shared:e.shared},h),g)}else for(const g in h){const v=WP.get(g);if(v)e[g]=c1(Xr({shared:e.shared},h[g]),v);else if(process.env.NODE_ENV==="development"&&!["drag","pinch","scroll","wheel","move","hover"].includes(g)){if(g==="domTarget")throw Error("[@use-gesture]: `domTarget` option has been renamed to `target`.");console.warn(`[@use-gesture]: Unknown config key \`${g}\` was used. Please read the documentation for further information.`)}}return e}class r4{constructor(n,e){Wo(this,"_listeners",new Set),this._ctrl=n,this._gestureKey=e}add(n,e,r,o,a){const l=this._listeners,u=aG(e,r),d=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},h=Xr(Xr({},d),a);n.addEventListener(u,o,h);const g=()=>{n.removeEventListener(u,o,h),l.delete(g)};return l.add(g),g}clean(){this._listeners.forEach(n=>n()),this._listeners.clear()}}class HG{constructor(){Wo(this,"_timeouts",new Map)}add(n,e,r=140,...o){this.remove(n),this._timeouts.set(n,window.setTimeout(e,r,...o))}remove(n){const e=this._timeouts.get(n);e&&window.clearTimeout(e)}clean(){this._timeouts.forEach(n=>void window.clearTimeout(n)),this._timeouts.clear()}}class VG{constructor(n){Wo(this,"gestures",new Set),Wo(this,"_targetEventStore",new r4(this)),Wo(this,"gestureEventStores",{}),Wo(this,"gestureTimeoutStores",{}),Wo(this,"handlers",{}),Wo(this,"config",{}),Wo(this,"pointerIds",new Set),Wo(this,"touchIds",new Set),Wo(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),KG(this,n)}setEventIds(n){if(ZL(n))return this.touchIds=new Set(uG(n)),this.touchIds;if("pointerId"in n)return n.type==="pointerup"||n.type==="pointercancel"?this.pointerIds.delete(n.pointerId):n.type==="pointerdown"&&this.pointerIds.add(n.pointerId),this.pointerIds}applyHandlers(n,e){this.handlers=n,this.nativeHandlers=e}applyConfig(n,e){this.config=BG(n,e,this.config)}clean(){this._targetEventStore.clean();for(const n of this.gestures)this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...n){const e=this.config.shared,r={};let o;if(!(e.target&&(o=e.target(),!o))){if(e.enabled){for(const l of this.gestures){const u=this.config[l],d=yD(r,u.eventOptions,!!o);if(u.enabled){const h=lR.get(l);new h(this,n,l).bind(d)}}const a=yD(r,e.eventOptions,!!o);for(const l in this.nativeHandlers)a(l,"",u=>this.nativeHandlers[l](Xr(Xr({},this.state.shared),{},{event:u,args:n})),void 0,!0)}for(const a in r)r[a]=hG(...r[a]);if(!o)return r;for(const a in r){const{device:l,capture:u,passive:d}=sG(a);this._targetEventStore.add(o,l,"",r[a],{capture:u,passive:d})}}}}function em(t,n){t.gestures.add(n),t.gestureEventStores[n]=new r4(t,n),t.gestureTimeoutStores[n]=new HG}function KG(t,n){n.drag&&em(t,"drag"),n.wheel&&em(t,"wheel"),n.scroll&&em(t,"scroll"),n.move&&em(t,"move"),n.pinch&&em(t,"pinch"),n.hover&&em(t,"hover")}const yD=(t,n,e)=>(r,o,a,l={},u=!1)=>{var d,h;const g=(d=l.capture)!==null&&d!==void 0?d:n.capture,v=(h=l.passive)!==null&&h!==void 0?h:n.passive;let S=u?r:iG(r,o,g);e&&v&&(S+="Passive"),t[S]=t[S]||[],t[S].push(a)},YG=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function WG(t){const n={},e={},r=new Set;for(let o in t)YG.test(o)?(r.add(RegExp.lastMatch),e[o]=t[o]):n[o]=t[o];return[e,n,r]}function tm(t,n,e,r,o,a){if(!t.has(e))return;if(!lR.has(r)){process.env.NODE_ENV==="development"&&console.warn(`[@use-gesture]: You've created a custom handler that that uses the \`${r}\` gesture but isn't properly configured.

Please add \`${r}Action\` when creating your handler.`);return}const l=e+"Start",u=e+"End",d=h=>{let g;return h.first&&l in n&&n[l](h),e in n&&(g=n[e](h)),h.last&&u in n&&n[u](h),g};o[r]=d,a[r]=a[r]||{}}function GG(t,n){const[e,r,o]=WG(t),a={};return tm(o,e,"onDrag","drag",a,n),tm(o,e,"onWheel","wheel",a,n),tm(o,e,"onScroll","scroll",a,n),tm(o,e,"onPinch","pinch",a,n),tm(o,e,"onMove","move",a,n),tm(o,e,"onHover","hover",a,n),{handlers:a,config:n,nativeHandlers:r}}function XG(t,n={},e,r){const o=ft.useMemo(()=>new VG(t),[]);if(o.applyHandlers(t,r),o.applyConfig(n,e),ft.useEffect(o.effect.bind(o)),ft.useEffect(()=>o.clean.bind(o),[]),n.target===void 0)return o.bind.bind(o)}function qG(t){return t.forEach(DG),function(e,r){const{handlers:o,nativeHandlers:a,config:l}=GG(e,r||{});return XG(o,l,void 0,a)}}const SD=10,QG=/Mac|iPod|iPhone|iPad/.test(typeof window>"u"?"node":window.navigator.platform);function i4(t){let{deltaY:n,deltaX:e}=t,r=0;if(t.ctrlKey||t.altKey||t.metaKey){const o=Math.sign(t.deltaY),a=Math.abs(t.deltaY);let l=n;a>SD&&(l=SD*o),r=l/100}else t.shiftKey&&!QG&&(e=n,n=0);return{x:-e,y:-n,z:-r}}const ZG=qG([jG,LG]);let nm;const JG=t=>nm===void 0?(nm=t,!1):t-nm>120&&t-nm<160?(nm=t,!0):(nm=t,!1);function eX(t){const n=Oe(),e=I.useMemo(()=>{let r="not sure";const o=({event:C})=>{if(!n.getInstanceState().isFocused||(r="not sure",JG(Date.now())))return;const E=n.getEditingShapeId();if(E){const O=n.getShape(E);if(O&&n.getShapeUtil(O).canScroll(O)){const z=n.getShapePageBounds(E);if(z!=null&&z.containsPoint(n.inputs.currentPagePoint))return}}Un(C);const R=i4(C);if(R.x===0&&R.y===0)return;const L=n.getContainer().getBoundingClientRect(),A={type:"wheel",name:"wheel",delta:R,point:new N(C.clientX,C.clientY).sub({x:L.left,y:L.top}),shiftKey:C.shiftKey,altKey:C.altKey,ctrlKey:C.metaKey||C.ctrlKey};n.dispatch(A)};let a=1,l=1,u=1,d=0;const h=new N,g=new N,v=C=>{const E=t.current;r="not sure";const{event:R,origin:L,da:A}=C;R instanceof WheelEvent||(R.target===E||E!=null&&E.contains(R.target))&&(g.x=L[0],g.y=L[1],h.x=L[0],h.y=L[1],a=A[0],l=n.getZoomLevel(),n.dispatch({type:"pinch",name:"pinch_start",point:{x:L[0],y:L[1],z:n.getZoomLevel()},delta:{x:0,y:0},shiftKey:R.shiftKey,altKey:R.altKey,ctrlKey:R.metaKey||R.ctrlKey}))},S=C=>{if(C&&(r="zooming"),r==="zooming")return;const E=Math.abs(d-a),R=N.Dist(h,g);switch(r){case"not sure":{E>24?r="zooming":R>16&&(r="panning");break}case"panning":{E>64&&(r="zooming");break}}};return{onWheel:o,onPinchStart:v,onPinchEnd:C=>{const E=t.current,{event:R,origin:L,offset:A}=C;if(R instanceof WheelEvent||!(R.target===E||E!=null&&E.contains(R.target)))return;const O=A[0];r="not sure",requestAnimationFrame(()=>{n.dispatch({type:"pinch",name:"pinch_end",point:{x:L[0],y:L[1],z:O},delta:{x:L[0],y:L[1]},shiftKey:R.shiftKey,altKey:R.altKey,ctrlKey:R.metaKey||R.ctrlKey})})},onPinch:C=>{const E=t.current,{event:R,origin:L,offset:A,da:O}=C;if(R instanceof WheelEvent||!(R.target===E||E!=null&&E.contains(R.target)))return;const D=C.type==="gesturechange"||C.type==="gestureend";d=O[0];const z=L[0]-g.x,U=L[1]-g.y;switch(g.x=L[0],g.y=L[1],S(D),r){case"zooming":{u=A[0],n.dispatch({type:"pinch",name:"pinch",point:{x:L[0],y:L[1],z:u},delta:{x:z,y:U},shiftKey:R.shiftKey,altKey:R.altKey,ctrlKey:R.metaKey||R.ctrlKey});break}case"panning":{n.dispatch({type:"pinch",name:"pinch",point:{x:L[0],y:L[1],z:l},delta:{x:z,y:U},shiftKey:R.shiftKey,altKey:R.altKey,ctrlKey:R.metaKey||R.ctrlKey});break}}}}},[n,t]);ZG(e,{target:t,eventOptions:{passive:!1},pinch:{from:()=>[n.getZoomLevel(),0],scaleBounds:()=>({from:n.getZoomLevel(),max:8,min:.05})}})}function s2(t,n,e){const r=t.getShape(n),o=t.getShapeHandles(r);return{shape:r,handle:o.find(a=>a.id===e)}}function tX(t,n){const e=Oe();return I.useMemo(()=>{const r=d=>{if(d.isKilled)return;const h=sC(d.currentTarget);h0(h,d);const{shape:g,handle:v}=s2(e,t,n);v&&e.dispatch({type:"pointer",target:"handle",handle:v,shape:g,name:"pointer_down",...na(d)})};let o,a;return{onPointerDown:r,onPointerMove:d=>{if(d.isKilled||d.clientX===o&&d.clientY===a)return;o=d.clientX,a=d.clientY;const{shape:h,handle:g}=s2(e,t,n);g&&e.dispatch({type:"pointer",target:"handle",handle:g,shape:h,name:"pointer_move",...na(d)})},onPointerUp:d=>{if(d.isKilled)return;const h=sC(d.currentTarget);p0(h,d);const{shape:g,handle:v}=s2(e,t,n);v&&e.dispatch({type:"pointer",target:"handle",handle:v,shape:g,name:"pointer_up",...na(d)})}}},[e,t,n])}var o4="Expected a function",bD=0/0,nX="[object Symbol]",rX=/^\s+|\s+$/g,iX=/^[-+]0x[0-9a-f]+$/i,oX=/^0b[01]+$/i,sX=/^0o[0-7]+$/i,aX=parseInt,lX=typeof To=="object"&&To&&To.Object===Object&&To,cX=typeof self=="object"&&self&&self.Object===Object&&self,uX=lX||cX||Function("return this")(),dX=Object.prototype,fX=dX.toString,hX=Math.max,pX=Math.min,a2=function(){return uX.Date.now()};function gX(t,n,e){var r,o,a,l,u,d,h=0,g=!1,v=!1,S=!0;if(typeof t!="function")throw new TypeError(o4);n=wD(n)||0,fC(e)&&(g=!!e.leading,v="maxWait"in e,a=v?hX(wD(e.maxWait)||0,n):a,S="trailing"in e?!!e.trailing:S);function w(z){var U=r,Y=o;return r=o=void 0,h=z,l=t.apply(Y,U),l}function k(z){return h=z,u=setTimeout(R,n),g?w(z):l}function C(z){var U=z-d,Y=z-h,q=n-U;return v?pX(q,a-Y):q}function E(z){var U=z-d,Y=z-h;return d===void 0||U>=n||U<0||v&&Y>=a}function R(){var z=a2();if(E(z))return L(z);u=setTimeout(R,C(z))}function L(z){return u=void 0,S&&r?w(z):(r=o=void 0,l)}function A(){u!==void 0&&clearTimeout(u),h=0,r=d=o=u=void 0}function O(){return u===void 0?l:L(a2())}function D(){var z=a2(),U=E(z);if(r=arguments,o=this,d=z,U){if(u===void 0)return k(d);if(v)return u=setTimeout(R,n),w(d)}return u===void 0&&(u=setTimeout(R,n)),l}return D.cancel=A,D.flush=O,D}function mX(t,n,e){var r=!0,o=!0;if(typeof t!="function")throw new TypeError(o4);return fC(e)&&(r="leading"in e?!!e.leading:r,o="trailing"in e?!!e.trailing:o),gX(t,n,{leading:r,maxWait:n,trailing:o})}function fC(t){var n=typeof t;return!!t&&(n=="object"||n=="function")}function vX(t){return!!t&&typeof t=="object"}function yX(t){return typeof t=="symbol"||vX(t)&&fX.call(t)==nX}function wD(t){if(typeof t=="number")return t;if(yX(t))return bD;if(fC(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=fC(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=t.replace(rX,"");var e=oX.test(t);return e||sX.test(t)?aX(t.slice(2),e?2:8):iX.test(t)?bD:+t}var SX=mX;const bX=Of(SX);function wX(){const t=Oe();I.useLayoutEffect(()=>{const n=bX(()=>{t.updateViewportScreenBounds()},200,{trailing:!0});t.updateViewportScreenBounds();const e=setInterval(n,1e3);return window.addEventListener("resize",n),window.addEventListener("scroll",n),()=>{clearInterval(e),window.removeEventListener("resize",n),window.removeEventListener("scroll",n)}},[t])}const Hr=class Hr{constructor(n=0,e=0,r=0,o=0){T(this,"x",0);T(this,"y",0);T(this,"w",0);T(this,"h",0);this.x=n,this.y=e,this.w=r,this.h=o}get point(){return new N(this.x,this.y)}set point(n){this.x=n.x,this.y=n.y}get minX(){return this.x}set minX(n){this.x=n}get midX(){return this.x+this.w/2}get maxX(){return this.x+this.w}get minY(){return this.y}set minY(n){this.y=n}get midY(){return this.y+this.h/2}get maxY(){return this.y+this.h}get width(){return this.w}set width(n){this.w=n}get height(){return this.h}set height(n){this.h=n}get aspectRatio(){return this.width/this.height}get center(){return new N(this.midX,this.midY)}set center(n){this.minX=n.x-this.width/2,this.minY=n.y-this.height/2}get corners(){return[new N(this.minX,this.minY),new N(this.maxX,this.minY),new N(this.maxX,this.maxY),new N(this.minX,this.maxY)]}get snapPoints(){return[new N(this.minX,this.minY),new N(this.maxX,this.minY),new N(this.maxX,this.maxY),new N(this.minX,this.maxY),this.center]}get sides(){const{corners:n}=this;return[[n[0],n[1]],[n[1],n[2]],[n[2],n[3]],[n[3],n[0]]]}get size(){return new N(this.w,this.h)}toFixed(){return this.x=Ix(this.x),this.y=Ix(this.y),this.w=Ix(this.w),this.h=Ix(this.h),this}setTo(n){return this.x=n.x,this.y=n.y,this.w=n.w,this.h=n.h,this}set(n=0,e=0,r=0,o=0){return this.x=n,this.y=e,this.w=r,this.h=o,this}expand(n){const e=Math.min(this.minX,n.minX),r=Math.min(this.minY,n.minY),o=Math.max(this.maxX,n.maxX),a=Math.max(this.maxY,n.maxY);return this.x=e,this.y=r,this.w=o-e,this.h=a-r,this}expandBy(n){return this.x-=n,this.y-=n,this.w+=n*2,this.h+=n*2,this}scale(n){return this.x/=n,this.y/=n,this.w/=n,this.h/=n,this}clone(){const{x:n,y:e,w:r,h:o}=this;return new Hr(n,e,r,o)}translate(n){return this.x+=n.x,this.y+=n.y,this}snapToGrid(n){const e=Math.round(this.minX/n)*n,r=Math.round(this.minY/n)*n,o=Math.round(this.maxX/n)*n,a=Math.round(this.maxY/n)*n;this.minX=e,this.minY=r,this.width=Math.max(1,o-e),this.height=Math.max(1,a-r)}collides(n){return Hr.Collides(this,n)}contains(n){return Hr.Contains(this,n)}includes(n){return Hr.Includes(this,n)}containsPoint(n,e=0){return Hr.ContainsPoint(this,n,e)}getHandlePoint(n){switch(n){case"top_left":return new N(this.minX,this.minY);case"top_right":return new N(this.maxX,this.minY);case"bottom_left":return new N(this.minX,this.maxY);case"bottom_right":return new N(this.maxX,this.maxY);case"top":return new N(this.midX,this.minY);case"right":return new N(this.maxX,this.midY);case"bottom":return new N(this.midX,this.maxY);case"left":return new N(this.minX,this.midY)}}toJson(){return{x:this.minX,y:this.minY,w:this.w,h:this.h}}resize(n,e,r){const{minX:o,minY:a,maxX:l,maxY:u}=this;let{minX:d,minY:h,maxX:g,maxY:v}=this;switch(n){case"left":case"top_left":case"bottom_left":{d+=e;break}case"right":case"top_right":case"bottom_right":{g+=e;break}}switch(n){case"top":case"top_left":case"top_right":{h+=r;break}case"bottom":case"bottom_left":case"bottom_right":{v+=r;break}}const S=(g-d)/(l-o),w=(v-h)/(u-a),k=S<0,C=w<0;if(k){const E=g;g=d,d=E}if(C){const E=v;v=h,h=E}this.minX=d,this.minY=h,this.width=Math.abs(g-d),this.height=Math.abs(v-h)}union(n){const e=Math.min(this.minX,n.x),r=Math.min(this.minY,n.y),o=Math.max(this.maxX,n.w+n.x),a=Math.max(this.maxY,n.h+n.y);return this.x=e,this.y=r,this.width=o-e,this.height=a-r,this}static From(n){return new Hr(n.x,n.y,n.w,n.h)}static FromPoints(n){if(n.length===0)return new Hr;let e=1/0,r=1/0,o=-1/0,a=-1/0,l;for(let u=0,d=n.length;u<d;u++)l=n[u],e=Math.min(l.x,e),r=Math.min(l.y,r),o=Math.max(l.x,o),a=Math.max(l.y,a);return new Hr(e,r,o-e,a-r)}static Expand(n,e){const r=Math.min(e.minX,n.minX),o=Math.min(e.minY,n.minY),a=Math.max(e.maxX,n.maxX),l=Math.max(e.maxY,n.maxY);return new Hr(r,o,a-r,l-o)}static ExpandBy(n,e){return new Hr(n.minX-e,n.minY-e,n.width+e*2,n.height+e*2)}static Resize(n,e,r,o,a=!1){const{minX:l,minY:u,maxX:d,maxY:h}=n;let{minX:g,minY:v,maxX:S,maxY:w}=n;switch(e){case"left":case"top_left":case"bottom_left":{g+=r;break}case"right":case"top_right":case"bottom_right":{S+=r;break}}switch(e){case"top":case"top_left":case"top_right":{v+=o;break}case"bottom":case"bottom_left":case"bottom_right":{w+=o;break}}const k=(S-g)/(d-l),C=(w-v)/(h-u),E=k<0,R=C<0;if(a){const A=(d-l)/(h-u),O=Math.abs(S-g),D=Math.abs(w-v),z=O*(C<0?1:-1)*(1/A),U=D*(k<0?1:-1)*A,Y=A<O/D;switch(e){case"top_left":{Y?v=w+z:g=S+U;break}case"top_right":{Y?v=w+z:S=g-U;break}case"bottom_right":{Y?w=v-z:S=g-U;break}case"bottom_left":{Y?w=v-z:g=S+U;break}case"bottom":case"top":{const q=(g+S)/2,X=D*A;g=q-X/2,S=q+X/2;break}case"left":case"right":{const q=(v+w)/2,X=O/A;v=q-X/2,w=q+X/2;break}}}if(E){const A=S;S=g,g=A}if(R){const A=w;w=v,v=A}const L=new Hr(g,v,Math.abs(S-g),Math.abs(w-v));return{box:L,scaleX:+(L.width/n.width*(k>0?1:-1)).toFixed(5),scaleY:+(L.height/n.height*(C>0?1:-1)).toFixed(5)}}equals(n){return Hr.Equals(this,n)}static Equals(n,e){return e.x===n.x&&e.y===n.y&&e.w===n.w&&e.h===n.h}zeroFix(){return this.w=Math.max(1,this.w),this.h=Math.max(1,this.h),this}static ZeroFix(n){return new Hr(n.x,n.y,Math.max(1,n.w),Math.max(1,n.h))}};T(Hr,"Collides",(n,e)=>!(n.maxX<e.minX||n.minX>e.maxX||n.maxY<e.minY||n.minY>e.maxY)),T(Hr,"Contains",(n,e)=>n.minX<e.minX&&n.minY<e.minY&&n.maxY>e.maxY&&n.maxX>e.maxX),T(Hr,"Includes",(n,e)=>Hr.Collides(n,e)||Hr.Contains(n,e)),T(Hr,"ContainsPoint",(n,e,r=0)=>!(e.x<n.minX-r||e.y<n.minY-r||e.x>n.maxX+r||e.y>n.maxY+r)),T(Hr,"Common",n=>{let e=1/0,r=1/0,o=-1/0,a=-1/0;for(let l=0;l<n.length;l++){const u=n[l];e=Math.min(e,u.minX),r=Math.min(r,u.minY),o=Math.max(o,u.maxX),a=Math.max(a,u.maxY)}return new Hr(e,r,o-e,a-r)}),T(Hr,"Sides",(n,e=0)=>{const{corners:r}=n;return[[r[0],r[1]],[r[1],r[2]],[r[2],r[3]],[r[3],r[0]]]});let Mt=Hr;function xX(t){switch(t){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return t}}function CX(t){switch(t){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return t}}function EX(t){return t==="top_left"||t==="top_right"||t==="bottom_right"||t==="bottom_left"}const Zn=class Zn{constructor(n,e,r,o,a,l){T(this,"a",1);T(this,"b",0);T(this,"c",0);T(this,"d",1);T(this,"e",0);T(this,"f",0);this.a=n,this.b=e,this.c=r,this.d=o,this.e=a,this.f=l}equals(n){return this.a===n.a&&this.b===n.b&&this.c===n.c&&this.d===n.d&&this.e===n.e&&this.f===n.f}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}multiply(n){const e=n,{a:r,b:o,c:a,d:l,e:u,f:d}=this;return this.a=r*e.a+a*e.b,this.c=r*e.c+a*e.d,this.e=r*e.e+a*e.f+u,this.b=o*e.a+l*e.b,this.d=o*e.c+l*e.d,this.f=o*e.e+l*e.f+d,this}rotate(n,e,r){return n===0?this:e===void 0?this.multiply(Zn.Rotate(n)):this.translate(e,r).multiply(Zn.Rotate(n)).translate(-e,-r)}translate(n,e){return this.multiply(Zn.Translate(n,e))}scale(n,e){return this.multiply(Zn.Scale(n,e))}invert(){const{a:n,b:e,c:r,d:o,e:a,f:l}=this,u=n*o-e*r;return this.a=o/u,this.b=e/-u,this.c=r/-u,this.d=n/u,this.e=(o*a-r*l)/-u,this.f=(e*a-n*l)/u,this}applyToPoint(n){return Zn.applyToPoint(this,n)}applyToPoints(n){return Zn.applyToPoints(this,n)}rotation(){return Zn.Rotation(this)}point(){return Zn.Point(this)}decomposed(){return Zn.Decompose(this)}toCssString(){return Zn.toCssString(this)}setTo(n){return Object.assign(this,n),this}decompose(){return Zn.Decompose(this)}clone(){return new Zn(this.a,this.b,this.c,this.d,this.e,this.f)}static Identity(){return new Zn(1,0,0,1,0,0)}static Translate(n,e){return new Zn(1,0,0,1,n,e)}static Rotate(n,e,r){if(n===0)return Zn.Identity();const o=Math.cos(n),a=Math.sin(n),l=new Zn(o,a,-a,o,0,0);return e===void 0?l:Zn.Compose(Zn.Translate(e,r),l,Zn.Translate(-e,-r))}static Multiply(n,e){return{a:n.a*e.a+n.c*e.b,c:n.a*e.c+n.c*e.d,e:n.a*e.e+n.c*e.f+n.e,b:n.b*e.a+n.d*e.b,d:n.b*e.c+n.d*e.d,f:n.b*e.e+n.d*e.f+n.f}}static Inverse(n){const e=n.a*n.d-n.b*n.c;return{a:n.d/e,b:n.b/-e,c:n.c/-e,d:n.a/e,e:(n.d*n.e-n.c*n.f)/-e,f:(n.b*n.e-n.a*n.f)/e}}static Absolute(n){const e=n.a*n.d-n.b*n.c;return{a:n.d/e,b:n.b/-e,c:n.c/-e,d:n.a/e,e:(n.d*n.e-n.c*n.f)/e,f:(n.b*n.e-n.a*n.f)/-e}}static Compose(...n){const e=Zn.Identity();for(let r=0,o=n.length;r<o;r++)e.multiply(n[r]);return e}static Point(n){return new N(n.e,n.f)}static Rotation(n){let e;if(n.a!==0||n.c!==0){const r=Math.hypot(n.a,n.c);e=Math.acos(n.a/r)*(n.c>0?-1:1)}else if(n.b!==0||n.d!==0){const r=Math.hypot(n.b,n.d);e=Pr+Math.acos(n.b/r)*(n.d>0?-1:1)}else e=0;return VP(e)}static Decompose(n){let e,r,o;if(n.a!==0||n.c!==0){const a=Math.hypot(n.a,n.c);e=a,r=(n.a*n.d-n.b*n.c)/a,o=Math.acos(n.a/a)*(n.c>0?-1:1)}else if(n.b!==0||n.d!==0){const a=Math.hypot(n.b,n.d);e=(n.a*n.d-n.b*n.c)/a,r=a,o=Pr+Math.acos(n.b/a)*(n.d>0?-1:1)}else e=0,r=0,o=0;return{x:n.e,y:n.f,scaleX:e,scaleY:r,rotation:VP(o)}}static Smooth(n,e=1e10){return n.a=Math.round(n.a*e)/e,n.b=Math.round(n.b*e)/e,n.c=Math.round(n.c*e)/e,n.d=Math.round(n.d*e)/e,n.e=Math.round(n.e*e)/e,n.f=Math.round(n.f*e)/e,n}static toCssString(n){return`matrix(${oe(n.a)}, ${oe(n.b)}, ${oe(n.c)}, ${oe(n.d)}, ${oe(n.e)}, ${oe(n.f)})`}static applyToPoint(n,e){return new N(n.a*e.x+n.c*e.y+n.e,n.b*e.x+n.d*e.y+n.f,e.z)}static applyToXY(n,e,r){return[n.a*e+n.c*r+n.e,n.b*e+n.d*r+n.f]}static applyToPoints(n,e){return e.map(r=>new N(n.a*r.x+n.c*r.y+n.e,n.b*r.x+n.d*r.y+n.f,r.z))}static applyToBounds(n,e){return new Mt(n.e+e.minX,n.f+e.minY,e.width,e.height)}static From(n){return new Zn(n.a,n.b,n.c,n.d,n.e,n.f)}static Cast(n){return n instanceof Zn?n:Zn.From(n)}};T(Zn,"Scale",(n,e,r,o)=>{const a=new Zn(n,0,0,e,0,0);return r===void 0?a:Zn.Compose(Zn.Translate(r,o),a,Zn.Translate(-r,-o))});let yt=Zn;function _X(t=!0){const[n,e]=I.useState(0),r=Oe();I.useEffect(()=>{if(!t)return;const o=()=>e(a=>a+1);return r.on("tick",o),()=>{r.off("tick",o)}},[r,t])}const TX=sr(function({showStroke:n=!0,showVertices:e=!0,showClosestPointOnOutline:r=!0}){const o=Oe();_X(r);const a=o.getZoomLevel(),l=o.getRenderingShapes(),{inputs:{currentPagePoint:u}}=o;return x.jsx("svg",{style:{position:"absolute",pointerEvents:"none",zIndex:999999999,top:0,left:0,overflow:"visible"},children:l.map(d=>{const h=o.getShape(d.id);if(h.type==="group")return null;const g=o.getShapeGeometry(h),v=o.getShapePageTransform(h),S=o.getPointInShapeSpace(h,u),w=g.nearestPoint(S),k=g.distanceToPoint(S,!0),C=Math.abs(k)*a,E=k<0,{vertices:R}=g;return x.jsxs("g",{transform:v.toCssString(),strokeLinecap:"round",strokeLinejoin:"round",children:[n&&x.jsx("path",{stroke:"red",strokeWidth:"2",fill:"none",opacity:"1",d:g.toSimpleSvgPath()}),e&&R.map((L,A)=>x.jsx("circle",{cx:L.x,cy:L.y,r:"2",fill:`hsl(${q1(A,[0,R.length-1],[120,200])}, 100%, 50%)`,stroke:"black",strokeWidth:"1"},`v${A}`)),r&&C<150&&x.jsx("line",{x1:w.x,y1:w.y,x2:S.x,y2:S.y,opacity:1-C/150,stroke:E?"goldenrod":"dodgerblue",strokeWidth:"2"})]},d.id+"_outline")})})});var kX=200,cR="__lodash_hash_undefined__",PX=1/0,IX="[object Function]",RX="[object GeneratorFunction]",MX=/[\\^$.*+?()[\]{}|]/g,AX=/^\[object .+?Constructor\]$/,$X=typeof To=="object"&&To&&To.Object===Object&&To,OX=typeof self=="object"&&self&&self.Object===Object&&self,uR=$X||OX||Function("return this")();function DX(t,n){var e=t?t.length:0;return!!e&&NX(t,n,0)>-1}function LX(t,n,e){for(var r=-1,o=t?t.length:0;++r<o;)if(e(n,t[r]))return!0;return!1}function jX(t,n,e,r){for(var o=t.length,a=e+(r?1:-1);r?a--:++a<o;)if(n(t[a],a,t))return a;return-1}function NX(t,n,e){if(n!==n)return jX(t,zX,e);for(var r=e-1,o=t.length;++r<o;)if(t[r]===n)return r;return-1}function zX(t){return t!==t}function FX(t,n){return t.has(n)}function UX(t,n){return t==null?void 0:t[n]}function BX(t){var n=!1;if(t!=null&&typeof t.toString!="function")try{n=!!(t+"")}catch{}return n}function s4(t){var n=-1,e=Array(t.size);return t.forEach(function(r){e[++n]=r}),e}var HX=Array.prototype,VX=Function.prototype,a4=Object.prototype,l2=uR["__core-js_shared__"],xD=function(){var t=/[^.]+$/.exec(l2&&l2.keys&&l2.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),l4=VX.toString,dR=a4.hasOwnProperty,KX=a4.toString,YX=RegExp("^"+l4.call(dR).replace(MX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),WX=HX.splice,GX=fR(uR,"Map"),c2=fR(uR,"Set"),GS=fR(Object,"create");function ep(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function XX(){this.__data__=GS?GS(null):{}}function qX(t){return this.has(t)&&delete this.__data__[t]}function QX(t){var n=this.__data__;if(GS){var e=n[t];return e===cR?void 0:e}return dR.call(n,t)?n[t]:void 0}function ZX(t){var n=this.__data__;return GS?n[t]!==void 0:dR.call(n,t)}function JX(t,n){var e=this.__data__;return e[t]=GS&&n===void 0?cR:n,this}ep.prototype.clear=XX;ep.prototype.delete=qX;ep.prototype.get=QX;ep.prototype.has=ZX;ep.prototype.set=JX;function Bm(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function eq(){this.__data__=[]}function tq(t){var n=this.__data__,e=jC(n,t);if(e<0)return!1;var r=n.length-1;return e==r?n.pop():WX.call(n,e,1),!0}function nq(t){var n=this.__data__,e=jC(n,t);return e<0?void 0:n[e][1]}function rq(t){return jC(this.__data__,t)>-1}function iq(t,n){var e=this.__data__,r=jC(e,t);return r<0?e.push([t,n]):e[r][1]=n,this}Bm.prototype.clear=eq;Bm.prototype.delete=tq;Bm.prototype.get=nq;Bm.prototype.has=rq;Bm.prototype.set=iq;function Hm(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function oq(){this.__data__={hash:new ep,map:new(GX||Bm),string:new ep}}function sq(t){return NC(this,t).delete(t)}function aq(t){return NC(this,t).get(t)}function lq(t){return NC(this,t).has(t)}function cq(t,n){return NC(this,t).set(t,n),this}Hm.prototype.clear=oq;Hm.prototype.delete=sq;Hm.prototype.get=aq;Hm.prototype.has=lq;Hm.prototype.set=cq;function hC(t){var n=-1,e=t?t.length:0;for(this.__data__=new Hm;++n<e;)this.add(t[n])}function uq(t){return this.__data__.set(t,cR),this}function dq(t){return this.__data__.has(t)}hC.prototype.add=hC.prototype.push=uq;hC.prototype.has=dq;function jC(t,n){for(var e=t.length;e--;)if(Sq(t[e][0],n))return e;return-1}function fq(t){if(!c4(t)||mq(t))return!1;var n=bq(t)||BX(t)?YX:AX;return n.test(vq(t))}function hq(t,n,e){var r=-1,o=DX,a=t.length,l=!0,u=[],d=u;if(e)l=!1,o=LX;else if(a>=kX){var h=n?null:pq(t);if(h)return s4(h);l=!1,o=FX,d=new hC}else d=n?[]:u;e:for(;++r<a;){var g=t[r],v=n?n(g):g;if(g=e||g!==0?g:0,l&&v===v){for(var S=d.length;S--;)if(d[S]===v)continue e;n&&d.push(v),u.push(g)}else o(d,v,e)||(d!==u&&d.push(v),u.push(g))}return u}var pq=c2&&1/s4(new c2([,-0]))[1]==PX?function(t){return new c2(t)}:wq;function NC(t,n){var e=t.__data__;return gq(n)?e[typeof n=="string"?"string":"hash"]:e.map}function fR(t,n){var e=UX(t,n);return fq(e)?e:void 0}function gq(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function mq(t){return!!xD&&xD in t}function vq(t){if(t!=null){try{return l4.call(t)}catch{}try{return t+""}catch{}}return""}function yq(t){return t&&t.length?hq(t):[]}function Sq(t,n){return t===n||t!==t&&n!==n}function bq(t){var n=c4(t)?KX.call(t):"";return n==IX||n==RX}function c4(t){var n=typeof t;return!!t&&(n=="object"||n=="function")}function wq(){}var xq=yq;const Cq=Of(xq);function u4(t){return Cq(t)}function Eq(){const t=Oe(),n=I.useMemo(()=>t.store.query.records("instance_presence",()=>({userId:{neq:t.user.getId()}})),[t]),e=CL("userIds",()=>u4(n.get().map(r=>r.userId)).sort(),{isEqual:(r,o)=>{var a;return r.join(",")===((a=o.join)==null?void 0:a.call(o,","))}},[n]);return He(e)}function d4(t){const n=Oe(),e=I.useMemo(()=>n.store.query.records("instance_presence",()=>({userId:{eq:t}})),[n,t]);return He(`latestPresence:${t}`,()=>e.get().slice().sort((o,a)=>a.lastActivityTimestamp-o.lastActivityTimestamp)[0],[])??null}const _q=sr(function(){const n=Eq();return x.jsx(x.Fragment,{children:n.map(e=>x.jsx(Tq,{collaboratorId:e},e))})}),Tq=sr(function({collaboratorId:n}){const e=Oe(),r=d4(n),o=Pq(r);if(!(r&&r.currentPageId===e.getCurrentPageId()))return null;switch(o){case"inactive":{const{followingUserId:a,highlightedUserIds:l}=e.getInstanceState();if(!(a===r.userId||l.includes(r.userId)))return null;break}case"idle":{const{highlightedUserIds:a}=e.getInstanceState();if(r.followingUserId===e.user.getId()&&!(r.chatMessage||a.includes(r.userId)))return null;break}}return x.jsx(kq,{latestPresence:r})}),kq=sr(function({latestPresence:n}){const e=Oe(),{CollaboratorBrush:r,CollaboratorScribble:o,CollaboratorCursor:a,CollaboratorHint:l,CollaboratorShapeIndicator:u}=to(),d=e.getZoomLevel(),h=e.getViewportPageBounds(),{userId:g,chatMessage:v,brush:S,scribbles:w,selectedShapeIds:k,userName:C,cursor:E,color:R}=n,L=!(E.x<h.minX-12/d||E.y<h.minY-16/d||E.x>h.maxX-12/d||E.y>h.maxY-16/d);return x.jsxs(x.Fragment,{children:[S&&r?x.jsx(r,{className:"tl-collaborator__brush",brush:S,color:R,opacity:.1},g+"_brush"):null,L&&a?x.jsx(a,{className:"tl-collaborator__cursor",point:E,color:R,zoom:d,name:C!=="New User"?C:null,chatMessage:v},g+"_cursor"):l?x.jsx(l,{className:"tl-collaborator__cursor-hint",point:E,color:R,zoom:d,viewport:h},g+"_cursor_hint"):null,o&&w.length?x.jsx(x.Fragment,{children:w.map(A=>x.jsx(o,{className:"tl-collaborator__scribble",scribble:A,color:R,zoom:d,opacity:A.color==="laser"?.5:.1},g+"_scribble_"+A.id))}):null,u&&k.map(A=>x.jsx(u,{className:"tl-collaborator__shape-indicator",id:A,color:R,opacity:.5},g+"_"+A))]})});function CD(t){return t>AW?"inactive":t>GL?"idle":"active"}function Pq(t){const n=I.useRef((t==null?void 0:t.lastActivityTimestamp)??-1),[e,r]=I.useState(()=>CD(Date.now()-n.current));return I.useEffect(()=>{const o=setInterval(()=>{r(CD(Date.now()-n.current))},$W);return()=>clearInterval(o)},[]),t&&(n.current=t.lastActivityTimestamp),e}function f4(t,n){return n===0?t:f4(n,t%n)}function h4(t){const n=t.toString().split(".")[1];if(!n)return 1;const e=Math.pow(10,n.length),r=parseInt(n,10);return e/f4(r,e)}function Iq(){const t=Oe(),n=is();I.useEffect(()=>u0("useDPRMultiple",()=>{const e=t.getInstanceState().devicePixelRatio;n.style.setProperty("--tl-dpr-multiple",h4(e).toString())}),[t,n])}const p4=sr(function({id:n,shape:e,util:r,index:o,backgroundIndex:a,opacity:l,isCulled:u}){const d=Oe(),{ShapeErrorFallback:h}=to(),g=I.useRef(null),v=I.useRef(null),S=I.useCallback((k,C)=>{var E,R;(E=g.current)==null||E.style.setProperty(k,C),(R=v.current)==null||R.style.setProperty(k,C)},[]);qh("set shape container transform position",()=>{if(!d.getShape(n))return;const C=d.getShapePageTransform(n),E=yt.toCssString(C);S("transform",E)},[d,S]),qh("set shape container clip path",()=>{if(!d.getShape(n))return null;const C=d.getShapeClipPath(n);S("clip-path",C??"none")},[d,S]),qh("set shape height and width",()=>{const k=d.getShape(n);if(!k)return null;const C=d.getShapeGeometry(k).bounds,E=Math.floor(d.getInstanceState().devicePixelRatio*100)/100,R=h4(E),L=C.w%R,A=L===0?C.w:C.w+(R-L),O=C.h%R,D=O===0?C.h:C.h+(R-O);S("width",Math.max(A,R)+"px"),S("height",Math.max(D,R)+"px")},[d]),I.useLayoutEffect(()=>{var k,C;S("opacity",l+""),(k=g.current)==null||k.style.setProperty("z-index",o+""),(C=v.current)==null||C.style.setProperty("z-index",a+"")},[l,o,a,S]);const w=I.useCallback(k=>{d.annotateError(k,{origin:"react.shape",willCrashApp:!1})},[d]);return e?x.jsxs(x.Fragment,{children:[r.backgroundComponent&&x.jsx("div",{ref:v,className:"tl-shape tl-shape-background","data-shape-type":e.type,draggable:!1,children:!u&&x.jsx(KS,{fallback:h,onError:w,children:x.jsx(Mq,{shape:e,util:r})})}),x.jsx("div",{ref:g,className:"tl-shape","data-shape-type":e.type,draggable:!1,children:u?x.jsx(Aq,{shape:e}):x.jsx(KS,{fallback:h,onError:w,children:x.jsx(Rq,{shape:e,util:r})})})]}):null}),Rq=I.memo(function({shape:n,util:e}){return MC("InnerShape:"+n.type,()=>e.component(n))},(t,n)=>t.shape.props===n.shape.props&&t.shape.meta===n.shape.meta&&t.util===n.util),Mq=I.memo(function({shape:n,util:e}){return MC("InnerShape:"+n.type,()=>{var r;return(r=e.backgroundComponent)==null?void 0:r.call(e,n)})},(t,n)=>t.shape.props===n.shape.props&&t.shape.meta===n.shape.meta),Aq=I.memo(function({shape:n}){const r=Oe().getShapeGeometry(n).bounds;return x.jsx("div",{className:"tl-shape__culled",style:{transform:`translate(${oe(r.minX)}px, ${oe(r.minY)}px)`,width:Math.max(1,oe(r.width)),height:Math.max(1,oe(r.height))}})},()=>!0);function hR({className:t}){const n=Oe(),{Background:e,SvgDefs:r}=to(),o=ft.useRef(null),a=ft.useRef(null),l=ft.useRef(null);wX(),oW(),rW(),eX(o),QW(o),qh("position layers",()=>{const S=a.current;if(!S)return;const w=l.current;if(!w)return;const{x:k,y:C,z:E}=n.getCamera(),R=E>=1?q1(E,[1,8],[.125,.5],!0):q1(E,[.1,1],[-2,.125],!0),L=`scale(${oe(E)}) translate(${oe(k+R)}px,${oe(C+R)}px)`;S.style.setProperty("transform",L),w.style.setProperty("transform",L)},[n]);const u=nW(),d=He("shapeSvgDefs",()=>{const S=new Map;for(const w of ti(n.shapeUtils)){if(!w)return;const k=w.getCanvasSvgDefs();for(const{key:C,component:E}of k)S.has(C)||S.set(C,x.jsx(E,{},C))}return[...S.values()]},[n]),h=He("debug_shapes",()=>kr.hideShapes.get(),[kr]),g=He("debug_svg",()=>kr.debugSvg.get(),[kr]),v=He("debug_geometry",()=>kr.debugGeometry.get(),[kr]);return x.jsxs("div",{ref:o,draggable:!1,className:Wt("tl-canvas",t),"data-testid":"canvas",...u,children:[e&&x.jsx(e,{}),x.jsx($q,{}),x.jsx(qq,{}),x.jsx("svg",{className:"tl-svg-context",children:x.jsxs("defs",{children:[d,ED&&x.jsx(ED,{}),x.jsx(Yq,{}),x.jsx(Wq,{}),x.jsx(Gq,{}),r&&x.jsx(r,{})]})}),x.jsxs("div",{ref:a,className:"tl-html-layer tl-shapes",draggable:!1,children:[x.jsx(Jq,{}),x.jsx(Zq,{}),h?null:g?x.jsx(Uq,{}):x.jsx(Bq,{})]}),x.jsxs("div",{className:"tl-fixed-layer tl-overlays",children:[x.jsxs("div",{ref:l,className:"tl-html-layer",children:[v?x.jsx(TX,{}):null,x.jsx(zq,{}),x.jsx(Dq,{}),x.jsx(Oq,{}),x.jsx(Lq,{}),x.jsx(Hq,{}),x.jsx(Vq,{}),x.jsx(Kq,{}),x.jsx(jq,{}),x.jsx(Qq,{}),x.jsx(_q,{})]}),x.jsx(eQ,{})]})]})}function $q(){const t=Oe(),n=He("gridSize",()=>t.getDocumentSettings().gridSize,[t]),{x:e,y:r,z:o}=He("camera",()=>t.getCamera(),[t]),a=He("isGridMode",()=>t.getInstanceState().isGridMode,[t]),{Grid:l}=to();return l&&a?x.jsx(l,{x:e,y:r,z:o,size:n}):null}function Oq(){const t=Oe(),n=He("scribbles",()=>t.getInstanceState().scribbles,[t]),e=He("zoomLevel",()=>t.getZoomLevel(),[t]),{Scribble:r}=to();return r&&n.length?x.jsx(x.Fragment,{children:n.map(o=>x.jsx(r,{className:"tl-user-scribble",scribble:o,zoom:e},o.id))}):null}function Dq(){const t=Oe(),n=He("brush",()=>t.getInstanceState().brush,[t]),{Brush:e}=to();return e&&n?x.jsx(e,{className:"tl-user-brush",brush:n}):null}function Lq(){const t=Oe(),n=He("zoomBrush",()=>t.getInstanceState().zoomBrush,[t]),{ZoomBrush:e}=to();return e&&n?x.jsx(e,{className:"tl-user-brush tl-zoom-brush",brush:n}):null}function jq(){const t=Oe(),n=He("snapLines",()=>t.snaps.getLines(),[t]),e=He("zoomLevel",()=>t.getZoomLevel(),[t]),{SnapLine:r}=to();return r&&n.length>0?x.jsx(x.Fragment,{children:n.map(o=>x.jsx(r,{className:"tl-user-snapline",line:o,zoom:e},o.id))}):null}const Nq=48;function zq(){const t=Oe(),{Handles:n}=to(),e=He("zoomLevel",()=>t.getZoomLevel(),[t]),r=He("coarse pointer",()=>t.getInstanceState().isCoarsePointer,[t]),o=He("onlySelectedShape",()=>t.getOnlySelectedShape(),[t]),a=He("isChangingStyle",()=>t.getInstanceState().isChangingStyle,[t]),l=He("isChangingStyle",()=>t.getInstanceState().isReadonly,[t]),u=He("handles",()=>{const g=t.getOnlySelectedShape();if(g)return t.getShapeHandles(g)},[t]),d=He("transform",()=>{const g=t.getOnlySelectedShape();if(g)return t.getShapePageTransform(g)},[t]);if(!n||!o||a||l||!u||!d)return null;const h=[];for(let g=0,v=u[g];g<u.length;g++,v=u[g]){if(v.type!=="vertex"){const S=u[g-1],w=u[g+1];if(S&&w&&Math.hypot(S.y-w.y,S.x-w.x)<Nq/e)continue}h.push(v)}return h.sort(g=>g.type==="vertex"?1:-1),x.jsx(n,{children:x.jsx("g",{transform:yt.toCssString(d),children:h.map(g=>x.jsx(Fq,{shapeId:o.id,handle:g,zoom:e,isCoarse:r},g.id))})})}function Fq({shapeId:t,handle:n,zoom:e,isCoarse:r}){const o=tX(t,n.id),{Handle:a}=to();return a?x.jsx("g",{"aria-label":"handle",transform:`translate(${n.x}, ${n.y})`,...o,children:x.jsx(a,{shapeId:t,handle:n,zoom:e,isCoarse:r})}):null}function Uq(){const t=Oe(),n=He("rendering shapes",()=>t.getRenderingShapes(),[t]);return x.jsx(x.Fragment,{children:n.map(e=>x.jsxs(ft.Fragment,{children:[x.jsx(p4,{...e}),x.jsx(Xq,{id:e.id})]},e.id+"_fragment"))})}function Bq(){const t=Oe(),n=He("rendering shapes",()=>t.getRenderingShapes(),[t]);return x.jsx(x.Fragment,{children:n.map(e=>x.jsx(p4,{...e},e.id+"_shape"))})}function Hq(){const t=Oe(),n=He("selectedShapeIds",()=>t.getCurrentPageState().selectedShapeIds,[t]);return He("should display selected ids",()=>t.isInAny("select.idle","select.brushing","select.scribble_brushing","select.editing_shape","select.pointing_shape","select.pointing_selection","select.pointing_handle")&&!t.getInstanceState().isChangingStyle,[t])?x.jsx(x.Fragment,{children:n.map(r=>x.jsx(g0,{className:"tl-user-indicator__selected",id:r},r+"_indicator"))}):null}const Vq=function(){const n=Oe(),{HoveredShapeIndicator:e}=to(),r=He("coarse pointer",()=>n.getInstanceState().isCoarsePointer,[n]),o=He("hovering canvas",()=>n.getInstanceState().isHoveringCanvas,[n]),a=He("hovered id",()=>n.getCurrentPageState().hoveredShapeId,[n]);return r||!o||!a||!e?null:x.jsx(e,{shapeId:a})},Kq=sr(function(){const n=Oe(),e=X1(n.getHintingShapeIds());return e.length?x.jsx(x.Fragment,{children:e.map(r=>x.jsx(g0,{className:"tl-user-indicator__hint",id:r},r+"_hinting"))}):null});function ED(){return x.jsxs("g",{id:"cursor",children:[x.jsxs("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[x.jsx("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),x.jsx("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),x.jsxs("g",{fill:"white",transform:"translate(-12,-12)",children:[x.jsx("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),x.jsx("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),x.jsxs("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[x.jsx("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),x.jsx("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})}function Yq(){return x.jsx("path",{id:"cursor_hint",fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z"})}function Wq(){return x.jsx("marker",{id:"arrowhead-dot",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:x.jsx("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})})}function Gq(){return x.jsxs("marker",{id:"arrowhead-cross",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[x.jsx("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),x.jsx("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})}const Xq=sr(function({id:n}){const e=Oe(),r=e.getShape(n),[o,a]=ft.useState(""),l=(r==null?void 0:r.parentId)===e.getCurrentPageId();return ft.useEffect(()=>{if(!l)return;let u=null;const d=u0("shape to svg",async()=>{const h=Math.random();u=h;const g=e.getShapePageBounds(n),v=await e.getSvg([n],{padding:0});v&&g&&u===h&&(v.style.setProperty("overflow","visible"),v.setAttribute("preserveAspectRatio","xMidYMin slice"),v.style.setProperty("transform",`translate(${g.x}px, ${g.y+g.h+12}px)`),v.style.setProperty("border","1px solid black"),a(v==null?void 0:v.outerHTML))});return()=>{u=null,d()}},[e,n,l]),l?x.jsx("div",{style:{paddingTop:12,position:"absolute"},children:x.jsx("div",{style:{display:"flex"},dangerouslySetInnerHTML:{__html:o}})}):null});function qq(){const t=He("debugging ui log",()=>kr.logMessages.get(),[kr]);return t.length?x.jsx("div",{className:"debug__ui-logger",children:t.map((n,e)=>{const r=typeof n=="string"?n:JSON.stringify(n);return x.jsx("div",{className:"debug__ui-logger__line",children:r},e)})}):null}function Qq(){const t=Oe(),n=He("selection rotation",()=>t.getSelectionRotation(),[t]),e=He("selection bounds",()=>t.getSelectionRotatedPageBounds(),[t]),{SelectionForeground:r}=to();return!e||!r?null:x.jsx(r,{bounds:e,rotation:n})}function Zq(){const t=Oe(),n=He("selection rotation",()=>t.getSelectionRotation(),[t]),e=He("selection bounds",()=>t.getSelectionRotatedPageBounds(),[t]),{SelectionBackground:r}=to();return!e||!r?null:x.jsx(r,{bounds:e,rotation:n})}function Jq(){const{OnTheCanvas:t}=to();return t?x.jsx(t,{}):null}function eQ(){const{InFrontOfTheCanvas:t}=to();return t?x.jsx(t,{}):null}const tQ=()=>x.jsx(N4,{children:"Connecting..."});function dr(){return $C()}const g4="TLDRAW_USER_DATA_v3",m4=Ln({id:nn,name:nn.nullable().optional(),locale:nn.nullable().optional(),color:nn.nullable().optional(),isDarkMode:kn.nullable().optional(),animationSpeed:Nt.nullable().optional(),edgeScrollSpeed:Nt.nullable().optional(),isSnapMode:kn.nullable().optional()}),gS={AddAnimationSpeed:1,AddIsSnapMode:2,MakeFieldsNullable:3,AddEdgeScrollSpeed:4},pC=Bn({currentVersion:gS.AddEdgeScrollSpeed,migrators:{[gS.AddAnimationSpeed]:{up:t=>({...t,animationSpeed:1}),down:({animationSpeed:t,...n})=>n},[gS.AddIsSnapMode]:{up:t=>({...t,isSnapMode:!1}),down:({isSnapMode:t,...n})=>n},[gS.MakeFieldsNullable]:{up:t=>t,down:t=>({id:t.id,name:t.name??sl.name,locale:t.locale??sl.locale,color:t.color??sl.color,isDarkMode:t.isDarkMode??sl.isDarkMode,animationSpeed:t.animationSpeed??sl.animationSpeed,isSnapMode:t.isSnapMode??sl.isSnapMode})},[gS.AddEdgeScrollSpeed]:{up:t=>({...t,edgeScrollSpeed:1}),down:({edgeScrollSpeed:t,...n})=>n}}}),_D=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"];function nQ(){return _D[Math.floor(Math.random()*_D.length)]}function rQ(){var t,n;return typeof window>"u"?!1:((n=(t=window.matchMedia)==null?void 0:t.call(window,"(prefers-color-scheme: dark)"))==null?void 0:n.matches)??!1}function iQ(){var t,n;return typeof window>"u"?!1:((n=(t=window.matchMedia)==null?void 0:t.call(window,"(prefers-reduced-motion: reduce)"))==null?void 0:n.matches)??!1}const sl=Object.freeze({name:"New User",locale:GY(),color:nQ(),isDarkMode:!1,edgeScrollSpeed:1,animationSpeed:iQ()?0:1,isSnapMode:!1});function Mx(){return{id:dr()}}function v4(t){if(t===null||typeof t!="object"||!("version"in t)||!("user"in t)||typeof t.version!="number")return Mx();const n=qI({value:t.user,fromVersion:t.version,toVersion:pC.currentVersion??0,migrations:pC});if(n.type==="error")return Mx();try{m4.validate(n.value)}catch{return Mx()}return n.value}function oQ(){var n;const t=typeof window>"u"?null:JSON.parse(((n=window==null?void 0:window.localStorage)==null?void 0:n.getItem(g4))||"null")??null;return v4(t)}const S0=Es("globalUserData",oQ());function sQ(){typeof window<"u"&&window.localStorage&&window.localStorage.setItem(g4,JSON.stringify({version:pC.currentVersion,user:S0.get()}))}function aQ(t){m4.validate(t),S0.set(t),sQ(),cQ()}const lQ=typeof process<"u"&&process.env.NODE_ENV==="test",Cm=typeof BroadcastChannel<"u"&&!lQ?new BroadcastChannel("tldraw-user-sync"):null;Cm==null||Cm.addEventListener("message",t=>{const n=t.data;(n==null?void 0:n.type)===S4&&(n==null?void 0:n.origin)!==y4&&S0.set(v4(n.data))});const y4=dr(),S4="tldraw-user-preferences-change";function cQ(){Cm==null||Cm.postMessage({type:S4,origin:y4,data:{user:S0.get(),version:pC.currentVersion}})}function uQ(){return S0.get()}function b4(t={}){return{derivePresenceState:t.derivePresenceState??(()=>Qe("presence",()=>null)),userPreferences:t.userPreferences??Qe("userPreferences",()=>uQ()),setUserPreferences:t.setUserPreferences??aQ}}var w4={exports:{}};(function(t){var n=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function o(d,h,g){this.fn=d,this.context=h,this.once=g||!1}function a(d,h,g,v,S){if(typeof g!="function")throw new TypeError("The listener must be a function");var w=new o(g,v||d,S),k=e?e+h:h;return d._events[k]?d._events[k].fn?d._events[k]=[d._events[k],w]:d._events[k].push(w):(d._events[k]=w,d._eventsCount++),d}function l(d,h){--d._eventsCount===0?d._events=new r:delete d._events[h]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],g,v;if(this._eventsCount===0)return h;for(v in g=this._events)n.call(g,v)&&h.push(e?v.slice(1):v);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(g)):h},u.prototype.listeners=function(h){var g=e?e+h:h,v=this._events[g];if(!v)return[];if(v.fn)return[v.fn];for(var S=0,w=v.length,k=new Array(w);S<w;S++)k[S]=v[S].fn;return k},u.prototype.listenerCount=function(h){var g=e?e+h:h,v=this._events[g];return v?v.fn?1:v.length:0},u.prototype.emit=function(h,g,v,S,w,k){var C=e?e+h:h;if(!this._events[C])return!1;var E=this._events[C],R=arguments.length,L,A;if(E.fn){switch(E.once&&this.removeListener(h,E.fn,void 0,!0),R){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,g),!0;case 3:return E.fn.call(E.context,g,v),!0;case 4:return E.fn.call(E.context,g,v,S),!0;case 5:return E.fn.call(E.context,g,v,S,w),!0;case 6:return E.fn.call(E.context,g,v,S,w,k),!0}for(A=1,L=new Array(R-1);A<R;A++)L[A-1]=arguments[A];E.fn.apply(E.context,L)}else{var O=E.length,D;for(A=0;A<O;A++)switch(E[A].once&&this.removeListener(h,E[A].fn,void 0,!0),R){case 1:E[A].fn.call(E[A].context);break;case 2:E[A].fn.call(E[A].context,g);break;case 3:E[A].fn.call(E[A].context,g,v);break;case 4:E[A].fn.call(E[A].context,g,v,S);break;default:if(!L)for(D=1,L=new Array(R-1);D<R;D++)L[D-1]=arguments[D];E[A].fn.apply(E[A].context,L)}}return!0},u.prototype.on=function(h,g,v){return a(this,h,g,v,!1)},u.prototype.once=function(h,g,v){return a(this,h,g,v,!0)},u.prototype.removeListener=function(h,g,v,S){var w=e?e+h:h;if(!this._events[w])return this;if(!g)return l(this,w),this;var k=this._events[w];if(k.fn)k.fn===g&&(!S||k.once)&&(!v||k.context===v)&&l(this,w);else{for(var C=0,E=[],R=k.length;C<R;C++)(k[C].fn!==g||S&&!k[C].once||v&&k[C].context!==v)&&E.push(k[C]);E.length?this._events[w]=E.length===1?E[0]:E:l(this,w)}return this},u.prototype.removeAllListeners=function(h){var g;return h?(g=e?e+h:h,this._events[g]&&l(this,g)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=e,u.EventEmitter=u,t.exports=u})(w4);var dQ=w4.exports;function Ca({children:t,className:n="",...e}){return x.jsx("svg",{...e,className:`tl-svg-container ${n}`,children:t})}class ip{constructor(n){T(this,"isFilled",!1);T(this,"isClosed",!0);T(this,"isLabel",!1);T(this,"isSnappable",!0);T(this,"_vertices");T(this,"_bounds");T(this,"_snapPoints");T(this,"_area");this.isFilled=n.isFilled,this.isClosed=n.isClosed,this.isSnappable=n.isSnappable??!1,this.isLabel=n.isLabel??!1}hitTestPoint(n,e=0,r=!1){return this.distanceToPoint(n,r)<=e}distanceToPoint(n,e=!1){const r=n.dist(this.nearestPoint(n));return this.isClosed&&(this.isFilled||e)&&qc(n,this.vertices)?-r:r}distanceToLineSegment(n,e){const r=this.nearestPointOnLineSegment(n,e),o=N.DistanceToLineSegment(n,e,r);return this.isClosed&&this.isFilled&&qc(r,this.vertices)?-o:o}hitTestLineSegment(n,e,r=0){return this.distanceToLineSegment(n,e)<=r}nearestPointOnLineSegment(n,e){let r=1/0,o;for(let a=0;a<this.vertices.length;a++){const l=this.vertices[a],u=N.DistanceToLineSegment(n,e,l);u<r&&(r=u,o=l)}if(!o)throw Error("nearest point not found");return o}isPointInBounds(n,e=0){const{bounds:r}=this;return!(n.x<r.minX-e||n.y<r.minY-e||n.x>r.maxX+e||n.y>r.maxY+e)}get vertices(){return this._vertices||(this._vertices=this.getVertices()),this._vertices}getBounds(){return Mt.FromPoints(this.vertices)}get bounds(){return this._bounds||(this._bounds=this.getBounds()),this._bounds}get snapPoints(){return this._snapPoints||(this._snapPoints=this.bounds.snapPoints),this._snapPoints}get center(){return this.bounds.center}get area(){return this._area||(this._area=this.getArea()),this._area}getArea(){if(!this.isClosed)return 0;const{vertices:n}=this;let e=0;for(let r=0,o=n.length;r<o;r++){const a=n[r],l=n[(r+1)%o];e+=a.x*l.y-l.x*a.y}return e/2}toSimpleSvgPath(){let n="";const{vertices:e}=this,r=e.length;if(r===0)return n;n+=`M${e[0].x},${e[0].y}`;for(let o=1;o<r;o++)n+=`L${e[o].x},${e[o].y}`;return this.isClosed&&(n+="Z"),n}}class wf extends ip{constructor(e){super({...e,isClosed:!0,isFilled:!1});T(this,"children");const{children:r}=e;if(r.length===0)throw Error("Group2d must have at least one child");this.children=r}getVertices(){return this.children.filter(e=>!e.isLabel).flatMap(e=>e.vertices)}nearestPoint(e){let r=1/0,o;const{children:a}=this;if(a.length===0)throw Error("no children");for(const l of a){const u=l.nearestPoint(e),d=u.dist(e);d<r&&(r=d,o=u)}if(!o)throw Error("nearest point not found");return o}distanceToPoint(e,r=!1){return Math.min(...this.children.map((o,a)=>o.distanceToPoint(e,r||a>0)))}hitTestPoint(e,r,o){return!!this.children.filter(a=>!a.isLabel).find(a=>a.hitTestPoint(e,r,o))}hitTestLineSegment(e,r,o){return!!this.children.filter(a=>!a.isLabel).find(a=>a.hitTestLineSegment(e,r,o))}getArea(){return this.children[0].area}toSimpleSvgPath(){let e="";for(const o of this.children)e+=o.toSimpleSvgPath();const r=Mt.FromPoints(this.vertices).corners;for(let o=0,a=r.length;o<a;o++){const l=r[o],u=r[(o-1+a)%a],d=l.dist(u),h=r[(o+1)%a],g=l.dist(h),v=l.clone().lrp(u,4/d),S=l,w=l.clone().lrp(h,4/g);e+=`M${v.x},${v.y} L${S.x},${S.y} L${w.x},${w.y} `}return e}}function pR(t,n,e,r){const o=t.x-e.x,a=t.y-e.y,l=r.x-e.x,u=r.y-e.y,d=n.x-t.x,h=n.y-t.y,g=l*a-u*o,v=d*a-h*o,S=u*d-l*h;if(g===0||v===0||S===0)return null;if(S!==0){const w=g/S,k=v/S;if(0<=w&&w<=1&&0<=k&&k<=1)return N.AddXY(t,w*d,w*h)}return null}function zC(t,n,e,r){const o=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),a=2*((n.x-t.x)*(t.x-e.x)+(n.y-t.y)*(t.y-e.y)),l=e.x*e.x+e.y*e.y+t.x*t.x+t.y*t.y-2*(e.x*t.x+e.y*t.y)-r*r,u=a*a-4*o*l;if(u<0||u===0)return null;const d=Math.sqrt(u),h=(-a+d)/(2*o),g=(-a-d)/(2*o);if((h<0||h>1)&&(g<0||g>1))return null;const v=[];return 0<=h&&h<=1&&v.push(N.Lrp(t,n,h)),0<=g&&g<=1&&v.push(N.Lrp(t,n,g)),v.length===0?null:v}function x4(t,n,e){const r=[];let o;for(let a=0,l=e.length-1;a<l;a++)o=pR(t,n,e[a],e[a+1]),o&&r.push(o);return r.length===0?null:r}function fQ(t,n,e){const r=[];let o;for(let a=1,l=e.length;a<l+1;a++)o=pR(t,n,e[a-1],e[a%e.length]),o&&r.push(o);return r.length===0?null:r}function hQ(t,n,e,r){let o=e.x-t.x,a=e.y-t.y;const l=Math.sqrt(o*o+a*a),u=(l*l-r*r+n*n)/(2*l),d=Math.sqrt(n*n-u*u);return o/=l,a/=l,[new N(t.x+o*u-a*d,t.y+a*u+o*d),new N(t.x+o*u+a*d,t.y+a*u-o*d)]}function TD(t,n,e){const r=[];let o,a,l;for(let u=0,d=e.length;u<d;u++)o=e[u],a=e[(u+1)%e.length],l=zC(o,a,t,n),l&&r.push(...l);return r.length===0?null:r}function kD(t,n,e){const r=[];let o,a,l;for(let u=1,d=e.length;u<d;u++)o=e[u-1],a=e[u],l=zC(o,a,t,n),l&&r.push(...l);return r.length===0?null:r}function Ax(t,n,e){return(e.y-t.y)*(n.x-t.x)>(n.y-t.y)*(e.x-t.x)}function C4(t,n,e,r){return Ax(t,e,r)!==Ax(n,e,r)&&Ax(t,n,e)!==Ax(t,n,r)}function GP(t,n){const e=new Map;let r,o,a,l;for(let u=0,d=t.length;u<d;u++)if(r=t[u],qc(r,n)){const h=u2(r);e.has(h)||e.set(h,r)}for(let u=0,d=n.length;u<d;u++)if(r=n[u],qc(r,t)){const h=u2(r);e.has(h)||e.set(h,r)}for(let u=0,d=t.length;u<d;u++){r=t[u],o=t[(u+1)%t.length];for(let h=0,g=n.length;h<g;h++){a=n[h],l=n[(h+1)%n.length];const v=pR(r,o,a,l);if(v!==null){const S=u2(v);e.has(S)||e.set(S,v)}}}return e.size===0?null:pQ([...e.values()])}function u2(t){return`${t.x},${t.y}`}function pQ(t){const n=N.Average(t);return t.sort((e,r)=>N.Angle(n,e)-N.Angle(n,r))}function gQ(t,n){let e,r,o,a;for(let l=0,u=t.length;l<u;l++){e=t[l],r=t[(l+1)%u];for(let d=0,h=n.length;d<h;d++)if(o=n[d],a=n[(d+1)%h],C4(e,r,o,a))return!0}return!1}class gC extends ip{constructor(e){super({...e,isClosed:!1,isFilled:!1});T(this,"start");T(this,"end");T(this,"d");T(this,"u");T(this,"ul");T(this,"_length");const{start:r,end:o}=e;this.start=r,this.end=o,this.d=r.clone().sub(o),this.u=this.d.clone().uni(),this.ul=this.u.len()}get length(){return this._length?this._length:this.d.len()}midPoint(){return this.start.lrp(this.end,.5)}getVertices(){return[this.start,this.end]}nearestPoint(e){const{start:r,end:o,u:a,ul:l}=this;if(l===0)return r;const u=N.Sub(e,r).dpr(a)/l,d=r.x+a.x*u;if(d<Math.min(r.x,o.x))return r.x<o.x?r:o;if(d>Math.max(r.x,o.x))return r.x>o.x?r:o;const h=r.y+a.y*u;return h<Math.min(r.y,o.y)?r.y<o.y?r:o:h>Math.max(r.y,o.y)?r.y>o.y?r:o:new N(d,h)}hitTestLineSegment(e,r,o){return C4(e,r,this.start,this.end)}}class op extends ip{constructor(e){super({isClosed:!1,isFilled:!1,...e});T(this,"points");T(this,"_segments");T(this,"_length");const{points:r}=e;this.points=r}get segments(){if(!this._segments){this._segments=[];const{vertices:e}=this;for(let r=0,o=e.length-1;r<o;r++){const a=e[r],l=e[r+1];this._segments.push(new gC({start:a,end:l}))}this.isClosed&&this._segments.push(new gC({start:e[e.length-1],end:e[0]}))}return this._segments}get length(){return this._length||(this._length=this.segments.reduce((e,r)=>e+r.length,0)),this._length}getVertices(){return this.points}nearestPoint(e){const{segments:r}=this;let o=this.points[0],a=1/0,l,u;for(let d=0;d<r.length;d++)l=r[d].nearestPoint(e),u=l.dist(e),u<a&&(o=l,a=u);return o}hitTestLineSegment(e,r,o){return this.segments.some(a=>a.hitTestLineSegment(e,r,o))}}class Ji extends op{constructor(n){super({...n}),this.isClosed=!0}}class Qc extends Ji{constructor(e){const{x:r=0,y:o=0,width:a,height:l}=e;super({...e,points:[new N(r,o),new N(r+a,o),new N(r+a,o+l),new N(r,o+l)]});T(this,"x");T(this,"y");T(this,"w");T(this,"h");this.x=r,this.y=o,this.w=a,this.h=l}getBounds(){return new Mt(this.x,this.y,this.w,this.h)}}class Pa{constructor(n){T(this,"canSnap",()=>!0);T(this,"canScroll",()=>!1);T(this,"canUnmount",()=>!0);T(this,"canBind",(n,e)=>!0);T(this,"canEdit",()=>!1);T(this,"canResize",()=>!0);T(this,"canEditInReadOnly",()=>!1);T(this,"canCrop",()=>!1);T(this,"hideResizeHandles",()=>!1);T(this,"hideRotateHandle",()=>!1);T(this,"hideSelectionBoundsBg",()=>!1);T(this,"hideSelectionBoundsFg",()=>!1);T(this,"isAspectRatioLocked",()=>!1);T(this,"onBeforeCreate");T(this,"onBeforeUpdate");T(this,"onDragShapesOver");T(this,"onDragShapesOut");T(this,"onDropShapesOver");T(this,"onResizeStart");T(this,"onResize");T(this,"onResizeEnd");T(this,"onTranslateStart");T(this,"onTranslate");T(this,"onTranslateEnd");T(this,"onRotateStart");T(this,"onRotate");T(this,"onRotateEnd");T(this,"onHandleChange");T(this,"onBindingChange");T(this,"onChildrenChange");T(this,"onDoubleClickHandle");T(this,"onDoubleClickEdge");T(this,"onDoubleClick");T(this,"onClick");T(this,"onEditEnd");this.editor=n}providesBackgroundForChildren(n){return!1}getOutlineSegments(n){return[this.editor.getShapeGeometry(n).vertices]}canReceiveNewChildrenOfType(n,e){return!1}canDropShapes(n,e){return!1}expandSelectionOutlinePx(n){return 0}getCanvasSvgDefs(){return[]}}T(Pa,"props"),T(Pa,"migrations"),T(Pa,"type");function mQ(t,n,e={}){const{closed:r=!1,snap:o=1,start:a="outset",end:l="outset",lengthRatio:u=2,style:d="dashed"}=e;let h=0,g=0,v=1,S=0,w=0;switch(d){case"dashed":{v=1,h=Math.min(n*u,t/4);break}case"dotted":{v=100,h=n/v;break}default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return r||(a==="outset"?(t+=h/2,w+=h/2):a==="skip"&&(t-=h,w-=h),l==="outset"?t+=h/2:l==="skip"&&(t-=h)),g=Math.floor(t/h/(2*v)),g-=g%o,g<3&&d==="dashed"?t/n<5?(h=t,g=1,S=0):(h=t*.333,S=t*.333):(g=Math.max(g,3),h=t/g/(2*v),r?(w=h/2,S=(t-g*h)/g):S=(t-g*h)/Math.max(1,g-1)),{strokeDasharray:[h,S].join(" "),strokeDashoffset:w.toString()}}function PD({bounds:t,className:n}){const e=Oe(),r=He("zoom level",()=>e.getZoomLevel(),[e]);return x.jsx("g",{className:n,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:t.sides.map((o,a)=>{const{strokeDasharray:l,strokeDashoffset:u}=mQ(o[0].dist(o[1]),1/r,{style:"dashed",lengthRatio:4});return x.jsx("line",{x1:o[0].x,y1:o[0].y,x2:o[1].x,y2:o[1].y,strokeDasharray:l,strokeDashoffset:u},a)})})}class u1 extends Pa{constructor(){super(...arguments);T(this,"hideSelectionBoundsFg",()=>!0);T(this,"canBind",()=>!1);T(this,"onChildrenChange",e=>{const r=this.editor.getSortedChildIdsForParent(e.id);if(r.length===0){this.editor.getCurrentPageState().focusedGroupId===e.id&&this.editor.popFocusedGroupId(),this.editor.deleteShapes([e.id]);return}else if(r.length===1){this.editor.getCurrentPageState().focusedGroupId===e.id&&this.editor.popFocusedGroupId(),this.editor.reparentShapes(r,e.parentId),this.editor.deleteShapes([e.id]);return}})}getDefaultProps(){return{}}getGeometry(e){const r=this.editor.getSortedChildIdsForParent(e.id);return r.length===0?new Qc({width:1,height:1,isFilled:!1}):new wf({children:r.map(o=>{const a=this.editor.getShape(o),l=this.editor.getShapeGeometry(o),u=this.editor.getShapeLocalTransform(a).applyToPoints(l.vertices);return l.isClosed?new Ji({points:u,isFilled:!0}):new op({points:u})})})}component(e){const r=this.editor.getErasingShapeIds().includes(e.id),{hintingShapeIds:o}=this.editor.getCurrentPageState(),a=o.length>0&&o.some(d=>d!==e.id&&this.editor.isShapeOfType(this.editor.getShape(d),"group")),l=this.editor.getCurrentPageState().focusedGroupId!==e.id;if(!r&&(l||a))return null;const u=this.editor.getShapeGeometry(e).bounds;return x.jsx(Ca,{id:e.id,children:x.jsx(PD,{className:"tl-group",bounds:u})})}indicator(e){const r=this.editor.getShapeGeometry(e).bounds;return x.jsx(PD,{className:"",bounds:r})}}T(u1,"type","group"),T(u1,"props",MY),T(u1,"migrations",AY);const E4=[u1],vQ=new Set(E4.map(t=>t.type));function _4(t){const n=[...E4],e=new Set;for(const r of t){if(vQ.has(r.type))throw new Error(`Shape type "${r.type}" is a core shapes type and cannot be overridden`);if(e.has(r.type))throw new Error(`Shape type "${r.type}" is defined more than once`);n.push(r),e.add(r.type)}return n}function ID(t,n){if(!n)return!1;switch(t.type){case"mixed":return n.type==="mixed";case"shared":return n.type==="shared"&&t.value===n.value;default:throw Nm(t)}}class yQ{constructor(n){T(this,"map");this.map=new Map(n)}get(n){return this.map.get(n)}getAsKnownValue(n){const e=this.get(n);if(e&&e.type!=="mixed")return e.value}get size(){return this.map.size}equals(n){if(this.size!==n.size)return!1;const e=new Set;for(const[r,o]of this){if(!ID(o,n.get(r)))return!1;e.add(r)}for(const[r,o]of n)if(!e.has(r)&&!ID(o,this.get(r)))return!1;return!0}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}[Symbol.iterator](){return this.map[Symbol.iterator]()}}class XP extends yQ{set(n,e){this.map.set(n,e)}applyValue(n,e){const r=this.get(n);if(!r){this.set(n,{type:"shared",value:e});return}switch(r.type){case"mixed":return;case"shared":r.value!==e&&this.set(n,{type:"mixed"});return;default:Nm(r,"type")}}}class gR{constructor(){T(this,"items",new WeakMap)}get(n,e){return this.items.has(n)||this.items.set(n,e(n)),this.items.get(n)}access(n){return this.items.get(n)}set(n,e){this.items.set(n,e)}has(n){return this.items.has(n)}invalidate(n){this.items.delete(n)}bust(){this.items=new WeakMap}}function SQ(t,n,e){return fetch(t).then(function(r){return r.arrayBuffer()}).then(function(r){return new File([r],n,{type:e})})}function bQ(t,n){var o;let e=t;const r=new Set(n);for(;r.has(e);)e=(o=/^.*(\d+)$/.exec(e))!=null&&o[1]?e.replace(/(\d+)(?=\D?)$/,a=>(+a+1).toString()):`${e} 1`;return e}const Ta="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",wQ="a0",T4="A00000000000000000000000000";function k4(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-"a".charCodeAt(0)+2;if(t>="A"&&t<="Z")return"Z".charCodeAt(0)-t.charCodeAt(0)+2;throw new Error("Invalid index key head: "+t)}function P4(t){if(t.length!==k4(t.charAt(0)))throw new Error("invalid integer part of index key: "+t)}function RD(t){if(t===void 0)throw Error("n is undefined")}function MD(t){P4(t);const[n,...e]=t.split("");let r=!0;for(let o=e.length-1;r&&o>=0;o--){const a=Ta.indexOf(e[o])+1;a===Ta.length?e[o]="0":(e[o]=Ta.charAt(a),r=!1)}if(r){if(n==="Z")return"a0";if(n==="z")return;const o=String.fromCharCode(n.charCodeAt(0)+1);return o>"a"?e.push("0"):e.pop(),o+e.join("")}else return n+e.join("")}function xQ(t){P4(t);const[n,...e]=t.split("");let r=!0;for(let o=e.length-1;r&&o>=0;o--){const a=Ta.indexOf(e[o])-1;a===-1?e[o]=Ta.slice(-1):(e[o]=Ta.charAt(a),r=!1)}if(r){if(n==="a")return"Z"+Ta.slice(-1);if(n==="A")return;const o=String.fromCharCode(n.charCodeAt(0)-1);return o<"Z"?e.push(Ta.slice(-1)):e.pop(),o+e.join("")}else return n+e.join("")}function pm(t,n){if(n!==void 0&&t>=n)throw new Error(t+" >= "+n);if(t.slice(-1)==="0"||n&&n.slice(-1)==="0")throw new Error("trailing zero");if(n){let o=0;for(;(t.charAt(o)||"0")===n.charAt(o);)o++;if(o>0)return n.slice(0,o)+pm(t.slice(o),n.slice(o))}const e=t?Ta.indexOf(t.charAt(0)):0,r=n!==void 0?Ta.indexOf(n.charAt(0)):Ta.length;if(r-e>1){const o=Math.round(.5*(e+r));return Ta.charAt(o)}else return n&&n.length>1?n.slice(0,1):Ta.charAt(e)+pm(t.slice(1),void 0)}function MS(t){const n=k4(t.charAt(0));if(n>t.length)throw new Error("invalid index: "+t);return t.slice(0,n)}function AD(t){if(t===T4)throw new Error("invalid index: "+t);const n=MS(t);if(t.slice(n.length).slice(-1)==="0")throw new Error("invalid index: "+t)}function rm(t,n){if(t!==void 0&&AD(t),n!==void 0&&AD(n),t!==void 0&&n!==void 0&&t>=n)throw new Error(t+" >= "+n);if(t===void 0&&n===void 0)return wQ;if(t===void 0){if(n===void 0)throw Error("b is undefined");const u=MS(n),d=n.slice(u.length);if(u===T4)return u+pm("",d);if(u<n)return u;const h=xQ(u);return RD(h),h}if(n===void 0){const u=MS(t),d=t.slice(u.length),h=MD(u);return h===void 0?u+pm(d,void 0):h}const e=MS(t),r=t.slice(e.length),o=MS(n),a=n.slice(o.length);if(e===o)return e+pm(r,a);const l=MD(e);return RD(l),l<n?l:e+pm(r,void 0)}function Pf(t,n,e){if(e===0)return[];if(e===1)return[rm(t,n)];if(n===void 0){let a=rm(t,n);const l=[a];for(let u=0;u<e-1;u++)a=rm(a,n),l.push(a);return l}if(t===void 0){let a=rm(t,n);const l=[a];for(let u=0;u<e-1;u++)a=rm(t,a),l.push(a);return l.reverse(),l}const r=Math.floor(e/2),o=rm(t,n);return[...Pf(t,o,r),o,...Pf(o,n,e-r-1)]}function Am(t,n,e){return Pf(t,n,e)}function d2(t,n){return Pf(t,void 0,n)}function LS(t,n){return Pf(t,n,1)[0]}function Zu(t){return Pf(t,void 0,1)[0]}function CQ(t){return Pf(void 0,t,1)[0]}function I4(t,n="a1"){return[n,...Pf(n,void 0,t)]}function qo(t,n){return t.index<n.index?-1:t.index>n.index?1:0}function $x(t,n,e){if(e.length===0)return[];const r=new Map;for(const a of Bt(e.map(l=>t.getShape(l)))){const{parentId:l}=a;r.has(l)||r.set(l,{children:Bt(t.getSortedChildIdsForParent(l).map(u=>t.getShape(u))),moving:new Set}),r.get(l).moving.add(a)}const o=[];switch(n){case"toBack":{r.forEach(({moving:a,children:l})=>EQ(a,l,o));break}case"toFront":{r.forEach(({moving:a,children:l})=>_Q(a,l,o));break}case"forward":{r.forEach(({moving:a,children:l})=>TQ(a,l,o));break}case"backward":{r.forEach(({moving:a,children:l})=>kQ(a,l,o));break}}return o}function EQ(t,n,e){const r=n.length;if(t.size===r)return;let o,a;for(let l=0;l<r;l++){const u=n[l];if(t.has(u))o=u.index,t.delete(u);else{a=u.index;break}}if(t.size!==0){const l=Am(o,a,t.size);e.push(...Array.from(t.values()).sort(qo).map((u,d)=>({...u,index:l[d]})))}}function _Q(t,n,e){const r=n.length;if(t.size===r)return;let o,a;for(let l=r-1;l>-1;l--){const u=n[l];if(t.has(u))a=u.index,t.delete(u);else{o=u.index;break}}if(t.size!==0){const l=Am(o,a,t.size);e.push(...Array.from(t.values()).sort(qo).map((u,d)=>({...u,index:l[d]})))}}function TQ(t,n,e){var a;const r=n.length;if(t.size===r)return;let o={name:"skipping"};for(let l=0;l<r;l++){const u=t.has(n[l]);switch(o.name){case"skipping":{if(!u)continue;o={name:"selecting",selectIndex:l};break}case"selecting":{if(u)continue;const{selectIndex:d}=o;Am(n[l].index,(a=n[l+1])==null?void 0:a.index,l-d).forEach((h,g)=>e.push({...n[d+g],index:h})),o={name:"skipping"};break}}}}function kQ(t,n,e){var a;const r=n.length;if(t.size===r)return;let o={name:"skipping"};for(let l=r-1;l>-1;l--){const u=t.has(n[l]);switch(o.name){case"skipping":{if(!u)continue;o={name:"selecting",selectIndex:l};break}case"selecting":{if(u)continue;Am((a=n[l-1])==null?void 0:a.index,n[l].index,o.selectIndex-l).forEach((d,h)=>{e.push({...n[l+h+1],index:d})}),o={name:"skipping"};break}}}}function R4({editor:t}){const n=t.getSelectedShapes(),e=t.getSelectionRotation(),r=t.getSelectionRotatedPageBounds(),{inputs:{originPagePoint:o}}=t;if(!r)return null;const a=r.center.clone().rotWith(r.point,e);return{selectionPageCenter:a,initialCursorAngle:a.angle(o),initialSelectionRotation:e,shapeSnapshots:n.map(l=>({shape:Tf(l),initialPagePoint:t.getShapePageTransform(l.id).point()}))}}function d1({delta:t,editor:n,snapshot:e,stage:r}){const{selectionPageCenter:o,shapeSnapshots:a}=e;n.updateShapes(a.map(({shape:u,initialPagePoint:d})=>{const h=il(u.parentId)?n.getShapePageTransform(u.parentId):yt.Identity(),g=N.RotWith(d,o,t),v=yt.applyToPoint(yt.Inverse(h),g),S=Ql(u.rotation+t);return{id:u.id,type:u.type,x:v.x,y:v.y,rotation:S}}));const l=[];a.forEach(({shape:u})=>{var v,S,w;const d=n.getShape(u.id);if(!d)return;const h=n.getShapeUtil(u);if(r==="start"||r==="one-off"){const k=(v=h.onRotateStart)==null?void 0:v.call(h,u);k&&l.push(k)}const g=(S=h.onRotate)==null?void 0:S.call(h,u,d);if(g&&l.push(g),r==="end"||r==="one-off"){const k=(w=h.onRotateEnd)==null?void 0:w.call(h,u,d);k&&l.push(k)}}),l.length>0&&n.updateShapes(l)}const PQ=t=>{const{store:n}=t,e=n.query.filterHistory("shape"),r=n.query.records("shape",()=>({type:{eq:"arrow"}}));function o(){const a=r.get(),l={};for(const u of a){const{start:d,end:h}=u.props;if(d.type==="binding"){const g=l[d.boundShapeId];g?g.push({arrowId:u.id,handleId:"start"}):l[d.boundShapeId]=[{arrowId:u.id,handleId:"start"}]}if(h.type==="binding"){const g=l[h.boundShapeId];g?g.push({arrowId:u.id,handleId:"end"}):l[h.boundShapeId]=[{arrowId:u.id,handleId:"end"}]}}return l}return Qe("arrowBindingsIndex",(a,l)=>{if(xm(a))return o();const u=a,d=e.getDiffSince(l);if(d===ka)return o();let h;function g(w){h||(h={...u}),h[w]?h[w]===u[w]&&(h[w]=[...h[w]]):h[w]=[]}function v(w,k,C){g(w),h[w]=h[w].filter(E=>E.arrowId!==k||E.handleId!==C),h[w].length===0&&delete h[w]}function S(w,k,C){g(w),h[w].push({arrowId:k,handleId:C})}for(const w of d){for(const k of Object.values(w.added))if(t.isShapeOfType(k,"arrow")){const{start:C,end:E}=k.props;C.type==="binding"&&S(C.boundShapeId,k.id,"start"),E.type==="binding"&&S(E.boundShapeId,k.id,"end")}for(const[k,C]of Object.values(w.updated))if(!(!t.isShapeOfType(k,"arrow")||!t.isShapeOfType(C,"arrow")))for(const E of["start","end"]){const R=k.props[E],L=C.props[E];R.type==="binding"&&L.type==="point"?v(R.boundShapeId,k.id,E):R.type==="point"&&L.type==="binding"?S(L.boundShapeId,C.id,E):R.type==="binding"&&L.type==="binding"&&R.boundShapeId!==L.boundShapeId&&(v(R.boundShapeId,k.id,E),S(L.boundShapeId,C.id,E))}for(const k of Object.values(w.removed))if(t.isShapeOfType(k,"arrow")){const{start:C,end:E}=k.props;C.type==="binding"&&v(C.boundShapeId,k.id,"start"),E.type==="binding"&&v(E.boundShapeId,k.id,"end")}}return h??u})},IQ=t=>{const n=t.query.ids("shape");function e(){const r={},o=n.get(),a=Array(o.size);return o.forEach(l=>a.push(t.get(l))),a.sort(qo),a.forEach(l=>{r[l.parentId]||(r[l.parentId]=[]),r[l.parentId].push(l.id)}),r}return Qe("parentsToChildrenWithIndexes",(r,o)=>{if(xm(r))return e();const a=t.history.getDiffSince(o);if(a===ka)return e();if(a.length===0)return r;let l=null;const u=g=>{l||(l={...r}),l[g]?l[g]===r[g]&&(l[g]=[...l[g]]):l[g]=[]},d=new Set;let h;for(let g=0,v=a.length;g<v;g++){h=a[g];for(const S of Object.values(h.added))Gh(S)&&(u(S.parentId),l[S.parentId].push(S.id),d.add(l[S.parentId]));for(const[S,w]of Object.values(h.updated))if(Gh(w)&&Gh(S)){if(S.parentId!==w.parentId)u(S.parentId),u(w.parentId),l[S.parentId].splice(l[S.parentId].indexOf(w.id),1),l[w.parentId].push(w.id),d.add(l[w.parentId]);else if(S.index!==w.index){u(w.parentId);const k=l[w.parentId].indexOf(w.id);l[w.parentId][k]=w.id,d.add(l[w.parentId])}}for(const S of Object.values(h.removed))Gh(S)&&(u(S.parentId),l[S.parentId].splice(l[S.parentId].indexOf(S.id),1))}for(const g of d){const v=Bt(g.map(S=>t.get(S)));v.sort(qo),g.splice(0,g.length,...v.map(S=>S.id))}return l??r})},f2=(t,n,e)=>{for(;!Js(e.parentId);){const r=t.get(e.parentId);if(!r)return!1;e=r}return e.parentId===n},RQ=(t,n)=>{const e=t.query.ids("shape");let r=null;function o(){const a=n();return r=a,new Set([...e.get()].filter(l=>f2(t,a,t.get(l))))}return Qe("_shapeIdsInCurrentPage",(a,l)=>{if(xm(a))return o();const u=n();if(u!==r)return o();const d=t.history.getDiffSince(l);if(d===ka)return o();const h=new s1(a);for(const v of d){for(const S of Object.values(v.added))Gh(S)&&f2(t,u,S)&&h.add(S.id);for(const[S,w]of Object.values(v.updated))Gh(w)&&(f2(t,u,w)?h.add(w.id):h.remove(w.id));for(const S of Object.keys(v.removed))il(S)&&h.remove(S)}const g=h.get();return g?IS(g.value,g.diff):a})},MQ=40;class AQ{constructor(n){T(this,"_clickId","");T(this,"_clickTimeout");T(this,"_clickScreenPoint");T(this,"_previousScreenPoint");T(this,"_getClickTimeout",(n,e=dr())=>{this._clickId=e,clearTimeout(this._clickTimeout),this._clickTimeout=setTimeout(()=>{if(this._clickState===n&&this._clickId===e){switch(this._clickState){case"pendingTriple":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"double_click",phase:"settle"});break}case"pendingQuadruple":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"triple_click",phase:"settle"});break}case"pendingOverflow":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"settle"});break}}this._clickState="idle"}},n==="idle"||n==="pendingDouble"?PW:IW)});T(this,"_clickState","idle");T(this,"lastPointerInfo",{});T(this,"transformPointerDownEvent",n=>{if(!this._clickState)return n;switch(this._clickScreenPoint=N.From(n.point),this._previousScreenPoint&&this._previousScreenPoint.dist(this._clickScreenPoint)>MQ&&(this._clickState="idle"),this._previousScreenPoint=this._clickScreenPoint,this.lastPointerInfo=n,this._clickState){case"idle":return this._clickState="pendingDouble",this._clickTimeout=this._getClickTimeout(this._clickState),n;case"pendingDouble":return this._clickState="pendingTriple",this._clickTimeout=this._getClickTimeout(this._clickState),{...n,type:"click",name:"double_click",phase:"down"};case"pendingTriple":return this._clickState="pendingQuadruple",this._clickTimeout=this._getClickTimeout(this._clickState),{...n,type:"click",name:"triple_click",phase:"down"};case"pendingQuadruple":return this._clickState="pendingOverflow",this._clickTimeout=this._getClickTimeout(this._clickState),{...n,type:"click",name:"quadruple_click",phase:"down"};case"pendingOverflow":return this._clickState="overflow",this._clickTimeout=this._getClickTimeout(this._clickState),n;default:return this._clickTimeout=this._getClickTimeout(this._clickState),n}});T(this,"transformPointerUpEvent",n=>{if(!this._clickState)return n;switch(this._clickScreenPoint=N.From(n.point),this._clickState){case"pendingTriple":return{...this.lastPointerInfo,type:"click",name:"double_click",phase:"up"};case"pendingQuadruple":return{...this.lastPointerInfo,type:"click",name:"triple_click",phase:"up"};case"pendingOverflow":return{...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"up"};default:return n}});T(this,"cancelDoubleClickTimeout",()=>{this._clickTimeout=clearTimeout(this._clickTimeout),this._clickState="idle"});T(this,"handleMove",()=>{this._clickState!=="idle"&&this._clickScreenPoint&&this._clickScreenPoint.dist(this.editor.inputs.currentScreenPoint)>(this.editor.getInstanceState().isCoarsePointer?KP:WS)&&this.cancelDoubleClickTimeout()});this.editor=n}get clickState(){return this._clickState}}class $Q{constructor(n){T(this,"isSafari");T(this,"isIos");T(this,"isChromeForIos");T(this,"isFirefox");T(this,"isAndroid");this.editor=n,typeof window<"u"&&"navigator"in window?(this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),this.isChromeForIos=/crios.*safari/i.test(navigator.userAgent),this.isFirefox=/firefox/i.test(navigator.userAgent),this.isAndroid=/android/i.test(navigator.userAgent)):(this.isSafari=!1,this.isIos=!1,this.isChromeForIos=!1,this.isFirefox=!1,this.isAndroid=!1)}}function Vh(t){if(t){let n=$D;for(;t.length;)n=n.push(t.pop());return n}return $D}class OQ{constructor(){T(this,"length",0);T(this,"head",null);T(this,"tail",this)}push(n){return new mR(n,this)}toArray(){return rd}[Symbol.iterator](){return{next(){return{value:void 0,done:!0}}}}}const $D=new OQ;class mR{constructor(n,e){T(this,"length");this.head=n,this.tail=e,this.length=e.length+1}push(n){return new mR(n,this)}toArray(){return Array.from(this)}[Symbol.iterator](){let n=this;return{next(){if(n.length){const e=n.head;return n=n.tail,{value:e,done:!1}}else return{value:void 0,done:!0}}}}}class DQ{constructor(n,e){T(this,"_undos",Es("HistoryManager.undos",Vh()));T(this,"_redos",Es("HistoryManager.redos",Vh()));T(this,"_batchDepth",0);T(this,"onBatchComplete",()=>{});T(this,"_commands",{});T(this,"createCommand",(n,e,r)=>{if(this._commands[n])throw new Error(`Duplicate command: ${n}`);this._commands[n]=r;const o=(...a)=>{if(!this._batchDepth)return this.batch(()=>o(...a)),this.ctx;const l=e(...a);if(!l)return this.ctx;const{data:u,ephemeral:d,squashing:h,preservesRedoStack:g}=l;if(this.ignoringUpdates((v,S)=>(r.do(u),{undos:v,redos:S})),!d){const v=this._undos.get().head;h&&v&&v.type==="command"&&v.name===n&&v.preservesRedoStack===g?this._undos.update(S=>S.tail.push({...v,id:dr(),data:Pm(r.squash(v.data,u))})):this._undos.update(S=>S.push({type:"command",name:n,data:Pm(u),id:dr(),preservesRedoStack:g})),l.preservesRedoStack||this._redos.set(Vh()),this.ctx.emit("change-history",{reason:"push"})}return this.ctx};return o});T(this,"batch",n=>{try{this._batchDepth++,this._batchDepth===1?Vl(()=>{var r,o;const e=(r=this._undos.get().head)==null?void 0:r.id;n(),e!==((o=this._undos.get().head)==null?void 0:o.id)&&this.onBatchComplete()}):n()}catch(e){throw this.annotateError(e),e}finally{this._batchDepth--}return this});T(this,"ignoringUpdates",n=>{let e=this._undos.get(),r=this._redos.get();this._undos.set(Vh()),this._redos.set(Vh());try{({undos:e,redos:r}=Vl(()=>n(e,r)))}finally{this._undos.set(e),this._redos.set(r)}});T(this,"_undo",({pushToRedoStack:n,toMark:e=void 0})=>(this.ignoringUpdates((r,o)=>{var a;if(r.length===0)return{undos:r,redos:o};for(;((a=r.head)==null?void 0:a.type)==="STOP";){const l=r.head;if(r=r.tail,n&&(o=o.push(l)),l.id===e)return this.ctx.emit("change-history",n?{reason:"undo"}:{reason:"bail",markId:e}),{undos:r,redos:o}}if(r.length===0)return this.ctx.emit("change-history",n?{reason:"undo"}:{reason:"bail",markId:e}),{undos:r,redos:o};for(;r.head;){const l=r.head;if(r=r.tail,n&&(o=o.push(l)),l.type==="STOP"){if(l.onUndo&&(!e||l.id===e))return this.ctx.emit("change-history",n?{reason:"undo"}:{reason:"bail",markId:e}),{undos:r,redos:o}}else this._commands[l.name].undo(l.data)}return this.ctx.emit("change-history",n?{reason:"undo"}:{reason:"bail",markId:e}),{undos:r,redos:o}}),this));T(this,"undo",()=>(this._undo({pushToRedoStack:!0}),this));T(this,"redo",()=>(this.ignoringUpdates((n,e)=>{var r;if(e.length===0)return{undos:n,redos:e};for(;((r=e.head)==null?void 0:r.type)==="STOP";)n=n.push(e.head),e=e.tail;if(e.length===0)return this.ctx.emit("change-history",{reason:"redo"}),{undos:n,redos:e};for(;e.head;){const o=e.head;if(n=n.push(e.head),e=e.tail,o.type==="STOP"){if(o.onRedo)break}else{const a=this._commands[o.name];a.redo?a.redo(o.data):a.do(o.data)}}return this.ctx.emit("change-history",{reason:"redo"}),{undos:n,redos:e}}),this));T(this,"bail",()=>(this._undo({pushToRedoStack:!1}),this));T(this,"bailToMark",n=>(this._undo({pushToRedoStack:!1,toMark:n}),this));T(this,"mark",(n=dr(),e=!0,r=!0)=>{const o=this._undos.get().head;return o&&o.type==="STOP"&&o.id===n&&o.onUndo===e&&o.onRedo===r?o.id:(this._undos.update(a=>a.push({type:"STOP",id:n,onUndo:e,onRedo:r})),this.ctx.emit("mark-history",{id:n}),n)});this.ctx=n,this.annotateError=e}getNumUndos(){return this._undos.get().length}getNumRedos(){return this._redos.get().length}clear(){this._undos.set(Vh()),this._redos.set(Vh())}}class LQ{constructor(n){T(this,"scribbleItems",new Map);T(this,"state","paused");T(this,"addScribble",(n,e=dr())=>{const r={id:e,scribble:{id:e,size:20,color:"accent",opacity:.8,delay:0,points:[],shrink:.1,taper:!0,...n,state:"starting"},timeoutMs:0,delayRemaining:n.delay??0,prev:null,next:null};return this.scribbleItems.set(e,r),this.state==="paused"&&this.resume(),r});T(this,"stop",n=>{const e=this.scribbleItems.get(n);if(!e)throw Error(`Scribble with id ${n} not found`);return e.delayRemaining=Math.min(e.delayRemaining,200),e.scribble.state="stopping",e});T(this,"addPoint",(n,e,r)=>{const o=this.scribbleItems.get(n);if(!o)throw Error(`Scribble with id ${n} not found`);const{prev:a}=o,l={x:e,y:r,z:.5};return(!a||N.Dist(a,l)>=1)&&(o.next=l),o});T(this,"tick",n=>{this.editor.batch(()=>{this.scribbleItems.forEach(e=>{if(e.scribble.state==="starting"){const{next:d,prev:h}=e;d&&d!==h&&(e.prev=d,e.scribble.points.push(d)),e.scribble.points.length>8&&(e.scribble.state="active");return}e.delayRemaining>0&&(e.delayRemaining=Math.max(0,e.delayRemaining-n)),e.timeoutMs+=n,e.timeoutMs>=16&&(e.timeoutMs=0);const{delayRemaining:r,timeoutMs:o,prev:a,next:l,scribble:u}=e;switch(u.state){case"active":{l&&l!==a?(e.prev=l,u.points.push(l),r===0&&u.points.length>8&&u.points.shift()):o===0&&(u.points.length>1?u.points.shift():e.delayRemaining=u.delay);break}case"stopping":{if(e.delayRemaining===0&&o===0){if(u.points.length===1){this.scribbleItems.delete(e.id);return}u.shrink&&(u.size=Math.max(1,u.size*(1-u.shrink))),u.points.shift()}break}}}),this.editor.updateInstanceState({scribbles:Array.from(this.scribbleItems.values()).map(({scribble:e})=>({...e,points:[...e.points]})).slice(-5)}),this.scribbleItems.size===0&&this.pause()})});this.editor=n}resume(){this.state="running",this.editor.addListener("tick",this.tick)}pause(){this.editor.removeListener("tick",this.tick),this.state="paused"}reset(){this.editor.updateInstanceState({scribbles:[]}),this.scribbleItems.clear(),this.pause()}}class jQ{constructor(n){T(this,"_beforeCreateHandlers",{});T(this,"_afterCreateHandlers",{});T(this,"_beforeChangeHandlers",{});T(this,"_afterChangeHandlers",{});T(this,"_beforeDeleteHandlers",{});T(this,"_afterDeleteHandlers",{});T(this,"_batchCompleteHandlers",[]);this.editor=n,n.store.onBeforeCreate=(r,o)=>{const a=this._beforeCreateHandlers[r.typeName];if(a){let l=r;for(const u of a)l=u(l,o);return l}return r},n.store.onAfterCreate=(r,o)=>{const a=this._afterCreateHandlers[r.typeName];if(a)for(const l of a)l(r,o)},n.store.onBeforeChange=(r,o,a)=>{const l=this._beforeChangeHandlers[o.typeName];if(l){let u=o;for(const d of l)u=d(r,u,a);return u}return o};let e=0;n.store.onAfterChange=(r,o,a)=>{if(e++,e>1e3)console.error("[CleanupManager.onAfterChange] Maximum update depth exceeded, bailing out.");else{const l=this._afterChangeHandlers[o.typeName];if(l)for(const u of l)u(r,o,a)}e--},n.store.onBeforeDelete=(r,o)=>{const a=this._beforeDeleteHandlers[r.typeName];if(a){for(const l of a)if(l(r,o)===!1)return!1}},n.store.onAfterDelete=(r,o)=>{const a=this._afterDeleteHandlers[r.typeName];if(a)for(const l of a)l(r,o)},n.history.onBatchComplete=()=>{this._batchCompleteHandlers.forEach(r=>r())}}registerBeforeCreateHandler(n,e){return this._beforeCreateHandlers[n]||(this._beforeCreateHandlers[n]=[]),this._beforeCreateHandlers[n].push(e),()=>Kh(this._beforeCreateHandlers[n],e)}registerAfterCreateHandler(n,e){return this._afterCreateHandlers[n]||(this._afterCreateHandlers[n]=[]),this._afterCreateHandlers[n].push(e),()=>Kh(this._afterCreateHandlers[n],e)}registerBeforeChangeHandler(n,e){return this._beforeChangeHandlers[n]||(this._beforeChangeHandlers[n]=[]),this._beforeChangeHandlers[n].push(e),()=>Kh(this._beforeChangeHandlers[n],e)}registerAfterChangeHandler(n,e){return this._afterChangeHandlers[n]||(this._afterChangeHandlers[n]=[]),this._afterChangeHandlers[n].push(e),()=>Kh(this._afterChangeHandlers[n],e)}registerBeforeDeleteHandler(n,e){return this._beforeDeleteHandlers[n]||(this._beforeDeleteHandlers[n]=[]),this._beforeDeleteHandlers[n].push(e),()=>Kh(this._beforeDeleteHandlers[n],e)}registerAfterDeleteHandler(n,e){return this._afterDeleteHandlers[n]||(this._afterDeleteHandlers[n]=[]),this._afterDeleteHandlers[n].push(e),()=>Kh(this._afterDeleteHandlers[n],e)}registerBatchCompleteHandler(n){return this._batchCompleteHandlers.push(n),()=>Kh(this._batchCompleteHandlers,n)}}function Kh(t,n){const e=t.indexOf(n);e>=0&&t.splice(e,1)}var NQ=Object.defineProperty,zQ=Object.getOwnPropertyDescriptor,sp=(t,n,e,r)=>{for(var o=r>1?void 0:r?zQ(n,e):n,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=(r?l(n,e,o):l(o))||o);return r&&o&&NQ(n,e,o),o};const zt=t=>Math.round(t*10**8)/10**8;function Qu(t,n,e,r,o){const a=t.filter(u=>(r==="forward"?u.startNode.id===n:u.endNode.id===n)&&zt(u.length)===zt(e)&&Hl(u.breadthIntersection[0],u.breadthIntersection[1],o[0],o[1]));if(a.length===0)return[];const l=new Set;return a.forEach(u=>{const d=r==="forward"?u.endNode.id:u.startNode.id;if(!l.has(d)){l.add(d);const h=Qu(t,d,e,r,Hl(u.breadthIntersection[0],u.breadthIntersection[1],o[0],o[1]));a.push(...h)}}),a}function FQ(t){t.sort((n,e)=>e.gaps.length-n.gaps.length);for(let n=t.length-1;n>0;n--){const e=t[n];for(let r=n-1;r>=0;r--){const o=t[r];if(o.direction===e.direction&&e.gaps.every(a=>o.gaps.some(l=>zt(a.startEdge[0].x)===zt(l.startEdge[0].x)&&zt(a.startEdge[0].y)===zt(l.startEdge[0].y)&&zt(a.startEdge[1].x)===zt(l.startEdge[1].x)&&zt(a.startEdge[1].y)===zt(l.startEdge[1].y))&&o.gaps.some(l=>zt(a.endEdge[0].x)===zt(l.endEdge[0].x)&&zt(a.endEdge[0].y)===zt(l.endEdge[0].y)&&zt(a.endEdge[1].x)===zt(l.endEdge[1].x)&&zt(a.endEdge[1].y)===zt(l.endEdge[1].y)))){t.splice(n,1);break}}}}class Lf{constructor(n){T(this,"_snapLines",Es("snapLines",void 0));this.editor=n}getLines(){return this._snapLines.get()??rd}clear(){this.getLines().length&&this._snapLines.set(void 0)}setLines(n){this._snapLines.set(n)}getSnapPointsCache(){const{editor:n}=this;return n.store.createComputedCache("snapPoints",e=>{const r=n.getShapePageTransform(e.id);return r?this.editor.getShapeGeometry(e).snapPoints.map((a,l)=>{const{x:u,y:d}=yt.applyToPoint(r,a);return{x:u,y:d,id:`${e.id}:${l}`}}):void 0})}getSnapThreshold(){return 8/this.editor.getZoomLevel()}getSnappableShapes(){const{editor:n}=this,e=n.getRenderingBounds(),r=n.getSelectedShapeIds(),o=[],a=l=>{const u=n.getSortedChildIdsForParent(l);for(const d of u){if(r.includes(d))continue;const h=n.getShape(d);if(!h||!n.getShapeUtil(h).canSnap(h))continue;const v=n.getShapePageBounds(d);if(v&&e.includes(v)){if(n.isShapeOfType(h,"group")){a(d);continue}o.push({id:d,pageBounds:v,isClosed:n.getShapeGeometry(h).isClosed})}}};return a(this.getCurrentCommonAncestor()??n.getCurrentPageId()),o}getCurrentCommonAncestor(){return this.editor.findCommonAncestor(this.editor.getSelectedShapes())}getSnappablePoints(){const n=this.getSnapPointsCache(),e=this.getSnappableShapes(),r=[];return e.forEach(o=>{const a=n.get(o.id);a&&r.push(...a)}),r}getVisibleGaps(){const n=[],e=[];let r,o;const a=this.getSnappableShapes().sort((u,d)=>u.pageBounds.minX-d.pageBounds.minX);for(let u=0;u<a.length;u++){r=a[u];for(let d=u+1;d<a.length;d++)o=a[d],r.pageBounds.maxX<o.pageBounds.minX&&hS(r.pageBounds.minY,r.pageBounds.maxY,o.pageBounds.minY,o.pageBounds.maxY)&&n.push({startNode:r,endNode:o,startEdge:[new N(r.pageBounds.maxX,r.pageBounds.minY),new N(r.pageBounds.maxX,r.pageBounds.maxY)],endEdge:[new N(o.pageBounds.minX,o.pageBounds.minY),new N(o.pageBounds.minX,o.pageBounds.maxY)],length:o.pageBounds.minX-r.pageBounds.maxX,breadthIntersection:Hl(r.pageBounds.minY,r.pageBounds.maxY,o.pageBounds.minY,o.pageBounds.maxY)})}const l=a.sort((u,d)=>u.pageBounds.minY-d.pageBounds.minY);for(let u=0;u<l.length;u++){r=l[u];for(let d=u+1;d<l.length;d++)o=l[d],r.pageBounds.maxY<o.pageBounds.minY&&hS(r.pageBounds.minX,r.pageBounds.maxX,o.pageBounds.minX,o.pageBounds.maxX)&&e.push({startNode:r,endNode:o,startEdge:[new N(r.pageBounds.minX,r.pageBounds.maxY),new N(r.pageBounds.maxX,r.pageBounds.maxY)],endEdge:[new N(o.pageBounds.minX,o.pageBounds.minY),new N(o.pageBounds.maxX,o.pageBounds.minY)],length:o.pageBounds.minY-r.pageBounds.maxY,breadthIntersection:Hl(r.pageBounds.minX,r.pageBounds.maxX,o.pageBounds.minX,o.pageBounds.maxX)})}return{horizontal:n,vertical:e}}snapTranslate({lockedAxis:n,initialSelectionPageBounds:e,initialSelectionSnapPoints:r,dragDelta:o}){var E,R;const a=this.getSnapThreshold(),l=this.getSnappablePoints(),u=e.clone().translate(o),d=r.map(({x:L,y:A},O)=>({id:"selection:"+O,x:L+o.x,y:A+o.y})),h=l,g=[],v=[],S=new N(a,a);this.collectPointSnaps({minOffset:S,nearestSnapsX:g,nearestSnapsY:v,otherNodeSnapPoints:h,selectionSnapPoints:d}),this.collectGapSnaps({selectionPageBounds:u,nearestSnapsX:g,nearestSnapsY:v,minOffset:S});const w=new N(n==="x"?0:((E=g[0])==null?void 0:E.nudge)??0,n==="y"?0:((R=v[0])==null?void 0:R.nudge)??0);S.x=0,S.y=0,g.length=0,v.length=0,d.forEach(L=>{L.x+=w.x,L.y+=w.y}),u.translate(w),this.collectPointSnaps({minOffset:S,nearestSnapsX:g,nearestSnapsY:v,otherNodeSnapPoints:h,selectionSnapPoints:d}),this.collectGapSnaps({selectionPageBounds:u,nearestSnapsX:g,nearestSnapsY:v,minOffset:S});const k=this.getPointSnapLines({nearestSnapsX:g,nearestSnapsY:v}),C=this.getGapSnapLines({selectionPageBounds:u,nearestSnapsX:g,nearestSnapsY:v});return this._snapLines.set([...C,...k]),{nudge:w}}getOutlinesInPageSpace(){return this.getSnappableShapes().map(({id:n,isClosed:e})=>{const r=es(this.editor.getShapeGeometry(n).vertices);e&&r.push(r[0]);const o=this.editor.getShapePageTransform(n);if(!o)throw Error("No page transform");return yt.applyToPoints(o,r)})}getSnappingHandleDelta({handlePoint:n,additionalSegments:e}){const r=this.getSnapThreshold(),o=this.getOutlinesInPageSpace();let a=r,l=null,u,d,h,g;const v=[...o,...e];for(const S of v)for(let w=0;w<S.length-1;w++)u=S[w],d=S[w+1],h=N.NearestPointOnLineSegment(u,d,n),g=N.Dist(n,h),!isNaN(g)&&g<a&&(a=g,l=h);return l?(this._snapLines.set([{id:dr(),type:"points",points:[l]}]),N.Sub(l,n)):null}snapResize({initialSelectionPageBounds:n,dragDelta:e,handle:r,isAspectRatioLocked:o,isResizingFromCenter:a}){var U,Y;const l=this.getSnapThreshold(),{box:u,scaleX:d,scaleY:h}=Mt.Resize(n,r,a?e.x*2:e.x,a?e.y*2:e.y,o);let g=r;d<0&&(g=CX(g)),h<0&&(g=xX(g)),a&&(u.center=n.center);const v=g==="top"||g==="bottom",S=g==="left"||g==="right",w=OD(g,u),k=this.getSnappablePoints(),C=[],E=[],R=new N(l,l);this.collectPointSnaps({minOffset:R,nearestSnapsX:C,nearestSnapsY:E,otherNodeSnapPoints:k,selectionSnapPoints:w});const L=new N(v?0:((U=C[0])==null?void 0:U.nudge)??0,S?0:((Y=E[0])==null?void 0:Y.nudge)??0);if(o&&EX(g)&&L.len()!==0){const q=C.length&&E.length?Math.abs(L.x)<Math.abs(L.y)?"x":"y":C.length?"x":"y",X=n.aspectRatio;q==="x"?(E.length=0,L.y=L.x/X,(g==="bottom_left"||g==="top_right")&&(L.y=-L.y)):(C.length=0,L.x=L.y*X,(g==="bottom_left"||g==="top_right")&&(L.x=-L.x))}const A=N.Add(e,L),{box:O}=Mt.Resize(n,r,a?A.x*2:A.x,a?A.y*2:A.y,o);a&&(O.center=n.center);const D=OD("any",O);C.length=0,E.length=0,R.x=0,R.y=0,this.collectPointSnaps({minOffset:R,nearestSnapsX:C,nearestSnapsY:E,otherNodeSnapPoints:k,selectionSnapPoints:D});const z=this.getPointSnapLines({nearestSnapsX:C,nearestSnapsY:E});return this._snapLines.set([...z]),{nudge:L}}collectPointSnaps({selectionSnapPoints:n,otherNodeSnapPoints:e,minOffset:r,nearestSnapsX:o,nearestSnapsY:a}){for(const l of n)for(const u of e){const d=N.Sub(l,u),h=Math.abs(d.x),g=Math.abs(d.y);zt(h)<=zt(r.x)&&(zt(h)<zt(r.x)&&(o.length=0),o.push({type:"points",points:{thisPoint:l,otherPoint:u},nudge:u.x-l.x}),r.x=h),zt(g)<=zt(r.y)&&(zt(g)<zt(r.y)&&(a.length=0),a.push({type:"points",points:{thisPoint:l,otherPoint:u},nudge:u.y-l.y}),r.y=g)}}collectGapSnaps({selectionPageBounds:n,minOffset:e,nearestSnapsX:r,nearestSnapsY:o}){const{horizontal:a,vertical:l}=this.getVisibleGaps();for(const u of a){if(!hS(u.breadthIntersection[0],u.breadthIntersection[1],n.minY,n.maxY))continue;const h=u.startEdge[0].x+u.length/2-n.center.x;if(u.length>n.width&&zt(Math.abs(h))<=zt(e.x)){zt(Math.abs(h))<zt(e.x)&&(r.length=0),e.x=Math.abs(h);const R={type:"gap_center",gap:u,nudge:h},L=r.find(({type:O})=>O==="gap_center"),A=L&&Hl(u.breadthIntersection[0],u.breadthIntersection[1],L.gap.breadthIntersection[0],L.gap.breadthIntersection[1]);L&&L.gap.length>u.length&&A?r[r.indexOf(L)]=R:(!L||!A)&&r.push(R)}const v=u.startNode.pageBounds.minX-u.length,S=n.maxX,w=v-S;zt(Math.abs(w))<=zt(e.x)&&(zt(Math.abs(w))<zt(e.x)&&(r.length=0),e.x=Math.abs(w),r.push({type:"gap_duplicate",gap:u,protrusionDirection:"left",nudge:w}));const k=u.endNode.pageBounds.maxX+u.length,C=n.minX,E=k-C;zt(Math.abs(E))<=zt(e.x)&&(zt(Math.abs(E))<zt(e.x)&&(r.length=0),e.x=Math.abs(E),r.push({type:"gap_duplicate",gap:u,protrusionDirection:"right",nudge:E}))}for(const u of l){if(!hS(u.breadthIntersection[0],u.breadthIntersection[1],n.minX,n.maxX))continue;const h=u.startEdge[0].y+u.length/2-n.center.y;if(u.length>n.height&&zt(Math.abs(h))<=zt(e.y)){zt(Math.abs(h))<zt(e.y)&&(o.length=0),e.y=Math.abs(h);const R={type:"gap_center",gap:u,nudge:h},L=o.find(({type:O})=>O==="gap_center"),A=L&&hS(L.gap.breadthIntersection[0],L.gap.breadthIntersection[1],u.breadthIntersection[0],u.breadthIntersection[1]);L&&L.gap.length>u.length&&A?o[o.indexOf(L)]=R:(!L||!A)&&o.push(R);continue}const v=u.startNode.pageBounds.minY-u.length,S=n.maxY,w=v-S;zt(Math.abs(w))<=zt(e.y)&&(zt(Math.abs(w))<zt(e.y)&&(o.length=0),e.y=Math.abs(w),o.push({type:"gap_duplicate",gap:u,protrusionDirection:"top",nudge:w}));const k=u.endNode.pageBounds.maxY+u.length,C=n.minY,E=k-C;zt(Math.abs(E))<=zt(e.y)&&(zt(Math.abs(E))<zt(e.y)&&(o.length=0),e.y=Math.abs(E),o.push({type:"gap_duplicate",gap:u,protrusionDirection:"bottom",nudge:E}))}}getPointSnapLines({nearestSnapsX:n,nearestSnapsY:e}){const r={},o={};if(n.length>0){for(const a of n)if(a.type==="points"){const l=zt(a.points.otherPoint.x);r[l]||(r[l]=[]),r[l].push(a.points)}}if(e.length>0){for(const a of e)if(a.type==="points"){const l=zt(a.points.otherPoint.y);o[l]||(o[l]=[]),o[l].push(a.points)}}return Object.values(r).concat(Object.values(o)).map(a=>({id:dr(),type:"points",points:X1(a.map(l=>N.From(l.otherPoint)).concat(a.map(l=>N.From(l.thisPoint))),(l,u)=>l.equals(u))}))}getGapSnapLines({selectionPageBounds:n,nearestSnapsX:e,nearestSnapsY:r}){const{vertical:o,horizontal:a}=this.getVisibleGaps(),l={top:n.sides[0],right:n.sides[1],bottom:[n.corners[3],n.corners[2]],left:[n.corners[0],n.corners[3]]},u=[];if(e.length>0)for(const d of e){if(d.type==="points")continue;const{gap:{breadthIntersection:h,startEdge:g,startNode:v,endNode:S,length:w,endEdge:k}}=d;switch(d.type){case"gap_center":{const C=(w-n.width)/2,E=Hl(h[0],h[1],n.minY,n.maxY);u.push({type:"gaps",direction:"horizontal",id:dr(),gaps:[...Qu(a,v.id,C,"backward",E),{startEdge:g,endEdge:l.left},{startEdge:l.right,endEdge:k},...Qu(a,S.id,C,"forward",E)]});break}case"gap_duplicate":{const C=Hl(h[0],h[1],n.minY,n.maxY);u.push({type:"gaps",direction:"horizontal",id:dr(),gaps:d.protrusionDirection==="left"?[{startEdge:l.right,endEdge:g.map(E=>E.clone().addXY(-v.pageBounds.width,0))},{startEdge:g,endEdge:k},...Qu(a,S.id,w,"forward",C)]:[...Qu(a,v.id,w,"backward",C),{startEdge:g,endEdge:k},{startEdge:k.map(E=>E.clone().addXY(d.gap.endNode.pageBounds.width,0)),endEdge:l.left}]});break}}}if(r.length>0)for(const d of r){if(d.type==="points")continue;const{gap:{breadthIntersection:h,startEdge:g,startNode:v,endNode:S,length:w,endEdge:k}}=d;switch(d.type){case"gap_center":{const C=(w-n.height)/2,E=Hl(h[0],h[1],n.minX,n.maxX);u.push({type:"gaps",direction:"vertical",id:dr(),gaps:[...Qu(o,v.id,C,"backward",E),{startEdge:g,endEdge:l.top},{startEdge:l.bottom,endEdge:k},...Qu(o,d.gap.endNode.id,C,"forward",E)]});break}case"gap_duplicate":{const C=Hl(h[0],h[1],n.minX,n.maxX);u.push({type:"gaps",direction:"vertical",id:dr(),gaps:d.protrusionDirection==="top"?[{startEdge:l.bottom,endEdge:g.map(E=>E.clone().addXY(0,-v.pageBounds.height))},{startEdge:g,endEdge:k},...Qu(o,S.id,w,"forward",C)]:[...Qu(o,v.id,w,"backward",C),{startEdge:g,endEdge:k},{startEdge:k.map(E=>E.clone().addXY(0,S.pageBounds.height)),endEdge:l.top}]})}break}}return FQ(u),u}}sp([Qe],Lf.prototype,"getSnapPointsCache",1);sp([Qe],Lf.prototype,"getSnapThreshold",1);sp([Qe],Lf.prototype,"getSnappableShapes",1);sp([Qe],Lf.prototype,"getCurrentCommonAncestor",1);sp([Qe],Lf.prototype,"getSnappablePoints",1);sp([Qe],Lf.prototype,"getVisibleGaps",1);sp([Qe],Lf.prototype,"getOutlinesInPageSpace",1);function OD(t,n){const{minX:e,maxX:r,minY:o,maxY:a}=n,l=[];switch(t){case"top":case"left":case"top_left":case"any":l.push({id:"top_left",handle:"top_left",x:e,y:o})}switch(t){case"top":case"right":case"top_right":case"any":l.push({id:"top_right",handle:"top_right",x:r,y:o})}switch(t){case"bottom":case"right":case"bottom_right":case"any":l.push({id:"bottom_right",handle:"bottom_right",x:r,y:a})}switch(t){case"bottom":case"left":case"bottom_left":case"any":l.push({id:"bottom_left",handle:"bottom_left",x:e,y:a})}return l}const UQ=/\r?\n|\r/g;function DD(t){return t.replace(UQ,`
`).split(`
`).map(n=>n||" ").join(`
`)}const BQ={start:"left","start-legacy":"left",middle:"center","middle-legacy":"center",end:"right","end-legacy":"right"},HQ=/\s/;class VQ{constructor(n){T(this,"measureText",(n,e)=>{const r=this.getTextElement();r.setAttribute("dir","ltr"),r.style.setProperty("font-family",e.fontFamily),r.style.setProperty("font-style",e.fontStyle),r.style.setProperty("font-weight",e.fontWeight),r.style.setProperty("font-size",e.fontSize+"px"),r.style.setProperty("line-height",e.lineHeight*e.fontSize+"px"),r.style.setProperty("max-width",e.maxWidth===null?null:e.maxWidth+"px"),r.style.setProperty("min-width",e.minWidth??null),r.style.setProperty("padding",e.padding),r.textContent=DD(n);const o=r.getBoundingClientRect();return{x:0,y:0,w:o.width,h:o.height}});this.editor=n}getTextElement(){const n=document.querySelector(".tl-text-measure");n==null||n.remove();const e=document.createElement("div");return this.editor.getContainer().appendChild(e),e.id=`__textMeasure_${dr()}`,e.classList.add("tl-text"),e.classList.add("tl-text-measure"),e.tabIndex=-1,e}measureElementTextNodeSpans(n,{shouldTruncateToFirstLine:e=!1}={}){const r=[],o=n.getBoundingClientRect(),a=-o.left,l=-o.top,u=new Range,d=n.childNodes[0];let h=0,g=null,v=null,S=0,w=!1;for(const k of n.childNodes)if(k.nodeType===Node.TEXT_NODE)for(const C of k.textContent??""){u.setStart(d,h),u.setEnd(d,h+C.length);const E=u.getClientRects(),R=E[E.length-1],L=R.top+l,A=R.left+a,O=R.right+a,D=HQ.test(C);if(D!==v||L!==S||!g){if(g){if(e&&L!==S){w=!0;break}r.push(g)}g={box:{x:A,y:L,w:R.width,h:R.height},text:C}}else g.box.w=O-g.box.x,g.text+=C;v=D,S=L,h+=C.length}return g&&r.push(g),{spans:r,didTruncate:w}}measureTextSpans(n,e){if(n==="")return[];const r=e.overflow==="truncate-ellipsis"||e.overflow==="truncate-clip",o=this.getTextElement(),a=Math.ceil(e.width-e.padding*2);o.style.setProperty("width",`${a}px`),o.style.setProperty("height","min-content"),o.style.setProperty("dir","ltr"),o.style.setProperty("font-size",`${e.fontSize}px`),o.style.setProperty("font-family",e.fontFamily),o.style.setProperty("font-weight",e.fontWeight),o.style.setProperty("line-height",`${e.lineHeight*e.fontSize}px`),o.style.setProperty("text-align",BQ[e.textAlign]),r&&(o.style.setProperty("overflow-wrap","anywhere"),o.style.setProperty("word-break","break-all")),n=DD(n),o.textContent=n;const{spans:l,didTruncate:u}=this.measureElementTextNodeSpans(o,{shouldTruncateToFirstLine:r});if(e.overflow==="truncate-ellipsis"&&u){o.textContent="…";const d=Math.ceil(this.measureElementTextNodeSpans(o).spans[0].box.w);o.style.setProperty("width",`${a-d}px`),o.textContent=n;const h=this.measureElementTextNodeSpans(o,{shouldTruncateToFirstLine:!0}).spans,g=h[h.length-1];return h.push({text:"…",box:{x:Math.min(g.box.x+g.box.w,e.width-e.padding-d),y:g.box.y,w:d,h:g.box.h}}),h}return o.remove(),l}}class KQ{constructor(n){T(this,"raf");T(this,"isPaused",!0);T(this,"last",0);T(this,"t",0);T(this,"start",()=>{this.isPaused=!1,cancelAnimationFrame(this.raf),this.raf=requestAnimationFrame(this.tick),this.last=Date.now()});T(this,"tick",()=>{if(this.isPaused)return;const n=Date.now(),e=n-this.last;if(this.last=n,this.t+=e,this.editor.emit("frame",e),this.t<16){this.raf=requestAnimationFrame(this.tick);return}this.t-=16,this.updatePointerVelocity(e),this.editor.emit("tick",e),this.raf=requestAnimationFrame(this.tick)});T(this,"dispose",()=>{this.isPaused=!0,cancelAnimationFrame(this.raf)});T(this,"prevPoint",new N);T(this,"updatePointerVelocity",n=>{const{prevPoint:e,editor:{inputs:{currentScreenPoint:r,pointerVelocity:o}}}=this;if(n===0)return;const a=N.Sub(r,e);this.prevPoint=r.clone();const l=a.len(),u=l?a.div(l):new N(0,0),d=o.clone().lrp(u.mul(l/n),.5);Math.abs(d.x)<.01&&(d.x=0),Math.abs(d.y)<.01&&(d.y=0),o.equals(d)||(this.editor.inputs.pointerVelocity=d)});this.editor=n,this.editor.disposables.add(this.dispose),this.start()}}var YQ=Object.defineProperty,WQ=Object.getOwnPropertyDescriptor,md=(t,n,e,r)=>{for(var o=r>1?void 0:r?WQ(n,e):n,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=(r?l(n,e,o):l(o))||o);return r&&o&&YQ(n,e,o),o};class tu{constructor(n,e){T(this,"updateUserPreferences",n=>{this.user.setUserPreferences({...this.user.userPreferences.get(),...n})});this.user=n,this.inferDarkMode=e}getUserPreferences(){return{id:this.getId(),name:this.getName(),locale:this.getLocale(),color:this.getColor(),isDarkMode:this.getIsDarkMode(),animationSpeed:this.getAnimationSpeed(),isSnapMode:this.getIsSnapMode()}}getIsDarkMode(){return this.user.userPreferences.get().isDarkMode??(this.inferDarkMode?rQ():!1)}getEdgeScrollSpeed(){return this.user.userPreferences.get().edgeScrollSpeed??sl.edgeScrollSpeed}getAnimationSpeed(){return this.user.userPreferences.get().animationSpeed??sl.animationSpeed}getId(){return this.user.userPreferences.get().id}getName(){return this.user.userPreferences.get().name??sl.name}getLocale(){return this.user.userPreferences.get().locale??sl.locale}getColor(){return this.user.userPreferences.get().color??sl.color}getIsSnapMode(){return this.user.userPreferences.get().isSnapMode??sl.isSnapMode}}md([Qe],tu.prototype,"getUserPreferences",1);md([Qe],tu.prototype,"getIsDarkMode",1);md([Qe],tu.prototype,"getEdgeScrollSpeed",1);md([Qe],tu.prototype,"getAnimationSpeed",1);md([Qe],tu.prototype,"getId",1);md([Qe],tu.prototype,"getName",1);md([Qe],tu.prototype,"getLocale",1);md([Qe],tu.prototype,"getColor",1);md([Qe],tu.prototype,"getIsSnapMode",1);function mS(t){return Math.abs(t.props.bend)<8}function mC(t,n){if(n.type==="point")return;const e=t.getShape(n.boundShapeId),r=t.getShapePageTransform(e),o=t.getShapeGeometry(e),a=o instanceof wf?o.children[0].vertices:o.vertices;return{shape:e,transform:r,isClosed:o.isClosed,isExact:n.isExact,didIntersect:!1,outline:a}}function LD(t,n,e,r){if(e.type==="point")return N.From(e);const o=t.getShape(e.boundShapeId);if(o){const{point:a,size:l}=t.getShapeGeometry(o).bounds,u=N.Add(a,N.MulV(e.isPrecise||r?e.normalizedAnchor:{x:.5,y:.5},l)),d=yt.applyToPoint(t.getShapePageTransform(o),u);return yt.applyToPoint(yt.Inverse(n),d)}else return new N(0,0)}function Yl(t,n){const e=t.getShapePageTransform(n);let r,o;n.props.start.type==="binding"&&n.props.end.type==="binding"&&(r=n.props.start.boundShapeId,o=n.props.end.boundShapeId);const a=vR(t,r,o),l=LD(t,e,n.props.start,a==="double-bound"||a==="start-contains-end"),u=LD(t,e,n.props.end,a==="double-bound"||a==="end-contains-start");return{start:l,end:u}}const gm=10,vC=10,GQ=10,xf={s:2,m:3.5,l:5,xl:10};function vR(t,n,e){if(!n||!e)return"safe";if(n===e)return"double-bound";const r=t.getShapePageBounds(n),o=t.getShapePageBounds(e);if(r&&o){if(r.contains(o))return"start-contains-end";if(o.contains(r))return"end-contains-start"}return"safe"}function jS(t,n){const{start:e,end:r,arrowheadStart:o,arrowheadEnd:a}=n.props,l=Yl(t,n),u=l.start.clone(),d=l.end.clone(),h=N.Med(u,d);if(N.Equals(u,d))return{isStraight:!0,start:{handle:u,point:u,arrowhead:n.props.arrowheadStart},end:{handle:d,point:d,arrowhead:n.props.arrowheadEnd},middle:h,isValid:!1,length:0};const g=N.Sub(d,u).uni(),v=mC(t,e),S=mC(t,r),w=t.getShapePageTransform(n);jD(d,l.start,w,S),jD(u,l.end,w,v);let k=0,C=0,E=0,R=0,L=gm;const A=v&&S&&v.shape===S.shape,O=v&&S?vR(t,v.shape.id,S.shape.id):"safe";O==="safe"&&v&&S&&!A&&!v.isExact&&!S.isExact&&(S.didIntersect&&!v.didIntersect?v.isClosed&&u.setTo(d.clone().add(g.clone().mul(gm))):S.didIntersect||S.isClosed&&d.setTo(u.clone().sub(g.clone().mul(gm))));const D=N.Sub(d,u).uni(),z=!N.Equals(D,g);A||(O!=="start-contains-end"&&v&&o!=="none"&&!v.isExact&&(E=xf[n.props.size]/2+("size"in v.shape.props?xf[v.shape.props.size]/2:0),k=vC+E,L+=E),O!=="end-contains-start"&&S&&a!=="none"&&!S.isExact&&(R=xf[n.props.size]/2+("size"in S.shape.props?xf[S.shape.props.size]/2:0),C=vC+R,L+=R));const U=u.clone().add(D.clone().mul(k*(z?-1:1))),Y=d.clone().sub(D.clone().mul(C*(z?-1:1)));N.Dist(U,Y)<L&&(k!==0&&C!==0?(k*=-1.5,C*=-1.5):k!==0?k*=-1:C!==0&&(C*=-1)),u.add(D.clone().mul(k*(z?-1:1))),d.sub(D.clone().mul(C*(z?-1:1))),z?(v&&S&&d.setTo(N.Add(u,D.clone().mul(-gm))),h.setTo(N.Med(l.start,l.end))):h.setTo(N.Med(u,d));const X=N.Dist(u,d);return{isStraight:!0,start:{handle:l.start,point:u,arrowhead:n.props.arrowheadStart},end:{handle:l.end,point:d,arrowhead:n.props.arrowheadEnd},middle:h,isValid:X>0,length:X}}function jD(t,n,e,r){if(r===void 0||r.isExact)return;const o=yt.applyToPoint(e,n),a=yt.applyToPoint(e,t),l=yt.applyToPoint(yt.Inverse(r.transform),o),u=yt.applyToPoint(yt.Inverse(r.transform),a),d=r.isClosed,g=(d?fQ:x4)(l,u,r.outline);let v;if(g!==null&&(v=g.sort((k,C)=>N.Dist(k,l)-N.Dist(C,l))[0]??(d?void 0:u)),v===void 0)return;const S=yt.applyToPoint(r.transform,v),w=yt.applyToPoint(yt.Inverse(e),S);t.setTo(w),r.didIntersect=!0}function h2(t,n,e=0){const{arrowheadEnd:r,arrowheadStart:o}=n.props,a=n.props.bend+e;if(Math.abs(a)>Math.abs(n.props.bend*GQ))return jS(t,n);const l=Yl(t,n),u=N.Med(l.start,l.end),d=N.Sub(l.end,l.start).uni(),h=N.Add(u,d.per().mul(-a)),g=mC(t,n.props.start),v=mC(t,n.props.end),S=l.start.clone(),w=l.end.clone(),k=h.clone();if(N.Equals(S,w))return{isStraight:!0,start:{handle:S,point:S,arrowhead:n.props.arrowheadStart},end:{handle:w,point:w,arrowhead:n.props.arrowheadEnd},middle:k,isValid:!1,length:0};const C=n.props.bend<0,E=C?LC:gW,R=ND(S,w,k),L=N.Angle(R.center,S),A=N.Angle(R.center,w),O=E(L,A);if(R.length===0||R.size===0||!nD(R.length)||!nD(R.size))return jS(t,n);const D=S.clone(),z=w.clone(),U=k.clone(),Y=t.getShapePageTransform(n);let q=0,X=0,ie=gm;if(g&&!g.isExact){const V=yt.applyToPoint(Y,D),Z=yt.applyToPoint(Y,R.center),Ce=yt.applyToPoint(Y,z),Ae=yt.Inverse(g.transform),De=yt.applyToPoint(Ae,V),Ie=yt.applyToPoint(Ae,Z),Ne=yt.applyToPoint(Ae,Ce),{isClosed:Ve}=g,Ke=Ve?TD:kD;let Xe,at=Ke(Ie,R.radius,g.outline);if(at){const _t=Ie.angle(De),We=Ie.angle(Ne),Ht=E(_t,We);at=at.filter(Xt=>E(_t,Ie.angle(Xt))<=Ht);const dn=Ht*.25;at.sort(Ve?(Xt,ln)=>Math.abs(E(_t,Ie.angle(Xt))-dn)<Math.abs(E(_t,Ie.angle(ln))-dn)?-1:1:(Xt,ln)=>E(_t,Ie.angle(Xt))<E(_t,Ie.angle(ln))?-1:1),Xe=at[0]??(Ve?void 0:De)}else Xe=Ve?void 0:De;if(Xe&&(D.setTo(t.getPointInShapeSpace(n,yt.applyToPoint(g.transform,Xe))),g.didIntersect=!0,o!=="none")){const _t=xf[n.props.size]/2+("size"in g.shape.props?xf[g.shape.props.size]/2:0);q=vC+_t,ie+=_t}}if(v&&!v.isExact){const V=yt.applyToPoint(Y,D),Z=yt.applyToPoint(Y,z),Ce=yt.applyToPoint(Y,R.center),Ae=yt.Inverse(v.transform),De=yt.applyToPoint(Ae,V),Ie=yt.applyToPoint(Ae,Ce),Ne=yt.applyToPoint(Ae,Z),Ve=v.isClosed,Ke=Ve?TD:kD;let Xe,at=Ke(Ie,R.radius,v.outline);if(at){const _t=Ie.angle(De),We=Ie.angle(Ne),Ht=E(_t,We),dn=Ht*.75;at=at.filter(Xt=>E(_t,Ie.angle(Xt))<=Ht),at.sort(Ve?(Xt,ln)=>Math.abs(E(_t,Ie.angle(Xt))-dn)<Math.abs(E(_t,Ie.angle(ln))-dn)?-1:1:(Xt,ln)=>E(_t,Ie.angle(Xt))<E(_t,Ie.angle(ln))?-1:1),at[0]?Xe=at[0]:Xe=Ve?void 0:Ne}else Xe=Ve?void 0:Ne;if(Xe&&(z.setTo(t.getPointInShapeSpace(n,yt.applyToPoint(v.transform,Xe))),v.didIntersect=!0,r!=="none")){const _t=xf[n.props.size]/2+("size"in v.shape.props?xf[v.shape.props.size]/2:0);X=vC+_t,ie+=_t}}let pe=N.Angle(R.center,D),ae=N.Angle(R.center,z),te=E(pe,ae),he=te*R.radius;const ce=D.clone(),ge=z.clone();if(q!==0){const V=q/he*(C?1:-1),Z=N.FromAngle(pe+te*V);ce.setTo(R.center).add(Z.mul(R.radius))}if(X!==0){const V=X/he*(C?-1:1),Z=N.FromAngle(ae+te*V);ge.setTo(R.center).add(Z.mul(R.radius))}if(N.Dist(ce,ge)<ie&&(q!==0&&X!==0?(q*=-1.5,X*=-1.5):q!==0?q*=-2:X!==0&&(X*=-2)),q!==0){const V=q/he*(C?1:-1),Z=N.FromAngle(pe+te*V);D.setTo(R.center).add(Z.mul(R.radius))}if(X!==0){const V=X/he*(C?-1:1),Z=N.FromAngle(ae+te*V);z.setTo(R.center).add(Z.mul(R.radius))}if(g&&v&&!g.isExact&&!v.isExact){pe=N.Angle(R.center,D),ae=N.Angle(R.center,z),te=E(pe,ae),he=te*R.radius;const V=vR(t,g.shape.id,v.shape.id);if(V==="double-bound"&&he<30)D.setTo(S),z.setTo(w),U.setTo(k);else if(V==="safe"&&(g&&!g.didIntersect&&D.setTo(S),v&&!v.didIntersect||E(L,pe)>E(L,ae))){const Z=Math.min(.9,gm/he)*(C?1:-1),Ce=N.FromAngle(pe+te*Z);z.setTo(R.center).add(Ce.mul(R.radius))}}XQ(R.center,R.radius,D,z,U,O,C),D.equals(z)&&(D.setTo(U.clone().addXY(1,1)),z.setTo(U.clone().subXY(1,1))),S.setTo(D),w.setTo(z),k.setTo(U);const we=ND(S,w,k);return{isStraight:!1,start:{point:S,handle:l.start,arrowhead:n.props.arrowheadStart},end:{point:w,handle:l.end,arrowhead:n.props.arrowheadEnd},middle:k,handleArc:R,bodyArc:we,isValid:we.length!==0&&isFinite(we.center.x)&&isFinite(we.center.y)}}function ND(t,n,e){const r=-2*(t.x*(n.y-e.y)-t.y*(n.x-e.x)+n.x*e.y-e.x*n.y),o={x:((t.x*t.x+t.y*t.y)*(e.y-n.y)+(n.x*n.x+n.y*n.y)*(t.y-e.y)+(e.x*e.x+e.y*e.y)*(n.y-t.y))/r,y:((t.x*t.x+t.y*t.y)*(n.x-e.x)+(n.x*n.x+n.y*n.y)*(e.x-t.x)+(e.x*e.x+e.y*e.y)*(t.x-n.x))/r},a=N.Dist(o,t),l=+N.Clockwise(t,e,n),u=Math.hypot(t.y-n.y,t.x-n.x),d=Math.hypot(n.y-e.y,n.x-e.x),h=Math.hypot(e.y-t.y,e.x-t.x),g=Math.acos((d*d+h*h-u*u)/(2*d*h))*2,v=+(Jn>g),S=(or-g)*(l?1:-1),w=S*a;return{center:o,radius:a,size:S,length:w,largeArcFlag:v,sweepFlag:l}}function XQ(t,n,e,r,o,a,l){const u=N.Angle(t,e),d=N.Angle(t,r);let h=LC(u,d);l||(h=or-h);const g=.5*(l?1:-1),v=N.FromAngle(u+h*g);if(o.setTo(t).add(v.mul(n)),h>a){o.rotWith(t,Jn);const S=r.clone();r.setTo(e),e.setTo(S)}}const qQ={wheel:"onWheel",pointer_down:"onPointerDown",pointer_move:"onPointerMove",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",key_down:"onKeyDown",key_up:"onKeyUp",key_repeat:"onKeyRepeat",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick"};class Et{constructor(n,e){T(this,"id");T(this,"type");T(this,"shapeType");T(this,"initial");T(this,"children");T(this,"parent");T(this,"_path");T(this,"_current");T(this,"_isActive");T(this,"transition",(n,e={})=>{var a;const r=n.split(".");let o=this;for(let l=0;l<r.length;l++){const u=r[l],d=o.getCurrent(),h=(a=o.children)==null?void 0:a[u];if(!h)throw Error(`${o.id} - no child state exists with the id ${u}.`);if((d==null?void 0:d.id)!==h.id&&(d==null||d.exit(e,u),o._current.set(h),h.enter(e,(d==null?void 0:d.id)||"initial"),!h.getIsActive()))break;o=h}return this});T(this,"handleEvent",n=>{var o;const e=qQ[n.name],r=this.getCurrent();(o=this[e])==null||o.call(this,n),this.getCurrent()===r&&this.getIsActive()&&(r==null||r.handleEvent(n))});T(this,"enter",(n,e)=>{var r;if(this._isActive.set(!0),(r=this.onEnter)==null||r.call(this,n,e),this.onTick&&this.editor.on("tick",this.onTick),this.children&&this.initial&&this.getIsActive()){const o=this.children[this.initial];this._current.set(o),o.enter(n,e)}});T(this,"exit",(n,e)=>{var r,o;this._isActive.set(!1),this.onTick&&this.editor.off("tick",this.onTick),(r=this.onExit)==null||r.call(this,n,e),this.getIsActive()||(o=this.getCurrent())==null||o.exit(n,e)});T(this,"_currentToolIdMask",Es("curent tool id mask",void 0));T(this,"onWheel");T(this,"onPointerDown");T(this,"onPointerMove");T(this,"onPointerUp");T(this,"onDoubleClick");T(this,"onTripleClick");T(this,"onQuadrupleClick");T(this,"onRightClick");T(this,"onMiddleClick");T(this,"onKeyDown");T(this,"onKeyUp");T(this,"onKeyRepeat");T(this,"onCancel");T(this,"onComplete");T(this,"onInterrupt");T(this,"onEnter");T(this,"onExit");T(this,"onTick");this.editor=n;const{id:r,children:o,initial:a}=this.constructor;this.id=r,this._isActive=Es("toolIsActive"+this.id,!1),this._current=Es("toolState"+this.id,void 0),this._path=Qe("toolPath"+this.id,()=>{const l=this.getCurrent();return this.id+(l?`.${l.getPath()}`:"")}),this.parent=e??{},this.parent?o&&a?(this.type="branch",this.initial=a,this.children=Object.fromEntries(o().map(l=>[l.id,new l(this.editor,this)])),this._current.set(this.children[this.initial])):this.type="leaf":(this.type="root",o&&a&&(this.initial=a,this.children=Object.fromEntries(o().map(l=>[l.id,new l(this.editor,this)])),this._current.set(this.children[this.initial])))}getPath(){return this._path.get()}getCurrent(){return this._current.get()}getIsActive(){return this._isActive.get()}getCurrentToolIdMask(){return this._currentToolIdMask.get()}setCurrentToolIdMask(n){this._currentToolIdMask.set(n)}}T(Et,"id"),T(Et,"initial"),T(Et,"children");class f1 extends Et{constructor(){super(...arguments);T(this,"onKeyDown",e=>{var r;switch(e.code){case"KeyZ":{if(!(e.shiftKey||e.ctrlKey)){const o=this.getCurrent();o&&((r=o.getCurrent())==null?void 0:r.id)==="idle"&&this.children.zoom&&this.editor.setCurrentTool("zoom",{...e,onInteractionEnd:o.id})}break}}})}}T(f1,"id","root"),T(f1,"initial",""),T(f1,"children",()=>[]);var QQ=Object.defineProperty,ZQ=Object.getOwnPropertyDescriptor,Dt=(t,n,e,r)=>{for(var o=r>1?void 0:r?ZQ(n,e):n,a=t.length-1,l;a>=0;a--)(l=t[a])&&(o=(r?l(n,e,o):l(o))||o);return r&&o&&QQ(n,e,o),o};class $t extends dQ.EventEmitter{constructor({store:e,user:r,shapeUtils:o,tools:a,getContainer:l,initialState:u,inferDarkMode:d}){super();T(this,"store");T(this,"root");T(this,"disposables",new Set);T(this,"_tickManager",new KQ(this));T(this,"snaps");T(this,"user");T(this,"textMeasure");T(this,"environment");T(this,"scribbles");T(this,"getContainer");T(this,"sideEffects");T(this,"shapeUtils");T(this,"styleProps");T(this,"history",new DQ(this,e=>{this.annotateError(e,{origin:"history.batch",willCrashApp:!0}),this.crash(e)}));T(this,"_crashingError",null);T(this,"_updateInstanceState",this.history.createCommand("updateInstanceState",(e,r)=>{const o=this.store.get(this.getInstanceState().id),a={...o,...e};return{data:{prev:o,next:a},ephemeral:!1,squashing:!1,...r}},{do:({next:e})=>{this.store.put([e])},undo:({prev:e})=>{this.store.put([e])},squash({prev:e},{next:r}){return{prev:e,next:r}}}));T(this,"_isChangingStyleTimeout",-1);T(this,"setCursor",e=>(this.updateInstanceState({cursor:{...this.getInstanceState().cursor,...e}},{ephemeral:!0}),this));T(this,"_setInstancePageState",this.history.createCommand("setInstancePageState",(e,r)=>({data:{prev:this.store.get(e.id??this.getCurrentPageState().id),partial:e},...r}),{do:({prev:e,partial:r})=>{this.store.update(e.id,o=>({...o,...r}))},undo:({prev:e})=>{this.store.update(e.id,()=>e)}}));T(this,"_setSelectedShapes",this.history.createCommand("setSelectedShapes",(e,r)=>{const{selectedShapeIds:o}=this.getCurrentPageState(),a=new Set(o);return e.length===a.size&&e.every(l=>a.has(l))?null:{data:{selectedShapeIds:e,prevSelectedShapeIds:o},preservesRedoStack:!0,...r}},{do:({selectedShapeIds:e})=>{this.store.put([{...this.getCurrentPageState(),selectedShapeIds:e}])},undo:({prevSelectedShapeIds:e})=>{this.store.put([{...this.getCurrentPageState(),selectedShapeIds:e}])},squash({prevSelectedShapeIds:e},{selectedShapeIds:r}){return{selectedShapeIds:r,prevSelectedShapeIds:e}}}));T(this,"_setFocusedGroupId",this.history.createCommand("setFocusedGroupId",e=>{const r=this.getCurrentPageState().focusedGroupId;if(r!==e)return{data:{prev:r,next:e},preservesRedoStack:!0,squashing:!0}},{do:({next:e})=>{this.store.update(this.getCurrentPageState().id,r=>({...r,focusedGroupId:e}))},undo:({prev:e})=>{this.store.update(this.getCurrentPageState().id,r=>({...r,focusedGroupId:e}))},squash({prev:e},{next:r}){return{prev:e,next:r}}}));T(this,"_viewportAnimation",null);T(this,"_willSetInitialBounds",!0);T(this,"_cameraState",Es("camera state","idle"));T(this,"_cameraStateTimeoutRemaining",0);T(this,"_lastUpdateRenderingBoundsTimestamp",Date.now());T(this,"_decayCameraStateTimeout",e=>{this._cameraStateTimeoutRemaining-=e,this._cameraStateTimeoutRemaining<=0&&(this.off("tick",this._decayCameraStateTimeout),this._cameraState.set("idle"),this.updateRenderingBounds())});T(this,"_tickCameraState",()=>{this._cameraStateTimeoutRemaining=OW;const e=Date.now();this._cameraState.__unsafe__getWithoutCapture()==="idle"?(this._lastUpdateRenderingBoundsTimestamp=e,this._cameraState.set("moving"),this.on("tick",this._decayCameraStateTimeout)):e-this._lastUpdateRenderingBoundsTimestamp>DW&&this.updateRenderingBounds()});T(this,"_renderingBounds",Es("rendering viewport",new Mt));T(this,"_renderingBoundsExpanded",Es("rendering viewport expanded",new Mt));T(this,"renderingBoundsMargin",100);T(this,"_currentPageShapeIds");T(this,"_setCurrentPageId",this.history.createCommand("setCurrentPage",(e,r)=>{if(!this.store.has(e)){console.error("Tried to set the current page id to a page that doesn't exist.");return}return this.stopFollowingUser(),{data:{toId:e,fromId:this.getCurrentPageId()},squashing:!0,preservesRedoStack:!0,...r}},{do:({toId:e})=>{if(this.store.has(e)){if(!this.getPageStates().find(r=>r.pageId===e)){const r=Go.create({id:Go.createId(e)});this.store.put([r,Xo.create({id:Xo.createId(e),pageId:e})])}this.store.put([{...this.getInstanceState(),currentPageId:e}]),this.updateRenderingBounds()}},undo:({fromId:e})=>{this.store.has(e)&&(this.store.put([{...this.getInstanceState(),currentPageId:e}]),this.updateRenderingBounds())},squash:({fromId:e},{toId:r})=>({toId:r,fromId:e})}));T(this,"_updatePage",this.history.createCommand("updatePage",(e,r)=>{if(this.getInstanceState().isReadonly)return null;const o=this.getPage(e.id);return o?{data:{prev:o,partial:e},...r}:null},{do:({partial:e})=>{this.store.update(e.id,r=>({...r,...e}))},undo:({prev:e,partial:r})=>{this.store.update(r.id,()=>e)},squash(e,r){return{prev:{...e.prev,...r.prev},partial:r.partial}}}));T(this,"_createPage",this.history.createCommand("createPage",e=>{if(this.getInstanceState().isReadonly||this.getPages().length>=cC)return null;const r=this.getPages(),o=bQ(e.name??"Page 1",r.map(h=>h.name));let a=e.index;(!a||r.some(h=>h.index===a))&&(a=Zu(r[r.length-1].index));const l=cd.create({meta:{},...e,name:o,index:a}),u=Go.create({id:Go.createId(l.id)}),d=Xo.create({id:Xo.createId(l.id),pageId:l.id});return{data:{newPage:l,newTabPageState:d,newCamera:u}}},{do:({newPage:e,newTabPageState:r,newCamera:o})=>{this.store.put([e,o,r])},undo:({newPage:e,newTabPageState:r,newCamera:o})=>{this.getPages().length!==1&&this.store.remove([r.id,e.id,o.id])}}));T(this,"_deletePage",this.history.createCommand("delete_page",e=>{if(this.getInstanceState().isReadonly)return null;const r=this.getPages();if(r.length===1)return null;const o=this.getPage(e),a=this.getPageStates().filter(l=>l.pageId===e);if(!o)return null;if(e===this.getCurrentPageId()){const l=r.findIndex(d=>d.id===e),u=r[l-1]??r[l+1];this.setCurrentPage(u.id)}return{data:{id:e,deletedPage:o,deletedPageStates:a}}},{do:({deletedPage:e,deletedPageStates:r})=>{const o=this.getPages();if(o.length!==1){if(e.id===this.getCurrentPageId()){const a=o.findIndex(u=>u.id===e.id),l=o[a-1]??o[a+1];this.setCurrentPage(l.id)}this.store.remove(r.map(a=>a.id)),this.store.remove([e.id]),this.updateRenderingBounds()}},undo:({deletedPage:e,deletedPageStates:r})=>{this.store.put([e]),this.store.put(r),this.updateRenderingBounds()}}));T(this,"_createAssets",this.history.createCommand("createAssets",e=>this.getInstanceState().isReadonly||e.length<=0?null:{data:{assets:e}},{do:({assets:e})=>{this.store.put(e)},undo:({assets:e})=>{this.store.remove(e.map(r=>r.id))}}));T(this,"_updateAssets",this.history.createCommand("updateAssets",e=>this.getInstanceState().isReadonly||e.length<=0?void 0:{data:{snapshots:{},assets:e}},{do:({assets:e,snapshots:r})=>{this.store.put(e.map(o=>{const a=this.store.get(o.id);return r[o.id]=a,{...a,...o}}))},undo:({snapshots:e})=>{this.store.put(Object.values(e))}}));T(this,"_deleteAssets",this.history.createCommand("deleteAssets",e=>{if(this.getInstanceState().isReadonly||e.length<=0)return;const r=Bt(e.map(o=>this.store.get(o)));return{data:{ids:e,prev:r}}},{do:({ids:e})=>{this.store.remove(e)},undo:({prev:e})=>{this.store.put(e)}}));T(this,"_parentIdsToChildIds");T(this,"_childIdsCache",new gR);T(this,"_createShapes",this.history.createCommand("createShapes",e=>{if(this.getInstanceState().isReadonly||e.length<=0)return null;const r=this.getCurrentPageShapeIds();if(e.length+r.size>qu){Ox(this);return}return e.length===0?null:{data:{currentPageId:this.getCurrentPageId(),partials:e.map(a=>a.id?a:{...a,id:Ir()})}}},{do:({partials:e})=>{var u,d;const r=this.getFocusedGroupId(),o=this.getCurrentPageShapesSorted();e=e.map(h=>{if(!h.parentId||!(this.store.has(h.parentId)||e.some(g=>g.id===h.parentId))){let g=this.getFocusedGroupId();for(let S=o.length-1;S>=0;S--){const w=o[S];if(this.getShapeUtil(w).canReceiveNewChildrenOfType(w,h.type)&&this.isPointInShape(w,{x:h.x??0,y:h.y??0},{margin:0,hitInside:!0})){g=w.id;break}}const v=h.parentId;if(g===h.id&&(g=r),g!==v&&(h={...h},h.parentId=g,il(g))){const S=this.getPointInShapeSpace(this.getShape(g),{x:h.x??0,y:h.y??0});h.x=S.x,h.y=S.y,h.rotation=-this.getShapePageTransform(g).rotation()+(h.rotation??0)}}return h});const a=new Map,l=[];for(const h of e){const g=this.getShapeUtil(h);let v=h.index;if(!v){const C=h.parentId??r;a.has(C)||a.set(C,this.getHighestIndexForParent(C)),v=a.get(C),a.set(C,Zu(v))}const S=g.getDefaultProps();for(const[C,E]of this.styleProps[h.type])S[E]=this.getStyleForNextShape(C);let w=this.store.schema.types.shape.create({...h,index:v,opacity:h.opacity??this.getInstanceState().opacityForNextShape,parentId:h.parentId??r,props:"props"in h?{...S,...h.props}:S});if(w.index===void 0)throw Error("no index!");const k=(d=(u=this.getShapeUtil(w)).onBeforeCreate)==null?void 0:d.call(u,w);k&&(w=k),l.push(w)}l.forEach(h=>{h.meta={...this.getInitialMetaForShape(h),...h.meta}}),this.store.put(l)},undo:({partials:e})=>{this.store.remove(e.map(r=>r.id))}}));T(this,"animatingShapes",new Map);T(this,"_updateShapes",this.history.createCommand("updateShapes",(e,r)=>{if(this.getInstanceState().isReadonly)return null;const o=Bt(e),a=Object.fromEntries(Bt(o.map(({id:d})=>this.getShape(d))).map(d=>[d.id,d]));if(o.length<=0)return null;const l=Bt(o.map(d=>{const h=a[d.id];if(!h)return null;let g=null;for(const[v,S]of Object.entries(d))if(S!==void 0)switch(v){case"id":case"type":continue;default:if(S!==h[v])if(g||(g={...h}),v==="props"){const w={...h.props};for(const[k,C]of Object.entries(S))C!==void 0&&(w[k]=C);g.props=w}else if(v==="meta"){const w={...h.meta};for(const[k,C]of Object.entries(S))C!==void 0&&(w[k]=C);g.meta=w}else g[v]=S}return g??h})),u=Object.fromEntries(l.map(d=>[d.id,d]));return{data:{snapshots:a,updates:u},...r}},{do:({updates:e})=>{var o,a;const r=Object.values(e);for(let l=0;l<r.length;l++){const u=r[l],d=this.store.get(u.id);if(!d)continue;const h=(a=(o=this.getShapeUtil(u)).onBeforeUpdate)==null?void 0:a.call(o,d,u);h&&(r[l]=h)}this.store.put(r)},undo:({snapshots:e})=>{this.store.put(Object.values(e))},squash(e,r){return{snapshots:{...r.snapshots,...e.snapshots},updates:{...e.updates,...r.updates}}}}));T(this,"_deleteShapes",this.history.createCommand("delete_shapes",e=>{if(this.getInstanceState().isReadonly||e.length===0)return null;const r=[...this.getCurrentPageState().selectedShapeIds],o=new Set(e);for(const h of e)this.visitDescendants(h,g=>{o.add(g)});const a=[...o],l=this._getArrowBindingsIndex().get(),u=Bt(a.flatMap(h=>{const g=this.getShape(h),v=l[h];return v&&v.length>0?v.map(({arrowId:S})=>this.getShape(S)).concat(g):g})),d=r.filter(h=>!o.has(h));return{data:{deletedIds:a,snapshots:u,prevSelectedShapeIds:r,postSelectedShapeIds:d}}},{do:({deletedIds:e,postSelectedShapeIds:r})=>{this.store.remove(e),this.store.update(this.getCurrentPageState().id,o=>({...o,selectedShapeIds:r}))},undo:({snapshots:e,prevSelectedShapeIds:r})=>{this.store.put(e),this.store.update(this.getCurrentPageState().id,o=>({...o,selectedShapeIds:r}))}}));T(this,"_selectionSharedStyles",Qe("_selectionSharedStyles",()=>{const e=this.getSelectedShapes(),r=new XP;for(const o of e)this._extractSharedStyles(o,r);return r}));T(this,"externalAssetContentHandlers",{file:null,url:null});T(this,"externalContentHandlers",{text:null,files:null,embed:null,"svg-text":null,url:null});T(this,"inputs",{originPagePoint:new N,originScreenPoint:new N,previousPagePoint:new N,previousScreenPoint:new N,currentPagePoint:new N,currentScreenPoint:new N,keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,pointerVelocity:new N});T(this,"_clickManager",new AQ(this));T(this,"_prevCursor","default");T(this,"_shiftKeyTimeout",-1);T(this,"_setShiftKeyTimeout",()=>{this.inputs.shiftKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"ShiftLeft"})});T(this,"_altKeyTimeout",-1);T(this,"_setAltKeyTimeout",()=>{this.inputs.altKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"AltLeft"})});T(this,"_ctrlKeyTimeout",-1);T(this,"_setCtrlKeyTimeout",()=>{this.inputs.ctrlKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"ControlLeft"})});T(this,"_restoreToolId","select");T(this,"_pinchStart",1);T(this,"_didPinch",!1);T(this,"_selectedShapeIdsAtPointerDown",[]);T(this,"capturedPointerId",null);T(this,"dispatch",e=>{if(this.getCrashingError())return this;const{inputs:r}=this,{type:o}=e;return this.batch(()=>{if(e.type==="misc"){(e.name==="cancel"||e.name==="complete")&&(this.inputs.isDragging=!1,this.inputs.isPanning&&(this.inputs.isPanning=!1,this.updateInstanceState({cursor:{type:this._prevCursor,rotation:0}}))),this.root.handleEvent(e);return}e.shiftKey?(clearInterval(this._shiftKeyTimeout),this._shiftKeyTimeout=-1,r.shiftKey=!0):!e.shiftKey&&r.shiftKey&&this._shiftKeyTimeout===-1&&(this._shiftKeyTimeout=setTimeout(this._setShiftKeyTimeout,150)),e.altKey?(clearInterval(this._altKeyTimeout),this._altKeyTimeout=-1,r.altKey=!0):!e.altKey&&r.altKey&&this._altKeyTimeout===-1&&(this._altKeyTimeout=setTimeout(this._setAltKeyTimeout,150)),e.ctrlKey?(clearInterval(this._ctrlKeyTimeout),this._ctrlKeyTimeout=-1,r.ctrlKey=!0):!e.ctrlKey&&r.ctrlKey&&this._ctrlKeyTimeout===-1&&(this._ctrlKeyTimeout=setTimeout(this._setCtrlKeyTimeout,150));const{originPagePoint:a,originScreenPoint:l,currentPagePoint:u,currentScreenPoint:d}=r;switch(r.isPointing||(r.isDragging=!1),o){case"pinch":{if(!this.getInstanceState().canMoveCamera)return;switch(this._updateInputsFromEvent(e),e.name){case"pinch_start":{if(r.isPinching)return;r.isEditing||(this._pinchStart=this.getCamera().z,this._selectedShapeIdsAtPointerDown.length||(this._selectedShapeIdsAtPointerDown=this.getSelectedShapeIds()),this._didPinch=!0,r.isPinching=!0,this.interrupt());return}case"pinch":{if(!r.isPinching)return;const{point:{x:h,y:g,z:v=1},delta:{x:S,y:w}}=e,{x:k,y:C,z:E}=this.getCamera(),R=Math.min(Sf,Math.max(pS,v));this.setCamera({x:k+S/E-h/E+h/R,y:C+w/E-g/E+g/R,z:R});return}case"pinch_end":{if(!r.isPinching)return this;r.isPinching=!1;const{_selectedShapeIdsAtPointerDown:h}=this;this.setSelectedShapes(this._selectedShapeIdsAtPointerDown,{squashing:!0}),this._selectedShapeIdsAtPointerDown=[],this._didPinch&&(this._didPinch=!1,requestAnimationFrame(()=>{this._didPinch||this.setSelectedShapes(h,{squashing:!0})}));return}}}case"wheel":{if(!this.getInstanceState().canMoveCamera)return;if(this._updateInputsFromEvent(e),!this.getIsMenuOpen()){if(r.ctrlKey){const{x:h,y:g}=this.inputs.currentScreenPoint,{x:v,y:S,z:w}=this.getCamera(),k=Math.min(Sf,Math.max(pS,w+(e.delta.z??0)*w));this.setCamera({x:v+(h/k-h)-(h/w-h),y:S+(g/k-g)-(g/w-g),z:k});return}this.pan(e.delta),!r.isDragging&&r.isPointing&&a.dist(u)>(this.getInstanceState().isCoarsePointer?KP:WS)/this.getZoomLevel()&&(r.isDragging=!0)}break}case"pointer":{if(r.isPinching)return;this._updateInputsFromEvent(e);const{isPen:h}=e;switch(e.name){case"pointer_down":{if(this.clearOpenMenus(),this._selectedShapeIdsAtPointerDown=this.getSelectedShapeIds(),e.button===0&&(this.capturedPointerId=e.pointerId),r.buttons.add(e.button),r.isPointing=!0,r.isDragging=!1,this.getInstanceState().isPenMode){if(!h)return}else h&&this.updateInstanceState({isPenMode:!0});if(e.button===5?(this._restoreToolId=this.getCurrentToolId(),this.complete(),this.setCurrentTool("eraser")):e.button===1&&(this.inputs.isPanning||(this._prevCursor=this.getInstanceState().cursor.type),this.inputs.isPanning=!0),this.inputs.isPanning)return this.stopCameraAnimation(),this.updateInstanceState({cursor:{type:"grabbing",rotation:0}}),this;l.setTo(d),a.setTo(u);break}case"pointer_move":{if(!h&&this.getInstanceState().isPenMode)return;if(this.inputs.isPanning&&this.inputs.isPointing){const{currentScreenPoint:g,previousScreenPoint:v}=this.inputs;this.pan(N.Sub(g,v));return}!r.isDragging&&r.isPointing&&a.dist(u)>(this.getInstanceState().isCoarsePointer?KP:WS)/this.getZoomLevel()&&(r.isDragging=!0);break}case"pointer_up":{if(r.buttons.delete(e.button),r.isPointing=!1,r.isDragging=!1,this.getIsMenuOpen()||!h&&this.getInstanceState().isPenMode)return;this.capturedPointerId===e.pointerId&&(this.capturedPointerId=null,e.button=0),r.isPanning?e.button===1?this.inputs.keys.has(" ")?(this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:l1}),this.updateInstanceState({cursor:{type:"grab",rotation:0}})):(r.isPanning=!1,this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:l1}),this.updateInstanceState({cursor:{type:this._prevCursor,rotation:0}})):e.button===0&&(this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:l1}),this.updateInstanceState({cursor:{type:"grab",rotation:0}})):e.button===5&&(this.complete(),this.setCurrentTool(this._restoreToolId));break}}break}case"keyboard":{switch(e.key==="ShiftRight"&&(e.key="ShiftLeft"),e.key==="AltRight"&&(e.key="AltLeft"),e.code==="ControlRight"&&(e.code="ControlLeft"),e.name){case"key_down":{r.keys.add(e.code),!e.ctrlKey&&e.code==="Space"&&(this.inputs.isPanning||(this._prevCursor=this.getInstanceState().cursor.type),this.inputs.isPanning=!0,this.updateInstanceState({cursor:{type:this.inputs.isPointing?"grabbing":"grab",rotation:0}}));break}case"key_up":{r.keys.delete(e.code),e.code==="Space"&&!this.inputs.buttons.has(1)&&(this.inputs.isPanning=!1,this.updateInstanceState({cursor:{type:this._prevCursor,rotation:0}}));break}}break}}if(e.type==="pointer"&&(e.button===1?e.name="middle_click":e.button===2&&(e.name="right_click"),e.isPen===this.getInstanceState().isPenMode))switch(e.name){case"pointer_down":{const h=this._clickManager.transformPointerDownEvent(e);if(e.name!==h.name){this.root.handleEvent(e),this.emit("event",e),this.root.handleEvent(h),this.emit("event",h);return}break}case"pointer_up":{const h=this._clickManager.transformPointerUpEvent(e);if(e.name!==h.name){this.root.handleEvent(e),this.emit("event",e),this.root.handleEvent(h),this.emit("event",h);return}break}case"pointer_move":{this._clickManager.handleMove();break}}this.root.handleEvent(e),this.emit("event",e)}),this});this.store=e,this.snaps=new Lf(this),this.user=new tu(r??b4(),d??!1),this.getContainer=l??(()=>document.body),this.textMeasure=new VQ(this);class h extends f1{}T(h,"initial",u??""),this.root=new h(this),this.root.children={};const g=_4(o),v=new Set(Object.keys(e.schema.types.shape.migrations.subTypeMigrations));for(const O of g){if(!v.has(O.type))throw Error(`Editor and store have different shapes: "${O.type}" was passed into the editor but not the schema`);v.delete(O.type)}if(v.size>0)throw Error(`Editor and store have different shapes: "${[...v][0]}" is present in the store schema but not provided to the editor`);const S={},w={},k=new Map;for(const O of g){const D=new O(this);S[O.type]=D;const z=LL(O.props??{});w[O.type]=z;for(const U of z.keys())if(!k.has(U.id))k.set(U.id,U);else if(k.get(U.id)!==U)throw Error(`Multiple style props with id "${U.id}" in use. Style prop IDs must be unique.`)}this.shapeUtils=S,this.styleProps=w;for(const O of[...a]){if(AC(this.root.children,O.id))throw Error(`Can't override tool with id "${O.id}"`);this.root.children[O.id]=new O(this,this.root)}this.environment=new $Q(this),this.scribbles=new LQ(this);const C=new Set,E=O=>{var me;const D=this.getShape(O);if(!D)return;const{start:z,end:U}=D.props,Y=z.type==="binding"?this.getShape(z.boundShapeId):void 0,q=U.type==="binding"?this.getShape(U.boundShapeId):void 0,X=this.getAncestorPageId(D);if(!X)return;let ie;if(Y&&q)ie=this.findCommonAncestor([Y,q])??X;else if(Y||q){const we=(me=Y||q)==null?void 0:me.parentId;we&&we===D.parentId?ie=D.parentId:ie=X}else return;ie&&ie!==D.parentId&&this.reparentShapes([O],ie);const pe=this.getShape(O);if(!pe)throw Error("no reparented arrow");const ae=this.getShapeNearestSibling(pe,Y),te=this.getShapeNearestSibling(pe,q);let he;if(ae&&te)he=ae.index>te.index?ae:te;else if(ae&&!te)he=ae;else if(te&&!ae)he=te;else return;let ce;const ge=this.getSortedChildIdsForParent(he.parentId).map(we=>this.getShape(we)).filter(we=>we.index>he.index);if(ge.length){const we=ge.find(V=>V.type!=="arrow");if(pe.index>he.index&&(!we||pe.index<we.index))return;ce=LS(he.index,ge[0].index)}else ce=Zu(he.index);ce!==pe.index&&this.updateShapes([{id:O,type:"arrow",index:ce}])},R=(O,D)=>{const{x:z,y:U}=Yl(this,O)[D];this.store.put([{...O,props:{...O.props,[D]:{type:"point",x:z,y:U}}}])},L=O=>{for(const D of["start","end"]){const z=O.props[D];if(z.type!=="binding")continue;const U=this.getShape(z.boundShapeId),Y=this.getAncestorPageId(O)===this.getAncestorPageId(U);(!U||!Y)&&R(O,D)}E(O.id)},A=(O,D)=>{let z=null;const U=O.selectedShapeIds.filter(X=>!D.has(X));U.length!==O.selectedShapeIds.length&&(z||(z={...O}),z.selectedShapeIds=U);const Y=O.erasingShapeIds.filter(X=>!D.has(X));Y.length!==O.erasingShapeIds.length&&(z||(z={...O}),z.erasingShapeIds=Y),O.hoveredShapeId&&D.has(O.hoveredShapeId)&&(z||(z={...O}),z.hoveredShapeId=null),O.editingShapeId&&D.has(O.editingShapeId)&&(z||(z={...O}),z.editingShapeId=null);const q=O.hintingShapeIds.filter(X=>!D.has(X));return q.length!==O.hintingShapeIds.length&&(z||(z={...O}),z.hintingShapeIds=q),O.focusedGroupId&&D.has(O.focusedGroupId)&&(z||(z={...O}),z.focusedGroupId=null),z};if(this.sideEffects=new jQ(this),this.sideEffects.registerBatchCompleteHandler(()=>{var O;for(const D of C){C.delete(D);const z=this.getShape(D);if(!z)continue;const U=this.getShapeUtil(z),Y=(O=U.onChildrenChange)==null?void 0:O.call(U,z);Y!=null&&Y.length&&this.updateShapes(Y,{squashing:!0})}this.emit("update")}),this.sideEffects.registerBeforeDeleteHandler("shape",O=>{O.parentId&&il(O.parentId)&&C.add(O.parentId);const D=this._getArrowBindingsIndex().get()[O.id];if(D!=null&&D.length)for(const{arrowId:Y,handleId:q}of D){const X=this.getShape(Y);X&&R(X,q)}const z=new Set([O.id]),U=Bt(this.getPageStates().map(Y=>A(Y,z)));U.length&&this.store.put(U)}),this.sideEffects.registerBeforeDeleteHandler("page",O=>{var Y;if(this.getInstanceState().currentPageId!==O.id)return;const D=(Y=this.getPages().find(q=>q.id!==O.id))==null?void 0:Y.id;if(!D)return;this.store.put([{...this.getInstanceState(),currentPageId:D}]);const z=Go.createId(O.id),U=Xo.createId(O.id);this.store.remove([z,U])}),this.sideEffects.registerAfterChangeHandler("shape",(O,D)=>{if(this.isShapeOfType(D,"arrow")&&L(D),O.parentId!==D.parentId){const z=U=>{const Y=this._getArrowBindingsIndex().get()[U];if(Y!=null&&Y.length)for(const q of Y)E(q.arrowId)};z(D.id),this.visitDescendants(D.id,z)}if(O.parentId!==D.parentId&&Js(D.parentId)){const z=new Set([O.id]);this.visitDescendants(O.id,U=>{z.add(U)});for(const U of this.getPageStates()){if(U.pageId===D.parentId)continue;const Y=A(U,z);Y&&this.store.put([Y])}}O.parentId&&il(O.parentId)&&C.add(O.parentId),D.parentId!==O.parentId&&il(D.parentId)&&C.add(D.parentId)}),this.sideEffects.registerAfterChangeHandler("instance_page_state",(O,D)=>{if((O==null?void 0:O.selectedShapeIds)!==(D==null?void 0:D.selectedShapeIds)){const z=D.selectedShapeIds.filter(Y=>{var X,ie;let q=(X=this.getShape(Y))==null?void 0:X.parentId;for(;il(q);){if(D.selectedShapeIds.includes(q))return!1;q=(ie=this.getShape(q))==null?void 0:ie.parentId}return!0});let U=null;if(z.length>0){const Y=this.findCommonAncestor(Bt(z.map(q=>this.getShape(q))),q=>this.isShapeOfType(q,"group"));Y&&(U=Y)}else D!=null&&D.focusedGroupId&&(U=D.focusedGroupId);(z.length!==D.selectedShapeIds.length||U!==D.focusedGroupId)&&this.store.put([{...D,selectedShapeIds:z,focusedGroupId:U??null}])}}),this.sideEffects.registerAfterCreateHandler("shape",O=>{this.isShapeOfType(O,"arrow")&&L(O)}),this.sideEffects.registerAfterCreateHandler("page",O=>{const D=Go.createId(O.id),z=Xo.createId(O.id);this.store.has(D)||this.store.put([Go.create({id:D})]),this.store.has(z)||this.store.put([Xo.create({id:z,pageId:O.id})])}),this._currentPageShapeIds=RQ(this.store,()=>this.getCurrentPageId()),this._parentIdsToChildIds=IQ(this.store),this.disposables.add(this.store.listen(O=>{this.emit("change",O)})),this.store.ensureStoreIsUsable(),this._setInstancePageState({editingShapeId:null,hoveredShapeId:null,erasingShapeIds:[]},{ephemeral:!0}),u&&this.root.children[u]===void 0)throw Error(`No state found for initialState "${u}".`);this.root.enter(void 0,"initial"),this.getInstanceState().followingUserId&&this.stopFollowingUser(),this.updateRenderingBounds(),requestAnimationFrame(()=>{this._tickManager.start()})}dispose(){this.disposables.forEach(e=>e()),this.disposables.clear()}getShapeUtil(e){const r=typeof e=="string"?e:e.type,o=Zh(this.shapeUtils,r);return Qh(o,`No shape util found for type "${r}"`),o}undo(){return this.history.undo(),this}getCanUndo(){return this.history.getNumUndos()>0}redo(){return this.history.redo(),this}getCanRedo(){return this.history.getNumRedos()>0}mark(e,r,o){return this.history.mark(e,r,o),this}bail(){return this.history.bail(),this}bailToMark(e){return this.history.bailToMark(e),this}batch(e){return this.history.batch(e),this}_getArrowBindingsIndex(){return PQ(this)}getArrowsBoundTo(e){return this._getArrowBindingsIndex().get()[e]||rd}getArrowInfoCache(){return this.store.createComputedCache("arrow infoCache",e=>mS(e)?jS(this,e):h2(this,e))}getArrowInfo(e){const r=typeof e=="string"?e:e.id;return this.getArrowInfoCache().get(r)}annotateError(e,{origin:r,willCrashApp:o,tags:a,extras:l}){const u=this.createErrorAnnotations(r,o);return GI(e,{tags:{...u.tags,...a},extras:{...u.extras,...l}}),o&&this.store.markAsPossiblyCorrupted(),this}createErrorAnnotations(e,r){try{const o=this.getEditingShapeId();return{tags:{origin:e,willCrashApp:r},extras:{activeStateNode:this.root.getPath(),selectedShapes:this.getSelectedShapes(),editingShape:o?this.getShape(o):void 0,inputs:this.inputs}}}catch{return{tags:{origin:e,willCrashApp:r},extras:{}}}}getCrashingError(){return this._crashingError}crash(e){return this._crashingError=e,this.store.markAsPossiblyCorrupted(),this.emit("crash",{error:e}),this}getPath(){return this.root.getPath().split("root.")[1]}isIn(e){const r=e.split(".").reverse();let o=this.root;for(;r.length>0;){const a=r.pop();if(!a)return!0;const l=o.getCurrent();if((l==null?void 0:l.id)===a){if(r.length===0)return!0;o=l;continue}else return!1}return!1}isInAny(...e){return e.some(r=>this.isIn(r))}setCurrentTool(e,r={}){return this.root.transition(e,r),this}getCurrentTool(){return this.root.getCurrent()}getCurrentToolId(){const e=this.getCurrentTool();return e?e.getCurrentToolIdMask()??e.id:""}getStateDescendant(e){var a;const r=e.split(".").reverse();let o=this.root;for(;r.length>0;){const l=r.pop();if(!l)return o;const u=(a=o.children)==null?void 0:a[l];if(!u)return;o=u}return o}getDocumentSettings(){return this.store.get(HP)}updateDocumentSettings(e){return this.store.put([{...this.getDocumentSettings(),...e}]),this}getInstanceState(){return this.store.get(Cs)}updateInstanceState(e,r){return this._updateInstanceState(e,{ephemeral:!0,squashing:!0,...r}),e.isChangingStyle!==void 0&&(clearTimeout(this._isChangingStyleTimeout),e.isChangingStyle===!0&&(this._isChangingStyleTimeout=setTimeout(()=>{this.updateInstanceState({isChangingStyle:!1})},2e3))),this}getOpenMenus(){return this.getInstanceState().openMenus}addOpenMenu(e){const r=new Set(this.getOpenMenus());return r.has(e)||(r.add(e),this.updateInstanceState({openMenus:[...r]})),this}deleteOpenMenu(e){const r=new Set(this.getOpenMenus());return r.has(e)&&(r.delete(e),this.updateInstanceState({openMenus:[...r]})),this}clearOpenMenus(){return this.getOpenMenus().length&&this.updateInstanceState({openMenus:[]}),this}getIsMenuOpen(){return this.getOpenMenus().length>0}getPageStates(){return this._getPageStatesQuery().get()}_getPageStatesQuery(){return this.store.query.records("instance_page_state")}getCurrentPageState(){return this.store.get(this._getCurrentPageStateId())}_getCurrentPageStateId(){return Xo.createId(this.getCurrentPageId())}updateCurrentPageState(e,r){return this._setInstancePageState(e,r),this}getSelectedShapeIds(){return this.getCurrentPageState().selectedShapeIds}getSelectedShapes(){const{selectedShapeIds:e}=this.getCurrentPageState();return Bt(e.map(r=>this.store.get(r)))}setSelectedShapes(e,r){const o=e.map(a=>typeof a=="string"?a:a.id);return this._setSelectedShapes(o,r),this}isAncestorSelected(e){const r=typeof e=="string"?e:(e==null?void 0:e.id)??null,o=this.getShape(r);if(!o)return!1;const a=this.getSelectedShapeIds();return!!this.findShapeAncestor(o,l=>a.includes(l.id))}select(...e){const r=typeof e[0]=="string"?e:e.map(o=>o.id);return this.setSelectedShapes(r),this}deselect(...e){const r=typeof e[0]=="string"?e:e.map(a=>a.id),o=this.getSelectedShapeIds();return o.length>0&&r.length>0&&this.setSelectedShapes(o.filter(a=>!r.includes(a))),this}selectAll(){const e=this.getSortedChildIdsForParent(this.getCurrentPageId());return e.length<=0?this:(this.setSelectedShapes(this._getUnlockedShapeIds(e)),this)}selectNone(){return this.getSelectedShapeIds().length>0&&this.setSelectedShapes([]),this}getOnlySelectedShape(){const e=this.getSelectedShapes();return e.length===1?e[0]:null}getSelectionPageBounds(){const e=this.getCurrentPageState().selectedShapeIds;return e.length===0?null:Mt.Common(Bt(e.map(r=>this.getShapePageBounds(r))))}getSelectionRotation(){const e=this.getSelectedShapeIds();if(e.length===0)return 0;if(e.length===1)return this.getShapePageTransform(this.getSelectedShapeIds()[0]).rotation();const r=e.map(o=>this.getShapePageTransform(o).rotation());return r.every(o=>Math.abs(o-r[0])<Math.PI/180)?this.getShapePageTransform(e[0]).rotation():0}getSelectionRotatedPageBounds(){const e=this.getSelectedShapeIds();if(e.length===0)return;const r=this.getSelectionRotation();if(r===0)return this.getSelectionPageBounds();if(e.length===1){const a=this.getShapeGeometry(e[0]).bounds.clone(),l=this.getShapePageTransform(e[0]);return a.point=l.applyToPoint(a.point),a}const o=Mt.FromPoints(this.getSelectedShapeIds().flatMap(a=>{const l=this.getShapePageTransform(a);return l?l.applyToPoints(this.getShapeGeometry(a).vertices):[]}).map(a=>N.Rot(a,-r)));return o.point=o.point.rot(r),o}getFocusedGroupId(){return this.getCurrentPageState().focusedGroupId??this.getCurrentPageId()}getFocusedGroup(){const e=this.getFocusedGroupId();return e?this.getShape(e):void 0}setFocusedGroup(e){const r=typeof e=="string"?e:(e==null?void 0:e.id)??null;if(r!==null){const o=this.getShape(r);if(!o)throw Error(`Editor.setFocusedGroup: Shape with id ${r} does not exist`);if(!this.isShapeOfType(o,"group"))throw Error(`Editor.setFocusedGroup: Cannot set focused group to shape of type ${o.type}`)}return r===this.getFocusedGroupId()?this:(this._setFocusedGroupId(r),this)}popFocusedGroupId(){const e=this.getFocusedGroup();if(e){const r=this.findShapeAncestor(e,o=>this.isShapeOfType(o,"group"));this.setFocusedGroup((r==null?void 0:r.id)??null),this.select(e.id)}else this.setFocusedGroup(null),this.selectNone();return this}getEditingShapeId(){return this.getCurrentPageState().editingShapeId}getEditingShape(){const e=this.getEditingShapeId();return e?this.getShape(e):void 0}setEditingShape(e){const r=typeof e=="string"?e:(e==null?void 0:e.id)??null;if(r!==this.getEditingShapeId()){if(r){const o=this.getShape(r);if(o&&this.getShapeUtil(o).canEdit(o))return this._setInstancePageState({editingShapeId:r}),this}this._setInstancePageState({editingShapeId:null})}return this}getHoveredShapeId(){return this.getCurrentPageState().hoveredShapeId}getHoveredShape(){const e=this.getHoveredShapeId();return e?this.getShape(e):void 0}setHoveredShape(e){const r=typeof e=="string"?e:(e==null?void 0:e.id)??null;return r===this.getHoveredShapeId()?this:(this.updateCurrentPageState({hoveredShapeId:r},{ephemeral:!0}),this)}getHintingShapeIds(){return this.getCurrentPageState().hintingShapeIds}getHintingShape(){const e=this.getHintingShapeIds();return Bt(e.map(r=>this.getShape(r)))}setHintingShapes(e){const r=typeof e[0]=="string"?e:e.map(o=>o.id);return this.updateCurrentPageState({hintingShapeIds:X1(r)},{ephemeral:!0}),this}getErasingShapeIds(){return this.getCurrentPageState().erasingShapeIds}getErasingShapes(){const e=this.getErasingShapeIds();return Bt(e.map(r=>this.getShape(r)))}setErasingShapes(e){const r=typeof e[0]=="string"?e:e.map(a=>a.id);r.sort();const o=this.getErasingShapeIds();if(r.length===o.length){for(let a=0;a<r.length;a++)if(r[a]!==o[a]){this._setInstancePageState({erasingShapeIds:r},{ephemeral:!0});break}}else this._setInstancePageState({erasingShapeIds:r},{ephemeral:!0});return this}getCroppingShapeId(){return this.getCurrentPageState().croppingShapeId}setCroppingShape(e){const r=typeof e=="string"?e:(e==null?void 0:e.id)??null;if(r!==this.getCroppingShapeId())if(!r)this.updateCurrentPageState({croppingShapeId:null});else{const o=this.getShape(r),a=this.getShapeUtil(o);o&&a.canCrop(o)&&this.updateCurrentPageState({croppingShapeId:r})}return this}getCameraId(){return Go.createId(this.getCurrentPageId())}getCamera(){return this.store.get(this.getCameraId())}getZoomLevel(){return this.getCamera().z}_setCamera(e){const r=this.getCamera();return r.x===e.x&&r.y===e.y&&r.z===e.z?this:(this.batch(()=>{this.store.put([{...r,...e}]);const{currentScreenPoint:o}=this.inputs;this.dispatch({type:"pointer",target:"canvas",name:"pointer_move",point:o,pointerId:oD.CAMERA_MOVE,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,shiftKey:this.inputs.shiftKey,button:0,isPen:this.getInstanceState().isPenMode??!1}),this._tickCameraState()}),this)}setCamera(e,r){const o=Number.isFinite(e.x)?e.x:0,a=Number.isFinite(e.y)?e.y:0,l=Number.isFinite(e.z)?e.z:this.getZoomLevel();if(this.stopCameraAnimation(),this.getInstanceState().followingUserId&&this.stopFollowingUser(),r){const{width:u,height:d}=this.getViewportScreenBounds();return this._animateToViewport(new Mt(-o,-a,u/l,d/l),r)}else this._setCamera({x:o,y:a,z:l});return this}centerOnPoint(e,r){if(!this.getInstanceState().canMoveCamera)return this;const{width:o,height:a}=this.getViewportPageBounds();return this.setCamera({x:-(e.x-o/2),y:-(e.y-a/2),z:this.getCamera().z},r),this}zoomToContent(){const e=this.getSelectionPageBounds()??this.getCurrentPageBounds();return e&&this.zoomToBounds(e,Math.min(1,this.getZoomLevel()),{duration:220}),this}zoomToFit(e){if(!this.getInstanceState().canMoveCamera)return this;const r=[...this.getCurrentPageShapeIds()];if(r.length<=0)return this;const o=Mt.Common(Bt(r.map(a=>this.getShapePageBounds(a))));return this.zoomToBounds(o,void 0,e),this}resetZoom(e=this.getViewportScreenCenter(),r){if(!this.getInstanceState().canMoveCamera)return this;const{x:o,y:a,z:l}=this.getCamera(),{x:u,y:d}=e;return this.setCamera({x:o+(u/1-u)-(u/l-u),y:a+(d/1-d)-(d/l-d),z:1},r),this}zoomIn(e=this.getViewportScreenCenter(),r){if(!this.getInstanceState().canMoveCamera)return this;const{x:o,y:a,z:l}=this.getCamera();let u=Sf;for(let g=1;g<Zg.length;g++){const v=Zg[g-1],S=Zg[g];if(!(S-l<=(S-v)/2)){u=S;break}}const{x:d,y:h}=e;return this.setCamera({x:o+(d/u-d)-(d/l-d),y:a+(h/u-h)-(h/l-h),z:u},r),this}zoomOut(e=this.getViewportScreenCenter(),r){if(!this.getInstanceState().canMoveCamera)return this;const{x:o,y:a,z:l}=this.getCamera();let u=pS;for(let g=Zg.length-1;g>0;g--){const v=Zg[g-1],S=Zg[g];if(!(S-l>=(S-v)/2)){u=v;break}}const{x:d,y:h}=e;return this.setCamera({x:o+(d/u-d)-(d/l-d),y:a+(h/u-h)-(h/l-h),z:u},r),this}zoomToSelection(e){if(!this.getInstanceState().canMoveCamera)return this;const r=this.getSelectionPageBounds();return r?(this.zoomToBounds(r,Math.max(1,this.getZoomLevel()),e),this):this}panZoomIntoView(e,r){if(!this.getInstanceState().canMoveCamera)return this;if(e.length<=0)return this;const o=Mt.Common(Bt(e.map(l=>this.getShapePageBounds(l)))),a=this.getViewportPageBounds();if(a.h<o.h||a.w<o.w)return this.zoomToBounds(o,this.getCamera().z,r),this;{const l=this.getViewportPageBounds().clone().expandBy(-32/this.getZoomLevel());let u=0,d=0;l.maxY<o.maxY?d=l.maxY-o.maxY:l.minY>o.minY&&(d=l.minY-o.minY),l.maxX<o.maxX?u=l.maxX-o.maxX:l.minX>o.minX&&(u=l.minX-o.minX);const h=this.getCamera();this.setCamera({x:h.x+u,y:h.y+d,z:h.z},r)}return this}zoomToBounds(e,r,o){if(!this.getInstanceState().canMoveCamera)return this;const a=this.getViewportScreenBounds(),l=Math.min(256,a.width*.28);let u=Bc(Math.min((a.width-l)/e.width,(a.height-l)/e.height),pS,Sf);return r!==void 0&&(u=Math.min(r,u)),this.setCamera({x:-e.minX+(a.width-e.width*u)/2/u,y:-e.minY+(a.height-e.height*u)/2/u,z:u},o),this}pan(e,r){if(!this.getInstanceState().canMoveCamera)return this;const{x:o,y:a,z:l}=this.getCamera();return this.setCamera({x:o+e.x/l,y:a+e.y/l,z:l},r),this}stopCameraAnimation(){return this.emit("stop-camera-animation"),this}_animateViewport(e){if(!this._viewportAnimation)return;const r=()=>{this.removeListener("tick",this._animateViewport),this.removeListener("stop-camera-animation",r),this._viewportAnimation=null};this.once("stop-camera-animation",r),this._viewportAnimation.elapsed+=e;const{elapsed:o,easing:a,duration:l,start:u,end:d}=this._viewportAnimation;if(o>l){this._setCamera({x:-d.x,y:-d.y,z:this.getViewportScreenBounds().width/d.width}),r();return}const h=l-o,g=a(1-h/l),v=u.minX+(d.minX-u.minX)*g,S=u.minY+(d.minY-u.minY)*g,w=u.maxX+(d.maxX-u.maxX)*g;this._setCamera({x:-v,y:-S,z:this.getViewportScreenBounds().width/(w-v)})}_animateToViewport(e,r={}){const{duration:o=0,easing:a=Jo.easeInOutCubic}=r,l=this.user.getAnimationSpeed(),u=this.getViewportPageBounds();return this.stopCameraAnimation(),this.getInstanceState().followingUserId&&this.stopFollowingUser(),o===0||l===0?this._setCamera({x:-e.x,y:-e.y,z:this.getViewportScreenBounds().width/e.width}):(this._viewportAnimation={elapsed:0,duration:o/l,easing:a,start:u.clone(),end:e.clone()},this.addListener("tick",this._animateViewport),this)}slideCamera(e={}){if(!this.getInstanceState().canMoveCamera)return this;if(this.stopCameraAnimation(),this.user.getAnimationSpeed()===0)return this;const{speed:o,friction:a,direction:l,speedThreshold:u=.01}=e;let d=Math.min(o,1);const h=()=>{this.removeListener("tick",g),this.removeListener("stop-camera-animation",h)};this.once("stop-camera-animation",h);const g=v=>{const{x:S,y:w,z:k}=this.getCamera(),C=N.Mul(l,d*v/k);d*=1-a,d<u?h():this._setCamera({x:S+C.x,y:w+C.y,z:k})};return this.addListener("tick",g),this}animateToUser(e){const o=[...this.store.query.records("instance_presence",()=>({userId:{eq:e}})).get()].sort((a,l)=>a.lastActivityTimestamp-l.lastActivityTimestamp).pop();return o?(this.batch(()=>{this.getInstanceState().followingUserId!==null&&this.stopFollowingUser();const a=o.currentPageId===this.getCurrentPageId();a||this.setCurrentPage(o.currentPageId);const l=a?{duration:500}:void 0;this.centerOnPoint(o.cursor,l);const{highlightedUserIds:u}=this.getInstanceState();this.updateInstanceState({highlightedUserIds:[...u,e]}),setTimeout(()=>{const d=[...this.getInstanceState().highlightedUserIds],h=d.indexOf(e);h<0||(d.splice(h,1),this.updateInstanceState({highlightedUserIds:d}))},GL)}),this):this}animateToShape(e,r=MW){if(!this.getInstanceState().canMoveCamera)return this;const o=this.getViewportScreenBounds().clone().expandBy(-32),a=o.width/o.height,l=this.getShapePageBounds(e);if(!l)return this;const u=l.width/l.height,d=l.clone(),h=l.width/o.width;return d.width+=(o.minX+o.maxX)*h,d.height+=(o.minY+o.maxY)*h,d.x-=o.minX*h,d.y-=o.minY*h,u>a?(d.height=l.width/a,d.y-=(d.height-l.height)/2):(d.width=l.height*a,d.x-=(d.width-l.width)/2),this._animateToViewport(d,r)}updateViewportScreenBounds(e=!1){const r=this.getContainer();if(!r)return this;const o=r.getBoundingClientRect(),a=new Mt(o.left||o.x,o.top||o.y,Math.max(o.width,1),Math.max(o.height,1)),l=a.equals(this.getViewportScreenBounds()),{_willSetInitialBounds:u}=this;if(l)this._willSetInitialBounds=!1;else if(u)this._willSetInitialBounds=!1,this.updateInstanceState({screenBounds:a.toJson()},{squashing:!0,ephemeral:!0});else if(e&&!this.getInstanceState().followingUserId){const d=this.getViewportPageCenter();this.updateInstanceState({screenBounds:a.toJson()},{squashing:!0,ephemeral:!0}),this.centerOnPoint(d)}else this.updateInstanceState({screenBounds:a.toJson()},{squashing:!0,ephemeral:!0});return this._tickCameraState(),this.updateRenderingBounds(),this}getViewportScreenBounds(){const{x:e,y:r,w:o,h:a}=this.getInstanceState().screenBounds;return new Mt(e,r,o,a)}getViewportScreenCenter(){return this.getViewportScreenBounds().center}getViewportPageBounds(){const{w:e,h:r}=this.getViewportScreenBounds(),{x:o,y:a,z:l}=this.getCamera();return new Mt(-o,-a,e/l,r/l)}getViewportPageCenter(){return this.getViewportPageBounds().center}screenToPage(e){const{screenBounds:r}=this.store.unsafeGetWithoutCapture(Cs),{x:o,y:a,z:l=1}=this.getCamera();return{x:(e.x-r.x)/l-o,y:(e.y-r.y)/l-a,z:e.z??.5}}pageToScreen(e){const{screenBounds:r}=this.store.unsafeGetWithoutCapture(Cs),{x:o,y:a,z:l=1}=this.getCamera();return{x:(e.x+o)*l+r.x,y:(e.y+a)*l+r.y,z:e.z??.5}}startFollowingUser(e){const r=this.store.query.records("instance_presence",()=>({userId:{eq:e}})),o=this.user.getId();if(o||console.warn("You should set the userId for the current instance before following a user"),r.get().some(d=>d.followingUserId===o))return this;Vl(()=>{this.stopFollowingUser(),this.updateInstanceState({followingUserId:e},{ephemeral:!0})});const a=()=>{this.removeListener("frame",u),this.removeListener("stop-following",a)};let l=!1;const u=()=>{const d=[...r.get()].sort((ae,te)=>ae.lastActivityTimestamp-te.lastActivityTimestamp).pop();if(!d){this.stopFollowingUser();return}const h=d.currentPageId===this.getCurrentPageId(),g=h?CW:1;if(!h){this.stopFollowingUser(),this.setCurrentPage(d.currentPageId),this.startFollowingUser(e);return}const{center:v,width:S,height:w}=this.getViewportPageBounds(),k=Mt.From(d.screenBounds),C=k.width/d.camera.z,E=k.height/d.camera.z,R=new N(C/2-d.camera.x,E/2-d.camera.y),L=d.followingUserId===o,A=S+(C-S)*g,O=w+(E-w)*g,D=L?w/O:Math.min(S/A,w/O),z=Bc(this.getCamera().z*D,pS,Sf),U=this.getViewportScreenBounds().w/z,Y=this.getViewportScreenBounds().h/z,q=R.sub(v),X=N.Add(v,N.Mul(q,g)),ie=N.Sub(X,v).len(),pe=Math.abs(z-this.getCamera().z);if(ie<EW&&pe<TW){l=!0;return}l&&ie<_W&&pe<kW||(l=!1,this.stopCameraAnimation(),this._setCamera({x:-(X.x-U/2),y:-(X.y-Y/2),z}))};return this.once("stop-following",a),this.addListener("frame",u),this}stopFollowingUser(){return this.updateInstanceState({followingUserId:null},{ephemeral:!0}),this.emit("stop-following"),this}getCameraState(){return this._cameraState.get()}getUnorderedRenderingShapes(e){const r=[];let o=qu*2,a=qu;const l=this.getEditingShapeId(),u=this.getSelectedShapeIds(),d=this.getErasingShapeIds(),h=this.getRenderingBoundsExpanded(),g=Number.isFinite(this.renderingBoundsMargin),v=(S,w,k)=>{const C=this.getShape(S);if(!C)return;w*=C.opacity;let E=!1,R=!1;const L=this.getShapeUtil(C),A=this.getShapeMaskedPageBounds(S);e&&(R=!k&&d.includes(S),R&&(w*=.32),E=g&&L.canUnmount(C)&&l!==S&&(A===void 0||!h.includes(A)&&!u.includes(S))),r.push({id:S,shape:C,util:L,index:o,backgroundIndex:a,opacity:w,isCulled:E,maskedPageBounds:A}),o+=1,a+=1;const O=this.getSortedChildIdsForParent(S);if(!O.length)return;let D=null;L.providesBackgroundForChildren(C)&&(D=a,a=o,o+=qu);for(const z of O)v(z,w,k||R);D!==null&&(a=D)};for(const S of this.getSortedChildIdsForParent(this.getCurrentPageId()))v(S,1,!1);return r}getRenderingShapes(){return this.getUnorderedRenderingShapes(!0).sort(pK)}getRenderingBounds(){return this._renderingBounds.get()}getRenderingBoundsExpanded(){return this._renderingBoundsExpanded.get()}updateRenderingBounds(){const e=this.getViewportPageBounds();return e.equals(this._renderingBounds.__unsafe__getWithoutCapture())?this:(this._renderingBounds.set(e.clone()),Number.isFinite(this.renderingBoundsMargin)?this._renderingBoundsExpanded.set(e.clone().expandBy(this.renderingBoundsMargin/this.getZoomLevel())):this._renderingBoundsExpanded.set(e),this)}_getAllPagesQuery(){return this.store.query.records("page")}getPages(){return this._getAllPagesQuery().get().sort(qo)}getCurrentPage(){return this.getPage(this.getCurrentPageId())}getCurrentPageId(){return this.getInstanceState().currentPageId}getPage(e){return this.store.get(typeof e=="string"?e:e.id)}getCurrentPageShapeIds(){return this._currentPageShapeIds.get()}getPageShapeIds(e){const r=typeof e=="string"?e:e.id,o=this.store.query.exec("shape",{parentId:{eq:r}});return this.getShapeAndDescendantIds(o.map(a=>a.id))}setCurrentPage(e,r){const o=typeof e=="string"?e:e.id;return this._setCurrentPageId(o,r),this}updatePage(e,r){return this._updatePage(e,r),this}createPage(e){return this._createPage(e),this}deletePage(e){const r=typeof e=="string"?e:e.id;return this._deletePage(r),this}duplicatePage(e,r=cd.createId()){if(this.getPages().length>=cC)return this;const o=typeof e=="string"?e:e.id,a=this.getPage(o);if(!a)return this;const l={...this.getCamera()},u=this.getContentFromCurrentPage(this.getSortedChildIdsForParent(a.id));return this.batch(()=>{var g;const d=this.getPages(),h=LS(a.index,(g=d[d.indexOf(a)+1])==null?void 0:g.index);if(this.createPage({name:a.name+" Copy",id:r,index:h}),this.setCurrentPage(r),this.setCamera(l),u)return this.putContentOntoCurrentPage(u)}),this}renamePage(e,r,o){const a=typeof e=="string"?e:e.id;return this.getInstanceState().isReadonly?this:(this.updatePage({id:a,name:r},o),this)}_getAllAssetsQuery(){return this.store.query.records("asset")}getAssets(){return this._getAllAssetsQuery().get()}createAssets(e){return this._createAssets(e),this}updateAssets(e){return this._updateAssets(e),this}deleteAssets(e){const r=typeof e[0]=="string"?e:e.map(o=>o.id);return this._deleteAssets(r),this}getAsset(e){return this.store.get(typeof e=="string"?e:e.id)}_getShapeGeometryCache(){return this.store.createComputedCache("bounds",e=>this.getShapeUtil(e).getGeometry(e),(e,r)=>e.props===r.props)}getShapeGeometry(e){return this._getShapeGeometryCache().get(typeof e=="string"?e:e.id)}_getShapeOutlineSegmentsCache(){return this.store.createComputedCache("outline-segments",e=>this.getShapeUtil(e).getOutlineSegments(e))}getShapeOutlineSegments(e){return this._getShapeOutlineSegmentsCache().get(typeof e=="string"?e:e.id)??rd}_getShapeHandlesCache(){return this.store.createComputedCache("handles",e=>{var r,o;return(o=(r=this.getShapeUtil(e)).getHandles)==null?void 0:o.call(r,e)})}getShapeHandles(e){return this._getShapeHandlesCache().get(typeof e=="string"?e:e.id)}getShapeLocalTransform(e){const r=typeof e=="string"?e:e.id,o=this.getShape(r);if(!o)throw Error("Editor.getTransform: shape not found");return yt.Identity().translate(o.x,o.y).rotate(o.rotation)}_getShapePageTransformCache(){return this.store.createComputedCache("pageTransformCache",e=>{if(Js(e.parentId))return this.getShapeLocalTransform(e);const r=this._getShapePageTransformCache().get(e.parentId)??yt.Identity();return yt.Compose(r,this.getShapeLocalTransform(e))})}getShapeParentTransform(e){const r=typeof e=="string"?e:e.id,o=this.getShape(r);return!o||Js(o.parentId)?yt.Identity():this._getShapePageTransformCache().get(o.parentId)??yt.Identity()}getShapePageTransform(e){const r=typeof e=="string"?e:this.getShape(e).id;return this._getShapePageTransformCache().get(r)??yt.Identity()}_getShapePageBoundsCache(){return this.store.createComputedCache("pageBoundsCache",e=>{const r=this._getShapePageTransformCache().get(e.id);return r?Mt.FromPoints(yt.applyToPoints(r,this.getShapeGeometry(e).vertices)):new Mt})}getShapePageBounds(e){return this._getShapePageBoundsCache().get(typeof e=="string"?e:e.id)}_getShapeClipPathCache(){return this.store.createComputedCache("clipPathCache",e=>{const r=this._getShapeMaskCache().get(e.id);if(!r)return;if(r.length===0)return"polygon(0px 0px, 0px 0px, 0px 0px)";const o=this._getShapePageTransformCache().get(e.id);return o?`polygon(${yt.applyToPoints(yt.Inverse(o),r).map(l=>`${l.x}px ${l.y}px`).join(",")})`:void 0})}getShapeClipPath(e){return this._getShapeClipPathCache().get(typeof e=="string"?e:e.id)}_getShapeMaskCache(){return this.store.createComputedCache("pageMaskCache",e=>{if(Js(e.parentId))return;const r=this.getShapeAncestors(e.id).filter(a=>this.isShapeOfType(a,"frame"));return r.length===0?void 0:r.map(a=>this._getShapePageTransformCache().get(a.id).applyToPoints(this.getShapeGeometry(a).vertices)).reduce((a,l)=>{if(!(l&&a))return;const u=GP(a,l);return u?u.map(N.Cast):[]})})}getShapeMask(e){return this._getShapeMaskCache().get(typeof e=="string"?e:e.id)}getShapeMaskedPageBounds(e){typeof e!="string"&&(e=e.id);const r=this._getShapePageBoundsCache().get(e);if(!r)return;const o=this._getShapeMaskCache().get(e);if(o){if(o.length===0)return;const{corners:a}=r;if(a.every((u,d)=>u&&N.Equals(u,o[d])))return r.clone();const l=GP(o,a);return l?Mt.FromPoints(l):void 0}return r}getShapeAncestors(e,r=[]){const o=typeof e=="string"?e:e.id,a=this.getShape(o);if(!a)return r;const l=a.parentId;if(Js(l))return r.reverse(),r;const u=this.store.get(l);return u?(r.push(u),this.getShapeAncestors(u,r)):r}findShapeAncestor(e,r){const o=typeof e=="string"?e:e.id,a=this.getShape(o);if(!a)return;const l=a.parentId;if(Js(l))return;const u=this.getShape(l);if(u)return r(u)?u:this.findShapeAncestor(u,r)}hasAncestor(e,r){const o=typeof e=="string"?e:e==null?void 0:e.id,a=o&&this.getShape(o);return a?a.parentId===r?!0:this.hasAncestor(this.getShapeParent(a),r):!1}findCommonAncestor(e,r){var h;if(e.length===0)return;const o=typeof e[0]=="string"?e:e.map(g=>g.id),a=Bt(o.map(g=>this.getShape(g)));if(a.length===1){const g=a[0].parentId;return Js(g)?void 0:r?(h=this.findShapeAncestor(a[0],r))==null?void 0:h.id:g}const[l,...u]=a;let d=this.getShapeParent(l);for(;d;){if(r&&!r(d)){d=this.getShapeParent(d);continue}if(u.every(g=>this.hasAncestor(g,d.id)))return d.id;d=this.getShapeParent(d)}}isShapeOrAncestorLocked(e){const r=typeof e=="string"?this.getShape(e):e;return r===void 0?!1:r.isLocked?!0:this.isShapeOrAncestorLocked(this.getShapeParent(r))}getCurrentPageBounds(){let e;return this.getCurrentPageShapeIds().forEach(r=>{const o=this.getShapeMaskedPageBounds(r);o&&(e?e=e.expand(o):e=o.clone())}),e}getSelectedShapeAtPoint(e){const r=this.getSelectedShapeIds();return this.getCurrentPageShapesSorted().filter(o=>o.type!=="group"&&r.includes(o.id)).reverse().find(o=>this.isPointInShape(o,e,{hitInside:!0,margin:0}))}getShapeAtPoint(e,r={}){const o=this.getZoomLevel(),a=this.getViewportPageBounds(),{filter:l,margin:u=0,hitLabels:d=!1,hitInside:h=!1,hitFrameInside:g=!1}=r;let v=1/0,S=null,w=1/0,k=null;const C=(r.renderingOnly?this.getCurrentPageRenderingShapesSorted():this.getCurrentPageShapesSorted()).filter(E=>{if(this.isShapeOfType(E,"group"))return!1;const R=this.getShapeMask(E);return R&&!qc(e,R)?!1:l?l(E):!0});for(let E=C.length-1;E>=0;E--){const R=C[E],L=this.getShapeGeometry(R),A=L instanceof wf,O=this.getPointInShapeSpace(R,e);if((this.isShapeOfType(R,"arrow")||this.isShapeOfType(R,"geo")&&R.props.fill==="none")&&R.props.text.trim()){for(const z of L.children)if(z.isLabel&&z.isPointInBounds(O))return R}if(this.isShapeOfType(R,"frame")){const z=L.distanceToPoint(O,h);if(Math.abs(z)<=u)return k||R;if(L.hitTestPoint(O,0,!0))return k||S||(g?R:void 0);continue}let D;if(A){let z=1/0;for(const U of L.children){if(U.isLabel&&!d)continue;const Y=U.distanceToPoint(O,h);Y<z&&(z=Y)}D=z}else u===0&&(L.bounds.w<1||L.bounds.h<1)||L.bounds.containsPoint(O,u)?D=L.distanceToPoint(O,h):D=1/0;if(L.isClosed){if(D<=u){if(L.isFilled||A&&L.children[0].isFilled)return k||R;if(this.getShapePageBounds(R).contains(a))continue;if(Math.abs(D)<u)Math.abs(D)<w&&(w=Math.abs(D),k=R);else if(!k){const{area:z}=L;z<v&&(v=z,S=R)}}}else if(D<Jl/o)return R}return k||S||void 0}getShapesAtPoint(e,r={}){return this.getCurrentPageShapes().filter(o=>this.isPointInShape(o,e,r))}isPointInShape(e,r,o={}){const{hitInside:a=!1,margin:l=0}=o,u=typeof e=="string"?e:e.id,d=this.getShapeMask(u);return d&&!qc(r,d)?!1:this.getShapeGeometry(u).hitTestPoint(this.getPointInShapeSpace(e,r),l,a)}getPointInShapeSpace(e,r){const o=typeof e=="string"?e:e.id;return this._getShapePageTransformCache().get(o).clone().invert().applyToPoint(r)}getPointInParentSpace(e,r){const o=typeof e=="string"?e:e.id,a=this.getShape(o);if(!a)return new N(0,0);if(Js(a.parentId))return N.From(r);const l=this.getShapePageTransform(a.parentId);return l?l.clone().invert().applyToPoint(r):N.From(r)}getCurrentPageShapes(){return Array.from(this.getCurrentPageShapeIds(),e=>this.store.get(e))}getCurrentPageShapesSorted(){const e=new Set(this.getCurrentPageShapes().sort(qo)),r=[];function o(a){r.push(a),e.delete(a),e.forEach(l=>{l.parentId===a.id&&o(l)})}return e.forEach(a=>{const l=this.getShape(a.parentId);Gh(l)||o(a)}),r}getCurrentPageRenderingShapesSorted(){return this.getRenderingShapes().filter(({isCulled:e})=>!e).sort((e,r)=>e.index-r.index).map(({shape:e})=>e)}isShapeOfType(e,r){return(typeof e=="string"?this.getShape(e):e).type===r}getShape(e){const r=typeof e=="string"?e:e.id;if(il(r))return this.store.get(r)}getShapeParent(e){const r=typeof e=="string"?e:e==null?void 0:e.id;if(!r)return;const o=this.getShape(r);if(!(o===void 0||!il(o.parentId)))return this.store.get(o.parentId)}getShapeNearestSibling(e,r){return r?r.parentId===e.parentId?r:this.findShapeAncestor(r,a=>a.parentId===e.parentId):void 0}isShapeInPage(e,r=this.getCurrentPageId()){const o=typeof e=="string"?e:e.id,a=this.getShape(o);if(!a)return!1;let l=!1;if(a.parentId===r)l=!0;else{let u=this.getShape(a.parentId);e:for(;u;){if(u.parentId===r){l=!0;break e}u=this.getShape(u.parentId)}}return l}getAncestorPageId(e){const r=typeof e=="string"?e:e==null?void 0:e.id,o=r&&this.getShape(r);if(o)return Js(o.parentId)?o.parentId:this.getAncestorPageId(this.getShape(o.parentId))}reparentShapes(e,r,o){const a=typeof e[0]=="string"?e:e.map(k=>k.id);if(a.length===0)return this;const l=[],u=Js(r)?yt.Identity():this.getShapePageTransform(r),d=u.rotation();let h=[];const g=Bt(this.getSortedChildIdsForParent(r).map(k=>this.getShape(k)));if(o){const k=g.find(C=>C.index===o);if(k){const C=g[g.indexOf(k)+1];C?h=Am(o,C.index,a.length):h=d2(o,a.length)}else{const C=g.sort(qo).find(E=>E.index>o);C?h=Am(o,C.index,a.length):h=d2(o,a.length)}}else{const k=g.length&&g[g.length-1];h=k?d2(k.index,a.length):I4(a.length)}const v=u.clone().invert(),S=Bt(a.map(k=>this.getShape(k))),w=S.filter(k=>k.isLocked);w.length&&this.updateShapes(w.map(({id:k,type:C})=>({id:k,type:C,isLocked:!1})));for(let k=0;k<S.length;k++){const C=S[k],E=this.getShapePageTransform(C);if(!E)continue;const R=E.point();if(!R)continue;const L=v.applyToPoint(R),A=E.rotation()-d;l.push({id:C.id,type:C.type,parentId:r,x:L.x,y:L.y,rotation:A,index:h[k],isLocked:C.isLocked})}return this.updateShapes(l),this}getHighestIndexForParent(e){const r=typeof e=="string"?e:e.id,o=this._parentIdsToChildIds.get()[r];if(!o||o.length===0)return"a1";const a=this.getShape(o[o.length-1]);return Zu(a.index)}getSortedChildIdsForParent(e){const r=typeof e=="string"?e:e.id,o=this._parentIdsToChildIds.get()[r];return o?this._childIdsCache.get(o,()=>o):rd}visitDescendants(e,r){const o=typeof e=="string"?e:e.id,a=this.getSortedChildIdsForParent(o);for(const l of a)r(l)!==!1&&this.visitDescendants(l,r);return this}getShapeAndDescendantIds(e){const r=new Set,o=[...e];for(;o.length>0;){const a=o.pop();if(!a)break;if(!r.has(a)){r.add(a);for(const l of this.getSortedChildIdsForParent(a))o.push(l)}}return r}getDroppingOverShape(e,r=[]){const o=this.getCurrentPageShapesSorted();for(let a=o.length-1;a>=0;a--){const l=o[a];if(!this.getShapeUtil(l).canDropShapes(l,r)||r.find(d=>d.id===l.id||this.hasAncestor(l,d.id)))continue;const u=this.getShapeMaskedPageBounds(l.id);if(u&&u.containsPoint(e)&&this.getShapeGeometry(l).hitTestPoint(this.getPointInShapeSpace(l,e),0,!0))return l}}getOutermostSelectableShape(e,r){const o=typeof e=="string"?e:e.id,a=this.getShape(o);let l=a,u=a;const d=this.getFocusedGroup();for(;u;){if(this.isShapeOfType(u,"group")&&(d==null?void 0:d.id)!==u.id&&!this.hasAncestor(d,u.id)&&((r==null?void 0:r(u))??!0))l=u;else if((d==null?void 0:d.id)===u.id)break;u=this.getShapeParent(u)}return l}rotateShapesBy(e,r){if((typeof e[0]=="string"?e:e.map(l=>l.id)).length<=0)return this;const a=R4({editor:this});return a?(d1({delta:r,snapshot:a,editor:this,stage:"one-off"}),this):this}nudgeShapes(e,r,o){var u,d;const a=typeof e[0]=="string"?e:e.map(h=>h.id);if(a.length<=0)return this;const l=[];for(const h of a){const g=this.getShape(h);if(!g)throw Error(`Could not find a shape with the id ${h}.`);const v=N.Cast(r),S=this.getShapeParentTransform(g);S&&v.rot(-S.rotation());const w=(d=(u=this.getShapeUtil(g)).onTranslateStart)==null?void 0:d.call(u,g);l.push(w?{...w,x:g.x+v.x,y:g.y+v.y}:{id:h,x:g.x+v.x,y:g.y+v.y,type:g.type})}return this.updateShapes(l,{squashing:!0,...o}),this}duplicateShapes(e,r){const o=typeof e[0]=="string"?e:e.map(g=>g.id);if(o.length<=0)return this;const a=new Set(o),l=[],u=[...o];for(;u.length>0;){const g=u.pop();if(!g)break;l.push(g),this.getSortedChildIdsForParent(g).forEach(v=>u.push(v))}l.reverse();const d=new Map(l.map(g=>[g,Ir()])),h=Bt(l.map(g=>{const v=this.getShape(g);if(!v)return null;const S=d.get(g);let w=0,k=0;if(r&&a.has(g)){const z=this.getShapeParentTransform(v),U=new N(r.x,r.y).rot(-z.rotation());w=U.x,k=U.y}const C=v.parentId??this.getCurrentPageId(),E=this.getSortedChildIdsForParent(C),R=E.indexOf(v.id),L=E[R+1],A=L?this.getShape(L):null,O=A?LS(v.index,A.index):Zu(v.index);let D=es(v);if(this.isShapeOfType(v,"arrow")&&this.isShapeOfType(D,"arrow")){const z=this.getArrowInfo(v);let U,Y;if(v.props.start.type==="binding"&&(U=d.get(v.props.start.boundShapeId),!U))if(z!=null&&z.isValid){const{x:X,y:ie}=z.start.point;D.props.start={type:"point",x:X,y:ie}}else{const{start:X}=Yl(this,v);D.props.start={type:"point",x:X.x,y:X.y}}if(v.props.end.type==="binding"&&(Y=d.get(v.props.end.boundShapeId),!Y))if(z!=null&&z.isValid){const{x:X,y:ie}=z.end.point;D.props.end={type:"point",x:X,y:ie}}else{const{end:X}=Yl(this,v);D.props.start={type:"point",x:X.x,y:X.y}}const q=mS(D)?jS(this,D):h2(this,D);if(z!=null&&z.isValid&&(q!=null&&q.isValid)&&!mS(v)){const X=N.Med(z.start.handle,z.end.handle),ie=N.Dist(z.middle,X),pe=N.Dist(q.middle,X);D.props.bend<0?D.props.bend+=pe-ie:D.props.bend-=pe-ie}D.props.start.type==="binding"&&U&&(D.props.start.boundShapeId=U),D.props.end.type==="binding"&&Y&&(D.props.end.boundShapeId=Y)}return D={...D,id:S,x:v.x+w,y:v.y+k,index:O},D}));return h.forEach(g=>{il(g.parentId)&&d.has(g.parentId)&&(g.parentId=d.get(g.parentId))}),this.history.batch(()=>{const g=h.length+this.getCurrentPageShapeIds().size>qu;g&&Ox(this);const v=g?h.slice(0,qu-this.getCurrentPageShapeIds().size):h,S=v.map(w=>w.id);if(this.createShapes(v),this.setSelectedShapes(S),r!==void 0){const w=this.getSelectionPageBounds(),k=this.getViewportPageBounds();w&&!k.contains(w)&&this.centerOnPoint(w.center,{duration:ed})}}),this}moveShapesToPage(e,r){const o=typeof e[0]=="string"?e:e.map(d=>d.id);if(o.length===0)return this;if(this.getInstanceState().isReadonly)return this;const a=this.getCurrentPageId();if(r===a)return this;if(!this.store.has(r))return this;const l=this.getContentFromCurrentPage(o);if(!l)return this;if(this.getPageShapeIds(r).size+l.shapes.length>qu)return Ox(this,r),this;const u=this.getCamera().z;return this.history.batch(()=>{this.deleteShapes(o),this.setCurrentPage(r),this.setFocusedGroup(null),this.selectNone(),this.putContentOntoCurrentPage(l,{select:!0,preserveIds:!0,preservePosition:!0}),this.setCamera({...this.getCamera(),z:u}),this.centerOnPoint(this.getSelectionRotatedPageBounds().center)}),this}toggleLock(e){const r=typeof e[0]=="string"?e:e.map(u=>u.id);if(this.getInstanceState().isReadonly||r.length===0)return this;let o=!0,a=!0;const l=[];for(const u of r){const d=this.getShape(u);d&&(l.push(d),d.isLocked?a=!1:o=!1)}return this.batch(()=>{a?(this.updateShapes(l.map(u=>({id:u.id,type:u.type,isLocked:!0}))),this.setSelectedShapes([])):o?this.updateShapes(l.map(u=>({id:u.id,type:u.type,isLocked:!1}))):this.updateShapes(l.map(u=>({id:u.id,type:u.type,isLocked:!0})))}),this}sendToBack(e){const r=typeof e[0]=="string"?e:e.map(a=>a.id),o=$x(this,"toBack",r);return o&&this.updateShapes(o),this}sendBackward(e){const r=typeof e[0]=="string"?e:e.map(a=>a.id),o=$x(this,"backward",r);return o&&this.updateShapes(o),this}bringForward(e){const r=typeof e[0]=="string"?e:e.map(a=>a.id),o=$x(this,"forward",r);return o&&this.updateShapes(o),this}bringToFront(e){const r=typeof e[0]=="string"?e:e.map(a=>a.id),o=$x(this,"toFront",r);return o&&this.updateShapes(o),this}flipShapes(e,r){const o=typeof e[0]=="string"?e:e.map(u=>u.id);if(this.getInstanceState().isReadonly)return this;let a=Bt(o.map(u=>this.getShape(u)));if(!a.length)return this;a=Bt(a.map(u=>this.isShapeOfType(u,"group")?this.getSortedChildIdsForParent(u.id).map(d=>this.getShape(d)):u).flat());const l=Mt.Common(Bt(a.map(u=>this.getShapePageBounds(u)))).center;return this.batch(()=>{for(const u of a){const d=this.getShapeGeometry(u).bounds,h=this.getShapePageTransform(u.id);h&&this.resizeShape(u.id,{x:r==="horizontal"?-1:1,y:r==="vertical"?-1:1},{initialBounds:d,initialPageTransform:h,initialShape:u,mode:"scale_shape",scaleOrigin:l,scaleAxisRotation:0})}}),this}stackShapes(e,r,o){const a=typeof e[0]=="string"?e:e.map(E=>E.id);if(this.getInstanceState().isReadonly)return this;const l=Bt(a.map(E=>this.getShape(E)).filter(E=>!(!E||this.isShapeOfType(E,"arrow")&&(E.props.start.type==="binding"||E.props.end.type==="binding")))),u=l.length;if(o===0&&u<3||u<2)return this;const d=Object.fromEntries(l.map(E=>[E.id,this.getShapePageBounds(E)]));let h,g,v,S;r==="horizontal"?(h="x",g="minX",v="maxX",S="width"):(h="y",g="minY",v="maxY",S="height");let w;if(o===0){const E=[];l.sort((L,A)=>d[L.id][g]-d[A.id][g]);for(let L=0;L<u-1;L++){const A=l[L],O=l[L+1],D=d[A.id],U=d[O.id][g]-D[v],Y=E.find(q=>q.gap===U);Y?Y.count++:E.push({gap:U,count:1})}let R=0;E.forEach(L=>{L.count>R&&(R=L.count,w=L.gap)}),R===1&&(w=Math.max(0,E.reduce((L,A)=>L+A.gap*A.count,0)/(u-1)))}else w=o;const k=[];let C=d[l[0].id][v];return l.forEach((E,R)=>{var z,U;if(R===0)return;const L={x:0,y:0};L[h]=C+w-d[E.id][h];const A=this.getShapeParent(E),O=A?N.Rot(L,-this.getShapePageTransform(A).decompose().rotation):L,D=(U=(z=this.getShapeUtil(E)).onTranslateStart)==null?void 0:U.call(z,E);k.push(D?{...D,[h]:E[h]+O[h]}:{id:E.id,type:E.type,[h]:E[h]+O[h]}),C+=d[E.id][S]+w}),this.updateShapes(k),this}packShapes(e,r){var U,Y;const o=typeof e[0]=="string"?e:e.map(q=>q.id);if(this.getInstanceState().isReadonly)return this;if(o.length<2)return this;const a=Bt(o.map(q=>this.getShape(q)).filter(q=>!(!q||this.isShapeOfType(q,"arrow")&&(q.props.start.type==="binding"||q.props.end.type==="binding")))),l={},u={};let d,h,g=0;for(let q=0;q<a.length;q++)d=a[q],h=this.getShapePageBounds(d),l[d.id]=h,u[d.id]=h.clone(),g+=h.width*h.height;const v=Mt.Common(Bt(Object.values(l))),S=v.width;a.sort((q,X)=>l[X.id].height-l[q.id].height);const w=Math.max(Math.ceil(Math.sqrt(g/.95)),S),k=[new Mt(v.x,v.y,w,1/0)];let C=0,E=0,R,L;for(let q=0;q<a.length;q++){d=a[q],h=u[d.id];for(let X=k.length-1;X>=0;X--)if(R=k[X],!(h.width>R.width||h.height>R.height)){h.x=R.x,h.y=R.y,E=Math.max(E,h.maxY),C=Math.max(C,h.maxX),h.width===R.width&&h.height===R.height?(L=k.pop(),X<k.length&&(k[X]=L)):h.height===R.height?(R.x+=h.width+r,R.width-=h.width+r):h.width===R.width?(R.y+=h.height+r,R.height-=h.height+r):(k.push(new Mt(R.x+(h.width+r),R.y,R.width-(h.width+r),h.height)),R.y+=h.height+r,R.height-=h.height+r);break}}const A=Mt.Common(Object.values(u)),O=N.Sub(v.center,A.center);let D;const z=[];for(let q=0;q<a.length;q++){d=a[q],h=l[d.id],D=u[d.id];const X=N.Sub(D.point,h.point).add(O),ie=this.getShapeParentTransform(d);ie&&X.rot(-ie.rotation());const pe={id:d.id,type:d.type,x:d.x+X.x,y:d.y+X.y},ae=(Y=(U=this.getShapeUtil(d)).onTranslateStart)==null?void 0:Y.call(U,{...d,...pe});ae?z.push({...pe,...ae}):z.push(pe)}return z.length&&this.updateShapes(z),this}alignShapes(e,r){const o=typeof e[0]=="string"?e:e.map(h=>h.id);if(this.getInstanceState().isReadonly)return this;if(o.length<2)return this;const a=Bt(o.map(h=>this.getShape(h))),l=Object.fromEntries(a.map(h=>[h.id,this.getShapePageBounds(h)])),u=Mt.Common(Bt(Object.values(l))),d=[];return a.forEach(h=>{var C,E;const g=l[h.id];if(!g)return;const v={x:0,y:0};switch(r){case"top":{v.y=u.minY-g.minY;break}case"center-vertical":{v.y=u.midY-g.minY-g.height/2;break}case"bottom":{v.y=u.maxY-g.minY-g.height;break}case"left":{v.x=u.minX-g.minX;break}case"center-horizontal":{v.x=u.midX-g.minX-g.width/2;break}case"right":{v.x=u.maxX-g.minX-g.width;break}}const S=this.getShapeParent(h),w=S?N.Rot(v,-this.getShapePageTransform(S).decompose().rotation):v,k=(E=(C=this.getShapeUtil(h)).onTranslateStart)==null?void 0:E.call(C,h);d.push(k?{...k,x:h.x+w.x,y:h.y+w.y}:{id:h.id,type:h.type,x:h.x+w.x,y:h.y+w.y})}),this.updateShapes(d),this}distributeShapes(e,r){const o=typeof e[0]=="string"?e:e.map(A=>A.id);if(this.getInstanceState().isReadonly)return this;if(o.length<3)return this;const a=o.length,l=Bt(o.map(A=>this.getShape(A))),u=Object.fromEntries(l.map(A=>[A.id,this.getShapePageBounds(A)]));let d,h,g,v,S;r==="horizontal"?(d="x",h="minX",g="maxX",v="midX",S="width"):(d="y",h="minY",g="maxY",v="midY",S="height");const w=[],k=l.sort((A,O)=>u[A.id][h]-u[O.id][h])[0],C=l.sort((A,O)=>u[O.id][g]-u[A.id][g])[0],E=u[k.id][v],R=(u[C.id][v]-E)/(a-1),L=E+R;return l.filter(A=>A!==k&&A!==C).sort((A,O)=>u[A.id][v]-u[O.id][v]).forEach((A,O)=>{var q,X;const D={x:0,y:0};D[d]=L+R*O-u[A.id][S]/2-u[A.id][d];const z=this.getShapeParent(A),U=z?N.Rot(D,-this.getShapePageTransform(z).rotation()):D,Y=(X=(q=this.getShapeUtil(A)).onTranslateStart)==null?void 0:X.call(q,A);w.push(Y?{...Y,[d]:A[d]+U[d]}:{id:A.id,type:A.type,[d]:A[d]+U[d]})}),this.updateShapes(w),this}stretchShapes(e,r){const o=typeof e[0]=="string"?e:e.map(h=>h.id);if(this.getInstanceState().isReadonly)return this;if(o.length<2)return this;const a=Bt(o.map(h=>this.getShape(h))),l=Object.fromEntries(o.map(h=>[h,this.getShapeGeometry(h).bounds])),u=Object.fromEntries(o.map(h=>[h,this.getShapePageBounds(h)])),d=Mt.Common(Bt(Object.values(u)));switch(r){case"vertical":{this.batch(()=>{for(const h of a){if(this.getShapePageTransform(h).rotation()%or)continue;const v=l[h.id],S=u[h.id],w=new N(0,d.minY-S.minY),k=this.getShapeParentTransform(h);k&&w.rot(-k.rotation());const{x:C,y:E}=N.Add(w,h);this.updateShapes([{id:h.id,type:h.type,x:C,y:E}],{squashing:!0});const R=new N(1,d.height/S.height);this.resizeShape(h.id,R,{initialBounds:v,scaleOrigin:new N(S.center.x,d.minY),scaleAxisRotation:0})}});break}case"horizontal":{this.batch(()=>{for(const h of a){const g=l[h.id],v=u[h.id];if(this.getShapePageTransform(h).rotation()%or)continue;const w=new N(d.minX-v.minX,0),k=this.getShapeParentTransform(h);k&&w.rot(-k.rotation());const{x:C,y:E}=N.Add(w,h);this.updateShapes([{id:h.id,type:h.type,x:C,y:E}],{squashing:!0});const R=new N(d.width/v.width,1);this.resizeShape(h.id,R,{initialBounds:g,scaleOrigin:new N(d.minX,v.center.y),scaleAxisRotation:0})}});break}}return this}resizeShape(e,r,o={}){var w;const a=typeof e=="string"?e:e.id;if(this.getInstanceState().isReadonly)return this;Number.isFinite(r.x)||(r=new N(1,r.y)),Number.isFinite(r.y)||(r=new N(r.x,1));const l=o.initialShape??this.getShape(a);if(!l)return this;const u=o.scaleOrigin??((w=this.getShapePageBounds(a))==null?void 0:w.center);if(!u)return this;const d=o.initialPageTransform?yt.Cast(o.initialPageTransform):this.getShapePageTransform(a);if(!d)return this;const h=d.rotation();if(h==null)return this;const g=o.scaleAxisRotation??h,v=o.initialBounds??this.getShapeGeometry(a).bounds;if(!v)return this;if(!VL(h,g))return this._resizeUnalignedShape(a,r,{...o,initialBounds:v,scaleOrigin:u,scaleAxisRotation:g,initialPageTransform:d,initialShape:l});const S=this.getShapeUtil(l);if(S.isAspectRatioLocked(l)&&(Math.abs(r.x)>Math.abs(r.y)?r=new N(r.x,Math.sign(r.y)*Math.abs(r.x)):r=new N(Math.sign(r.x)*Math.abs(r.y),r.y)),S.onResize&&S.canResize(l)){const k=this._scalePagePoint(yt.applyToPoint(d,new N(0,0)),u,r,g),C=this.getPointInParentSpace(l.id,k),E=new N(r.x,r.y),R=OS((h-g)%Math.PI,0);E.x=R?r.x:r.y,E.y=R?r.y:r.x;const L=yt.applyToPoint(d,new N),{x:A,y:O}=this.getPointInParentSpace(l.id,L);this.updateShapes([{id:a,type:l.type,x:C.x,y:C.y,...S.onResize({...l,x:A,y:O},{newPoint:C,handle:o.dragHandle??"bottom_right",mode:o.mode??"scale_shape",scaleX:E.x,scaleY:E.y,initialBounds:v,initialShape:l})}],{squashing:!0})}else{const k=yt.applyToPoint(d,v.center),C=this._scalePagePoint(k,u,r,g),E=this.getPointInParentSpace(l.id,k),R=this.getPointInParentSpace(l.id,C),L=N.Sub(R,E);this.updateShapes([{id:a,type:l.type,x:l.x+L.x,y:l.y+L.y}],{squashing:!0})}return this}_scalePagePoint(e,r,o,a){const l=N.RotWith(e,r,-a).sub(r),u=N.MulV(l,o);return N.Add(u,r).rotWith(r,a)}_resizeUnalignedShape(e,r,o){const{type:a}=o.initialShape,l=new N(r.x,r.y);if(Math.abs(r.x)>Math.abs(r.y)?l.x=Math.sign(r.x)*Math.abs(r.y):l.y=Math.sign(r.y)*Math.abs(r.x),this.resizeShape(e,l,{initialShape:o.initialShape,initialBounds:o.initialBounds}),Math.sign(r.x)*Math.sign(r.y)<0){let{rotation:R}=yt.Decompose(o.initialPageTransform);R-=2*R,this.updateShapes([{id:e,type:a,rotation:R}],{squashing:!0})}const u=yt.applyToPoint(o.initialPageTransform,o.initialBounds.center),d=this._scalePagePoint(u,o.scaleOrigin,r,o.scaleAxisRotation),h=this.getShapePageBounds(e),g=this.getShapePageTransform(e),v=h.center,S=g.point();if(!v||!S)return this;const w=N.Sub(d,v),k=N.Add(S,w),{x:C,y:E}=this.getPointInParentSpace(e,k);return this.updateShapes([{id:e,type:a,x:C,y:E}],{squashing:!0}),this}getInitialMetaForShape(e){return{}}createShape(e){return this._createShapes([e]),this}createShapes(e){if(!Array.isArray(e))throw Error("Editor.createShapes: must provide an array of shapes or shape partials");return this._createShapes(e),this}animateShape(e,r){return this.animateShapes([e],r)}animateShapes(e,r={}){const{duration:o=500,easing:a=Jo.linear}=r,l=dr();let u=o,d;const h=[];e.forEach(S=>{if(!S)return;const w={partial:S,values:[]},k=this.getShape(S.id);if(k){for(const C of["x","y","rotation"])S[C]!==void 0&&k[C]!==S[C]&&w.values.push({prop:C,from:k[C],to:S[C]});h.push(w),this.animatingShapes.set(k.id,l)}});let g;const v=S=>{if(u-=S,u<0){const{animatingShapes:k}=this,C=e.filter(E=>E&&k.get(E.id)===l);C.length&&this.updateShapes(C,{squashing:!1}),this.removeListener("tick",v);return}d=a(1-u/o);const{animatingShapes:w}=this;try{const k=[];for(let C=0;C<h.length;C++)g=h[C],w.get(g.partial.id)===l&&k.push({id:g.partial.id,type:g.partial.type,...g.values.reduce((E,{prop:R,from:L,to:A})=>(E[R]=L+(A-L)*d,E),{})});this._updateShapes(k,{squashing:!0})}catch{}};return this.addListener("tick",v),this}groupShapes(e,r=Ir()){var w;if(!Array.isArray(e))throw Error("Editor.groupShapes: must provide an array of shapes or shape ids");if(this.getInstanceState().isReadonly)return this;const o=typeof e[0]=="string"?e:e.map(k=>k.id);if(o.length<=1)return this;const a=Bt(this._getUnlockedShapeIds(o).map(k=>this.getShape(k))),l=a.sort(qo).map(k=>k.id),u=Mt.Common(Bt(a.map(k=>this.getShapePageBounds(k)))),{x:d,y:h}=u.point,g=this.findCommonAncestor(a)??this.getCurrentPageId();if(this.getCurrentToolId()!=="select")return this;this.isIn("select.idle")||this.cancel();const v=a.filter(k=>k.parentId===g).sort(qo),S=(w=v[v.length-1])==null?void 0:w.index;return this.batch(()=>{this.createShapes([{id:r,type:"group",parentId:g,index:S,x:d,y:h,opacity:1,props:{}}]),this.reparentShapes(l,r),this.select(r)}),this}ungroupShapes(e){const r=typeof e[0]=="string"?e:e.map(u=>u.id);if(this.getInstanceState().isReadonly)return this;if(r.length===0)return this;if(this.getCurrentToolId()!=="select")return this;this.isIn("select.idle")||this.cancel();const o=new Set,a=Bt(r.map(u=>this.getShape(u))),l=[];return a.forEach(u=>{this.isShapeOfType(u,"group")?l.push(u):o.add(u.id)}),l.length===0?this:(this.batch(()=>{let u;for(let d=0,h=l.length;d<h;d++){u=l[d];const g=this.getSortedChildIdsForParent(u.id);for(let v=0,S=g.length;v<S;v++)o.add(g[v]);this.reparentShapes(g,u.parentId,u.index)}this.deleteShapes(l.map(d=>d.id)),this.select(...o)}),this)}updateShape(e,r){return this.updateShapes([e],r),this}updateShapes(e,r){let o=Bt(e);return this.animatingShapes.size>0&&o.forEach(a=>this.animatingShapes.delete(a.id)),o=o.filter(a=>{const l=this.getShape(a.id);return!(!l||this.isShapeOrAncestorLocked(l)&&!Object.hasOwn(a,"isLocked"))}),this._updateShapes(o,r),this}_getUnlockedShapeIds(e){return e.filter(r=>{var o;return!((o=this.getShape(r))!=null&&o.isLocked)})}deleteShapes(e){if(!Array.isArray(e))throw Error("Editor.deleteShapes: must provide an array of shapes or shapeIds");return this._deleteShapes(this._getUnlockedShapeIds(typeof e[0]=="string"?e:e.map(r=>r.id))),this}deleteShape(e){return this.deleteShapes([typeof e=="string"?e:e.id]),this}_extractSharedStyles(e,r){if(this.isShapeOfType(e,"group")){const o=this._parentIdsToChildIds.get()[e.id];if(!o)return;for(let a=0,l=o.length;a<l;a++)this._extractSharedStyles(this.getShape(o[a]),r)}else for(const[o,a]of this.styleProps[e.type])r.applyValue(o,Zh(e.props,a))}getStyleForNextShape(e){const r=this.getInstanceState().stylesForNextShape[e.id];return r===void 0?e.defaultValue:r}getShapeStyleIfExists(e,r){const o=this.styleProps[e.type].get(r);if(o!==void 0)return Zh(e.props,o)}getSharedStyles(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0)return this._selectionSharedStyles.get();const e=this.root.getCurrent(),r=new XP;if(!e)return r;if(e.shapeType)for(const o of this.styleProps[e.shapeType].keys())r.applyValue(o,this.getStyleForNextShape(o));return r}getSharedOpacity(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0){const e=[],r=a=>{const l=this.getShape(a);if(l)if(this.isShapeOfType(l,"group"))for(const u of this.getSortedChildIdsForParent(l.id))r(u);else e.push(l)};for(const a of this.getSelectedShapeIds())r(a);let o=null;for(const a of e)if(o===null)o=a.opacity;else if(o!==a.opacity)return{type:"mixed"};if(o!==null)return{type:"shared",value:o}}return{type:"shared",value:this.getInstanceState().opacityForNextShape}}setOpacityForNextShapes(e,r){return this.updateInstanceState({opacityForNextShape:e},r),this}setOpacityForSelectedShapes(e,r){const o=this.getSelectedShapes();if(o.length>0){const a=[],l=u=>{if(this.isShapeOfType(u,"group")){const d=this.getSortedChildIdsForParent(u);for(const h of d)l(this.getShape(h))}else a.push(u)};for(const u of o)l(u);this.updateShapes(a.map(u=>({id:u.id,type:u.type,opacity:e})),r)}return this}setStyleForNextShapes(e,r,o){const a=this.getInstanceState().stylesForNextShape;return this.updateInstanceState({stylesForNextShape:{...a,[e.id]:r}},o),this}setStyleForSelectedShapes(e,r,o){const a=this.getSelectedShapes();if(a.length>0){const l=[],u=d=>{if(this.isShapeOfType(d,"group")){const h=this.getSortedChildIdsForParent(d.id);for(const g of h)u(this.getShape(g))}else{const h=this.getShapeUtil(d),g=this.styleProps[d.type].get(e);if(g){const v={id:d.id,type:d.type,props:{[g]:r}};l.push({util:h,originalShape:d,updatePartial:v})}}};for(const d of a)u(d);this.updateShapes(l.map(({updatePartial:d})=>d),o)}return this}registerExternalAssetHandler(e,r){return this.externalAssetContentHandlers[e]=r,this}async getAssetForExternalContent(e){var r,o;return await((o=(r=this.externalAssetContentHandlers)[e.type])==null?void 0:o.call(r,e))}registerExternalContentHandler(e,r){return this.externalContentHandlers[e]=r,this}async putExternalContent(e){var r,o;return(o=(r=this.externalContentHandlers)[e.type])==null?void 0:o.call(r,e)}getContentFromCurrentPage(e){const r=typeof e[0]=="string"?e:e.map(d=>d.id);if(!r||r.length===0)return;const o={};let a=X1(r.map(d=>this.getShape(d)).sort(qo).flatMap(d=>{const h=[d];return this.visitDescendants(d.id,g=>{h.push(this.getShape(g))}),h}));a=a.map(d=>{if(o[d.id]=this.getShapePageTransform(d.id),d=Tf(d),this.isShapeOfType(d,"arrow")){const h=d.props.start.type==="binding"?d.props.start.boundShapeId:void 0,g=d.props.end.type==="binding"?d.props.end.boundShapeId:void 0,v=this.getArrowInfo(d);if(d.props.start.type==="binding"&&!a.some(w=>w.id===h))if(v!=null&&v.isValid){const{x:w,y:k}=v.start.point;d.props.start={type:"point",x:w,y:k}}else{const{start:w}=Yl(this,d);d.props.start={type:"point",x:w.x,y:w.y}}if(d.props.end.type==="binding"&&!a.some(w=>w.id===g))if(v!=null&&v.isValid){const{x:w,y:k}=v.end.point;d.props.end={type:"point",x:w,y:k}}else{const{end:w}=Yl(this,d);d.props.end={type:"point",x:w.x,y:w.y}}const S=mS(d)?jS(this,d):h2(this,d);if(v!=null&&v.isValid&&(S!=null&&S.isValid)&&!mS(d)){const w=N.Med(v.start.handle,v.end.handle),k=N.Dist(v.middle,w),C=N.Dist(S.middle,w);d.props.bend<0?d.props.bend+=C-k:d.props.bend-=C-k}return d}return d});const l=[];a.forEach(d=>{if(a.find(h=>h.id===d.parentId)===void 0){const h=this.getShapePageTransform(d.id),g=h.point(),v=h.rotation();d.x=g.x,d.y=g.y,d.rotation=v,d.parentId=this.getCurrentPageId(),l.push(d.id)}});const u=new Set;return a.forEach(d=>{"assetId"in d.props&&d.props.assetId!==null&&u.add(d.props.assetId)}),{shapes:a,rootShapeIds:l,schema:this.store.schema.serialize(),assets:Bt(Array.from(u).map(d=>this.getAsset(d)))}}putContentOntoCurrentPage(e,r={}){if(this.getInstanceState().isReadonly)return this;if(!e.schema)throw Error(`Could not put content:
content is missing a schema.`);const{select:o=!1,preserveIds:a=!1,preservePosition:l=!1}=r;let{point:u=void 0}=r;const d=this.getCurrentPageId(),{assets:h,shapes:g,rootShapeIds:v}=e,S=new Map(g.map(D=>[D.id,Ir()]));let w=this.getCurrentPageId(),k=1/0,C=[];for(const D of this.getSelectedShapes()){if(k===0)break;const z=this.isShapeOfType(D,"frame"),U=this.getShapeAncestors(D);z&&U.push(D);const Y=z?U.length+1:U.length;if(Y<k)k=Y,C=U,w=z?D.id:D.parentId;else if(Y===k){if(C.length!==U.length)throw Error(`Ancestors: ${C.length} !== ${U.length}`);if(C.length===0){w=d;break}else{w=d;for(let q=0;q<C.length&&U[q]===C[q];q++)w=U[q].id}}}let E=!1;if(!Js(w)){const D=this.getShape(w);if(D){if(!this.getViewportPageBounds().includes(this.getShapePageBounds(D)))w=d;else if(v.length===1){const z=g.find(U=>U.id===v[0]);this.isShapeOfType(D,"frame")&&this.isShapeOfType(z,"frame")&&z.props.w===(D==null?void 0:D.props.w)&&z.props.h===(D==null?void 0:D.props.h)&&(E=!0)}}else w=d}E||(E=S.has(w)),E&&(w=this.getShape(w).parentId);let R=this.getHighestIndexForParent(w);const L=[],A=g.map(D=>{let z;if(a)z=es(D),S.set(D.id,D.id);else{const U=S.get(D.id);z=es({...D,id:U})}if(v.includes(D.id)&&(z.parentId=d,L.push(z)),S.has(z.parentId)?z.parentId=S.get(D.parentId):(v.push(z.id),z.index=R,R=Zu(R)),this.isShapeOfType(z,"arrow")){if(z.props.start.type==="binding"){const U=S.get(z.props.start.boundShapeId);z.props.start=U?{...z.props.start,boundShapeId:U}:{type:"point",x:0,y:0}}if(z.props.end.type==="binding"){const U=S.get(z.props.end.boundShapeId);z.props.end=U?{...z.props.end,boundShapeId:U}:{type:"point",x:0,y:0}}}return z});if(A.length+this.getCurrentPageShapeIds().size>qu)return Ox(this),this;let O=[];if(h){for(let z=0;z<h.length;z++){const U=h[z],Y=this.store.schema.migratePersistedRecord(U,e.schema);if(Y.type==="success")h[z]=Y.value;else throw Error(`Could not put content:
could not migrate content for asset:
${U.id}
${U.type}
reason:${Y.reason}`)}const D=[];O=h.filter(z=>!this.store.has(z.id)).map(z=>{var U;return(z.type==="image"||z.type==="video")&&(z.props.src&&((U=z.props.src)!=null&&U.startsWith("data:image"))?(D.push(Tf(z)),z.props.src=null):D.push(Tf(z))),z}),Promise.allSettled(D.map(async z=>{const U=await SQ(z.props.src,z.props.name,z.props.mimeType??"image/png"),Y=await this.getAssetForExternalContent({type:"file",file:U});return Y?[z,Y]:null})).then(z=>{this.updateAssets(Bt(z.map(U=>U.status==="fulfilled"&&U.value?{...U.value[1],id:U.value[0].id}:void 0)))})}for(let D=0;D<A.length;D++){const z=A[D],U=this.store.schema.migratePersistedRecord(z,e.schema);if(U.type==="success")A[D]=U.value;else throw Error(`Could not put content:
could not migrate content for shape:
${z.id}, ${z.type}
reason:${U.reason}`)}return this.batch(()=>{O.length>0&&this.createAssets(O),this.createShapes(A),o&&this.select(...L.map(q=>q.id)),w!==d&&this.reparentShapes(L.map(q=>q.id),w);const D=A.map(q=>this.getShape(q.id)),z=Mt.Common(D.map(q=>this.getShapePageBounds(q)));if(u===void 0)if(Js(w)){const q=this.getViewportPageBounds();l||q.includes(Mt.From(z))?u=z.center:u=q.center}else{const q=this.getShape(w);u=yt.applyToPoint(this.getShapePageTransform(q),this.getShapeGeometry(q).bounds.center)}if(L.length===1){const q=L[0];if(this.isShapeOfType(q,"frame"))for(;this.getShapesAtPoint(u).some(X=>this.isShapeOfType(X,"frame")&&X.props.w===q.props.w&&X.props.h===q.props.h);)u.x+=z.w+16}const U=Mt.Common(Bt(L.map(({id:q})=>this.getShapePageBounds(q)))).center,Y=N.Sub(u,U);this.updateShapes(L.map(({id:q})=>{const X=this.getShape(q),ie=this.getShapeParentTransform(q).decompose().rotation,pe=N.Rot(Y,-ie);return{id:X.id,type:X.type,x:X.x+pe.x,y:X.y+pe.y}}))}),this}async getSvg(e,r={}){var D,z;const o=typeof e[0]=="string"?e:e.map(U=>U.id);if(o.length===0)return;if(!window.document)throw Error("No document");const{scale:a=1,background:l=!1,padding:u=RW,preserveAspectRatio:d=!1}=r,h=ns({isDarkMode:this.user.getIsDarkMode()}),g=this.getShapeAndDescendantIds(o),v=this.getUnorderedRenderingShapes(!1).filter(({id:U})=>g.has(U));let S=null;if(r.bounds)S=r.bounds;else for(const{maskedPageBounds:U}of v)U&&(S?S.union(U):S=U.clone());if(!S)return;const w=o.length===1&&this.isShapeOfType(this.getShape(o[0]),"frame")?o[0]:null;w||S.expandBy(u);const k=S.width*a,C=S.height*a,E=window.document.createElementNS("http://www.w3.org/2000/svg","svg");d&&E.setAttribute("preserveAspectRatio",d),E.setAttribute("direction","ltr"),E.setAttribute("width",k+""),E.setAttribute("height",C+""),E.setAttribute("viewBox",`${S.minX} ${S.minY} ${S.width} ${S.height}`),E.setAttribute("stroke-linecap","round"),E.setAttribute("stroke-linejoin","round"),l?w?E.style.setProperty("background",h.solid):E.style.setProperty("background-color",h.background):E.style.setProperty("background-color","transparent");try{(z=(D=document.body).focus)==null||z.call(D)}catch{}const R=window.document.createElementNS("http://www.w3.org/2000/svg","defs");E.append(R);const L=new Map,A={addExportDef:U=>{if(L.has(U.key))return;const Y=(async()=>{const q=await U.getElement();if(!q)return;const X=document.createComment(`def: ${U.key}`);R.appendChild(X);for(const ie of Array.isArray(q)?q:[q])R.appendChild(ie)})();L.set(U.key,Y)}},O=(await Promise.all(v.map(async({id:U,opacity:Y,index:q,backgroundIndex:X})=>{var me,we;if(U===w)return[];const ie=this.getShape(U);if(this.isShapeOfType(ie,"group"))return[];const pe=this.getShapeUtil(ie);let ae=await((me=pe.toSvg)==null?void 0:me.call(pe,ie,A)),te=await((we=pe.toBackgroundSvg)==null?void 0:we.call(pe,ie,A));if(ae){const V=document.createElementNS("http://www.w3.org/2000/svg","g");V.appendChild(ae),ae=V}if(te){const V=document.createElementNS("http://www.w3.org/2000/svg","g");V.appendChild(te),te=V}if(!ae&&!te){const V=this.getShapePageBounds(ie),Z=window.document.createElementNS("http://www.w3.org/2000/svg","rect");Z.setAttribute("width",V.width+""),Z.setAttribute("height",V.height+""),Z.setAttribute("fill",h.solid),Z.setAttribute("stroke",h.grey.pattern),Z.setAttribute("stroke-width","1"),ae=Z}let he=this.getShapePageTransform(ie).toCssString();"scale"in ie.props&&ie.props.scale!==1&&(he=`${he} scale(${ie.props.scale}, ${ie.props.scale})`),ae==null||ae.setAttribute("transform",he),te==null||te.setAttribute("transform",he),ae==null||ae.setAttribute("opacity",Y+""),te==null||te.setAttribute("opacity",Y+"");const ce=this.getShapeMask(ie.id);if(ce){const V=document.createElementNS("http://www.w3.org/2000/svg","clipPath");R.appendChild(V);const Z=dr();V.id=Z;const Ce=document.createElementNS("http://www.w3.org/2000/svg","path");if(Ce.setAttribute("d",`M${ce.map(({x:Ae,y:De})=>`${Ae},${De}`).join("L")}Z`),V.appendChild(Ce),ae){const Ae=document.createElementNS("http://www.w3.org/2000/svg","g");Ae.setAttribute("clip-path",`url(#${Z})`),Ae.appendChild(ae),ae=Ae}if(te){const Ae=document.createElementNS("http://www.w3.org/2000/svg","g");Ae.setAttribute("clip-path",`url(#${Z})`),Ae.appendChild(te),te=Ae}}const ge=[];return ae&&ge.push({zIndex:q,element:ae}),te&&ge.push({zIndex:X,element:te}),ge}))).flat();await Promise.all(L.values());for(const{element:U}of O.sort((Y,q)=>Y.zIndex-q.zIndex))E.appendChild(U);return E}_updateInputsFromEvent(e){var k;const{previousScreenPoint:r,previousPagePoint:o,currentScreenPoint:a,currentPagePoint:l}=this.inputs,{screenBounds:u}=this.store.unsafeGetWithoutCapture(Cs),{x:d,y:h,z:g}=e.point,{x:v,y:S,z:w}=this.getCamera();r.setTo(a),o.setTo(l),a.set(d,h),l.set((d-u.x)/w-v,(h-u.y)/w-S,g??.5),this.inputs.isPen=e.type==="pointer"&&e.isPen,e.name==="pointer_down"&&this.inputs.pointerVelocity.set(0,0),this.store.put([{id:eC,typeName:"pointer",x:l.x,y:l.y,lastActivityTimestamp:e.type==="pointer"&&e.pointerId===oD.CAMERA_MOVE?((k=this.store.get(eC))==null?void 0:k.lastActivityTimestamp)??Date.now():Date.now(),meta:{}}])}cancel(){return this.dispatch({type:"misc",name:"cancel"}),this}interrupt(){return this.dispatch({type:"misc",name:"interrupt"}),this}complete(){return this.dispatch({type:"misc",name:"complete"}),this}cancelDoubleClick(){this._clickManager.cancelDoubleClickTimeout()}}Dt([Qe],$t.prototype,"getCanUndo",1);Dt([Qe],$t.prototype,"getCanRedo",1);Dt([Qe],$t.prototype,"_getArrowBindingsIndex",1);Dt([Qe],$t.prototype,"getArrowInfoCache",1);Dt([Qe],$t.prototype,"getPath",1);Dt([Qe],$t.prototype,"getCurrentTool",1);Dt([Qe],$t.prototype,"getCurrentToolId",1);Dt([Qe],$t.prototype,"getDocumentSettings",1);Dt([Qe],$t.prototype,"getInstanceState",1);Dt([Qe],$t.prototype,"getOpenMenus",1);Dt([Qe],$t.prototype,"getIsMenuOpen",1);Dt([Qe],$t.prototype,"getPageStates",1);Dt([Qe],$t.prototype,"_getPageStatesQuery",1);Dt([Qe],$t.prototype,"getCurrentPageState",1);Dt([Qe],$t.prototype,"_getCurrentPageStateId",1);Dt([Qe],$t.prototype,"getSelectedShapeIds",1);Dt([Qe],$t.prototype,"getSelectedShapes",1);Dt([Qe],$t.prototype,"getOnlySelectedShape",1);Dt([Qe],$t.prototype,"getSelectionPageBounds",1);Dt([Qe],$t.prototype,"getSelectionRotation",1);Dt([Qe],$t.prototype,"getSelectionRotatedPageBounds",1);Dt([Qe],$t.prototype,"getFocusedGroupId",1);Dt([Qe],$t.prototype,"getFocusedGroup",1);Dt([Qe],$t.prototype,"getEditingShapeId",1);Dt([Qe],$t.prototype,"getEditingShape",1);Dt([Qe],$t.prototype,"getHoveredShapeId",1);Dt([Qe],$t.prototype,"getHoveredShape",1);Dt([Qe],$t.prototype,"getHintingShapeIds",1);Dt([Qe],$t.prototype,"getHintingShape",1);Dt([Qe],$t.prototype,"getErasingShapeIds",1);Dt([Qe],$t.prototype,"getErasingShapes",1);Dt([Qe],$t.prototype,"getCameraId",1);Dt([Qe],$t.prototype,"getCamera",1);Dt([Qe],$t.prototype,"getZoomLevel",1);Dt([Qe],$t.prototype,"getViewportScreenBounds",1);Dt([Qe],$t.prototype,"getViewportScreenCenter",1);Dt([Qe],$t.prototype,"getViewportPageBounds",1);Dt([Qe],$t.prototype,"getViewportPageCenter",1);Dt([Qe],$t.prototype,"getRenderingShapes",1);Dt([Qe],$t.prototype,"_getAllPagesQuery",1);Dt([Qe],$t.prototype,"getPages",1);Dt([Qe],$t.prototype,"_getAllAssetsQuery",1);Dt([Qe],$t.prototype,"_getShapeGeometryCache",1);Dt([Qe],$t.prototype,"_getShapeOutlineSegmentsCache",1);Dt([Qe],$t.prototype,"_getShapeHandlesCache",1);Dt([Qe],$t.prototype,"_getShapePageTransformCache",1);Dt([Qe],$t.prototype,"_getShapePageBoundsCache",1);Dt([Qe],$t.prototype,"_getShapeClipPathCache",1);Dt([Qe],$t.prototype,"_getShapeMaskCache",1);Dt([Qe],$t.prototype,"getCurrentPageBounds",1);Dt([Qe],$t.prototype,"getCurrentPageShapes",1);Dt([Qe],$t.prototype,"getCurrentPageShapesSorted",1);Dt([Qe],$t.prototype,"getCurrentPageRenderingShapesSorted",1);Dt([Qe({isEqual:(t,n)=>t.equals(n)})],$t.prototype,"getSharedStyles",1);Dt([Qe],$t.prototype,"getSharedOpacity",1);function Ox(t,n=t.getCurrentPageId()){const e=t.getPage(n).name;t.emit("max-shapes",{name:e,pageId:n,count:qu})}function FC(){const t=Oe();return He("isDarkMode",()=>t.user.getIsDarkMode(),[t])}const JQ='<path d="m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z" fill="white"/><path d="m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z" fill="white"/><path d="m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z" fill="black"/><path d="m13 10.814v11.188l2.969-2.866.428-.139h4.768z" fill="black"/>',eZ='<path d="m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z" fill="white"/><g stroke="black" stroke-linecap="round" stroke-width=".75"><path d="m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z" stroke-linejoin="round"/><path d="m21.5664 21.7344v-3.459"/><path d="m19.5508 21.7461-.016-3.473"/><path d="m17.5547 18.3047.021 3.426"/></g>',tZ='<path d="m25 16h-6.01v-6h-2.98v6h-6.01v3h6.01v6h2.98v-6h6.01z" fill="white"/><path d="m23.9902 17.0103h-6v-6.01h-.98v6.01h-6v.98h6v6.01h.98v-6.01h6z" fill="%23231f1f"/>',nZ='<path d="m19 14h1v1h-1zm1 6h-1v-1h1zm-5-5h-1v-1h1zm0 5h-1v-1h1zm2-10.987-7.985 7.988 5.222 5.221 2.763 2.763 7.984-7.985z" fill="white"/><g fill="black"><path d="m23.5664 16.9971-2.557-2.809v1.829h-4.009-4.001v-1.829l-2.571 2.809 2.572 2.808-.001-1.808h4.001 4.009l-.001 1.808z"/><path d="m17.9873 17h.013v-4.001l1.807.001-2.807-2.571-2.809 2.57h1.809v4.001h.008v4.002l-1.828-.001 2.807 2.577 2.805-2.576h-1.805z"/></g>',zD="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",FD="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",Dx='<path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/>',rZ='<path fill="white" d="M7.94 0a5.25 5.25 0 0 0-3.47 1.17A5.27 5.27 0 0 0 1 0H0v3h1c1.41 0 1.85.7 2 1v3.94H2v3h1v3c-.13.3-.57 1-2 1H0v3h1a5.27 5.27 0 0 0 3.47-1.17c.98.8 2.21 1.21 3.47 1.17h1v-3h-1c-1.41 0-1.85-.7-2-1v-3H7v-3H6V4c.13-.3.57-1 2-1h1V0H7.94z"/><path fill="black" d="M7.94 2V1a4 4 0 0 0-3.47 1.64A4 4 0 0 0 1 1v1c1.3-.17 2.56.6 3 1.84v5.1H3v1h1v4.16c-.45 1.24-1.7 2-3 1.84v1a4.05 4.05 0 0 0 3.47-1.63 4.05 4.05 0 0 0 3.47 1.63v-1A2.82 2.82 0 0 1 5 14.1V9.93h1v-1H5V3.85A2.81 2.81 0 0 1 7.94 2z"/>',iZ="<path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill='white'/><g stroke='black' stroke-width='.75'><path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin='round'/><path d='m20.5664 19.7344v-3.459' stroke-linecap='round'/><path d='m18.5508 19.7461-.016-3.473' stroke-linecap='round'/><path d='m16.5547 16.3047.021 3.426' stroke-linecap='round'/></g>",oZ='<path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill="white"/><g stroke="black" stroke-linecap="round" stroke-width=".75"><path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin="round"/><path d="m20.5664 21.7344v-3.459"/><path d="m18.5508 21.7461-.016-3.473"/><path d="m16.5547 18.3047.021 3.426"/></g>',sZ='<path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5" fill="white"/><path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z" stroke="black"/><g fill="black"><path d="m18 14h-2v-2h-2v2h-2v1.98h2v2.02h2v-2.02h2z"/><path d="m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z"/></g>',aZ='<path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5" fill="white"/><path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z" stroke="black"/><g fill="black"><path d="m18 16h-5.98v-1.98h5.98z"/><path d="m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z"/></g>';function xo(t,n,e,r,o,a=16,l=16){const u=(-e-n)*(Jn/180),d=Math.sin(u),h=Math.cos(u),g=1*h-1*d,v=1*d+1*h;return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ${o};'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='${g}' dy='${v}' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(${n+e} 16 16)${r?" scale(-1,-1) translate(0, -32)":""}' filter='url(%23shadow)'>`+t.replaceAll('"',"'")+`</g></svg>") ${a} ${l}, pointer`}const lZ={none:()=>"none",default:(t,n,e)=>xo(JQ,t,0,n,e,12,8),pointer:(t,n,e)=>xo(eZ,t,0,n,e,14,10),cross:(t,n,e)=>xo(tZ,t,0,n,e),move:(t,n,e)=>xo(nZ,t,0,n,e),grab:(t,n,e)=>xo(oZ,t,0,n,e),grabbing:(t,n,e)=>xo(iZ,t,0,n,e),text:(t,n,e)=>xo(rZ,t,0,n,e,4,10),"ew-resize":(t,n,e)=>xo(FD,t,0,n,e),"ns-resize":(t,n,e)=>xo(FD,t,90,n,e),"nesw-resize":(t,n,e)=>xo(zD,t,0,n,e),"nwse-resize":(t,n,e)=>xo(zD,t,90,n,e),"nwse-rotate":(t,n,e)=>xo(Dx,t,0,n,e),"nesw-rotate":(t,n,e)=>xo(Dx,t,90,n,e),"senw-rotate":(t,n,e)=>xo(Dx,t,180,n,e),"swne-rotate":(t,n,e)=>xo(Dx,t,270,n,e),"zoom-in":(t,n,e)=>xo(sZ,t,0,n,e),"zoom-out":(t,n,e)=>xo(aZ,t,0,n,e)};function ba(t,n=0,e="black"){return lZ[t](vW(n),!1,e)}const cZ=["default","pointer","cross","move","grab","grabbing","text"];function uZ(){const t=Oe(),n=is(),e=FC();qh("useCursor",()=>{const{type:r,rotation:o}=t.getInstanceState().cursor;if(cZ.includes(r)){n.style.setProperty("--tl-cursor",`var(--tl-cursor-${r})`);return}n.style.setProperty("--tl-cursor",ba(r,o,e?"white":"black"))},[t,n,e])}function dZ(){const t=Oe(),n=is(),e=FC(),r=He(kr.forceSrgb);ft.useEffect(()=>{e?(n.setAttribute("data-color-mode","dark"),n.classList.remove("tl-theme__light"),n.classList.add("tl-theme__dark")):(n.setAttribute("data-color-mode","light"),n.classList.remove("tl-theme__dark"),n.classList.add("tl-theme__light")),r?n.classList.add("tl-theme__force-sRGB"):n.classList.remove("tl-theme__force-sRGB")},[t,n,r,e])}function fZ(t){const n=I.useRef();return I.useLayoutEffect(()=>{n.current=t}),I.useDebugValue(t),I.useCallback((...e)=>{const r=n.current;return Qh(r,"fn does not exist"),r(...e)},[])}function hZ(t){const n=Oe(),e=is();I.useLayoutEffect(()=>{t?(n.getInstanceState().isFocused||n.updateInstanceState({isFocused:!0}),n.getContainer().focus()):n.getInstanceState().isFocused&&n.updateInstanceState({isFocused:!1})},[n,e,t])}function pZ(){const[t,n]=I.useState(0);I.useEffect(()=>n(e=>e+1),[])}const Em="TLDRAW_TAB_ID_v2",_o=globalThis.window;function gZ(){return _o?["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(_o.navigator.platform)||_o.navigator.userAgent.includes("Mac")&&"ontouchend"in document:!1}const yC=(_o==null?void 0:_o[Em])??(_o==null?void 0:_o.sessionStorage[Em])??"TLDRAW_INSTANCE_STATE_V1_"+dr();_o&&(_o[Em]=yC,gZ()?_o.sessionStorage[Em]=yC:delete _o.sessionStorage[Em]);_o==null||_o.addEventListener("beforeunload",()=>{_o.sessionStorage[Em]=yC});const mZ={Initial:0},XS=mZ.Initial,M4=Ln({version:Nt,currentPageId:BS,isFocusMode:kn,exportBackground:kn,isDebugMode:kn,isToolLocked:kn,isGridMode:kn,pageStates:_s(Ln({pageId:BS,camera:Ln({x:Nt,y:Nt,z:Nt}),selectedShapeIds:_s(Bl),focusedGroupId:Bl.nullable()}))}),vZ=Bn({currentVersion:XS});function yZ(t){if(!t||typeof t!="object")return console.warn("Invalid instance state"),null;if(!("version"in t)||typeof t.version!="number")return console.warn("No version in instance state"),null;const n=qI({value:t,fromVersion:t.version,toVersion:XS,migrations:vZ});if(n.type==="error")return console.warn(n.reason),null;const e={...n.value,version:XS};try{M4.validate(e)}catch(r){return console.warn(r),null}return e}function SZ(t){const n=t.query.ids("page");return Qe("sessionStateSnapshot",()=>{const e=t.get(Cs);if(!e)return null;const r=[...n.get()];return{version:XS,currentPageId:e.currentPageId,exportBackground:e.exportBackground,isFocusMode:e.isFocusMode,isDebugMode:e.isDebugMode,isToolLocked:e.isToolLocked,isGridMode:e.isGridMode,pageStates:r.map(o=>{const a=t.get(Xo.createId(o)),l=t.get(Go.createId(o));return{pageId:o,camera:{x:(l==null?void 0:l.x)??0,y:(l==null?void 0:l.y)??0,z:(l==null?void 0:l.z)??1},selectedShapeIds:(a==null?void 0:a.selectedShapeIds)??[],focusedGroupId:(a==null?void 0:a.focusedGroupId)??null}})}})}function bZ(t,n){const e=yZ(n);if(!e)return;const r=t.allRecords().filter(l=>l.typeName==="instance_page_state"||l.typeName==="camera"),o={added:{},updated:{},removed:{...TL(r.map(l=>[l.id,l]))}};t.has(Cs)&&(o.removed[Cs]=t.get(Cs));const a={removed:{},updated:{},added:{[Cs]:t.schema.types.instance.create({id:Cs,currentPageId:e.currentPageId,isDebugMode:e.isDebugMode,isFocusMode:e.isFocusMode,isToolLocked:e.isToolLocked,isGridMode:e.isGridMode,exportBackground:e.exportBackground})}};for(const l of e.pageStates){const u=Go.createId(l.pageId),d=Xo.createId(l.pageId);a.added[u]=Go.create({id:Go.createId(l.pageId),x:l.camera.x,y:l.camera.y,z:l.camera.z}),a.added[d]=Xo.create({id:Xo.createId(l.pageId),pageId:l.pageId,selectedShapeIds:l.selectedShapeIds,focusedGroupId:l.focusedGroupId})}Vl(()=>{t.applyDiff(OC([o,a])),t.ensureStoreIsUsable()})}function wZ(t){var o;const n=[];for(const a of Object.values(t))(o=a.typeName)!=null&&o.match(/^(instance.*|pointer|camera)$/)&&n.push(a);const e=n.filter(a=>a.typeName==="instance"&&a.id!==Cs)[0];if(!e)return null;const r={version:XS,currentPageId:e.currentPageId,exportBackground:!!e.exportBackground,isFocusMode:!!e.isFocusMode,isDebugMode:!!e.isDebugMode,isToolLocked:!!e.isToolLocked,isGridMode:!1,pageStates:n.filter(a=>a.typeName==="instance_page_state"&&a.instanceId===e.id).map(a=>{const l=t[a.cameraId]??{x:0,y:0,z:1};return{pageId:a.pageId,camera:{x:l.x,y:l.y,z:l.z},selectedShapeIds:a.selectedShapeIds,focusedGroupId:a.focusedGroupId}})};try{return M4.validate(r),r}catch{return null}}function xZ(){window.alert(`Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.

Keep seeing this message?
• If you're using tldraw in a private or "incognito" window, try loading tldraw in a regular window or in a different browser.
• If your hard disk is full, try clearing up some space and then reload the page.`)}function CZ(){window.alert(`Oops! We could not access your browser's storage—and the app won't work correctly without that. We now need to reload the page and try again.

Keep seeing this message?
• If you're using tldraw in a private or "incognito" window, try loading tldraw in a regular window or in a different browser.`)}const EZ=(t,n)=>n.some(e=>t instanceof e);let UD,BD;function _Z(){return UD||(UD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TZ(){return BD||(BD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const A4=new WeakMap,qP=new WeakMap,$4=new WeakMap,p2=new WeakMap,yR=new WeakMap;function kZ(t){const n=new Promise((e,r)=>{const o=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{e(od(t.result)),o()},l=()=>{r(t.error),o()};t.addEventListener("success",a),t.addEventListener("error",l)});return n.then(e=>{e instanceof IDBCursor&&A4.set(e,t)}).catch(()=>{}),yR.set(n,t),n}function PZ(t){if(qP.has(t))return;const n=new Promise((e,r)=>{const o=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{e(),o()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});qP.set(t,n)}let QP={get(t,n,e){if(t instanceof IDBTransaction){if(n==="done")return qP.get(t);if(n==="objectStoreNames")return t.objectStoreNames||$4.get(t);if(n==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return od(t[n])},set(t,n,e){return t[n]=e,!0},has(t,n){return t instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in t}};function IZ(t){QP=t(QP)}function RZ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...e){const r=t.call(g2(this),n,...e);return $4.set(r,n.sort?n.sort():[n]),od(r)}:TZ().includes(t)?function(...n){return t.apply(g2(this),n),od(A4.get(this))}:function(...n){return od(t.apply(g2(this),n))}}function MZ(t){return typeof t=="function"?RZ(t):(t instanceof IDBTransaction&&PZ(t),EZ(t,_Z())?new Proxy(t,QP):t)}function od(t){if(t instanceof IDBRequest)return kZ(t);if(p2.has(t))return p2.get(t);const n=MZ(t);return n!==t&&(p2.set(t,n),yR.set(n,t)),n}const g2=t=>yR.get(t);function AZ(t,n,{blocked:e,upgrade:r,blocking:o,terminated:a}={}){const l=indexedDB.open(t,n),u=od(l);return r&&l.addEventListener("upgradeneeded",d=>{r(od(l.result),d.oldVersion,d.newVersion,od(l.transaction),d)}),e&&l.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),u.then(d=>{a&&d.addEventListener("close",()=>a()),o&&d.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}function $Z(t,{blocked:n}={}){const e=indexedDB.deleteDatabase(t);return n&&e.addEventListener("blocked",r=>n(r.oldVersion,r)),od(e).then(()=>{})}const OZ=["get","getKey","getAll","getAllKeys","count"],DZ=["put","add","delete","clear"],m2=new Map;function HD(t,n){if(!(t instanceof IDBDatabase&&!(n in t)&&typeof n=="string"))return;if(m2.get(n))return m2.get(n);const e=n.replace(/FromIndex$/,""),r=n!==e,o=DZ.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(o||OZ.includes(e)))return;const a=async function(l,...u){const d=this.transaction(l,o?"readwrite":"readonly");let h=d.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[e](...u),o&&d.done]))[0]};return m2.set(n,a),a}IZ(t=>({...t,get:(n,e,r)=>HD(n,e)||t.get(n,e,r),has:(n,e)=>!!HD(n,e)||t.has(n,e)}));const UC="TLDRAW_DOCUMENT_v2",O4="TLDRAW_DB_NAME_INDEX_v2",ir={Records:"records",Schema:"schema",SessionState:"session_state"};async function BC(t,n){FZ(t);const e=await AZ(t,3,{upgrade(r){r.objectStoreNames.contains(ir.Records)||r.createObjectStore(ir.Records),r.objectStoreNames.contains(ir.Schema)||r.createObjectStore(ir.Schema),r.objectStoreNames.contains(ir.SessionState)||r.createObjectStore(ir.SessionState)}});try{return await n(e)}finally{e.close()}}async function LZ({persistenceKey:t,sessionId:n,didCancel:e}){const r=UC+t;if(SR().includes(r))return await zZ({persistenceKey:t,didCancel:e}),await BC(r,async o=>{var v,S;if(e!=null&&e())return;const a=o.transaction([ir.Records,ir.Schema,ir.SessionState],"readonly"),l=a.objectStore(ir.Records),u=a.objectStore(ir.Schema),d=a.objectStore(ir.SessionState);let h=n?(v=await d.get(n))==null?void 0:v.snapshot:null;h||(h=(S=(await d.getAll()).sort((k,C)=>k.updatedAt-C.updatedAt).pop())==null?void 0:S.snapshot);const g={records:await l.getAll(),schema:await u.get(ir.Schema),sessionStateSnapshot:h};if(e!=null&&e()){a.abort();return}return await a.done,g})}async function jZ({persistenceKey:t,schema:n,changes:e,sessionId:r,sessionStateSnapshot:o,didCancel:a}){const l=UC+t;await BC(l,async u=>{const d=u.transaction([ir.Records,ir.Schema,ir.SessionState],"readwrite"),h=d.objectStore(ir.Records),g=d.objectStore(ir.Schema),v=d.objectStore(ir.SessionState);for(const[S,w]of Object.entries(e.added))await h.put(w,S);for(const[S,w]of Object.values(e.updated))await h.put(w,w.id);for(const S of Object.keys(e.removed))await h.delete(S);if(g.put(n.serialize(),ir.Schema),o&&r?v.put({snapshot:o,updatedAt:Date.now(),id:r},r):(o||r)&&console.error("sessionStateSnapshot and instanceId must be provided together"),a!=null&&a())return d.abort();await d.done})}async function NZ({persistenceKey:t,schema:n,snapshot:e,sessionId:r,sessionStateSnapshot:o,didCancel:a}){const l=UC+t;await BC(l,async u=>{const d=u.transaction([ir.Records,ir.Schema,ir.SessionState],"readwrite"),h=d.objectStore(ir.Records),g=d.objectStore(ir.Schema),v=d.objectStore(ir.SessionState);await h.clear();for(const[S,w]of Object.entries(e))await h.put(w,S);if(g.put(n.serialize(),ir.Schema),o&&r?v.put({snapshot:o,updatedAt:Date.now(),id:r},r):(o||r)&&console.error("sessionStateSnapshot and instanceId must be provided together"),a!=null&&a())return d.abort();await d.done})}async function zZ({persistenceKey:t,didCancel:n}){await BC(UC+t,async e=>{const r=e.transaction([ir.SessionState],"readwrite"),o=r.objectStore(ir.SessionState),a=(await o.getAll()).sort((u,d)=>u.updatedAt-d.updatedAt);if(a.length<10){await r.done;return}const l=a.slice(0,a.length-10);for(const{id:u}of l)await o.delete(u);if(n!=null&&n())return r.abort();await r.done})}function SR(){const t=JSON.parse((window==null?void 0:window.localStorage.getItem(O4))||"[]")??[];return Array.isArray(t)?t:[]}function FZ(t){const n=new Set(SR());n.add(t),window==null||window.localStorage.setItem(O4,JSON.stringify([...n]))}const UZ=350,BZ=1e4,VD=Symbol("UPDATE_INSTANCE_STATE"),HZ=t=>t;class VZ{constructor(n){T(this,"onmessage")}postMessage(n){}close(){}}const KZ=typeof BroadcastChannel>"u"?VZ:BroadcastChannel;class YZ{constructor(n,{persistenceKey:e,sessionId:r=yC,onLoad:o,onLoadError:a},l=new KZ(`tldraw-tab-sync-${e}`)){T(this,"disposables",new Set);T(this,"diffQueue",[]);T(this,"didDispose",!1);T(this,"shouldDoFullDBWrite",!0);T(this,"isReloading",!1);T(this,"persistenceKey");T(this,"sessionId");T(this,"serializedSchema");T(this,"isDebugging",!1);T(this,"documentTypes");T(this,"$sessionStateSnapshot");T(this,"initTime",Date.now());T(this,"isPersisting",!1);T(this,"didLastWriteError",!1);T(this,"scheduledPersistTimeout",null);this.store=n,this.channel=l,typeof window<"u"&&(window.tlsync=this),this.persistenceKey=e,this.sessionId=r,this.serializedSchema=this.store.schema.serialize(),this.$sessionStateSnapshot=SZ(this.store),this.disposables.add(n.listen(({changes:u})=>{this.diffQueue.push(u),this.channel.postMessage(HZ({type:"diff",storeId:this.store.id,changes:u,schema:this.serializedSchema})),this.schedulePersist()},{source:"user",scope:"document"})),this.disposables.add(n.listen(()=>{this.diffQueue.push(VD),this.schedulePersist()},{scope:"session"})),this.connect(o,a),this.documentTypes=new Set(Object.values(this.store.schema.types).filter(u=>u.scope==="document").map(u=>u.typeName))}debug(...n){this.isDebugging&&console.debug(...n)}async connect(n,e){this.debug("connecting");let r;try{r=await LZ({persistenceKey:this.persistenceKey,sessionId:this.sessionId,didCancel:()=>this.didDispose})}catch(o){e(o),CZ(),typeof window<"u"&&window.location.reload();return}if(this.debug("loaded data from store",r,"didDispose",this.didDispose),!this.didDispose)try{if(r){const o=Object.fromEntries(r.records.map(u=>[u.id,u])),a=r.sessionStateSnapshot??wZ(o),l=this.store.schema.migrateStoreSnapshot({store:o,schema:r.schema??this.store.schema.serializeEarliestVersion()});if(l.type==="error"){console.error("failed to migrate store",l),e(new Error(`Failed to migrate store: ${l.reason}`));return}this.store.mergeRemoteChanges(()=>{this.store.put(Object.values(l.value).filter(u=>this.documentTypes.has(u.typeName)),"initialize")}),a&&bZ(this.store,a)}this.channel.onmessage=({data:o})=>{var u,d;this.debug("got message",o);const a=o,l=EK(this.serializedSchema,a.schema??this.store.schema.serializeEarliestVersion());if(l===-1){if(Date.now()-this.initTime<5e3){e(new Error("Schema mismatch, please close other tabs and reload the page"));return}this.debug("reloading"),this.isReloading=!0,(d=(u=window==null?void 0:window.location)==null?void 0:u.reload)==null||d.call(u);return}else if(l===1){this.debug("telling them to reload"),this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.shouldDoFullDBWrite=!0,this.persistIfNeeded();return}a.type==="diff"&&(this.debug("applying diff"),Vl(()=>{this.store.mergeRemoteChanges(()=>{this.store.applyDiff(a.changes),this.store.ensureStoreIsUsable()})}))},this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.disposables.add(()=>{this.channel.close()}),n(this)}catch(o){if(this.debug("error loading data from store",o),this.didDispose)return;e(o);return}}close(){this.debug("closing"),this.didDispose=!0,this.disposables.forEach(n=>n())}schedulePersist(){this.debug("schedulePersist",this.scheduledPersistTimeout),!this.scheduledPersistTimeout&&(this.scheduledPersistTimeout=setTimeout(()=>{this.scheduledPersistTimeout=null,this.persistIfNeeded()},this.didLastWriteError?BZ:UZ))}persistIfNeeded(){this.debug("persistIfNeeded",{isPersisting:this.isPersisting,isReloading:this.isReloading,shouldDoFullDBWrite:this.shouldDoFullDBWrite,diffQueueLength:this.diffQueue.length,storeIsPossiblyCorrupt:this.store.isPossiblyCorrupted()}),this.scheduledPersistTimeout&&(clearTimeout(this.scheduledPersistTimeout),this.scheduledPersistTimeout=null),!this.isPersisting&&(this.isReloading||this.store.isPossiblyCorrupted()||(this.shouldDoFullDBWrite||this.diffQueue.length>0)&&this.doPersist())}async doPersist(){Qh(!this.isPersisting,"persist already in progress"),this.isPersisting=!0,this.debug("doPersist start");const n=this.diffQueue;this.diffQueue=[];try{if(this.shouldDoFullDBWrite)this.shouldDoFullDBWrite=!1,await NZ({persistenceKey:this.persistenceKey,schema:this.store.schema,snapshot:this.store.serialize(),didCancel:()=>this.didDispose,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()});else{const e=OC(n.filter(r=>r!==VD));await jZ({persistenceKey:this.persistenceKey,changes:e,schema:this.store.schema,didCancel:()=>this.didDispose,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()})}this.didLastWriteError=!1}catch(e){this.shouldDoFullDBWrite=!0,this.didLastWriteError=!0,console.error("failed to store changes in indexed db",e),xZ(),typeof window<"u"&&window.location.reload()}this.isPersisting=!1,this.debug("doPersist end"),this.schedulePersist()}}function WZ({initialData:t,defaultName:n="",...e}){const r="schema"in e&&e.schema?e.schema:vY({shapes:GZ(_4("shapeUtils"in e&&e.shapeUtils?e.shapeUtils:[]))});return new PL({schema:r,initialData:t,props:{defaultName:n}})}function GZ(t){return Object.fromEntries(t.map(n=>[n.type,{props:n.props,migrations:n.migrations}]))}function KD(t){const n=WZ(t);return t.snapshot&&n.loadSnapshot(t.snapshot),{store:n,opts:t}}function XZ(t){const[n,e]=I.useState(()=>KD(t));if(!kL(n.opts,t)){const r=KD(t);return e(r),r.store}return n.store}function qZ({persistenceKey:t,sessionId:n,...e}){const[r,o]=I.useState(null),a=XZ(e);return I.useEffect(()=>{const l=dr();if(!t){o({id:l,storeWithStatus:{status:"not-synced",store:a}});return}o({id:l,storeWithStatus:{status:"loading"}});const u=h=>{o(g=>(g==null?void 0:g.id)===l?{id:l,storeWithStatus:h}:g)},d=new YZ(a,{sessionId:n,persistenceKey:t,onLoad(){u({store:a,status:"synced-local"})},onLoadError(h){u({status:"error",error:h})}});return()=>{o(h=>(h==null?void 0:h.id)===l?null:h),d.close()}},[t,a,n]),(r==null?void 0:r.storeWithStatus)??{status:"loading"}}let D4=!1;if(typeof window<"u"){const t=window.navigator.userAgent,n=!!t.match(/iPad/i)||!!t.match(/iPhone/i),e=!!t.match(/WebKit/i);D4=n&&e&&!t.match(/CriOS/i)}function QZ(){const t=Oe();I.useEffect(()=>{if(!D4)return;function n(e){(e.target instanceof HTMLInputElement&&e.target.type==="text"||e.target instanceof HTMLTextAreaElement)&&t.complete()}return document.addEventListener("focusout",n),()=>document.removeEventListener("focusout",n)},[t])}function ZZ(){const t=Oe(),n=is();I.useEffect(()=>{const e=a=>n.style.setProperty("--tl-zoom",a.toString()),r=_L(e,100),o=new jm("useZoomCss",()=>{t.getCurrentPageShapeIds().size<300?e(t.getZoomLevel()):r(t.getZoomLevel())});return o.attach(),o.execute(),()=>{o.detach()}},[t,n])}const JZ=[],eJ=[],tJ=I.memo(function({store:n,components:e,className:r,user:o,...a}){const[l,u]=ft.useState(null),d=I.useMemo(()=>o??b4(),[o]),h=(e==null?void 0:e.ErrorFallback)===void 0?WL:e==null?void 0:e.ErrorFallback,g={...a,shapeUtils:a.shapeUtils??JZ,tools:a.tools??eJ,components:e};return x.jsx("div",{ref:u,draggable:!1,className:Wt("tl-container tl-theme__light",r),onPointerDown:eo,tabIndex:-1,children:x.jsx(KS,{fallback:h,onError:v=>GI(v,{tags:{origin:"react.tldraw-before-app"}}),children:l&&x.jsx(iW,{container:l,children:x.jsx(XW,{overrides:e,children:n?n instanceof PL?x.jsx(j4,{...g,store:n,user:d}):x.jsx(L4,{...g,store:n,user:d}):x.jsx(nJ,{...g,store:n,user:d})})})})})});function nJ(t){const{defaultName:n,snapshot:e,initialData:r,shapeUtils:o,persistenceKey:a,sessionId:l,user:u}=t,d=qZ({shapeUtils:o,initialData:r,persistenceKey:a,sessionId:l,defaultName:n,snapshot:e});return x.jsx(L4,{...t,store:d,user:u})}const L4=I.memo(function({store:n,user:e,...r}){var a;const o=is();switch(I.useLayoutEffect(()=>{e.userPreferences.get().isDarkMode&&(o.classList.remove("tl-theme__light"),o.classList.add("tl-theme__dark"))},[o,e]),n.status){case"error":throw n.error;case"loading":{const l=((a=r.components)==null?void 0:a.LoadingScreen)??tQ;return x.jsx(l,{})}}return x.jsx(j4,{...r,store:n.store,user:e})});function j4({onMount:t,children:n,store:e,tools:r,shapeUtils:o,user:a,initialState:l,autoFocus:u=!0,inferDarkMode:d}){const{ErrorFallback:h}=to(),g=is(),[v,S]=I.useState(null);I.useLayoutEffect(()=>{const k=new $t({store:e,shapeUtils:o,tools:r,getContainer:()=>g,user:a,initialState:l,inferDarkMode:d});return window.app=k,window.editor=k,S(k),()=>{k.dispose()}},[g,o,r,e,a,l,d]);const w=I.useSyncExternalStore(I.useCallback(k=>v?(v.on("crash",k),()=>v.off("crash",k)):()=>{},[v]),()=>(v==null?void 0:v.getCrashingError())??null);return v?x.jsx(KS,{fallback:h,onError:k=>v.annotateError(k,{origin:"react.tldraw",willCrashApp:!0}),children:w?x.jsx(iJ,{crashingError:w}):x.jsx(oR.Provider,{value:v,children:x.jsx(rJ,{autoFocus:u,onMount:t,children:n})})}):null}function rJ({children:t,onMount:n,autoFocus:e}){return ZZ(),uZ(),dZ(),QZ(),pZ(),hZ(e),sJ(n),Iq(),Oe().updateViewportScreenBounds(),t??x.jsx(hR,{})}function iJ({crashingError:t}){throw t}function N4({children:t}){const{Spinner:n}=to();return x.jsxs("div",{className:"tl-loading",children:[n?x.jsx(n,{}):null,t]})}function oJ({children:t}){return x.jsx("div",{className:"tl-loading",children:t})}function sJ(t){const n=Oe(),e=fZ(r=>{const o=t==null?void 0:t(r);return r.emit("mount"),window.tldrawReady=!0,o});ft.useLayoutEffect(()=>{if(n)return e==null?void 0:e(n)},[n,e])}function ud({children:t,className:n="",...e}){return x.jsx("div",{...e,className:`tl-html-container ${n}`,children:t})}sr(function({x:n=0,y:e=0,rotation:r=0,...o}){const a=Oe(),l=I.useRef(null),u=a.getCamera();return I.useLayoutEffect(()=>{const{x:d,y:h,z:g}=a.getCamera(),v=l.current;v&&d!==void 0&&(v.style.transform=`translate(${d}px, ${h}px) scale(${g}) rotate(${r}rad) translate(${n}px, ${e}px)`)},[u,a,n,e,r]),x.jsx("div",{ref:l,...o,className:Wt("tl-positioned",o.className)})});function HC(t,n,e={}){const{newPoint:r,handle:o,scaleX:a,scaleY:l}=n,{minWidth:u=1,maxWidth:d=1/0,minHeight:h=1,maxHeight:g=1/0}=e;let v=t.props.w*a,S=t.props.h*l;const w=new N(0,0);if(v>0){if(v<u){switch(o){case"top_left":case"left":case"bottom_left":{w.x=v-u;break}case"top":case"bottom":{w.x=(v-u)/2;break}default:w.x=0}v=u}}else if(w.x=v,v=-v,v<u){switch(o){case"top_left":case"left":case"bottom_left":{w.x=-v;break}default:w.x=-u}v=u}if(S>0){if(S<h){switch(o){case"top_left":case"top":case"top_right":{w.y=S-h;break}case"right":case"left":{w.y=(S-h)/2;break}default:w.y=0}S=h}}else if(w.y=S,S=-S,S<h){switch(o){case"top_left":case"top":case"top_right":{w.y=-S;break}default:w.y=-h}S=h}const{x:k,y:C}=w.rot(t.rotation).add(r);return{x:k,y:C,props:{w:Math.min(d,v),h:Math.min(g,S)}}}class Vm extends Pa{constructor(){super(...arguments);T(this,"onResize",(e,r)=>HC(e,r))}getGeometry(e){return new Qc({width:e.props.w,height:e.props.h,isFilled:!0})}}var hP;let aJ=(hP=class extends Et{constructor(){super(...arguments);T(this,"onPointerDown",e=>{this.parent.transition("pointing",e)});T(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});T(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},T(hP,"id","idle"),hP);var pP;let lJ=(pP=class extends Et{constructor(){super(...arguments);T(this,"markId","");T(this,"wasFocusedOnEnter",!1);T(this,"onEnter",()=>{this.wasFocusedOnEnter=!this.editor.getIsMenuOpen()});T(this,"onPointerMove",e=>{if(this.editor.inputs.isDragging){const{originPagePoint:r}=this.editor.inputs,o=this.parent.shapeType,a=Ir();this.markId=`creating:${a}`,this.editor.mark(this.markId),this.editor.createShapes([{id:a,type:o,x:r.x,y:r.y,props:{w:1,h:1}}]).select(a),this.editor.setCurrentTool("select.resizing",{...e,target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:this.parent.id,onCreate:this.parent.onCreate})}});T(this,"onPointerUp",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.complete()});T(this,"onInterrupt",()=>{this.cancel()})}complete(){const{originPagePoint:e}=this.editor.inputs;if(!this.wasFocusedOnEnter)return;this.editor.mark(this.markId);const r=this.parent.shapeType,o=Ir();this.editor.mark(this.markId),this.editor.createShapes([{id:o,type:r,x:e.x,y:e.y}]);const a=this.editor.getShape(o),{w:l,h:u}=this.editor.getShapeUtil(a).getDefaultProps(),d=new N(l/2,u/2),h=this.editor.getShapeParentTransform(a);h&&d.rot(-h.rotation()),this.editor.updateShapes([{id:o,type:r,x:a.x-d.x,y:a.y-d.y}]),this.editor.setSelectedShapes([o]),this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):this.editor.setCurrentTool("select.idle")}cancel(){this.parent.transition("idle")}},T(pP,"id","pointing"),pP);class _m extends Et{constructor(){super(...arguments);T(this,"onCreate")}}T(_m,"id","box"),T(_m,"initial","idle"),T(_m,"children",()=>[aJ,lJ]);function z4(t,n){const e=I.useRef(t);return n(t,e.current)?e.current:(e.current=t,t)}function YD(t){return z4(t,sK)}function cJ(t){return z4(t,kL)}function WD(t){const n=Oe();return He("isCropping",()=>n.getCroppingShapeId()===t,[n,t])}function VC(t){const n=Oe();return He("isEditing",()=>n.getEditingShapeId()===t,[n,t])}function Uc(t){const n=Oe();return I.useMemo(function(){const o=h=>{if(h.isKilled)return;if(h.button===2){n.dispatch({type:"pointer",target:"selection",handle:t,name:"right_click",...na(h)});return}if(h.button!==0)return;const g=sC(h.currentTarget);function v(){g.removeEventListener("pointerup",v),p0(g,h)}h0(g,h),g.addEventListener("pointerup",v),n.dispatch({name:"pointer_down",type:"pointer",target:"selection",handle:t,...na(h)}),eo(h)};let a,l;function u(h){h.isKilled||h.button===0&&(h.clientX===a&&h.clientY===l||(a=h.clientX,l=h.clientY,n.dispatch({name:"pointer_move",type:"pointer",target:"selection",handle:t,...na(h)})))}return{onPointerDown:o,onPointerMove:u,onPointerUp:h=>{h.isKilled||h.button===0&&n.dispatch({name:"pointer_up",type:"pointer",target:"selection",handle:t,...na(h)})}}},[n,t])}const uJ=20,dJ=8;function bR(t,n=uJ){return Math.max(dJ,Math.ceil(t/n))}class fJ extends ip{constructor(e){super({...e,isFilled:!1,isClosed:!1});T(this,"_center");T(this,"radius");T(this,"start");T(this,"end");T(this,"measure");T(this,"length");T(this,"angleStart");T(this,"angleEnd");const{center:r,radius:o,sweepFlag:a,largeArcFlag:l,start:u,end:d}=e;if(u.equals(d))throw Error("Arc must have different start and end points.");this.angleStart=N.Angle(r,u),this.angleEnd=N.Angle(r,d),this.measure=hJ(this.angleStart,this.angleEnd,a,l),this.length=this.measure*o,this.start=u,this.end=d,this._center=r,this.radius=o}nearestPoint(e){const{_center:r,measure:o,radius:a,angleEnd:l,angleStart:u,start:d,end:h}=this,g=GD(o,u,l,r.angle(e));if(g<=0)return d;if(g>=1)return h;const v=r.clone().add(e.clone().sub(r).uni().mul(a));let S=1/0,w;for(const k of[d,h,v])e.dist(k)<S&&(w=k,S=e.dist(k));if(!w)throw Error("nearest point not found");return w}hitTestLineSegment(e,r,o){const{_center:a,radius:l,measure:u,angleStart:d,angleEnd:h}=this,g=zC(e,r,a,l);return g===null?!1:g.some(v=>{const S=GD(u,d,h,a.angle(v));return S>=0&&S<=1})}getVertices(){const{_center:e,measure:r,length:o,radius:a,angleStart:l}=this,u=[];for(let d=0,h=bR(Math.abs(o));d<h+1;d++){const g=d/h*r,v=l+g;u.push(e.clone().add(new N(Math.cos(v),Math.sin(v)).mul(a)))}return u}}function GD(t,n,e,r){let o;if(Math.abs(t)>Jn){o=DS(n,r);const a=DS(r,e);return Math.abs(o)<Math.abs(a)?o/t:(t-a)/t}else return o=DS(n,r),o/t}function hJ(t,n,e,r){const o=2*((n-t)%or)%or-(n-t)%or;return r?(or-Math.abs(o))*(e?1:-1):o}class F4 extends ip{constructor(e){super({isClosed:!0,...e});T(this,"_center");T(this,"radius");T(this,"x");T(this,"y");this.config=e;const{x:r=0,y:o=0,radius:a}=e;this.x=r,this.y=o,this._center=new N(a+r,a+o),this.radius=a}getBounds(){return new Mt(this.x,this.y,this.radius*2,this.radius*2)}getVertices(){const{_center:e,radius:r}=this,o=or*r,a=[];for(let l=0,u=bR(o);l<u;l++){const d=l/u*or;a.push(e.clone().add(N.FromAngle(d).mul(r)))}return a}nearestPoint(e){const{_center:r,radius:o}=this;return r.equals(e)?N.AddXY(r,o,0):r.clone().add(e.clone().sub(r).uni().mul(o))}hitTestLineSegment(e,r,o){const{_center:a,radius:l}=this;return zC(e,r,a,l)!==null}}class pJ extends op{constructor(e){const{start:r,cp1:o,cp2:a,end:l}=e;super({...e,points:[r,l]});T(this,"a");T(this,"b");T(this,"c");T(this,"d");this.a=r,this.b=o,this.c=a,this.d=l}getVertices(){const e=[],{a:r,b:o,c:a,d:l}=this;for(let u=0,d=10;u<=d;u++){const h=u/d;e.push(new N((1-h)*(1-h)*(1-h)*r.x+3*((1-h)*(1-h))*h*o.x+3*(1-h)*(h*h)*a.x+h*h*h*l.x,(1-h)*(1-h)*(1-h)*r.y+3*((1-h)*(1-h))*h*o.y+3*(1-h)*(h*h)*a.y+h*h*h*l.y))}return e}midPoint(){return gJ(this,.5)}nearestPoint(e){let r,o=1/0;for(const a of this.segments){const l=a.nearestPoint(e),u=l.dist(e);u<o&&(r=l,o=u)}if(!r)throw Error("nearest point not found");return r}}function gJ(t,n){const{a:e,b:r,c:o,d:a}=t;return new N((1-n)*(1-n)*(1-n)*e.x+3*((1-n)*(1-n))*n*r.x+3*(1-n)*(n*n)*o.x+n*n*n*a.x,(1-n)*(1-n)*(1-n)*e.y+3*((1-n)*(1-n))*n*r.y+3*(1-n)*(n*n)*o.y+n*n*n*a.y)}class h1 extends ip{constructor(e){super({...e,isClosed:!1,isFilled:!1});T(this,"points");T(this,"_segments");T(this,"_length");const{points:r}=e;this.points=r}get segments(){if(!this._segments){this._segments=[];const{points:e}=this,r=e.length,o=r-2,a=1.25;for(let l=0;l<r-1;l++){const u=l===0?e[0]:e[l-1],d=e[l],h=e[l+1],g=l===o?h:e[l+2],v=d,S=l===0?u:new N(d.x+(h.x-u.x)/6*a,d.y+(h.y-u.y)/6*a),w=l===o?h:new N(h.x-(g.x-d.x)/6*a,h.y-(g.y-d.y)/6*a),k=h;this._segments.push(new pJ({start:v,cp1:S,cp2:w,end:k}))}}return this._segments}get length(){return this._length||(this._length=this.segments.reduce((e,r)=>e+r.length,0)),this._length}getVertices(){const e=this.segments.reduce((r,o)=>r.concat(o.vertices),[]);return e.push(this.points[this.points.length-1]),e}nearestPoint(e){let r,o=1/0;for(const a of this.segments){const l=a.nearestPoint(e),u=l.dist(e);u<o&&(r=l,o=u)}if(!r)throw Error("nearest point not found");return r}hitTestLineSegment(e,r,o){return this.segments.some(a=>a.hitTestLineSegment(e,r,o))}}class U4 extends ip{constructor(e){super({...e,isClosed:!0});T(this,"w");T(this,"h");T(this,"_edges");this.config=e;const{width:r,height:o}=e;this.w=r,this.h=o}get edges(){if(!this._edges){const{vertices:e}=this;this._edges=[];for(let r=0,o=e.length;r<o;r++){const a=e[r],l=e[(r+1)%o];this._edges.push(new gC({start:a,end:l}))}}return this._edges}getVertices(){const e=Math.max(1,this.w),r=Math.max(1,this.h),o=e/2,a=r/2,l=Math.pow(o-a,2)/Math.pow(o+a,2),u=Jn*(o+a)*(1+3*l/(10+Math.sqrt(4-3*l))),d=bR(u),h=or/d,g=Math.cos(h),v=Math.sin(h);let S=0,w=1,k=0,C=1;const E=Array(d);for(let R=0;R<d;R++)E[R]=new N(o+o*w,a+a*S),k=v*w+g*S,C=g*w-v*S,S=k,w=C;return E}nearestPoint(e){let r,o=1/0;for(const a of this.edges){const l=a.nearestPoint(e),u=l.dist(e);u<o&&(r=l,o=u)}if(!r)throw Error("nearest point not found");return r}hitTestLineSegment(e,r,o){return this.edges.some(a=>a.hitTestLineSegment(e,r,o))}getBounds(){return new Mt(0,0,this.w,this.h)}}class mJ extends U4{constructor(n){super({...n}),this.config=n}getVertices(){const n=Math.max(1,this.w),e=Math.max(1,this.h),r=n/2,o=e/2,a=10,l=Array(a*2-2);if(e>n)for(let u=0;u<a-1;u++){const d=-Jn+Jn*u/(a-2),h=Jn*u/(a-2);l[u]=new N(r+r*Math.cos(d),r+r*Math.sin(d)),l[u+(a-1)]=new N(r+r*Math.cos(h),e-r+r*Math.sin(h))}else for(let u=0;u<a-1;u++){const d=-Pr+Jn*u/(a-2),h=Pr+Jn*-u/(a-2);l[u]=new N(n-o+o*Math.cos(d),e-o+o*Math.sin(d)),l[u+(a-1)]=new N(o-o*Math.cos(h),e-o+o*Math.sin(h))}return l}}function XD(t,n){return t<0?1:t>n?-1:t<Jg?(Jg-t)/Jg:t>n-Jg?-(Jg-n+t)/Jg:0}function wR(t){if(!t.inputs.isDragging||t.inputs.isPanning)return;const{inputs:{currentScreenPoint:{x:n,y:e}}}=t,r=t.getZoomLevel(),o=t.getViewportScreenBounds(),a=o.w<1e3?.612:1,l=o.h<1e3?.612:1,u=XD(n-o.x,o.w),d=XD(e-o.y,o.h);if(u===0&&d===0)return;const h=t.user.getEdgeScrollSpeed()*LW,g=h*u*a/r,v=h*d*l/r,S=t.getCamera();t.setCamera({x:S.x+g,y:S.y+v})}async function qD({shouldReload:t=!0}={}){sessionStorage.clear(),await Promise.all(SR().map(n=>$Z(n))),localStorage.clear(),t&&window.location.reload()}typeof window<"u"&&(process.env.NODE_ENV==="development"&&(window.hardReset=qD),window.__tldraw__hardReset=qD);function vJ(t,n="_blank"){sR.openWindow(t,n)}var vS=function(t){return t&&t.Math===Math&&t},sa=vS(typeof globalThis=="object"&&globalThis)||vS(typeof window=="object"&&window)||vS(typeof self=="object"&&self)||vS(typeof To=="object"&&To)||vS(typeof To=="object"&&To)||function(){return this}()||Function("return this")(),xR={},ks=function(t){try{return!!t()}catch{return!0}},yJ=ks,jf=!yJ(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),SJ=ks,KC=!SJ(function(){var t=(function(){}).bind();return typeof t!="function"||t.hasOwnProperty("prototype")}),bJ=KC,Lx=Function.prototype.call,Nf=bJ?Lx.bind(Lx):function(){return Lx.apply(Lx,arguments)},B4={},H4={}.propertyIsEnumerable,V4=Object.getOwnPropertyDescriptor,wJ=V4&&!H4.call({1:2},1);B4.f=wJ?function(n){var e=V4(this,n);return!!e&&e.enumerable}:H4;var K4=function(t,n){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:n}},Y4=KC,W4=Function.prototype,ZP=W4.call,xJ=Y4&&W4.bind.bind(ZP,ZP),no=Y4?xJ:function(t){return function(){return ZP.apply(t,arguments)}},G4=no,CJ=G4({}.toString),EJ=G4("".slice),Km=function(t){return EJ(CJ(t),8,-1)},_J=no,TJ=ks,kJ=Km,v2=Object,PJ=_J("".split),IJ=TJ(function(){return!v2("z").propertyIsEnumerable(0)})?function(t){return kJ(t)==="String"?PJ(t,""):v2(t)}:v2,YC=function(t){return t==null},RJ=YC,MJ=TypeError,Ym=function(t){if(RJ(t))throw new MJ("Can't call method on "+t);return t},AJ=IJ,$J=Ym,WC=function(t){return AJ($J(t))},JP=typeof document=="object"&&document.all,OJ=typeof JP>"u"&&JP!==void 0,X4={all:JP,IS_HTMLDDA:OJ},q4=X4,DJ=q4.all,Ps=q4.IS_HTMLDDA?function(t){return typeof t=="function"||t===DJ}:function(t){return typeof t=="function"},QD=Ps,Q4=X4,LJ=Q4.all,ap=Q4.IS_HTMLDDA?function(t){return typeof t=="object"?t!==null:QD(t)||t===LJ}:function(t){return typeof t=="object"?t!==null:QD(t)},y2=sa,jJ=Ps,NJ=function(t){return jJ(t)?t:void 0},GC=function(t,n){return arguments.length<2?NJ(y2[t]):y2[t]&&y2[t][n]},zJ=no,Z4=zJ({}.isPrototypeOf),FJ=typeof navigator<"u"&&String(navigator.userAgent)||"",J4=sa,S2=FJ,ZD=J4.process,JD=J4.Deno,e6=ZD&&ZD.versions||JD&&JD.version,t6=e6&&e6.v8,Kl,SC;t6&&(Kl=t6.split("."),SC=Kl[0]>0&&Kl[0]<4?1:+(Kl[0]+Kl[1]));!SC&&S2&&(Kl=S2.match(/Edge\/(\d+)/),(!Kl||Kl[1]>=74)&&(Kl=S2.match(/Chrome\/(\d+)/),Kl&&(SC=+Kl[1])));var UJ=SC,n6=UJ,BJ=ks,HJ=sa,VJ=HJ.String,ej=!!Object.getOwnPropertySymbols&&!BJ(function(){var t=Symbol("symbol detection");return!VJ(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n6&&n6<41}),KJ=ej,tj=KJ&&!Symbol.sham&&typeof Symbol.iterator=="symbol",YJ=GC,WJ=Ps,GJ=Z4,XJ=tj,qJ=Object,nj=XJ?function(t){return typeof t=="symbol"}:function(t){var n=YJ("Symbol");return WJ(n)&&GJ(n.prototype,qJ(t))},QJ=String,ZJ=function(t){try{return QJ(t)}catch{return"Object"}},JJ=Ps,eee=ZJ,tee=TypeError,CR=function(t){if(JJ(t))return t;throw new tee(eee(t)+" is not a function")},nee=CR,ree=YC,ER=function(t,n){var e=t[n];return ree(e)?void 0:nee(e)},b2=Nf,w2=Ps,x2=ap,iee=TypeError,oee=function(t,n){var e,r;if(n==="string"&&w2(e=t.toString)&&!x2(r=b2(e,t))||w2(e=t.valueOf)&&!x2(r=b2(e,t))||n!=="string"&&w2(e=t.toString)&&!x2(r=b2(e,t)))return r;throw new iee("Can't convert object to primitive value")},rj={exports:{}},r6=sa,see=Object.defineProperty,_R=function(t,n){try{see(r6,t,{value:n,configurable:!0,writable:!0})}catch{r6[t]=n}return n},aee=sa,lee=_R,i6="__core-js_shared__",cee=aee[i6]||lee(i6,{}),TR=cee,o6=TR;(rj.exports=function(t,n){return o6[t]||(o6[t]=n!==void 0?n:{})})("versions",[]).push({version:"3.34.0",mode:"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.34.0/LICENSE",source:"https://github.com/zloirock/core-js"});var kR=rj.exports,uee=Ym,dee=Object,b0=function(t){return dee(uee(t))},fee=no,hee=b0,pee=fee({}.hasOwnProperty),zf=Object.hasOwn||function(n,e){return pee(hee(n),e)},gee=no,mee=0,vee=Math.random(),yee=gee(1 .toString),ij=function(t){return"Symbol("+(t===void 0?"":t)+")_"+yee(++mee+vee,36)},See=sa,bee=kR,s6=zf,wee=ij,xee=ej,Cee=tj,mm=See.Symbol,C2=bee("wks"),Eee=Cee?mm.for||mm:mm&&mm.withoutSetter||wee,vd=function(t){return s6(C2,t)||(C2[t]=xee&&s6(mm,t)?mm[t]:Eee("Symbol."+t)),C2[t]},_ee=Nf,a6=ap,l6=nj,Tee=ER,kee=oee,Pee=vd,Iee=TypeError,Ree=Pee("toPrimitive"),Mee=function(t,n){if(!a6(t)||l6(t))return t;var e=Tee(t,Ree),r;if(e){if(n===void 0&&(n="default"),r=_ee(e,t,n),!a6(r)||l6(r))return r;throw new Iee("Can't convert object to primitive value")}return n===void 0&&(n="number"),kee(t,n)},Aee=Mee,$ee=nj,oj=function(t){var n=Aee(t,"string");return $ee(n)?n:n+""},Oee=sa,c6=ap,eI=Oee.document,Dee=c6(eI)&&c6(eI.createElement),sj=function(t){return Dee?eI.createElement(t):{}},Lee=jf,jee=ks,Nee=sj,aj=!Lee&&!jee(function(){return Object.defineProperty(Nee("div"),"a",{get:function(){return 7}}).a!==7}),zee=jf,Fee=Nf,Uee=B4,Bee=K4,Hee=WC,Vee=oj,Kee=zf,Yee=aj,u6=Object.getOwnPropertyDescriptor;xR.f=zee?u6:function(n,e){if(n=Hee(n),e=Vee(e),Yee)try{return u6(n,e)}catch{}if(Kee(n,e))return Bee(!Fee(Uee.f,n,e),n[e])};var Wm={},Wee=jf,Gee=ks,lj=Wee&&Gee(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Xee=ap,qee=String,Qee=TypeError,lp=function(t){if(Xee(t))return t;throw new Qee(qee(t)+" is not an object")},Zee=jf,Jee=aj,ete=lj,jx=lp,d6=oj,tte=TypeError,E2=Object.defineProperty,nte=Object.getOwnPropertyDescriptor,_2="enumerable",T2="configurable",k2="writable";Wm.f=Zee?ete?function(n,e,r){if(jx(n),e=d6(e),jx(r),typeof n=="function"&&e==="prototype"&&"value"in r&&k2 in r&&!r[k2]){var o=nte(n,e);o&&o[k2]&&(n[e]=r.value,r={configurable:T2 in r?r[T2]:o[T2],enumerable:_2 in r?r[_2]:o[_2],writable:!1})}return E2(n,e,r)}:E2:function(n,e,r){if(jx(n),e=d6(e),jx(r),Jee)try{return E2(n,e,r)}catch{}if("get"in r||"set"in r)throw new tte("Accessors not supported");return"value"in r&&(n[e]=r.value),n};var rte=jf,ite=Wm,ote=K4,PR=rte?function(t,n,e){return ite.f(t,n,ote(1,e))}:function(t,n,e){return t[n]=e,t},cj={exports:{}},tI=jf,ste=zf,uj=Function.prototype,ate=tI&&Object.getOwnPropertyDescriptor,IR=ste(uj,"name"),lte=IR&&(function(){}).name==="something",cte=IR&&(!tI||tI&&ate(uj,"name").configurable),ute={EXISTS:IR,PROPER:lte,CONFIGURABLE:cte},dte=no,fte=Ps,nI=TR,hte=dte(Function.toString);fte(nI.inspectSource)||(nI.inspectSource=function(t){return hte(t)});var dj=nI.inspectSource,pte=sa,gte=Ps,f6=pte.WeakMap,mte=gte(f6)&&/native code/.test(String(f6)),vte=kR,yte=ij,h6=vte("keys"),fj=function(t){return h6[t]||(h6[t]=yte(t))},RR={},Ste=mte,hj=sa,bte=ap,wte=PR,P2=zf,I2=TR,xte=fj,Cte=RR,p6="Object already initialized",rI=hj.TypeError,Ete=hj.WeakMap,bC,qS,wC,_te=function(t){return wC(t)?qS(t):bC(t,{})},Tte=function(t){return function(n){var e;if(!bte(n)||(e=qS(n)).type!==t)throw new rI("Incompatible receiver, "+t+" required");return e}};if(Ste||I2.state){var Fc=I2.state||(I2.state=new Ete);Fc.get=Fc.get,Fc.has=Fc.has,Fc.set=Fc.set,bC=function(t,n){if(Fc.has(t))throw new rI(p6);return n.facade=t,Fc.set(t,n),n},qS=function(t){return Fc.get(t)||{}},wC=function(t){return Fc.has(t)}}else{var im=xte("state");Cte[im]=!0,bC=function(t,n){if(P2(t,im))throw new rI(p6);return n.facade=t,wte(t,im,n),n},qS=function(t){return P2(t,im)?t[im]:{}},wC=function(t){return P2(t,im)}}var pj={set:bC,get:qS,has:wC,enforce:_te,getterFor:Tte},MR=no,kte=ks,Pte=Ps,Nx=zf,iI=jf,Ite=ute.CONFIGURABLE,Rte=dj,gj=pj,Mte=gj.enforce,Ate=gj.get,g6=String,p1=Object.defineProperty,$te=MR("".slice),Ote=MR("".replace),Dte=MR([].join),Lte=iI&&!kte(function(){return p1(function(){},"length",{value:8}).length!==8}),jte=String(String).split("String"),Nte=cj.exports=function(t,n,e){$te(g6(n),0,7)==="Symbol("&&(n="["+Ote(g6(n),/^Symbol\(([^)]*)\)/,"$1")+"]"),e&&e.getter&&(n="get "+n),e&&e.setter&&(n="set "+n),(!Nx(t,"name")||Ite&&t.name!==n)&&(iI?p1(t,"name",{value:n,configurable:!0}):t.name=n),Lte&&e&&Nx(e,"arity")&&t.length!==e.arity&&p1(t,"length",{value:e.arity});try{e&&Nx(e,"constructor")&&e.constructor?iI&&p1(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch{}var r=Mte(t);return Nx(r,"source")||(r.source=Dte(jte,typeof n=="string"?n:"")),t};Function.prototype.toString=Nte(function(){return Pte(this)&&Ate(this).source||Rte(this)},"toString");var zte=cj.exports,Fte=Ps,Ute=Wm,Bte=zte,Hte=_R,mj=function(t,n,e,r){r||(r={});var o=r.enumerable,a=r.name!==void 0?r.name:n;if(Fte(e)&&Bte(e,a,r),r.global)o?t[n]=e:Hte(n,e);else{try{r.unsafe?t[n]&&(o=!0):delete t[n]}catch{}o?t[n]=e:Ute.f(t,n,{value:e,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},vj={},Vte=Math.ceil,Kte=Math.floor,Yte=Math.trunc||function(n){var e=+n;return(e>0?Kte:Vte)(e)},Wte=Yte,cp=function(t){var n=+t;return n!==n||n===0?0:Wte(n)},Gte=cp,Xte=Math.max,qte=Math.min,Qte=function(t,n){var e=Gte(t);return e<0?Xte(e+n,0):qte(e,n)},Zte=cp,Jte=Math.min,yj=function(t){return t>0?Jte(Zte(t),9007199254740991):0},ene=yj,w0=function(t){return ene(t.length)},tne=WC,nne=Qte,rne=w0,m6=function(t){return function(n,e,r){var o=tne(n),a=rne(o),l=nne(r,a),u;if(t&&e!==e){for(;a>l;)if(u=o[l++],u!==u)return!0}else for(;a>l;l++)if((t||l in o)&&o[l]===e)return t||l||0;return!t&&-1}},ine={includes:m6(!0),indexOf:m6(!1)},one=no,R2=zf,sne=WC,ane=ine.indexOf,lne=RR,v6=one([].push),Sj=function(t,n){var e=sne(t),r=0,o=[],a;for(a in e)!R2(lne,a)&&R2(e,a)&&v6(o,a);for(;n.length>r;)R2(e,a=n[r++])&&(~ane(o,a)||v6(o,a));return o},AR=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],cne=Sj,une=AR,dne=une.concat("length","prototype");vj.f=Object.getOwnPropertyNames||function(n){return cne(n,dne)};var bj={};bj.f=Object.getOwnPropertySymbols;var fne=GC,hne=no,pne=vj,gne=bj,mne=lp,vne=hne([].concat),yne=fne("Reflect","ownKeys")||function(n){var e=pne.f(mne(n)),r=gne.f;return r?vne(e,r(n)):e},y6=zf,Sne=yne,bne=xR,wne=Wm,xne=function(t,n,e){for(var r=Sne(n),o=wne.f,a=bne.f,l=0;l<r.length;l++){var u=r[l];!y6(t,u)&&!(e&&y6(e,u))&&o(t,u,a(n,u))}},Cne=ks,Ene=Ps,_ne=/#|\.prototype\./,x0=function(t,n){var e=kne[Tne(t)];return e===Ine?!0:e===Pne?!1:Ene(n)?Cne(n):!!n},Tne=x0.normalize=function(t){return String(t).replace(_ne,".").toLowerCase()},kne=x0.data={},Pne=x0.NATIVE="N",Ine=x0.POLYFILL="P",Rne=x0,M2=sa,Mne=xR.f,Ane=PR,$ne=mj,One=_R,Dne=xne,Lne=Rne,Gm=function(t,n){var e=t.target,r=t.global,o=t.stat,a,l,u,d,h,g;if(r?l=M2:o?l=M2[e]||One(e,{}):l=(M2[e]||{}).prototype,l)for(u in n){if(h=n[u],t.dontCallGetSet?(g=Mne(l,u),d=g&&g.value):d=l[u],a=Lne(r?u:e+(o?".":"#")+u,t.forced),!a&&d!==void 0){if(typeof h==typeof d)continue;Dne(h,d)}(t.sham||d&&d.sham)&&Ane(h,"sham",!0),$ne(l,u,h,t)}},wj={},jne=Sj,Nne=AR,zne=Object.keys||function(n){return jne(n,Nne)},Fne=jf,Une=lj,Bne=Wm,Hne=lp,Vne=WC,Kne=zne;wj.f=Fne&&!Une?Object.defineProperties:function(n,e){Hne(n);for(var r=Vne(e),o=Kne(e),a=o.length,l=0,u;a>l;)Bne.f(n,u=o[l++],r[u]);return n};var Yne=GC,Wne=Yne("document","documentElement"),Gne=lp,Xne=wj,S6=AR,qne=RR,Qne=Wne,Zne=sj,Jne=fj,b6=">",w6="<",oI="prototype",sI="script",xj=Jne("IE_PROTO"),A2=function(){},Cj=function(t){return w6+sI+b6+t+w6+"/"+sI+b6},x6=function(t){t.write(Cj("")),t.close();var n=t.parentWindow.Object;return t=null,n},ere=function(){var t=Zne("iframe"),n="java"+sI+":",e;return t.style.display="none",Qne.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(Cj("document.F=Object")),e.close(),e.F},zx,g1=function(){try{zx=new ActiveXObject("htmlfile")}catch{}g1=typeof document<"u"?document.domain&&zx?x6(zx):ere():x6(zx);for(var t=S6.length;t--;)delete g1[oI][S6[t]];return g1()};qne[xj]=!0;var Ej=Object.create||function(n,e){var r;return n!==null?(A2[oI]=Gne(n),r=new A2,A2[oI]=null,r[xj]=n):r=g1(),e===void 0?r:Xne.f(r,e)},tre=vd,nre=Ej,rre=Wm.f,aI=tre("unscopables"),lI=Array.prototype;lI[aI]===void 0&&rre(lI,aI,{configurable:!0,value:nre(null)});var $R=function(t){lI[aI][t]=!0},ire=Gm,ore=b0,sre=w0,are=cp,lre=$R;ire({target:"Array",proto:!0},{at:function(n){var e=ore(this),r=sre(e),o=are(n),a=o>=0?o:r+o;return a<0||a>=r?void 0:e[a]}});lre("at");var cre=sa,ure=no,C0=function(t,n){return ure(cre[t].prototype[n])},dre=C0;dre("Array","at");var fre=Km,_j=Array.isArray||function(n){return fre(n)==="Array"},hre=TypeError,pre=9007199254740991,gre=function(t){if(t>pre)throw hre("Maximum allowed index exceeded");return t},mre=Km,vre=no,Tj=function(t){if(mre(t)==="Function")return vre(t)},C6=Tj,yre=CR,Sre=KC,bre=C6(C6.bind),wre=function(t,n){return yre(t),n===void 0?t:Sre?bre(t,n):function(){return t.apply(n,arguments)}},xre=_j,Cre=w0,Ere=gre,_re=wre,kj=function(t,n,e,r,o,a,l,u){for(var d=o,h=0,g=l?_re(l,u):!1,v,S;h<r;)h in e&&(v=g?g(e[h],h,n):e[h],a>0&&xre(v)?(S=Cre(v),d=kj(t,n,v,S,d,a-1)-1):(Ere(d+1),t[d]=v),d++),h++;return d},Pj=kj,Tre=vd,kre=Tre("toStringTag"),Ij={};Ij[kre]="z";var Pre=String(Ij)==="[object z]",Ire=Pre,Rre=Ps,m1=Km,Mre=vd,Are=Mre("toStringTag"),$re=Object,Ore=m1(function(){return arguments}())==="Arguments",Dre=function(t,n){try{return t[n]}catch{}},Rj=Ire?m1:function(t){var n,e,r;return t===void 0?"Undefined":t===null?"Null":typeof(e=Dre(n=$re(t),Are))=="string"?e:Ore?m1(n):(r=m1(n))==="Object"&&Rre(n.callee)?"Arguments":r},Lre=no,jre=ks,Mj=Ps,Nre=Rj,zre=GC,Fre=dj,Aj=function(){},Ure=[],$j=zre("Reflect","construct"),OR=/^\s*(?:class|function)\b/,Bre=Lre(OR.exec),Hre=!OR.test(Aj),yS=function(n){if(!Mj(n))return!1;try{return $j(Aj,Ure,n),!0}catch{return!1}},Oj=function(n){if(!Mj(n))return!1;switch(Nre(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Hre||!!Bre(OR,Fre(n))}catch{return!0}};Oj.sham=!0;var Vre=!$j||jre(function(){var t;return yS(yS.call)||!yS(Object)||!yS(function(){t=!0})||t})?Oj:yS,E6=_j,Kre=Vre,Yre=ap,Wre=vd,Gre=Wre("species"),_6=Array,Xre=function(t){var n;return E6(t)&&(n=t.constructor,Kre(n)&&(n===_6||E6(n.prototype))?n=void 0:Yre(n)&&(n=n[Gre],n===null&&(n=void 0))),n===void 0?_6:n},qre=Xre,Dj=function(t,n){return new(qre(t))(n===0?0:n)},Qre=Gm,Zre=Pj,Jre=b0,eie=w0,tie=cp,nie=Dj;Qre({target:"Array",proto:!0},{flat:function(){var n=arguments.length?arguments[0]:void 0,e=Jre(this),r=eie(e),o=nie(e,0);return o.length=Zre(o,e,e,r,0,n===void 0?1:tie(n)),o}});var rie=$R;rie("flat");var iie=C0;iie("Array","flat");var oie=Gm,sie=Pj,aie=CR,lie=b0,cie=w0,uie=Dj;oie({target:"Array",proto:!0},{flatMap:function(n){var e=lie(this),r=cie(e),o;return aie(n),o=uie(e,0),o.length=sie(o,e,e,r,0,1,n,arguments.length>1?arguments[1]:void 0),o}});var die=$R;die("flatMap");var fie=C0;fie("Array","flatMap");var hie=Rj,pie=String,E0=function(t){if(hie(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return pie(t)},gie=Gm,mie=no,vie=Ym,yie=cp,Sie=E0,bie=ks,wie=mie("".charAt),xie=bie(function(){return"𠮷".at(-2)!=="\uD842"});gie({target:"String",proto:!0,forced:xie},{at:function(n){var e=Sie(vie(this)),r=e.length,o=yie(n),a=o>=0?o:r+o;return a<0||a>=r?void 0:wie(e,a)}});var Cie=C0;Cie("String","at");var Eie=lp,Lj=function(){var t=Eie(this),n="";return t.hasIndices&&(n+="d"),t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.dotAll&&(n+="s"),t.unicode&&(n+="u"),t.unicodeSets&&(n+="v"),t.sticky&&(n+="y"),n},DR=ks,_ie=sa,LR=_ie.RegExp,jR=DR(function(){var t=LR("a","y");return t.lastIndex=2,t.exec("abcd")!==null}),Tie=jR||DR(function(){return!LR("a","y").sticky}),kie=jR||DR(function(){var t=LR("^r","gy");return t.lastIndex=2,t.exec("str")!==null}),Pie={BROKEN_CARET:kie,MISSED_STICKY:Tie,UNSUPPORTED_Y:jR},Iie=ks,Rie=sa,Mie=Rie.RegExp,Aie=Iie(function(){var t=Mie(".","s");return!(t.dotAll&&t.test(`
`)&&t.flags==="s")}),$ie=ks,Oie=sa,Die=Oie.RegExp,Lie=$ie(function(){var t=Die("(?<a>b)","g");return t.exec("b").groups.a!=="b"||"b".replace(t,"$<a>c")!=="bc"}),vm=Nf,XC=no,jie=E0,Nie=Lj,zie=Pie,Fie=kR,Uie=Ej,Bie=pj.get,Hie=Aie,Vie=Lie,Kie=Fie("native-string-replace",String.prototype.replace),xC=RegExp.prototype.exec,cI=xC,Yie=XC("".charAt),Wie=XC("".indexOf),Gie=XC("".replace),$2=XC("".slice),uI=function(){var t=/a/,n=/b*/g;return vm(xC,t,"a"),vm(xC,n,"a"),t.lastIndex!==0||n.lastIndex!==0}(),jj=zie.BROKEN_CARET,dI=/()??/.exec("")[1]!==void 0,Xie=uI||dI||jj||Hie||Vie;Xie&&(cI=function(n){var e=this,r=Bie(e),o=jie(n),a=r.raw,l,u,d,h,g,v,S;if(a)return a.lastIndex=e.lastIndex,l=vm(cI,a,o),e.lastIndex=a.lastIndex,l;var w=r.groups,k=jj&&e.sticky,C=vm(Nie,e),E=e.source,R=0,L=o;if(k&&(C=Gie(C,"y",""),Wie(C,"g")===-1&&(C+="g"),L=$2(o,e.lastIndex),e.lastIndex>0&&(!e.multiline||e.multiline&&Yie(o,e.lastIndex-1)!==`
`)&&(E="(?: "+E+")",L=" "+L,R++),u=new RegExp("^(?:"+E+")",C)),dI&&(u=new RegExp("^"+E+"$(?!\\s)",C)),uI&&(d=e.lastIndex),h=vm(xC,k?u:e,L),k?h?(h.input=$2(h.input,R),h[0]=$2(h[0],R),h.index=e.lastIndex,e.lastIndex+=h[0].length):e.lastIndex=0:uI&&h&&(e.lastIndex=e.global?h.index+h[0].length:d),dI&&h&&h.length>1&&vm(Kie,h[0],u,function(){for(g=1;g<arguments.length-2;g++)arguments[g]===void 0&&(h[g]=void 0)}),h&&w)for(h.groups=v=Uie(null),g=0;g<w.length;g++)S=w[g],v[S[0]]=h[S[1]];return h});var NR=cI,qie=Gm,T6=NR;qie({target:"RegExp",proto:!0,forced:/./.exec!==T6},{exec:T6});var Qie=KC,Nj=Function.prototype,k6=Nj.apply,P6=Nj.call,Zie=typeof Reflect=="object"&&Reflect.apply||(Qie?P6.bind(k6):function(){return P6.apply(k6,arguments)}),I6=Tj,R6=mj,Jie=NR,M6=ks,zj=vd,eoe=PR,toe=zj("species"),O2=RegExp.prototype,noe=function(t,n,e,r){var o=zj(t),a=!M6(function(){var h={};return h[o]=function(){return 7},""[t](h)!==7}),l=a&&!M6(function(){var h=!1,g=/a/;return t==="split"&&(g={},g.constructor={},g.constructor[toe]=function(){return g},g.flags="",g[o]=/./[o]),g.exec=function(){return h=!0,null},g[o](""),!h});if(!a||!l||e){var u=I6(/./[o]),d=n(o,""[t],function(h,g,v,S,w){var k=I6(h),C=g.exec;return C===Jie||C===O2.exec?a&&!w?{done:!0,value:u(g,v,S)}:{done:!0,value:k(v,g,S)}:{done:!1}});R6(String.prototype,t,d[0]),R6(O2,o,d[1])}r&&eoe(O2[o],"sham",!0)},zR=no,roe=cp,ioe=E0,ooe=Ym,soe=zR("".charAt),A6=zR("".charCodeAt),aoe=zR("".slice),$6=function(t){return function(n,e){var r=ioe(ooe(n)),o=roe(e),a=r.length,l,u;return o<0||o>=a?t?"":void 0:(l=A6(r,o),l<55296||l>56319||o+1===a||(u=A6(r,o+1))<56320||u>57343?t?soe(r,o):l:t?aoe(r,o,o+2):(l-55296<<10)+(u-56320)+65536)}},loe={codeAt:$6(!1),charAt:$6(!0)},coe=loe.charAt,uoe=function(t,n,e){return n+(e?coe(t,n).length:1)},FR=no,doe=b0,foe=Math.floor,D2=FR("".charAt),hoe=FR("".replace),L2=FR("".slice),poe=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,goe=/\$([$&'`]|\d{1,2})/g,Fj=function(t,n,e,r,o,a){var l=e+t.length,u=r.length,d=goe;return o!==void 0&&(o=doe(o),d=poe),hoe(a,d,function(h,g){var v;switch(D2(g,0)){case"$":return"$";case"&":return t;case"`":return L2(n,0,e);case"'":return L2(n,l);case"<":v=o[L2(g,1,-1)];break;default:var S=+g;if(S===0)return h;if(S>u){var w=foe(S/10);return w===0?h:w<=u?r[w-1]===void 0?D2(g,1):r[w-1]+D2(g,1):h}v=r[S-1]}return v===void 0?"":v})},O6=Nf,moe=lp,voe=Ps,yoe=Km,Soe=NR,boe=TypeError,woe=function(t,n){var e=t.exec;if(voe(e)){var r=O6(e,t,n);return r!==null&&moe(r),r}if(yoe(t)==="RegExp")return O6(Soe,t,n);throw new boe("RegExp#exec called on incompatible receiver")},xoe=Zie,D6=Nf,qC=no,Coe=noe,Eoe=ks,_oe=lp,Toe=Ps,koe=YC,Poe=cp,Ioe=yj,om=E0,Roe=Ym,Moe=uoe,Aoe=ER,$oe=Fj,Ooe=woe,Doe=vd,fI=Doe("replace"),Loe=Math.max,joe=Math.min,Noe=qC([].concat),j2=qC([].push),L6=qC("".indexOf),j6=qC("".slice),zoe=function(t){return t===void 0?t:String(t)},Foe=function(){return"a".replace(/./,"$0")==="$0"}(),N6=function(){return/./[fI]?/./[fI]("a","$0")==="":!1}(),Uoe=!Eoe(function(){var t=/./;return t.exec=function(){var n=[];return n.groups={a:"7"},n},"".replace(t,"$<a>")!=="7"});Coe("replace",function(t,n,e){var r=N6?"$":"$0";return[function(a,l){var u=Roe(this),d=koe(a)?void 0:Aoe(a,fI);return d?D6(d,a,u,l):D6(n,om(u),a,l)},function(o,a){var l=_oe(this),u=om(o);if(typeof a=="string"&&L6(a,r)===-1&&L6(a,"$<")===-1){var d=e(n,l,u,a);if(d.done)return d.value}var h=Toe(a);h||(a=om(a));var g=l.global,v;g&&(v=l.unicode,l.lastIndex=0);for(var S=[],w;w=Ooe(l,u),!(w===null||(j2(S,w),!g));){var k=om(w[0]);k===""&&(l.lastIndex=Moe(u,Ioe(l.lastIndex),v))}for(var C="",E=0,R=0;R<S.length;R++){w=S[R];for(var L=om(w[0]),A=Loe(joe(Poe(w.index),u.length),0),O=[],D,z=1;z<w.length;z++)j2(O,zoe(w[z]));var U=w.groups;if(h){var Y=Noe([L],O,A,u);U!==void 0&&j2(Y,U),D=om(xoe(a,void 0,Y))}else D=$oe(L,u,A,O,U,a);A>=E&&(C+=j6(u,E,A)+D,E=A+L.length)}return C+j6(u,E)}]},!Uoe||!Foe||N6);var Boe=ap,Hoe=Km,Voe=vd,Koe=Voe("match"),Yoe=function(t){var n;return Boe(t)&&((n=t[Koe])!==void 0?!!n:Hoe(t)==="RegExp")},Woe=Nf,Goe=zf,Xoe=Z4,qoe=Lj,z6=RegExp.prototype,Qoe=function(t){var n=t.flags;return n===void 0&&!("flags"in z6)&&!Goe(t,"flags")&&Xoe(z6,t)?Woe(qoe,t):n},Zoe=Gm,Joe=Nf,UR=no,F6=Ym,ese=Ps,tse=YC,nse=Yoe,SS=E0,rse=ER,ise=Qoe,ose=Fj,sse=vd,ase=sse("replace"),lse=TypeError,Uj=UR("".indexOf);UR("".replace);var U6=UR("".slice),cse=Math.max,B6=function(t,n,e){return e>t.length?-1:n===""?e:Uj(t,n,e)};Zoe({target:"String",proto:!0},{replaceAll:function(n,e){var r=F6(this),o,a,l,u,d,h,g,v,S,w=0,k=0,C="";if(!tse(n)){if(o=nse(n),o&&(a=SS(F6(ise(n))),!~Uj(a,"g")))throw new lse("`.replaceAll` does not allow non-global regexes");if(l=rse(n,ase),l)return Joe(l,n,r,e)}for(u=SS(r),d=SS(n),h=ese(e),h||(e=SS(e)),g=d.length,v=cse(1,g),w=B6(u,d,0);w!==-1;)S=h?SS(e(d,w,u)):ose(d,u,w,[],void 0,e),C+=U6(u,k,w)+S,k=w+g,w=B6(u,d,w+v);return k<u.length&&(C+=U6(u,k)),C}});var use=C0;use("String","replaceAll");const dse=({children:t})=>{const n=Oe();return He("shouldDisplayHandles",()=>n.isInAny("select.idle","select.pointing_handle"),[n])?x.jsx("svg",{className:"tl-user-handles tl-overlays__item",children:t}):null},fse=({shapeId:t})=>{const n=Oe();return He("show hovered",()=>n.isIn("select.editing_shape")?n.getHoveredShapeId()!==n.getEditingShapeId():n.isInAny("select.idle"),[n])?x.jsx(g0,{className:"tl-user-indicator__hovered",id:t}):null},{PI:hse}=Math,Tm=hse+1e-4;function Bj(t,n={}){const{size:e=16,smoothing:r=.5}=n;if(t.length===0||e<=0)return{left:[],right:[]};const o=t[0],a=t[t.length-1],l=a.runningLength,u=Math.pow(e*r,2),d=[],h=[];let g=t[0].vector,v=t[0].point,S=v,w=v,k=S,C=!1,E;for(let R=0;R<t.length;R++){E=t[R];const{point:L,vector:A}=t[R],O=E.vector.dpr(g),D=(R<t.length-1?t[R+1]:t[R]).vector,z=R<t.length-1?D.dpr(E.vector):1,U=O<0&&!C,Y=z!==null&&z<.2;if(U||Y){if(z>-.62&&l-E.runningLength>E.radius){const X=g.clone().mul(E.radius);g.clone().cpr(D)<0?(w=N.Add(L,X),k=N.Sub(L,X)):(w=N.Sub(L,X),k=N.Add(L,X)),d.push(w),h.push(k)}else{const X=g.clone().mul(E.radius).per(),ie=N.Sub(E.input,X);for(let pe=1/13,ae=0;ae<1;ae+=pe)w=N.RotWith(ie,E.input,Tm*ae),d.push(w),k=N.RotWith(ie,E.input,Tm+Tm*-ae),h.push(k)}v=w,S=k,Y&&(C=!0);continue}if(C=!1,E===o||E===a){const X=N.Per(A).mul(E.radius);d.push(N.Sub(L,X)),h.push(N.Add(L,X));continue}const q=N.Lrp(D,A,z).per().mul(E.radius);w=N.Sub(L,q),(R<=1||N.Dist2(v,w)>u)&&(d.push(w),v=w),k=N.Add(L,q),(R<=1||N.Dist2(S,k)>u)&&(h.push(k),S=k),g=A}return{left:d,right:h}}function _0(t,n={}){const{size:e=16,start:r={},end:o={},last:a=!1}=n,{cap:l=!0}=r,{cap:u=!0}=o;if(t.length===0||e<=0)return[];const d=t[0],h=t[t.length-1],g=h.runningLength,v=r.taper===!1?0:r.taper===!0?Math.max(e,g):r.taper,S=o.taper===!1?0:o.taper===!0?Math.max(e,g):o.taper,{left:w,right:k}=Bj(t,n),C=d.point,E=t.length>1?t[t.length-1].point:N.AddXY(d.point,1,1);if(t.length===1&&(!(v||S)||a)){const O=N.Add(C,N.Sub(C,E).uni().per().mul(-d.radius)),D=[];for(let z=1/13,U=z;U<=1;U+=z)D.push(N.RotWith(O,C,Tm*2*U));return D}const R=[];if(!(v||S&&t.length===1))if(l)for(let O=1/8,D=O;D<=1;D+=O){const z=N.RotWith(k[0],C,Tm*D);R.push(z)}else{const O=N.Sub(w[0],k[0]),D=N.Mul(O,.5),z=N.Mul(O,.51);R.push(N.Sub(C,D),N.Sub(C,z),N.Add(C,z),N.Add(C,D))}const L=[],A=h.vector.clone().per().neg();if(S||v&&t.length===1)L.push(E);else if(u){const O=N.Add(E,N.Mul(A,h.radius));for(let D=1/29,z=D;z<1;z+=D)L.push(N.RotWith(O,E,Tm*3*z))}else L.push(N.Add(E,N.Mul(A,h.radius)),N.Add(E,N.Mul(A,h.radius*.99)),N.Sub(E,N.Mul(A,h.radius*.99)),N.Sub(E,N.Mul(A,h.radius)));return w.concat(L,k.reverse(),R)}const pse=.025,gse=.01;function Wl(t,n={}){var E;const{streamline:e=.5,size:r=16,simulatePressure:o=!1}=n;if(t.length===0)return[];const a=.15+(1-e)*.85;let l=t.map(N.From),u=0;if(!o){let R=l[0];for(;R&&!(R.z>=pse);)l.shift(),R=l[0]}if(!o){let R=l[l.length-1];for(;R&&!(R.z>=gse);)l.pop(),R=l[l.length-1]}if(l.length===0)return[{point:N.From(t[0]),input:N.From(t[0]),pressure:o?.5:.15,vector:new N(1,1),distance:0,runningLength:0,radius:1}];let d=l[1];for(;d&&!(N.Dist(d,l[0])>r/3);)l[0].z=Math.max(l[0].z,d.z),l.splice(1,1),d=l[1];const h=l.pop();for(d=l[l.length-1];d&&!(N.Dist(d,h)>r/3);)l.pop(),d=l[l.length-1],u++;l.push(h);const g=n.last||!n.simulatePressure||l.length>1&&N.Dist(l[l.length-1],l[l.length-2])<r||u>0;if(l.length===2&&n.simulatePressure){const R=l[1];l=l.slice(0,-1);for(let L=1;L<5;L++){const A=N.Lrp(l[0],R,L/4);A.z=(l[0].z+(R.z-l[0].z))*L/4,l.push(A)}}const v=[{point:l[0],input:l[0],pressure:o?.5:l[0].z,vector:new N(1,1),distance:0,runningLength:0,radius:1}];let S=0,w=v[0],k,C;g&&e>0&&l.push(l[l.length-1].clone());for(let R=1,L=l.length;R<L;R++)k=!a||n.last&&R===L-1?l[R].clone():l[R].clone().lrp(w.point,1-a),!w.point.equals(k)&&(C=N.Dist(k,w.point),S+=C,!(R<4&&S<r)&&(w={input:l[R],point:k,pressure:o?.5:l[R].z,vector:N.Sub(w.point,k).uni(),distance:C,runningLength:S,radius:1},v.push(w)));if((E=v[1])!=null&&E.vector&&(v[0].vector=v[1].vector.clone()),S<1){const R=Math.max(.5,...v.map(L=>L.pressure));v.forEach(L=>L.pressure=R)}return v}const{min:mf}=Math,N2=.275;function Xm(t,n){const{size:e=16,thinning:r=.5,simulatePressure:o=!0,easing:a=E=>E,start:l={},end:u={}}=n,{easing:d=Jo.easeOutQuad}=l,{easing:h=Jo.easeOutCubic}=u,g=t[t.length-1].runningLength;let v,S=t[0].pressure,w;if(!o&&g<e){const E=t.reduce((R,L)=>Math.max(R,L.pressure),.5);return t.forEach(R=>{R.pressure=E,R.radius=e*a(.5-r*(.5-R.pressure))}),t}else{let E;for(let R=0,L=t.length;R<L&&(w=t[R],!(w.runningLength>e*5));R++){const A=mf(1,w.distance/e);if(o){const O=mf(1,1-A);E=mf(1,S+(O-S)*(A*N2))}else E=mf(1,S+(w.pressure-S)*.5);S=S+(E-S)*.5}for(let R=0;R<t.length;R++){if(w=t[R],r){let{pressure:L}=w;const A=mf(1,w.distance/e);if(o){const O=mf(1,1-A);L=mf(1,S+(O-S)*(A*N2))}else L=mf(1,S+(L-S)*(A*N2));w.radius=e*a(.5-r*(.5-L)),S=L}else w.radius=e/2;v===void 0&&(v=w.radius)}}const k=l.taper===!1?0:l.taper===!0?Math.max(e,g):l.taper,C=u.taper===!1?0:u.taper===!0?Math.max(e,g):u.taper;if(k||C)for(let E=0;E<t.length;E++){w=t[E];const{runningLength:R}=w,L=R<k?d(R/k):1,A=g-R<C?h((g-R)/C):1;w.radius=Math.max(.01,w.radius*Math.min(L,A))}return t}function mse(t,n={}){return _0(Xm(Wl(t,n),n),n)}const H6=({scribble:t,zoom:n,color:e,opacity:r,className:o})=>{if(!t.points.length)return null;const a=mse(t.points,{size:t.size/n,start:{taper:t.taper,easing:Jo.linear},last:t.state==="stopping",simulatePressure:!1,streamline:.32});let l;if(a.length<4){const u=t.size/n/2,{x:d,y:h}=t.points[t.points.length-1];l=`M ${d-u},${h} a ${u},${u} 0 1,0 ${u*2},0 a ${u},${u} 0 1,0 ${-u*2},0`}else l=m0(a);return x.jsx("svg",{className:o&&Wt("tl-overlays__item",o),children:x.jsx("path",{className:"tl-scribble",d:l,fill:e??`var(--color-${t.color})`,opacity:r??t.opacity})})},vse=({bounds:t,rotation:n})=>{const e=Oe();return He("should display",()=>e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","text.resizing"),[e])?x.jsx(XL,{bounds:t,rotation:n}):null};function cl(){const t=Oe();return He("isReadonlyMode",()=>t.getInstanceState().isReadonly,[t])}function yse({size:t,width:n,height:e,hideAlternateHandles:r}){const o=oe(t/3),a=o/2;return x.jsxs("svg",{className:"tl-overlays__item",children:[x.jsx("polyline",{className:"tl-corner-crop-handle",points:`
						${oe(0-a)},${oe(t)} 
						${oe(0-a)},${oe(0-a)} 
						${oe(t)},${oe(0-a)}`,strokeWidth:o,"data-testid":"selection.crop.top_left","aria-label":"top_left handle"}),x.jsx("line",{className:Wt("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:oe(n/2-t),y1:oe(0-a),x2:oe(n/2+t),y2:oe(0-a),strokeWidth:o,"data-testid":"selection.crop.top","aria-label":"top handle"}),x.jsx("polyline",{className:Wt("tl-corner-crop-handle",{"tl-hidden":r}),points:`
						${oe(n-t)},${oe(0-a)} 
						${oe(n+a)},${oe(0-a)} 
						${oe(n+a)},${oe(t)}`,strokeWidth:o,"data-testid":"selection.crop.top_right","aria-label":"top_right handle"}),x.jsx("line",{className:Wt("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:oe(n+a),y1:oe(e/2-t),x2:oe(n+a),y2:oe(e/2+t),strokeWidth:o,"data-testid":"selection.crop.right","aria-label":"right handle"}),x.jsx("polyline",{className:"tl-corner-crop-handle",points:`
						${oe(n+a)},${oe(e-t)} 
						${oe(n+a)},${oe(e+a)}
						${oe(n-t)},${oe(e+a)}`,strokeWidth:o,"data-testid":"selection.crop.bottom_right","aria-label":"bottom_right handle"}),x.jsx("line",{className:Wt("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:oe(n/2-t),y1:oe(e+a),x2:oe(n/2+t),y2:oe(e+a),strokeWidth:o,"data-testid":"selection.crop.bottom","aria-label":"bottom handle"}),x.jsx("polyline",{className:Wt("tl-corner-crop-handle",{"tl-hidden":r}),points:`
						${oe(0+t)},${oe(e+a)} 
						${oe(0-a)},${oe(e+a)}
						${oe(0-a)},${oe(e-t)}`,strokeWidth:o,"data-testid":"selection.crop.bottom_left","aria-label":"bottom_left handle"}),x.jsx("line",{className:Wt("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:oe(0-a),y1:oe(e/2-t),x2:oe(0-a),y2:oe(e/2+t),strokeWidth:o,"data-testid":"selection.crop.left","aria-label":"left handle"})]})}const Sse=sr(function({bounds:n,rotation:e}){const r=Oe(),o=I.useRef(null),a=cl(),l=Uc("top"),u=Uc("right"),d=Uc("bottom"),h=Uc("left"),g=Uc("top_left"),v=Uc("top_right"),S=Uc("bottom_right"),w=Uc("bottom_left"),k=!r.getIsMenuOpen()&&r.getInstanceState().cursor.type==="default",C=r.getInstanceState().isCoarsePointer,E=r.getOnlySelectedShape(),R=E&&r.isShapeOrAncestorLocked(E),L=E?r.getShapeUtil(E).expandSelectionOutlinePx(E):0;if(Um(o,n==null?void 0:n.x,n==null?void 0:n.y,1,r.getSelectionRotation(),{x:-L,y:-L}),!n)return null;n=n.clone().expandBy(L).zeroFix();const A=r.getZoomLevel(),O=r.getInstanceState().isChangingStyle,D=n.width,z=n.height,U=8/A,Y=D<U*2,q=z<U*2,X=D<U*4,ie=z<U*4,pe=D<U*5,ae=z<U*5,te=C?1.75:1,he=6/A*te,ce=(X?he/2:he)*(te*.75),ge=(ie?he/2:he)*(te*.75),me=(E?!r.getShapeUtil(E).hideSelectionBoundsFg(E):!0)&&!O;let we=me&&r.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape","select.crop.idle","select.crop.pointing_crop","select.pointing_resize_handle","select.pointing_crop_handle")||me&&r.isIn("select.resizing")&&E&&r.isShapeOfType(E,"text");E&&we&&r.environment.isFirefox&&r.isShapeOfType(E,"embed")&&(we=!1);const V=r.isInAny("select.pointing_crop_handle","select.crop.idle","select.crop.pointing_crop")&&!O&&!a,Z=r.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.crop.idle")&&!O&&!a,Ce=!C&&!(Y||q)&&(Z||V)&&(E?!r.getShapeUtil(E).hideRotateHandle(E):!0)&&!R,Ae=C&&(!X||!ie)&&(Z||V)&&(E?!r.getShapeUtil(E).hideRotateHandle(E):!0)&&!R,De=Z&&(E?r.getShapeUtil(E).canResize(E)&&!r.getShapeUtil(E).hideResizeHandles(E):!0)&&!V&&!R,Ie=Y||q,Ne=Y&&q,Ve=pe||ae,Ke=De||V,Xe=!Ce,at=!Z||!Ae,_t=!Z||!Ke,We=!Z||!Ke||Ie,Ht=!Z||!Ke||Ie,dn=!Z||!Ke||Ne&&!V;let Xt=C;Xt&&E&&E.type==="text"&&(Xt=!1);let ln=!0;V?ln=Ve:De&&(ln=Ie||Ne||Xt);const jn=Math.min(24/A,z-ge*3),qr=Z&&C&&E&&r.isShapeOfType(E,"text")&&jn*A>=4;return x.jsx("svg",{className:"tl-overlays__item tl-selection__fg tl-svg-context","data-testid":"selection-foreground",children:x.jsxs("g",{ref:o,children:[we&&x.jsx("rect",{className:Wt("tl-selection__fg__outline"),width:oe(D),height:oe(z)}),x.jsx(Fx,{"data-testid":"selection.rotate.top-left",cx:0,cy:0,targetSize:he,corner:"top_left_rotate",cursor:k?ba("nwse-rotate",e):void 0,isHidden:Xe}),x.jsx(Fx,{"data-testid":"selection.rotate.top-right",cx:D+he*3,cy:0,targetSize:he,corner:"top_right_rotate",cursor:k?ba("nesw-rotate",e):void 0,isHidden:Xe}),x.jsx(Fx,{"data-testid":"selection.rotate.bottom-left",cx:0,cy:z+he*3,targetSize:he,corner:"bottom_left_rotate",cursor:k?ba("swne-rotate",e):void 0,isHidden:Xe}),x.jsx(Fx,{"data-testid":"selection.rotate.bottom-right",cx:D+he*3,cy:z+he*3,targetSize:he,corner:"bottom_right_rotate",cursor:k?ba("senw-rotate",e):void 0,isHidden:Xe}),x.jsx(wse,{"data-testid":"selection.rotate.mobile",cx:X?-he*1.5:D/2,cy:X?z/2:-he*1.5,size:U,isHidden:at}),x.jsx("rect",{className:Wt("tl-transparent",{"tl-hidden":ln}),"data-testid":"selection.resize.top","aria-label":"top target",pointerEvents:"all",x:0,y:oe(0-(ie?ge*2:ge)),width:oe(D),height:oe(Math.max(1,ge*2)),style:k?{cursor:ba("ns-resize",e)}:void 0,...l}),x.jsx("rect",{className:Wt("tl-transparent",{"tl-hidden":ln}),"data-testid":"selection.resize.right","aria-label":"right target",pointerEvents:"all",x:oe(D-(X?0:ce)),y:0,height:oe(z),width:oe(Math.max(1,ce*2)),style:k?{cursor:ba("ew-resize",e)}:void 0,...u}),x.jsx("rect",{className:Wt("tl-transparent",{"tl-hidden":ln}),"data-testid":"selection.resize.bottom","aria-label":"bottom target",pointerEvents:"all",x:0,y:oe(z-(ie?0:ge)),width:oe(D),height:oe(Math.max(1,ge*2)),style:k?{cursor:ba("ns-resize",e)}:void 0,...d}),x.jsx("rect",{className:Wt("tl-transparent",{"tl-hidden":ln}),"data-testid":"selection.resize.left","aria-label":"left target",pointerEvents:"all",x:oe(0-(X?ce*2:ce)),y:0,height:oe(z),width:oe(Math.max(1,ce*2)),style:k?{cursor:ba("ew-resize",e)}:void 0,...h}),x.jsx("rect",{className:Wt("tl-transparent",{"tl-hidden":_t}),"data-testid":"selection.target.top-left","aria-label":"top-left target",pointerEvents:"all",x:oe(0-(X?ce*2:ce*1.5)),y:oe(0-(ie?ge*2:ge*1.5)),width:oe(ce*3),height:oe(ge*3),style:k?{cursor:ba("nwse-resize",e)}:void 0,...g}),x.jsx("rect",{className:Wt("tl-transparent",{"tl-hidden":We}),"data-testid":"selection.target.top-right","aria-label":"top-right target",pointerEvents:"all",x:oe(D-(X?0:ce*1.5)),y:oe(0-(ie?ge*2:ge*1.5)),width:oe(ce*3),height:oe(ge*3),style:k?{cursor:ba("nesw-resize",e)}:void 0,...v}),x.jsx("rect",{className:Wt("tl-transparent",{"tl-hidden":dn}),"data-testid":"selection.target.bottom-right","aria-label":"bottom-right target",pointerEvents:"all",x:oe(D-(X?ce:ce*1.5)),y:oe(z-(ie?ge:ge*1.5)),width:oe(ce*3),height:oe(ge*3),style:k?{cursor:ba("nwse-resize",e)}:void 0,...S}),x.jsx("rect",{className:Wt("tl-transparent",{"tl-hidden":Ht}),"data-testid":"selection.target.bottom-left","aria-label":"bottom-left target",pointerEvents:"all",x:oe(0-(X?ce*3:ce*1.5)),y:oe(z-(ie?0:ge*1.5)),width:oe(ce*3),height:oe(ge*3),style:k?{cursor:ba("nesw-resize",e)}:void 0,...w}),De&&x.jsxs(x.Fragment,{children:[x.jsx("rect",{"data-testid":"selection.resize.top-left",className:Wt("tl-corner-handle",{"tl-hidden":_t}),"aria-label":"top_left handle",x:oe(0-U/2),y:oe(0-U/2),width:oe(U),height:oe(U)}),x.jsx("rect",{"data-testid":"selection.resize.top-right",className:Wt("tl-corner-handle",{"tl-hidden":We}),"aria-label":"top_right handle",x:oe(D-U/2),y:oe(0-U/2),width:oe(U),height:oe(U)}),x.jsx("rect",{"data-testid":"selection.resize.bottom-right",className:Wt("tl-corner-handle",{"tl-hidden":dn}),"aria-label":"bottom_right handle",x:oe(D-U/2),y:oe(z-U/2),width:oe(U),height:oe(U)}),x.jsx("rect",{"data-testid":"selection.resize.bottom-left",className:Wt("tl-corner-handle",{"tl-hidden":Ht}),"aria-label":"bottom_left handle",x:oe(0-U/2),y:oe(z-U/2),width:oe(U),height:oe(U)})]}),qr&&x.jsxs(x.Fragment,{children:[x.jsx("rect",{"data-testid":"selection.text-resize.left.handle",className:"tl-text-handle","aria-label":"bottom_left handle",x:oe(0-U/4),y:oe(z/2-jn/2),rx:U/4,width:oe(U/2),height:oe(jn)}),x.jsx("rect",{"data-testid":"selection.text-resize.right.handle",className:"tl-text-handle","aria-label":"bottom_left handle",rx:U/4,x:oe(D-U/4),y:oe(z/2-jn/2),width:oe(U/2),height:oe(jn)})]}),V&&x.jsx(yse,{size:U,width:D,height:z,hideAlternateHandles:Ve})]})})}),Fx=function({cx:n,cy:e,targetSize:r,corner:o,cursor:a,isHidden:l,"data-testid":u}){const d=Uc(o);return x.jsx("rect",{className:Wt("tl-transparent","tl-rotate-corner",{"tl-hidden":l}),"data-testid":u,"aria-label":`${o} target`,pointerEvents:"all",x:oe(n-r*3),y:oe(e-r*3),width:oe(Math.max(1,r*3)),height:oe(Math.max(1,r*3)),cursor:a,...d})},bse=Math.sqrt(Math.PI),wse=function({cx:n,cy:e,size:r,isHidden:o,"data-testid":a}){const l=Uc("mobile_rotate"),u=Oe(),d=He("zoom level",()=>u.getZoomLevel(),[u]),h=Math.max(14*(1/d),20/Math.max(1,d));return x.jsxs("g",{children:[x.jsx("circle",{"data-testid":a,pointerEvents:"all",className:Wt("tl-transparent","tl-mobile-rotate__bg",{"tl-hidden":o}),cx:n,cy:e,r:h,...l}),x.jsx("circle",{className:Wt("tl-mobile-rotate__fg",{"tl-hidden":o}),cx:n,cy:e,r:r/bse})]})},Po={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px"},Zo={s:2,m:3.5,l:5,xl:10},Cf={s:18,m:24,l:36,xl:44},$m={s:18,m:22,l:26,xl:32},yf={s:18,m:20,l:24,xl:28},sd={draw:"var(--tl-font-draw)",sans:"var(--tl-font-sans)",serif:"var(--tl-font-serif)",mono:"var(--tl-font-mono)"};var Hj={exports:{}};(function(t){(function(n,e){t.exports?t.exports=e():n.downscale=e()})(To,function(){function n(Y,R,L,A,O,D,z,U){var Y=document.createElement("canvas");Y.width=L,Y.height=A;var q=Y.getContext("2d");return q.mozImageSmoothingEnabled=!0,q.imageSmoothingQuality="high",q.webkitImageSmoothingEnabled=!0,q.msImageSmoothingEnabled=!0,q.imageSmoothingEnabled=!0,q.drawImage(R,O,D,z,U,0,0,L,A),Y}function e(E){return E+.49<<0}function r(E,R,L,A,O,D,z){for(var U=new ImageData(R,L),Y=new Int32Array(E.data.buffer),q=E.width,X=new Int32Array(U.data.buffer),ie=U.width,pe=R/D,ae=L/z,te=e(1/pe),he=e(1/ae),ce=te*he,ge=0;ge<U.height;ge++)for(var me=0;me<ie;me++){for(var we=A+e(me/pe)+(O+e(ge/ae))*q,V=0,Z=0,Ce=0,Ae=0,De=0;De<he;De++)for(var Ie=0;Ie<te;Ie++){var Ne=Y[we+Ie+De*q];V+=Ne<<24>>>24,Z+=Ne<<16>>>24,Ce+=Ne<<8>>>24,Ae+=Ne>>>24}V=e(V/ce),Z=e(Z/ce),Ce=e(Ce/ce),Ae=e(Ae/ce),X[me+ge*ie]=Ae<<24|Ce<<16|Z<<8|V}return U}function o(E,R,L,A){var O=new Date,D={},z=O,U="01";return{mark:E?function(Y){Y=U+". "+(Y||"..."),D[Y]={"time (ms)":new Date-z},z=new Date,U=("0"+((U>>0)+1)).substr(-2)}:new Function,finish:E?function(){D[U+" TOTAL"]={"time (ms)":new Date-O},console.log("IMAGE SOURCE:",R),console.log("DOWNSCALE TO:",L+"x"+A),console.table(D)}:new Function}}function a(){var E=[],R=[],L=[],A=new Object;return{createSetter:function(O){if(!this.get(O)){var D=E.push(O)-1;return R.push(A),L.push([]),function(z){R[D]=z,L[D]=L[D].reduce(function(U,Y){Y(z)},[])}}},get:function(O,D){var z=E.indexOf(O);if(~z){if(R[z]===A){L[z].push(D);return}D(R[z])}},has:function(O){return!!~E.indexOf(O)}}}function l(E,R,L,A){E.width=L,E.height=A;var O=E.getContext("2d");return O.drawImage(R,0,0),O.getImageData(0,0,L,A)}function u(E,R){E.width=R.width,E.height=R.height;var L=E.getContext("2d");return L.putImageData(R,0,0),E}function d(E,R,X,ie,O,D){var z=O,U=D,Y=O/D;E===0&&(E=R*Y>>0),R===0&&(R=E/Y>>0);var q=E/R;q>Y?D=O/q>>0:O=D*q>>0;var X=X||(z-O)/2>>0,ie=ie||(U-D)/2>>0;return{destWidth:E,destHeight:R,sourceX:X,sourceY:ie,sourceWidth:O,sourceHeight:D}}function h(E,R,L){if(R.returnCanvas){L(E);return}if(R.returnBlob){E.toBlob(L,"image/"+(R.imageType||"jpeg"),R.quality||.85);return}var A=E.toDataURL("image/"+(R.imageType||"jpeg"),R.quality||.85);L(A)}function g(E,R){var L=new XMLHttpRequest;L.open("GET",E),L.responseType="arraybuffer",L.addEventListener("load",function(){R(this.response)}),L.send()}function v(E,R){E.complete?R():E.addEventListener("load",R)}function S(E,R){E.readyState>1?R():E.addEventListener("loadeddata",R)}function w(E){if(E instanceof File)return"File";if(E instanceof HTMLImageElement)return"HTMLImageElement";if(E instanceof HTMLVideoElement)return"HTMLVideoElement";if(typeof E=="string")return"URL"}function k(E){if(E.length<3)return new TypeError("3 arguments required, but only "+E.length+" present.");if(!w(E[0]))return new TypeError("First argument should be HTMLImageElement, HTMLVideoElement, File of String");if(typeof E[1]!="number")return new TypeError("Second argument should be a number");if(typeof E[2]!="number")return new TypeError("Third argument should be a number")}function C(E,R,L,A){var O=o(A&&A.debug||!1,E,R,L),D=k(arguments);if(D instanceof TypeError)return Promise.reject(D);A=A||{};var z,U=new Promise(function(ae,te){z=ae});C.canvas=C.canvas||document.createElement("canvas"),C.cache=C.cache||a();var Y=C.canvas,q=C.cache;if(q.has(E))return O.mark(),q.get(E,function(ae){O.mark("PENDING CACHE");var te=ae[0],he=ae[1],ce=d(R,L,A.sourceX,A.sourceY,he.width,he.height);if(ce.sourceWidth/ce.destWidth>=2&&ce.sourceHeight/ce.destHeight>=2){O.mark();var ge=r(he,ce.destWidth,ce.destHeight,ce.sourceX,ce.sourceY,ce.sourceWidth,ce.sourceHeight);O.mark("DOWNSCALE"),Y=u(Y,ge)}else Y=n(Y,te,ce.destWidth,ce.destHeight,ce.sourceX,ce.sourceY,ce.sourceWidth,ce.sourceHeight),O.mark("RESIZE WITH CANVAS");h(Y,A,function(me){O.mark("PRODUCE RESULT"),z(me),O.finish()})}),U;var X=function(ae,te,he){var ce=d(R,L,A.sourceX,A.sourceY,te,he);if(ce.sourceWidth/ce.destWidth>=2&&ce.sourceHeight/ce.destHeight>=2){O.mark();var ge=l(Y,ae,te,he);O.mark("GET IMAGE DATA");var me=r(ge,ce.destWidth,ce.destHeight,ce.sourceX,ce.sourceY,ce.sourceWidth,ce.sourceHeight);O.mark("DOWNSCALE"),Y=u(Y,me),w(ae)!=="HTMLVideoElement"&&q.createSetter(ae)([ae,ge])}else Y=n(Y,ae,ce.destWidth,ce.destHeight,ce.sourceX,ce.sourceY,ce.sourceWidth,ce.sourceHeight),O.mark("RESIZE WITH CANVAS");h(Y,A,function(we){O.mark("PRODUCE RESULT"),z(we),O.finish()})},ie=window.URL||window.webkitURL;switch(w(E)){case"File":var pe=document.createElement("img");O.mark(),pe.src=ie.createObjectURL(E),O.mark("READ FILE"),v(pe,function(){O.mark("LOAD IMAGE"),X(pe,pe.naturalWidth,pe.naturalHeight)});break;case"HTMLImageElement":O.mark(),v(E,function(){O.mark("LOAD IMAGE"),X(E,E.naturalWidth,E.naturalHeight)});break;case"HTMLVideoElement":S(E,function(){X(E,E.videoWidth,E.videoHeight)});break;case"URL":O.mark(),setTimeout(function(){g(E,function(ae){O.mark("LOAD ARRAY BUFFER");var te=new Uint8Array(ae),he=new Blob([te],{type:"image/jpeg"}),ce=document.createElement("img");ce.src=ie.createObjectURL(he),O.mark(),v(ce,function(){O.mark("LOAD IMAGE"),X(ce,ce.naturalWidth,ce.naturalHeight)})})});break}return U}return C})})(Hj);var xse=Hj.exports;const Cse=Of(xse);/*!
 * canvas-size
 * v1.2.6
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2023 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function Ese(t,n){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var r,o,a,l,u=[],d=!0,h=!1;try{if(a=(e=e.call(t)).next,n===0){if(Object(e)!==e)return;d=!1}else for(;!(d=(r=a.call(e)).done)&&(u.push(r.value),u.length!==n);d=!0);}catch(g){h=!0,o=g}finally{try{if(!d&&e.return!=null&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw o}}return u}}function V6(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),e.push.apply(e,r)}return e}function wa(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?V6(Object(e),!0).forEach(function(r){_se(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):V6(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}function _se(t,n,e){return n=Ose(n),n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function Tse(t,n){if(t==null)return{};var e={},r=Object.keys(t),o,a;for(a=0;a<r.length;a++)o=r[a],!(n.indexOf(o)>=0)&&(e[o]=t[o]);return e}function kse(t,n){if(t==null)return{};var e=Tse(t,n),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)r=a[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(e[r]=t[r])}return e}function K6(t,n){return Ise(t)||Ese(t,n)||Vj(t,n)||Ase()}function Ux(t){return Pse(t)||Rse(t)||Vj(t)||Mse()}function Pse(t){if(Array.isArray(t))return hI(t)}function Ise(t){if(Array.isArray(t))return t}function Rse(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vj(t,n){if(t){if(typeof t=="string")return hI(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return hI(t,n)}}function hI(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function Mse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ase(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $se(t,n){if(typeof t!="object"||t===null)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var r=e.call(t,n||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function Ose(t){var n=$se(t,"string");return typeof n=="symbol"?n:String(n)}function NS(t){var n=t.sizes.shift(),e=Math.max(Math.ceil(n[0]),1),r=Math.max(Math.ceil(n[1]),1),o=[e-1,r-1,1,1],a=Date.now(),l=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,u,d;l?(u=new OffscreenCanvas(1,1),d=new OffscreenCanvas(e,r)):(u=document.createElement("canvas"),u.width=1,u.height=1,d=document.createElement("canvas"),d.width=e,d.height=r);var h=u.getContext("2d"),g=d.getContext("2d");g&&(g.fillRect.apply(g,o),h.drawImage(d,e-1,r-1,1,1,0,0,1,1));var v=h&&h.getImageData(0,0,1,1).data[3]!==0,S=Date.now()-a;return[u,d].forEach(function(w){w.height=0,w.width=0}),l?(postMessage({width:e,height:r,benchmark:S,isTestPass:v}),!v&&t.sizes.length&&NS(t)):v?t.onSuccess(e,r,S):(t.onError(e,r,S),t.sizes.length&&NS(t)),v}var z2={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},Dse=["onError","onSuccess"],ym={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},bS={};function F2(t){var n=t.width===t.height,e=t.height===1,r=t.width===1,o=[];if(!t.width||!t.height)t.sizes.forEach(function(g){var v=n||e?g:1,S=n||r?g:1;o.push([v,S])});else for(var a=t.min||ym.min,l=t.step||ym.step,u=Math.max(t.width,t.height);u>=a;){var d=n||e?u:1,h=n||r?u:1;o.push([d,h]),u-=l}return o}function Bx(t){var n=window&&"HTMLCanvasElement"in window,e=window&&"OffscreenCanvas"in window,r=Date.now(),o=t.onError,a=t.onSuccess,l=kse(t,Dse),u=null;if(!n)return!1;if(t.useWorker&&e){var d=`
            var canvasTest = `.concat(NS.toString(),`;
            onmessage = function(e) {
                canvasTest(e.data);
            };
        `),h=new Blob([d],{type:"application/javascript"}),g=URL.createObjectURL(h);u=new Worker(g),URL.revokeObjectURL(g),u.onmessage=function(v){var S=v.data,w=S.width,k=S.height,C=S.benchmark,E=S.isTestPass;E?(bS[r].onSuccess(w,k,C),delete bS[r]):bS[r].onError(w,k,C)}}if(t.usePromise)return new Promise(function(v,S){var w=wa(wa({},t),{},{onError:function(R,L,A){var O;if(t.sizes.length===0)O=!0;else{var D=t.sizes.slice(-1),z=K6(D,1),U=K6(z[0],2),Y=U[0],q=U[1];O=R===Y&&L===q}o(R,L,A),O&&S({width:R,height:L,benchmark:A})},onSuccess:function(R,L,A){a(R,L,A),v({width:R,height:L,benchmark:A})}});if(u){var k=w.onError,C=w.onSuccess;bS[r]={onError:k,onSuccess:C},u.postMessage(l)}else NS(w)});if(u)bS[r]={onError:o,onSuccess:a},u.postMessage(l);else return NS(t)}var U2={maxArea:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=F2({width:n.max,height:n.max,min:n.min,step:n.step,sizes:Ux(z2.area)}),r=wa(wa(wa({},ym),n),{},{sizes:e});return Bx(r)},maxHeight:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=F2({width:1,height:n.max,min:n.min,step:n.step,sizes:Ux(z2.height)}),r=wa(wa(wa({},ym),n),{},{sizes:e});return Bx(r)},maxWidth:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=F2({width:n.max,height:1,min:n.min,step:n.step,sizes:Ux(z2.width)}),r=wa(wa(wa({},ym),n),{},{sizes:e});return Bx(r)},test:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=wa(wa({},ym),n);return e.sizes=Ux(e.sizes),e.width&&e.height&&(e.sizes=[[e.width,e.height]]),Bx(e)}};let B2=null;function Kj(){return B2||(B2=Lse()),B2}async function Lse(){const t=await U2.maxWidth({usePromise:!0}),n=await U2.maxHeight({usePromise:!0}),e=await U2.maxArea({usePromise:!0});return{maxWidth:t.width,maxHeight:n.height,maxArea:e.width*e.height}}function Y6(t,n){let e=0;for(;t[n+e];)e+=t[n+e]+1;return e+1}function jse(t){return new TextDecoder("ascii").decode(t.slice(0,3))==="GIF"}function Nse(t){const n=new Uint8Array(t);let e,r,o=0,a=0;if(!jse(t))return!1;for(e=n[10]&128,r=n[10]&7,o+=6,o+=7,o+=e?3*Math.pow(2,r+1):0;a<2&&o<n.length;)switch(n[o]){case 44:a+=1,e=n[o+9]&128,r=n[o+9]&7,o+=10,o+=e?3*Math.pow(2,r+1):0,o+=Y6(n,o+1)+1;break;case 33:o+=2,o+=Y6(n,o);break;case 59:o=n.length;break;default:o=n.length;break}return a>1}function zse(t,n){const e=t.w/n.w,r=t.h/n.h;return e<=1&&r<=1?t:e>r?{w:t.w/e,h:t.h/e}:{w:t.w/r,h:t.h/r}}async function Fse(t,n,e,r={}){let o=n*2,a=e*2;const{type:l="image/jpeg",quality:u=.92}=r,d=await Kj(),h=n/e;if(o>d.maxWidth&&(o=d.maxWidth,a=o/h),a>d.maxHeight&&(a=d.maxHeight,o=a*h),o*a>d.maxArea){const g=Math.sqrt(d.maxArea/(o*a));o*=g,a*=g}return await Cse(t,o,a,{imageType:l.replace("image/",""),quality:u})}async function Use(t){return await new Promise((n,e)=>{const r=new FileReader;r.onerror=()=>e(r.error),r.onload=()=>{n(r.result?Nse(r.result):!1)},r.readAsArrayBuffer(t)})}function Bse(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Hse(t){const n=new URL(t).host.replace("www.","");for(const e of Mm)if(Yj(e.hostnames,n)){const r=e.fromEmbedUrl(t);if(r)return{definition:e,url:r,embedUrl:t}}}const Vse=t=>t.split("*").map(n=>Bse(n)).join(".+"),Yj=(t,n)=>!!t.find(e=>{const r=new RegExp(Vse(e));return n.match(r)});function Kse(t){const n=new URL(t).host.replace("www.","");for(const e of Mm)if(Yj(e.hostnames,n)){const r=e.toEmbedUrl(t);if(r)return{definition:e,embedUrl:r,url:t}}}function Wj(t){return Kse(t)??Hse(t)}function td(t){try{return Wj(t)}catch(n){console.error(n)}}const Sm="  ",xs=class xs{static insertTextFirefox(n,e){n.setRangeText(e,n.selectionStart||0,n.selectionEnd||0,"end"),n.dispatchEvent(new InputEvent("input",{data:e,inputType:"insertText",isComposing:!1}))}static insert(n,e){const r=n.ownerDocument,o=r.activeElement;o!==n&&n.focus(),r.execCommand("insertText",!1,e)||xs.insertTextFirefox(n,e),o===r.body?n.blur():o instanceof HTMLElement&&o!==n&&o.focus()}static set(n,e){n.select(),xs.insert(n,e)}static getSelection(n){const{selectionStart:e,selectionEnd:r}=n;return n.value.slice(e||void 0,r||void 0)}static wrapSelection(n,e,r){const{selectionStart:o,selectionEnd:a}=n,l=xs.getSelection(n);xs.insert(n,e+l+(r??e)),n.selectionStart=(o||0)+e.length,n.selectionEnd=(a||0)+e.length}static replace(n,e,r){let o=0;n.value.replace(e,(...a)=>{const l=o+a[a.length-2],u=a[0].length;n.selectionStart=l,n.selectionEnd=l+u;const d=typeof r=="string"?r:r(...a);return xs.insert(n,d),n.selectionStart=l,o+=d.length-u,d})}static findLineEnd(n,e){const r=n.lastIndexOf(`
`,e-1)+1;return n.charAt(r)!=="	"?e:r+1}static indent(n){var u;const{selectionStart:e,selectionEnd:r,value:o}=n,a=o.slice(e,r),l=(u=/\n/g.exec(a))==null?void 0:u.length;if(l&&l>0){const d=o.lastIndexOf(`
`,e-1)+1,h=n.value.slice(d,r-1),g=h.replace(/^|\n/g,`$&${Sm}`),v=g.length-h.length;n.setSelectionRange(d,r-1),xs.insert(n,g),n.setSelectionRange(e+1,r+v)}else xs.insert(n,Sm)}static unindent(n){const{selectionStart:e,selectionEnd:r,value:o}=n,a=o.lastIndexOf(`
`,e-1)+1,l=xs.findLineEnd(o,r),u=n.value.slice(a,l),d=u.replace(/(^|\n)(\t| {1,2})/g,"$1"),h=u.length-d.length;n.setSelectionRange(a,l),xs.insert(n,d);const g=/\t| {1,2}/.exec(o.slice(a,e)),v=g?g[0].length:0,S=e-v;n.setSelectionRange(e-v,Math.max(S,r-h))}static indentCE(n){var d;const e=window.getSelection(),r=n.innerText,o=Hx(n)??0,a=Hx(n)??0,l=r.slice(o,a),u=(d=/\n/g.exec(l))==null?void 0:d.length;if(u&&u>0){const h=r.lastIndexOf(`
`,o-1)+1,g=r.slice(h,a-1),S=g.replace(/^|\n/g,`$&${Sm}`).length-g.length;e&&e.setBaseAndExtent(n,o+1,n,a+S)}else{const h=window.getSelection();n.innerText=r.slice(0,o)+Sm+r.slice(o),h==null||h.setBaseAndExtent(n,o+1,n,o+2)}}static unindentCE(n){const e=window.getSelection(),r=n.innerText,o=Hx(n)??0,a=Hx(n)??0,l=r.lastIndexOf(`
`,o-1)+1,u=xs.findLineEnd(r,a),d=r.slice(l,u),h=d.replace(/(^|\n)(\t| {1,2})/g,"$1"),g=d.length-h.length;if(e){e.setBaseAndExtent(n,l,n,u);const v=/\t| {1,2}/.exec(r.slice(l,o)),S=v?v[0].length:0,w=o-S;e.setBaseAndExtent(n,o-S,n,Math.max(w,a-g))}}static normalizeText(n){return n.replace(xs.fixNewLines,`
`)}static normalizeTextForDom(n){return n.replace(xs.fixNewLines,`
`).split(`
`).map(e=>e||" ").join(`
`)}};T(xs,"fixNewLines",/\r?\n|\r/g);let kf=xs;function Hx(t){if(typeof window.getSelection>"u")return;const n=window.getSelection();if(!n)return;let e=0;if(n.rangeCount!==0){const r=n.getRangeAt(0),o=r.cloneRange();o.selectNodeContents(t),o.setEnd(r.endContainer,r.endOffset),e=o.toString().length}return e}const Yse=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/;function Wse(t){return Yse.test(t)}function Gse(t){return t.replace(/\t/g,Sm)}function Xse(t){const n=t.split(`
`);for(;n[0]&&n[0].trim().length===0;)n.shift();let e=1/0;for(const r of n)if(r.trim().length>0){const o=r.length-r.trimStart().length;e=Math.min(e,o)}return n.map(r=>r.slice(e)).join(`
`)}function qse(t){return t.replace(/[ \t]+$/gm,"").replace(/\n+$/,"")}function Qse(t){return qse(Xse(Gse(t)))}const zS=(t,n)=>t.length<=n?t:t.substring(0,n-3)+"...";function Zse(t,{maxImageDimension:n,maxAssetSize:e,acceptedImageMimeTypes:r,acceptedVideoMimeTypes:o}){t.registerExternalAssetHandler("file",async({file:a})=>await new Promise((l,u)=>{!r.includes(a.type)&&!o.includes(a.type)&&(console.warn(`File type not allowed: ${a.type}`),u()),a.size>e&&(console.warn(`File size too big: ${(a.size/1024).toFixed()}kb > ${(e/1024).toFixed()}kb`),u());const d=new FileReader;d.onerror=()=>u(d.error),d.onload=async()=>{let h=d.result;a.type==="video/quicktime"&&h.includes("video/quicktime")&&(h=h.replace("video/quicktime","video/mp4"));const g=r.includes(a.type);let v,S;if(g?(v=await jO.getImageSizeFromSrc(h),S=a.type==="image/gif"&&await Use(a)):(S=!0,v=await jO.getVideoSizeFromSrc(h)),isFinite(n)){const C=zse(v,{w:n,h:n});v!==C&&(a.type==="image/jpeg"||a.type==="image/png")&&(v=C)}(a.type==="image/jpeg"||a.type==="image/png")&&(h=await Fse(h,v.w,v.h,{type:a.type,quality:.92}));const w=Wh.createId(a1(h)),k=Wh.create({id:w,type:g?"image":"video",typeName:"asset",props:{name:a.name,src:h,w:v.w,h:v.h,mimeType:a.type,isAnimated:S}});l(k)},d.readAsDataURL(a)})),t.registerExternalAssetHandler("url",async({url:a})=>{var u,d,h;let l;try{const v=await(await fetch(a,{method:"GET",mode:"no-cors"})).text(),S=new DOMParser().parseFromString(v,"text/html");l={image:((u=S.head.querySelector('meta[property="og:image"]'))==null?void 0:u.getAttribute("content"))??"",title:((d=S.head.querySelector('meta[property="og:title"]'))==null?void 0:d.getAttribute("content"))??zS(a,32),description:((h=S.head.querySelector('meta[property="og:description"]'))==null?void 0:h.getAttribute("content"))??""}}catch(g){console.error(g),l={image:"",title:zS(a,32),description:""}}return{id:Wh.createId(a1(a)),typeName:"asset",type:"bookmark",props:{src:a,description:l.description,image:l.image,title:l.title},meta:{}}}),t.registerExternalContentHandler("svg-text",async({point:a,text:l})=>{const u=a??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageCenter()),d=new DOMParser().parseFromString(l,"image/svg+xml").querySelector("svg");if(!d)throw new Error("No <svg/> element present");let h=parseFloat(d.getAttribute("width")||"0"),g=parseFloat(d.getAttribute("height")||"0");if(!(h&&g)){document.body.appendChild(d);const S=d.getBoundingClientRect();document.body.removeChild(d),h=S.width,g=S.height}const v=await t.getAssetForExternalContent({type:"file",file:new File([l],"asset.svg",{type:"image/svg+xml"})});if(!v)throw Error("Could not create an asset");W6(t,[v],u)}),t.registerExternalContentHandler("embed",({point:a,url:l,embed:u})=>{const d=a??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageCenter()),{width:h,height:g}=u,v=Ir(),S={id:v,type:"embed",x:d.x-(h||450)/2,y:d.y-(g||450)/2,props:{w:h,h:g,url:l}};t.createShapes([S]).select(v)}),t.registerExternalContentHandler("files",async({point:a,files:l})=>{const u=a??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageCenter()),d=new N(u.x,u.y),h=[];await Promise.all(l.map(async(g,v)=>{if(g.size>e)return console.warn(`File size too big: ${(g.size/1024).toFixed()}kb > ${(e/1024).toFixed()}kb`),null;if(!g.type)throw new Error("No mime type");if(!r.concat(o).includes(g.type))return console.warn(`${g.name} not loaded - Extension not allowed.`),null;try{const S=await t.getAssetForExternalContent({type:"file",file:g});if(!S)throw Error("Could not create an asset");h[v]=S}catch(S){return console.error(S),null}})),W6(t,Bt(h),d)}),t.registerExternalContentHandler("text",async({point:a,text:l})=>{const u=a??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageCenter()),d=t.getShapeUtil("text").getDefaultProps(),h=Qse(l);let g,v,S,w="middle";const k=h.split(`
`).length>1,C=Wse(h);k&&(w=k?C?"end":"start":"middle");const E=t.textMeasure.measureText(h,{...Po,fontFamily:sd[d.font],fontSize:Cf[d.size],maxWidth:null}),R=Math.min(k?t.getViewportPageBounds().width*.9:920,Math.max(200,t.getViewportPageBounds().width*.9));if(E.w>R){const L=t.textMeasure.measureText(h,{...Po,fontFamily:sd[d.font],fontSize:Cf[d.size],maxWidth:R});g=L.w,v=L.h,S=!1,w=C?"end":"start"}else g=E.w,v=E.h,S=!0;u.y-v/2<t.getViewportPageBounds().minY+40&&(u.y=t.getViewportPageBounds().minY+40+v/2),t.createShapes([{id:Ir(),type:"text",x:u.x-g/2,y:u.y-v/2,props:{text:h,align:w,autoSize:S,w:g}}])}),t.registerExternalContentHandler("url",async({point:a,url:l})=>{const u=td(l);if(u)return t.putExternalContent({type:"embed",url:u.url,point:a,embed:u.definition});const d=a??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageCenter()),h=Wh.createId(a1(l)),g=Jse(t,l,d);let v=t.getAsset(h),S=!1;if(!v){S=!0;const w=await t.getAssetForExternalContent({type:"url",url:l});if(!w)throw Error("Could not create an asset");v=w}t.batch(()=>{S&&t.createAssets([v]),t.updateShapes([{id:g.id,type:g.type,props:{assetId:v.id}}])})})}async function W6(t,n,e){if(!n.length)return[];const r=N.From(e),o=[];for(const a of n)switch(a.type){case"bookmark":{o.push({id:Ir(),type:"bookmark",x:r.x-150,y:r.y-160,opacity:1,props:{assetId:a.id,url:a.props.src}}),r.x+=300;break}case"image":{o.push({id:Ir(),type:"image",x:r.x-a.props.w/2,y:r.y-a.props.h/2,opacity:1,props:{assetId:a.id,w:a.props.w,h:a.props.h}}),r.x+=a.props.w;break}case"video":o.push({id:Ir(),type:"video",x:r.x-a.props.w/2,y:r.y-a.props.h/2,opacity:1,props:{assetId:a.id,w:a.props.w,h:a.props.h}}),r.x+=a.props.w}return t.batch(()=>{const a=n.filter(l=>!t.getAsset(l.id));a.length&&t.createAssets(a),t.createShapes(o).select(...o.map(l=>l.id)),Gj(t,e)}),o.map(a=>a.id)}function Gj(t,n){const e=t.getViewportPageBounds();let r=t.getSelectionPageBounds();if(r){const o=r.center.sub(n);t.updateShapes(t.getSelectedShapes().map(a=>{const l=t.getShapeParentTransform(a).decompose().rotation,u=N.Rot(o,-l);return{id:a.id,type:a.type,x:a.x-u.x,y:a.y-u.y}}))}r=t.getSelectionPageBounds(),r&&!e.contains(r)&&t.zoomToSelection()}function Jse(t,n,e){const r={id:Ir(),type:"bookmark",x:e.x-150,y:e.y-160,opacity:1,props:{assetId:null,url:n}};return t.batch(()=>{t.createShapes([r]).select(r.id),Gj(t,e)}),t.getShape(r.id)}var gP;let eae=(gP=class extends Et{constructor(){super(...arguments);T(this,"onPointerDown",e=>{this.parent.transition("pointing",e)});T(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});T(this,"onCancel",()=>{this.editor.setCurrentTool("select")});T(this,"onKeyUp",e=>{var r;if(e.key==="Enter"){if(this.editor.getInstanceState().isReadonly)return null;const o=this.editor.getOnlySelectedShape();o&&this.editor.getShapeUtil(o).canEdit(o)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(o.id),(r=this.editor.root.getCurrent())==null||r.transition("editing_shape",{...e,target:"shape",shape:o}))}})}},T(gP,"id","idle"),gP);var mP;let tae=(mP=class extends Et{constructor(){super(...arguments);T(this,"shape");T(this,"markId","");T(this,"onEnter",()=>{this.didTimeout=!1;const e=this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{filter:r=>!r.isLocked&&this.editor.getShapeUtil(r).canBind(r),margin:0,hitInside:!0,renderingOnly:!0});e?this.editor.setHintingShapes([e.id]):this.createArrowShape(),this.startPreciseTimeout()});T(this,"onExit",()=>{this.shape=void 0,this.editor.setHintingShapes([]),this.clearPreciseTimeout()});T(this,"onPointerMove",()=>{if(this.editor.inputs.isDragging){if(this.shape||this.createArrowShape(),!this.shape)throw Error("expected shape");this.updateArrowShapeEndHandle(),this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,handle:this.editor.getShapeHandles(this.shape).find(e=>e.id==="end"),isCreating:!0,onInteractionEnd:"arrow"})}});T(this,"onPointerUp",()=>{this.cancel()});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.cancel()});T(this,"onInterrupt",()=>{this.cancel()});T(this,"preciseTimeout",-1);T(this,"didTimeout",!1)}cancel(){this.shape&&this.editor.bailToMark(this.markId),this.editor.setHintingShapes([]),this.parent.transition("idle")}createArrowShape(){var g,v;const{originPagePoint:e}=this.editor.inputs,r=Ir();this.markId=`creating:${r}`,this.editor.mark(this.markId),this.editor.createShapes([{id:r,type:"arrow",x:e.x,y:e.y}]);const o=this.editor.getShape(r);if(!o)throw Error("expected shape");const a=this.editor.getShapeHandles(o);if(!a)throw Error("expected handles for arrow");const l=this.editor.getShapeUtil("arrow"),u=this.shape,d=a.find(S=>S.id==="start"),h=(g=l.onHandleChange)==null?void 0:g.call(l,o,{handle:{...d,x:0,y:0},isPrecise:!0,initial:u});if(h){const S=(v=h.props)==null?void 0:v.start;(S==null?void 0:S.type)==="binding"&&this.editor.setHintingShapes([S.boundShapeId]),this.editor.updateShapes([h],{squashing:!0})}this.shape=this.editor.getShape(r),this.editor.select(r)}updateArrowShapeEndHandle(){var a,l,u;const e=this.shape;if(!e)throw Error("expected shape");const r=this.editor.getShapeHandles(e);if(!r)throw Error("expected handles for arrow");const o={...e,props:{...e.props,end:{...e.props.end,x:0,y:0}}};{const d=this.editor.getShapeUtil("arrow"),h=this.shape,g=this.editor.getPointInShapeSpace(e,this.editor.inputs.currentPagePoint),v=r.find(w=>w.id==="end"),S=(a=d.onHandleChange)==null?void 0:a.call(d,o,{handle:{...v,x:g.x,y:g.y},isPrecise:!1,initial:h});if(S){const w=(l=S.props)==null?void 0:l.end;(w==null?void 0:w.type)==="binding"&&this.editor.setHintingShapes([w.boundShapeId]),this.editor.updateShapes([S],{squashing:!0})}}{const d=this.editor.getShapeUtil("arrow"),h=this.shape,g=r.find(S=>S.id==="start"),v=(u=d.onHandleChange)==null?void 0:u.call(d,o,{handle:{...g,x:0,y:0},isPrecise:this.didTimeout,initial:h});v&&this.editor.updateShapes([v],{squashing:!0})}this.shape=this.editor.getShape(e.id)}startPreciseTimeout(){this.preciseTimeout=window.setTimeout(()=>{this.getIsActive()&&(this.didTimeout=!0)},320)}clearPreciseTimeout(){clearTimeout(this.preciseTimeout)}},T(mP,"id","pointing"),mP);class v1 extends Et{constructor(){super(...arguments);T(this,"shapeType","arrow")}}T(v1,"id","arrow"),T(v1,"initial","idle"),T(v1,"children",()=>[eae,tae]);class BR extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"initialShape");T(this,"shapeType",this.parent.id==="highlight"?"highlight":"draw");T(this,"util",this.editor.getShapeUtil(this.shapeType));T(this,"isPen",!1);T(this,"segmentMode","free");T(this,"didJustShiftClickToExtendPreviousShapeLine",!1);T(this,"pagePointWhereCurrentSegmentChanged",{});T(this,"pagePointWhereNextSegmentChanged",null);T(this,"lastRecordedPoint",{});T(this,"mergeNextPoint",!1);T(this,"currentLineLength",0);T(this,"canDraw",!1);T(this,"markId",null);T(this,"onEnter",e=>{this.markId=null,this.info=e,this.canDraw=!this.editor.getIsMenuOpen(),this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.canDraw&&this.startShape()});T(this,"onPointerMove",()=>{const{editor:{inputs:e}}=this;if(this.isPen!==e.isPen){if(this.markId){this.editor.bailToMark(this.markId),this.startShape();return}}else!this.canDraw&&e.isDragging&&(this.startShape(),this.canDraw=!0);this.canDraw&&(e.isPen?N.Dist(e.currentPagePoint,this.lastRecordedPoint)>=1/this.editor.getZoomLevel()?(this.lastRecordedPoint=e.currentPagePoint.clone(),this.mergeNextPoint=!1):this.mergeNextPoint=!0:this.mergeNextPoint=!1,this.updateShapes())});T(this,"onKeyDown",e=>{if(e.key==="Shift")switch(this.segmentMode){case"free":{this.segmentMode="starting_straight",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break}case"starting_free":this.segmentMode="starting_straight"}this.updateShapes()});T(this,"onKeyUp",e=>{if(e.key==="Shift")switch(this.editor.snaps.clear(),this.segmentMode){case"straight":{this.segmentMode="starting_free",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break}case"starting_straight":{this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";break}}this.updateShapes()});T(this,"onExit",()=>{this.editor.snaps.clear(),this.pagePointWhereCurrentSegmentChanged=this.editor.inputs.currentPagePoint.clone()});T(this,"onPointerUp",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.complete()});T(this,"onInterrupt",()=>{this.editor.inputs.isDragging||(this.markId&&this.editor.bailToMark(this.markId),this.cancel())})}canClose(){return this.shapeType!=="highlight"}getIsClosed(e,r){if(!this.canClose())return!1;const o=Zo[r],a=e[0].points[0],l=e[e.length-1],u=l.points[l.points.length-1];return a!==u&&this.currentLineLength>o*4&&N.Dist(a,u)<o*2}startShape(){const{inputs:{originPagePoint:e,isPen:r}}=this.editor;this.markId="draw start "+dr(),this.editor.mark(this.markId),this.isPen=r;const o=this.isPen?this.info.point.z*1.25:.5;if(this.segmentMode=this.editor.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=e.clone(),this.initialShape){const l=this.editor.getShape(this.initialShape.id);if(l&&this.segmentMode==="straight"){this.didJustShiftClickToExtendPreviousShapeLine=!0;const u=ea(l.props.segments);if(!u)throw Error("Expected a previous segment!");const d=ea(u.points);if(!d)throw Error("Expected a previous point!");const{x:h,y:g}=this.editor.getPointInShapeSpace(l,e).toFixed(),v=this.isPen?this.info.point.z*1.25:.5,S={type:this.segmentMode,points:[{x:d.x,y:d.y,z:+v.toFixed(2)},{x:h,y:g,z:+v.toFixed(2)}]},w=yt.applyToPoint(this.editor.getShapePageTransform(l.id),d);this.pagePointWhereCurrentSegmentChanged=w,this.pagePointWhereNextSegmentChanged=null;const k=[...l.props.segments,S];this.currentLineLength=this.getLineLength(k);const C={id:l.id,type:this.shapeType,props:{segments:k}};this.canClose()&&(C.props.isClosed=this.getIsClosed(k,l.props.size)),this.editor.updateShapes([C]);return}}this.pagePointWhereCurrentSegmentChanged=e.clone();const a=Ir();this.editor.createShapes([{id:a,type:this.shapeType,x:e.x,y:e.y,props:{isPen:this.isPen,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+o.toFixed(2)}]}]}}]),this.currentLineLength=0,this.initialShape=this.editor.getShape(a)}updateShapes(){const{inputs:e}=this.editor,{initialShape:r}=this;if(!r)return;const{id:o,props:{size:a}}=r,l=this.editor.getShape(o);if(!l)return;const{segments:u}=l.props,{x:d,y:h,z:g}=this.editor.getPointInShapeSpace(l,e.currentPagePoint).toFixed(),v={x:d,y:h,z:this.isPen?+(g*1.25).toFixed(2):.5};switch(this.segmentMode){case"starting_straight":{const{pagePointWhereNextSegmentChanged:S}=this;if(S===null)throw Error("We should have a point where the segment changed");if(N.Dist(S,e.currentPagePoint)>WS){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";const k=ea(u);if(!k)throw Error("Expected a previous segment!");const C=ea(k.points);if(!C)throw Error("Expected a previous last point!");let E;const R=this.editor.getPointInShapeSpace(l,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson();if(k.type==="straight"){this.currentLineLength+=N.Dist(C,R),E={type:"straight",points:[{...C},R]};const A=this.editor.getShapePageTransform(l);this.pagePointWhereCurrentSegmentChanged=yt.applyToPoint(A,C)}else E={type:"straight",points:[R,v]};const L={id:o,type:this.shapeType,props:{segments:[...u,E]}};this.canClose()&&(L.props.isClosed=this.getIsClosed(u,a)),this.editor.updateShapes([L],{squashing:!0})}break}case"starting_free":{const{pagePointWhereNextSegmentChanged:S}=this;if(S===null)throw Error("We should have a point where the segment changed");if(N.Dist(S,e.currentPagePoint)>WS){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";const k=u.slice(),C=k[k.length-1],E=ea(C.points);if(!E)throw Error("No previous point!");const R={type:"free",points:[...N.PointsBetween(E,v,6).map(O=>O.toFixed().toJson())]},L=[...k,R];this.currentLineLength=this.getLineLength(L);const A={id:o,type:this.shapeType,props:{segments:L}};this.canClose()&&(A.props.isClosed=this.getIsClosed(L,a)),this.editor.updateShapes([A],{squashing:!0})}break}case"straight":{const S=u.slice(),w=S[S.length-1],{pagePointWhereCurrentSegmentChanged:k}=this,{currentPagePoint:C,ctrlKey:E}=this.editor.inputs;if(!k)throw Error("We should have a point where the segment changed");let R,L=!1;this.didJustShiftClickToExtendPreviousShapeLine?this.editor.inputs.isDragging&&(L=!E,this.didJustShiftClickToExtendPreviousShapeLine=!1):L=!E;let A=this.editor.getPointInShapeSpace(l,C).toFixed().toJson(),O=!1,D;if((this.editor.user.getIsSnapMode()?!E:E)&&S.length>2){let Y,q=8/this.editor.getZoomLevel();for(let X=0,ie=u.length-2;X<ie;X++){const pe=u[X];if(!pe)break;if(pe.type==="free")continue;const ae=pe.points[0],te=ea(pe.points);if(!(ae&&te))continue;const he=N.NearestPointOnLineSegment(ae,te,A),ce=N.Dist(he,A);if(ce<q){Y=he.toFixed().toJson(),q=ce,D=pe;break}}Y&&(O=!0,A=Y)}if(O&&D){const Y=this.editor.getShapePageTransform(l),q=D.points[0],X=ea(D.points);if(!X)throw Error("Expected a last point!");const ie=yt.applyToPoint(Y,q),pe=yt.applyToPoint(Y,X),ae=yt.applyToPoint(Y,A);this.editor.snaps.setLines([{id:dr(),type:"points",points:[ie,ae,pe]}])}else{if(this.editor.snaps.clear(),L){const Y=N.Angle(k,C),X=aC(Y,24)-Y;R=N.RotWith(C,k,X)}else R=C;A=this.editor.getPointInShapeSpace(l,R).toFixed().toJson()}this.currentLineLength+=N.Dist(w.points[0],A),S[S.length-1]={...w,type:"straight",points:[w.points[0],A]};const U={id:o,type:this.shapeType,props:{segments:S}};this.canClose()&&(U.props.isClosed=this.getIsClosed(u,a)),this.editor.updateShapes([U],{squashing:!0});break}case"free":{const S=u.slice(),w=S[S.length-1],k=[...w.points];if(k.length&&this.mergeNextPoint){const{z:E}=k[k.length-1];k[k.length-1]={x:v.x,y:v.y,z:E?Math.max(E,v.z):v.z}}else this.currentLineLength+=N.Dist(k[k.length-1],v),k.push(v);S[S.length-1]={...w,points:k},this.currentLineLength=this.getLineLength(S);const C={id:o,type:this.shapeType,props:{segments:S}};if(this.canClose()&&(C.props.isClosed=this.getIsClosed(S,a)),this.editor.updateShapes([C],{squashing:!0}),k.length>500){this.editor.updateShapes([{id:o,type:this.shapeType,props:{isComplete:!0}}]);const{currentPagePoint:E}=this.editor.inputs,R=Ir();this.editor.createShapes([{id:R,type:this.shapeType,x:lC(E.x),y:lC(E.y),props:{isPen:this.isPen,segments:[{type:"free",points:[{x:0,y:0,z:this.isPen?+(g*1.25).toFixed():.5}]}]}}]),this.initialShape=structuredClone(this.editor.getShape(R)),this.mergeNextPoint=!1,this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.currentLineLength=0}break}}}getLineLength(e){let r=0;for(const o of e)for(let a=0;a<o.points.length-1;a++){const l=o.points[a],u=o.points[a+1];r+=N.Sub(u,l).len2()}return Math.sqrt(r)}complete(){if(!this.canDraw){this.cancel();return}const{initialShape:e}=this;e&&(this.editor.updateShapes([{id:e.id,type:e.type,props:{isComplete:!0}}]),this.parent.transition("idle"))}cancel(){this.parent.transition("idle",this.info)}}T(BR,"id","drawing");var vP;let Xj=(vP=class extends Et{constructor(){super(...arguments);T(this,"onPointerDown",e=>{this.parent.transition("drawing",e)});T(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});T(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},T(vP,"id","idle"),vP);class y1 extends Et{constructor(){super(...arguments);T(this,"shapeType","draw");T(this,"onExit",()=>{const e=this.children.drawing;e.initialShape=void 0})}}T(y1,"id","draw"),T(y1,"initial","idle"),T(y1,"children",()=>[Xj,BR]);class pI extends _m{constructor(){super(...arguments);T(this,"shapeType","frame");T(this,"onCreate",e=>{if(!e)return;const r=this.editor.getShapePageBounds(e),o=[],a=this.editor.getShapeAncestors(e).map(l=>l.id);this.editor.getCurrentPageShapes().map(l=>{if(l.id===e.id||l.isLocked)return;const u=this.editor.getShapePageBounds(l);u&&r.contains(u)&&nae(l,a,e)&&o.push(l.id)}),this.editor.reparentShapes(o,e.id),this.editor.getInstanceState().isToolLocked?this.editor.setCurrentTool("frame"):this.editor.setCurrentTool("select.idle")})}}T(pI,"id","frame"),T(pI,"initial","idle");function nae(t,n,e){return n.includes(t.id)?!1:t.parentId===e.parentId}var yP;let rae=(yP=class extends Et{constructor(){super(...arguments);T(this,"onPointerDown",e=>{this.parent.transition("pointing",e)});T(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});T(this,"onKeyUp",e=>{var r;if(e.key==="Enter"){if(this.editor.getInstanceState().isReadonly)return null;const o=this.editor.getOnlySelectedShape();o&&this.editor.getShapeUtil(o).canEdit(o)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(o.id),(r=this.editor.root.getCurrent())==null||r.transition("editing_shape",{...e,target:"shape",shape:o}))}});T(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},T(yP,"id","idle"),yP);var SP;let iae=(SP=class extends Et{constructor(){super(...arguments);T(this,"markId","");T(this,"onPointerUp",()=>{this.complete()});T(this,"onPointerMove",e=>{if(this.editor.inputs.isDragging){const{originPagePoint:r}=this.editor.inputs,o=Ir();this.markId=`creating:${o}`,this.editor.mark(this.markId),this.editor.createShapes([{id:o,type:"geo",x:r.x,y:r.y,props:{w:1,h:1,geo:this.editor.getStyleForNextShape(Yc)}}]).select(o).setCurrentTool("select.resizing",{...e,target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"})}});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.complete()});T(this,"onInterrupt",()=>{this.cancel()})}complete(){const{originPagePoint:e}=this.editor.inputs,r=Ir();this.markId=`creating:${r}`,this.editor.mark(this.markId),this.editor.createShapes([{id:r,type:"geo",x:e.x,y:e.y,props:{geo:this.editor.getStyleForNextShape(Yc),w:1,h:1}}]);const o=this.editor.getShape(r);if(!o)return;const a=o.props.geo==="star"?new Mt(0,0,200,190):o.props.geo==="cloud"?new Mt(0,0,300,180):new Mt(0,0,200,200),l=a.center,u=this.editor.getShapeParentTransform(o);u&&l.rot(-u.rotation()),this.editor.select(r),this.editor.updateShapes([{id:o.id,type:"geo",x:o.x-l.x,y:o.y-l.y,props:{geo:this.editor.getStyleForNextShape(Yc),w:a.width,h:a.height}}]),this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):this.editor.setCurrentTool("select",{})}cancel(){this.parent.transition("idle")}},T(SP,"id","pointing"),SP);class S1 extends Et{constructor(){super(...arguments);T(this,"shapeType","geo")}}T(S1,"id","geo"),T(S1,"initial","idle"),T(S1,"children",()=>[rae,iae]);class b1 extends Et{constructor(){super(...arguments);T(this,"shapeType","highlight");T(this,"onExit",()=>{const e=this.children.drawing;e.initialShape=void 0})}}T(b1,"id","highlight"),T(b1,"initial","idle"),T(b1,"children",()=>[Xj,BR]);var bP;let oae=(bP=class extends Et{constructor(){super(...arguments);T(this,"shapeId","");T(this,"onEnter",e=>{this.shapeId=e.shapeId,this.editor.setCursor({type:"cross",rotation:0})});T(this,"onPointerDown",()=>{this.parent.transition("pointing",{shapeId:this.shapeId})});T(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},T(bP,"id","idle"),bP);const G6=2;var wP;let sae=(wP=class extends Et{constructor(){super(...arguments);T(this,"shape",{});T(this,"markId");T(this,"onEnter",e=>{const{inputs:r}=this.editor,{currentPagePoint:o}=r;this.markId=void 0;const a=e.shapeId&&this.editor.getShape(e.shapeId);if(a&&r.shiftKey){this.markId=`creating:${a.id}`,this.editor.mark(this.markId),this.shape=a;const l=this.editor.getShapeHandles(this.shape);if(!l)return;const u=l.filter(E=>E.type==="vertex").sort(qo),d=u[u.length-1],h=u[u.length-2],g=yt.applyToPoint(this.editor.getShapeParentTransform(this.shape),new N(this.shape.x,this.shape.y));let v,S,w;const k=N.Sub(o,g);N.Dist(d,h)<G6||N.Dist(k,d)<G6?(v=d.index,S=d.id,w={...d,x:k.x+.1,y:k.y+.1}):(v=Zu(d.index),S="handle:"+v,w={id:S,type:"vertex",index:v,x:k.x+.1,y:k.y+.1,canBind:!1});const C=Tf(this.shape.props.handles);C[w.id]=w,this.editor.updateShapes([{id:this.shape.id,type:this.shape.type,props:{handles:C}}])}else{const l=Ir();this.markId=`creating:${l}`,this.editor.mark(this.markId),this.editor.createShapes([{id:l,type:"line",x:o.x,y:o.y}]),this.editor.select(l),this.shape=this.editor.getShape(l)}});T(this,"onPointerMove",()=>{if(this.shape&&this.editor.inputs.isDragging){const e=this.editor.getShapeHandles(this.shape);if(!e)throw this.markId&&this.editor.bailToMark(this.markId),Error("No handles found");const r=ea(e);this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,isCreating:!0,handle:{...r,x:r.x-.1,y:r.y-.1},onInteractionEnd:"line"})}});T(this,"onPointerUp",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.complete()});T(this,"onInterrupt",()=>{this.parent.transition("idle"),this.markId&&this.editor.bailToMark(this.markId),this.editor.snaps.clear()})}complete(){this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clear()}cancel(){this.markId&&this.editor.bailToMark(this.markId),this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clear()}},T(wP,"id","pointing"),wP);class w1 extends Et{constructor(){super(...arguments);T(this,"shapeType","line")}}T(w1,"id","line"),T(w1,"initial","idle"),T(w1,"children",()=>[oae,sae]);var xP;let aae=(xP=class extends Et{constructor(){super(...arguments);T(this,"onPointerDown",e=>{this.parent.transition("pointing",e)});T(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});T(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},T(xP,"id","idle"),xP);var CP;let lae=(CP=class extends Et{constructor(){super(...arguments);T(this,"dragged",!1);T(this,"info",{});T(this,"wasFocusedOnEnter",!1);T(this,"markId","");T(this,"shape",{});T(this,"onEnter",()=>{this.wasFocusedOnEnter=!this.editor.getIsMenuOpen(),this.wasFocusedOnEnter&&(this.shape=this.createShape())});T(this,"onPointerMove",e=>{this.editor.inputs.isDragging&&(this.wasFocusedOnEnter||(this.shape=this.createShape()),this.editor.setCurrentTool("select.translating",{...e,target:"shape",shape:this.shape,onInteractionEnd:"note",isCreating:!0,onCreate:()=>{this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape")}}))});T(this,"onPointerUp",()=>{this.complete()});T(this,"onInterrupt",()=>{this.cancel()});T(this,"onComplete",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()})}complete(){this.wasFocusedOnEnter&&(this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):(this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape",{...this.info,target:"shape",shape:this.shape})))}cancel(){this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}createShape(){const{inputs:{originPagePoint:e}}=this.editor,r=Ir();this.markId=`creating:${r}`,this.editor.mark(this.markId),this.editor.createShapes([{id:r,type:"note",x:e.x,y:e.y}]).select(r);const o=this.editor.getShape(r),a=this.editor.getShapeGeometry(o).bounds;return this.editor.updateShapes([{id:r,type:"note",x:o.x-a.width/2,y:o.y-a.height/2}]),this.editor.getShape(r)}},T(CP,"id","pointing"),CP);class x1 extends Et{constructor(){super(...arguments);T(this,"shapeType","note")}}T(x1,"id","note"),T(x1,"initial","idle"),T(x1,"children",()=>[aae,lae]);function QS(t){const n=t.getShapeAtPoint(t.inputs.currentPagePoint,{hitInside:!1,hitLabels:!1,margin:Jl/t.getZoomLevel(),renderingOnly:!0});if(!n)return t.setHoveredShape(null);let e;const r=t.getOutermostSelectableShape(n);return r===n||r.id===t.getFocusedGroupId()||t.getSelectedShapeIds().includes(r.id)?e=n:e=r,t.setHoveredShape(e.id)}var EP;let cae=(EP=class extends Et{constructor(){super(...arguments);T(this,"onPointerMove",e=>{switch(e.target){case"shape":case"canvas":QS(this.editor)}});T(this,"onPointerDown",e=>{this.parent.transition("pointing",e)});T(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});T(this,"onKeyDown",e=>{var r;if(e.key==="Enter"){if(this.editor.getInstanceState().isReadonly)return null;const o=this.editor.getOnlySelectedShape();o&&this.editor.getShapeUtil(o).canEdit(o)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(o.id),(r=this.editor.root.getCurrent())==null||r.transition("editing_shape",{...e,target:"shape",shape:o}))}});T(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},T(EP,"id","idle"),EP);var _P;let uae=(_P=class extends Et{constructor(){super(...arguments);T(this,"shape");T(this,"markId","");T(this,"onExit",()=>{this.editor.setHintingShapes([])});T(this,"onPointerMove",e=>{if(this.editor.inputs.isDragging){const{inputs:{originPagePoint:r}}=this.editor,o=Ir();if(this.markId=`creating:${o}`,this.editor.mark(this.markId),this.editor.createShapes([{id:o,type:"text",x:r.x,y:r.y,props:{text:"",autoSize:!1,w:20}}]),this.editor.select(o),this.shape=this.editor.getShape(o),!this.shape)return;const{shape:a}=this;this.editor.setCurrentTool("select.resizing",{...e,target:"selection",handle:"right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:"text",onCreate:()=>{this.editor.setEditingShape(a.id),this.editor.setCurrentTool("select.editing_shape")}})}});T(this,"onPointerUp",()=>{this.complete()});T(this,"onComplete",()=>{this.cancel()});T(this,"onCancel",()=>{this.cancel()});T(this,"onInterrupt",()=>{this.cancel()})}complete(){var a;this.editor.mark("creating text shape");const e=Ir(),{x:r,y:o}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id:e,type:"text",x:r,y:o,props:{text:"",autoSize:!0}}]).select(e),this.editor.setEditingShape(e),this.editor.setCurrentTool("select"),(a=this.editor.root.getCurrent())==null||a.transition("editing_shape")}cancel(){this.parent.transition("idle"),this.editor.bailToMark(this.markId)}},T(_P,"id","pointing"),_P);class C1 extends Et{constructor(){super(...arguments);T(this,"shapeType","text")}}T(C1,"id","text"),T(C1,"initial","idle"),T(C1,"children",()=>[cae,uae]);const dae=[C1,y1,S1,x1,w1,pI,v1,b1];function ro(){return ns({isDarkMode:FC()})}const di=ft.memo(function({theme:n,d:e,color:r,fill:o}){switch(o){case"none":return null;case"solid":return x.jsx("path",{fill:n[r].semi,d:e});case"semi":return x.jsx("path",{fill:n.solid,d:e});case"pattern":return x.jsx(fae,{theme:n,color:r,fill:o,d:e})}}),fae=function({d:n,color:e,theme:r}){const o=Oe(),a=He("zoomLevel",()=>o.getZoomLevel(),[o]),l=Math.ceil(a),u=o.getZoomLevel()<=.18;return x.jsxs(x.Fragment,{children:[x.jsx("path",{fill:r[e].pattern,d:n}),x.jsx("path",{fill:u?r[e].semi:`url(#${uC[`${l}_${r.id}`]})`,d:n})]})};function Aa({d:t,color:n,fill:e,theme:r}){if(e==="none")return;if(e==="pattern"){const a=document.createElementNS("http://www.w3.org/2000/svg","g"),l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d",t),l.setAttribute("fill",r[n].pattern);const u=document.createElementNS("http://www.w3.org/2000/svg","path");return u.setAttribute("d",t),u.setAttribute("fill","url(#hash_pattern)"),a.appendChild(l),a.appendChild(u),a}const o=document.createElementNS("http://www.w3.org/2000/svg","path");switch(o.setAttribute("d",t),e){case"semi":{o.setAttribute("fill",r.solid);break}case"solid":{o.setAttribute("fill",r[n].semi);break}}return o}function ec(t,n){if(n){const e=document.createElementNS("http://www.w3.org/2000/svg","g");return e.appendChild(n),e.appendChild(t),e}else return t}function hae(t){return t.replace(/\s/g," ")}function QC(t,n,e){const{padding:r=0}=e,o=document.createElementNS("http://www.w3.org/2000/svg","text");if(o.setAttribute("font-size",e.fontSize+"px"),o.setAttribute("font-family",e.fontFamily),o.setAttribute("font-style",e.fontStyle),o.setAttribute("font-weight",e.fontWeight),o.setAttribute("line-height",e.lineHeight*e.fontSize+"px"),o.setAttribute("dominant-baseline","mathematical"),o.setAttribute("alignment-baseline","mathematical"),n.length===0)return o;const a=Mt.From(n[0].box);for(const{box:h}of n)a.union(h);const l=r+(e.offsetX??0),u=(e.offsetY??0)+e.fontSize/2+(e.verticalTextAlign==="start"?r:e.verticalTextAlign==="end"?e.height-r-a.height:(Math.ceil(e.height)-a.height)/2);let d=null;for(const{text:h,box:g}of n){if(d!==null&&g.y>d){const k=document.createElementNS("http://www.w3.org/2000/svg","tspan");k.setAttribute("alignment-baseline","mathematical"),k.setAttribute("x",l+"px"),k.setAttribute("y",g.y+u+"px"),k.textContent=`
`,o.appendChild(k)}const S=document.createElementNS("http://www.w3.org/2000/svg","tspan");S.setAttribute("alignment-baseline","mathematical"),S.setAttribute("x",g.x+l+"px"),S.setAttribute("y",g.y+u+"px");const w=hae(h);S.textContent=w,o.appendChild(S),d=g.y}return e.stroke&&e.strokeWidth&&(o.setAttribute("stroke",e.stroke),o.setAttribute("stroke-width",e.strokeWidth+"px")),e.fill&&o.setAttribute("fill",e.fill),o}function ZC(t){return{key:`${Xc.id}:${t}`,getElement:async()=>{const n=pae(t);if(!n)return null;const e=n.$$_url,r=n.$$_fontface;if(!e||!r)return null;const o=await(await fetch(e)).blob(),a=await new Promise((d,h)=>{const g=new FileReader;g.onload=()=>d(g.result),g.onerror=h,g.readAsDataURL(o)}),l=r.replace(e,a),u=document.createElementNS("http://www.w3.org/2000/svg","style");return u.textContent=l,u}}}function pae(t){const n=f0[t];for(const e of document.fonts)if(n.includes(e.family))return e;return null}function HR(t,n){return{key:`${Xc.id}:${t}`,getElement:async()=>{if(t!=="pattern")return null;const e=8/12,r=document.createElement("div");return r.innerHTML=`
				<svg>
					<defs>
						<mask id="hash_pattern_mask">
							<rect x="0" y="0" width="8" height="8" fill="white" />
							<g
								strokeLinecap="round"
								stroke="black"
							>
								<line x1="${e*1}" y1="${e*3}" x2="${e*3}" y2="${e*1}" />
								<line x1="${e*5}" y1="${e*7}" x2="${e*7}" y2="${e*5}" />
								<line x1="${e*9}" y1="${e*11}" x2="${e*11}" y2="${e*9}" />
							</g>
						</mask>
						<pattern
							id="hash_pattern"
							width="8"
							height="8"
							patternUnits="userSpaceOnUse"
						>
							<rect x="0" y="0" width="8" height="8" fill="${n.solid}" mask="url(#hash_pattern_mask)" />
						</pattern>
					</defs>
				</svg>
			`,Array.from(r.querySelectorAll("defs > *"))}}}function VR(){return{key:`${Xc.id}:pattern`,component:vae}}const AS=8,X6=(t,n,e)=>new Promise((r,o)=>{const a=AS*n*t,l=document.createElement("canvas");l.width=a,l.height=a;const u=l.getContext("2d");if(!u)return;u.fillStyle=e?"#212529":"#f8f9fa",u.fillRect(0,0,a,a),u.globalCompositeOperation="destination-out",u.lineCap="round",u.lineWidth=1.25*n*t;const d=8/12,h=g=>g*n*t;u.beginPath(),u.moveTo(h(d*1),h(d*3)),u.lineTo(h(d*3),h(d*1)),u.moveTo(h(d*5),h(d*7)),u.lineTo(h(d*7),h(d*5)),u.moveTo(h(d*9),h(d*11)),u.lineTo(h(d*11),h(d*9)),u.stroke(),l.toBlob(g=>{!g||kr.throwToBlob.get()?o():r(g)})}),q6=(t,n)=>{const e=document.createElement("canvas");e.width=t[0],e.height=t[1];const r=e.getContext("2d");return r?(n(r),e.toDataURL()):""},gae=()=>{const t=[];for(let n=1;n<=Math.ceil(Sf);n++){const e=q6([1,1],o=>{o.fillStyle=tC.lightMode.black.semi,o.fillRect(0,0,1,1)}),r=q6([1,1],o=>{o.fillStyle=tC.darkMode.black.semi,o.fillRect(0,0,1,1)});t.push({zoom:n,url:e,darkMode:!1}),t.push({zoom:n,url:r,darkMode:!0})}return t};function mae(){const n=Oe().getInstanceState().devicePixelRatio,[e,r]=I.useState(!1),o=I.useMemo(()=>gae(),[]),[a,l]=I.useState(o);return I.useEffect(()=>{const d=[];for(let g=1;g<=Math.ceil(Sf);g++)d.push(X6(n,g,!1).then(v=>({zoom:g,url:URL.createObjectURL(v),darkMode:!1}))),d.push(X6(n,g,!0).then(v=>({zoom:g,url:URL.createObjectURL(v),darkMode:!0})));let h=!1;return Promise.all(d).then(g=>{h||(l(g),r(!0))}),()=>{h=!0,r(!1)}},[n]),{defs:x.jsx(x.Fragment,{children:a.map(d=>{const h=d.zoom+(d.darkMode?"_dark":"_light");return x.jsx("pattern",{id:uC[h],width:AS,height:AS,patternUnits:"userSpaceOnUse",children:x.jsx("image",{href:d.url,width:AS,height:AS})},h)})}),isReady:e}}function vae(){const t=Oe(),n=I.useRef(null),{defs:e,isReady:r}=mae();return I.useEffect(()=>{if(r&&t.environment.isSafari){const o=qj(n.current);o&&requestAnimationFrame(()=>{o.style.display="none",requestAnimationFrame(()=>{o.style.display=""})})}},[t,r]),x.jsx("g",{ref:n,children:e})}function qj(t){return t.classList.contains("tl-html-layer")?t:t.parentElement?qj(t.parentElement):null}function ts(t,n,e={}){const{closed:r=!1,snap:o=1,start:a="outset",end:l="outset",lengthRatio:u=2,style:d="dashed"}=e;let h=0,g=0,v=1,S=0,w=0;switch(d){case"dashed":{v=1,h=Math.min(n*u,t/4);break}case"dotted":{v=100,h=n/v;break}default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return r||(a==="outset"?(t+=h/2,w+=h/2):a==="skip"&&(t-=h,w-=h),l==="outset"?t+=h/2:l==="skip"&&(t-=h)),g=Math.floor(t/h/(2*v)),g-=g%o,g<3&&d==="dashed"?t/n<5?(h=t,g=1,S=0):(h=t*.333,S=t*.333):(g=Math.max(g,3),h=t/g/(2*v),r?(w=h/2,S=(t-g*h)/g):S=(t-g*h)/Math.max(1,g-1)),{strokeDasharray:[h,S].join(" "),strokeDashoffset:w.toString()}}function yae(t,n,e){const r=n==="end"?t.end.point:t.start.point,o=n==="end"?t.start.point:t.end.point,a=t.isStraight?N.Dist(o,r):Math.abs(t.bodyArc.length),l=Math.max(Math.min(a/5,e*3),e);let u;if(t.isStraight)u=N.Nudge(r,o,l);else{const d=hQ(r,l,t.handleArc.center,t.handleArc.radius);u=n==="end"?t.handleArc.sweepFlag?d[0]:d[1]:t.handleArc.sweepFlag?d[1]:d[0]}return{point:r,int:u}}function Sae({point:t,int:n}){const e=N.RotWith(n,t,Jn/6),r=N.RotWith(n,t,-Jn/6);return`M ${e.x} ${e.y} L ${t.x} ${t.y} L ${r.x} ${r.y}`}function bae({point:t,int:n}){const e=N.RotWith(n,t,Jn/6),r=N.RotWith(n,t,-Jn/6);return`M ${e.x} ${e.y} L ${t.x} ${t.y} L ${r.x} ${r.y} Z`}function wae({point:t,int:n}){const e=N.Sub(n,t).div(2),r=N.Add(t,N.Rot(e,Pr)),o=N.Sub(t,N.Rot(e,Pr));return`M ${r.x} ${r.y} L ${n.x} ${n.y} L ${o.x} ${o.y} Z`}function xae({point:t,int:n}){const e=N.Lrp(t,n,.45),r=N.Dist(e,t);return`M ${e.x-r},${e.y}
  a ${r},${r} 0 1,0 ${r*2},0
  a ${r},${r} 0 1,0 -${r*2},0 `}function Cae({point:t,int:n}){const e=N.Lrp(t,n,.75),r=N.RotWith(e,t,Jn/4),o=N.RotWith(e,t,-Jn/4),a=N.Lrp(r,o,.5);return a.add(N.Sub(a,t)),`M ${a.x} ${a.y} L ${r.x} ${r.y} ${t.x} ${t.y} L ${o.x} ${o.y} Z`}function Eae({int:t,point:n}){const e=N.Lrp(n,t,.85),r=N.Sub(e,n).div(2),o=N.Add(n,N.Rot(r,Pr)),a=N.Sub(n,N.Rot(r,Pr)),l=N.Add(e,N.Rot(r,Pr)),u=N.Sub(e,N.Rot(r,Pr));return`M ${o.x} ${o.y} L ${l.x} ${l.y} L ${u.x} ${u.y} L ${a.x} ${a.y} Z`}function _ae({int:t,point:n}){const e=N.Sub(t,n).div(2),r=N.Add(n,N.Rot(e,Pr)),o=N.Sub(n,N.Rot(e,Pr));return`M ${r.x} ${r.y} L ${o.x} ${o.y}`}function sm(t,n,e){const r=n==="end"?t.end.arrowhead:t.start.arrowhead;if(r==="none")return;const o=yae(t,n,e);if(o){switch(r){case"bar":return _ae(o);case"square":return Eae(o);case"diamond":return Cae(o);case"dot":return xae(o);case"inverted":return wae(o);case"arrow":return Sae(o);case"triangle":return bae(o)}return""}}function Tae(t){const{start:n,end:e,handleArc:{radius:r,largeArcFlag:o,sweepFlag:a}}=t;return`M${n.handle.x},${n.handle.y} A${r} ${r} 0 ${o} ${a} ${e.handle.x},${e.handle.y}`}function H2(t){const{start:n,end:e,bodyArc:{radius:r,largeArcFlag:o,sweepFlag:a}}=t;return`M${n.point.x},${n.point.y} A${r} ${r} 0 ${o} ${a} ${e.point.x},${e.point.y}`}function Qj(t,n){return`M${t.x},${t.y}L${n.x},${n.y}`}function kae(t){return Qj(t.start.handle,t.end.handle)}function V2(t){return Qj(t.start.point,t.end.point)}function KR(t,n,e){const r=Oe(),o=I.useRef(null),a=I.useRef(!1),l=I.useRef(),u=He("isEditing",()=>r.getEditingShapeId()===t,[r,t]);I.useEffect(()=>{const C=o.current;C&&u&&document.activeElement!==C&&C.focus()},[u]);const d=I.useCallback(()=>{const C=a.current;a.current=!1,requestAnimationFrame(()=>{const E=o.current;if(!E)return;const R=r.getShape(t);R&&(E.value=R.props.text,E.value.length&&!C&&E.select())})},[r,t]),h=I.useCallback(()=>{const C=l.current;requestAnimationFrame(()=>{var L;const E=o.current,R=r.getEditingShapeId();if(E&&R){if(R===t)if(C)if(!C.length)E.focus();else{a.current=!0,E.focus();const A=window.getSelection();A&&C.forEach(O=>A.addRange(O))}else E.focus()}else(L=window.getSelection())==null||L.removeAllRanges(),r.complete()})},[r,t]),g=I.useCallback(C=>{if(u)switch((C.ctrlKey||C.metaKey)&&eo(C),C.key){case"Enter":{(C.ctrlKey||C.metaKey)&&r.complete();break}case"Tab":{Un(C),C.shiftKey?kf.unindent(C.currentTarget):kf.indent(C.currentTarget);break}}},[r,u]),v=I.useCallback(C=>{if(!u)return;let E=kf.normalizeText(C.currentTarget.value);const R=E.replace(/\t/g,Sm);if(R!==E){const L=C.currentTarget.selectionStart;C.currentTarget.value=R,C.currentTarget.selectionStart=L+(R.length-E.length),C.currentTarget.selectionEnd=L+(R.length-E.length),E=R}r.updateShapes([{id:t,type:n,props:{text:E}}])},[r,t,n,u]),S=e.trim().length===0;I.useEffect(()=>{if(!u)return;if(o.current){let E=function(){var L,A;const R=(L=window.getSelection)==null?void 0:L.call(window);if(R&&R.type!=="None"){const O=[];if(R)for(let D=0;D<R.rangeCount;D++)O.push((A=R.getRangeAt)==null?void 0:A.call(R,D));l.current=O}};return document.addEventListener("selectionchange",E),()=>{document.removeEventListener("selectionchange",E)}}},[u]);const w=I.useCallback(C=>{r.dispatch({...na(C),type:"pointer",name:"pointer_down",target:"shape",shape:r.getShape(t)}),eo(C)},[r,t]);return{rInput:o,isEditing:u,handleFocus:d,handleBlur:h,handleKeyDown:g,handleChange:v,handleInputPointerDown:w,handleDoubleClick:eo,isEmpty:S}}const Pae=I.memo(function({id:n,text:e,size:r,font:o,position:a,width:l,labelColor:u}){const{rInput:d,isEditing:h,handleFocus:g,handleBlur:v,handleKeyDown:S,handleChange:w,isEmpty:k,handleInputPointerDown:C,handleDoubleClick:E}=KR(n,"arrow",e),L=kf.normalizeTextForDom(e).trim().length>0;return!h&&!L?null:x.jsx("div",{className:"tl-arrow-label","data-font":o,"data-align":"center","data-hastext":!k,"data-isediting":h,style:{textAlign:"center",fontSize:yf[r],lineHeight:yf[r]*Po.lineHeight+"px",transform:`translate(${a.x}px, ${a.y}px)`,color:u},children:x.jsxs("div",{className:"tl-arrow-label__inner",children:[x.jsx("p",{style:{width:l||"9px"},children:e?kf.normalizeTextForDom(e):" "}),h&&x.jsx("textarea",{ref:d,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:e,onFocus:g,onChange:w,onKeyDown:S,onBlur:v,onContextMenu:eo,onPointerDown:C,onDoubleClick:E})]})})});let Iae=0;class E1 extends Pa{constructor(){super(...arguments);T(this,"canEdit",()=>!0);T(this,"canBind",()=>!1);T(this,"canSnap",()=>!1);T(this,"hideResizeHandles",()=>!0);T(this,"hideRotateHandle",()=>!0);T(this,"hideSelectionBoundsBg",()=>!0);T(this,"hideSelectionBoundsFg",()=>!0);T(this,"onHandleChange",(e,{handle:r,isPrecise:o})=>{const a=r.id;if(a==="middle"){const{start:E,end:R}=Yl(this.editor,e),L=N.Sub(R,E),A=N.Per(L),O=N.Med(R,E),D=N.Sub(O,A),z=N.Add(O,A),U=N.NearestPointOnLineSegment(D,z,r,!1);let Y=N.Dist(U,O);return N.Clockwise(U,R,O)&&(Y*=-1),{id:e.id,type:e.type,props:{bend:Y}}}const l=es(e),d=this.editor.getShapePageTransform(l.id).applyToPoint(r);if(this.editor.inputs.ctrlKey)return l.props[a]={type:"point",x:r.x,y:r.y},l;const h=this.editor.getShapePageTransform(e.id).applyToPoint(r),g=this.editor.getShapeAtPoint(h,{hitInside:!0,hitFrameInside:!0,margin:0,filter:E=>!E.isLocked&&this.editor.getShapeUtil(E).canBind(E)});if(!g)return l.props[a]={type:"point",x:r.x,y:r.y},l;const v=this.editor.getShapeGeometry(g),S=Mt.ZeroFix(v.bounds),w=this.editor.getPointInShapeSpace(g,d);let k=o;if(!k){const E=l.props[a];(E.type==="point"||E.type==="binding"&&g.id!==E.boundShapeId)&&(k=this.editor.inputs.pointerVelocity.len()<.5)}if(!o){v.isClosed||(k=!0);const E=l.props[a==="start"?"end":"start"];E.type==="binding"&&g.id===E.boundShapeId&&E.isPrecise&&(k=!0)}const C={x:(w.x-S.minX)/S.width,y:(w.y-S.minY)/S.height};return k&&N.Dist(w,S.center)<Math.max(4,Math.min(Math.min(S.width,S.height)*.15,16))/this.editor.getZoomLevel()&&(C.x=.5,C.y=.5),l.props[a]={type:"binding",boundShapeId:g.id,normalizedAnchor:C,isPrecise:k,isExact:this.editor.inputs.altKey},l.props.start.type==="binding"&&l.props.end.type==="binding"&&l.props.start.boundShapeId===l.props.end.boundShapeId&&N.Equals(l.props.start.normalizedAnchor,l.props.end.normalizedAnchor)&&(l.props.end.normalizedAnchor.x+=.05),l});T(this,"onTranslateStart",e=>{const r=e.props.start.type==="binding"?e.props.start.boundShapeId:null,o=e.props.end.type==="binding"?e.props.end.boundShapeId:null,a=this.editor.getSelectedShapeIds();if(r&&(a.includes(r)||this.editor.isAncestorSelected(r))||o&&(a.includes(o)||this.editor.isAncestorSelected(o)))return;const{start:l,end:u}=Yl(this.editor,e);return{id:e.id,type:e.type,props:{...e.props,start:{type:"point",x:l.x,y:l.y},end:{type:"point",x:u.x,y:u.y}}}});T(this,"onResize",(e,r)=>{const{scaleX:o,scaleY:a}=r,l=Yl(this.editor,e),{start:u,end:d}=es(e.props);let{bend:h}=e.props;u.type==="point"&&(u.x=l.start.x*o,u.y=l.start.y*a),d.type==="point"&&(d.x=l.end.x*o,d.y=l.end.y*a);const g=Math.abs(o),v=Math.abs(a);return o<0&&a>=0?(h!==0&&(h*=-1,h*=Math.max(g,v)),u.type==="binding"&&(u.normalizedAnchor.x=1-u.normalizedAnchor.x),d.type==="binding"&&(d.normalizedAnchor.x=1-d.normalizedAnchor.x)):o>=0&&a<0?(h!==0&&(h*=-1,h*=Math.max(g,v)),u.type==="binding"&&(u.normalizedAnchor.y=1-u.normalizedAnchor.y),d.type==="binding"&&(d.normalizedAnchor.y=1-d.normalizedAnchor.y)):o>=0&&a>=0?h!==0&&(h*=Math.max(g,v)):o<0&&a<0&&(h!==0&&(h*=Math.max(g,v)),u.type==="binding"&&(u.normalizedAnchor.x=1-u.normalizedAnchor.x,u.normalizedAnchor.y=1-u.normalizedAnchor.y),d.type==="binding"&&(d.normalizedAnchor.x=1-d.normalizedAnchor.x,d.normalizedAnchor.y=1-d.normalizedAnchor.y)),{props:{start:u,end:d,bend:h}}});T(this,"onDoubleClickHandle",(e,r)=>{switch(r.id){case"start":return{id:e.id,type:e.type,props:{...e.props,arrowheadStart:e.props.arrowheadStart==="none"?"arrow":"none"}};case"end":return{id:e.id,type:e.type,props:{...e.props,arrowheadEnd:e.props.arrowheadEnd==="none"?"arrow":"none"}}}});T(this,"onEditEnd",e=>{const{id:r,type:o,props:{text:a}}=e;a.trimEnd()!==e.props.text&&this.editor.updateShapes([{id:r,type:o,props:{text:a.trimEnd()}}])})}getDefaultProps(){return{dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{type:"point",x:0,y:0},end:{type:"point",x:2,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",font:"draw"}}getGeometry(e){const r=this.editor.getArrowInfo(e),o=r.isStraight?new gC({start:N.From(r.start.point),end:N.From(r.end.point)}):new fJ({center:N.Cast(r.handleArc.center),radius:r.handleArc.radius,start:N.Cast(r.start.point),end:N.Cast(r.end.point),sweepFlag:r.bodyArc.sweepFlag,largeArcFlag:r.bodyArc.largeArcFlag});let a;if(e.props.text.trim()){const l=o.bounds,{w:u,h:d}=this.editor.textMeasure.measureText(e.props.text,{...Po,fontFamily:sd[e.props.font],fontSize:yf[e.props.size],maxWidth:null});let h=u,g=d;if(l.width>l.height){h=Math.max(Math.min(u,64),Math.min(l.width-64,u));const{w:v,h:S}=this.editor.textMeasure.measureText(e.props.text,{...Po,fontFamily:sd[e.props.font],fontSize:yf[e.props.size],maxWidth:h});h=v,g=S}if(h>16*yf[e.props.size]){h=16*yf[e.props.size];const{w:v,h:S}=this.editor.textMeasure.measureText(e.props.text,{...Po,fontFamily:sd[e.props.font],fontSize:yf[e.props.size],maxWidth:h});h=v,g=S}a=new Qc({x:r.middle.x-h/2-4.25,y:r.middle.y-g/2-4.25,width:h+8.5,height:g+8.5,isFilled:!0,isLabel:!0})}return new wf({children:a?[o,a]:[o],isSnappable:!1})}getHandles(e){const r=this.editor.getArrowInfo(e);return[{id:"start",type:"vertex",index:"a0",x:r.start.handle.x,y:r.start.handle.y,canBind:!0},{id:"middle",type:"virtual",index:"a2",x:r.middle.x,y:r.middle.y,canBind:!1},{id:"end",type:"vertex",index:"a3",x:r.end.handle.x,y:r.end.handle.y,canBind:!0}]}component(e){const r=ro(),o=this.editor.getOnlySelectedShape(),a=this.editor.isInAny("select.idle","select.pointing_handle","select.dragging_handle","arrow.dragging")&&!this.editor.getInstanceState().isReadonly,l=this.editor.getArrowInfo(e),u=Mt.ZeroFix(this.editor.getShapeGeometry(e).bounds),d=ft.useMemo(()=>this.editor.environment.isSafari?Iae+=1:0,[e]);if(!(l!=null&&l.isValid))return null;const h=Zo[e.props.size],g=l.start.arrowhead&&sm(l,"start",h),v=l.end.arrowhead&&sm(l,"end",h),S=l.isStraight?V2(l):H2(l);let w=null;if(o===e&&a){const{strokeDasharray:D,strokeDashoffset:z}=ts(l.isStraight?N.Dist(l.start.handle,l.end.handle):Math.abs(l.handleArc.length),2,{end:"skip",start:"skip",lengthRatio:2.5});w=e.props.start.type==="binding"||e.props.end.type==="binding"?x.jsx("path",{className:"tl-arrow-hint",d:l.isStraight?kae(l):Tae(l),strokeDasharray:D,strokeDashoffset:z,strokeWidth:2,markerStart:e.props.start.type==="binding"?e.props.start.isExact?"":e.props.start.isPrecise?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",markerEnd:e.props.end.type==="binding"?e.props.end.isExact?"":e.props.end.isPrecise?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",opacity:.16}):null}const{strokeDasharray:k,strokeDashoffset:C}=ts(l.isStraight?l.length:Math.abs(l.bodyArc.length),h,{style:e.props.dash}),E=e.props.text.trim()?this.editor.getShapeGeometry(e).children[1]:null,R=!(l.start.arrowhead==="none"||l.start.arrowhead==="arrow"),L=!(l.end.arrowhead==="none"||l.end.arrowhead==="arrow"),A=(e.id+"_clip_"+d).replace(":","_");return x.jsxs(x.Fragment,{children:[x.jsxs(Ca,{id:e.id,style:{minWidth:50,minHeight:50},children:[x.jsx("defs",{children:x.jsxs("mask",{id:A,children:[x.jsx("rect",{x:oe(-100+u.minX),y:oe(-100+u.minY),width:oe(u.width+200),height:oe(u.height+200),fill:"white"}),E&&x.jsx("rect",{x:E.x,y:E.y,width:E.w,height:E.h,fill:"black",rx:4,ry:4}),g&&R&&x.jsx("path",{d:g,fill:l.start.arrowhead==="arrow"?"none":"black",stroke:"none"}),v&&L&&x.jsx("path",{d:v,fill:l.end.arrowhead==="arrow"?"none":"black",stroke:"none"})]})}),x.jsxs("g",{fill:"none",stroke:r[e.props.color].solid,strokeWidth:h,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[w,x.jsxs("g",{mask:`url(#${A})`,children:[x.jsx("rect",{x:oe(u.minX-100),y:oe(u.minY-100),width:oe(u.width+200),height:oe(u.height+200),opacity:0}),x.jsx("path",{d:S,strokeDasharray:k,strokeDashoffset:C})]}),g&&R&&e.props.fill!=="none"&&x.jsx(di,{theme:r,d:g,color:e.props.color,fill:e.props.fill}),v&&L&&e.props.fill!=="none"&&x.jsx(di,{theme:r,d:v,color:e.props.color,fill:e.props.fill}),g&&x.jsx("path",{d:g}),v&&x.jsx("path",{d:v})]})]}),x.jsx(Pae,{id:e.id,text:e.props.text,font:e.props.font,size:e.props.size,position:l.middle,width:(E==null?void 0:E.w)??0,labelColor:r[e.props.labelColor].solid})]})}indicator(e){const{start:r,end:o}=Yl(this.editor,e),a=this.editor.getArrowInfo(e),l=this.editor.getShapeGeometry(e),u=l.bounds,d=e.props.text.trim()?l.children[1]:null,h=VC(e.id);if(!a||N.Equals(r,o))return null;const g=Zo[e.props.size],v=a.start.arrowhead&&sm(a,"start",g),S=a.end.arrowhead&&sm(a,"end",g),w=a.isStraight?V2(a):H2(a),k=v&&a.start.arrowhead!=="arrow"||S&&a.end.arrowhead!=="arrow"||!!d,C=(e.id+"_clip").replace(":","_");return h&&d?x.jsx("rect",{x:oe(d.x),y:oe(d.y),width:d.w,height:d.h,rx:3.5,ry:3.5}):x.jsxs("g",{children:[k&&x.jsx("defs",{children:x.jsxs("mask",{id:C,children:[x.jsx("rect",{x:u.minX-100,y:u.minY-100,width:u.w+200,height:u.h+200,fill:"white"}),d&&x.jsx("rect",{x:oe(d.x),y:oe(d.y),width:d.w,height:d.h,fill:"black",rx:3.5,ry:3.5}),v&&x.jsx("path",{d:v,fill:a.start.arrowhead==="arrow"?"none":"black",stroke:"none"}),S&&x.jsx("path",{d:S,fill:a.end.arrowhead==="arrow"?"none":"black",stroke:"none"})]})}),x.jsxs("g",{...k?{mask:`url(#${C})`}:void 0,children:[k&&x.jsx("rect",{x:u.minX-100,y:u.minY-100,width:u.width+200,height:u.height+200,opacity:0}),x.jsx("path",{d:w})]}),v&&x.jsx("path",{d:v}),S&&x.jsx("path",{d:S}),d&&x.jsx("rect",{x:oe(d.x),y:oe(d.y),width:d.w,height:d.h,rx:3.5,ry:3.5})]})}toSvg(e,r){const o=ns({isDarkMode:this.editor.user.getIsDarkMode()});r.addExportDef(HR(e.props.fill,o));const a=o[e.props.color].solid,l=this.editor.getArrowInfo(e),u=Zo[e.props.size],d=document.createElementNS("http://www.w3.org/2000/svg","g");if(!l)return d;const h=l.start.arrowhead&&sm(l,"start",u),g=l.end.arrowhead&&sm(l,"end",u),v=this.editor.getShapeGeometry(e),S=v.bounds,w=e.props.text.trim()?v.children[1]:null,k=(e.id+"_clip").replace(":","_");if(h||g||w){const O=document.createElementNS("http://www.w3.org/2000/svg","defs"),D=document.createElementNS("http://www.w3.org/2000/svg","mask");D.id=k;const z=document.createElementNS("http://www.w3.org/2000/svg","rect");if(z.setAttribute("x",S.minX-100+""),z.setAttribute("y",S.minY-100+""),z.setAttribute("width",S.width+200+""),z.setAttribute("height",S.height+200+""),z.setAttribute("fill","white"),D.appendChild(z),h&&D.appendChild(Q6(h,l.start.arrowhead)),g&&D.appendChild(Q6(g,l.end.arrowhead)),w){const U=document.createElementNS("http://www.w3.org/2000/svg","rect");U.setAttribute("x",w.x+""),U.setAttribute("y",w.y+""),U.setAttribute("width",w.w+""),U.setAttribute("height",w.h+""),U.setAttribute("fill","black"),D.appendChild(U)}O.appendChild(D),d.appendChild(O)}const C=document.createElementNS("http://www.w3.org/2000/svg","g");C.setAttribute("mask",`url(#${k})`),d.appendChild(C);const E=document.createElementNS("http://www.w3.org/2000/svg","rect");E.setAttribute("x","-100"),E.setAttribute("y","-100"),E.setAttribute("width",S.width+200+""),E.setAttribute("height",S.height+200+""),E.setAttribute("fill","transparent"),E.setAttribute("stroke","none"),C.appendChild(E);const R=Rae(l.isStraight?V2(l):H2(l),a,u),{strokeDasharray:L,strokeDashoffset:A}=ts(l.isStraight?l.length:Math.abs(l.bodyArc.length),u,{style:e.props.dash});if(R.setAttribute("stroke-dasharray",L),R.setAttribute("stroke-dashoffset",A),C.appendChild(R),h&&d.appendChild(Z6(h,e.props.color,u,e.props.arrowheadStart==="arrow"?"none":e.props.fill,o)),g&&d.appendChild(Z6(g,e.props.color,u,e.props.arrowheadEnd==="arrow"?"none":e.props.fill,o)),w){r.addExportDef(ZC(e.props.font));const O={fontSize:yf[e.props.size],lineHeight:Po.lineHeight,fontFamily:f0[e.props.font],padding:0,textAlign:"middle",width:w.w-8,verticalTextAlign:"middle",height:w.h,fontStyle:"normal",fontWeight:"normal",overflow:"wrap"},D=QC(this.editor,this.editor.textMeasure.measureTextSpans(e.props.text,O),O);D.setAttribute("fill",o[e.props.labelColor].solid),Array.from(D.children).forEach(Y=>{const q=parseFloat(Y.getAttribute("x")||"0"),X=parseFloat(Y.getAttribute("y")||"0");Y.setAttribute("x",q+4+w.x+"px"),Y.setAttribute("y",X+w.y+"px")});const U=D.cloneNode(!0);U.setAttribute("stroke-width","2"),U.setAttribute("fill",o.background),U.setAttribute("stroke",o.background),d.appendChild(U),d.appendChild(D)}return d}getCanvasSvgDefs(){return[VR()]}}T(E1,"type","arrow"),T(E1,"props",yY),T(E1,"migrations",SY);function Q6(t,n){const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",t),e.setAttribute("fill",n==="arrow"?"none":"black"),e.setAttribute("stroke","none"),e}function Rae(t,n,e){const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r.setAttribute("fill","none"),r.setAttribute("stroke",n),r.setAttribute("stroke-width",e+""),r}function Z6(t,n,e,r,o){const a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d",t),a.setAttribute("fill","none"),a.setAttribute("stroke",o[n].solid),a.setAttribute("stroke-width",e+"");const l=Aa({d:t,fill:r,color:n,theme:o});if(l){const u=document.createElementNS("http://www.w3.org/2000/svg","g");return u.appendChild(l),u.appendChild(a),u}else return a}const J6="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";function T0({url:t,zoomLevel:n}){return x.jsx("a",{className:Wt("tl-hyperlink-button",{"tl-hyperlink-button__hidden":n<.32}),href:t,target:"_blank",rel:"noopener noreferrer",onPointerDown:eo,onPointerUp:eo,title:t,draggable:!1,children:x.jsx("div",{className:"tl-hyperlink-button__icon",style:{mask:`url("${J6}") center 100% / 100% no-repeat`,WebkitMask:`url("${J6}") center 100% / 100% no-repeat`}})})}const Mae=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}];function YR(t){return Mae.map(e=>{const{offsetX:r,offsetY:o,blur:a,spread:l,color:u}=e,d=new N(r,o),{x:h,y:g}=d.rot(-t);return`${h}px ${g}px ${a}px ${l}px ${u}`}).join(", ")}class _1 extends Vm{constructor(){super(...arguments);T(this,"canResize",()=>!1);T(this,"hideSelectionBoundsFg",()=>!0);T(this,"onBeforeCreate",e=>{e5(this.editor,e)});T(this,"onBeforeUpdate",(e,r)=>{if(e.props.url!==r.props.url)if(Ma.isValid(r.props.url))e5(this.editor,r);else return{...r,props:{...r.props,url:e.props.url}}})}getDefaultProps(){return{url:"",w:300,h:320,assetId:null}}component(e){const r=e.props.assetId?this.editor.getAsset(e.props.assetId):null,o=this.editor.getShapePageTransform(e).rotation(),a=Aae(e);return x.jsx(ud,{children:x.jsxs("div",{className:"tl-bookmark__container",style:{boxShadow:YR(o)},children:[x.jsxs("div",{className:"tl-bookmark__image_container",children:[r!=null&&r.props.image?x.jsx("img",{className:"tl-bookmark__image",draggable:!1,src:r==null?void 0:r.props.image,alt:(r==null?void 0:r.props.title)||""}):x.jsx("div",{className:"tl-bookmark__placeholder"}),x.jsx(T0,{url:e.props.url,zoomLevel:this.editor.getZoomLevel()})]}),x.jsxs("div",{className:"tl-bookmark__copy_container",children:[(r==null?void 0:r.props.title)&&x.jsx("h2",{className:"tl-bookmark__heading",children:zS((r==null?void 0:r.props.title)||"",54)}),(r==null?void 0:r.props.description)&&x.jsx("p",{className:"tl-bookmark__description",children:zS((r==null?void 0:r.props.description)||"",128)}),x.jsx("a",{className:"tl-bookmark__link",href:e.props.url||"",target:"_blank",rel:"noopener noreferrer",onPointerDown:eo,onPointerUp:eo,onClick:eo,children:zS(a,45)})]})]})})}indicator(e){return x.jsx("rect",{width:oe(e.props.w),height:oe(e.props.h),rx:"6",ry:"6"})}}T(_1,"type","bookmark"),T(_1,"props",bY),T(_1,"migrations",wY);const Aae=t=>{try{const n=new URL(t.props.url),e=n.pathname.replace(/\/*$/,"");return`${n.hostname}${e}`}catch{return t.props.url}};function e5(t,n){const{url:e}=n.props,r=Wh.createId(a1(e));t.getAsset(r)?n.props.assetId!==r&&t.updateShapes([{id:n.id,type:n.type,props:{assetId:r}}]):(t.updateShapes([{id:n.id,type:n.type,props:{assetId:null}}]),$ae(t,n))}const $ae=_L(async(t,n)=>{const{url:e}=n.props,r=await t.getAssetForExternalContent({type:"url",url:e});r&&t.batch(()=>{t.createAssets([r]),t.updateShapes([{id:n.id,type:n.type,props:{assetId:r.id}}])})},500);function Ef(t,n=!1){const e=t.length;if(e<2)return"";let r=t[0].point,o=t[1].point;if(e===2)return`M${Eo(r)}L${Eo(o)}`;let a="";for(let l=2,u=e-1;l<u;l++)r=t[l].point,o=t[l+1].point,a+=ta(r,o);return n?`M${ta(t[0].point,t[1].point)}Q${Eo(t[1].point)}${ta(t[1].point,t[2].point)}T${a}${ta(t[e-1].point,t[0].point)}${ta(t[0].point,t[1].point)}Z`:`M${Eo(t[0].point)}Q${Eo(t[1].point)}${ta(t[1].point,t[2].point)}${t.length>3?"T":""}${a}L${Eo(t[e-1].point)}`}function Oae(t,n={}){const{start:e={},end:r={}}=n,{cap:o=!0}=e,{cap:a=!0}=r;Qh(!e.taper&&!r.taper,"cap taper not supported here"),Qh(!e.easing&&!r.easing,"cap easing not supported here"),Qh(o&&a,"cap must be true");const l=Wl(t,n);Xm(l,n);const u=Dae(l);let d="";for(const h of u)d+=jae(h,n);return d}function Dae(t){if(t.length<=2)return[t];const n=[];let e=[t[0]];for(let r=1;r<t.length-1;r++){const o=t[r-1],a=t[r],l=t[r+1],u=N.Angle(o.point,a.point),d=N.Angle(a.point,l.point),h=Math.abs(DS(u,d))/Math.PI;if(h>.8){const k={...a,point:a.input};e.push(k),n.push(K2(e)),e=[k];continue}if(e.push(a),h<.25)continue;const g=(o.radius+a.radius+l.radius)/3,v=N.Dist(o.point,a.point)/g,S=N.Dist(a.point,l.point)/g;if(v+S<1.5){e.push(a),n.push(K2(e)),e=[a];continue}}return e.push(t[t.length-1]),n.push(K2(e)),n}function K2(t){const n=t[0];for(;t.length>2;){const r=t[1],o=N.Dist(n.point,r.point),a=(n.radius+r.radius)/2;if(o<a*.5)t.splice(1,1);else break}const e=t[t.length-1];for(;t.length>2;){const r=t[t.length-2],o=N.Dist(e.point,r.point),a=(e.radius+r.radius)/2;if(o<a*.5)t.splice(t.length-2,1);else break}return t.length>1&&(t[0]={...t[0],vector:N.FromAngle(N.Angle(t[1].point,t[0].point))},t[t.length-1]={...t[t.length-1],vector:N.FromAngle(N.Angle(t[t.length-1].point,t[t.length-2].point))}),t}function Lae(t,n,e){return"M "+t+" "+n+" m -"+e+", 0 a "+e+","+e+" 0 1,1 "+e*2+",0 a "+e+","+e+" 0 1,1 -"+e*2+",0"}function jae(t,n={}){if(t.length===0)return"";if(t.length===1)return Lae(t[0].point.x,t[0].point.y,t[0].radius);const{left:e,right:r}=Bj(t,n);r.reverse();let o=`M${Eo(e[0])}T`;for(let a=1;a<e.length;a++)o+=ta(e[a-1],e[a]);{const a=t[t.length-1],l=a.radius,u=a.vector.clone().per().neg(),d=N.Add(a.point,N.Mul(u,l)),h=N.Add(a.point,N.Mul(u,-l));o+=`${Eo(d)}A${oe(l)},${oe(l)} 0 0 1 ${Eo(h)}T`}for(let a=1;a<r.length;a++)o+=ta(r[a-1],r[a]);{const a=t[0],l=a.radius,u=a.vector.clone().per(),d=N.Add(a.point,N.Mul(u,l)),h=N.Add(a.point,N.Mul(u,-l));o+=`${Eo(d)}A${oe(l)},${oe(l)} 0 0 1 ${Eo(h)}Z`}return o}function CC(){const t=Oe();return He("zoom",()=>t.getZoomLevel()<.35,[t])}const Nae=t=>t*.65+pW(t*Jn/2)*.35,zae=t=>({size:1+t,thinning:.5,streamline:.62+(1+t)/8*.06,smoothing:.62,easing:Jo.easeOutSine,simulatePressure:!0}),Fae=t=>({size:1+t*1.2,thinning:.62,streamline:.62,smoothing:.62,simulatePressure:!1,easing:Nae}),t5=t=>({size:1+t,thinning:0,streamline:.62+(1+t)/8*.06,smoothing:.62,simulatePressure:!1,easing:Jo.linear});function gI({strokeWidth:t,showAsComplete:n}){return{size:1+t,thinning:0,streamline:.5,smoothing:.5,simulatePressure:!1,easing:Jo.easeOutSine,last:n}}function Vx(t,n,e,r){return{...r?t5(n):t.dash==="draw"?t.isPen?Fae(n):zae(n):t5(n),last:t.isComplete||e}}function bm(t){const n=[];for(const e of t)if(e.type==="free"||e.points.length<2)n.push(...e.points.map(N.Cast));else{const r=Math.max(4,Math.floor(N.Dist(e.points[0],e.points[1])/16));n.push(...N.PointsBetween(e.points[0],e.points[1],r))}return n}function n5(t,n){return{draw:"none",solid:"none",dotted:`0.1 ${n*2}`,dashed:`${n*2} ${n*2}`}[t.props.dash]}class T1 extends Pa{constructor(){super(...arguments);T(this,"hideResizeHandles",e=>W2(e));T(this,"hideRotateHandle",e=>W2(e));T(this,"hideSelectionBoundsFg",e=>W2(e));T(this,"onResize",(e,r)=>{const{scaleX:o,scaleY:a}=r,l=[];for(const u of e.props.segments)l.push({...u,points:u.points.map(({x:d,y:h,z:g})=>({x:lC(o*d),y:lC(a*h),z:g}))});return{props:{segments:l}}})}getDefaultProps(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",isComplete:!1,isClosed:!1,isPen:!1}}getGeometry(e){const r=bm(e.props.segments),o=Zo[e.props.size];if(e.props.segments.length===1){const l=Mt.FromPoints(r);if(l.width<o*2&&l.height<o*2)return new F4({x:-o,y:-o,radius:o,isFilled:!0})}const a=Wl(r,Vx(e.props,o,!0,!0)).map(l=>l.point);return e.props.isClosed?new Ji({points:a,isFilled:e.props.fill!=="none"}):new op({points:a})}component(e){var w;const r=ro(),o=CC(),a=Zo[e.props.size],l=bm(e.props.segments),u=e.props.isComplete||((w=ea(e.props.segments))==null?void 0:w.type)==="straight";let d=a;!o&&!e.props.isPen&&e.props.dash==="draw"&&l.length===1&&(d+=_f(e.id)()*(a/6));const h=Vx(e.props,d,u,o);if(!o&&e.props.dash==="draw")return x.jsxs(Ca,{id:e.id,children:[e.props.isClosed&&e.props.fill&&l.length>1?x.jsx(di,{theme:r,fill:e.props.isClosed?e.props.fill:"none",color:e.props.color,d:Ef(Wl(l,h),e.props.isClosed)}):null,x.jsx("path",{d:Oae(l,h),strokeLinecap:"round",fill:r[e.props.color].solid})]});const g=Wl(l,h),v=g.length<2,S=v?Y2(l[0],0):Ef(g,e.props.isClosed);return x.jsxs(Ca,{id:e.id,children:[x.jsx(di,{theme:r,color:e.props.color,fill:v||e.props.isClosed?e.props.fill:"none",d:S}),x.jsx("path",{d:S,strokeLinecap:"round",fill:v?r[e.props.color].solid:"none",stroke:r[e.props.color].solid,strokeWidth:a,strokeDasharray:v?"none":n5(e,a),strokeDashoffset:"0"})]})}indicator(e){var v;const r=CC(),o=Zo[e.props.size],a=bm(e.props.segments);let l=o;!r&&!e.props.isPen&&e.props.dash==="draw"&&a.length===1&&(l+=_f(e.id)()*(o/6));const u=e.props.isComplete||((v=ea(e.props.segments))==null?void 0:v.type)==="straight",d=Vx(e.props,l,u,!0),h=Wl(a,d),g=h.length>1?Ef(h,e.props.isClosed):Y2(a[0],l);return x.jsx("path",{d:g})}toSvg(e,r){var C;const o=ns({isDarkMode:this.editor.user.getIsDarkMode()});r.addExportDef(HR(e.props.fill,o));const{color:a}=e.props,l=Zo[e.props.size],u=bm(e.props.segments),d=e.props.isComplete||((C=ea(e.props.segments))==null?void 0:C.type)==="straight";let h=l;!e.props.isPen&&e.props.dash==="draw"&&u.length===1&&(h+=_f(e.id)()*(l/6));const g=Vx(e.props,h,d,!1),v=Wl(u,g),S=v.length>1?Ef(v,e.props.isClosed):Y2(u[0],h);let w;if(e.props.dash==="draw"||v.length<2){Xm(v,g);const E=_0(v,g),R=document.createElementNS("http://www.w3.org/2000/svg","path");R.setAttribute("d",m0(E,!0)),R.setAttribute("fill",o[a].solid),R.setAttribute("stroke-linecap","round"),w=R}else{const E=document.createElementNS("http://www.w3.org/2000/svg","path");E.setAttribute("d",S),E.setAttribute("stroke",o[a].solid),E.setAttribute("fill","none"),E.setAttribute("stroke-linecap","round"),E.setAttribute("stroke-width",l.toString()),E.setAttribute("stroke-dasharray",n5(e,l)),E.setAttribute("stroke-dashoffset","0"),w=E}const k=Aa({fill:e.props.isClosed?e.props.fill:"none",d:S,color:e.props.color,theme:o});if(k){const E=document.createElementNS("http://www.w3.org/2000/svg","g");return E.appendChild(k),E.appendChild(w),E}return w}getCanvasSvgDefs(){return[VR()]}expandSelectionOutlinePx(e){const r=e.props.dash==="draw"?1.6:1;return Zo[e.props.size]*r/2}}T(T1,"type","draw"),T(T1,"props",xY),T(T1,"migrations",CY);function Y2(t,n){const e=(n+1)*.5;return`M ${t.x} ${t.y} m -${e}, 0 a ${e},${e} 0 1,0 ${e*2},0 a ${e},${e} 0 1,0 -${e*2},0`}function W2(t){return t.props.segments.length===1&&t.props.segments[0].points.length<2}function Uae(t,n,e={}){const{newPoint:r,handle:o,scaleX:a,scaleY:l}=n,{minWidth:u=1,maxWidth:d=1/0,minHeight:h=1,maxHeight:g=1/0}=e;let v=t.props.w*a,S=t.props.h*l;const w=new N(0,0);if(v>0){if(v<u){switch(o){case"top_left":case"left":case"bottom_left":{w.x=v-u;break}case"top":case"bottom":{w.x=(v-u)/2;break}default:w.x=0}v=u}}else if(w.x=v,v=-v,v<u){switch(o){case"top_left":case"left":case"bottom_left":{w.x=-v;break}default:w.x=-u}v=u}if(S>0){if(S<h){switch(o){case"top_left":case"top":case"top_right":{w.y=S-h;break}case"right":case"left":{w.y=(S-h)/2;break}default:w.y=0}S=h}}else if(w.y=S,S=-S,S<h){switch(o){case"top_left":case"top":case"top_right":{w.y=-S;break}default:w.y=-h}S=h}const{x:k,y:C}=w.rot(t.rotation).add(r);return{x:k,y:C,props:{w:Math.min(d,v),h:Math.min(g,S)}}}const Bae=t=>Object.entries(t).filter(([n,e])=>e).map(([n])=>n).join(" ");class k1 extends Vm{constructor(){super(...arguments);T(this,"hideSelectionBoundsFg",e=>!this.canResize(e));T(this,"canEdit",()=>!0);T(this,"canUnmount",e=>{var r,o;return!!((o=(r=td(e.props.url))==null?void 0:r.definition)!=null&&o.canUnmount)});T(this,"canResize",e=>{var r,o;return!!((o=(r=td(e.props.url))==null?void 0:r.definition)!=null&&o.doesResize)});T(this,"canEditInReadOnly",()=>!0);T(this,"isAspectRatioLocked",e=>{const r=td(e.props.url);return(r==null?void 0:r.definition.isAspectRatioLocked)??!1});T(this,"onResize",(e,r)=>{const o=this.isAspectRatioLocked(e),a=td(e.props.url);let l=(a==null?void 0:a.definition.minWidth)??200,u=(a==null?void 0:a.definition.minHeight)??200;if(o){const d=e.props.w/e.props.h;d>1?l*=d:u/=d}return Uae(e,r,{minWidth:l,minHeight:u})})}getDefaultProps(){return{w:300,h:300,url:""}}component(e){const{w:r,h:o,url:a}=e.props,l=VC(e.id),u=I.useMemo(()=>Wj(a),[a]),d=He("is hovering",()=>{const{editingShapeId:S,hoveredShapeId:w}=this.editor.getCurrentPageState();if(S&&w!==S){const k=this.editor.getShape(S);if(k&&this.editor.isShapeOfType(k,"embed"))return!0}return!1},[]),h=this.editor.getShapePageTransform(e).rotation(),g=l||d;if((u==null?void 0:u.definition.type)==="github_gist"){const S=u.url.split("/").pop();if(!S)throw Error("No gist id!");return x.jsx(ud,{className:"tl-embed-container",id:e.id,children:x.jsx(Hae,{id:S,width:oe(r),height:oe(o),isInteractive:g,pageRotation:h})})}const v=Bae({...EY,...(u==null?void 0:u.definition.overridePermissions)??{}});return x.jsx(ud,{className:"tl-embed-container",id:e.id,children:u!=null&&u.definition?x.jsx("iframe",{className:"tl-embed",sandbox:v,src:u.embedUrl,width:oe(r),height:oe(o),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",style:{border:0,pointerEvents:g?"auto":"none",zIndex:g?"":"-1",boxShadow:YR(h),borderRadius:(u==null?void 0:u.definition.overrideOutlineRadius)??8,background:u==null?void 0:u.definition.backgroundColor}}):null})}indicator(e){const r=I.useMemo(()=>td(e.props.url),[e.props.url]);return x.jsx("rect",{width:oe(e.props.w),height:oe(e.props.h),rx:(r==null?void 0:r.definition.overrideOutlineRadius)??8,ry:(r==null?void 0:r.definition.overrideOutlineRadius)??8})}}T(k1,"type","embed"),T(k1,"props",_Y),T(k1,"migrations",TY);function Hae({id:t,file:n,isInteractive:e,width:r,height:o,style:a,pageRotation:l}){return x.jsx("iframe",{className:"tl-embed",draggable:!1,width:oe(r),height:oe(o),frameBorder:"0",scrolling:"no",seamless:!0,referrerPolicy:"no-referrer-when-downgrade",style:{...a,pointerEvents:e?"all":"none",zIndex:e?"":"-1",boxShadow:YR(l)},srcDoc:`
			<html>
				<head>
					<base target="_blank">
				</head>
				<body>
					<script src=${`https://gist.github.com/${t}.js${n?`?file=${n}`:""}`}><\/script>
					<style type="text/css">
						* { margin: 0px; }
						table { height: 100%; background-color: red; }
						.gist { background-color: none; height: 100%;  }
						.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
					</style>
				</body>
			</html>`})}const Vae=I.forwardRef(({id:t,name:n,isEditing:e},r)=>{const o=Oe(),a=I.useCallback(d=>{d.key==="Enter"&&!d.nativeEvent.isComposing&&(eo(d),d.currentTarget.blur(),o.setEditingShape(null))},[o]),l=I.useCallback(d=>{const h=o.getShape(t);if(!h)return;const g=h.props.name,v=d.currentTarget.value.trim();g!==v&&o.updateShapes([{id:t,type:"frame",props:{name:v}}],{squashing:!0})},[t,o]),u=I.useCallback(d=>{const h=o.getShape(t);if(!h)return;const g=h.props.name,v=d.currentTarget.value;g!==v&&o.updateShapes([{id:t,type:"frame",props:{name:v}}],{squashing:!0})},[t,o]);return x.jsxs("div",{className:`tl-frame-label ${e?"tl-frame-label__editing":""}`,children:[x.jsx("input",{className:"tl-frame-name-input",ref:r,style:{display:e?void 0:"none"},value:n,autoFocus:!0,onKeyDown:a,onBlur:l,onChange:u}),Zj(n,"Frame")+String.fromCharCode(8203)]})}),Kae=function({id:n,name:e,width:r,height:o}){const a=Oe(),l=He("shape rotation",()=>Ql(a.getShapePageTransform(n).rotation()),[a,n]),u=VC(n),d=I.useRef(null),h=I.useCallback(k=>{const C=na(k);a.getEditingShapeId()!==n&&(a.dispatch({type:"pointer",name:"pointer_down",target:"shape",shape:a.getShape(n),...C}),k.preventDefault())},[a,n]);I.useEffect(()=>{const k=d.current;k&&u&&(k.focus(),k.select(),requestAnimationFrame(()=>{document.activeElement!==k&&(k.focus(),k.select())}))},[d,u]);const v=((l+Math.PI/4)*(2/Math.PI)+4)%4,S=["top","left","bottom","right"][Math.floor(v)];let w;switch(S){case"top":w="";break;case"right":w=`translate(${oe(r)}px, 0px) rotate(90deg)`;break;case"bottom":w=`translate(${oe(r)}px, ${oe(o)}px) rotate(180deg)`;break;case"left":w=`translate(0px, ${oe(o)}px) rotate(270deg)`;break}return x.jsx("div",{className:"tl-frame-heading",style:{overflow:u?"visible":"hidden",maxWidth:`calc(var(--tl-zoom) * ${Math.ceil(S==="top"||S==="bottom"?r:o)}px + var(--space-5))`,bottom:"100%",transform:`${w} scale(var(--tl-scale)) translateX(calc(-1 * var(--space-3))`},onPointerDown:h,children:x.jsx("div",{className:"tl-frame-heading-hit-area",children:x.jsx(Vae,{ref:d,id:n,name:e,isEditing:u})})})};function Zj(t,n){return t.match(/^\s*$/)?n:t}class P1 extends Vm{constructor(){super(...arguments);T(this,"canBind",()=>!0);T(this,"canEdit",()=>!0);T(this,"canReceiveNewChildrenOfType",(e,r)=>!e.isLocked);T(this,"canDropShapes",(e,r)=>!e.isLocked);T(this,"onDragShapesOver",(e,r)=>r.every(o=>o.parentId===e.id)?{shouldHint:!1}:(this.editor.reparentShapes(r.map(o=>o.id),e.id),{shouldHint:!0}));T(this,"onDragShapesOut",(e,r)=>{const o=this.editor.getShape(e.parentId);o&&this.editor.isShapeOfType(o,"group")?this.editor.reparentShapes(r,o.id):this.editor.reparentShapes(r,this.editor.getCurrentPageId())});T(this,"onResizeEnd",e=>{const r=this.editor.getShapePageBounds(e),o=this.editor.getSortedChildIdsForParent(e.id),a=[];for(const l of o){const u=this.editor.getShapePageBounds(l);r.includes(u)||a.push(l)}a.length>0&&this.editor.reparentShapes(a,this.editor.getCurrentPageId())});T(this,"onResize",(e,r)=>HC(e,r))}getDefaultProps(){return{w:160*2,h:90*2,name:""}}getGeometry(e){return new Qc({width:e.props.w,height:e.props.h,isFilled:!1})}component(e){const r=this.editor.getShapeGeometry(e).bounds,o=ro(),a=He("is creating this shape",()=>{var d;const l=this.editor.getStateDescendant("select.resizing");if(!l||!l.getIsActive())return!1;const u=l==null?void 0:l.info;return u?u.isCreating&&((d=this.editor.getOnlySelectedShape())==null?void 0:d.id)===e.id:!1},[e.id]);return x.jsxs(x.Fragment,{children:[x.jsx(Ca,{children:x.jsx("rect",{className:Wt("tl-frame__body",{"tl-frame__creating":a}),width:r.width,height:r.height,fill:o.solid,stroke:o.text})}),a?null:x.jsx(Kae,{id:e.id,name:e.props.name,width:r.width,height:r.height})]})}toSvg(e){const r=ns({isDarkMode:this.editor.user.getIsDarkMode()}),o=document.createElementNS("http://www.w3.org/2000/svg","g"),a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("width",e.props.w.toString()),a.setAttribute("height",e.props.h.toString()),a.setAttribute("fill",r.solid),a.setAttribute("stroke",r.black.solid),a.setAttribute("stroke-width","1"),a.setAttribute("rx","1"),a.setAttribute("ry","1"),o.appendChild(a);const d=((Ql(this.editor.getShapePageTransform(e.id).rotation())+Math.PI/4)*(2/Math.PI)+4)%4,h=["top","left","bottom","right"][Math.floor(d)];let g;switch(h){case"top":g="";break;case"right":g=`translate(${oe(e.props.w)}px, 0px) rotate(90deg)`;break;case"bottom":g=`translate(${oe(e.props.w)}px, ${oe(e.props.h)}px) rotate(180deg)`;break;case"left":g=`translate(0px, ${oe(e.props.h)}px) rotate(270deg)`;break;default:g=""}const v={fontSize:12,fontFamily:"Inter, sans-serif",textAlign:"start",width:e.props.w,height:32,padding:0,lineHeight:1,fontStyle:"normal",fontWeight:"normal",overflow:"truncate-ellipsis",verticalTextAlign:"middle"},S=this.editor.textMeasure.measureTextSpans(Zj(e.props.name,"Frame")+String.fromCharCode(8203),v),w=S[0],k=ea(S),C=k.box.w+k.box.x-w.box.x,E=QC(this.editor,S,{offsetY:-v.height-2,...v});E.style.setProperty("transform",g);const R=document.createElementNS("http://www.w3.org/2000/svg","rect");return R.setAttribute("x","-8px"),R.setAttribute("y",-v.height-4+"px"),R.setAttribute("width",C+16+"px"),R.setAttribute("height",`${v.height}px`),R.setAttribute("rx","4px"),R.setAttribute("ry","4px"),R.setAttribute("fill",r.background),o.appendChild(R),o.appendChild(E),o}indicator(e){const r=this.editor.getShapeGeometry(e).bounds;return x.jsx("rect",{width:oe(r.width),height:oe(r.height),className:"tl-frame-indicator"})}providesBackgroundForChildren(){return!0}}T(P1,"type","frame"),T(P1,"props",kY),T(P1,"migrations",PY);function Yae(t,n,e,r){if((t==="start-legacy"||t==="end-legacy")&&e.length!==0){const o=Mt.From(e[0].box);for(const{box:a}of e)o.union(a);if(t==="start-legacy")return(r-2*n-o.width)/2;if(t==="end-legacy")return-(r-2*n-o.width)/2}}function Wae(t){return t==="start-legacy"||t==="middle-legacy"||t==="end-legacy"}const Jj=ft.memo(function({id:n,type:e,text:r,size:o,labelColor:a,font:l,align:u,verticalAlign:d,wrap:h,bounds:g}){const{rInput:v,isEmpty:S,isEditing:w,handleFocus:k,handleChange:C,handleKeyDown:E,handleBlur:R,handleInputPointerDown:L,handleDoubleClick:A}=KR(n,e,r),O=kf.normalizeTextForDom(r),D=O.length>0,z=Wae(u),U=ro();return!w&&!D?null:x.jsx("div",{className:"tl-text-label","data-font":l,"data-align":u,"data-hastext":!S,"data-isediting":w,"data-textwrap":!!h,style:{justifyContent:u==="middle"||z?"center":u,alignItems:d==="middle"?"center":d,...g?{top:g.minY,left:g.minX,width:g.width,height:g.height,position:"absolute"}:{}},children:x.jsxs("div",{className:"tl-text-label__inner",style:{fontSize:$m[o],lineHeight:$m[o]*Po.lineHeight+"px",minHeight:Po.lineHeight+32,minWidth:0,color:U[a].solid},children:[x.jsx("div",{className:"tl-text tl-text-content",dir:"ltr",children:O}),w&&x.jsx("textarea",{ref:v,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:r,onFocus:k,onChange:C,onKeyDown:E,onBlur:R,onContextMenu:eo,onPointerDown:L,onDoubleClick:A})]})})});function eN({bounds:t,editor:n,font:e,shape:r}){const a={fontSize:$m[r.props.size],fontFamily:e,textAlign:r.props.align,verticalTextAlign:r.props.verticalAlign,width:Math.ceil(t.width),height:Math.ceil(t.height),padding:16,lineHeight:Po.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap",offsetX:0},l=n.textMeasure.measureTextSpans(r.props.text,a),u=Yae(r.props.align,16,l,t.width);return u&&(a.offsetX=u),QC(n,l,a)}function Yo(t){return`${oe(t.x)},${oe(t.y)} `}function tN(t=""){let n=0,e=0,r=0,o=0;function a(){const l=n^n<<11;return n=e,e=r,r=o,o^=(o>>>19^l^l>>>8)>>>0,o/4294967296*2}for(let l=0;l<t.length+64;l++)n^=t.charCodeAt(l)|0,a();return a}function ZS(t){let n="M";const e=t.length;let r,o,a;for(let l=0,u=e;l<u;l+=3)r=t[l],o=t[l+1],a=t[l+2],n+=`${Yo(r)}L${Yo(o)}Q${Yo(a)}`;return n+=`${Yo(t[0])}`,n}function JS(t,n,e,r,o){const a=[],l=tN(t);let u=n[0],d;const h=n.length;for(let g=0,v=h*o;g<v;g++){d=N.AddXY(n[(g+1)%h],l()*e,l()*e);const S=N.Sub(d,u),w=N.Len(S),k=N.Div(S,w).mul(Math.min(w/4,r));a.push(N.Add(u,k),N.Add(d,k.neg()),d),u=d}return a}function G2(t,n,e){let r=`M ${Yo(n[0])}L`,o=`M ${Yo(n[0])}L`;const a=e/3,l=e*2,u=tN(t);let d=n[0],h,g=n[0],v;const S=n.length;for(let w=0,k=S-1;w<k;w++){h=n[w+1],v=N.AddXY(n[w+1],u()*a,u()*a);const C=N.Sub(h,d),E=N.Len(C),R=N.Div(C,E).mul(Math.min(E/4,l)),L=N.Add(d,R),A=N.Add(h,R.neg()),O=N.Sub(v,g),D=N.Len(O),z=N.Div(O,D).mul(Math.min(D/4,l)),U=N.Add(g,z),Y=N.Add(v,z.neg());w===k-1?(r+=`${Yo(L)}L ${Yo(h)}`,o+=`${Yo(U)}L ${Yo(v)}`):(r+=`${Yo(L)}L ${Yo(A)}Q ${Yo(h)}`,o+=`${Yo(U)}L ${Yo(Y)}Q ${Yo(v)}`,d=h,g=v)}return[r,r+o]}function r5(t,n){const e=Math.min(t,n)/2,r=Math.max(t,n)-e*2;return Math.PI*(e*2)+2*r}function Gae(t,n,e){const r=Math.min(t,n)/2,o=Math.max(t,n)-r*2,l=(Math.PI*(r*2)+2*o)/e,u=t>n?[{type:"straight",start:new N(r,0),delta:new N(1,0)},{type:"arc",center:new N(t-r,r),startAngle:-Jn/2},{type:"straight",start:new N(t-r,n),delta:new N(-1,0)},{type:"arc",center:new N(r,r),startAngle:Jn/2}]:[{type:"straight",start:new N(t,r),delta:new N(0,1)},{type:"arc",center:new N(r,n-r),startAngle:0},{type:"straight",start:new N(0,n-r),delta:new N(0,-1)},{type:"arc",center:new N(r,r),startAngle:Jn}];let d=0;const h=[];for(let g=0;g<e;g++){const v=u[0];v.type==="straight"?h.push(N.Add(v.start,N.Mul(v.delta,d))):h.push(KL(v.center.x,v.center.y,r,v.startAngle+d/r)),d+=l;let S=v.type==="straight"?o:Jn*r;for(;d>S;)d-=S,u.push(u.shift()),S=u[0].type==="straight"?o:Jn*r}return h}const Xae=(t,n,e,r,o)=>{switch(t){case"s":return n;case"m":return e;case"l":return r;case"xl":return o}};function k0(t,n,e,r){const o=_f(e),a=r5(t,n),l=Math.max(Math.ceil(a/Xae(r,50,70,100,130)),6,Math.ceil(a/Math.min(t,n))),u=a/l*.2,d=Math.max(t-u*2,1),h=Math.max(n-u*2,1),g=(t-d)/2,v=(n-h)/2,S=r5(d,h)/l,w=Gae(d,h,l).map(L=>L.addXY(g,v)),k=t<20?0:u*.3,C=n<20?0:u*.3,E=w.slice(0);for(let L=0;L<Math.floor(l/2);L++)E[L]=N.AddXY(E[L],o()*k,o()*C),E[l-L-1]=N.AddXY(E[l-L-1],o()*k,o()*C);const R=[];for(let L=0;L<E.length;L++){const A=L===E.length-1?0:L+1,O=E[L],D=E[A],z=w[L],U=w[A],Y=N.Average([z,U]),q=N.Angle(z,U)-Math.PI/2,X=N.Dist(z,U),ie=S-X,ae=N.Dist(O,D)/X,te=(Math.max(g,v)+ie)*ae,he=N.Add(Y,N.FromAngle(q,te));he.x<0?he.x=0:he.x>t&&(he.x=t),he.y<0?he.y=0:he.y>n&&(he.y=n);const ce=nN(O,D,he),ge=N.Dist(ce||N.Average([O,D]),O);R.push({leftPoint:O,rightPoint:D,arcPoint:he,center:ce,radius:ge})}return R}function nN(t,n,e){const r=t.x*(n.y-e.y)-t.y*(n.x-e.x)+n.x*e.y-e.x*n.y,o=(t.x*t.x+t.y*t.y)*(e.y-n.y)+(n.x*n.x+n.y*n.y)*(t.y-e.y)+(e.x*e.x+e.y*e.y)*(n.y-t.y),a=(t.x*t.x+t.y*t.y)*(n.x-e.x)+(n.x*n.x+n.y*n.y)*(e.x-t.x)+(e.x*e.x+e.y*e.y)*(t.x-n.x),l=-o/(2*r),u=-a/(2*r);return!Number.isFinite(l)||!Number.isFinite(u)?null:new N(l,u)}function qae(t,n,e,r){const o=[],a=k0(t,n,e,r);for(const{center:l,radius:u,leftPoint:d,rightPoint:h}of a)o.push(...Qae(d,h,l,u,10));return o}function P0(t,n,e,r){const o=k0(t,n,e,r);let a=`M${oe(o[0].leftPoint.x)},${oe(o[0].leftPoint.y)}`;for(const{leftPoint:l,rightPoint:u,radius:d,center:h}of o){if(h===null){a+=` L${oe(u.x)},${oe(u.y)}`;continue}const g=iN(l,u,h)?"0":"1";a+=` A${oe(d)},${oe(d)} 0 ${g},1 ${oe(u.x)},${oe(u.y)}`}return a+=" Z",a}function rN(t,n,e,r){const o=_f(e),a=r==="s"?.5:r==="m"?.7:r==="l"?.9:1.6,l=k=>k+o()*a*2,u=k0(t,n,e,r),g=u.reduce((k,C)=>k+N.Dist(C.leftPoint,C.rightPoint),0)/u.length>a*15?k=>new N(l(k.x),l(k.y)):k=>k;let v=`M${oe(u[0].leftPoint.x)},${oe(u[0].leftPoint.y)}`,S=g(u[0].leftPoint),w=`M${oe(S.x)},${oe(S.y)}`;for(const{leftPoint:k,center:C,rightPoint:E,radius:R,arcPoint:L}of u){if(C===null){v+=` L${oe(E.x)},${oe(E.y)}`;const Y=g(E);w+=` L${oe(Y.x)},${oe(Y.y)}`,S=Y;continue}const A=iN(k,E,C)?"0":"1";v+=` A${oe(R)},${oe(R)} 0 ${A},1 ${oe(E.x)},${oe(E.y)}`;const O=g(E),D=g(L),z=nN(S,O,D);if(!z){w+=` L${oe(O.x)},${oe(O.y)}`,S=O;continue}const U=Math.abs(N.Dist(z,S));w+=` A${oe(U)},${oe(U)} 0 ${A},1 ${oe(O.x)},${oe(O.y)}`,S=O}return v+w+" Z"}function Qae(t,n,e,r,o){if(e===null)return[N.From(t),N.From(n)];const a=[],l=N.Angle(e,t),u=N.Angle(e,n),d=LC(l,u);for(let h=0;h<o;h++){const g=h/(o-1),v=l+d*g,S=KL(e.x,e.y,r,v);a.push(S)}return a}function iN(t,n,e){return(n.x-t.x)*(e.y-t.y)-(n.y-t.y)*(e.x-t.x)>0}const Zae=I.memo(function({dash:n,fill:e,color:r,strokeWidth:o,w:a,h:l,id:u,size:d}){const h=ro(),g=P0(a,l,u,d),v=k0(a,l,u,d);return x.jsxs(x.Fragment,{children:[x.jsx(di,{theme:h,d:g,fill:e,color:r}),x.jsx("g",{strokeWidth:o,stroke:h[r].solid,fill:"none",pointerEvents:"all",children:v.map(({leftPoint:S,rightPoint:w,center:k,radius:C},E)=>{const R=k?C*Ql(Ql(N.Angle(k,w))-Ql(N.Angle(k,S))):N.Dist(S,w),{strokeDasharray:L,strokeDashoffset:A}=ts(R,o,{style:n,start:"outset",end:"outset"});return x.jsx("path",{d:k?`M${S.x},${S.y}A${C},${C},0,0,1,${w.x},${w.y}`:`M${S.x},${S.y}L${w.x},${w.y}`,strokeDasharray:L,strokeDashoffset:A},E)})})]})});function Jae({dash:t,fill:n,color:e,theme:r,strokeWidth:o,w:a,h:l,id:u,size:d}){const h=P0(a,l,u,d),g=k0(a,l,u,d),v=document.createElementNS("http://www.w3.org/2000/svg","g");v.setAttribute("stroke-width",o.toString()),v.setAttribute("stroke",r[e].solid),v.setAttribute("fill","none");for(const{leftPoint:w,rightPoint:k,center:C,radius:E}of g){const R=C?E*Ql(Ql(N.Angle(C,k))-Ql(N.Angle(C,w))):N.Dist(w,k),{strokeDasharray:L,strokeDashoffset:A}=ts(R,o,{style:t,start:"outset",end:"outset"}),O=document.createElementNS("http://www.w3.org/2000/svg","path");O.setAttribute("d",C?`M${w.x},${w.y}A${E},${E},0,0,1,${k.x},${k.y}`:`M${w.x},${w.y}L${k.x},${k.y}`),O.setAttribute("stroke-dasharray",L.toString()),O.setAttribute("stroke-dashoffset",A.toString()),v.appendChild(O)}const S=Aa({d:h,fill:n,color:e,theme:r});return ec(v,S)}const ele=I.memo(function({w:n,h:e,strokeWidth:r,dash:o,color:a,fill:l}){const u=ro(),d=n/2,h=e/2,g=Math.max(0,d),v=Math.max(0,h),S=YS(g,v),{strokeDasharray:w,strokeDashoffset:k}=ts(S<64?S*2:S,r,{style:o,snap:4,closed:!0}),C=`M${d-g},${h}a${g},${v},0,1,1,${g*2},0a${g},${v},0,1,1,-${g*2},0`;return x.jsxs(x.Fragment,{children:[x.jsx(di,{theme:u,d:C,color:a,fill:l}),x.jsx("path",{d:C,strokeWidth:r,width:oe(n),height:oe(e),fill:"none",stroke:u[a].solid,strokeDasharray:w,strokeDashoffset:k,pointerEvents:"all"})]})});function tle({w:t,h:n,strokeWidth:e,dash:r,color:o,theme:a,fill:l}){const u=t/2,d=n/2,h=Math.max(0,u-e/2),g=Math.max(0,d-e/2),v=YS(h,g),{strokeDasharray:S,strokeDashoffset:w}=ts(v<64?v*2:v,e,{style:r,snap:4,closed:!0}),k=`M${u-h},${d}a${h},${g},0,1,1,${h*2},0a${h},${g},0,1,1,-${h*2},0`,C=document.createElementNS("http://www.w3.org/2000/svg","path");C.setAttribute("d",k),C.setAttribute("stroke-width",e.toString()),C.setAttribute("width",t.toString()),C.setAttribute("height",n.toString()),C.setAttribute("fill","none"),C.setAttribute("stroke",a[o].solid),C.setAttribute("stroke-dasharray",S),C.setAttribute("stroke-dashoffset",w);const E=Aa({d:k,fill:l,color:o,theme:a});return ec(C,E)}function oN(t,n){if(n>t){const r=t/2;return`
    M0,${r}
    a${r},${r},0,1,1,${r*2},0
    L${t},${n-r}
    a${r},${r},0,1,1,-${r*2},0
    Z`}const e=n/2;return`
    M${e},0
    L${t-e},0
    a${e},${e},0,1,1,0,${e*2}
    L${e},${n}
    a${e},${e},0,1,1,0,${-e*2}
    Z`}function sN(t,n){if(t>n){const r=n/2;return YS(r,r)+(t-r*2)*2}const e=t/2;return YS(e,e)+(n-e*2)*2}const nle=I.memo(function({w:n,h:e,strokeWidth:r,dash:o,color:a,fill:l}){const u=ro(),d=oN(n,e),h=sN(n,e),{strokeDasharray:g,strokeDashoffset:v}=ts(h<64?h*2:h,r,{style:o,snap:4,start:"outset",end:"outset",closed:!0});return x.jsxs(x.Fragment,{children:[x.jsx(di,{theme:u,d,color:a,fill:l}),x.jsx("path",{d,strokeWidth:r,width:oe(n),height:oe(e),fill:"none",stroke:u[a].solid,strokeDasharray:g,strokeDashoffset:v,pointerEvents:"all"})]})});function i5({w:t,h:n,strokeWidth:e,dash:r,color:o,theme:a,fill:l}){const u=oN(t,n),d=sN(t,n),{strokeDasharray:h,strokeDashoffset:g}=ts(d<64?d*2:d,e,{style:r,snap:4,closed:!0}),v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d",u),v.setAttribute("stroke-width",e.toString()),v.setAttribute("width",t.toString()),v.setAttribute("height",n.toString()),v.setAttribute("fill","none"),v.setAttribute("stroke",a[o].solid),v.setAttribute("stroke-dasharray",h),v.setAttribute("stroke-dashoffset",g);const S=Aa({d:u,fill:l,color:o,theme:a});return ec(v,S)}const rle=I.memo(function({dash:n,fill:e,color:r,strokeWidth:o,outline:a,lines:l}){const u=ro(),d="M"+a[0]+"L"+a.slice(1)+"Z";return x.jsxs(x.Fragment,{children:[x.jsx(di,{theme:u,d,fill:e,color:r}),x.jsxs("g",{strokeWidth:o,stroke:u[r].solid,fill:"none",pointerEvents:"all",children:[Array.from(Array(a.length)).map((h,g)=>{const v=a[g],S=a[(g+1)%a.length],w=N.Dist(v,S),{strokeDasharray:k,strokeDashoffset:C}=ts(w,o,{style:n,start:"outset",end:"outset"});return x.jsx("line",{x1:v.x,y1:v.y,x2:S.x,y2:S.y,strokeDasharray:k,strokeDashoffset:C},g)}),l&&l.map(([h,g],v)=>{const S=N.Dist(h,g),{strokeDasharray:w,strokeDashoffset:k}=ts(S,o,{style:n,start:"skip",end:"outset",snap:n==="dotted"?4:void 0});return x.jsx("path",{d:`M${h.x},${h.y}L${g.x},${g.y}`,stroke:u[r].solid,strokeWidth:o,fill:"none",strokeDasharray:w,strokeDashoffset:k},`line_fg_${v}`)})]})]})});function ile({dash:t,fill:n,color:e,theme:r,strokeWidth:o,outline:a,lines:l}){const u=document.createElementNS("http://www.w3.org/2000/svg","g");if(u.setAttribute("stroke-width",o.toString()),u.setAttribute("stroke",r[e].solid),u.setAttribute("fill","none"),Array.from(Array(a.length)).forEach((h,g)=>{const v=a[g],S=a[(g+1)%a.length],w=N.Dist(v,S),{strokeDasharray:k,strokeDashoffset:C}=ts(w,o,{style:t}),E=document.createElementNS("http://www.w3.org/2000/svg","line");E.setAttribute("x1",v.x.toString()),E.setAttribute("y1",v.y.toString()),E.setAttribute("x2",S.x.toString()),E.setAttribute("y2",S.y.toString()),E.setAttribute("stroke-dasharray",k.toString()),E.setAttribute("stroke-dashoffset",C.toString()),u.appendChild(E)}),l)for(const[h,g]of l){const v=N.Dist(h,g),{strokeDasharray:S,strokeDashoffset:w}=ts(v,o,{style:t,start:"skip",end:"skip",snap:t==="dotted"?4:2}),k=document.createElementNS("http://www.w3.org/2000/svg","line");k.setAttribute("x1",h.x.toString()),k.setAttribute("y1",h.y.toString()),k.setAttribute("x2",g.x.toString()),k.setAttribute("y2",g.y.toString()),k.setAttribute("stroke-dasharray",S.toString()),k.setAttribute("stroke-dashoffset",w.toString()),u.appendChild(k)}const d=Aa({d:"M"+a[0]+"L"+a.slice(1)+"Z",fill:n,color:e,theme:r});return ec(u,d)}const ole=I.memo(function({fill:n,color:e,strokeWidth:r,w:o,h:a,id:l,size:u}){const d=ro(),h=rN(o,a,l,u);return x.jsxs(x.Fragment,{children:[x.jsx(di,{theme:d,d:h,fill:n,color:e}),x.jsx("path",{d:h,stroke:d[e].solid,strokeWidth:r,fill:"none"})]})});function sle({fill:t,color:n,strokeWidth:e,theme:r,w:o,h:a,id:l,size:u}){const d=rN(o,a,l,u),h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("d",d),h.setAttribute("stroke-width",e.toString()),h.setAttribute("stroke",r[n].solid),h.setAttribute("fill","none");const g=Aa({d,fill:t,color:n,theme:r});return ec(h,g)}I.memo(function({id:n,w:e,h:r,strokeWidth:o,fill:a,color:l}){const u=ro(),d=WR(n,e,r,o),h=cN(n,e,r,o);return x.jsxs(x.Fragment,{children:[x.jsx(di,{theme:u,d,color:l,fill:a}),x.jsx("path",{d:h,fill:u[l].solid,strokeWidth:0,pointerEvents:"all"})]})});function ale({id:t,w:n,h:e,strokeWidth:r,fill:o,color:a,theme:l}){const u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("d",cN(t,n,e,r)),u.setAttribute("fill",l[a].solid);const d=Aa({d:WR(t,n,e,r),fill:o,color:a,theme:l});return ec(u,d)}function aN(t){return{size:1+t,thinning:.25,end:{taper:t},start:{taper:t},streamline:0,smoothing:1,simulatePressure:!1}}function lN(t,n,e,r){const o=_f(t),a=n/2,l=e/2,u=YS(a,l),d=[],h=or*o(),g=or+Pr/2+Math.abs(o())*Pr,v=Math.max(16,u/10);for(let S=0;S<v;S++){const w=S/(v-1),k=h+w*g,C=Math.cos(k),E=Math.sin(k);d.push(new N(a*C+n*.5+.05*o(),l*E+e/2+.05*o(),Math.min(1,.5+Math.abs(.5-(o()>0?Jo.easeInOutSine(w):Jo.easeInExpo(w)))/2)))}return Wl(d,aN(r))}function cN(t,n,e,r){const o=aN(r);return m0(_0(Xm(lN(t,n,e,r),o),o))}function WR(t,n,e,r){return Ef(lN(t,n,e,r))}const lle=I.memo(function({id:n,outline:e,lines:r,fill:o,color:a,strokeWidth:l}){const u=ro(),d=JS(n,e,l/3,l*2,2);let h=ZS(d);if(r)for(const[S,w]of r)h+=`M${S.x},${S.y}L${w.x},${w.y}`;const g=JS(n,e,0,l*2,1),v=ZS(g);return x.jsxs(x.Fragment,{children:[x.jsx(di,{d:v,fill:o,color:a,theme:u}),x.jsx("path",{d:h,stroke:u[a].solid,strokeWidth:l,fill:"none"})]})});function cle({id:t,outline:n,lines:e,fill:r,color:o,theme:a,strokeWidth:l}){const u=JS(t,n,l/3,l*2,2);let d=ZS(u);if(e)for(const[w,k]of e)d+=`M${w.x},${w.y}L${k.x},${k.y}`;const h=JS(t,n,0,l*2,1),g=ZS(h),v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d",d),v.setAttribute("fill","none"),v.setAttribute("stroke",a[o].solid),v.setAttribute("stroke-width",l.toString());const S=Aa({d:g,fill:r,color:o,theme:a});return ec(v,S)}const ule=I.memo(function({fill:n,color:e,strokeWidth:r,w:o,h:a,id:l,size:u}){const d=ro(),h=P0(o,a,l,u);return x.jsxs(x.Fragment,{children:[x.jsx(di,{theme:d,d:h,fill:n,color:e}),x.jsx("path",{d:h,stroke:d[e].solid,strokeWidth:r,fill:"none"})]})});function dle({fill:t,color:n,strokeWidth:e,theme:r,w:o,h:a,id:l,size:u}){const d=P0(o,a,l,u),h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("d",d),h.setAttribute("stroke-width",e.toString()),h.setAttribute("stroke",r[n].solid),h.setAttribute("fill","none");const g=Aa({d,fill:t,color:n,theme:r});return ec(h,g)}const o5=I.memo(function({w:n,h:e,strokeWidth:r,fill:o,color:a}){const l=ro(),u=n/2,d=e/2,h=Math.max(0,u),g=Math.max(0,d),v=`M${u-h},${d}a${h},${g},0,1,1,${h*2},0a${h},${g},0,1,1,-${h*2},0`;return x.jsxs(x.Fragment,{children:[x.jsx(di,{d:v,color:a,fill:o,theme:l}),x.jsx("path",{d:v,stroke:l[a].solid,strokeWidth:r,fill:"none"})]})});function fle({w:t,h:n,strokeWidth:e,fill:r,color:o,theme:a}){const l=t/2,u=n/2,d=Math.max(0,l),h=Math.max(0,u),g=`M${l-d},${u}a${d},${h},0,1,1,${d*2},0a${d},${h},0,1,1,-${d*2},0`,v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d",g),v.setAttribute("stroke-width",e.toString()),v.setAttribute("width",t.toString()),v.setAttribute("height",n.toString()),v.setAttribute("fill","none"),v.setAttribute("stroke",a[o].solid);const S=Aa({d:g,fill:r,color:o,theme:a});return ec(v,S)}const s5=I.memo(function({w:n,h:e,strokeWidth:r,fill:o,color:a}){const l=ro(),u=GR(n,e);return x.jsxs(x.Fragment,{children:[x.jsx(di,{d:u,color:a,fill:o,theme:l}),x.jsx("path",{d:u,stroke:l[a].solid,strokeWidth:r,fill:"none"})]})});function hle({w:t,h:n,strokeWidth:e,fill:r,color:o,theme:a}){const l=GR(t,n),u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("d",l),u.setAttribute("stroke-width",e.toString()),u.setAttribute("width",t.toString()),u.setAttribute("height",n.toString()),u.setAttribute("fill","none"),u.setAttribute("stroke",a[o].solid);const d=Aa({d:l,fill:r,color:o,theme:a});return ec(u,d)}function GR(t,n){let e;if(n>t){const r=t/2;e=`
    M0,${r}
    a${r},${r},0,1,1,${r*2},0
    L${t},${n-r}
    a${r},${r},0,1,1,-${r*2},0
    Z`}else{const r=n/2;e=`
    M${r},0
    L${t-r},0
    a${r},${r},0,1,1,0,${r*2}
    L${r},${n}
    a${r},${r},0,1,1,0,${-r*2}
    Z`}return e}const ple=I.memo(function({outline:n,lines:e,fill:r,color:o,strokeWidth:a}){const l=ro();let u="M"+n[0]+"L"+n.slice(1)+"Z";if(e)for(const[d,h]of e)u+=`M${d.x},${d.y}L${h.x},${h.y}`;return x.jsxs(x.Fragment,{children:[x.jsx(di,{d:u,fill:r,color:o,theme:l}),x.jsx("path",{d:u,stroke:l[o].solid,strokeWidth:a,fill:"none"})]})});function gle({outline:t,lines:n,fill:e,color:r,strokeWidth:o,theme:a}){const l="M"+t[0]+"L"+t.slice(1)+"Z",u=l;let d=l;if(n)for(const[v,S]of n)d+=`M${v.x},${v.y}L${S.x},${S.y}`;const h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("d",d),h.setAttribute("stroke-width",o.toString()),h.setAttribute("stroke",a[r].solid),h.setAttribute("fill","none");const g=Aa({d:u,fill:e,color:r,theme:a});return ec(h,g)}const X2=16,nl=17*3;class I1 extends Vm{constructor(){super(...arguments);T(this,"canEdit",()=>!0);T(this,"onEditEnd",e=>{const{id:r,type:o,props:{text:a}}=e;a.trimEnd()!==e.props.text&&this.editor.updateShapes([{id:r,type:o,props:{text:a.trimEnd()}}])});T(this,"onResize",(e,{handle:r,newPoint:o,scaleX:a,scaleY:l,initialShape:u})=>{let d=u.props.w*a,h=(u.props.h+u.props.growY)*l,g=0,v=0;if(e.props.text.trim()){let C=Math.max(Math.abs(d),nl),E=Math.max(Math.abs(h),nl);C<nl&&E===nl&&(C=nl),C===nl&&E<nl&&(E=nl);const R=Kx(this.editor,{...e,props:{...e.props,w:C,h:E}}),L=Math.max(Math.abs(d),R.w)*Math.sign(d),A=Math.max(Math.abs(h),R.h)*Math.sign(h);g=Math.abs(L)-Math.abs(d),v=Math.abs(A)-Math.abs(h),d=L,h=A}const S=new N(0,0);a<0&&(S.x+=d),(r==="left"||r==="top_left"||r==="bottom_left")&&(S.x+=a<0?g:-g),l<0&&(S.y+=h),(r==="top"||r==="top_left"||r==="top_right")&&(S.y+=l<0?v:-v);const{x:w,y:k}=S.rot(e.rotation).add(o);return{x:w,y:k,props:{w:Math.max(Math.abs(d),1),h:Math.max(Math.abs(h),1),growY:0}}});T(this,"onBeforeCreate",e=>{if(!e.props.text)return e.props.growY?{...e,props:{...e.props,growY:0}}:void 0;const r=e.props.h,o=Kx(this.editor,e).h;let a=null;if(o>r?a=o-r:e.props.growY&&(a=0),a!==null)return{...e,props:{...e.props,growY:a}}});T(this,"onBeforeUpdate",(e,r)=>{const o=e.props.text,a=r.props.text;if(o===a&&e.props.font===r.props.font&&e.props.size===r.props.size)return;if(o&&!a)return{...r,props:{...r.props,growY:0}};const l=e.props.w,u=e.props.h,d=Kx(this.editor,r),h=d.w,g=d.h;if(!o&&a&&a.length===1){let S=Math.max(l,h),w=Math.max(u,g);return e.props.w<nl&&e.props.h<nl&&(S=Math.max(S,nl),w=Math.max(w,nl),S=Math.max(S,w),w=Math.max(S,w)),{...r,props:{...r.props,w:S,h:w,growY:0}}}let v=null;if(g>u?v=g-u:e.props.growY&&(v=0),v!==null)return{...r,props:{...r.props,growY:v,w:Math.max(r.props.w,h)}};if(h>e.props.w)return{...r,props:{...r.props,w:h}}});T(this,"onDoubleClick",e=>{if(this.editor.inputs.altKey)switch(e.props.geo){case"rectangle":return{...e,props:{geo:"check-box"}};case"check-box":return{...e,props:{geo:"rectangle"}}}})}getDefaultProps(){return{w:100,h:100,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"draw",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:""}}getGeometry(e){const r=Math.max(1,e.props.w),o=Math.max(1,e.props.h+e.props.growY),a=r/2,l=o/2,u=Zo[e.props.size],d=e.props.fill!=="none";let h;switch(e.props.geo){case"cloud":{h=new Ji({points:qae(r,o,e.id,e.props.size),isFilled:d});break}case"triangle":{h=new Ji({points:[new N(a,0),new N(r,o),new N(0,o)],isFilled:d});break}case"diamond":{h=new Ji({points:[new N(a,0),new N(r,l),new N(a,o),new N(0,l)],isFilled:d});break}case"pentagon":{h=new Ji({points:o2(r,o,5),isFilled:d});break}case"hexagon":{h=new Ji({points:o2(r,o,6),isFilled:d});break}case"octagon":{h=new Ji({points:o2(r,o,8),isFilled:d});break}case"ellipse":{h=new U4({width:r,height:o,isFilled:d});break}case"oval":{h=new mJ({width:r,height:o,isFilled:d});break}case"star":{const E=or/5/2,R=Math.floor(5/4)*2,L=5*2-R,A=0,O=Math.floor(5/2)*2,D=Math.cos(-Pr+R*E)*r/2,z=Math.cos(-Pr+L*E)*r/2,U=Math.sin(-Pr+A*E)*o/2,Y=Math.sin(-Pr+O*E)*o/2,q=r-Math.abs(D-z),X=o-Math.abs(Y-U),ie=r/2+z-(r/2-D),pe=o/2+U-(o/2-Y),ae=1,te=(r-ie)/2,he=(o-pe)/2,ce=(r+q)/2,ge=(o+X)/2,me=ce*ae/2,we=ge*ae/2;h=new Ji({points:Array.from(Array(5*2)).map((V,Z)=>{const Ce=-Pr+Z*E;return new N(te+(Z%2?me:ce)*Math.cos(Ce),he+(Z%2?we:ge)*Math.sin(Ce))}),isFilled:d});break}case"rhombus":{const C=Math.min(r*.38,o*.38);h=new Ji({points:[new N(C,0),new N(r,0),new N(r-C,o),new N(0,o)],isFilled:d});break}case"rhombus-2":{const C=Math.min(r*.38,o*.38);h=new Ji({points:[new N(0,0),new N(r-C,0),new N(r,o),new N(C,o)],isFilled:d});break}case"trapezoid":{const C=Math.min(r*.38,o*.38);h=new Ji({points:[new N(C,0),new N(r-C,0),new N(r,o),new N(0,o)],isFilled:d});break}case"arrow-right":{const C=Math.min(r,o)*.38,E=o*.16;h=new Ji({points:[new N(0,E),new N(r-C,E),new N(r-C,0),new N(r,o/2),new N(r-C,o),new N(r-C,o-E),new N(0,o-E)],isFilled:d});break}case"arrow-left":{const C=Math.min(r,o)*.38,E=o*.16;h=new Ji({points:[new N(C,0),new N(C,E),new N(r,E),new N(r,o-E),new N(C,o-E),new N(C,o),new N(0,o/2)],isFilled:d});break}case"arrow-up":{const C=r*.16,E=Math.min(r,o)*.38;h=new Ji({points:[new N(r/2,0),new N(r,E),new N(r-C,E),new N(r-C,o),new N(C,o),new N(C,E),new N(0,E)],isFilled:d});break}case"arrow-down":{const C=r*.16,E=Math.min(r,o)*.38;h=new Ji({points:[new N(C,0),new N(r-C,0),new N(r-C,o-E),new N(r,o-E),new N(r/2,o),new N(0,o-E),new N(C,o-E)],isFilled:d});break}case"check-box":case"x-box":case"rectangle":{h=new Qc({width:r,height:o,isFilled:d,isSnappable:!0});break}}const g=Kx(this.editor,e),v=Math.min(r,Math.max(g.w,Math.min(32,Math.max(1,r-8)))),S=Math.min(o,Math.max(g.h,Math.min(32,Math.max(1,r-8)))),w=Yx(e.props,u),k=w?w.map(C=>new op({points:C})):[];return new wf({children:[h,new Qc({x:e.props.align==="start"?0:e.props.align==="end"?r-v:(r-v)/2,y:e.props.verticalAlign==="start"?0:e.props.verticalAlign==="end"?o-S:(o-S)/2,width:v,height:S,isFilled:!0,isSnappable:!1,isLabel:!0}),...k],isSnappable:!1})}component(e){const{id:r,type:o,props:a}=e,l=Zo[a.size],{w:u,color:d,labelColor:h,fill:g,dash:v,growY:S,font:w,align:k,verticalAlign:C,size:E,text:R}=a,L=()=>{const A=a.h+S;switch(a.geo){case"cloud":{if(v==="solid")return x.jsx(ule,{color:d,fill:g,strokeWidth:l,w:u,h:A,id:r,size:E});if(v==="dashed"||v==="dotted")return x.jsx(Zae,{color:d,fill:g,strokeWidth:l,w:u,h:A,id:r,size:E,dash:v});if(v==="draw")return x.jsx(ole,{color:d,fill:g,strokeWidth:l,w:u,h:A,id:r,size:E});break}case"ellipse":{if(v==="solid")return x.jsx(o5,{strokeWidth:l,w:u,h:A,color:d,fill:g});if(v==="dashed"||v==="dotted")return x.jsx(ele,{id:r,strokeWidth:l,w:u,h:A,dash:v,color:d,fill:g});if(v==="draw")return x.jsx(o5,{strokeWidth:l,w:u,h:A,color:d,fill:g});break}case"oval":{if(v==="solid")return x.jsx(s5,{strokeWidth:l,w:u,h:A,color:d,fill:g});if(v==="dashed"||v==="dotted")return x.jsx(nle,{id:r,strokeWidth:l,w:u,h:A,dash:v,color:d,fill:g});if(v==="draw")return x.jsx(s5,{strokeWidth:l,w:u,h:A,color:d,fill:g});break}default:{const O=this.editor.getShapeGeometry(e),D=O instanceof wf?O.children[0].vertices:O.vertices,z=Yx(e.props,l);if(v==="solid")return x.jsx(ple,{fill:g,color:d,strokeWidth:l,outline:D,lines:z});if(v==="dashed"||v==="dotted")return x.jsx(rle,{dash:v,fill:g,color:d,strokeWidth:l,outline:D,lines:z});if(v==="draw")return x.jsx(lle,{id:r,fill:g,color:d,strokeWidth:l,outline:D,lines:z})}}};return x.jsxs(x.Fragment,{children:[x.jsx(Ca,{id:r,children:L()}),x.jsxs(ud,{id:e.id,style:{overflow:"hidden",width:e.props.w,height:e.props.h+a.growY},children:[x.jsx(Jj,{id:r,type:o,font:w,fill:g,size:E,align:k,verticalAlign:C,text:R,labelColor:h,wrap:!0,bounds:a.geo==="cloud"?this.getGeometry(e).bounds:void 0}),e.props.url&&x.jsx(T0,{url:e.props.url,zoomLevel:this.editor.getZoomLevel()})]})]})}indicator(e){const{id:r,props:o}=e,{w:a,size:l}=o,u=o.h+o.growY,d=Zo[l];switch(o.geo){case"ellipse":return o.dash==="draw"?x.jsx("path",{d:WR(r,a,u,d)}):x.jsx("ellipse",{cx:a/2,cy:u/2,rx:a/2,ry:u/2});case"oval":return x.jsx("path",{d:GR(a,u)});case"cloud":return x.jsx("path",{d:P0(a,u,r,l)});default:{const h=this.editor.getShapeGeometry(e),g=h instanceof wf?h.children[0].vertices:h.vertices;let v;if(o.dash==="draw"){const w=JS(r,g,0,d*2,1);v=ZS(w)}else v="M"+g[0]+"L"+g.slice(1)+"Z";const S=Yx(e.props,d);if(S)for(const[w,k]of S)v+=`M${w.x},${w.y}L${k.x},${k.y}`;return x.jsx("path",{d:v})}}}toSvg(e,r){const{id:o,props:a}=e,l=Zo[a.size],u=ns({isDarkMode:this.editor.user.getIsDarkMode()});r.addExportDef(HR(e.props.fill,u));let d;switch(a.geo){case"ellipse":{switch(a.dash){case"draw":d=ale({id:o,w:a.w,h:a.h,color:a.color,fill:a.fill,strokeWidth:l,theme:u});break;case"solid":d=fle({strokeWidth:l,w:a.w,h:a.h,color:a.color,fill:a.fill,theme:u});break;default:d=tle({id:o,strokeWidth:l,w:a.w,h:a.h,dash:a.dash,color:a.color,fill:a.fill,theme:u});break}break}case"oval":{switch(a.dash){case"draw":d=i5({id:o,strokeWidth:l,w:a.w,h:a.h,dash:a.dash,color:a.color,fill:a.fill,theme:u});break;case"solid":d=hle({strokeWidth:l,w:a.w,h:a.h,color:a.color,fill:a.fill,theme:u});break;default:d=i5({id:o,strokeWidth:l,w:a.w,h:a.h,dash:a.dash,color:a.color,fill:a.fill,theme:u})}break}case"cloud":{switch(a.dash){case"draw":d=sle({id:o,strokeWidth:l,w:a.w,h:a.h,color:a.color,fill:a.fill,size:a.size,theme:u});break;case"solid":d=dle({strokeWidth:l,w:a.w,h:a.h,color:a.color,fill:a.fill,size:a.size,id:o,theme:u});break;default:d=Jae({id:o,strokeWidth:l,w:a.w,h:a.h,dash:a.dash,color:a.color,fill:a.fill,theme:u,size:a.size})}break}default:{const h=this.editor.getShapeGeometry(e),g=h instanceof wf?h.children[0].vertices:h.vertices,v=Yx(e.props,l);switch(a.dash){case"draw":d=cle({id:o,fill:a.fill,color:a.color,strokeWidth:l,outline:g,lines:v,theme:u});break;case"solid":d=gle({fill:a.fill,color:a.color,strokeWidth:l,outline:g,lines:v,theme:u});break;default:d=ile({dash:a.dash,fill:a.fill,color:a.color,strokeWidth:l,outline:g,lines:v,theme:u});break}break}}if(a.text){const h=this.editor.getShapeGeometry(e).bounds;r.addExportDef(ZC(e.props.font));const g=eN({editor:this.editor,shape:e,font:f0[e.props.font],bounds:h}),v=g.cloneNode(!0);v.setAttribute("fill",u[e.props.labelColor].solid),v.setAttribute("stroke","none");const S=g.cloneNode(!0);S.setAttribute("stroke-width","2"),S.setAttribute("fill",u.background),S.setAttribute("stroke",u.background);const w=document.createElementNS("http://www.w3.org/2000/svg","g");if(w.append(S),w.append(v),d.nodeName==="g")return d.appendChild(w),d;{const k=document.createElementNS("http://www.w3.org/2000/svg","g");return k.appendChild(d),k.appendChild(w),k}}return d}getCanvasSvgDefs(){return[VR()]}}T(I1,"type","geo"),T(I1,"props",IY),T(I1,"migrations",RY);function Kx(t,n){const e=n.props.text;if(!e)return{w:0,h:0};const r=t.textMeasure.measureText("w",{...Po,fontFamily:sd[n.props.font],fontSize:$m[n.props.size],maxWidth:100}),o={s:2,m:3.5,l:5,xl:10},a=t.textMeasure.measureText(e,{...Po,fontFamily:sd[n.props.font],fontSize:$m[n.props.size],minWidth:r.w+"px",maxWidth:Math.max(0,Math.ceil(r.w+o[n.props.size]),Math.ceil(n.props.w-X2*2))});return{w:a.w+X2*2,h:a.h+X2*2}}function Yx(t,n){switch(t.geo){case"x-box":return mle(t.w,t.h,n,t.dash);case"check-box":return vle(t.w,t.h);default:return}}function mle(t,n,e,r){const o=r==="draw"?.62:0;if(r==="dashed")return[[new N(0,0),new N(t/2,n/2)],[new N(t,n),new N(t/2,n/2)],[new N(0,n),new N(t/2,n/2)],[new N(t,0),new N(t/2,n/2)]];const a=u=>Math.max(0,Math.min(t,u)),l=u=>Math.max(0,Math.min(n,u));return[[new N(a(e*o),l(e*o)),new N(a(t-e*o),l(n-e*o))],[new N(a(e*o),l(n-e*o)),new N(a(t-e*o),l(e*o))]]}function vle(t,n){const e=Math.min(t,n)*.82,r=(t-e)/2,o=(n-e)/2,a=u=>Math.max(0,Math.min(t,u)),l=u=>Math.max(0,Math.min(n,u));return[[new N(a(r+e*.25),l(o+e*.52)),new N(a(r+e*.45),l(o+e*.82))],[new N(a(r+e*.45),l(o+e*.82)),new N(a(r+e*.82),l(o+e*.22))]]}function yle(){const[t,n]=I.useState(!1);return I.useEffect(()=>{const r=CSS.supports("color","color(display-p3 1 1 1)"),o=matchMedia("(color-gamut: p3)");n(r&&o.matches);const a=()=>n(r&&o.matches);return o.addEventListener("change",a),()=>o.removeEventListener("change",a)},[]),He(kr.forceSrgb)||!t?"srgb":"p3"}const a5=.35,l5=.82;class R1 extends Pa{constructor(){super(...arguments);T(this,"hideResizeHandles",e=>Wx(e));T(this,"hideRotateHandle",e=>Wx(e));T(this,"hideSelectionBoundsFg",e=>Wx(e));T(this,"onResize",(e,r)=>{const{scaleX:o,scaleY:a}=r,l=[];for(const u of e.props.segments)l.push({...u,points:u.points.map(({x:d,y:h,z:g})=>({x:o*d,y:a*h,z:g}))});return{props:{segments:l}}})}getDefaultProps(){return{segments:[],color:"black",size:"m",isComplete:!1,isPen:!1}}getGeometry(e){const r=am(e);if(Wx(e))return new F4({x:-r/2,y:-r/2,radius:r/2,isFilled:!0});const{strokePoints:o,sw:a}=uN(e,r,!0),l=gI({strokeWidth:a,showAsComplete:!0});return Xm(o,l),new Ji({points:_0(o,l),isFilled:!0})}component(e){return x.jsx(c5,{strokeWidth:am(e),shape:e,opacity:a5})}backgroundComponent(e){return x.jsx(c5,{strokeWidth:am(e),shape:e,opacity:l5})}indicator(e){var v;const r=CC(),o=am(e),a=bm(e.props.segments);let l=o;!r&&!e.props.isPen&&a.length===1&&(l+=_f(e.id)()*(o/6));const u=e.props.isComplete||((v=ea(e.props.segments))==null?void 0:v.type)==="straight",d=gI({strokeWidth:o,showAsComplete:u}),h=Wl(a,d);let g;return h.length<2?g=ble(a[0],l):g=Ef(h,!1),x.jsx("path",{d:g})}toSvg(e){const r=ns({isDarkMode:this.editor.user.getIsDarkMode()});return u5(am(e),e,a5,r)}toBackgroundSvg(e){const r=ns({isDarkMode:this.editor.user.getIsDarkMode()});return u5(am(e),e,l5,r)}}T(R1,"type","highlight"),T(R1,"props",$Y),T(R1,"migrations",OY);function Sle(t){return`M ${t.x} ${t.y} m -${.1}, 0 a ${.1},${.1} 0 1,0 ${.1*2},0 a ${.1},${.1} 0 1,0 -${.1*2},0`}function ble(t,n){const e=n/2;return`M ${t.x} ${t.y} m -${e}, 0 a ${e},${e} 0 1,0 ${e*2},0 a ${e},${e} 0 1,0 -${e*2},0`}function uN(t,n,e){var d;const r=bm(t.props.segments),o=t.props.isComplete||((d=ea(t.props.segments))==null?void 0:d.type)==="straight";let a=n;!e&&!t.props.isPen&&r.length===1&&(a+=_f(t.id)()*(n/6));const l=gI({strokeWidth:a,showAsComplete:o});return{strokePoints:Wl(r,l),sw:a}}function dN(t,n,e){const{strokePoints:r,sw:o}=uN(t,n,e);return{solidStrokePath:r.length>1?Ef(r,!1):Sle(t.props.segments[0].points[0]),sw:o}}function c5({strokeWidth:t,shape:n,opacity:e}){const r=ro(),o=CC(),{solidStrokePath:a,sw:l}=dN(n,t,o),u=yle(),d=r[n.props.color].highlight[u];return x.jsx(Ca,{id:n.id,style:{opacity:e},children:x.jsx("path",{d:a,strokeLinecap:"round",fill:"none",pointerEvents:"all",stroke:d,strokeWidth:l})})}function u5(t,n,e,r){const{solidStrokePath:o,sw:a}=dN(n,t,!1),l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("d",o),l.setAttribute("fill","none"),l.setAttribute("stroke",r[n.props.color].highlight.srgb),l.setAttribute("stroke-width",`${a}`),l.setAttribute("opacity",`${e}`),l}function am(t){return Cf[t.props.size]*1.12}function Wx(t){return t.props.segments.length===1&&t.props.segments[0].points.length<2}function fN(){const[t,n]=I.useState(!1);return I.useEffect(()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)"),r=()=>{n(e.matches)};return r(),e.addEventListener("change",r),()=>e.removeEventListener("change",r)},[]),t}const wle=async t=>new Promise((n,e)=>{const r=new Image;r.onload=()=>n(r),r.onerror=()=>e(new Error("Failed to load image")),r.crossOrigin="anonymous",r.src=t}),xle=async t=>{const n=await wle(t),e=document.createElement("canvas");e.width=n.width,e.height=n.height;const r=e.getContext("2d");if(r)return r.drawImage(n,0,0),e.toDataURL()};async function Cle(t){const e=await(await fetch(t)).blob();return new Promise((r,o)=>{const a=new FileReader;a.onloadend=()=>r(a.result),a.onerror=o,a.readAsDataURL(e)})}class M1 extends Vm{constructor(){super(...arguments);T(this,"isAspectRatioLocked",()=>!0);T(this,"canCrop",()=>!0);T(this,"onDoubleClick",e=>{const r=e.props.assetId?this.editor.getAsset(e.props.assetId):void 0;!r||!(r.props.src&&"mimeType"in r.props&&r.props.mimeType==="image/gif")||this.editor.updateShapes([{type:"image",id:e.id,props:{playing:!e.props.playing}}])});T(this,"onDoubleClickEdge",e=>{const r=e.props;if(!r||this.editor.getCroppingShapeId()!==e.id)return;const o=es(r.crop)||{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},a=1/(o.bottomRight.x-o.topLeft.x)*e.props.w,l=1/(o.bottomRight.y-o.topLeft.y)*e.props.h,u=new N(o.topLeft.x*a,o.topLeft.y*l).rot(e.rotation),d={id:e.id,type:e.type,x:e.x-u.x,y:e.y-u.y,props:{crop:{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},w:a,h:l}};this.editor.updateShapes([d])})}getDefaultProps(){return{w:100,h:100,assetId:null,playing:!0,url:"",crop:null}}component(e){var S,w;const r=d5(e),o=WD(e.id),a=fN(),[l,u]=I.useState(""),d=e.props.assetId?this.editor.getAsset(e.props.assetId):void 0;if((d==null?void 0:d.type)==="bookmark")throw Error("Bookmark assets can't be rendered as images");const g=He("onlySelectedShape",()=>{var k;return e.id===((k=this.editor.getOnlySelectedShape())==null?void 0:k.id)},[this.editor])&&o&&this.editor.isInAny("select.crop","select.cropping","select.pointing_crop_handle"),v=a&&(((S=d==null?void 0:d.props.mimeType)==null?void 0:S.includes("video"))||((w=d==null?void 0:d.props.mimeType)==null?void 0:w.includes("gif")));return I.useEffect(()=>{if(d!=null&&d.props.src&&"mimeType"in d.props&&(d==null?void 0:d.props.mimeType)==="image/gif"){let k=!1;return(async()=>{const E=await xle(d.props.src);k||E&&u(E)})(),()=>{k=!0}}},[a,d==null?void 0:d.props]),x.jsxs(x.Fragment,{children:[(d==null?void 0:d.props.src)&&g&&x.jsx("div",{style:r,children:x.jsx("div",{className:"tl-image",style:{opacity:.1,backgroundImage:`url(${!e.props.playing||v?l:d.props.src})`},draggable:!1})}),x.jsxs(ud,{id:e.id,style:{overflow:"hidden",width:e.props.w,height:e.props.h},children:[x.jsxs("div",{className:"tl-image-container",style:r,children:[d!=null&&d.props.src?x.jsx("div",{className:"tl-image",style:{backgroundImage:`url(${!e.props.playing||v?l:d.props.src})`},draggable:!1}):null,(d==null?void 0:d.props.isAnimated)&&!e.props.playing&&x.jsx("div",{className:"tl-image__tg",children:"GIF"})]}),"url"in e.props&&e.props.url&&x.jsx(T0,{url:e.props.url,zoomLevel:this.editor.getZoomLevel()})]})]})}indicator(e){return WD(e.id)?null:x.jsx("rect",{width:oe(e.props.w),height:oe(e.props.h)})}async toSvg(e){const r=document.createElementNS("http://www.w3.org/2000/svg","g"),o=e.props.assetId?this.editor.getAsset(e.props.assetId):null;let a=(o==null?void 0:o.props.src)||"";a&&a.startsWith("http")&&(a=await Cle(a)||"");const l=document.createElementNS("http://www.w3.org/2000/svg","image");l.setAttributeNS("http://www.w3.org/1999/xlink","href",a);const u=d5(e),d=e.props.crop;if(u.transform&&d){const{transform:h,width:g,height:v}=u,S=(d.bottomRight.x-d.topLeft.x)*g,w=(d.bottomRight.y-d.topLeft.y)*v,k=[new N(0,0),new N(S,0),new N(S,w),new N(0,w)],C=document.createElementNS("http://www.w3.org/2000/svg","polygon");C.setAttribute("points",k.map(A=>`${A.x},${A.y}`).join(" "));const E=document.createElementNS("http://www.w3.org/2000/svg","clipPath");E.setAttribute("id","cropClipPath"),E.appendChild(C);const R=document.createElementNS("http://www.w3.org/2000/svg","defs");R.appendChild(E),r.appendChild(R);const L=document.createElementNS("http://www.w3.org/2000/svg","g");L.setAttribute("clip-path","url(#cropClipPath)"),l.setAttribute("width",g.toString()),l.setAttribute("height",v.toString()),l.style.transform=h,L.appendChild(l),r.appendChild(L)}else l.setAttribute("width",e.props.w.toString()),l.setAttribute("height",e.props.h.toString()),r.appendChild(l);return r}}T(M1,"type","image"),T(M1,"props",LY),T(M1,"migrations",jY);function d5(t){const n=t.props.crop,e=n==null?void 0:n.topLeft;if(!e)return{width:t.props.w,height:t.props.h};const r=1/(n.bottomRight.x-n.topLeft.x)*t.props.w,o=1/(n.bottomRight.y-n.topLeft.y)*t.props.h,a=-e.x*r,l=-e.y*o;return{transform:`translate(${a}px, ${l}px)`,width:r,height:o}}function mI(t,n){const{start:e,end:r}=t;return n?`M${oe(e.x)},${oe(e.y)} L${oe(r.x)},${oe(r.y)} `:`${oe(r.x)},${oe(r.y)} `}function vI(t,n){const{a:e,b:r,c:o,d:a}=t;return N.Equals(e,a)?"":`${n?`M${oe(e.x)},${oe(e.y)}`:""}C${oe(r.x)},${oe(r.y)} ${oe(o.x)},${oe(o.y)} ${oe(a.x)},${oe(a.y)}`}function hN(t,n){let e=t.segments.reduce((r,o,a)=>r+vI(o,a===0),"");return n&&(e+="Z"),e}function Ele(t,n){let e=t.segments.reduce((r,o,a)=>r+mI(o,a===0),"");return n&&(e+="Z"),e}function pN(t,n=!1){return t instanceof op?Ele(t,n):hN(t,n)}function gN(t){return{size:t,thinning:.4,streamline:0,smoothing:.5,simulatePressure:!0,last:!0}}function mN(t,n,e){const r=n.vertices,o=gN(e);return Wl(r,o)}function _le(t,n,e){const r=gN(e);return _0(Xm(mN(t,n,e),r),r)}function f5(t,n,e){const r=_le(t,n,e);return m0(r)}function Tle(t,n,e){if(t.props.dash==="draw"){const r=mN(t,n,e);return Ef(r)}return pN(n)}const kle=new gR;class A1 extends Pa{constructor(){super(...arguments);T(this,"hideResizeHandles",()=>!0);T(this,"hideRotateHandle",()=>!0);T(this,"hideSelectionBoundsFg",()=>!0);T(this,"hideSelectionBoundsBg",()=>!0);T(this,"onResize",(e,r)=>{const{scaleX:o,scaleY:a}=r,l=es(e.props.handles);return Object.values(e.props.handles).forEach(({id:u,x:d,y:h})=>{l[u].x=d*o,l[u].y=h*a}),{props:{handles:l}}});T(this,"onHandleChange",(e,{handle:r})=>{const o=es(e);switch(r.id){case"start":case"end":{o.props.handles[r.id]={...o.props.handles[r.id],x:r.x,y:r.y};break}default:{const a="handle:"+r.index,l=e.props.handles[a];l?o.props.handles[a]={...l,x:r.x,y:r.y}:o.props.handles[a]={id:a,type:"vertex",canBind:!1,index:r.index,x:r.x,y:r.y};break}}return o})}getDefaultProps(){return{dash:"draw",size:"m",color:"black",spline:"line",handles:{start:{id:"start",type:"vertex",canBind:!1,canSnap:!0,index:"a1",x:0,y:0},end:{id:"end",type:"vertex",canBind:!1,canSnap:!0,index:"a2",x:.1,y:.1}}}}getGeometry(e){return wS(e)}getHandles(e){return kle.get(e.props,()=>{const r=e.props.handles,o=wS(e),a=Object.values(r).sort(qo),l=a.slice();for(let u=0;u<o.segments.length;u++){const h=o.segments[u].midPoint(),g=LS(a[u].index,a[u+1].index);l.push({id:`mid-${u}`,type:"create",index:g,x:h.x,y:h.y})}return l.sort(qo)})}getOutlineSegments(e){return this.editor.getShapeGeometry(e).segments.map(o=>o.vertices)}component(e){const r=ro(),o=wS(e),a=Zo[e.props.size],{dash:l,color:u}=e.props;if(e.props.spline==="line"){if(l==="solid"){const d=o.points,h="M"+d[0]+"L"+d.slice(1);return x.jsxs(Ca,{id:e.id,children:[x.jsx(di,{d:h,fill:"none",color:u,theme:r}),x.jsx("path",{d:h,stroke:r[u].solid,strokeWidth:a,fill:"none"})]})}if(l==="dashed"||l==="dotted"){const d=o.points,h="M"+d[0]+"L"+d.slice(1);return x.jsxs(Ca,{id:e.id,children:[x.jsx(di,{d:h,fill:"none",color:u,theme:r}),x.jsx("g",{stroke:r[u].solid,strokeWidth:a,children:o.segments.map((g,v)=>{const{strokeDasharray:S,strokeDashoffset:w}=ts(g.length,a,{style:l,start:v>0?"outset":"none",end:v<o.segments.length-1?"outset":"none"});return x.jsx("path",{strokeDasharray:S,strokeDashoffset:w,d:mI(g,!0),fill:"none"},v)})})]})}if(l==="draw"){const d=o.points,[h,g]=G2(e.id,d,a);return x.jsxs(Ca,{id:e.id,children:[x.jsx(di,{d:h,fill:"none",color:u,theme:r}),x.jsx("path",{d:g,stroke:r[u].solid,strokeWidth:a,fill:"none"})]})}}if(e.props.spline==="cubic"){const d=pN(o);if(l==="solid")return x.jsxs(Ca,{id:e.id,children:[x.jsx(di,{d,fill:"none",color:u,theme:r}),x.jsx("path",{strokeWidth:a,stroke:r[u].solid,fill:"none",d})]});if(l==="dashed"||l==="dotted")return x.jsxs(Ca,{id:e.id,children:[x.jsx(di,{d,fill:"none",color:u,theme:r}),x.jsx("g",{stroke:r[u].solid,strokeWidth:a,children:o.segments.map((h,g)=>{const{strokeDasharray:v,strokeDashoffset:S}=ts(h.length,a,{style:l,start:g>0?"outset":"none",end:g<o.segments.length-1?"outset":"none"});return x.jsx("path",{strokeDasharray:v,strokeDashoffset:S,d:vI(h,!0),fill:"none"},g)})})]});if(l==="draw")return x.jsxs(Ca,{id:e.id,children:[x.jsx(di,{d,fill:"none",color:u,theme:r}),x.jsx("path",{d:f5(e,o,a),strokeWidth:1,stroke:r[u].solid,fill:r[u].solid})]})}}indicator(e){const r=Zo[e.props.size],o=wS(e),{dash:a}=e.props;let l;if(e.props.spline==="line"){const u=o.points;if(a==="solid"||a==="dotted"||a==="dashed")l="M"+u[0]+"L"+u.slice(1);else{const[d]=G2(e.id,u,r);l=d}}else l=Tle(e,o,r);return x.jsx("path",{d:l})}toSvg(e){const o=ns({isDarkMode:this.editor.user.getIsDarkMode()})[e.props.color].solid,a=wS(e),l=Zo[e.props.size];switch(e.props.dash){case"draw":{let u;if(a instanceof h1)u=f5(e,a,l);else{const[h,g]=G2(e.id,a.points,l);u=g}const d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("stroke-width",l+"px"),d.setAttribute("stroke",o),d.setAttribute("fill","none"),d.setAttribute("d",u),d}case"solid":{let u;if(a instanceof h1)u=hN(a,!1);else{const h=a.points;u="M"+h[0]+"L"+h.slice(1)}const d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("stroke-width",l+"px"),d.setAttribute("stroke",o),d.setAttribute("fill","none"),d.setAttribute("d",u),d}default:{const{segments:u}=a,d=document.createElementNS("http://www.w3.org/2000/svg","g");d.setAttribute("stroke",o),d.setAttribute("stroke-width",l.toString());const h=a instanceof h1?vI:mI;return u.forEach((g,v)=>{const S=document.createElementNS("http://www.w3.org/2000/svg","path"),{strokeDasharray:w,strokeDashoffset:k}=ts(g.length,l,{style:e.props.dash,start:v>0?"outset":"none",end:v<u.length-1?"outset":"none"});S.setAttribute("stroke-dasharray",w.toString()),S.setAttribute("stroke-dashoffset",k.toString()),S.setAttribute("d",h(g,!0)),S.setAttribute("fill","none"),d.appendChild(S)}),d}}}}T(A1,"type","line"),T(A1,"props",FY),T(A1,"migrations",UY);function wS(t){const{spline:n,handles:e}=t.props,r=Object.values(e).sort(qo).map(N.From);switch(n){case"cubic":return new h1({points:r});case"line":return new op({points:r})}}const Ju=200;class $1 extends Pa{constructor(){super(...arguments);T(this,"canEdit",()=>!0);T(this,"hideResizeHandles",()=>!0);T(this,"hideSelectionBoundsFg",()=>!0);T(this,"onBeforeCreate",e=>h5(this.editor,e,e.props.growY));T(this,"onBeforeUpdate",(e,r)=>{if(!(e.props.text===r.props.text&&e.props.font===r.props.font&&e.props.size===r.props.size))return h5(this.editor,r,e.props.growY)});T(this,"onEditEnd",e=>{const{id:r,type:o,props:{text:a}}=e;a.trimEnd()!==e.props.text&&this.editor.updateShapes([{id:r,type:o,props:{text:a.trimEnd()}}])})}getDefaultProps(){return{color:"black",size:"m",text:"",font:"draw",align:"middle",verticalAlign:"middle",growY:0,url:""}}getHeight(e){return Ju+e.props.growY}getGeometry(e){const r=this.getHeight(e);return new Qc({width:Ju,height:r,isFilled:!0})}component(e){const{id:r,type:o,props:{color:a,font:l,size:u,align:d,text:h,verticalAlign:g}}=e,v=ro(),S=a==="black"?"yellow":a;return x.jsxs(x.Fragment,{children:[x.jsx("div",{style:{position:"absolute",width:Ju,height:this.getHeight(e)},children:x.jsxs("div",{className:"tl-note__container",style:{color:v[S].solid,backgroundColor:v[S].solid},children:[x.jsx("div",{className:"tl-note__scrim"}),x.jsx(Jj,{id:r,type:o,font:l,size:u,align:d,verticalAlign:g,text:h,labelColor:"black",wrap:!0})]})}),"url"in e.props&&e.props.url&&x.jsx(T0,{url:e.props.url,zoomLevel:this.editor.getZoomLevel()})]})}indicator(e){return x.jsx("rect",{rx:"7",width:oe(Ju),height:oe(this.getHeight(e))})}toSvg(e,r){r.addExportDef(ZC(e.props.font));const o=ns({isDarkMode:this.editor.user.getIsDarkMode()}),a=this.editor.getShapeGeometry(e).bounds,l=document.createElementNS("http://www.w3.org/2000/svg","g"),u=e.props.color==="black"?"yellow":e.props.color,d=document.createElementNS("http://www.w3.org/2000/svg","rect");d.setAttribute("rx","10"),d.setAttribute("width",Ju.toString()),d.setAttribute("height",a.height.toString()),d.setAttribute("fill",o[u].solid),d.setAttribute("stroke",o[u].solid),d.setAttribute("stroke-width","1"),l.appendChild(d);const h=document.createElementNS("http://www.w3.org/2000/svg","rect");h.setAttribute("rx","10"),h.setAttribute("width",Ju.toString()),h.setAttribute("height",a.height.toString()),h.setAttribute("fill",o.background),h.setAttribute("opacity",".28"),l.appendChild(h);const g=eN({editor:this.editor,shape:e,font:f0[e.props.font],bounds:a});return g.setAttribute("fill",o.text),g.setAttribute("stroke","none"),l.appendChild(g),l}}T($1,"type","note"),T($1,"props",BY),T($1,"migrations",HY);function h5(t,n,e=0){const a=t.textMeasure.measureText(n.props.text,{...Po,fontFamily:sd[n.props.font],fontSize:$m[n.props.size],maxWidth:Ju-34}).h+17*2;let l=null;if(a>Ju?l=a-Ju:e&&(l=0),l!==null)return{...n,props:{...n.props,growY:l}}}function Ple(t,{initialBounds:n,scaleX:e,scaleY:r,newPoint:o}){const a=Math.max(.01,Math.min(Math.abs(e),Math.abs(r))),l=new N(0,0);e<0&&(l.x=-(n.width*a)),r<0&&(l.y=-(n.height*a));const{x:u,y:d}=N.Add(o,l.rot(t.rotation));return{x:u,y:d,props:{scale:a*t.props.scale}}}const Ile=new gR;class O1 extends Pa{constructor(){super(...arguments);T(this,"canEdit",()=>!0);T(this,"isAspectRatioLocked",()=>!0);T(this,"onResize",(e,r)=>{const{initialBounds:o,initialShape:a,scaleX:l,handle:u}=r;if(r.mode==="scale_shape"||u!=="right"&&u!=="left")return{id:e.id,type:e.type,...Ple(e,r)};{const d=o.width;let h=d*l;const g=new N(0,0);h=Math.max(1,Math.abs(h)),u==="left"?(g.x=d-h,l<0&&(g.x+=h)):l<0&&(g.x-=h);const{x:v,y:S}=g.rot(e.rotation).add(a);return{id:e.id,type:e.type,x:v,y:S,props:{w:h/a.props.scale,autoSize:!1}}}});T(this,"onBeforeCreate",e=>{if(!e.props.autoSize||e.props.text.trim())return;const r=this.getMinDimensions(e);return{...e,x:e.x-r.width/2,y:e.y-r.height/2}});T(this,"onEditEnd",e=>{const{id:r,type:o,props:{text:a}}=e,l=e.props.text.trimEnd();l.length===0?this.editor.deleteShapes([e.id]):l!==e.props.text&&this.editor.updateShapes([{id:r,type:o,props:{text:a.trimEnd()}}])});T(this,"onBeforeUpdate",(e,r)=>{if(!r.props.autoSize)return;const o=e.props.size!==r.props.size||e.props.align!==r.props.align||e.props.font!==r.props.font||e.props.scale!==1&&r.props.scale===1,a=e.props.text!==r.props.text;if(!o&&!a)return;const l=this.getMinDimensions(e),u=p5(this.editor,r.props),d=l.width*e.props.scale,h=l.height*e.props.scale,g=u.width*r.props.scale,v=u.height*r.props.scale;let S;switch(r.props.align){case"middle":{S=new N((g-d)/2,a?0:(v-h)/2);break}case"end":{S=new N(g-d,a?0:(v-h)/2);break}default:{if(a)break;S=new N(0,(v-h)/2);break}}if(S){S.rot(r.rotation);const{x:w,y:k}=r;return{...r,x:w-S.x,y:k-S.y,props:{...r.props,w:g}}}else return{...r,props:{...r.props,w:g}}});T(this,"onDoubleClickEdge",e=>{if(!e.props.autoSize)return{id:e.id,type:e.type,props:{autoSize:!0}};if(e.props.scale!==1)return{id:e.id,type:e.type,props:{scale:1}}})}getDefaultProps(){return{color:"black",size:"m",w:8,text:"",font:"draw",align:"middle",autoSize:!0,scale:1}}getMinDimensions(e){return Ile.get(e.props,r=>p5(this.editor,r))}getGeometry(e){const{scale:r}=e.props,{width:o,height:a}=this.getMinDimensions(e);return new Qc({width:o*r,height:a*r,isFilled:!0})}component(e){const{id:r,type:o,props:{text:a,color:l}}=e,u=ns({isDarkMode:this.editor.user.getIsDarkMode()}),{width:d,height:h}=this.getMinDimensions(e),{rInput:g,isEmpty:v,isEditing:S,handleFocus:w,handleChange:k,handleKeyDown:C,handleBlur:E,handleInputPointerDown:R,handleDoubleClick:L}=KR(r,o,a);return x.jsx(ud,{id:e.id,children:x.jsxs("div",{className:"tl-text-shape__wrapper tl-text-shadow","data-font":e.props.font,"data-align":e.props.align,"data-hastext":!v,"data-isediting":S,"data-textwrap":!0,style:{fontSize:Cf[e.props.size],lineHeight:Cf[e.props.size]*Po.lineHeight+"px",transform:`scale(${e.props.scale})`,transformOrigin:"top left",width:Math.max(1,d),height:Math.max(Cf[e.props.size]*Po.lineHeight,h),color:u[l].solid},children:[x.jsx("div",{className:"tl-text tl-text-content",dir:"ltr",children:a}),S?x.jsx("textarea",{ref:g,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:S,placeholder:"",spellCheck:"true",wrap:"off",dir:"ltr",datatype:"wysiwyg",defaultValue:a,onFocus:w,onChange:k,onKeyDown:C,onBlur:E,onTouchEnd:eo,onContextMenu:eo,onPointerDown:R,onDoubleClick:L}):null]})})}indicator(e){const r=this.editor.getShapeGeometry(e).bounds,o=Oe();return e.props.autoSize&&o.getEditingShapeId()===e.id?null:x.jsx("rect",{width:oe(r.width),height:oe(r.height)})}toSvg(e,r){r.addExportDef(ZC(e.props.font));const o=ns({isDarkMode:this.editor.user.getIsDarkMode()}),a=this.editor.getShapeGeometry(e).bounds,l=e.props.text,u=a.width/(e.props.scale??1),d=a.height/(e.props.scale??1),h={fontSize:Cf[e.props.size],fontFamily:f0[e.props.font],textAlign:e.props.align,verticalTextAlign:"middle",width:u,height:d,padding:0,lineHeight:Po.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap"},g=o[e.props.color].solid,v=document.createElementNS("http://www.w3.org/2000/svg","g"),S=QC(this.editor,this.editor.textMeasure.measureTextSpans(l,h),{...h,stroke:o.background,strokeWidth:2,fill:o.background,padding:0}),w=S.cloneNode(!0);return w.setAttribute("fill",g),w.setAttribute("stroke","none"),v.append(S),v.append(w),v}}T(O1,"type","text"),T(O1,"props",VY),T(O1,"migrations",KY);function p5(t,n){const{font:e,text:r,autoSize:o,size:a,w:l}=n,u=o?16:Math.max(16,l),d=Cf[a],h=o?null:Math.floor(Math.max(u,l)),g=t.textMeasure.measureText(r,{...Po,fontFamily:sd[e],fontSize:d,maxWidth:h});return o&&(g.w+=1),{width:Math.max(u,g.w),height:Math.max(d,g.h)}}class D1 extends Vm{constructor(){super(...arguments);T(this,"canEdit",()=>!0);T(this,"isAspectRatioLocked",()=>!0)}getDefaultProps(){return{w:100,h:100,assetId:null,time:0,playing:!0,url:""}}component(e){return x.jsx(Mle,{shape:e,videoUtil:this})}indicator(e){return x.jsx("rect",{width:oe(e.props.w),height:oe(e.props.h)})}toSvg(e){const r=document.createElementNS("http://www.w3.org/2000/svg","g"),o=document.createElementNS("http://www.w3.org/2000/svg","image");return o.setAttributeNS("http://www.w3.org/1999/xlink","href",Rle(e.id)),o.setAttribute("width",e.props.w.toString()),o.setAttribute("height",e.props.h.toString()),r.appendChild(o),r}}T(D1,"type","video"),T(D1,"props",YY),T(D1,"migrations",WY);function Rle(t){const n=t.split(":")[1],e=document.querySelector(`.tl-video-shape-${n}`);if(e){const r=document.createElement("canvas");return r.width=e.videoWidth,r.height=e.videoHeight,r.getContext("2d").drawImage(e,0,0),r.toDataURL("image/png")}else throw new Error("Video with id "+n+" not found")}const Mle=sr(function(n){const{shape:e,videoUtil:r}=n,o=r.editor.getShapeGeometry(e).bounds.w*r.editor.getZoomLevel()>=110,a=e.props.assetId?r.editor.getAsset(e.props.assetId):null,{time:l,playing:u}=e.props,d=VC(e.id),h=fN(),g=ft.useRef(null),v=ft.useCallback(R=>{const L=R.currentTarget;r.editor.updateShapes([{type:"video",id:e.id,props:{playing:!0,time:L.currentTime}}])},[e.id,r.editor]),S=ft.useCallback(R=>{const L=R.currentTarget;r.editor.updateShapes([{type:"video",id:e.id,props:{playing:!1,time:L.currentTime}}])},[e.id,r.editor]),w=ft.useCallback(R=>{const L=R.currentTarget;d&&r.editor.updateShapes([{type:"video",id:e.id,props:{time:L.currentTime}}])},[d,e.id,r.editor]),[k,C]=ft.useState(!1),E=ft.useCallback(R=>{const L=R.currentTarget;l!==L.currentTime&&(L.currentTime=l),u||L.pause(),C(!0)},[u,l]);return ft.useEffect(()=>{const R=g.current;R&&(k&&!d&&l!==R.currentTime&&(R.currentTime=l),d&&document.activeElement!==R&&R.focus())},[d,k,l]),ft.useEffect(()=>{if(h){const R=g.current;R.pause(),R.currentTime=0}},[g,h]),x.jsxs(x.Fragment,{children:[x.jsx(ud,{id:e.id,children:x.jsx("div",{className:"tl-counter-scaled",children:a!=null&&a.props.src?x.jsx("video",{ref:g,style:d?{pointerEvents:"all"}:void 0,className:`tl-video tl-video-shape-${e.id.split(":")[1]}`,width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:!0,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:d&&o,onPlay:v,onPause:S,onTimeUpdate:w,onLoadedData:E,hidden:!k,children:x.jsx("source",{src:a.props.src})}):null})}),"url"in e.props&&e.props.url&&x.jsx(T0,{url:e.props.url,zoomLevel:r.editor.getZoomLevel()})]})}),Ale=[O1,_1,T1,I1,$1,A1,P1,E1,R1,k1,M1,D1];function $le(t){return[t.sideEffects.registerAfterChangeHandler("instance",(n,e)=>{n.isFocused!==e.isFocused&&(e.isFocused?(t.getContainer().focus(),t.updateViewportScreenBounds()):(t.complete(),t.getContainer().blur(),t.updateViewportScreenBounds()))}),t.sideEffects.registerAfterChangeHandler("instance_page_state",(n,e)=>{if(n.croppingShapeId!==e.croppingShapeId){const r=t.isInAny("select.crop","select.pointing_crop_handle","select.cropping");!n.croppingShapeId&&e.croppingShapeId?r||t.setCurrentTool("select.crop.idle"):n.croppingShapeId&&!e.croppingShapeId&&r&&t.setCurrentTool("select.idle")}n.editingShapeId!==e.editingShapeId&&(!n.editingShapeId&&e.editingShapeId?t.isIn("select.editing_shape")||t.setCurrentTool("select.editing_shape"):n.editingShapeId&&!e.editingShapeId&&t.isIn("select.editing_shape")&&t.setCurrentTool("select.idle"))})]}class vN extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"scribbleId","id");T(this,"markId","");T(this,"excludedShapeIds",new Set);T(this,"onEnter",e=>{this.markId="erase scribble begin",this.editor.mark(this.markId),this.info=e;const{originPagePoint:r}=this.editor.inputs;this.excludedShapeIds=new Set(this.editor.getCurrentPageShapes().filter(a=>{if(this.editor.isShapeOrAncestorLocked(a))return!0;if(this.editor.isShapeOfType(a,"group")||this.editor.isShapeOfType(a,"frame")){const l=this.editor.getPointInShapeSpace(a,r);return this.editor.getShapeGeometry(a).bounds.containsPoint(l)}return!1}).map(a=>a.id));const o=this.editor.scribbles.addScribble({color:"muted-1",size:12});this.scribbleId=o.id,this.update()});T(this,"pushPointToScribble",()=>{const{x:e,y:r}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,e,r)});T(this,"onExit",()=>{this.editor.scribbles.stop(this.scribbleId)});T(this,"onPointerMove",()=>{this.update()});T(this,"onPointerUp",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.complete()})}update(){const e=this.editor.getErasingShapeIds(),r=this.editor.getZoomLevel(),o=this.editor.getCurrentPageShapes(),{inputs:{currentPagePoint:a,previousPagePoint:l}}=this.editor,{excludedShapeIds:u}=this;this.pushPointToScribble();const d=new Set(e);for(const h of o){if(this.editor.isShapeOfType(h,"group"))continue;const g=this.editor.getShapeMask(h.id);if(g&&!qc(a,g))continue;const v=this.editor.getShapeGeometry(h),S=this.editor.getPointInShapeSpace(h,l),w=this.editor.getPointInShapeSpace(h,a);v.hitTestLineSegment(S,w,Jl/r)&&d.add(this.editor.getOutermostSelectableShape(h).id)}this.editor.setErasingShapes([...d].filter(h=>!u.has(h)))}complete(){this.editor.deleteShapes(this.editor.getCurrentPageState().erasingShapeIds),this.editor.setErasingShapes([]),this.parent.transition("idle")}cancel(){this.editor.setErasingShapes([]),this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}}T(vN,"id","erasing");var TP;let Ole=(TP=class extends Et{constructor(){super(...arguments);T(this,"onPointerDown",e=>{this.parent.transition("pointing",e)});T(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},T(TP,"id","idle"),TP);var kP;let Dle=(kP=class extends Et{constructor(){super(...arguments);T(this,"onEnter",()=>{const e=this.editor.getZoomLevel(),r=this.editor.getCurrentPageShapesSorted(),{inputs:{currentPagePoint:o}}=this.editor,a=new Set,l=a.size;for(let u=r.length,d=u-1;d>=0;d--){const h=r[d];if(!(this.editor.isShapeOrAncestorLocked(h)||this.editor.isShapeOfType(h,"group"))&&this.editor.isPointInShape(h,o,{hitInside:!1,margin:Jl/e})){const g=this.editor.getOutermostSelectableShape(h);if(this.editor.isShapeOfType(g,"frame")&&a.size>l)break;a.add(g.id)}}this.editor.setErasingShapes([...a])});T(this,"onPointerMove",e=>{this.editor.inputs.isDragging&&this.parent.transition("erasing",e)});T(this,"onPointerUp",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.complete()});T(this,"onInterrupt",()=>{this.cancel()})}complete(){const e=this.editor.getErasingShapeIds();e.length&&(this.editor.mark("erase end"),this.editor.deleteShapes(e)),this.editor.setErasingShapes([]),this.parent.transition("idle")}cancel(){this.editor.setErasingShapes([]),this.parent.transition("idle")}},T(kP,"id","pointing"),kP);class L1 extends Et{constructor(){super(...arguments);T(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})})}}T(L1,"id","eraser"),T(L1,"initial","idle"),T(L1,"children",()=>[Ole,Dle,vN]);class yN extends Et{constructor(){super(...arguments);T(this,"onEnter",()=>{this.update()});T(this,"onPointerMove",()=>{this.update()});T(this,"onPointerUp",()=>{this.complete()});T(this,"onCancel",()=>{this.complete()});T(this,"onComplete",()=>{this.complete()})}update(){const{currentScreenPoint:e,previousScreenPoint:r}=this.editor.inputs,o=N.Sub(e,r);(Math.abs(o.x)>0||Math.abs(o.y)>0)&&this.editor.pan(o)}complete(){this.editor.slideCamera({speed:Math.min(2,this.editor.inputs.pointerVelocity.len()),direction:this.editor.inputs.pointerVelocity,friction:l1}),this.parent.transition("idle")}}T(yN,"id","dragging");var PP;let Lle=(PP=class extends Et{constructor(){super(...arguments);T(this,"onEnter",()=>{this.editor.setCursor({type:"grab",rotation:0})});T(this,"onPointerDown",e=>{this.parent.transition("pointing",e)});T(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},T(PP,"id","idle"),PP);var IP;let jle=(IP=class extends Et{constructor(){super(...arguments);T(this,"onEnter",()=>{this.editor.stopCameraAnimation(),this.editor.updateInstanceState({cursor:{type:"grabbing",rotation:0}},{ephemeral:!0})});T(this,"onPointerMove",e=>{this.editor.inputs.isDragging&&this.parent.transition("dragging",e)});T(this,"onPointerUp",()=>{this.complete()});T(this,"onCancel",()=>{this.complete()});T(this,"onComplete",()=>{this.complete()});T(this,"onInterrupt",()=>{this.complete()})}complete(){this.parent.transition("idle")}},T(IP,"id","pointing"),IP);class j1 extends Et{constructor(){super(...arguments);T(this,"onDoubleClick",e=>{if(e.phase==="settle"){const{currentScreenPoint:r}=this.editor.inputs;this.editor.zoomIn(r,{duration:220,easing:Jo.easeOutQuint})}});T(this,"onTripleClick",e=>{if(e.phase==="settle"){const{currentScreenPoint:r}=this.editor.inputs;this.editor.zoomOut(r,{duration:320,easing:Jo.easeOutQuint})}});T(this,"onQuadrupleClick",e=>{if(e.phase==="settle"){const r=this.editor.getZoomLevel(),{inputs:{currentScreenPoint:o}}=this.editor;r===1?this.editor.zoomToFit({duration:400,easing:Jo.easeOutQuint}):this.editor.resetZoom(o,{duration:320,easing:Jo.easeOutQuint})}})}}T(j1,"id","hand"),T(j1,"initial","idle"),T(j1,"children",()=>[Lle,jle,yN]);var RP;let Nle=(RP=class extends Et{constructor(){super(...arguments);T(this,"onPointerDown",e=>{this.parent.transition("lasering",e)})}},T(RP,"id","idle"),RP);class SN extends Et{constructor(){super(...arguments);T(this,"scribbleId","id");T(this,"onEnter",()=>{const e=this.editor.scribbles.addScribble({color:"laser",opacity:.7,size:4,delay:1200,shrink:.05,taper:!0});this.scribbleId=e.id,this.pushPointToScribble()});T(this,"onExit",()=>{this.editor.scribbles.stop(this.scribbleId)});T(this,"onPointerMove",()=>{this.pushPointToScribble()});T(this,"onPointerUp",()=>{this.complete()});T(this,"pushPointToScribble",()=>{const{x:e,y:r}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,e,r)});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.complete()})}complete(){this.parent.transition("idle")}cancel(){this.parent.transition("idle")}}T(SN,"id","lasering");class N1 extends Et{constructor(){super(...arguments);T(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})})}}T(N1,"id","laser"),T(N1,"initial","idle"),T(N1,"children",()=>[Nle,SN]);class bN extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"brush",new Mt);T(this,"initialSelectedShapeIds",[]);T(this,"excludedShapeIds",new Set);T(this,"initialStartShape",null);T(this,"onEnter",e=>{const{altKey:r,currentPagePoint:o}=this.editor.inputs;if(r){this.parent.transition("scribble_brushing",e);return}this.excludedShapeIds=new Set(this.editor.getCurrentPageShapes().filter(a=>this.editor.isShapeOfType(a,"group")||this.editor.isShapeOrAncestorLocked(a)).map(a=>a.id)),this.info=e,this.initialSelectedShapeIds=this.editor.getSelectedShapeIds().slice(),this.initialStartShape=this.editor.getShapesAtPoint(o)[0],this.onPointerMove()});T(this,"onExit",()=>{this.initialSelectedShapeIds=[],this.editor.updateInstanceState({brush:null})});T(this,"onTick",()=>{wR(this.editor)});T(this,"onPointerMove",()=>{this.hitTestShapes()});T(this,"onPointerUp",()=>{this.complete()});T(this,"onComplete",()=>{this.complete()});T(this,"onCancel",e=>{this.editor.setSelectedShapes(this.initialSelectedShapeIds,{squashing:!0}),this.parent.transition("idle",e)});T(this,"onKeyDown",e=>{this.editor.inputs.altKey?this.parent.transition("scribble_brushing",e):this.hitTestShapes()});T(this,"onKeyUp",()=>{this.hitTestShapes()});T(this,"onInterrupt",()=>{this.editor.updateInstanceState({brush:null})})}complete(){this.parent.transition("idle")}hitTestShapes(){const e=this.editor.getZoomLevel(),r=this.editor.getCurrentPageShapes(),o=this.editor.getCurrentPageId(),{inputs:{originPagePoint:a,currentPagePoint:l,shiftKey:u,ctrlKey:d}}=this.editor;this.brush.setTo(Mt.FromPoints([a,l]));const h=new Set(u?this.initialSelectedShapeIds:[]);let g,v,S,w,k,C;const{corners:E}=this.brush,{excludedShapeIds:R}=this;e:for(let L=0,A=r.length;L<A;L++){if(S=r[L],R.has(S.id)||h.has(S.id)||(w=this.editor.getShapePageBounds(S),!w))continue e;if(this.brush.contains(w)){this.handleHit(S,l,o,h,E);continue e}if(d||this.editor.isShapeOfType(S,"frame"))continue e;if(this.brush.collides(w)){const O=this.editor.getShapeGeometry(S);if(k=this.editor.getShapePageTransform(S),!k)continue e;C=k.clone().invert().applyToPoints(E);t:for(let D=0;D<C.length;D++)if(g=C[D],v=C[(D+1)%C.length],O.hitTestLineSegment(g,v,Jl/e)){this.handleHit(S,l,o,h,E);break t}}}this.editor.updateInstanceState({brush:{...this.brush.toJson()}}),this.editor.setSelectedShapes(Array.from(h),{squashing:!0})}handleHit(e,r,o,a,l){if(e.parentId===o){a.add(e.id);return}const u=this.editor.getOutermostSelectableShape(e),d=this.editor.getShapeMask(u.id);d&&!gQ(d,l)&&!qc(r,d)||a.add(u.id)}}T(bN,"id","brushing");function XR(t){const n=t.getZoomLevel(),{inputs:{currentPagePoint:e}}=t;return t.getShapeAtPoint(e,{hitInside:!1,hitLabels:!1,margin:Jl/n,renderingOnly:!0})??t.getSelectedShapeAtPoint(e)}function wN(t,n,e){if(!n)throw Error("Needs to translate a cropped shape!");const{crop:r}=n.props;if(!r)return;const o=t.inputs.shiftKey?Math.abs(e.x)<Math.abs(e.y)?"x":"y":null;o==="x"?e.x=0:o==="y"&&(e.y=0),e.rot(-n.rotation);const a=1/(r.bottomRight.x-r.topLeft.x)*n.props.w,l=1/(r.bottomRight.y-r.topLeft.y)*n.props.h,u=r.bottomRight.y-r.topLeft.y,d=r.bottomRight.x-r.topLeft.x,h=es(r);return h.topLeft.x=Math.min(1-d,Math.max(0,h.topLeft.x-e.x/a)),h.topLeft.y=Math.min(1-u,Math.max(0,h.topLeft.y-e.y/l)),h.bottomRight.x=h.topLeft.x+d,h.bottomRight.y=h.topLeft.y+u,{id:n.id,type:n.type,props:{crop:h}}}var MP;let zle=(MP=class extends Et{constructor(){super(...arguments);T(this,"onEnter",()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0});const e=this.editor.getOnlySelectedShape();this.editor.on("change-history",this.cleanupCroppingState),e&&(this.editor.mark("crop"),this.editor.setCroppingShape(e.id))});T(this,"onExit",()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.editor.off("change-history",this.cleanupCroppingState)});T(this,"onCancel",()=>{this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})});T(this,"onPointerDown",e=>{var r;if(!this.editor.getIsMenuOpen()){if(e.ctrlKey){this.cancel(),this.editor.root.handleEvent(e);return}switch(e.target){case"canvas":{const o=XR(this.editor);if(o&&!this.editor.isShapeOfType(o,"group")){this.onPointerDown({...e,shape:o,target:"shape"});return}this.cancel(),this.editor.root.handleEvent(e);break}case"shape":{if(e.shape.id===this.editor.getCroppingShapeId()){this.editor.setCurrentTool("select.crop.pointing_crop",e);return}else(r=this.editor.getShapeUtil(e.shape))!=null&&r.canCrop(e.shape)?(this.editor.setCroppingShape(e.shape.id),this.editor.setSelectedShapes([e.shape.id]),this.editor.setCurrentTool("select.crop.pointing_crop",e)):(this.cancel(),this.editor.root.handleEvent(e));break}case"selection":{switch(e.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":{this.editor.setCurrentTool("select.pointing_rotate_handle",{...e,onInteractionEnd:"select.crop"});break}case"top":case"right":case"bottom":case"left":{this.editor.setCurrentTool("select.pointing_crop_handle",{...e,onInteractionEnd:"select.crop"});break}case"top_left":case"top_right":case"bottom_left":case"bottom_right":{this.editor.setCurrentTool("select.pointing_crop_handle",{...e,onInteractionEnd:"select.crop"});break}default:this.cancel()}break}}}});T(this,"onDoubleClick",e=>{var l;if(this.editor.inputs.shiftKey||e.phase!=="up")return;const r=this.editor.getCroppingShapeId();if(!r)return;const o=this.editor.getShape(r);if(!o)return;const a=this.editor.getShapeUtil(o);a&&e.target==="selection"&&((l=a.onDoubleClickEdge)==null||l.call(a,o))});T(this,"onKeyDown",()=>{this.nudgeCroppingImage(!1)});T(this,"onKeyRepeat",()=>{this.nudgeCroppingImage(!0)});T(this,"onKeyUp",e=>{switch(e.code){case"Enter":{this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{});break}}});T(this,"cleanupCroppingState",()=>{this.editor.getCroppingShapeId()||this.editor.setCurrentTool("select.idle",{})})}cancel(){this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}nudgeCroppingImage(e=!1){const{editor:{inputs:{keys:r}}}=this,o=r.has("ShiftLeft"),a=new N(0,0);if(r.has("ArrowLeft")&&(a.x+=1),r.has("ArrowRight")&&(a.x-=1),r.has("ArrowUp")&&(a.y+=1),r.has("ArrowDown")&&(a.y-=1),a.equals(new N(0,0)))return;o&&a.mul(10);const l=this.editor.getShape(this.editor.getCroppingShapeId());if(!l)return;const u=wN(this.editor,l,a);u&&(e||this.editor.mark("translate crop"),this.editor.updateShapes([u]))}},T(MP,"id","idle"),MP);class xN extends Et{constructor(){super(...arguments);T(this,"onCancel",()=>{this.editor.setCurrentTool("select.crop.idle",{})});T(this,"onPointerMove",e=>{this.editor.inputs.isDragging&&this.editor.setCurrentTool("select.crop.translating_crop",e)});T(this,"onPointerUp",e=>{this.editor.setCurrentTool("select.crop.idle",e)})}}T(xN,"id","pointing_crop");class CN extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"markId","translating crop");T(this,"snapshot",{});T(this,"onEnter",e=>{this.info=e,this.snapshot=this.createSnapshot(),this.editor.mark(this.markId),this.editor.setCursor({type:"move",rotation:0}),this.updateShapes()});T(this,"onExit",()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})});T(this,"onPointerMove",()=>{this.updateShapes()});T(this,"onPointerUp",()=>{this.complete()});T(this,"onComplete",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()});T(this,"onKeyDown",e=>{switch(e.key){case"Alt":case"Shift":{this.updateShapes();return}}});T(this,"onKeyUp",e=>{switch(e.key){case"Enter":{this.complete();return}case"Alt":case"Shift":this.updateShapes()}})}complete(){this.updateShapes(),this.editor.setCurrentTool("select.crop.idle",this.info)}cancel(){this.editor.bailToMark(this.markId),this.editor.setCurrentTool("select.crop.idle",this.info)}createSnapshot(){return{shape:this.editor.getOnlySelectedShape()}}updateShapes(){const e=this.snapshot.shape;if(!e)return;const{originPagePoint:r,currentPagePoint:o}=this.editor.inputs,a=o.clone().sub(r),l=wN(this.editor,e,a);l&&this.editor.updateShapes([l],{squashing:!0})}}T(CN,"id","translating_crop");class z1 extends Et{}T(z1,"id","crop"),T(z1,"initial","idle"),T(z1,"children",()=>[zle,CN,xN]);const rl=8,Om={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"};class EN extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"onEnter",e=>{this.info=e,this.updateCursor()});T(this,"onPointerMove",()=>{this.editor.inputs.isDragging&&this.parent.transition("resizing",this.info)});T(this,"onPointerUp",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.cancel()});T(this,"onInterrupt",()=>{this.cancel()})}updateCursor(){const e=this.editor.getSelectedShapes(),r=Om[this.info.handle];this.editor.updateInstanceState({cursor:{type:r,rotation:e.length===1?e[0].rotation:0}})}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}T(EN,"id","pointing_resize_handle");class _N extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"markId","");T(this,"snapshot",{});T(this,"onEnter",e=>{this.info=e,this.markId="cropping",this.editor.mark(this.markId),this.snapshot=this.createSnapshot(),this.updateShapes()});T(this,"onPointerMove",()=>{this.updateShapes()});T(this,"onPointerUp",()=>{this.complete()});T(this,"onComplete",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()});T(this,"getDefaultCrop",()=>({topLeft:{x:0,y:0},bottomRight:{x:1,y:1}}))}updateCursor(){const e=this.editor.getSelectedShapes()[0];if(!e)return;const r=Om[this.info.handle];this.editor.updateInstanceState({cursor:{type:r,rotation:e.rotation}})}updateShapes(){const{shape:e,cursorHandleOffset:r}=this.snapshot;if(!e||!this.editor.getShapeUtil("image"))return;const a=e.props,l=this.editor.inputs.currentPagePoint.clone().sub(r),u=this.editor.inputs.originPagePoint.clone().sub(r),d=l.clone().sub(u).rot(-e.rotation),h=a.crop??this.getDefaultCrop(),g=es(h),v=new N(e.x,e.y),S=new N(0,0),w=1/(h.bottomRight.x-h.topLeft.x)*a.w,k=1/(h.bottomRight.y-h.topLeft.y)*a.h;let C=!1;switch(this.info.handle){case"top":case"top_left":case"top_right":{if(k<rl)break;C=!0,g.topLeft.y=g.topLeft.y+d.y/k,k*(g.bottomRight.y-g.topLeft.y)<rl?(g.topLeft.y=g.bottomRight.y-rl/k,S.y=(g.topLeft.y-h.topLeft.y)*k):g.topLeft.y<=0?(g.topLeft.y=0,S.y=(g.topLeft.y-h.topLeft.y)*k):S.y=d.y;break}case"bottom":case"bottom_left":case"bottom_right":{if(k<rl)break;C=!0,g.bottomRight.y=Math.min(1,g.bottomRight.y+d.y/k),k*(g.bottomRight.y-g.topLeft.y)<rl&&(g.bottomRight.y=g.topLeft.y+rl/k);break}}switch(this.info.handle){case"left":case"top_left":case"bottom_left":{if(w<rl)break;C=!0,g.topLeft.x=g.topLeft.x+d.x/w,w*(g.bottomRight.x-g.topLeft.x)<rl?(g.topLeft.x=g.bottomRight.x-rl/w,S.x=(g.topLeft.x-h.topLeft.x)*w):g.topLeft.x<=0?(g.topLeft.x=0,S.x=(g.topLeft.x-h.topLeft.x)*w):S.x=d.x;break}case"right":case"top_right":case"bottom_right":{if(w<rl)break;C=!0,g.bottomRight.x=Math.min(1,g.bottomRight.x+d.x/w),w*(g.bottomRight.x-g.topLeft.x)<rl&&(g.bottomRight.x=g.topLeft.x+rl/w);break}}if(!C)return;v.add(S.rot(e.rotation));const E={id:e.id,type:e.type,x:v.x,y:v.y,props:{crop:g,w:(g.bottomRight.x-g.topLeft.x)*w,h:(g.bottomRight.y-g.topLeft.y)*k}};this.editor.updateShapes([E],{squashing:!0}),this.updateCursor()}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle"))}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle"))}createSnapshot(){const e=this.editor.getSelectionRotation(),{inputs:{originPagePoint:r}}=this.editor,o=this.editor.getOnlySelectedShape(),a=this.editor.getSelectionRotatedPageBounds(),l=N.RotWith(a.getHandlePoint(this.info.handle),a.point,e),u=N.Sub(r,l);return{shape:o,cursorHandleOffset:u}}}T(_N,"id","cropping");class TN extends Et{constructor(){super(...arguments);T(this,"shapeId","");T(this,"initialHandle",{});T(this,"initialAdjacentHandle",null);T(this,"initialPagePoint",{});T(this,"markId","");T(this,"initialPageTransform");T(this,"initialPageRotation");T(this,"info",{});T(this,"isPrecise",!1);T(this,"isPreciseId",null);T(this,"pointingId",null);T(this,"onEnter",e=>{const{shape:r,isCreating:o,handle:a}=e;this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.shapeId=r.id,this.markId=o?`creating:${r.id}`:"dragging handle",o||this.editor.mark(this.markId),this.initialHandle=es(a),this.initialPageTransform=this.editor.getShapePageTransform(r),this.initialPageRotation=this.initialPageTransform.rotation(),this.initialPagePoint=this.editor.inputs.originPagePoint.clone(),this.editor.updateInstanceState({cursor:{type:o?"cross":"grabbing",rotation:0}},{ephemeral:!0});const l=this.editor.getShapeHandles(r).sort(qo),u=l.findIndex(h=>h.id===e.handle.id);this.initialAdjacentHandle=null;for(let h=u+1;h<l.length;h++){const g=l[h];if(g.type==="vertex"&&g.id!=="middle"&&g.id!==e.handle.id){this.initialAdjacentHandle=g;break}}if(!this.initialAdjacentHandle)for(let h=l.length-1;h>=0;h--){const g=l[h];if(g.type==="vertex"&&g.id!=="middle"&&g.id!==e.handle.id){this.initialAdjacentHandle=g;break}}const d=r.props[e.handle.id];this.isPrecise=!1,(d==null?void 0:d.type)==="binding"?(this.editor.setHintingShapes([d.boundShapeId]),this.isPrecise=d.isPrecise,this.isPrecise?this.isPreciseId=d.boundShapeId:this.resetExactTimeout()):this.editor.setHintingShapes([]),this.update(),this.editor.select(this.shapeId)});T(this,"exactTimeout",-1);T(this,"onPointerMove",()=>{this.update()});T(this,"onKeyDown",()=>{this.update()});T(this,"onKeyUp",()=>{this.update()});T(this,"onPointerUp",()=>{this.complete()});T(this,"onComplete",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()});T(this,"onExit",()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.setHintingShapes([]),this.editor.snaps.clear(),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})})}resetExactTimeout(){this.exactTimeout!==-1&&this.clearExactTimeout(),this.exactTimeout=setTimeout(()=>{this.getIsActive()&&!this.isPrecise&&(this.isPrecise=!0,this.isPreciseId=this.pointingId,this.update()),this.exactTimeout=-1},750)}clearExactTimeout(){this.exactTimeout!==-1&&(clearTimeout(this.exactTimeout),this.exactTimeout=-1)}complete(){this.editor.snaps.clear();const{onInteractionEnd:e}=this.info;if(this.editor.getInstanceState().isToolLocked&&e){this.editor.setCurrentTool(e,{shapeId:this.shapeId});return}this.parent.transition("idle")}cancel(){this.editor.bailToMark(this.markId),this.editor.snaps.clear();const{onInteractionEnd:e}=this.info;if(e){this.editor.setCurrentTool(e,{shapeId:this.shapeId});return}this.parent.transition("idle")}update(){var z;const{editor:e,shapeId:r,initialPagePoint:o}=this,{initialHandle:a,initialPageRotation:l,initialAdjacentHandle:u}=this,d=this.editor.getHintingShapeIds(),h=this.editor.user.getIsSnapMode(),{snaps:g,inputs:{currentPagePoint:v,shiftKey:S,ctrlKey:w,altKey:k,pointerVelocity:C}}=e,E=this.info.shape,R=e.getShape(r);if(!R)return;const L=e.getShapeUtil(R);let A=v.clone().sub(o).rot(-l).add(a);if(S&&u&&a.id!=="middle"){const U=N.Angle(u,A),q=aC(U,24)-U;A=N.RotWith(A,u,q)}if(e.snaps.clear(),a.canSnap&&(h?!w:w)){const U=e.getShapePageTransform(R.id);if(!U)throw Error("Expected a page transform");const Y=e.getShapeHandles(R).filter(({type:ie})=>ie==="vertex").sort(qo).findIndex(({index:ie})=>a.index===ie),q=L.getOutlineSegments(R).map(ie=>yt.applyToPoints(U,ie)).filter((ie,pe)=>pe!==Y-1&&pe!==Y),X=g.getSnappingHandleDelta({additionalSegments:q,handlePoint:yt.applyToPoint(U,A)});X&&(X.rot(-e.getShapeParentTransform(R).rotation()),A.add(X))}const O=(z=L.onHandleChange)==null?void 0:z.call(L,R,{handle:{...a,x:A.x,y:A.y},isPrecise:this.isPrecise||k,initial:E}),D={...R,...O};if(a.canBind){const U=D.props[a.id];(U==null?void 0:U.type)==="binding"?d[0]!==U.boundShapeId&&(e.setHintingShapes([U.boundShapeId]),this.pointingId=U.boundShapeId,this.isPrecise=C.len()<.5||k,this.isPreciseId=this.isPrecise?U.boundShapeId:null,this.resetExactTimeout()):d.length>0&&(e.setHintingShapes([]),this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout())}O&&e.updateShapes([D],{squashing:!0})}}T(TN,"id","dragging_handle");class kN extends Et{constructor(){super(...arguments);T(this,"onEnter",()=>{const e=this.editor.getEditingShape();if(!e)throw Error("Entered editing state without an editing shape");QS(this.editor),this.editor.select(e)});T(this,"onExit",()=>{var a;const{editingShapeId:e}=this.editor.getCurrentPageState();if(!e)return;this.editor.setEditingShape(null);const r=this.editor.getShape(e),o=this.editor.getShapeUtil(r);(a=o.onEditEnd)==null||a.call(o,r),setTimeout(()=>{this.editor.updateViewportScreenBounds()},500)});T(this,"onPointerMove",e=>{switch(e.target){case"shape":case"canvas":{QS(this.editor);return}}});T(this,"onPointerDown",e=>{switch(e.target){case"canvas":{const r=XR(this.editor);if(r){this.onPointerDown({...e,shape:r,target:"shape"});return}break}case"shape":{const{shape:r}=e,o=this.editor.getEditingShape();if(!o)throw Error("Expected an editing shape!");if(r.type===o.type)if(this.editor.isShapeOfType(r,"geo")||this.editor.isShapeOfType(r,"arrow")){const l=this.editor.getShapeUtil(r).getGeometry(r).children[1];if(l){const u=this.editor.getPointInShapeSpace(r,this.editor.inputs.currentPagePoint);if(l.bounds.containsPoint(u)){if(r.id===o.id)return;this.parent.transition("pointing_shape",e);return}}}else{if(r.id===o.id)this.editor.isShapeOfType(r,"frame")&&this.editor.setEditingShape(null);else{this.parent.transition("pointing_shape",e);return}return}break}}this.parent.transition("idle",e),this.editor.root.handleEvent(e)});T(this,"onComplete",e=>{this.parent.transition("idle",e)});T(this,"onCancel",e=>{this.parent.transition("idle",e)})}}T(kN,"id","editing_shape");function g5(t){const n=t.getOnlySelectedShape();return!!(n&&!t.isShapeOrAncestorLocked(n)&&t.getShapeUtil(n).canCrop(n))}function EC(t){const n=t.getSelectedShapeIds(),{shiftKey:e,altKey:r,currentPagePoint:o}=t.inputs,a=t.getShapeAtPoint(o,{hitInside:!1,margin:Jl/t.getZoomLevel(),hitLabels:!0,renderingOnly:!0,filter:l=>!l.isLocked});if(a){const l=t.getOutermostSelectableShape(a);if(e&&!r)t.cancelDoubleClick(),n.includes(l.id)?(t.mark("deselecting shape"),t.deselect(l)):(t.mark("shift selecting shape"),t.setSelectedShapes([...n,l.id]));else{let u;l===a||l.id===t.getFocusedGroupId()||n.includes(l.id)?u=a:u=l,u&&!n.includes(u.id)&&(t.mark("selecting shape"),t.select(u.id))}}else{if(e)return;{n.length>0&&(t.mark("selecting none"),t.selectNone());const l=t.getFocusedGroupId();if(il(l)){const u=t.getShape(l);t.isPointInShape(u,o,{margin:0,hitInside:!0})||t.setFocusedGroup(null)}}}}var AP;let Fle=(AP=class extends Et{constructor(){super(...arguments);T(this,"onEnter",()=>{this.parent.setCurrentToolIdMask(void 0),QS(this.editor),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})});T(this,"onPointerMove",()=>{QS(this.editor)});T(this,"onPointerDown",e=>{if(this.editor.getIsMenuOpen())return;const r=e.ctrlKey&&g5(this.editor);if(e.ctrlKey&&!r){if(e.target==="shape"&&this.isDarwin&&this.editor.inputs.keys.has("ControlLeft")&&!this.editor.isShapeOrAncestorLocked(e.shape)){this.parent.transition("pointing_shape",e);return}this.parent.transition("brushing",e);return}switch(e.target){case"canvas":{const o=XR(this.editor);if(o&&!o.isLocked){this.onPointerDown({...e,shape:o,target:"shape"});return}const a=this.editor.getSelectedShapeIds(),l=this.editor.getOnlySelectedShape(),{inputs:{currentPagePoint:u}}=this.editor;if((a.length>1||l&&!this.editor.getShapeUtil(l).hideSelectionBoundsBg(l))&&m5(this.editor,u)){this.onPointerDown({...e,target:"selection"});return}this.parent.transition("pointing_canvas",e);break}case"shape":{if(this.editor.isShapeOrAncestorLocked(e.shape)){this.parent.transition("pointing_canvas",e);break}this.parent.transition("pointing_shape",e);break}case"handle":{if(this.editor.getInstanceState().isReadonly)break;this.editor.inputs.altKey?this.parent.transition("pointing_shape",e):this.parent.transition("pointing_handle",e);break}case"selection":{switch(e.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":{this.parent.transition("pointing_rotate_handle",e);break}case"top":case"right":case"bottom":case"left":{r?this.parent.transition("pointing_crop_handle",e):this.parent.transition("pointing_resize_handle",e);break}case"top_left":case"top_right":case"bottom_left":case"bottom_right":{r?this.parent.transition("pointing_crop_handle",e):this.parent.transition("pointing_resize_handle",e);break}default:{const o=this.editor.getHoveredShape();if(o&&!this.editor.getSelectedShapeIds().includes(o.id)&&!o.isLocked){this.onPointerDown({...e,shape:o,target:"shape"});return}this.parent.transition("pointing_selection",e)}}break}}});T(this,"onDoubleClick",e=>{var r,o,a,l;if(!(this.editor.inputs.shiftKey||e.phase!=="up"))switch(e.target){case"canvas":{const u=this.editor.getHoveredShape(),d=u&&!this.editor.isShapeOfType(u,"group")?u:this.editor.getSelectedShapeAtPoint(this.editor.inputs.currentPagePoint)??this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:Jl/this.editor.getZoomLevel(),hitInside:!1}),h=this.editor.getFocusedGroupId();if(d){if(this.editor.isShapeOfType(d,"group")){EC(this.editor);return}else{const g=this.editor.getShape(d.parentId);if(g&&this.editor.isShapeOfType(g,"group")&&!(h&&g.id===h)){EC(this.editor);return}}this.onDoubleClick({...e,shape:d,target:"shape"});return}this.editor.inputs.shiftKey||this.handleDoubleClickOnCanvas(e);break}case"selection":{if(this.editor.getInstanceState().isReadonly)break;const u=this.editor.getOnlySelectedShape();if(u){const d=this.editor.getShapeUtil(u);if(!this.canInteractWithShapeInReadOnly(u))return;if(e.handle==="right"||e.handle==="left"||e.handle==="top"||e.handle==="bottom"){const h=(r=d.onDoubleClickEdge)==null?void 0:r.call(d,u);if(h){this.editor.mark("double click edge"),this.editor.updateShapes([h]);return}}if(d.canCrop(u)&&!this.editor.isShapeOrAncestorLocked(u)){this.parent.transition("crop",e);return}this.shouldStartEditingShape(u)&&this.startEditingShape(u,e)}break}case"shape":{const{shape:u}=e,d=this.editor.getShapeUtil(u);if(u.type!=="video"&&u.type!=="embed"&&this.editor.getInstanceState().isReadonly)break;if(d.onDoubleClick){const h=(o=d.onDoubleClick)==null?void 0:o.call(d,u);if(h){this.editor.updateShapes([h]);return}else if(d.canCrop(u)&&!this.editor.isShapeOrAncestorLocked(u)){this.editor.mark("select and crop"),this.editor.select((a=e.shape)==null?void 0:a.id),this.parent.transition("crop",e);return}}this.shouldStartEditingShape(u)?this.startEditingShape(u,e):this.handleDoubleClickOnCanvas(e);break}case"handle":{if(this.editor.getInstanceState().isReadonly)break;const{shape:u,handle:d}=e,h=this.editor.getShapeUtil(u),g=(l=h.onDoubleClickHandle)==null?void 0:l.call(h,u,d);g?this.editor.updateShapes([g]):this.shouldStartEditingShape(u)&&this.startEditingShape(u,e)}}});T(this,"onRightClick",e=>{switch(e.target){case"canvas":{const r=this.editor.getHoveredShape(),o=r&&!this.editor.isShapeOfType(r,"group")?r:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:Jl/this.editor.getZoomLevel(),hitInside:!1,hitLabels:!0,hitFrameInside:!1,renderingOnly:!0});if(o){this.onRightClick({...e,shape:o,target:"shape"});return}const a=this.editor.getSelectedShapeIds(),l=this.editor.getOnlySelectedShape(),{inputs:{currentPagePoint:u}}=this.editor;if((a.length>1||l&&!this.editor.getShapeUtil(l).hideSelectionBoundsBg(l))&&m5(this.editor,u)){this.onRightClick({...e,target:"selection"});return}this.editor.selectNone();break}case"shape":{const{selectedShapeIds:r}=this.editor.getCurrentPageState(),{shape:o}=e,a=this.editor.getOutermostSelectableShape(o,l=>!r.includes(l.id));r.includes(a.id)||(this.editor.mark("selecting shape"),this.editor.setSelectedShapes([a.id]));break}}});T(this,"onCancel",()=>{this.editor.getFocusedGroupId()!==this.editor.getCurrentPageId()&&this.editor.getSelectedShapeIds().length>0?this.editor.popFocusedGroupId():(this.editor.mark("clearing selection"),this.editor.selectNone())});T(this,"onKeyDown",e=>{switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{this.nudgeSelectedShapes(!1);break}}});T(this,"onKeyRepeat",e=>{switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{this.nudgeSelectedShapes(!0);break}}});T(this,"onKeyUp",e=>{switch(e.code){case"Enter":{const r=this.editor.getSelectedShapes();if(r.every(a=>this.editor.isShapeOfType(a,"group"))){this.editor.setSelectedShapes(r.flatMap(a=>this.editor.getSortedChildIdsForParent(a.id)));return}const o=this.editor.getOnlySelectedShape();if(o&&this.shouldStartEditingShape(o)){this.startEditingShape(o,{...e,target:"shape",shape:o});return}g5(this.editor)&&this.parent.transition("crop",e);break}}});T(this,"isDarwin",window.navigator.userAgent.toLowerCase().indexOf("mac")>-1)}shouldStartEditingShape(e=this.editor.getOnlySelectedShape()){return!e||this.editor.isShapeOrAncestorLocked(e)&&e.type!=="embed"||!this.canInteractWithShapeInReadOnly(e)?!1:this.editor.getShapeUtil(e).canEdit(e)}startEditingShape(e,r){this.editor.isShapeOrAncestorLocked(e)&&e.type!=="embed"||(this.editor.mark("editing shape"),this.editor.setEditingShape(e.id),this.parent.transition("editing_shape",r))}handleDoubleClickOnCanvas(e){if(this.editor.getInstanceState().isReadonly)return;this.editor.mark("creating text shape");const r=Ir(),{x:o,y:a}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id:r,type:"text",x:o,y:a,props:{text:"",autoSize:!0}}]);const l=this.editor.getShape(r);if(!l)return;const u=this.editor.getShapeUtil(l);this.editor.getInstanceState().isReadonly&&!u.canEditInReadOnly(l)||(this.editor.setEditingShape(r),this.editor.select(r),this.parent.transition("editing_shape",e))}nudgeSelectedShapes(e=!1){const{editor:{inputs:{keys:r}}}=this,o=r.has("ShiftLeft"),a=new N(0,0);if(r.has("ArrowLeft")&&(a.x-=1),r.has("ArrowRight")&&(a.x+=1),r.has("ArrowUp")&&(a.y-=1),r.has("ArrowDown")&&(a.y+=1),a.equals(new N(0,0)))return;e||this.editor.mark("nudge shapes");const{gridSize:l}=this.editor.getDocumentSettings(),u=this.editor.getInstanceState().isGridMode?o?l*Hle:l:o?Ule:Ble;this.editor.nudgeShapes(this.editor.getSelectedShapeIds(),a.mul(u))}canInteractWithShapeInReadOnly(e){return!!(!this.editor.getInstanceState().isReadonly||this.editor.getShapeUtil(e).canEditInReadOnly(e))}},T(AP,"id","idle"),AP);const Ule=10,Ble=1,Hle=5;function m5(t,n){const e=t.getSelectionRotatedPageBounds();if(!e)return!1;const r=t.getSelectionRotation();return r?qc(n,e.corners.map(o=>N.RotWith(o,e.point,r))):e.containsPoint(n)}class PN extends Et{constructor(){super(...arguments);T(this,"onEnter",()=>{const{inputs:e}=this.editor;e.shiftKey||this.editor.getSelectedShapeIds().length>0&&(this.editor.mark("selecting none"),this.editor.selectNone())});T(this,"onPointerMove",e=>{this.editor.inputs.isDragging&&this.parent.transition("brushing",e)});T(this,"onPointerUp",()=>{EC(this.editor),this.complete()});T(this,"onComplete",()=>{this.complete()});T(this,"onInterrupt",()=>{this.parent.transition("idle")})}complete(){this.parent.transition("idle")}}T(PN,"id","pointing_canvas");class IN extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"onEnter",e=>{this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd);const r=this.editor.getSelectedShapes()[0];r&&(this.updateCursor(r),this.editor.setCroppingShape(r.id))});T(this,"onExit",()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.parent.setCurrentToolIdMask(void 0)});T(this,"onPointerMove",()=>{this.editor.inputs.isDragging&&this.parent.transition("cropping",{...this.info,onInteractionEnd:this.info.onInteractionEnd})});T(this,"onPointerUp",()=>{this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle"))});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.cancel()});T(this,"onInterrupt",()=>{this.cancel()})}updateCursor(e){const r=Om[this.info.handle];this.editor.updateInstanceState({cursor:{type:r,rotation:e.rotation}})}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle"))}}T(IN,"id","pointing_crop_handle");class RN extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"onEnter",e=>{this.info=e;const r=e.shape.props[e.handle.id];(r==null?void 0:r.type)==="binding"&&this.editor.setHintingShapes([r.boundShapeId]),this.editor.updateInstanceState({cursor:{type:"grabbing",rotation:0}},{ephemeral:!0})});T(this,"onExit",()=>{this.editor.setHintingShapes([]),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})});T(this,"onPointerUp",()=>{this.parent.transition("idle",this.info)});T(this,"onPointerMove",()=>{this.editor.inputs.isDragging&&this.parent.transition("dragging_handle",this.info)});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.cancel()});T(this,"onInterrupt",()=>{this.cancel()})}cancel(){this.parent.transition("idle")}}T(RN,"id","pointing_handle");class MN extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"onEnter",e=>{this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.info=e,this.updateCursor()});T(this,"onExit",()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})});T(this,"onPointerMove",()=>{const{isDragging:e}=this.editor.inputs;e&&this.parent.transition("rotating",this.info)});T(this,"onPointerUp",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.cancel()});T(this,"onInterrupt",()=>{this.cancel()})}updateCursor(){const e=this.editor.getSelectionRotation();this.editor.updateInstanceState({cursor:{type:Om[this.info.handle],rotation:e}})}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}T(MN,"id","pointing_rotate_handle");class AN extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"onEnter",e=>{this.info=e});T(this,"onPointerUp",e=>{EC(this.editor),this.parent.transition("idle",e)});T(this,"onPointerMove",e=>{if(this.editor.inputs.isDragging){if(this.editor.getInstanceState().isReadonly)return;this.parent.transition("translating",e)}});T(this,"onDoubleClick",e=>{var a,l;const r=this.editor.getHoveredShape(),o=r&&!this.editor.isShapeOfType(r,"group")?r:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{hitInside:!0,margin:0,renderingOnly:!0});if(o){this.parent.transition("idle"),(l=(a=this.parent).onDoubleClick)==null||l.call(a,{...e,target:"shape",shape:this.editor.getShape(o)});return}});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.cancel()});T(this,"onInterrupt",()=>{this.cancel()})}cancel(){this.parent.transition("idle")}}T(AN,"id","pointing_selection");class $N extends Et{constructor(){super(...arguments);T(this,"hitShape",{});T(this,"hitShapeForPointerUp",{});T(this,"didSelectOnEnter",!1);T(this,"onEnter",e=>{const r=this.editor.getSelectedShapeIds(),o=this.editor.getSelectionRotatedPageBounds(),a=this.editor.getFocusedGroupId(),{inputs:{currentPagePoint:l,shiftKey:u,altKey:d}}=this.editor;this.hitShape=e.shape;const h=this.editor.getOutermostSelectableShape(e.shape);if(this.editor.getShapeUtil(e.shape).onClick||h.id===a||r.includes(h.id)||this.editor.isAncestorSelected(h.id)||r.length>1&&(o!=null&&o.containsPoint(l))){this.didSelectOnEnter=!1,this.hitShapeForPointerUp=h;return}this.didSelectOnEnter=!0,u&&!d?(this.editor.cancelDoubleClick(),r.includes(h.id)||(this.editor.mark("shift selecting shape"),this.editor.setSelectedShapes([...r,h.id]))):(this.editor.mark("selecting shape"),this.editor.setSelectedShapes([h.id]))});T(this,"onPointerUp",e=>{var g;const r=this.editor.getSelectedShapeIds(),o=this.editor.getFocusedGroupId(),a=this.editor.getZoomLevel(),{inputs:{currentPagePoint:l,shiftKey:u}}=this.editor,d=this.editor.getShapeAtPoint(l,{margin:Jl/a,hitInside:!0,renderingOnly:!0})??this.hitShape,h=d?this.editor.getOutermostSelectableShape(d):this.hitShapeForPointerUp;if(h){const v=this.editor.getShapeUtil(h);if(v.onClick){const S=(g=v.onClick)==null?void 0:g.call(v,h);if(S){this.editor.mark("shape on click"),this.editor.updateShapes([S]),this.parent.transition("idle",e);return}}if(h.id===o){r.length>0?(this.editor.mark("clearing shape ids"),this.editor.setSelectedShapes([])):this.editor.popFocusedGroupId(),this.parent.transition("idle",e);return}}if(!this.didSelectOnEnter){const v=this.editor.getOutermostSelectableShape(d,S=>!r.includes(S.id));if(r.includes(v.id))if(u)this.editor.mark("deselecting on pointer up"),this.editor.deselect(h);else if(r.includes(h.id)){if(r.length===1&&(this.editor.isShapeOfType(h,"geo")||this.editor.isShapeOfType(h,"arrow"))){const w=this.editor.getShapeGeometry(h).children[1];if(w){const k=this.editor.getPointInShapeSpace(h,l);if(w.bounds.containsPoint(k,0)&&w.hitTestPoint(k)){this.editor.batch(()=>{this.editor.mark("editing on pointer up"),this.editor.select(h.id);const C=this.editor.getShapeUtil(h);this.editor.getInstanceState().isReadonly&&!C.canEditInReadOnly(h)||(this.editor.setEditingShape(h.id),this.editor.setCurrentTool("select.editing_shape"))});return}}}this.editor.mark("selecting on pointer up"),this.editor.select(h.id)}else this.editor.mark("selecting on pointer up"),this.editor.select(h);else if(u){const S=this.editor.getShapeAncestors(v);this.editor.mark("shift deselecting on pointer up"),this.editor.setSelectedShapes([...this.editor.getSelectedShapeIds().filter(w=>!S.find(k=>k.id===w)),v.id])}else this.editor.mark("selecting on pointer up"),this.editor.setSelectedShapes([v.id])}this.parent.transition("idle",e)});T(this,"onPointerMove",e=>{if(this.editor.inputs.isDragging){if(this.editor.getInstanceState().isReadonly)return;this.parent.transition("translating",e)}});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.cancel()});T(this,"onInterrupt",()=>{this.cancel()})}cancel(){this.parent.transition("idle")}}T($N,"id","pointing_shape");class ON extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"markId","");T(this,"didHoldCommand",!1);T(this,"creationCursorOffset",{x:0,y:0});T(this,"snapshot",{});T(this,"onEnter",e=>{const{isCreating:r=!1,creationCursorOffset:o={x:0,y:0}}=e;this.info=e,this.didHoldCommand=!1,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.creationCursorOffset=o,this.snapshot=this._createSnapshot(),r?(this.markId=`creating:${this.editor.getOnlySelectedShape().id}`,this.editor.updateInstanceState({cursor:{type:"cross",rotation:0}},{ephemeral:!0})):(this.markId="starting resizing",this.editor.mark(this.markId)),this.handleResizeStart(),this.updateShapes()});T(this,"onTick",()=>{wR(this.editor)});T(this,"onPointerMove",()=>{this.updateShapes()});T(this,"onKeyDown",()=>{this.updateShapes()});T(this,"onKeyUp",()=>{this.updateShapes()});T(this,"onPointerUp",()=>{this.complete()});T(this,"onComplete",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()});T(this,"onExit",()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.editor.snaps.clear()});T(this,"_createSnapshot",()=>{const e=this.editor.getSelectedShapeIds(),r=this.editor.getSelectionRotation(),{inputs:{originPagePoint:o}}=this.editor,a=this.editor.getSelectionRotatedPageBounds(),l=N.RotWith(a.getHandlePoint(this.info.handle),a.point,r),u=N.Sub(o,l),d=new Map,h=[];e.forEach(v=>{const S=this.editor.getShape(v);if(S){if(S.type==="frame"&&h.push({id:v,children:Bt(this.editor.getSortedChildIdsForParent(S).map(w=>this.editor.getShape(w)))}),d.set(S.id,this._createShapeSnapshot(S)),this.editor.isShapeOfType(S,"frame")&&e.length===1)return;this.editor.visitDescendants(S.id,w=>{const k=this.editor.getShape(w);if(k&&(d.set(k.id,this._createShapeSnapshot(k)),this.editor.isShapeOfType(k,"frame")))return!1})}});const g=![...d.values()].some(v=>!VL(v.pageRotation,r)||v.isAspectRatioLocked);return{shapeSnapshots:d,selectionBounds:a,cursorHandleOffset:u,selectionRotation:r,selectedShapeIds:e,canShapesDeform:g,initialSelectionPageBounds:this.editor.getSelectionPageBounds(),frames:h}});T(this,"_createShapeSnapshot",e=>{const r=this.editor.getShapePageTransform(e),o=this.editor.getShapeUtil(e);return{shape:e,bounds:this.editor.getShapeGeometry(e).bounds,pageTransform:r,pageRotation:yt.Decompose(r).rotation,isAspectRatioLocked:o.isAspectRatioLocked(e)}})}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}complete(){var e,r;if(this.handleResizeEnd(),this.info.isCreating&&this.info.onCreate){(r=(e=this.info).onCreate)==null||r.call(e,this.editor.getOnlySelectedShape());return}if(this.editor.getInstanceState().isToolLocked&&this.info.onInteractionEnd){this.editor.setCurrentTool(this.info.onInteractionEnd,{});return}this.parent.transition("idle")}handleResizeStart(){const{shapeSnapshots:e}=this.snapshot,r=[];e.forEach(({shape:o})=>{var u;const a=this.editor.getShapeUtil(o),l=(u=a.onResizeStart)==null?void 0:u.call(a,o);l&&r.push(l)}),r.length>0&&this.editor.updateShapes(r)}handleResizeEnd(){const{shapeSnapshots:e}=this.snapshot,r=[];e.forEach(({shape:o})=>{var d;const a=this.editor.getShape(o.id),l=this.editor.getShapeUtil(o),u=(d=l.onResizeEnd)==null?void 0:d.call(l,o,a);u&&r.push(u)}),r.length>0&&this.editor.updateShapes(r)}updateShapes(){const{altKey:e,shiftKey:r}=this.editor.inputs,{frames:o,shapeSnapshots:a,selectionBounds:l,cursorHandleOffset:u,selectedShapeIds:d,selectionRotation:h,canShapesDeform:g}=this.snapshot,v=r||!g,{ctrlKey:S}=this.editor.inputs,w=this.editor.inputs.currentPagePoint.clone().sub(u).sub(this.creationCursorOffset),k=this.editor.inputs.originPagePoint.clone().sub(u);if(this.editor.getInstanceState().isGridMode&&!S){const{gridSize:Y}=this.editor.getDocumentSettings();w.snapToGrid(Y)}const C=this.info.handle,E=v5(C,Math.PI);if(this.editor.snaps.clear(),(this.editor.user.getIsSnapMode()?!S:S)&&h%Pr===0){const{nudge:Y}=this.editor.snaps.snapResize({dragDelta:N.Sub(w,k),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:v5(C,h),isAspectRatioLocked:v,isResizingFromCenter:e});w.add(Y)}const L=N.RotWith(e?l.center:l.getHandlePoint(E),l.point,h),A=N.Sub(w,L).rot(-h),O=N.Sub(k,L).rot(-h),D=N.DivV(A,O);Number.isFinite(D.x)||(D.x=1),Number.isFinite(D.y)||(D.y=1);const z=C==="top"||C==="bottom",U=C==="left"||C==="right";v?U?D.y=Math.abs(D.x):z?D.x=Math.abs(D.y):Math.abs(D.x)>Math.abs(D.y)?D.y=Math.abs(D.x)*(D.y<0?-1:1):D.x=Math.abs(D.y)*(D.x<0?-1:1):(z&&(D.x=1),U&&(D.y=1)),this.info.isCreating||this.updateCursor({dragHandle:C,isFlippedX:D.x<0,isFlippedY:D.y<0,rotation:h});for(const Y of a.keys()){const q=a.get(Y);this.editor.resizeShape(Y,D,{initialShape:q.shape,initialBounds:q.bounds,initialPageTransform:q.pageTransform,dragHandle:C,mode:d.length===1&&Y===d[0]?"resize_bounds":"scale_shape",scaleOrigin:L,scaleAxisRotation:h})}if(this.editor.inputs.ctrlKey){this.didHoldCommand=!0;for(const{id:Y,children:q}of o){if(!q.length)continue;const X=a.get(Y).shape,ie=this.editor.getShape(Y);if(!(X&&ie))continue;const pe=ie.x-X.x,ae=ie.y-X.y,te=new N(pe,ae).rot(-X.rotation);if(te.x!==0||te.y!==0)for(const he of q)this.editor.updateShape({id:he.id,type:he.type,x:he.x-te.x,y:he.y-te.y})}}else if(this.didHoldCommand){this.didHoldCommand=!1;for(const{children:Y}of o)if(Y.length)for(const q of Y)this.editor.updateShape({id:q.id,type:q.type,x:q.x,y:q.y})}}updateCursor({dragHandle:e,isFlippedX:r,isFlippedY:o,rotation:a}){const l={...this.editor.getInstanceState().cursor};switch(e){case"top_left":case"bottom_right":{l.type="nwse-resize",r!==o&&(l.type="nesw-resize");break}case"top_right":case"bottom_left":{l.type="nesw-resize",r!==o&&(l.type="nwse-resize");break}}l.rotation=a,this.editor.setCursor(l)}}T(ON,"id","resizing");const q2=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function v5(t,n){n=n%or;const e=Math.round(n/(Jn/4)),r=q2.indexOf(t);return q2[(r+e)%q2.length]}const y5=Math.PI/180;class DN extends Et{constructor(){super(...arguments);T(this,"snapshot",{});T(this,"info",{});T(this,"markId","");T(this,"onEnter",e=>{this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.markId="rotate start",this.editor.mark(this.markId);const r=R4({editor:this.editor});if(!r)return this.parent.transition("idle",this.info);this.snapshot=r,this.handleStart()});T(this,"onExit",()=>{this.editor.setCursor({type:"default",rotation:0}),this.parent.setCurrentToolIdMask(void 0),this.snapshot={}});T(this,"onPointerMove",()=>{this.update()});T(this,"onKeyDown",()=>{this.update()});T(this,"onKeyUp",()=>{this.update()});T(this,"onPointerUp",()=>{this.complete()});T(this,"onComplete",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()});T(this,"update",()=>{const e=this._getRotationFromPointerPosition({snapToNearestDegree:!1});d1({editor:this.editor,delta:e,snapshot:this.snapshot,stage:"update"}),this.editor.updateInstanceState({cursor:{type:Om[this.info.handle],rotation:e+this.snapshot.initialSelectionRotation}})});T(this,"cancel",()=>{this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)});T(this,"complete",()=>{d1({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:this.snapshot,stage:"end"}),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)})}handleStart(){const e=this._getRotationFromPointerPosition({snapToNearestDegree:!1});d1({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.editor.updateInstanceState({cursor:{type:Om[this.info.handle],rotation:e+this.snapshot.initialSelectionRotation}})}_getRotationFromPointerPosition({snapToNearestDegree:e}){const r=this.editor.getSelectionRotation(),o=this.editor.getSelectionRotatedPageBounds(),{inputs:{shiftKey:a,currentPagePoint:l}}=this.editor,{initialCursorAngle:u,initialSelectionRotation:d}=this.snapshot;if(!o)return d;const g=o.center.clone().rotWith(o.point,r).angle(l)-u;let v=d+g;if(a)v=aC(v,24);else if(e&&(v=Math.round(v/y5)*y5,this.editor.getInstanceState().isCoarsePointer)){const S=aC(v,4),w=DS(v,S);Math.abs(w)<mW(5)&&(v=S)}return v-d}}T(DN,"id","rotating");class LN extends Et{constructor(){super(...arguments);T(this,"hits",new Set);T(this,"size",0);T(this,"scribbleId","id");T(this,"initialSelectedShapeIds",new Set);T(this,"newlySelectedShapeIds",new Set);T(this,"onEnter",()=>{this.initialSelectedShapeIds=new Set(this.editor.inputs.shiftKey?this.editor.getSelectedShapeIds():[]),this.newlySelectedShapeIds=new Set,this.size=0,this.hits.clear();const e=this.editor.scribbles.addScribble({color:"selection-stroke",opacity:.32,size:12});this.scribbleId=e.id,this.updateScribbleSelection(!0),requestAnimationFrame(()=>{this.editor.updateInstanceState({brush:null})})});T(this,"onExit",()=>{this.editor.scribbles.stop(this.scribbleId)});T(this,"onPointerMove",()=>{this.updateScribbleSelection(!0)});T(this,"onPointerUp",()=>{this.complete()});T(this,"onKeyDown",()=>{this.updateScribbleSelection(!1)});T(this,"onKeyUp",()=>{this.editor.inputs.altKey?this.updateScribbleSelection(!1):this.parent.transition("brushing")});T(this,"onCancel",()=>{this.cancel()});T(this,"onComplete",()=>{this.complete()});T(this,"pushPointToScribble",()=>{const{x:e,y:r}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,e,r)})}updateScribbleSelection(e){const r=this.editor.getZoomLevel(),o=this.editor.getCurrentPageShapes(),{inputs:{shiftKey:a,originPagePoint:l,previousPagePoint:u,currentPagePoint:d}}=this.editor,{newlySelectedShapeIds:h,initialSelectedShapeIds:g}=this;e&&this.pushPointToScribble();const v=o;let S,w,k,C;for(let E=0,R=v.length;E<R;E++)if(S=v[E],w=this.editor.getShapeGeometry(S),!(this.editor.isShapeOfType(S,"group")||h.has(S.id)||this.editor.isShapeOrAncestorLocked(S))){if(this.editor.isShapeOfType(S,"frame")){const L=this.editor.getPointInShapeSpace(S,l);if(w.bounds.containsPoint(L))continue}if(k=this.editor.getPointInShapeSpace(S,u),C=this.editor.getPointInShapeSpace(S,d),w.hitTestLineSegment(k,C,Jl/r)){const L=this.editor.getOutermostSelectableShape(S),A=this.editor.getShapeMask(L.id);if(A&&x4(u,d,A)!==null&&!qc(d,A))continue;h.add(L.id)}}this.editor.setSelectedShapes([...new Set(a?[...h,...g]:[...h])],{squashing:!0})}complete(){this.parent.transition("idle")}cancel(){this.editor.setSelectedShapes([...this.initialSelectedShapeIds],{squashing:!0}),this.parent.transition("idle")}}T(LN,"id","scribble_brushing");const S5=100;class Vle{constructor(n){T(this,"prevDroppingShapeId",null);T(this,"droppingNodeTimer",null);T(this,"first",!0);T(this,"dispose",()=>{this.clear()});this.editor=n,n.disposables.add(this.dispose)}updateDroppingNode(n,e){var r;this.first&&(this.prevDroppingShapeId=((r=this.editor.getDroppingOverShape(this.editor.inputs.originPagePoint,n))==null?void 0:r.id)??null,this.first=!1),this.droppingNodeTimer===null?this.setDragTimer(n,S5*10,e):this.editor.inputs.pointerVelocity.len()>.5&&(clearInterval(this.droppingNodeTimer),this.setDragTimer(n,S5,e))}setDragTimer(n,e,r){this.droppingNodeTimer=setTimeout(()=>{this.editor.batch(()=>{this.handleDrag(this.editor.inputs.currentPagePoint,n,r)}),this.droppingNodeTimer=null},e)}handleDrag(n,e,r){var d,h,g,v,S;e=Bt(e.map(w=>this.editor.getShape(w.id)));const o=((d=this.editor.getDroppingOverShape(n,e))==null?void 0:d.id)??null;if(o===this.prevDroppingShapeId)return;const{prevDroppingShapeId:a}=this,l=a&&this.editor.getShape(a),u=o&&this.editor.getShape(o);if(l&&((g=(h=this.editor.getShapeUtil(l)).onDragShapesOut)==null||g.call(h,l,e)),u){const w=(S=(v=this.editor.getShapeUtil(u)).onDragShapesOver)==null?void 0:S.call(v,u,e);w&&w.shouldHint&&this.editor.setHintingShapes([u.id])}else this.editor.setHintingShapes([]);r==null||r(),this.prevDroppingShapeId=o}dropShapes(n){var r,o;const{prevDroppingShapeId:e}=this;if(this.handleDrag(this.editor.inputs.currentPagePoint,n),e){const a=this.editor.getShape(e);if(!a)return;(o=(r=this.editor.getShapeUtil(a)).onDropShapesOver)==null||o.call(r,a,n)}}clear(){this.prevDroppingShapeId=null,this.droppingNodeTimer!==null&&clearInterval(this.droppingNodeTimer),this.droppingNodeTimer=null,this.editor.setHintingShapes([]),this.first=!0}}class jN extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"selectionSnapshot",{});T(this,"snapshot",{});T(this,"markId","");T(this,"isCloning",!1);T(this,"isCreating",!1);T(this,"onCreate",()=>{});T(this,"dragAndDropManager",new Vle(this.editor));T(this,"onEnter",e=>{const{isCreating:r=!1,onCreate:o=()=>{}}=e;if(this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.isCreating=r,this.onCreate=o,r?this.markId=`creating:${this.editor.getOnlySelectedShape().id}`:(this.markId="translating",this.editor.mark(this.markId)),this.isCloning=!1,this.info=e,this.editor.setCursor({type:"move",rotation:0}),this.selectionSnapshot=b5(this.editor),!this.isCreating&&this.editor.inputs.altKey){this.startCloning();return}this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes()});T(this,"onExit",()=>{this.parent.setCurrentToolIdMask(void 0),this.selectionSnapshot={},this.snapshot={},this.editor.snaps.clear(),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.dragAndDropManager.clear()});T(this,"onTick",()=>{this.dragAndDropManager.updateDroppingNode(this.snapshot.movingShapes,this.updateParentTransforms),wR(this.editor)});T(this,"onPointerMove",()=>{this.updateShapes()});T(this,"onKeyDown",()=>{if(this.editor.inputs.altKey&&!this.isCloning){this.startCloning();return}this.updateShapes()});T(this,"onKeyUp",()=>{if(!this.editor.inputs.altKey&&this.isCloning){this.stopCloning();return}this.updateShapes()});T(this,"onPointerUp",()=>{this.complete()});T(this,"onComplete",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()});T(this,"updateParentTransforms",()=>{const{editor:e,snapshot:{shapeSnapshots:r}}=this;r.forEach(o=>{const a=e.getShape(o.shape.id);if(!a)return null;const l=Js(a.parentId)?null:yt.Inverse(e.getShapePageTransform(a.parentId));o.parentTransform=l})})}startCloning(){this.isCreating||(this.isCloning=!0,this.reset(),this.markId="translating",this.editor.mark(this.markId),this.editor.duplicateShapes(Array.from(this.editor.getSelectedShapeIds())),this.snapshot=b5(this.editor),this.handleStart(),this.updateShapes())}stopCloning(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId="translating",this.editor.mark(this.markId),this.updateShapes()}reset(){this.editor.bailToMark(this.markId)}complete(){var e;this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),this.handleEnd(),this.editor.getInstanceState().isToolLocked&&this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd):this.isCreating?(e=this.onCreate)==null||e.call(this,this.editor.getOnlySelectedShape()):this.parent.transition("idle")}cancel(){this.reset(),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd):this.parent.transition("idle",this.info)}handleStart(){const{movingShapes:e}=this.snapshot,r=[];e.forEach(o=>{var u;const a=this.editor.getShapeUtil(o),l=(u=a.onTranslateStart)==null?void 0:u.call(a,o);l&&r.push(l)}),r.length>0&&this.editor.updateShapes(r),this.editor.setHoveredShape(null)}handleEnd(){const{movingShapes:e}=this.snapshot,r=[];e.forEach(o=>{var d;const a=this.editor.getShape(o.id),l=this.editor.getShapeUtil(o),u=(d=l.onTranslateEnd)==null?void 0:d.call(l,o,a);u&&r.push(u)}),r.length>0&&this.editor.updateShapes(r)}handleChange(){const{movingShapes:e}=this.snapshot,r=[];e.forEach(o=>{var d;const a=this.editor.getShape(o.id),l=this.editor.getShapeUtil(o),u=(d=l.onTranslate)==null?void 0:d.call(l,o,a);u&&r.push(u)}),r.length>0&&this.editor.updateShapes(r)}updateShapes(){const{snapshot:e}=this;this.dragAndDropManager.updateDroppingNode(e.movingShapes,this.updateParentTransforms),Kle({editor:this.editor,shapeSnapshots:e.shapeSnapshots,averagePagePoint:e.averagePagePoint,initialSelectionPageBounds:e.initialPageBounds,initialSelectionSnapPoints:e.initialSnapPoints}),this.handleChange()}}T(jN,"id","translating");function b5(t){const n=[],e=[],r=Bt(t.getSelectedShapeIds().map(a=>{const l=t.getShape(a);if(!l)return null;n.push(l);const u=t.getShapePageTransform(a).point();if(!u)return null;e.push(u);const d=cd.isId(l.parentId)?null:yt.Inverse(t.getShapePageTransform(l.parentId));return{shape:l,pagePoint:u,parentTransform:d}}));let o=[];if(t.getSelectedShapeIds().length===1)o=t.snaps.getSnapPointsCache().get(t.getSelectedShapeIds()[0]);else{const a=t.getSelectionPageBounds();a&&(o=a.snapPoints.map((l,u)=>({id:"selection:"+u,x:l.x,y:l.y})))}return{averagePagePoint:N.Average(e),movingShapes:n,shapeSnapshots:r,initialPageBounds:t.getSelectionPageBounds(),initialSnapPoints:o}}function Kle({editor:t,shapeSnapshots:n,averagePagePoint:e,initialSelectionPageBounds:r,initialSelectionSnapPoints:o}){const{inputs:a}=t,l=t.getInstanceState().isGridMode,u=t.getDocumentSettings().gridSize,d=N.Sub(a.currentPagePoint,a.originPagePoint),h=t.inputs.shiftKey?Math.abs(d.x)<Math.abs(d.y)?"x":"y":null;if(h==="x"?d.x=0:h==="y"&&(d.y=0),t.snaps.clear(),(t.user.getIsSnapMode()?!a.ctrlKey:a.ctrlKey)&&t.inputs.pointerVelocity.len()<.5){const{nudge:w}=t.snaps.snapTranslate({dragDelta:d,initialSelectionPageBounds:r,lockedAxis:h,initialSelectionSnapPoints:o});d.add(w)}const v=N.Add(e,d);l&&!a.ctrlKey&&v.snapToGrid(u);const S=N.Sub(v,e);t.updateShapes(Bt(n.map(({shape:w,pagePoint:k,parentTransform:C})=>{const E=N.Add(k,S),R=C?yt.applyToPoint(C,E):E;return{id:w.id,type:w.type,x:R.x,y:R.y}})),{squashing:!0})}class F1 extends Et{constructor(){super(...arguments);T(this,"onExit",()=>{this.editor.getCurrentPageState().editingShapeId&&this.editor.setEditingShape(null)})}}T(F1,"id","select"),T(F1,"initial","idle"),T(F1,"children",()=>[z1,_N,Fle,PN,$N,jN,bN,LN,IN,AN,EN,kN,ON,DN,MN,RN,TN]);class NN extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"onEnter",e=>{this.info=e});T(this,"onPointerDown",()=>{this.parent.transition("pointing",this.info)})}}T(NN,"id","idle");class zN extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"onEnter",e=>{this.info=e});T(this,"onPointerUp",()=>{this.complete()});T(this,"onPointerMove",()=>{this.editor.inputs.isDragging&&this.parent.transition("zoom_brushing",this.info)});T(this,"onCancel",()=>{this.cancel()})}complete(){const{currentScreenPoint:e}=this.editor.inputs;this.editor.inputs.altKey?this.editor.zoomOut(e,{duration:220}):this.editor.zoomIn(e,{duration:220}),this.parent.transition("idle",this.info)}cancel(){this.parent.transition("idle",this.info)}}T(zN,"id","pointing");class FN extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"zoomBrush",new Mt);T(this,"onEnter",e=>{this.info=e,this.update()});T(this,"onExit",()=>{this.editor.updateInstanceState({zoomBrush:null})});T(this,"onPointerMove",()=>{this.update()});T(this,"onPointerUp",()=>{this.complete()});T(this,"onCancel",()=>{this.cancel()})}update(){const{inputs:{originPagePoint:e,currentPagePoint:r}}=this.editor;this.zoomBrush.setTo(Mt.FromPoints([e,r])),this.editor.updateInstanceState({zoomBrush:this.zoomBrush.toJson()})}cancel(){this.parent.transition("idle",this.info)}complete(){const{zoomBrush:e}=this,r=8/this.editor.getZoomLevel();if(e.width<r&&e.height<r){const o=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(o,{duration:220}):this.editor.zoomIn(o,{duration:220})}else{const o=this.editor.inputs.altKey?this.editor.getZoomLevel()/2:void 0;this.editor.zoomToBounds(e,o,{duration:220})}this.parent.transition("idle",this.info)}}T(FN,"id","zoom_brushing");class U1 extends Et{constructor(){super(...arguments);T(this,"info",{});T(this,"onEnter",e=>{this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.updateCursor()});T(this,"onExit",()=>{this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({zoomBrush:null,cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.parent.setCurrentToolIdMask(void 0)});T(this,"onKeyDown",()=>{this.updateCursor()});T(this,"onKeyUp",e=>{this.updateCursor(),e.code==="KeyZ"&&this.complete()});T(this,"onInterrupt",()=>{this.complete()})}complete(){this.info.onInteractionEnd&&this.info.onInteractionEnd!=="select"?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("select")}updateCursor(){this.editor.inputs.altKey?this.editor.updateInstanceState({cursor:{type:"zoom-out",rotation:0}},{ephemeral:!0}):this.editor.updateInstanceState({cursor:{type:"zoom-in",rotation:0}},{ephemeral:!0})}}T(U1,"id","zoom"),T(U1,"initial","idle"),T(U1,"children",()=>[NN,FN,zN]);const Yle=[L1,j1,N1,U1,F1];function Ze(){return Ze=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Ze.apply(this,arguments)}function Ct(t,n,{checkForDefaultPrevented:e=!0}={}){return function(o){if(t==null||t(o),e===!1||!o.defaultPrevented)return n==null?void 0:n(o)}}function Wle(t,n){typeof t=="function"?t(n):t!=null&&(t.current=n)}function JC(...t){return n=>t.forEach(e=>Wle(e,n))}function Rr(...t){return I.useCallback(JC(...t),t)}function nu(t,n=[]){let e=[];function r(a,l){const u=I.createContext(l),d=e.length;e=[...e,l];function h(v){const{scope:S,children:w,...k}=v,C=(S==null?void 0:S[t][d])||u,E=I.useMemo(()=>k,Object.values(k));return I.createElement(C.Provider,{value:E},w)}function g(v,S){const w=(S==null?void 0:S[t][d])||u,k=I.useContext(w);if(k)return k;if(l!==void 0)return l;throw new Error(`\`${v}\` must be used within \`${a}\``)}return h.displayName=a+"Provider",[h,g]}const o=()=>{const a=e.map(l=>I.createContext(l));return function(u){const d=(u==null?void 0:u[t])||a;return I.useMemo(()=>({[`__scope${t}`]:{...u,[t]:d}}),[u,d])}};return o.scopeName=t,[r,Gle(o,...n)]}function Gle(...t){const n=t[0];if(t.length===1)return n;const e=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const l=r.reduce((u,{useScope:d,scopeName:h})=>{const v=d(a)[`__scope${h}`];return{...u,...v}},{});return I.useMemo(()=>({[`__scope${n.scopeName}`]:l}),[l])}};return e.scopeName=n.scopeName,e}const tp=I.forwardRef((t,n)=>{const{children:e,...r}=t,o=I.Children.toArray(e),a=o.find(qle);if(a){const l=a.props.children,u=o.map(d=>d===a?I.Children.count(l)>1?I.Children.only(null):I.isValidElement(l)?l.props.children:null:d);return I.createElement(yI,Ze({},r,{ref:n}),I.isValidElement(l)?I.cloneElement(l,void 0,u):null)}return I.createElement(yI,Ze({},r,{ref:n}),e)});tp.displayName="Slot";const yI=I.forwardRef((t,n)=>{const{children:e,...r}=t;return I.isValidElement(e)?I.cloneElement(e,{...Qle(r,e.props),ref:n?JC(n,e.ref):e.ref}):I.Children.count(e)>1?I.Children.only(null):null});yI.displayName="SlotClone";const Xle=({children:t})=>I.createElement(I.Fragment,null,t);function qle(t){return I.isValidElement(t)&&t.type===Xle}function Qle(t,n){const e={...n};for(const r in n){const o=t[r],a=n[r];/^on[A-Z]/.test(r)?o&&a?e[r]=(...u)=>{a(...u),o(...u)}:o&&(e[r]=o):r==="style"?e[r]={...o,...a}:r==="className"&&(e[r]=[o,a].filter(Boolean).join(" "))}return{...t,...e}}function eE(t){const n=t+"CollectionProvider",[e,r]=nu(n),[o,a]=e(n,{collectionRef:{current:null},itemMap:new Map}),l=w=>{const{scope:k,children:C}=w,E=ft.useRef(null),R=ft.useRef(new Map).current;return ft.createElement(o,{scope:k,itemMap:R,collectionRef:E},C)},u=t+"CollectionSlot",d=ft.forwardRef((w,k)=>{const{scope:C,children:E}=w,R=a(u,C),L=Rr(k,R.collectionRef);return ft.createElement(tp,{ref:L},E)}),h=t+"CollectionItemSlot",g="data-radix-collection-item",v=ft.forwardRef((w,k)=>{const{scope:C,children:E,...R}=w,L=ft.useRef(null),A=Rr(k,L),O=a(h,C);return ft.useEffect(()=>(O.itemMap.set(L,{ref:L,...R}),()=>void O.itemMap.delete(L))),ft.createElement(tp,{[g]:"",ref:A},E)});function S(w){const k=a(t+"CollectionConsumer",w);return ft.useCallback(()=>{const E=k.collectionRef.current;if(!E)return[];const R=Array.from(E.querySelectorAll(`[${g}]`));return Array.from(k.itemMap.values()).sort((O,D)=>R.indexOf(O.ref.current)-R.indexOf(D.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:l,Slot:d,ItemSlot:v},S,r]}const Zle=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],hr=Zle.reduce((t,n)=>{const e=I.forwardRef((r,o)=>{const{asChild:a,...l}=r,u=a?tp:n;return I.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),I.createElement(u,Ze({},l,{ref:o}))});return e.displayName=`Primitive.${n}`,{...t,[n]:e}},{});function qR(t,n){t&&Lm.flushSync(()=>t.dispatchEvent(n))}function rs(t){const n=I.useRef(t);return I.useEffect(()=>{n.current=t}),I.useMemo(()=>(...e)=>{var r;return(r=n.current)===null||r===void 0?void 0:r.call(n,...e)},[])}function Jle(t,n=globalThis==null?void 0:globalThis.document){const e=rs(t);I.useEffect(()=>{const r=o=>{o.key==="Escape"&&e(o)};return n.addEventListener("keydown",r),()=>n.removeEventListener("keydown",r)},[e,n])}const SI="dismissableLayer.update",ece="dismissableLayer.pointerDownOutside",tce="dismissableLayer.focusOutside";let w5;const UN=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tE=I.forwardRef((t,n)=>{var e;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:l,onInteractOutside:u,onDismiss:d,...h}=t,g=I.useContext(UN),[v,S]=I.useState(null),w=(e=v==null?void 0:v.ownerDocument)!==null&&e!==void 0?e:globalThis==null?void 0:globalThis.document,[,k]=I.useState({}),C=Rr(n,Y=>S(Y)),E=Array.from(g.layers),[R]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),L=E.indexOf(R),A=v?E.indexOf(v):-1,O=g.layersWithOutsidePointerEventsDisabled.size>0,D=A>=L,z=rce(Y=>{const q=Y.target,X=[...g.branches].some(ie=>ie.contains(q));!D||X||(a==null||a(Y),u==null||u(Y),Y.defaultPrevented||d==null||d())},w),U=ice(Y=>{const q=Y.target;[...g.branches].some(ie=>ie.contains(q))||(l==null||l(Y),u==null||u(Y),Y.defaultPrevented||d==null||d())},w);return Jle(Y=>{A===g.layers.size-1&&(o==null||o(Y),!Y.defaultPrevented&&d&&(Y.preventDefault(),d()))},w),I.useEffect(()=>{if(v)return r&&(g.layersWithOutsidePointerEventsDisabled.size===0&&(w5=w.body.style.pointerEvents,w.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(v)),g.layers.add(v),x5(),()=>{r&&g.layersWithOutsidePointerEventsDisabled.size===1&&(w.body.style.pointerEvents=w5)}},[v,w,r,g]),I.useEffect(()=>()=>{v&&(g.layers.delete(v),g.layersWithOutsidePointerEventsDisabled.delete(v),x5())},[v,g]),I.useEffect(()=>{const Y=()=>k({});return document.addEventListener(SI,Y),()=>document.removeEventListener(SI,Y)},[]),I.createElement(hr.div,Ze({},h,{ref:C,style:{pointerEvents:O?D?"auto":"none":void 0,...t.style},onFocusCapture:Ct(t.onFocusCapture,U.onFocusCapture),onBlurCapture:Ct(t.onBlurCapture,U.onBlurCapture),onPointerDownCapture:Ct(t.onPointerDownCapture,z.onPointerDownCapture)}))}),nce=I.forwardRef((t,n)=>{const e=I.useContext(UN),r=I.useRef(null),o=Rr(n,r);return I.useEffect(()=>{const a=r.current;if(a)return e.branches.add(a),()=>{e.branches.delete(a)}},[e.branches]),I.createElement(hr.div,Ze({},t,{ref:o}))});function rce(t,n=globalThis==null?void 0:globalThis.document){const e=rs(t),r=I.useRef(!1),o=I.useRef(()=>{});return I.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){BN(ece,e,d,{discrete:!0})};const d={originalEvent:u};u.pointerType==="touch"?(n.removeEventListener("click",o.current),o.current=h,n.addEventListener("click",o.current,{once:!0})):h()}else n.removeEventListener("click",o.current);r.current=!1},l=window.setTimeout(()=>{n.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),n.removeEventListener("pointerdown",a),n.removeEventListener("click",o.current)}},[n,e]),{onPointerDownCapture:()=>r.current=!0}}function ice(t,n=globalThis==null?void 0:globalThis.document){const e=rs(t),r=I.useRef(!1);return I.useEffect(()=>{const o=a=>{a.target&&!r.current&&BN(tce,e,{originalEvent:a},{discrete:!1})};return n.addEventListener("focusin",o),()=>n.removeEventListener("focusin",o)},[n,e]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function x5(){const t=new CustomEvent(SI);document.dispatchEvent(t)}function BN(t,n,e,{discrete:r}){const o=e.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:e});n&&o.addEventListener(t,n,{once:!0}),r?qR(o,a):o.dispatchEvent(a)}const oce=tE,sce=nce,nE=I.forwardRef((t,n)=>{var e;const{container:r=globalThis==null||(e=globalThis.document)===null||e===void 0?void 0:e.body,...o}=t;return r?CV.createPortal(I.createElement(hr.div,Ze({},o,{ref:n})),r):null}),np=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{};function ace(t,n){return I.useReducer((e,r)=>{const o=n[e][r];return o??e},t)}const tc=t=>{const{present:n,children:e}=t,r=lce(n),o=typeof e=="function"?e({present:r.isPresent}):I.Children.only(e),a=Rr(r.ref,o.ref);return typeof e=="function"||r.isPresent?I.cloneElement(o,{ref:a}):null};tc.displayName="Presence";function lce(t){const[n,e]=I.useState(),r=I.useRef({}),o=I.useRef(t),a=I.useRef("none"),l=t?"mounted":"unmounted",[u,d]=ace(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const h=Gx(r.current);a.current=u==="mounted"?h:"none"},[u]),np(()=>{const h=r.current,g=o.current;if(g!==t){const S=a.current,w=Gx(h);t?d("MOUNT"):w==="none"||(h==null?void 0:h.display)==="none"?d("UNMOUNT"):d(g&&S!==w?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,d]),np(()=>{if(n){const h=v=>{const w=Gx(r.current).includes(v.animationName);v.target===n&&w&&Lm.flushSync(()=>d("ANIMATION_END"))},g=v=>{v.target===n&&(a.current=Gx(r.current))};return n.addEventListener("animationstart",g),n.addEventListener("animationcancel",h),n.addEventListener("animationend",h),()=>{n.removeEventListener("animationstart",g),n.removeEventListener("animationcancel",h),n.removeEventListener("animationend",h)}}else d("ANIMATION_END")},[n,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:I.useCallback(h=>{h&&(r.current=getComputedStyle(h)),e(h)},[])}}function Gx(t){return(t==null?void 0:t.animationName)||"none"}function Ff({prop:t,defaultProp:n,onChange:e=()=>{}}){const[r,o]=cce({defaultProp:n,onChange:e}),a=t!==void 0,l=a?t:r,u=rs(e),d=I.useCallback(h=>{if(a){const v=typeof h=="function"?h(t):h;v!==t&&u(v)}else o(h)},[a,t,o,u]);return[l,d]}function cce({defaultProp:t,onChange:n}){const e=I.useState(t),[r]=e,o=I.useRef(r),a=rs(n);return I.useEffect(()=>{o.current!==r&&(a(r),o.current=r)},[r,o,a]),e}const HN=I.forwardRef((t,n)=>I.createElement(hr.span,Ze({},t,{ref:n,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}))),VN="ToastProvider",[QR,uce,dce]=eE("Toast"),[KN,vve]=nu("Toast",[dce]),[fce,rE]=KN(VN),YN=t=>{const{__scopeToast:n,label:e="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:a=50,children:l}=t,[u,d]=I.useState(null),[h,g]=I.useState(0),v=I.useRef(!1),S=I.useRef(!1);return I.createElement(QR.Provider,{scope:n},I.createElement(fce,{scope:n,label:e,duration:r,swipeDirection:o,swipeThreshold:a,toastCount:h,viewport:u,onViewportChange:d,onToastAdd:I.useCallback(()=>g(w=>w+1),[]),onToastRemove:I.useCallback(()=>g(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:S},l))};YN.propTypes={label(t){if(t.label&&typeof t.label=="string"&&!t.label.trim()){const n=`Invalid prop \`label\` supplied to \`${VN}\`. Expected non-empty \`string\`.`;return new Error(n)}return null}};const hce="ToastViewport",pce=["F8"],bI="toast.viewportPause",wI="toast.viewportResume",gce=I.forwardRef((t,n)=>{const{__scopeToast:e,hotkey:r=pce,label:o="Notifications ({hotkey})",...a}=t,l=rE(hce,e),u=uce(e),d=I.useRef(null),h=I.useRef(null),g=I.useRef(null),v=I.useRef(null),S=Rr(n,v,l.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),k=l.toastCount>0;I.useEffect(()=>{const E=R=>{var L;r.every(O=>R[O]||R.code===O)&&((L=v.current)===null||L===void 0||L.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),I.useEffect(()=>{const E=d.current,R=v.current;if(k&&E&&R){const L=()=>{if(!l.isClosePausedRef.current){const z=new CustomEvent(bI);R.dispatchEvent(z),l.isClosePausedRef.current=!0}},A=()=>{if(l.isClosePausedRef.current){const z=new CustomEvent(wI);R.dispatchEvent(z),l.isClosePausedRef.current=!1}},O=z=>{!E.contains(z.relatedTarget)&&A()},D=()=>{E.contains(document.activeElement)||A()};return E.addEventListener("focusin",L),E.addEventListener("focusout",O),E.addEventListener("pointermove",L),E.addEventListener("pointerleave",D),window.addEventListener("blur",L),window.addEventListener("focus",A),()=>{E.removeEventListener("focusin",L),E.removeEventListener("focusout",O),E.removeEventListener("pointermove",L),E.removeEventListener("pointerleave",D),window.removeEventListener("blur",L),window.removeEventListener("focus",A)}}},[k,l.isClosePausedRef]);const C=I.useCallback(({tabbingDirection:E})=>{const L=u().map(A=>{const O=A.ref.current,D=[O,...Mce(O)];return E==="forwards"?D:D.reverse()});return(E==="forwards"?L.reverse():L).flat()},[u]);return I.useEffect(()=>{const E=v.current;if(E){const R=L=>{const A=L.altKey||L.ctrlKey||L.metaKey;if(L.key==="Tab"&&!A){const Y=document.activeElement,q=L.shiftKey;if(L.target===E&&q){var D;(D=h.current)===null||D===void 0||D.focus();return}const pe=C({tabbingDirection:q?"backwards":"forwards"}),ae=pe.findIndex(te=>te===Y);if(Q2(pe.slice(ae+1)))L.preventDefault();else{var z,U;q?(z=h.current)===null||z===void 0||z.focus():(U=g.current)===null||U===void 0||U.focus()}}};return E.addEventListener("keydown",R),()=>E.removeEventListener("keydown",R)}},[u,C]),I.createElement(sce,{ref:d,role:"region","aria-label":o.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:k?void 0:"none"}},k&&I.createElement(C5,{ref:h,onFocusFromOutsideViewport:()=>{const E=C({tabbingDirection:"forwards"});Q2(E)}}),I.createElement(QR.Slot,{scope:e},I.createElement(hr.ol,Ze({tabIndex:-1},a,{ref:S}))),k&&I.createElement(C5,{ref:g,onFocusFromOutsideViewport:()=>{const E=C({tabbingDirection:"backwards"});Q2(E)}}))}),mce="ToastFocusProxy",C5=I.forwardRef((t,n)=>{const{__scopeToast:e,onFocusFromOutsideViewport:r,...o}=t,a=rE(mce,e);return I.createElement(HN,Ze({"aria-hidden":!0,tabIndex:0},o,{ref:n,style:{position:"fixed"},onFocus:l=>{var u;const d=l.relatedTarget;!((u=a.viewport)!==null&&u!==void 0&&u.contains(d))&&r()}}))}),iE="Toast",vce="toast.swipeStart",yce="toast.swipeMove",Sce="toast.swipeCancel",bce="toast.swipeEnd",wce=I.forwardRef((t,n)=>{const{forceMount:e,open:r,defaultOpen:o,onOpenChange:a,...l}=t,[u=!0,d]=Ff({prop:r,defaultProp:o,onChange:a});return I.createElement(tc,{present:e||u},I.createElement(WN,Ze({open:u},l,{ref:n,onClose:()=>d(!1),onPause:rs(t.onPause),onResume:rs(t.onResume),onSwipeStart:Ct(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ct(t.onSwipeMove,h=>{const{x:g,y:v}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:Ct(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ct(t.onSwipeEnd,h=>{const{x:g,y:v}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),d(!1)})})))}),[xce,Cce]=KN(iE,{onClose(){}}),WN=I.forwardRef((t,n)=>{const{__scopeToast:e,type:r="foreground",duration:o,open:a,onClose:l,onEscapeKeyDown:u,onPause:d,onResume:h,onSwipeStart:g,onSwipeMove:v,onSwipeCancel:S,onSwipeEnd:w,...k}=t,C=rE(iE,e),[E,R]=I.useState(null),L=Rr(n,te=>R(te)),A=I.useRef(null),O=I.useRef(null),D=o||C.duration,z=I.useRef(0),U=I.useRef(D),Y=I.useRef(0),{onToastAdd:q,onToastRemove:X}=C,ie=rs(()=>{var te;(E==null?void 0:E.contains(document.activeElement))&&((te=C.viewport)===null||te===void 0||te.focus()),l()}),pe=I.useCallback(te=>{!te||te===1/0||(window.clearTimeout(Y.current),z.current=new Date().getTime(),Y.current=window.setTimeout(ie,te))},[ie]);I.useEffect(()=>{const te=C.viewport;if(te){const he=()=>{pe(U.current),h==null||h()},ce=()=>{const ge=new Date().getTime()-z.current;U.current=U.current-ge,window.clearTimeout(Y.current),d==null||d()};return te.addEventListener(bI,ce),te.addEventListener(wI,he),()=>{te.removeEventListener(bI,ce),te.removeEventListener(wI,he)}}},[C.viewport,D,d,h,pe]),I.useEffect(()=>{a&&!C.isClosePausedRef.current&&pe(D)},[a,D,C.isClosePausedRef,pe]),I.useEffect(()=>(q(),()=>X()),[q,X]);const ae=I.useMemo(()=>E?QN(E):null,[E]);return C.viewport?I.createElement(I.Fragment,null,ae&&I.createElement(Ece,{__scopeToast:e,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0},ae),I.createElement(xce,{scope:e,onClose:ie},Lm.createPortal(I.createElement(QR.ItemSlot,{scope:e},I.createElement(oce,{asChild:!0,onEscapeKeyDown:Ct(u,()=>{C.isFocusedToastEscapeKeyDownRef.current||ie(),C.isFocusedToastEscapeKeyDownRef.current=!1})},I.createElement(hr.li,Ze({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":C.swipeDirection},k,{ref:L,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ct(t.onKeyDown,te=>{te.key==="Escape"&&(u==null||u(te.nativeEvent),te.nativeEvent.defaultPrevented||(C.isFocusedToastEscapeKeyDownRef.current=!0,ie()))}),onPointerDown:Ct(t.onPointerDown,te=>{te.button===0&&(A.current={x:te.clientX,y:te.clientY})}),onPointerMove:Ct(t.onPointerMove,te=>{if(!A.current)return;const he=te.clientX-A.current.x,ce=te.clientY-A.current.y,ge=!!O.current,me=["left","right"].includes(C.swipeDirection),we=["left","up"].includes(C.swipeDirection)?Math.min:Math.max,V=me?we(0,he):0,Z=me?0:we(0,ce),Ce=te.pointerType==="touch"?10:2,Ae={x:V,y:Z},De={originalEvent:te,delta:Ae};ge?(O.current=Ae,Xx(yce,v,De,{discrete:!1})):E5(Ae,C.swipeDirection,Ce)?(O.current=Ae,Xx(vce,g,De,{discrete:!1}),te.target.setPointerCapture(te.pointerId)):(Math.abs(he)>Ce||Math.abs(ce)>Ce)&&(A.current=null)}),onPointerUp:Ct(t.onPointerUp,te=>{const he=O.current,ce=te.target;if(ce.hasPointerCapture(te.pointerId)&&ce.releasePointerCapture(te.pointerId),O.current=null,A.current=null,he){const ge=te.currentTarget,me={originalEvent:te,delta:he};E5(he,C.swipeDirection,C.swipeThreshold)?Xx(bce,w,me,{discrete:!0}):Xx(Sce,S,me,{discrete:!0}),ge.addEventListener("click",we=>we.preventDefault(),{once:!0})}})})))),C.viewport))):null});WN.propTypes={type(t){if(t.type&&!["foreground","background"].includes(t.type)){const n=`Invalid prop \`type\` supplied to \`${iE}\`. Expected \`foreground | background\`.`;return new Error(n)}return null}};const Ece=t=>{const{__scopeToast:n,children:e,...r}=t,o=rE(iE,n),[a,l]=I.useState(!1),[u,d]=I.useState(!1);return Ice(()=>l(!0)),I.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),u?null:I.createElement(nE,{asChild:!0},I.createElement(HN,r,a&&I.createElement(I.Fragment,null,o.label," ",e)))},_ce=I.forwardRef((t,n)=>{const{__scopeToast:e,...r}=t;return I.createElement(hr.div,Ze({},r,{ref:n}))}),Tce=I.forwardRef((t,n)=>{const{__scopeToast:e,...r}=t;return I.createElement(hr.div,Ze({},r,{ref:n}))}),kce="ToastAction",GN=I.forwardRef((t,n)=>{const{altText:e,...r}=t;return e?I.createElement(qN,{altText:e,asChild:!0},I.createElement(XN,Ze({},r,{ref:n}))):null});GN.propTypes={altText(t){return t.altText?null:new Error(`Missing prop \`altText\` expected on \`${kce}\``)}};const Pce="ToastClose",XN=I.forwardRef((t,n)=>{const{__scopeToast:e,...r}=t,o=Cce(Pce,e);return I.createElement(qN,{asChild:!0},I.createElement(hr.button,Ze({type:"button"},r,{ref:n,onClick:Ct(t.onClick,o.onClose)})))}),qN=I.forwardRef((t,n)=>{const{__scopeToast:e,altText:r,...o}=t;return I.createElement(hr.div,Ze({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},o,{ref:n}))});function QN(t){const n=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&n.push(r.textContent),Rce(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!o)if(a){const l=r.dataset.radixToastAnnounceAlt;l&&n.push(l)}else n.push(...QN(r))}}),n}function Xx(t,n,e,{discrete:r}){const o=e.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:e});n&&o.addEventListener(t,n,{once:!0}),r?qR(o,a):o.dispatchEvent(a)}const E5=(t,n,e=0)=>{const r=Math.abs(t.x),o=Math.abs(t.y),a=r>o;return n==="left"||n==="right"?a&&r>e:!a&&o>e};function Ice(t=()=>{}){const n=rs(t);np(()=>{let e=0,r=0;return e=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(n)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}},[n])}function Rce(t){return t.nodeType===t.ELEMENT_NODE}function Mce(t){const n=[],e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)n.push(e.currentNode);return n}function Q2(t){const n=document.activeElement;return t.some(e=>e===n?!0:(e.focus(),document.activeElement!==n))}const Ace=wce,$ce=_ce,Oce=Tce,Dce=GN,_5=XN,Xh="2.0.0-beta.2";let xI={fonts:{draw:`https://unpkg.com/@tldraw/assets@${Xh}/fonts/Shantell_Sans-Tldrawish.woff2`,serif:`https://unpkg.com/@tldraw/assets@${Xh}/fonts/IBMPlexSerif-Medium.woff2`,sansSerif:`https://unpkg.com/@tldraw/assets@${Xh}/fonts/IBMPlexSans-Medium.woff2`,monospace:`https://unpkg.com/@tldraw/assets@${Xh}/fonts/IBMPlexMono-Medium.woff2`}};function Lce(t){return I.useMemo(()=>t?{fonts:{...xI.fonts,...t==null?void 0:t.fonts}}:xI,[t])}const jce=["align-bottom-center","align-bottom-left","align-bottom-right","align-bottom","align-center-center","align-center-horizontal","align-center-left","align-center-right","align-center-vertical","align-left","align-right","align-top-center","align-top-left","align-top-right","align-top","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","aspect-ratio","avatar","blob","bring-forward","bring-to-front","check","checkbox-checked","checkbox-empty","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copied","clipboard-copy","code","collab","color","comment","cross-2","cross","dash-dashed","dash-dotted","dash-draw","dash-solid","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","drag-handle-dots","duplicate","edit","external-link","file","fill-none","fill-pattern","fill-semi","fill-solid","follow","following","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-check-box","geo-cloud","geo-diamond","geo-ellipse","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","hidden","image","info-circle","leading","link","lock-small","lock","menu","minus","mixed","pack","page","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","ruler","search","send-backward","send-to-back","settings-horizontal","settings-vertical-1","settings-vertical","share-1","share-2","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","status-offline","status-online","stretch-horizontal","stretch-vertical","text-align-center","text-align-justify","text-align-left","text-align-right","tool-arrow","tool-embed","tool-eraser","tool-frame","tool-hand","tool-highlight","tool-laser","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-text","trash","triangle-down","triangle-up","twitter","undo","ungroup","unlock-small","unlock","vertical-align-center","vertical-align-end","vertical-align-start","visible","warning-triangle","zoom-in","zoom-out"];let xS={...xI,icons:Object.fromEntries(jce.map(t=>[t,`https://unpkg.com/@tldraw/assets@${Xh}/icons/icon/${t}.svg`])),translations:Object.fromEntries(VS.map(t=>[t.locale,`https://unpkg.com/@tldraw/assets@${Xh}/translations/${t.locale}.json`])),embedIcons:Object.fromEntries(Mm.map(t=>[t.type,`https://unpkg.com/@tldraw/assets@${Xh}/embed-icons/${t.type}.png`]))};function Nce(t){return t?{fonts:Object.assign({...xS.fonts},{...t==null?void 0:t.fonts}),icons:Object.assign({...xS.icons},{...t==null?void 0:t.icons}),embedIcons:Object.assign({...xS.embedIcons},{...t==null?void 0:t.embedIcons}),translations:Object.assign({...xS.translations},{...t==null?void 0:t.translations})}:xS}function zce(t,n){const e=Bt(n.map(o=>t.getShape(o)).filter(o=>o&&t.isShapeOfType(o,"frame")));if(!e.length)return;const r=[];t.batch(()=>{e.map(o=>{const a=t.getSortedChildIdsForParent(o.id);a.length&&(t.reparentShapes(a,o.parentId,o.index),r.push(...a))}),t.setSelectedShapes(r),t.deleteShapes(n)})}const Fce=50;function Uce(t,n,e={}){const r=t.getShape(n);if(!r)return;const o=t.getSortedChildIdsForParent(r.id),a=Bt(o.map(w=>t.getShape(w)));if(!a.length)return;const l=Mt.FromPoints(a.flatMap(w=>{const k=t.getShapeGeometry(w.id);return t.getShapeLocalTransform(w).applyToPoints(k.vertices)})),{padding:u=Fce}=e,d=l.w+2*u,h=l.h+2*u,g=u-l.minX,v=u-l.minY;if(g===0&&v===0&&r.props.w===d&&r.props.h===h)return;const S=new N(g,v).rot(r.rotation);t.batch(()=>{const w=o.map(k=>{const C=t.getShape(k);return{id:C.id,type:C.type,x:C.x+g,y:C.y+v}});w.push({id:r.id,type:r.type,x:r.x-S.x,y:r.y-S.y,props:{w:d,h}}),t.updateShapes(w)})}const ZN=I.createContext(null);function Bce({assetUrls:t,children:n}){return x.jsx(ZN.Provider,{value:t,children:n})}function ZR(){const t=I.useContext(ZN);if(!t)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return t}const CI={"action.convert-to-bookmark":"Convert to Bookmark","action.convert-to-embed":"Convert to Embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-json.short":"JSON","action.copy-as-json":"Copy as JSON","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.unlock-all":"Unlock all","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-json.short":"JSON","action.export-as-json":"Export as JSON","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.fit-frame-to-content":"Fit to content","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.fork-project":"Fork this project","action.group":"Group","action.insert-embed":"Insert embed","action.insert-media":"Upload media","action.leave-shared-project":"Leave shared project","action.new-project":"New project","action.new-shared-project":"New shared project","action.open-cursor-chat":"Cursor chat","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.print":"Print","action.redo":"Redo","action.remove-frame":"Remove frame","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stop-following":"Stop following","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-reduce-motion.menu":"Reduce motion","action.toggle-reduce-motion":"Toggle reduce motion","action.toggle-edge-scrolling.menu":"Edge scrolling","action.toggle-edge-scrolling":"Toggle edge scrolling","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-lock":"Toggle locked","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.cloud":"Cloud","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus-2":"Rhombus 2","geo-style.rhombus":"Rhombus","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X box","geo-style.check-box":"Check box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.cloud":"Cloud","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.hexagon":"Hexagon","tool.highlight":"Highlight","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.check-box":"Check box","tool.asset":"Asset","tool.frame":"Frame","tool.note":"Note","tool.laser":"Laser","tool.embed":"Embed","tool.text":"Text","menu.title":"Menu","menu.copy-as":"Copy as","menu.edit":"Edit","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.view":"View","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.go-to-page":"Go to page","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.save-note":"Download this project to your computer as a .tldr file.","share-menu.fork-note":"Create a new shared project based on this snapshot.","share-menu.share-project":"Share this project","share-menu.default-project-name":"Shared Project","share-menu.copy-link":"Copy share link","share-menu.readonly-link":"Read-only","share-menu.create-snapshot-link":"Copy snapshot link","share-menu.snapshot-link-note":"Capture and share this project as a read-only snapshot link.","share-menu.copy-readonly-link":"Copy read-only link","share-menu.offline-note":"Create a new shared project based on your current project.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to view (but not edit) this project.","share-menu.project-too-large":"Sorry, this project can't be shared because it's too large. We're working on it!","share-menu.upload-failed":"Sorry, we couldn't upload your project at the moment. Please try again or let us know if the problem persists.","status.offline":"Offline","status.online":"Online","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.change-color":"Change color","people-menu.follow":"Following","people-menu.following":"Following","people-menu.leading":"Following You","people-menu.user":"(You)","people-menu.invite":"Invite others","help-menu.title":"Help and resources","help-menu.about":"About","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","embed-dialog.title":"Insert embed","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the site's URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","edit-pages-dialog.move-down":"Move down","edit-pages-dialog.move-up":"Move up","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.collaboration":"Collaboration","home-project-dialog.title":"Home project","home-project-dialog.description":"This is your local home project. It's just for you!","rename-project-dialog.title":"Rename project","rename-project-dialog.cancel":"Cancel","rename-project-dialog.rename":"Rename","home-project-dialog.ok":"Ok","style-panel.title":"Styles","style-panel.align":"Align","style-panel.vertical-align":"Vertical align","style-panel.position":"Position","style-panel.arrowheads":"Arrows","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","tool-panel.drawing":"Drawing","tool-panel.shapes":"Shapes","tool-panel.more":"More","debug-panel.more":"More","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesn't look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Don't ask again","file-system.confirm-clear.title":"Clear current project?","file-system.confirm-clear.description":"Creating a new project will clear your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-clear.cancel":"Cancel","file-system.confirm-clear.continue":"Continue","file-system.confirm-clear.dont-show-again":"Don't ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","sharing.confirm-leave.title":"Leave current project?","sharing.confirm-leave.description":"Are you sure you want to leave this shared project? You can return to it by navigating to its URL.","sharing.confirm-leave.cancel":"Cancel","sharing.confirm-leave.leave":"Leave","sharing.confirm-leave.dont-show-again":"Don't ask again","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"We've updated this document to work with the current version of tldraw. If you'd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Don't ask again","cursor-chat.type-to-chat":"Type to chat..."},lm={locale:"en",label:"English",messages:CI};async function Hce(t,n){if(!(await fetch(n.translations.en)).ok)return console.warn("No main translations found."),lm;if(t==="en")return lm;const r=VS.find(u=>u.locale===t);if(!r)return console.warn(`No translation found for locale ${t}`),lm;const a=await(await fetch(n.translations[r.locale])).json();if(!a)return console.warn(`No messages found for locale ${t}`),lm;const l=[];for(const u in lm.messages)a[u]||l.push(u);return l.length>0&&process.env.NODE_ENV==="development"&&console.warn(`Language ${t}: missing messages for keys:
${l.join(`
`)}`),{locale:t,label:r.label,messages:{...lm.messages,...a}}}const JN=I.createContext({}),Vce=()=>I.useContext(JN),Kce=sr(function({overrides:n,children:e}){const o=Oe().user.getLocale(),a=ZR(),[l,u]=I.useState(()=>n&&n.en?{locale:"en",label:"English",messages:{...CI,...n.en}}:{locale:"en",label:"English",messages:CI});return I.useEffect(()=>{let d=!1;async function h(){const g=await Hce(o,a);g&&!d&&(n&&n[o]?u({...g,messages:{...g.messages,...n[o]}}):u(g))}return h(),()=>{d=!0}},[a,o,n]),x.jsx(JN.Provider,{value:l,children:e})});function In(){const t=Vce();return I.useCallback(function(e){return t.messages[e]??e},[t])}function Yce(t){return x.jsx("svg",{width:16,height:16,viewBox:"0 0 16 16",...t,children:x.jsxs("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[x.jsx("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),x.jsx("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:x.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})}const Ia=I.memo(function({small:n,invertIcon:e,icon:r,color:o,className:a,...l}){const u=ZR(),d=u.icons[r]??u.icons["question-mark-circle"],h=I.useRef(null);return I.useLayoutEffect(()=>{d||console.error(`Icon not found: ${r}. Add it to the assetUrls.icons object.`),h!=null&&h.current&&(h.current.style.webkitMask=`url(${d}) center 100% / 100% no-repeat`)},[h,d,r]),x.jsx("div",{...l,ref:h,className:Wt("tlui-icon",{"tlui-icon__small":n},a),style:{color:o,mask:`url(${d}) center 100% / 100% no-repeat`,transform:e?"scale(-1, 1)":void 0}})}),e8=typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("mac")>-1,t8=e8?"⌘":"Ctrl",n8=e8?"⌥":"Alt";function Wce(t){return t.split(",")[0].split("").map(n=>{const e=n.replace(/\$/g,t8).replace(/\?/g,n8).replace(/!/g,"⇧");return e[0].toUpperCase()+e.slice(1)})}function Zc(t){return"— "+t.split(",")[0].split("").map(n=>{const e=n.replace(/\$/g,t8).replace(/\?/g,n8).replace(/!/g,"⇧");return e[0].toUpperCase()+e.slice(1)}).join(" ")}function oE({children:t}){return x.jsx("kbd",{className:"tlui-kbd",children:Wce(t).map((n,e)=>x.jsx("span",{children:n},e))})}const kt=I.forwardRef(function({label:n,icon:e,invertIcon:r,iconLeft:o,smallIcon:a,kbd:l,isChecked:u=!1,type:d,children:h,spinner:g,...v},S){const w=In(),k=n?w(n):"";return x.jsxs("button",{ref:S,draggable:!1,type:"button",...v,title:v.title??k,className:Wt("tlui-button",`tlui-button__${d}`,v.className),children:[o&&x.jsx(Ia,{icon:o,className:"tlui-button__icon-left",small:!0}),h,n&&x.jsxs("span",{className:"tlui-button__label",draggable:!1,children:[k,u&&x.jsx(Ia,{icon:"check"})]}),l&&x.jsx(oE,{children:l}),e&&!g&&x.jsx(Ia,{icon:e,small:!!n||a,invertIcon:r}),g&&x.jsx(Yce,{})]})}),Gce=yV["useId".toString()]||(()=>{});let Xce=0;function ad(t){const[n,e]=I.useState(Gce());return np(()=>{t||e(r=>r??String(Xce++))},[t]),t||(n?`radix-${n}`:"")}const Z2="focusScope.autoFocusOnMount",J2="focusScope.autoFocusOnUnmount",T5={bubbles:!1,cancelable:!0},JR=I.forwardRef((t,n)=>{const{loop:e=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...l}=t,[u,d]=I.useState(null),h=rs(o),g=rs(a),v=I.useRef(null),S=Rr(n,C=>d(C)),w=I.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;I.useEffect(()=>{if(r){let C=function(A){if(w.paused||!u)return;const O=A.target;u.contains(O)?v.current=O:vf(v.current,{select:!0})},E=function(A){if(w.paused||!u)return;const O=A.relatedTarget;O!==null&&(u.contains(O)||vf(v.current,{select:!0}))},R=function(A){if(document.activeElement===document.body)for(const D of A)D.removedNodes.length>0&&vf(u)};document.addEventListener("focusin",C),document.addEventListener("focusout",E);const L=new MutationObserver(R);return u&&L.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",E),L.disconnect()}}},[r,u,w.paused]),I.useEffect(()=>{if(u){P5.add(w);const C=document.activeElement;if(!u.contains(C)){const R=new CustomEvent(Z2,T5);u.addEventListener(Z2,h),u.dispatchEvent(R),R.defaultPrevented||(qce(tue(r8(u)),{select:!0}),document.activeElement===C&&vf(u))}return()=>{u.removeEventListener(Z2,h),setTimeout(()=>{const R=new CustomEvent(J2,T5);u.addEventListener(J2,g),u.dispatchEvent(R),R.defaultPrevented||vf(C??document.body,{select:!0}),u.removeEventListener(J2,g),P5.remove(w)},0)}}},[u,h,g,w]);const k=I.useCallback(C=>{if(!e&&!r||w.paused)return;const E=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,R=document.activeElement;if(E&&R){const L=C.currentTarget,[A,O]=Qce(L);A&&O?!C.shiftKey&&R===O?(C.preventDefault(),e&&vf(A,{select:!0})):C.shiftKey&&R===A&&(C.preventDefault(),e&&vf(O,{select:!0})):R===L&&C.preventDefault()}},[e,r,w.paused]);return I.createElement(hr.div,Ze({tabIndex:-1},l,{ref:S,onKeyDown:k}))});function qce(t,{select:n=!1}={}){const e=document.activeElement;for(const r of t)if(vf(r,{select:n}),document.activeElement!==e)return}function Qce(t){const n=r8(t),e=k5(n,t),r=k5(n.reverse(),t);return[e,r]}function r8(t){const n=[],e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)n.push(e.currentNode);return n}function k5(t,n){for(const e of t)if(!Zce(e,{upTo:n}))return e}function Zce(t,{upTo:n}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(n!==void 0&&t===n)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Jce(t){return t instanceof HTMLInputElement&&"select"in t}function vf(t,{select:n=!1}={}){if(t&&t.focus){const e=document.activeElement;t.focus({preventScroll:!0}),t!==e&&Jce(t)&&n&&t.select()}}const P5=eue();function eue(){let t=[];return{add(n){const e=t[0];n!==e&&(e==null||e.pause()),t=I5(t,n),t.unshift(n)},remove(n){var e;t=I5(t,n),(e=t[0])===null||e===void 0||e.resume()}}}function I5(t,n){const e=[...t],r=e.indexOf(n);return r!==-1&&e.splice(r,1),e}function tue(t){return t.filter(n=>n.tagName!=="A")}let eP=0;function eM(){I.useEffect(()=>{var t,n;const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=e[0])!==null&&t!==void 0?t:R5()),document.body.insertAdjacentElement("beforeend",(n=e[1])!==null&&n!==void 0?n:R5()),eP++,()=>{eP===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),eP--}},[])}function R5(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var Kc=function(){return Kc=Object.assign||function(n){for(var e,r=1,o=arguments.length;r<o;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},Kc.apply(this,arguments)};function i8(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(e[r[o]]=t[r[o]]);return e}function nue(t,n,e){if(e||arguments.length===2)for(var r=0,o=n.length,a;r<o;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return t.concat(a||Array.prototype.slice.call(n))}var B1="right-scroll-bar-position",H1="width-before-scroll-bar",rue="with-scroll-bars-hidden",iue="--removed-body-scroll-bar-size";function oue(t,n){return typeof t=="function"?t(n):t&&(t.current=n),t}function sue(t,n){var e=I.useState(function(){return{value:t,callback:n,facade:{get current(){return e.value},set current(r){var o=e.value;o!==r&&(e.value=r,e.callback(r,o))}}}})[0];return e.callback=n,e.facade}function aue(t,n){return sue(n||null,function(e){return t.forEach(function(r){return oue(r,e)})})}function lue(t){return t}function cue(t,n){n===void 0&&(n=lue);var e=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:t},useMedium:function(a){var l=n(a,r);return e.push(l),function(){e=e.filter(function(u){return u!==l})}},assignSyncMedium:function(a){for(r=!0;e.length;){var l=e;e=[],l.forEach(a)}e={push:function(u){return a(u)},filter:function(){return e}}},assignMedium:function(a){r=!0;var l=[];if(e.length){var u=e;e=[],u.forEach(a),l=e}var d=function(){var g=l;l=[],g.forEach(a)},h=function(){return Promise.resolve().then(d)};h(),e={push:function(g){l.push(g),h()},filter:function(g){return l=l.filter(g),e}}}};return o}function uue(t){t===void 0&&(t={});var n=cue(null);return n.options=Kc({async:!0,ssr:!1},t),n}var o8=function(t){var n=t.sideCar,e=i8(t,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=n.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,Kc({},e))};o8.isSideCarExport=!0;function due(t,n){return t.useMedium(n),o8}var s8=uue(),tP=function(){},sE=I.forwardRef(function(t,n){var e=I.useRef(null),r=I.useState({onScrollCapture:tP,onWheelCapture:tP,onTouchMoveCapture:tP}),o=r[0],a=r[1],l=t.forwardProps,u=t.children,d=t.className,h=t.removeScrollBar,g=t.enabled,v=t.shards,S=t.sideCar,w=t.noIsolation,k=t.inert,C=t.allowPinchZoom,E=t.as,R=E===void 0?"div":E,L=i8(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),A=S,O=aue([e,n]),D=Kc(Kc({},L),o);return I.createElement(I.Fragment,null,g&&I.createElement(A,{sideCar:s8,removeScrollBar:h,shards:v,noIsolation:w,inert:k,setCallbacks:a,allowPinchZoom:!!C,lockRef:e}),l?I.cloneElement(I.Children.only(u),Kc(Kc({},D),{ref:O})):I.createElement(R,Kc({},D,{className:d,ref:O}),u))});sE.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};sE.classNames={fullWidth:H1,zeroRight:B1};var M5,fue=function(){if(M5)return M5;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function hue(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var n=fue();return n&&t.setAttribute("nonce",n),t}function pue(t,n){t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}function gue(t){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(t)}var mue=function(){var t=0,n=null;return{add:function(e){t==0&&(n=hue())&&(pue(n,e),gue(n)),t++},remove:function(){t--,!t&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},vue=function(){var t=mue();return function(n,e){I.useEffect(function(){return t.add(n),function(){t.remove()}},[n&&e])}},a8=function(){var t=vue(),n=function(e){var r=e.styles,o=e.dynamic;return t(r,o),null};return n},yue={left:0,top:0,right:0,gap:0},nP=function(t){return parseInt(t||"",10)||0},Sue=function(t){var n=window.getComputedStyle(document.body),e=n[t==="padding"?"paddingLeft":"marginLeft"],r=n[t==="padding"?"paddingTop":"marginTop"],o=n[t==="padding"?"paddingRight":"marginRight"];return[nP(e),nP(r),nP(o)]},bue=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return yue;var n=Sue(t),e=document.documentElement.clientWidth,r=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,r-e+n[2]-n[0])}},wue=a8(),xue=function(t,n,e,r){var o=t.left,a=t.top,l=t.right,u=t.gap;return e===void 0&&(e="margin"),`
  .`.concat(rue,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(r,";"),e==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),e==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(B1,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(H1,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(B1," .").concat(B1,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(H1," .").concat(H1,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(iue,": ").concat(u,`px;
  }
`)},Cue=function(t){var n=t.noRelative,e=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r,a=I.useMemo(function(){return bue(o)},[o]);return I.createElement(wue,{styles:xue(a,!n,o,e?"":"!important")})},EI=!1;if(typeof window<"u")try{var qx=Object.defineProperty({},"passive",{get:function(){return EI=!0,!0}});window.addEventListener("test",qx,qx),window.removeEventListener("test",qx,qx)}catch{EI=!1}var cm=EI?{passive:!1}:!1,Eue=function(t){return t.tagName==="TEXTAREA"},l8=function(t,n){var e=window.getComputedStyle(t);return e[n]!=="hidden"&&!(e.overflowY===e.overflowX&&!Eue(t)&&e[n]==="visible")},_ue=function(t){return l8(t,"overflowY")},Tue=function(t){return l8(t,"overflowX")},A5=function(t,n){var e=n;do{typeof ShadowRoot<"u"&&e instanceof ShadowRoot&&(e=e.host);var r=c8(t,e);if(r){var o=u8(t,e),a=o[1],l=o[2];if(a>l)return!0}e=e.parentNode}while(e&&e!==document.body);return!1},kue=function(t){var n=t.scrollTop,e=t.scrollHeight,r=t.clientHeight;return[n,e,r]},Pue=function(t){var n=t.scrollLeft,e=t.scrollWidth,r=t.clientWidth;return[n,e,r]},c8=function(t,n){return t==="v"?_ue(n):Tue(n)},u8=function(t,n){return t==="v"?kue(n):Pue(n)},Iue=function(t,n){return t==="h"&&n==="rtl"?-1:1},Rue=function(t,n,e,r,o){var a=Iue(t,window.getComputedStyle(n).direction),l=a*r,u=e.target,d=n.contains(u),h=!1,g=l>0,v=0,S=0;do{var w=u8(t,u),k=w[0],C=w[1],E=w[2],R=C-E-a*k;(k||R)&&c8(t,u)&&(v+=R,S+=k),u=u.parentNode}while(!d&&u!==document.body||d&&(n.contains(u)||n===u));return(g&&(o&&v===0||!o&&l>v)||!g&&(o&&S===0||!o&&-l>S))&&(h=!0),h},Qx=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},$5=function(t){return[t.deltaX,t.deltaY]},O5=function(t){return t&&"current"in t?t.current:t},Mue=function(t,n){return t[0]===n[0]&&t[1]===n[1]},Aue=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},$ue=0,um=[];function Oue(t){var n=I.useRef([]),e=I.useRef([0,0]),r=I.useRef(),o=I.useState($ue++)[0],a=I.useState(function(){return a8()})[0],l=I.useRef(t);I.useEffect(function(){l.current=t},[t]),I.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var C=nue([t.lockRef.current],(t.shards||[]).map(O5),!0).filter(Boolean);return C.forEach(function(E){return E.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),C.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var u=I.useCallback(function(C,E){if("touches"in C&&C.touches.length===2)return!l.current.allowPinchZoom;var R=Qx(C),L=e.current,A="deltaX"in C?C.deltaX:L[0]-R[0],O="deltaY"in C?C.deltaY:L[1]-R[1],D,z=C.target,U=Math.abs(A)>Math.abs(O)?"h":"v";if("touches"in C&&U==="h"&&z.type==="range")return!1;var Y=A5(U,z);if(!Y)return!0;if(Y?D=U:(D=U==="v"?"h":"v",Y=A5(U,z)),!Y)return!1;if(!r.current&&"changedTouches"in C&&(A||O)&&(r.current=D),!D)return!0;var q=r.current||D;return Rue(q,E,C,q==="h"?A:O,!0)},[]),d=I.useCallback(function(C){var E=C;if(!(!um.length||um[um.length-1]!==a)){var R="deltaY"in E?$5(E):Qx(E),L=n.current.filter(function(D){return D.name===E.type&&D.target===E.target&&Mue(D.delta,R)})[0];if(L&&L.should){E.cancelable&&E.preventDefault();return}if(!L){var A=(l.current.shards||[]).map(O5).filter(Boolean).filter(function(D){return D.contains(E.target)}),O=A.length>0?u(E,A[0]):!l.current.noIsolation;O&&E.cancelable&&E.preventDefault()}}},[]),h=I.useCallback(function(C,E,R,L){var A={name:C,delta:E,target:R,should:L};n.current.push(A),setTimeout(function(){n.current=n.current.filter(function(O){return O!==A})},1)},[]),g=I.useCallback(function(C){e.current=Qx(C),r.current=void 0},[]),v=I.useCallback(function(C){h(C.type,$5(C),C.target,u(C,t.lockRef.current))},[]),S=I.useCallback(function(C){h(C.type,Qx(C),C.target,u(C,t.lockRef.current))},[]);I.useEffect(function(){return um.push(a),t.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:S}),document.addEventListener("wheel",d,cm),document.addEventListener("touchmove",d,cm),document.addEventListener("touchstart",g,cm),function(){um=um.filter(function(C){return C!==a}),document.removeEventListener("wheel",d,cm),document.removeEventListener("touchmove",d,cm),document.removeEventListener("touchstart",g,cm)}},[]);var w=t.removeScrollBar,k=t.inert;return I.createElement(I.Fragment,null,k?I.createElement(a,{styles:Aue(o)}):null,w?I.createElement(Cue,{gapMode:"margin"}):null)}const Due=due(s8,Oue);var d8=I.forwardRef(function(t,n){return I.createElement(sE,Kc({},t,{ref:n,sideCar:Due}))});d8.classNames=sE.classNames;const tM=d8;var Lue=function(t){if(typeof document>"u")return null;var n=Array.isArray(t)?t[0]:t;return n.ownerDocument.body},dm=new WeakMap,Zx=new WeakMap,Jx={},rP=0,f8=function(t){return t&&(t.host||f8(t.parentNode))},jue=function(t,n){return n.map(function(e){if(t.contains(e))return e;var r=f8(e);return r&&t.contains(r)?r:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e})},Nue=function(t,n,e,r){var o=jue(n,Array.isArray(t)?t:[t]);Jx[e]||(Jx[e]=new WeakMap);var a=Jx[e],l=[],u=new Set,d=new Set(o),h=function(v){!v||u.has(v)||(u.add(v),h(v.parentNode))};o.forEach(h);var g=function(v){!v||d.has(v)||Array.prototype.forEach.call(v.children,function(S){if(u.has(S))g(S);else{var w=S.getAttribute(r),k=w!==null&&w!=="false",C=(dm.get(S)||0)+1,E=(a.get(S)||0)+1;dm.set(S,C),a.set(S,E),l.push(S),C===1&&k&&Zx.set(S,!0),E===1&&S.setAttribute(e,"true"),k||S.setAttribute(r,"true")}})};return g(n),u.clear(),rP++,function(){l.forEach(function(v){var S=dm.get(v)-1,w=a.get(v)-1;dm.set(v,S),a.set(v,w),S||(Zx.has(v)||v.removeAttribute(r),Zx.delete(v)),w||v.removeAttribute(e)}),rP--,rP||(dm=new WeakMap,dm=new WeakMap,Zx=new WeakMap,Jx={})}},nM=function(t,n,e){e===void 0&&(e="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=n||Lue(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),Nue(r,o,e,"aria-hidden")):function(){return null}};const h8="Dialog",[p8,yve]=nu(h8),[zue,yd]=p8(h8),Fue=t=>{const{__scopeDialog:n,children:e,open:r,defaultOpen:o,onOpenChange:a,modal:l=!0}=t,u=I.useRef(null),d=I.useRef(null),[h=!1,g]=Ff({prop:r,defaultProp:o,onChange:a});return I.createElement(zue,{scope:n,triggerRef:u,contentRef:d,contentId:ad(),titleId:ad(),descriptionId:ad(),open:h,onOpenChange:g,onOpenToggle:I.useCallback(()=>g(v=>!v),[g]),modal:l},e)},g8="DialogPortal",[Uue,m8]=p8(g8,{forceMount:void 0}),Bue=t=>{const{__scopeDialog:n,forceMount:e,children:r,container:o}=t,a=yd(g8,n);return I.createElement(Uue,{scope:n,forceMount:e},I.Children.map(r,l=>I.createElement(tc,{present:e||a.open},I.createElement(nE,{asChild:!0,container:o},l))))},_I="DialogOverlay",Hue=I.forwardRef((t,n)=>{const e=m8(_I,t.__scopeDialog),{forceMount:r=e.forceMount,...o}=t,a=yd(_I,t.__scopeDialog);return a.modal?I.createElement(tc,{present:r||a.open},I.createElement(Vue,Ze({},o,{ref:n}))):null}),Vue=I.forwardRef((t,n)=>{const{__scopeDialog:e,...r}=t,o=yd(_I,e);return I.createElement(tM,{as:tp,allowPinchZoom:!0,shards:[o.contentRef]},I.createElement(hr.div,Ze({"data-state":y8(o.open)},r,{ref:n,style:{pointerEvents:"auto",...r.style}})))}),e0="DialogContent",Kue=I.forwardRef((t,n)=>{const e=m8(e0,t.__scopeDialog),{forceMount:r=e.forceMount,...o}=t,a=yd(e0,t.__scopeDialog);return I.createElement(tc,{present:r||a.open},a.modal?I.createElement(Yue,Ze({},o,{ref:n})):I.createElement(Wue,Ze({},o,{ref:n})))}),Yue=I.forwardRef((t,n)=>{const e=yd(e0,t.__scopeDialog),r=I.useRef(null),o=Rr(n,e.contentRef,r);return I.useEffect(()=>{const a=r.current;if(a)return nM(a)},[]),I.createElement(v8,Ze({},t,{ref:o,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ct(t.onCloseAutoFocus,a=>{var l;a.preventDefault(),(l=e.triggerRef.current)===null||l===void 0||l.focus()}),onPointerDownOutside:Ct(t.onPointerDownOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&a.preventDefault()}),onFocusOutside:Ct(t.onFocusOutside,a=>a.preventDefault())}))}),Wue=I.forwardRef((t,n)=>{const e=yd(e0,t.__scopeDialog),r=I.useRef(!1),o=I.useRef(!1);return I.createElement(v8,Ze({},t,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l;if((l=t.onCloseAutoFocus)===null||l===void 0||l.call(t,a),!a.defaultPrevented){var u;r.current||(u=e.triggerRef.current)===null||u===void 0||u.focus(),a.preventDefault()}r.current=!1,o.current=!1},onInteractOutside:a=>{var l,u;(l=t.onInteractOutside)===null||l===void 0||l.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const d=a.target;((u=e.triggerRef.current)===null||u===void 0?void 0:u.contains(d))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}}))}),v8=I.forwardRef((t,n)=>{const{__scopeDialog:e,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...l}=t,u=yd(e0,e),d=I.useRef(null),h=Rr(n,d);return eM(),I.createElement(I.Fragment,null,I.createElement(JR,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a},I.createElement(tE,Ze({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":y8(u.open)},l,{ref:h,onDismiss:()=>u.onOpenChange(!1)}))),!1)}),Gue="DialogTitle",Xue=I.forwardRef((t,n)=>{const{__scopeDialog:e,...r}=t,o=yd(Gue,e);return I.createElement(hr.h2,Ze({id:o.titleId},r,{ref:n}))}),que="DialogClose",Que=I.forwardRef((t,n)=>{const{__scopeDialog:e,...r}=t,o=yd(que,e);return I.createElement(hr.button,Ze({type:"button"},r,{ref:n,onClick:Ct(t.onClick,()=>o.onOpenChange(!1))}))});function y8(t){return t?"open":"closed"}const Zue=Fue,Jue=Bue,ede=Hue,tde=Kue;function aE({className:t,children:n}){return x.jsx("div",{className:Wt("tlui-dialog__header",t),children:n})}function lE({className:t,children:n}){return x.jsx(Xue,{dir:"ltr",className:Wt("tlui-dialog__header__title",t),children:n})}function cE(){return x.jsx("div",{className:"tlui-dialog__header__close",children:x.jsx(Que,{"data-testid":"dialog.close",dir:"ltr",asChild:!0,children:x.jsx(kt,{type:"icon","aria-label":"Close",onTouchEnd:t=>t.target.click(),children:x.jsx(Ia,{small:!0,icon:"cross-2"})})})})}function t0({className:t,children:n,style:e}){return x.jsx("div",{className:Wt("tlui-dialog__body",t),style:e,children:n})}function rM({className:t,children:n}){return x.jsx("div",{className:Wt("tlui-dialog__footer",t),children:n})}const iM=I.forwardRef(function({className:n,label:e,icon:r,iconLeft:o,autoselect:a=!1,autofocus:l=!1,defaultValue:u,placeholder:d,onComplete:h,onValueChange:g,onCancel:v,onBlur:S,shouldManuallyMaintainScrollPositionWhenFocused:w=!1,children:k,value:C},E){const R=Oe(),L=I.useRef(null);I.useImperativeHandle(E,()=>L.current);const A=In(),O=I.useRef(u??""),D=I.useRef(u??""),[z,U]=I.useState(!1),Y=I.useCallback(pe=>{U(!0);const ae=pe.currentTarget;D.current=ae.value,requestAnimationFrame(()=>{a&&ae.select()})},[a]),q=I.useCallback(pe=>{const ae=pe.currentTarget.value;D.current=ae,g==null||g(ae)},[g]),X=I.useCallback(pe=>{switch(pe.key){case"Enter":{pe.currentTarget.blur(),eo(pe),h==null||h(pe.currentTarget.value);break}case"Escape":{pe.currentTarget.value=O.current,pe.currentTarget.blur(),eo(pe),v==null||v(pe.currentTarget.value);break}}},[h,v]),ie=I.useCallback(pe=>{U(!1);const ae=pe.currentTarget.value;S==null||S(ae)},[S]);return I.useEffect(()=>{if(!R.environment.isIos)return;const pe=window.visualViewport;if(z&&w&&pe){const ae=()=>{var te;(te=L.current)==null||te.scrollIntoView({block:"center"})};return pe.addEventListener("resize",ae),pe.addEventListener("scroll",ae),requestAnimationFrame(()=>{var te;(te=L.current)==null||te.scrollIntoView({block:"center"})}),()=>{pe.removeEventListener("resize",ae),pe.removeEventListener("scroll",ae)}}},[R,z,w]),x.jsxs("div",{draggable:!1,className:"tlui-input__wrapper",children:[k,e&&x.jsx("label",{children:A(e)}),o&&x.jsx(Ia,{icon:o,className:"tlui-icon-left",small:!0}),x.jsx("input",{ref:L,className:Wt("tlui-input",n),type:"text",defaultValue:u,onKeyUp:X,onChange:q,onFocus:Y,onBlur:ie,autoFocus:l,placeholder:d,value:C}),r&&x.jsx(Ia,{icon:r,small:!!e})]})});function D5(t){return Ma.isValid(t)?{isValid:!0,hasProtocol:!0}:Ma.isValid("https://"+t)?{isValid:!0,hasProtocol:!1}:{isValid:!1,hasProtocol:!1}}const nde=sr(function({onClose:n}){const r=Oe().getOnlySelectedShape();return r&&"url"in r.props&&typeof r.props.url=="string"?x.jsx(rde,{onClose:n,selectedShape:r}):null}),rde=sr(function({onClose:n,selectedShape:e}){const r=Oe(),o=In(),a=I.useRef(null);I.useEffect(()=>{requestAnimationFrame(()=>{var k;return(k=a.current)==null?void 0:k.focus()})},[]);const l=I.useRef(e.props.url),[u,d]=I.useState(()=>{const k=D5(e.props.url),C=k.isValid===!0?k.hasProtocol?e.props.url:"https://"+e.props.url:"https://";return{actual:C,safe:C,valid:!0}}),h=I.useCallback(k=>{const C=k.replace(/https?:\/\/(https?:\/\/)/,(L,A)=>A),E=D5(C),R=E.isValid===!0?E.hasProtocol?C:"https://"+C:"https://";d({actual:C,safe:R,valid:E.isValid})},[]),g=I.useCallback(()=>{const k=r.getOnlySelectedShape();k&&(r.updateShapes([{id:k.id,type:k.type,props:{url:""}}]),n())},[r,n]),v=I.useCallback(()=>{const k=r.getOnlySelectedShape();k&&(k&&"url"in k.props&&k.props.url!==u.safe&&r.updateShapes([{id:k.id,type:k.type,props:{url:u.safe}}]),n())},[r,n,u]),S=I.useCallback(()=>{n()},[n]);if(!e)return n(),null;const w=l.current&&!u.valid;return x.jsxs(x.Fragment,{children:[x.jsxs(aE,{children:[x.jsx(lE,{children:o("edit-link-dialog.title")}),x.jsx(cE,{})]}),x.jsx(t0,{children:x.jsxs("div",{className:"tlui-edit-link-dialog",children:[x.jsx(iM,{ref:a,className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",autofocus:!0,value:u.actual,onValueChange:h,onComplete:v,onCancel:S}),x.jsx("div",{children:u.valid?o("edit-link-dialog.detail"):o("edit-link-dialog.invalid-url")})]})}),x.jsxs(rM,{className:"tlui-dialog__footer__actions",children:[x.jsx(kt,{type:"normal",onClick:S,onTouchEnd:S,children:o("edit-link-dialog.cancel")}),w?x.jsx(kt,{type:"danger",onTouchEnd:g,onClick:g,children:o("edit-link-dialog.clear")}):x.jsx(kt,{type:"primary",disabled:!u.valid,onTouchEnd:v,onClick:v,children:o("edit-link-dialog.save")})]})]})}),S8=sr(function({onClose:n}){const e=Oe(),r=In(),o=ZR(),[a,l]=I.useState(null),[u,d]=I.useState(""),[h,g]=I.useState(null),[v,S]=I.useState(!1),w=I.useRef(-1);return x.jsxs(x.Fragment,{children:[x.jsxs(aE,{children:[x.jsx(lE,{children:a?`${r("embed-dialog.title")} — ${a.title}`:r("embed-dialog.title")}),x.jsx(cE,{})]}),a?x.jsxs(x.Fragment,{children:[x.jsxs(t0,{className:"tlui-embed-dialog__enter",children:[x.jsx(iM,{className:"tlui-embed-dialog__input",label:"embed-dialog.url",placeholder:"http://example.com",autofocus:!0,onValueChange:k=>{d(k);const C=td(k);g(C&&C.definition.type===a.type?C:null),S(!1),clearTimeout(w.current),w.current=setTimeout(()=>S(!C),320)}}),u===""?x.jsxs("div",{className:"tlui-embed-dialog__instruction",children:[x.jsx("span",{children:r("embed-dialog.instruction")})," ",a.instructionLink&&x.jsxs("a",{target:"_blank",rel:"noopener noreferrer",href:a.instructionLink,className:"tlui-embed-dialog__instruction__link",children:["Learn more.",x.jsx(Ia,{icon:"external-link",small:!0})]})]}):x.jsx("div",{className:"tlui-embed-dialog__warning",children:v?r("embed-dialog.invalid-url"):" "})]}),x.jsxs(rM,{className:"tlui-dialog__footer__actions",children:[x.jsx(kt,{type:"normal",onClick:()=>{l(null),g(null),d("")},label:"embed-dialog.back"}),x.jsx("div",{className:"tlui-embed__spacer"}),x.jsx(kt,{type:"normal",label:"embed-dialog.cancel",onClick:n}),x.jsx(kt,{type:"primary",disabled:!h,label:"embed-dialog.create",onClick:()=>{h&&(e.putExternalContent({type:"embed",url:u,point:e.getViewportPageCenter(),embed:h.definition}),n())}})]})]}):x.jsx(x.Fragment,{children:x.jsx(t0,{className:"tlui-embed-dialog__list",children:Mm.map(k=>x.jsx(kt,{type:"menu",onClick:()=>l(k),label:k.title,children:x.jsx("div",{className:"tlui-embed-dialog__item__image",style:{backgroundImage:`url(${o.embedIcons[k.type]})`}})},k.type))})})]})});var oM={exports:{}};oM.exports;(function(t){var n=function(){var e=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={};function l(d,h){if(!a[d]){a[d]={};for(var g=0;g<d.length;g++)a[d][d.charAt(g)]=g}return a[d][h]}var u={compressToBase64:function(d){if(d==null)return"";var h=u._compress(d,6,function(g){return r.charAt(g)});switch(h.length%4){default:case 0:return h;case 1:return h+"===";case 2:return h+"==";case 3:return h+"="}},decompressFromBase64:function(d){return d==null?"":d==""?null:u._decompress(d.length,32,function(h){return l(r,d.charAt(h))})},compressToUTF16:function(d){return d==null?"":u._compress(d,15,function(h){return e(h+32)})+" "},decompressFromUTF16:function(d){return d==null?"":d==""?null:u._decompress(d.length,16384,function(h){return d.charCodeAt(h)-32})},compressToUint8Array:function(d){for(var h=u.compress(d),g=new Uint8Array(h.length*2),v=0,S=h.length;v<S;v++){var w=h.charCodeAt(v);g[v*2]=w>>>8,g[v*2+1]=w%256}return g},decompressFromUint8Array:function(d){if(d==null)return u.decompress(d);for(var h=new Array(d.length/2),g=0,v=h.length;g<v;g++)h[g]=d[g*2]*256+d[g*2+1];var S=[];return h.forEach(function(w){S.push(e(w))}),u.decompress(S.join(""))},compressToEncodedURIComponent:function(d){return d==null?"":u._compress(d,6,function(h){return o.charAt(h)})},decompressFromEncodedURIComponent:function(d){return d==null?"":d==""?null:(d=d.replace(/ /g,"+"),u._decompress(d.length,32,function(h){return l(o,d.charAt(h))}))},compress:function(d){return u._compress(d,16,function(h){return e(h)})},_compress:function(d,h,g){if(d==null)return"";var v,S,w={},k={},C="",E="",R="",L=2,A=3,O=2,D=[],z=0,U=0,Y;for(Y=0;Y<d.length;Y+=1)if(C=d.charAt(Y),Object.prototype.hasOwnProperty.call(w,C)||(w[C]=A++,k[C]=!0),E=R+C,Object.prototype.hasOwnProperty.call(w,E))R=E;else{if(Object.prototype.hasOwnProperty.call(k,R)){if(R.charCodeAt(0)<256){for(v=0;v<O;v++)z=z<<1,U==h-1?(U=0,D.push(g(z)),z=0):U++;for(S=R.charCodeAt(0),v=0;v<8;v++)z=z<<1|S&1,U==h-1?(U=0,D.push(g(z)),z=0):U++,S=S>>1}else{for(S=1,v=0;v<O;v++)z=z<<1|S,U==h-1?(U=0,D.push(g(z)),z=0):U++,S=0;for(S=R.charCodeAt(0),v=0;v<16;v++)z=z<<1|S&1,U==h-1?(U=0,D.push(g(z)),z=0):U++,S=S>>1}L--,L==0&&(L=Math.pow(2,O),O++),delete k[R]}else for(S=w[R],v=0;v<O;v++)z=z<<1|S&1,U==h-1?(U=0,D.push(g(z)),z=0):U++,S=S>>1;L--,L==0&&(L=Math.pow(2,O),O++),w[E]=A++,R=String(C)}if(R!==""){if(Object.prototype.hasOwnProperty.call(k,R)){if(R.charCodeAt(0)<256){for(v=0;v<O;v++)z=z<<1,U==h-1?(U=0,D.push(g(z)),z=0):U++;for(S=R.charCodeAt(0),v=0;v<8;v++)z=z<<1|S&1,U==h-1?(U=0,D.push(g(z)),z=0):U++,S=S>>1}else{for(S=1,v=0;v<O;v++)z=z<<1|S,U==h-1?(U=0,D.push(g(z)),z=0):U++,S=0;for(S=R.charCodeAt(0),v=0;v<16;v++)z=z<<1|S&1,U==h-1?(U=0,D.push(g(z)),z=0):U++,S=S>>1}L--,L==0&&(L=Math.pow(2,O),O++),delete k[R]}else for(S=w[R],v=0;v<O;v++)z=z<<1|S&1,U==h-1?(U=0,D.push(g(z)),z=0):U++,S=S>>1;L--,L==0&&(L=Math.pow(2,O),O++)}for(S=2,v=0;v<O;v++)z=z<<1|S&1,U==h-1?(U=0,D.push(g(z)),z=0):U++,S=S>>1;for(;;)if(z=z<<1,U==h-1){D.push(g(z));break}else U++;return D.join("")},decompress:function(d){return d==null?"":d==""?null:u._decompress(d.length,32768,function(h){return d.charCodeAt(h)})},_decompress:function(d,h,g){var v=[],S=4,w=4,k=3,C="",E=[],R,L,A,O,D,z,U,Y={val:g(0),position:h,index:1};for(R=0;R<3;R+=1)v[R]=R;for(A=0,D=Math.pow(2,2),z=1;z!=D;)O=Y.val&Y.position,Y.position>>=1,Y.position==0&&(Y.position=h,Y.val=g(Y.index++)),A|=(O>0?1:0)*z,z<<=1;switch(A){case 0:for(A=0,D=Math.pow(2,8),z=1;z!=D;)O=Y.val&Y.position,Y.position>>=1,Y.position==0&&(Y.position=h,Y.val=g(Y.index++)),A|=(O>0?1:0)*z,z<<=1;U=e(A);break;case 1:for(A=0,D=Math.pow(2,16),z=1;z!=D;)O=Y.val&Y.position,Y.position>>=1,Y.position==0&&(Y.position=h,Y.val=g(Y.index++)),A|=(O>0?1:0)*z,z<<=1;U=e(A);break;case 2:return""}for(v[3]=U,L=U,E.push(U);;){if(Y.index>d)return"";for(A=0,D=Math.pow(2,k),z=1;z!=D;)O=Y.val&Y.position,Y.position>>=1,Y.position==0&&(Y.position=h,Y.val=g(Y.index++)),A|=(O>0?1:0)*z,z<<=1;switch(U=A){case 0:for(A=0,D=Math.pow(2,8),z=1;z!=D;)O=Y.val&Y.position,Y.position>>=1,Y.position==0&&(Y.position=h,Y.val=g(Y.index++)),A|=(O>0?1:0)*z,z<<=1;v[w++]=e(A),U=w-1,S--;break;case 1:for(A=0,D=Math.pow(2,16),z=1;z!=D;)O=Y.val&Y.position,Y.position>>=1,Y.position==0&&(Y.position=h,Y.val=g(Y.index++)),A|=(O>0?1:0)*z,z<<=1;v[w++]=e(A),U=w-1,S--;break;case 2:return E.join("")}if(S==0&&(S=Math.pow(2,k),k++),v[U])C=v[U];else if(U===w)C=L+L.charAt(0);else return null;E.push(C),v[w++]=L+C.charAt(0),S--,L=C,S==0&&(S=Math.pow(2,k),k++)}}};return u}();t!=null?t.exports=n:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return n})})(oM);var b8=oM.exports;async function ide(t,n,e){var R,L,A;const{elements:r,files:o}=n,a={shapes:[],rootShapeIds:[],assets:[],schema:t.store.schema.serialize()},l=new Map,u=new Map,d=t.getCurrentPageId(),h=new Map,g=[],v=new Set;r.forEach(O=>{if(h.set(O.id,Ir()),O.boundElements!==null)for(const D of O.boundElements)D.type==="text"&&v.add(D.id)});let S="a1";for(const O of r){if(v.has(O.id))continue;const D=h.get(O.id),z={id:D,typeName:"shape",parentId:d,index:S,x:O.x,y:O.y,rotation:0,isLocked:O.locked,opacity:ode(O.opacity),meta:{}};switch(O.angle!==0&&u.set(D,O.angle),O.groupIds&&O.groupIds.length>0?l.has(O.groupIds[0])?(R=l.get(O.groupIds[0]))==null||R.push(D):l.set(O.groupIds[0],[D]):g.push(D),O.type){case"rectangle":case"ellipse":case"diamond":{let U="",Y="middle";if(O.boundElements!==null){for(const X of O.boundElements)if(X.type==="text"){const ie=r.find(pe=>pe.id===X.id);ie&&(U=ie.text,Y=L5[ie.textAlign])}}const q=O.backgroundColor==="transparent"?O.strokeColor:O.backgroundColor;a.shapes.push({...z,type:"geo",props:{geo:O.type,url:O.link??"",w:O.width,h:O.height,size:e1[O.strokeWidth]??"draw",color:CS[q]??"black",text:U,align:Y,dash:t1(O),fill:fde(O)}});break}case"freedraw":{a.shapes.push({...z,type:"draw",props:{dash:t1(O),size:e1[O.strokeWidth],color:CS[O.strokeColor]??"black",segments:[{type:"free",points:O.points.map(([U,Y,q=.5])=>({x:U,y:Y,z:q}))}]}});break}case"line":{const U=O.points[0],Y=O.points[O.points.length-1],q=I4(O.points.length);a.shapes.push({...z,type:"line",props:{dash:t1(O),size:e1[O.strokeWidth],color:CS[O.strokeColor]??"black",spline:O.roundness?"cubic":"line",handles:{start:{id:"start",type:"vertex",index:q[0],x:U[0],y:U[1]},end:{id:"end",type:"vertex",index:q[q.length-1],x:Y[0],y:Y[1]},...Object.fromEntries(O.points.slice(1,-1).map(([X,ie],pe)=>{const ae=dr();return[ae,{id:ae,type:"vertex",index:q[pe+1],x:X,y:ie}]}))}}});break}case"arrow":{let U="";if(O.boundElements!==null){for(const pe of O.boundElements)if(pe.type==="text"){const ae=r.find(te=>te.id===pe.id);ae&&(U=ae.text)}}const Y=O.points[0],q=O.points[O.points.length-1],X=h.get((L=O.startBinding)==null?void 0:L.elementId),ie=h.get((A=O.endBinding)==null?void 0:A.elementId);a.shapes.push({...z,type:"arrow",props:{text:U,bend:dde(O,Y,q),dash:t1(O),size:e1[O.strokeWidth]??"m",color:CS[O.strokeColor]??"black",start:X?{type:"binding",boundShapeId:X,normalizedAnchor:{x:.5,y:.5},isPrecise:!1,isExact:!1}:{type:"point",x:Y[0],y:Y[1]},end:ie?{type:"binding",boundShapeId:ie,normalizedAnchor:{x:.5,y:.5},isPrecise:!1,isExact:!1}:{type:"point",x:q[0],y:q[1]},arrowheadEnd:j5[O.endArrowhead]??"none",arrowheadStart:j5[O.startArrowhead]??"none"}});break}case"text":{const{size:U,scale:Y}=ade(O.fontSize);a.shapes.push({...z,type:"text",props:{size:U,scale:Y,font:lde[O.fontFamily]??"draw",color:CS[O.strokeColor]??"black",text:O.text,align:L5[O.textAlign]}});break}case"image":{const U=o[O.fileId];if(!U)break;const Y=Wh.createId();a.assets.push({id:Y,typeName:"asset",type:"image",props:{w:O.width,h:O.height,name:O.id??"Untitled",isAnimated:!1,mimeType:U.mimeType,src:U.dataURL},meta:{}}),a.shapes.push({...z,type:"image",props:{w:O.width,h:O.height,assetId:Y}})}}S=Zu(S)}const w=e??(t.inputs.shiftKey?t.inputs.currentPagePoint:void 0);t.mark("paste"),t.putContentOntoCurrentPage(a,{point:w,select:!1,preserveIds:!0});for(const O of l.values())if(O.length>1){t.groupShapes(O);const D=t.getShape(O[0]);D!=null&&D.parentId&&il(D.parentId)&&g.push(D.parentId)}for(const[O,D]of u)t.select(O),t.rotateShapesBy([O],D);const k=Bt(g.map(O=>t.getShape(O))),C=Mt.Common(k.map(O=>t.getShapePageBounds(O))),E=t.getViewportPageBounds().center;t.updateShapes(k.map(O=>{const D={x:(O.x??0)-(C.x+C.w/2),y:(O.y??0)-(C.y+C.h/2)};return{id:O.id,type:O.type,x:E.x+D.x,y:E.y+D.y}})),t.setSelectedShapes(g)}const ode=t=>{const n=t/100;return n<.2?.1:n<.4?.25:n<.6?.5:n<.8?.75:1},e1={1:"s",2:"m",3:"l",4:"xl"},sde={16:"s",20:"m",28:"l",36:"xl"};function ade(t){const n=sde[t];return n?{size:n,scale:1}:t<16?{size:"s",scale:t/16}:t>36?{size:"xl",scale:t/36}:{size:"m",scale:1}}const lde={1:"draw",2:"sans",3:"mono"},CS={"#ffffff":"grey","#000000":"black","#343a40":"black","#495057":"grey","#c92a2a":"red","#a61e4d":"light-red","#862e9c":"violet","#5f3dc4":"light-violet","#364fc7":"blue","#1864ab":"light-blue","#0b7285":"light-green","#087f5b":"light-green","#2b8a3e":"green","#5c940d":"light-green","#e67700":"yellow","#d9480f":"orange","#ced4da":"grey","#868e96":"grey","#fa5252":"light-red","#e64980":"red","#be4bdb":"light-violet","#7950f2":"violet","#4c6ef5":"blue","#228be6":"light-blue","#15aabf":"light-green","#12b886":"green","#40c057":"green","#82c91e":"light-green","#fab005":"yellow","#fd7e14":"orange","#212529":"grey"},cde={solid:"draw",dashed:"dashed",dotted:"dotted"},ude={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},L5={left:"start",center:"middle",right:"end"},j5={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"};function dde(t,n,e){let r=0;if(t.points.length>2){const o=new N(n[0],n[1]),a=new N(e[0],e[1]),l=new N(t.points[1][0],t.points[1][1]),u=N.Sub(a,o),d=N.Per(u),h=N.Med(a,o),g=N.Sub(h,d),v=N.Add(h,d),S=N.NearestPointOnLineSegment(g,v,l,!1);r=N.Dist(S,h),N.Clockwise(S,a,h)&&(r*=-1)}return r}const t1=t=>{let n=cde[t.strokeStyle]??"draw";return n==="draw"&&t.roughness===0&&(n="solid"),n},fde=t=>t.backgroundColor==="transparent"?"none":ude[t.fillStyle]??"solid";async function w8(t,n,e,r){const a=(await Promise.all(n.map(async l=>await(await fetch(l)).blob()))).map(l=>new File([l],"tldrawFile",{type:l.type}));t.mark("paste"),await t.putExternalContent({type:"files",files:a,point:e,ignoreParent:!1,sources:r}),n.forEach(l=>URL.revokeObjectURL(l))}function hde(t,n,e){const r=e??(t.inputs.shiftKey?t.inputs.currentPagePoint:void 0);t.mark("paste"),t.putContentOntoCurrentPage(n,{point:r,select:!0})}async function TI(t,n,e,r){var o;try{if(new URL(n).pathname.match(/\.(png|jpe?g|gif|svg|webp)$/i)&&(o=(await fetch(n,{method:"HEAD"})).headers.get("content-type"))!=null&&o.match(/^image\//)){t.mark("paste"),w8(t,[n]);return}}catch(a){a.message!=="Failed to fetch"&&console.error(a)}return t.mark("paste"),await t.putExternalContent({type:"url",point:e,url:n,sources:r})}const x8=()=>{},C8=I.createContext({});function pde({onEvent:t,children:n}){return x.jsx(C8.Provider,{value:t??x8,children:n})}function qm(){return I.useContext(C8)??x8}function gde(t){const n=document.implementation.createHTMLDocument("");return n.documentElement.innerHTML=t.trim(),n.body.textContent||n.body.innerText||""}const mde=t=>{try{const n=new URL(t);return n.protocol==="http:"||n.protocol==="https:"}catch{return!1}},vde=t=>{const n=t.split(/[\n\s]/);for(const e of n)try{const r=new URL(e);if(!(r.protocol==="http:"||r.protocol==="https:"))return}catch{return}return u4(n)},yde=t=>/^<svg/.test(t),Sde=["input","select","textarea"];function V1(t){const{activeElement:n}=document;return t.getIsMenuOpen()||n&&(n.getAttribute("contenteditable")||Sde.indexOf(n.tagName.toLowerCase())>-1)}async function iP(t){return new Promise((n,e)=>{const r=new FileReader;r.addEventListener("loadend",()=>{const o=r.result;n(o)}),r.addEventListener("error",()=>{e(r.error)}),r.readAsText(t)})}const bde=t=>t.types.find(n=>n.match(/^image\//)),oP=(t,n,e,r)=>{const o=vde(n);if(o)for(const a of o)TI(t,a,e);else mde(n)?TI(t,n,e):yde(n)?(t.mark("paste"),t.putExternalContent({type:"svg-text",text:n,point:e,sources:r})):(t.mark("paste"),t.putExternalContent({type:"text",text:n,point:e,sources:r}))},wde=async(t,n,e)=>{if(t.getEditingShapeId()!==null)return;if(!n)throw Error("No clipboard data");const r=[];for(const o of Object.values(n.items))switch(o.kind){case"file":{r.push({type:"file",source:new Promise(a=>a(o.getAsFile()))});break}case"string":{o.type==="text/html"?r.push({type:"html",source:new Promise(a=>o.getAsString(a))}):o.type==="text/plain"?r.push({type:"text",source:new Promise(a=>o.getAsString(a))}):r.push({type:o.type,source:new Promise(a=>o.getAsString(a))});break}}_8(t,r,e)},E8=async(t,n,e)=>{const r=[];for(const o of n){if(bde(o))for(const a of o.types)a.match(/^image\//)&&r.push({type:"blob",source:o.getType(a)});o.types.includes("text/html")&&r.push({type:"html",source:new Promise(a=>o.getType("text/html").then(l=>iP(l).then(a)))}),o.types.includes("text/uri-list")&&r.push({type:"url",source:new Promise(a=>o.getType("text/uri-list").then(l=>iP(l).then(a)))}),o.types.includes("text/plain")&&r.push({type:"text",source:new Promise(a=>o.getType("text/plain").then(l=>iP(l).then(a)))})}return await _8(t,r,e)};async function _8(t,n,e){const r=n.filter(a=>(a.type==="file"||a.type==="blob")&&a.source!==null);if(r.length){const l=(await Promise.all(r.map(u=>u.source))).filter(Boolean).map(u=>URL.createObjectURL(u));return await w8(t,l,e)}const o=await Promise.all(n.filter(a=>a.type!=="file").map(a=>new Promise(l=>{const u=a;if(u.type==="file"){l({type:"error",data:null,reason:"unexpected file"});return}u.source.then(d=>{var g;const h=(g=d.match(/<tldraw[^>]*>(.*)<\/tldraw>/))==null?void 0:g[1];if(h)try{const v=b8.decompressFromBase64(h);if(v===null){l({type:"error",data:v,reason:"found tldraw data comment but could not parse base64"});return}else{const S=JSON.parse(v);if(S.type!=="application/tldraw"&&l({type:"error",data:S,reason:`found tldraw data comment but JSON was of a different type: ${S.type}`}),typeof S.data=="string"){l({type:"error",data:S,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"});return}l({type:"tldraw",data:S.data});return}}catch{l({type:"error",data:h,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"});return}else{if(u.type==="html"){l({type:"text",data:d,subtype:"html"});return}if(u.type==="url"){l({type:"text",data:d,subtype:"url"});return}try{const v=JSON.parse(d);if(v.type==="excalidraw/clipboard"){l({type:"excalidraw",data:v});return}else{l({type:"text",data:d,subtype:"json"});return}}catch{l({type:"text",data:d,subtype:"text"});return}}l({type:"error",data:d,reason:"unhandled case"})})})));for(const a of o)if(a.type==="tldraw"){hde(t,a.data,e);return}for(const a of o)if(a.type==="excalidraw"){ide(t,a.data,e);return}for(const a of o)if(a.type==="text"&&a.subtype==="html"){const u=new DOMParser().parseFromString(a.data,"text/html").querySelector("body");if(u&&Array.from(u.children).filter(h=>h.nodeType===1).length===1&&u.firstElementChild&&u.firstElementChild.tagName==="A"&&u.firstElementChild.hasAttribute("href")&&u.firstElementChild.getAttribute("href")!==""){const h=u.firstElementChild.getAttribute("href");oP(t,h,e,o);return}if(!o.some(h=>h.type==="text"&&h.subtype!=="html")&&a.data.trim()){oP(t,gde(a.data),e,o);return}}for(const a of o)if(a.type==="text"&&a.subtype==="url"){TI(t,a.data,e,o);return}for(const a of o)if(a.type==="text"&&a.subtype==="text"&&a.data.trim()){oP(t,a.data,e,o);return}}const _C=t=>{var r;const n=t.getContentFromCurrentPage(t.getSelectedShapeIds());if(!n){navigator&&navigator.clipboard&&navigator.clipboard.writeText("");return}const e=b8.compressToBase64(JSON.stringify({type:"application/tldraw",kind:"content",data:n}));if(!(typeof navigator>"u")){const o=n.shapes.map(a=>t.isShapeOfType(a,"text")||t.isShapeOfType(a,"geo")||t.isShapeOfType(a,"arrow")?a.props.text:t.isShapeOfType(a,"bookmark")||t.isShapeOfType(a,"embed")?a.props.url:null).filter(gK);if((r=navigator.clipboard)!=null&&r.write){const a=new Blob([`<tldraw>${e}</tldraw>`],{type:"text/html"});let l=o.join(" ");l===""&&(l=" "),navigator.clipboard.write([new ClipboardItem({"text/html":a,"text/plain":new Blob([l],{type:"text/plain"})})])}else navigator.clipboard.writeText&&navigator.clipboard.writeText(`<tldraw>${e}</tldraw>`)}};function xde(){const t=Oe(),n=qm(),e=I.useCallback(function(l){t.getSelectedShapeIds().length!==0&&(_C(t),n("copy",{source:l}))},[t,n]),r=I.useCallback(function(l){t.getSelectedShapeIds().length!==0&&(_C(t),t.deleteShapes(t.getSelectedShapeIds()),n("cut",{source:l}))},[t,n]),o=I.useCallback(async function(l,u,d){t.getEditingShapeId()!==null||V1(t)||(Array.isArray(l)&&l[0]instanceof ClipboardItem?(E8(t,l,d),n("paste",{source:"menu"})):navigator.clipboard.read().then(h=>{o(h,u,d)}))},[t,n]);return{copy:e,cut:r,paste:o}}function Cde(){const t=Oe(),n=qm(),e=He("editor.isFocused",()=>t.getInstanceState().isFocused,[t]);I.useEffect(()=>{if(!e)return;const r=()=>{t.getSelectedShapeIds().length===0||t.getEditingShapeId()!==null||V1(t)||(_C(t),n("copy",{source:"kbd"}))};function o(){t.getSelectedShapeIds().length===0||t.getEditingShapeId()!==null||V1(t)||(_C(t),t.deleteShapes(t.getSelectedShapeIds()),n("cut",{source:"kbd"}))}let a=!1;const l=d=>{d.button===1&&(a=!0,requestAnimationFrame(()=>{a=!1}))},u=d=>{if(a){d.stopPropagation();return}t.getEditingShapeId()!==null||V1(t)||(d.clipboardData&&!t.inputs.shiftKey?wde(t,d.clipboardData):navigator.clipboard.read().then(h=>{Array.isArray(h)&&h[0]instanceof ClipboardItem&&E8(t,h,t.inputs.currentPagePoint)}),n("paste",{source:"kbd"}))};return document.addEventListener("copy",r),document.addEventListener("cut",o),document.addEventListener("paste",u),document.addEventListener("pointerup",l),()=>{document.removeEventListener("copy",r),document.removeEventListener("cut",o),document.removeEventListener("paste",u),document.removeEventListener("pointerup",l)}},[t,n,e])}async function Ede(t,n,e){const{type:r,quality:o,scale:a}=e,l=+t.getAttribute("width"),u=+t.getAttribute("height");let d=l*a,h=u*a;const g=await T8(t),v=URL.createObjectURL(new Blob([g],{type:"image/svg+xml"})),S=await Kj();if(l>S.maxWidth&&(d=S.maxWidth,h=d/l*u),u>S.maxHeight&&(h=S.maxHeight,d=h/u*l),d*h>S.maxArea){const R=Math.sqrt(S.maxArea/(d*h));d*=R,h*=R}d=Math.floor(d),h=Math.floor(h);const w=d/l,k=await new Promise(R=>{const L=new Image;L.crossOrigin="anonymous",L.onload=async()=>{n&&await new Promise(D=>setTimeout(D,250));const A=document.createElement("canvas"),O=A.getContext("2d");A.width=d,A.height=h,O.imageSmoothingEnabled=!0,O.imageSmoothingQuality="high",O.drawImage(L,0,0,d,h),URL.revokeObjectURL(v),R(A)},L.onerror=()=>{R(null)},L.src=v});if(!k)return null;const C=await new Promise(R=>k.toBlob(L=>{(!L||kr.throwToBlob.get())&&R(null),R(L)},"image/"+r,o));if(!C)return null;const E=new DataView(await C.arrayBuffer());return Vc.setPhysChunk(E,w,{type:"image/"+r})}async function T8(t){const n=t.cloneNode(!0);t.setAttribute("width",+t.getAttribute("width")+""),t.setAttribute("height",+t.getAttribute("height")+"");const e=new FileReader,r=Array.from(n.querySelectorAll("image"));for(const a of r){const l=a.getAttribute("xlink:href");if(l&&!l.startsWith("data:")){const u=await(await fetch(l)).blob(),d=await new Promise((h,g)=>{e.onload=()=>h(e.result),e.onerror=()=>g(e.error),e.readAsDataURL(u)});a.setAttribute("xlink:href",d)}}return new XMLSerializer().serializeToString(n).replaceAll("&#10;      ","").replaceAll(/((\s|")[0-9]*\.[0-9]{2})([0-9]*)(\b|"|\))/g,"$1")}async function k8(t,n,e){const r=await t.getSvg(n!=null&&n.length?n:[...t.getCurrentPageShapeIds()],{scale:1,background:t.getInstanceState().exportBackground,...e});if(!r)throw new Error("Could not construct SVG.");return r}async function kI(t,n,e,r={}){switch(e){case"svg":return T8(await k8(t,n,r));case"json":{const o=t.getContentFromCurrentPage(n);return JSON.stringify(o)}default:Nm(e)}}async function P8(t,n,e,r={}){switch(e){case"svg":return new Blob([await kI(t,n,"svg",r)],{type:"text/plain"});case"json":return new Blob([await kI(t,n,"json",r)],{type:"text/plain"});case"jpeg":case"png":case"webp":{const o=await Ede(await k8(t,n,r),t.environment.isSafari,{type:e,quality:1,scale:2});if(!o)throw new Error("Could not construct image.");return o}default:Nm(e)}}const _de={jpeg:"image/jpeg",png:"image/png",webp:"image/webp",json:"text/plain",svg:"text/plain"};function Tde(t,n,e,r={}){return{blobPromise:P8(t,n,e,r),mimeType:_de[e]}}function kde(t,n,e="svg",r={}){if(!window.navigator.clipboard)return Promise.reject(new Error("Copy not supported"));if(window.navigator.clipboard.write){const{blobPromise:o,mimeType:a}=Tde(t,n,e,r);return window.navigator.clipboard.write([new ClipboardItem({[a]:o})]).catch(l=>(console.error(l),o.then(u=>window.navigator.clipboard.write([new ClipboardItem({[a]:u})]))))}switch(e){case"json":case"svg":return Pde(async()=>kI(t,n,e,r));case"jpeg":case"png":throw new Error("Copy not supported");default:Nm(e)}}async function Pde(t){var n,e;await((e=(n=navigator.clipboard)==null?void 0:n.writeText)==null?void 0:e.call(n,await t()))}const I8=I.createContext({});function Ide({children:t}){const[n,e]=I.useState([]),r=I.useCallback(l=>{const u=l.id??dr();return e(d=>[...d.filter(h=>h.id!==l.id),{...l,id:u}]),u},[]),o=I.useCallback(l=>(e(u=>u.filter(d=>d.id!==l)),l),[]),a=I.useCallback(()=>{e(()=>[])},[]);return x.jsx(I8.Provider,{value:{toasts:n,addToast:r,removeToast:o,clearToasts:a},children:t})}function ru(){const t=I.useContext(I8);if(!t)throw new Error("useToasts must be used within a ToastsProvider");return t}function Rde(){const t=Oe(),{addToast:n}=ru(),e=In();return I.useCallback((r,o="svg")=>{kde(t,r,o).catch(()=>{n({id:"copy-fail",icon:"warning-triangle",title:e("toast.error.copy-fail.title"),description:e("toast.error.copy-fail.desc")})})},[t,n,e])}const R8=I.createContext({});function Mde({children:t}){const n=Oe(),e=qm(),[r,o]=I.useState([]),a=I.useCallback(h=>{const g=h.id??dr();return o(v=>[...v.filter(S=>S.id!==h.id),{...h,id:g}]),e("open-menu",{source:"dialog",id:g}),n.addOpenMenu(g),g},[n,e]),l=I.useCallback((h,g)=>(o(v=>v.map(S=>S.id===h?{...S,...g}:S)),e("open-menu",{source:"dialog",id:h}),n.addOpenMenu(h),h),[n,e]),u=I.useCallback(h=>(o(g=>g.filter(v=>{var S;return v.id===h?((S=v.onClose)==null||S.call(v),!1):!0})),e("close-menu",{source:"dialog",id:h}),n.deleteOpenMenu(h),h),[n,e]),d=I.useCallback(()=>{o(h=>(h.forEach(g=>{var v;(v=g.onClose)==null||v.call(g),e("close-menu",{source:"dialog",id:g.id}),n.deleteOpenMenu(g.id)}),[]))},[n,e]);return x.jsx(R8.Provider,{value:{dialogs:r,addDialog:a,removeDialog:u,clearDialogs:d,updateDialog:l},children:t})}function up(){const t=I.useContext(R8);if(!t)throw new Error("useDialogs must be used within a DialogsProvider");return t}async function Ade(t,n,e="png",r={}){let o=`shapes at ${N5()}`;if(n.length===1){const u=t.getShape(n[0]);t.isShapeOfType(u,"frame")?o=u.props.name??"frame":o=`${u.id.replace(/:/,"_")} at ${N5()}`}o+=`.${e}`;const a=await P8(t,n,e,r),l=new File([a],o,{type:a.type});$de(l)}function N5(){const t=new Date,n=String(t.getFullYear()).slice(2),e=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),l=String(t.getSeconds()).padStart(2,"0");return`${n}-${e}-${r} ${o}.${a}.${l}`}function $de(t){const n=document.createElement("a"),e=URL.createObjectURL(t);n.href=e,n.download=t.name,n.click(),URL.revokeObjectURL(e)}function Ode(){const t=Oe(),{addToast:n}=ru(),e=In();return I.useCallback((r,o="png")=>{Ade(t,r,o,{scale:1,background:t.getInstanceState().exportBackground}).catch(a=>{console.error(a.message),n({id:"export-fail",title:e("toast.error.export-fail.title"),description:e("toast.error.export-fail.desc")})})},[t,n,e])}function M8(){const t=Oe(),n=I.useRef();return I.useEffect(()=>{const e=window.document.createElement("input");e.type="file",e.accept="image/jpeg,image/png,image/gif,image/svg+xml,video/mp4,video/quicktime",e.multiple=!0,n.current=e;async function r(o){const a=o.target.files;!a||a.length===0||(await t.putExternalContent({type:"files",files:Array.from(a),point:t.getViewportPageBounds().center,ignoreParent:!1}),e.value="")}return e.addEventListener("change",r),()=>{n.current=void 0,e.removeEventListener("change",r)}},[t]),I.useCallback(()=>{var e;(e=n.current)==null||e.click()},[n])}function Dde(){const t=Oe(),n=I.useRef(null),e=I.useRef(null);return I.useCallback(async function(){const o=document.createElement("div"),a=document.createElement("style"),l=(R,L)=>{R&&(R.innerHTML=""),L&&document.head.contains(L)&&document.head.removeChild(L),R&&document.body.contains(R)&&document.body.removeChild(R)};l(n.current,e.current),n.current=o,e.current=a;const u=`tl-print-surface-${dr()}`;o.className=u,a.innerHTML=`
			.${u} {
				display: none;
			}

			.${u} svg {
				max-width: 100%;
				height: 100%;
				display: block;
			}

			@media print {				  
				html, body {
					min-height: 100%;
					height: 100%;
					margin: 0;
				}

				body {
					position: relative;
				}

				body > * {
					display: none;
				}

				.tldraw__editor {
					display: none;
				}

				.${u} {
					display: block !important;
					background: white;
					min-height: 100%;
					height: 100%;
					max-width: 100%;
				}

				.${u}__item {
					padding: 10mm;
					display: flex;
					min-height: 100%;
					flex-direction: column;
					page-break-after: always;
					position: relative;
					overflow: hidden;
					height: 100%;
				}

				.${u}__item__main {
					flex: 1;
					display: flex;
					align-items: center;
					justify-content: center;
					max-height: 100%;
				}

				.${u}__item__header {
					display: none;
				}

				.${u}__item__footer {
					display: none;
					text-align: right;
				}

				.${u}__item__footer__hide {
					display: none;
				}

				
			}

		`;const d=()=>{document.head.appendChild(a),document.body.appendChild(o)},h=()=>{t.once("change-history",()=>{l(o,a)})};window.addEventListener("beforeprint",d),window.addEventListener("afterprint",h);function g(R,L,A){try{o.innerHTML+=`<div class="${u}__item">
        <div class="${u}__item__header">
          ${R.replace(/</g,"&lt;").replace(/>/g,"&gt;")}
        </div>
        <div class="${u}__item__main">
          ${A.outerHTML}
        </div>
        <div class="${u}__item__footer ${u}__item__footer__${L?"":"hide"}">
          ${L??""}
        </div>
      </div>`}catch(O){console.error(O)}}function v(){t.environment.isChromeForIos?(d(),window.print()):t.environment.isSafari?(d(),document.execCommand("print",!1)):window.print()}const S=t.getSelectedShapeIds(),w=t.getCurrentPageId(),k=t.getPages(),E={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"};if(t.getSelectedShapeIds().length>0){const R=await t.getSvg(S,E);if(R){const L=k.find(A=>A.id===w);g(`tldraw — ${L==null?void 0:L.name}`,null,R),v()}}else{const R=t.getCurrentPage(),L=await t.getSvg(t.getSortedChildIdsForParent(R.id),E);L&&(g(`tldraw — ${R.name}`,null,L),v())}window.removeEventListener("beforeprint",d),window.removeEventListener("afterprint",h)},[t])}const A8=I.createContext({});function Lde(t){return Object.fromEntries(t.map(n=>[n.id,n]))}function jde({overrides:t,children:n}){const e=Oe(),{addDialog:r,clearDialogs:o}=up(),{clearToasts:a}=ru(),l=M8(),u=Dde(),{cut:d,copy:h,paste:g}=xde(),v=Rde(),S=Ode(),w=qm(),k=I.useMemo(()=>{function C(){return e.isIn("select")||(e.complete(),e.setCurrentTool("select")),!1}function E(){return e.getSelectedShapeIds().length>0}const L=Lde([{id:"edit-link",label:"action.edit-link",icon:"link",readonlyOk:!1,onSelect(A){E()&&(C()||(w("edit-link",{source:A}),e.mark("edit-link"),r({component:nde})))}},{id:"insert-embed",label:"action.insert-embed",readonlyOk:!1,kbd:"$i",onSelect(A){w("insert-embed",{source:A}),r({component:S8})}},{id:"insert-media",label:"action.insert-media",kbd:"$u",readonlyOk:!1,onSelect(A){w("insert-media",{source:A}),l()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"$z",readonlyOk:!1,onSelect(A){w("undo",{source:A}),e.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"$!z",readonlyOk:!1,onSelect(A){w("redo",{source:A}),e.redo()}},{id:"export-as-svg",label:"action.export-as-svg",menuLabel:"action.export-as-svg.short",contextMenuLabel:"action.export-as-svg.short",readonlyOk:!0,onSelect(A){w("export-as",{format:"svg",source:A}),S(e.getSelectedShapeIds(),"svg")}},{id:"export-as-png",label:"action.export-as-png",menuLabel:"action.export-as-png.short",contextMenuLabel:"action.export-as-png.short",readonlyOk:!0,onSelect(A){w("export-as",{format:"png",source:A}),S(e.getSelectedShapeIds(),"png")}},{id:"export-as-json",label:"action.export-as-json",menuLabel:"action.export-as-json.short",contextMenuLabel:"action.export-as-json.short",readonlyOk:!0,onSelect(A){w("export-as",{format:"json",source:A}),S(e.getSelectedShapeIds(),"json")}},{id:"copy-as-svg",label:"action.copy-as-svg",menuLabel:"action.copy-as-svg.short",contextMenuLabel:"action.copy-as-svg.short",kbd:"$!c",readonlyOk:!0,onSelect(A){w("copy-as",{format:"svg",source:A}),v(e.getSelectedShapeIds(),"svg")}},{id:"copy-as-png",label:"action.copy-as-png",menuLabel:"action.copy-as-png.short",contextMenuLabel:"action.copy-as-png.short",readonlyOk:!0,onSelect(A){w("copy-as",{format:"png",source:A}),v(e.getSelectedShapeIds(),"png")}},{id:"copy-as-json",label:"action.copy-as-json",menuLabel:"action.copy-as-json.short",contextMenuLabel:"action.copy-as-json.short",readonlyOk:!0,onSelect(A){w("copy-as",{format:"json",source:A}),v(e.getSelectedShapeIds(),"json")}},{id:"toggle-auto-size",label:"action.toggle-auto-size",readonlyOk:!1,onSelect(A){E()&&(C()||(w("toggle-auto-size",{source:A}),e.mark("toggling auto size"),e.updateShapes(e.getSelectedShapes().filter(O=>e.isShapeOfType(O,"text")&&O.props.autoSize===!1).map(O=>({id:O.id,type:O.type,props:{...O.props,w:8,autoSize:!0}})))))}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect(A){w("open-embed-link",{source:A});const O=e.getSelectedShapeIds(),D="No embed shapes selected";if(O.length!==1){console.error(D);return}const z=e.getShape(O[0]);if(!z||!e.isShapeOfType(z,"embed")){console.error(D);return}vJ(z.props.url,"_blank")}},{id:"select-zoom-tool",readonlyOk:!0,kbd:"z",onSelect(A){var O,D;if(((O=e.root.getCurrent())==null?void 0:O.id)!=="zoom"&&(w("zoom-tool",{source:A}),!(e.inputs.shiftKey||e.inputs.ctrlKey))){const z=e.root.getCurrent();z&&((D=z.getCurrent())==null?void 0:D.id)==="idle"&&e.setCurrentTool("zoom",{onInteractionEnd:z.id,maskAs:"zoom"})}}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",readonlyOk:!1,onSelect(A){E()&&(C()||e.batch(()=>{w("convert-to-bookmark",{source:A});const O=e.getSelectedShapes(),D=[],z=[];for(const U of O){if(!U||!e.isShapeOfType(U,"embed")||!U.props.url)continue;const Y=new N(U.x,U.y);Y.rot(-U.rotation),Y.add(new N(U.props.w/2-300/2,U.props.h/2-320/2)),Y.rot(U.rotation);const q={id:Ir(),type:"bookmark",rotation:U.rotation,x:Y.x,y:Y.y,opacity:1,props:{url:U.props.url}};D.push(q),z.push(U.id)}e.mark("convert shapes to bookmark"),e.deleteShapes(z),e.createShapes(D)}))}},{id:"convert-to-embed",label:"action.convert-to-embed",readonlyOk:!1,onSelect(A){E()&&(C()||(w("convert-to-embed",{source:A}),e.batch(()=>{const O=e.getSelectedShapeIds(),D=Bt(O.map(Y=>e.getShape(Y))),z=[],U=[];for(const Y of D){if(!e.isShapeOfType(Y,"bookmark"))continue;const{url:q}=Y.props,X=td(Y.props.url);if(!X||!X.definition)continue;const{width:ie,height:pe}=X.definition,ae=new N(Y.x,Y.y);ae.rot(-Y.rotation),ae.add(new N(Y.props.w/2-ie/2,Y.props.h/2-pe/2)),ae.rot(Y.rotation);const te={id:Ir(),type:"embed",x:ae.x,y:ae.y,rotation:Y.rotation,props:{url:q,w:ie,h:pe}};z.push(te),U.push(Y.id)}e.mark("convert shapes to embed"),e.deleteShapes(U),e.createShapes(z)})))}},{id:"duplicate",kbd:"$d",label:"action.duplicate",icon:"duplicate",readonlyOk:!1,onSelect(A){if(!E()||C())return;w("duplicate-shapes",{source:A});const O=e.getSelectedShapeIds(),D=Mt.Common(Bt(O.map(U=>e.getShapePageBounds(U)))),z=e.getInstanceState().canMoveCamera?{x:D.width+10,y:0}:{x:16/e.getZoomLevel(),y:16/e.getZoomLevel()};e.mark("duplicate shapes"),e.duplicateShapes(O,z)}},{id:"ungroup",label:"action.ungroup",kbd:"$!g",icon:"ungroup",readonlyOk:!1,onSelect(A){E()&&(C()||(w("ungroup-shapes",{source:A}),e.mark("ungroup"),e.ungroupShapes(e.getSelectedShapeIds())))}},{id:"group",label:"action.group",kbd:"$g",icon:"group",readonlyOk:!1,onSelect(A){if(!E()||C())return;w("group-shapes",{source:A});const O=e.getOnlySelectedShape();O&&e.isShapeOfType(O,"group")?(e.mark("ungroup"),e.ungroupShapes(e.getSelectedShapeIds())):(e.mark("group"),e.groupShapes(e.getSelectedShapeIds()))}},{id:"remove-frame",label:"action.remove-frame",kbd:"$!f",readonlyOk:!1,onSelect(A){if(!E())return;w("remove-frame",{source:A});const O=e.getSelectedShapes();O.length>0&&O.every(D=>e.isShapeOfType(D,"frame"))&&(e.mark("remove-frame"),zce(e,O.map(D=>D.id)))}},{id:"fit-frame-to-content",label:"action.fit-frame-to-content",readonlyOk:!1,onSelect(A){if(!E())return;w("fit-frame-to-content",{source:A});const O=e.getOnlySelectedShape();O&&e.isShapeOfType(O,"frame")&&(e.mark("fit-frame-to-content"),Uce(e,O.id))}},{id:"align-left",label:"action.align-left",kbd:"?A",icon:"align-left",readonlyOk:!1,onSelect(A){E()&&(C()||(w("align-shapes",{operation:"left",source:A}),e.mark("align left"),e.alignShapes(e.getSelectedShapeIds(),"left")))}},{id:"align-center-horizontal",label:"action.align-center-horizontal",contextMenuLabel:"action.align-center-horizontal.short",kbd:"?H",icon:"align-center-horizontal",readonlyOk:!1,onSelect(A){E()&&(C()||(w("align-shapes",{operation:"center-horizontal",source:A}),e.mark("align center horizontal"),e.alignShapes(e.getSelectedShapeIds(),"center-horizontal")))}},{id:"align-right",label:"action.align-right",kbd:"?D",icon:"align-right",readonlyOk:!1,onSelect(A){E()&&(C()||(w("align-shapes",{operation:"right",source:A}),e.mark("align right"),e.alignShapes(e.getSelectedShapeIds(),"right")))}},{id:"align-center-vertical",label:"action.align-center-vertical",contextMenuLabel:"action.align-center-vertical.short",kbd:"?V",icon:"align-center-vertical",readonlyOk:!1,onSelect(A){E()&&(C()||(w("align-shapes",{operation:"center-vertical",source:A}),e.mark("align center vertical"),e.alignShapes(e.getSelectedShapeIds(),"center-vertical")))}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"?W",readonlyOk:!1,onSelect(A){E()&&(C()||(w("align-shapes",{operation:"top",source:A}),e.mark("align top"),e.alignShapes(e.getSelectedShapeIds(),"top")))}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"?S",readonlyOk:!1,onSelect(A){E()&&(C()||(w("align-shapes",{operation:"bottom",source:A}),e.mark("align bottom"),e.alignShapes(e.getSelectedShapeIds(),"bottom")))}},{id:"distribute-horizontal",label:"action.distribute-horizontal",contextMenuLabel:"action.distribute-horizontal.short",icon:"distribute-horizontal",kbd:"?!h",readonlyOk:!1,onSelect(A){E()&&(C()||(w("distribute-shapes",{operation:"horizontal",source:A}),e.mark("distribute horizontal"),e.distributeShapes(e.getSelectedShapeIds(),"horizontal")))}},{id:"distribute-vertical",label:"action.distribute-vertical",contextMenuLabel:"action.distribute-vertical.short",icon:"distribute-vertical",kbd:"?!V",readonlyOk:!1,onSelect(A){E()&&(C()||(w("distribute-shapes",{operation:"vertical",source:A}),e.mark("distribute vertical"),e.distributeShapes(e.getSelectedShapeIds(),"vertical")))}},{id:"stretch-horizontal",label:"action.stretch-horizontal",contextMenuLabel:"action.stretch-horizontal.short",icon:"stretch-horizontal",readonlyOk:!1,onSelect(A){E()&&(C()||(w("stretch-shapes",{operation:"horizontal",source:A}),e.mark("stretch horizontal"),e.stretchShapes(e.getSelectedShapeIds(),"horizontal")))}},{id:"stretch-vertical",label:"action.stretch-vertical",contextMenuLabel:"action.stretch-vertical.short",icon:"stretch-vertical",readonlyOk:!1,onSelect(A){E()&&(C()||(w("stretch-shapes",{operation:"vertical",source:A}),e.mark("stretch vertical"),e.stretchShapes(e.getSelectedShapeIds(),"vertical")))}},{id:"flip-horizontal",label:"action.flip-horizontal",contextMenuLabel:"action.flip-horizontal.short",kbd:"!h",readonlyOk:!1,onSelect(A){E()&&(C()||(w("flip-shapes",{operation:"horizontal",source:A}),e.mark("flip horizontal"),e.flipShapes(e.getSelectedShapeIds(),"horizontal")))}},{id:"flip-vertical",label:"action.flip-vertical",contextMenuLabel:"action.flip-vertical.short",kbd:"!v",readonlyOk:!1,onSelect(A){E()&&(C()||(w("flip-shapes",{operation:"vertical",source:A}),e.mark("flip vertical"),e.flipShapes(e.getSelectedShapeIds(),"vertical")))}},{id:"pack",label:"action.pack",icon:"pack",readonlyOk:!1,onSelect(A){E()&&(C()||(w("pack-shapes",{source:A}),e.mark("pack"),e.packShapes(e.getSelectedShapeIds(),16)))}},{id:"stack-vertical",label:"action.stack-vertical",contextMenuLabel:"action.stack-vertical.short",icon:"stack-vertical",readonlyOk:!1,onSelect(A){E()&&(C()||(w("stack-shapes",{operation:"vertical",source:A}),e.mark("stack-vertical"),e.stackShapes(e.getSelectedShapeIds(),"vertical",16)))}},{id:"stack-horizontal",label:"action.stack-horizontal",contextMenuLabel:"action.stack-horizontal.short",icon:"stack-horizontal",readonlyOk:!1,onSelect(A){E()&&(C()||(w("stack-shapes",{operation:"horizontal",source:A}),e.mark("stack-horizontal"),e.stackShapes(e.getSelectedShapeIds(),"horizontal",16)))}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",readonlyOk:!1,onSelect(A){E()&&(C()||(w("reorder-shapes",{operation:"toFront",source:A}),e.mark("bring to front"),e.bringToFront(e.getSelectedShapeIds())))}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"?]",readonlyOk:!1,onSelect(A){E()&&(C()||(w("reorder-shapes",{operation:"forward",source:A}),e.mark("bring forward"),e.bringForward(e.getSelectedShapeIds())))}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"?[",readonlyOk:!1,onSelect(A){E()&&(C()||(w("reorder-shapes",{operation:"backward",source:A}),e.mark("send backward"),e.sendBackward(e.getSelectedShapeIds())))}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",readonlyOk:!1,onSelect(A){E()&&(C()||(w("reorder-shapes",{operation:"toBack",source:A}),e.mark("send to back"),e.sendToBack(e.getSelectedShapeIds())))}},{id:"cut",label:"action.cut",kbd:"$x",readonlyOk:!1,onSelect(A){E()&&(C()||(e.mark("cut"),d(A)))}},{id:"copy",label:"action.copy",kbd:"$c",readonlyOk:!0,onSelect(A){E()&&(C()||h(A))}},{id:"paste",label:"action.paste",kbd:"$v",readonlyOk:!1,onSelect(A){var O;(O=navigator.clipboard)==null||O.read().then(D=>{g(D,A,A==="context-menu"?e.inputs.currentPagePoint:void 0)})}},{id:"select-all",label:"action.select-all",kbd:"$a",readonlyOk:!0,onSelect(A){e.batch(()=>{C()||(w("select-all-shapes",{source:A}),e.mark("select all kbd"),e.selectAll())})}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect(A){E()&&(C()||(w("select-none-shapes",{source:A}),e.mark("select none"),e.selectNone()))}},{id:"delete",label:"action.delete",kbd:"⌫,del,backspace",icon:"trash",readonlyOk:!1,onSelect(A){E()&&(C()||(w("delete-shapes",{source:A}),e.mark("delete"),e.deleteShapes(e.getSelectedShapeIds())))}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",readonlyOk:!1,onSelect(A){if(!E()||C())return;w("rotate-cw",{source:A}),e.mark("rotate-cw");const O=e.getSelectionRotation()%(Pr/2),D=OS(O,0)||OS(O,Pr/2);e.rotateShapesBy(e.getSelectedShapeIds(),Pr/2-(D?0:O))}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",readonlyOk:!1,onSelect(A){if(!E()||C())return;w("rotate-ccw",{source:A}),e.mark("rotate-ccw");const O=e.getSelectionRotation()%(Pr/2),D=OS(O,0);e.rotateShapesBy(e.getSelectedShapeIds(),D?-(Pr/2):-O)}},{id:"zoom-in",label:"action.zoom-in",kbd:"$=,=",readonlyOk:!0,onSelect(A){w("zoom-in",{source:A}),e.zoomIn(e.getViewportScreenCenter(),{duration:ed})}},{id:"zoom-out",label:"action.zoom-out",kbd:"$-,-",readonlyOk:!0,onSelect(A){w("zoom-out",{source:A}),e.zoomOut(e.getViewportScreenCenter(),{duration:ed})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"!0",readonlyOk:!0,onSelect(A){w("reset-zoom",{source:A}),e.resetZoom(e.getViewportScreenCenter(),{duration:ed})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"!1",readonlyOk:!0,onSelect(A){w("zoom-to-fit",{source:A}),e.zoomToFit({duration:ed})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"!2",readonlyOk:!0,onSelect(A){E()&&(C()||(w("zoom-to-selection",{source:A}),e.zoomToSelection({duration:ed})))}},{id:"toggle-snap-mode",label:"action.toggle-snap-mode",menuLabel:"action.toggle-snap-mode.menu",readonlyOk:!1,onSelect(A){w("toggle-snap-mode",{source:A}),e.user.updateUserPreferences({isSnapMode:!e.user.getIsSnapMode()})},checkbox:!0},{id:"toggle-dark-mode",label:"action.toggle-dark-mode",menuLabel:"action.toggle-dark-mode.menu",kbd:"$/",readonlyOk:!0,onSelect(A){w("toggle-dark-mode",{source:A}),e.user.updateUserPreferences({isDarkMode:!e.user.getIsDarkMode()})},checkbox:!0},{id:"toggle-reduce-motion",label:"action.toggle-reduce-motion",menuLabel:"action.toggle-reduce-motion.menu",readonlyOk:!0,onSelect(A){w("toggle-reduce-motion",{source:A}),e.user.updateUserPreferences({animationSpeed:e.user.getAnimationSpeed()===0?1:0})},checkbox:!0},{id:"toggle-edge-scrolling",label:"action.toggle-edge-scrolling",menuLabel:"action.toggle-edge-scrolling.menu",readonlyOk:!0,onSelect(A){w("toggle-edge-scrolling",{source:A}),e.user.updateUserPreferences({edgeScrollSpeed:e.user.getEdgeScrollSpeed()===0?1:0})},checkbox:!0},{id:"toggle-transparent",label:"action.toggle-transparent",menuLabel:"action.toggle-transparent.menu",contextMenuLabel:"action.toggle-transparent.context-menu",readonlyOk:!0,onSelect(A){w("toggle-transparent",{source:A}),e.updateInstanceState({exportBackground:!e.getInstanceState().exportBackground},{ephemeral:!0})},checkbox:!0},{id:"toggle-tool-lock",label:"action.toggle-tool-lock",menuLabel:"action.toggle-tool-lock.menu",readonlyOk:!1,kbd:"q",onSelect(A){w("toggle-tool-lock",{source:A}),e.updateInstanceState({isToolLocked:!e.getInstanceState().isToolLocked})},checkbox:!0},{id:"unlock-all",label:"action.unlock-all",readonlyOk:!1,onSelect(A){w("unlock-all",{source:A});const O=[];for(const D of e.getCurrentPageShapes())D.isLocked&&O.push({id:D.id,type:D.type,isLocked:!1});O.length>0&&e.updateShapes(O)}},{id:"toggle-focus-mode",label:"action.toggle-focus-mode",menuLabel:"action.toggle-focus-mode.menu",readonlyOk:!0,kbd:"$.",checkbox:!0,onSelect(A){requestAnimationFrame(()=>{e.batch(()=>{w("toggle-focus-mode",{source:A}),o(),a(),e.updateInstanceState({isFocusMode:!e.getInstanceState().isFocusMode})})})}},{id:"toggle-grid",label:"action.toggle-grid",menuLabel:"action.toggle-grid.menu",readonlyOk:!0,kbd:"$'",onSelect(A){w("toggle-grid-mode",{source:A}),e.updateInstanceState({isGridMode:!e.getInstanceState().isGridMode})},checkbox:!0},{id:"toggle-debug-mode",label:"action.toggle-debug-mode",menuLabel:"action.toggle-debug-mode.menu",readonlyOk:!0,onSelect(A){w("toggle-debug-mode",{source:A}),e.updateInstanceState({isDebugMode:!e.getInstanceState().isDebugMode})},checkbox:!0},{id:"print",label:"action.print",kbd:"$p",readonlyOk:!0,onSelect(A){w("print",{source:A}),u()}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect(A){w("exit-pen-mode",{source:A}),e.updateInstanceState({isPenMode:!1})}},{id:"stop-following",label:"action.stop-following",icon:"cross-2",readonlyOk:!0,onSelect(A){w("stop-following",{source:A}),e.stopFollowingUser()}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect(A){w("zoom-to-content",{source:A}),e.zoomToContent()}},{id:"toggle-lock",label:"action.toggle-lock",readonlyOk:!1,kbd:"!l",onSelect(A){e.mark("locking"),w("toggle-lock",{source:A}),e.toggleLock(e.getSelectedShapeIds())}}]);return t?t(e,L,void 0):L},[e,w,t,r,l,S,v,d,h,g,o,a,u]);return x.jsx(A8.Provider,{value:k,children:n})}function os(){const t=I.useContext(A8);if(!t)throw new Error("useTools must be used within a ToolProvider");return t}function uE(t){return t.filter(n=>n!=null&&n!==!1)}function un(t,...n){const e=uE(n);return e.length===0?null:{id:t,type:"group",checkbox:e.every(r=>r.type==="item"&&r.actionItem.checkbox),disabled:e.every(r=>r.disabled),readonlyOk:e.some(r=>r.readonlyOk),children:e}}function Hc(t,n,...e){const r=uE(e);return r.length===0?null:{id:t,type:"submenu",label:n,children:r,disabled:r.every(o=>o.disabled),readonlyOk:r.some(o=>o.readonlyOk)}}function sM(t,n={}){const{readonlyOk:e=!0,disabled:r=!1}=n;return{id:t,type:"custom",disabled:r,readonlyOk:e}}function _e(t,n={}){if(!t)throw Error("No action item provided to menuItem");if(!t.label)throw Error("Trying to create menu item for action item that doesn't have a label");const{checked:e=!1,disabled:r=!1}=n;return{id:t.id,type:"item",actionItem:t,disabled:r,checked:e,readonlyOk:t.readonlyOk}}function Nde(t){return t.getSelectedShapeIds().map(r=>t.getShape(r)).filter(r=>!(!r||t.isShapeOfType(r,"arrow")&&r.props.start.type==="binding"||t.isShapeOfType(r,"arrow")&&r.props.end.type==="binding"))}const $8=()=>{const t=Oe();return He("threeStackableItems",()=>Nde(t).length>2,[t])};function zde(t){const n=t.getSelectedShapes(),e=[],r=new Map;n.forEach(a=>{a.type==="arrow"?e.push(a):r.set(a.id,a)});const o=e.filter(a=>!(a.props.start.type==="binding"&&!r.has(a.props.start.boundShapeId)||a.props.end.type==="binding"&&!r.has(a.props.end.boundShapeId)));return Array.from(r.values()).concat(o)}const aM=()=>{const t=Oe();return He("allowGroup",()=>zde(t).length>1,[t])},lM=()=>{const t=Oe();return He("allowUngroup",()=>t.getSelectedShapeIds().some(n=>{var e;return((e=t.getShape(n))==null?void 0:e.type)==="group"}),[t])},O8=typeof window<"u"&&"navigator"in window&&!!navigator.clipboard&&!!navigator.clipboard.read,sP=[0,390,428,468,580,640,840,1023],D8=ft.createContext(0);function Fde({forceMobile:t=!1,children:n}){const e=Oe(),r=He("breakpoint",()=>{const{width:o}=e.getViewportScreenBounds(),a=t?3:sP.length-1;for(let l=0;l<a;l++)if(o>sP[l]&&o<=sP[l+1])return l;return a},[e]);return x.jsx(D8.Provider,{value:r,children:n})}function ul(){return I.useContext(D8)}function cM(){const t=Oe();return He("hasLinkShapeSelected",()=>{const n=t.getSelectedShapes();return n.length===1&&"url"in n[0].props&&n[0].type!=="embed"},[t])}const L8=ft.createContext({}),Ude=({overrides:t,children:n})=>{const e=Oe(),r=os(),o=He("selected count",()=>e.getSelectedShapeIds().length,[e]),a=o>0,l=o>1,u=o>2,d=$8(),h=aM(),g=lM(),v=cM(),S=ul(),w=He("zoom is 1",()=>e.getZoomLevel()===1,[e]),k=I.useMemo(()=>{const C=[_e(r["align-left"],{disabled:!l}),_e(r["align-center-horizontal"],{disabled:!l}),_e(r["align-right"],{disabled:!l}),_e(r["stretch-horizontal"],{disabled:!l}),_e(r["align-top"],{disabled:!l}),_e(r["align-center-vertical"],{disabled:!l}),_e(r["align-bottom"],{disabled:!l}),_e(r["stretch-vertical"],{disabled:!l}),_e(r["distribute-horizontal"],{disabled:!u}),_e(r["distribute-vertical"],{disabled:!u}),_e(r["stack-horizontal"],{disabled:!d}),_e(r["stack-vertical"],{disabled:!d}),_e(r["send-to-back"],{disabled:!a}),_e(r["send-backward"],{disabled:!a}),_e(r["bring-forward"],{disabled:!a}),_e(r["bring-to-front"],{disabled:!a}),S<5?_e(r["zoom-to-100"],{disabled:!!w}):_e(r["rotate-ccw"],{disabled:!a}),_e(r["rotate-cw"],{disabled:!a}),_e(r["edit-link"],{disabled:!v}),h?_e(r.group,{disabled:!l}):g?_e(r.ungroup):_e(r.group,{disabled:!l})];return t?t(e,C,{actions:r,oneSelected:a,twoSelected:l,threeSelected:u}):C},[e,w,h,t,r,a,l,u,d,g,v,S]);return x.jsx(L8.Provider,{value:k,children:n})};function Bde(){const t=ft.useContext(L8);if(!t)throw new Error("useActionsMenuSchema must be used inside of a ActionsMenuSchemaProvider.");return t}function Hde(){const t=Oe();return He("onlyFlippableShape",()=>{const n=t.getSelectedShapes();return n.length===1&&n.every(e=>t.isShapeOfType(e,"group")||t.isShapeOfType(e,"arrow")||t.isShapeOfType(e,"line")||t.isShapeOfType(e,"draw"))},[t])}function j8(){const t=Oe();return He("showAutoSizeToggle",()=>{const n=t.getSelectedShapes();return n.length===1&&t.isShapeOfType(n[0],"text")&&n[0].props.autoSize===!1},[t])}const N8=ft.createContext({}),Vde=sr(function({overrides:n,children:e}){var Y;const r=Oe(),o=os(),a=j8(),l=Hde(),u=r.getSelectedShapes(),d=u.length,h=d>0,g=d>1,v=d>2,S=$8(),w=He("atLeastOneShapeOnPage",()=>r.getCurrentPageShapeIds().size>0,[]),k=He("isTransparentBg",()=>r.getInstanceState().exportBackground,[]),C=aM(),E=lM(),R=!!((Y=window.navigator.clipboard)!=null&&Y.write),L=cM(),A=r.getOnlySelectedShape(),O=h&&u.every(q=>r.isShapeOfType(q,"frame")),D=A&&r.isShapeOfType(A,"frame")&&r.getSortedChildIdsForParent(A).length>0,z=A&&r.isShapeOrAncestorLocked(A),U=I.useMemo(()=>{let q=uE([un("selection",a&&_e(o["toggle-auto-size"]),L&&!z&&_e(o["edit-link"]),h&&!z&&_e(o.duplicate),C&&!z&&_e(o.group),E&&!z&&_e(o.ungroup),O&&!z&&_e(o["remove-frame"]),D&&!z&&_e(o["fit-frame-to-content"]),h&&_e(o["toggle-lock"])),un("modify",(g||l)&&Hc("arrange","context-menu.arrange",g&&un("align",_e(o["align-left"]),_e(o["align-center-horizontal"]),_e(o["align-right"]),_e(o["align-top"]),_e(o["align-center-vertical"]),_e(o["align-bottom"])),v&&un("distribute",_e(o["distribute-horizontal"]),_e(o["distribute-vertical"])),g&&un("stretch",_e(o["stretch-horizontal"]),_e(o["stretch-vertical"])),l&&!z&&un("flip",_e(o["flip-horizontal"]),_e(o["flip-vertical"])),g&&un("order",_e(o.pack,{disabled:!g}),S&&_e(o["stack-vertical"]),S&&_e(o["stack-horizontal"]))),h&&!z&&Hc("reorder","context-menu.reorder",un("reorder",_e(o["bring-to-front"]),_e(o["bring-forward"]),_e(o["send-backward"]),_e(o["send-to-back"]))),h&&!z&&sM("MOVE_TO_PAGE_MENU",{readonlyOk:!1})),un("clipboard-group",h&&!z&&_e(o.cut),h&&_e(o.copy),O8&&_e(o.paste)),w&&un("conversions",Hc("copy-as","context-menu.copy-as",un("copy-as-group",_e(o["copy-as-svg"]),R&&_e(o["copy-as-png"]),_e(o["copy-as-json"])),un("export-bg",_e(o["toggle-transparent"],{checked:!k}))),Hc("export-as","context-menu.export-as",un("export-as-group",_e(o["export-as-svg"]),_e(o["export-as-png"]),_e(o["export-as-json"])),un("export-bg,",_e(o["toggle-transparent"],{checked:!k})))),w&&un("set-selection-group",_e(o["select-all"]),h&&_e(o["select-none"])),h&&!z&&un("delete-group",_e(o.delete))]);return n&&(q=n(r,q,{actions:o,oneSelected:h,twoSelected:g,threeSelected:v,showAutoSizeToggle:a,showUngroup:E,onlyFlippableShapeSelected:l})),q},[r,n,o,h,g,v,a,l,w,S,C,E,O,D,R,L,k,z]);return x.jsx(N8.Provider,{value:U,children:e})});function z8(){const t=ft.useContext(N8);if(!t)throw new Error("useContextMenuSchema must be used inside of a TLUiContextMenuSchemaProvider.");return t}const F8=I.createContext({});function Kde({overrides:t,children:n}){const e=Oe(),r=qm(),{addDialog:o}=up(),a=M8(),l=I.useMemo(()=>{const u=[{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect(h){e.setCurrentTool("select"),r("select-tool",{source:h,id:"select"})}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect(h){e.setCurrentTool("hand"),r("select-tool",{source:h,id:"hand"})}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",readonlyOk:!1,onSelect(h){e.setCurrentTool("eraser"),r("select-tool",{source:h,id:"eraser"})}},{id:"draw",label:"tool.draw",readonlyOk:!1,icon:"tool-pencil",kbd:"d,b,x",onSelect(h){e.setCurrentTool("draw"),r("select-tool",{source:h,id:"draw"})}},...[...Yc.values].map(h=>({id:h,label:`tool.${h}`,readonlyOk:!1,meta:{geo:h},kbd:h==="rectangle"?"r":h==="ellipse"?"o":void 0,icon:"geo-"+h,onSelect(g){e.batch(()=>{e.updateInstanceState({stylesForNextShape:{...e.getInstanceState().stylesForNextShape,[Yc.id]:h}},{ephemeral:!0}),e.setCurrentTool("geo"),r("select-tool",{source:g,id:`geo-${h}`})})}})),{id:"arrow",label:"tool.arrow",readonlyOk:!1,icon:"tool-arrow",kbd:"a",onSelect(h){e.setCurrentTool("arrow"),r("select-tool",{source:h,id:"arrow"})}},{id:"line",label:"tool.line",readonlyOk:!1,icon:"tool-line",kbd:"l",onSelect(h){e.setCurrentTool("line"),r("select-tool",{source:h,id:"line"})}},{id:"frame",label:"tool.frame",readonlyOk:!1,icon:"tool-frame",kbd:"f",onSelect(h){e.setCurrentTool("frame"),r("select-tool",{source:h,id:"frame"})}},{id:"text",label:"tool.text",readonlyOk:!1,icon:"tool-text",kbd:"t",onSelect(h){e.setCurrentTool("text"),r("select-tool",{source:h,id:"text"})}},{id:"asset",label:"tool.asset",readonlyOk:!1,icon:"tool-media",kbd:"$u",onSelect(h){a(),r("select-tool",{source:h,id:"media"})}},{id:"note",label:"tool.note",readonlyOk:!1,icon:"tool-note",kbd:"n",onSelect(h){e.setCurrentTool("note"),r("select-tool",{source:h,id:"note"})}},{id:"laser",label:"tool.laser",readonlyOk:!0,icon:"tool-laser",kbd:"k",onSelect(h){e.setCurrentTool("laser"),r("select-tool",{source:h,id:"laser"})}},{id:"embed",label:"tool.embed",readonlyOk:!1,icon:"tool-embed",onSelect(h){o({component:S8}),r("select-tool",{source:h,id:"embed"})}}];u.push({id:"highlight",label:"tool.highlight",readonlyOk:!0,icon:"tool-highlight",kbd:"!d",onSelect(h){e.setCurrentTool("highlight"),r("select-tool",{source:h,id:"highlight"})}});const d=Object.fromEntries(u.map(h=>[h.id,h]));return t?t(e,d,{insertMedia:a}):d},[t,e,r,a,o]);return x.jsx(F8.Provider,{value:l,children:n})}function uM(){const t=I.useContext(F8);if(!t)throw new Error("useTools must be used within a ToolProvider");return t}const U8=ft.createContext({}),Yde=sr(function({overrides:n,children:e}){const r=Oe(),o=uM(),a=os(),l=I.useMemo(()=>{const u=Bt([un("shortcuts-dialog.tools",_e(a["toggle-tool-lock"]),_e(o.select),_e(o.draw),_e(o.eraser),_e(o.hand),_e(o.rectangle),_e(o.ellipse),_e(o.arrow),_e(o.line),_e(o.text),_e(o.frame),_e(o.note),_e(o.laser)),un("shortcuts-dialog.file",_e(a["insert-media"]),_e(a.print)),un("shortcuts-dialog.preferences",_e(a["toggle-dark-mode"]),_e(a["toggle-focus-mode"]),_e(a["toggle-grid"])),un("shortcuts-dialog.edit",_e(a.undo),_e(a.redo),_e(a.cut),_e(a.copy),_e(a.paste),_e(a["select-all"]),_e(a.delete),_e(a.duplicate),_e(a["export-as-svg"]),_e(a["export-as-png"])),un("shortcuts-dialog.view",_e(a["zoom-in"]),_e(a["zoom-out"]),_e(a["zoom-to-100"]),_e(a["zoom-to-fit"]),_e(a["zoom-to-selection"])),un("shortcuts-dialog.transform",_e(a["bring-to-front"]),_e(a["bring-forward"]),_e(a["send-backward"]),_e(a["send-to-back"]),_e(a.group),_e(a.ungroup),_e(a["flip-horizontal"]),_e(a["flip-vertical"]),_e(a["align-top"]),_e(a["align-center-vertical"]),_e(a["align-bottom"]),_e(a["align-left"]),_e(a["align-center-horizontal"]),_e(a["align-right"]))]);return n?n(r,u,{tools:o,actions:a}):u},[r,n,a,o]);return x.jsx(U8.Provider,{value:l,children:e})});function Wde(){const t=ft.useContext(U8);if(!t)throw new Error("Shortcuts must be used inside of a ShortcutsProvider.");return t}const Gde=()=>{const t=In(),n=cl(),e=Wde();function r(o){if(!o||n&&!o.readonlyOk)return null;switch(o.type){case"group":return x.jsxs("div",{className:"tlui-shortcuts-dialog__group",children:[x.jsx("h2",{className:"tlui-shortcuts-dialog__group__title",children:t(o.id)}),x.jsx("div",{className:"tlui-shortcuts-dialog__group__content",children:o.children.filter(a=>a&&a.type==="item"&&a.actionItem.kbd).map(r)})]},o.id);case"item":{const{id:a,label:l,shortcutsLabel:u,kbd:d}=o.actionItem;return x.jsxs("div",{className:"tlui-shortcuts-dialog__key-pair",children:[x.jsx("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:t(u??l)}),x.jsx("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:x.jsx(oE,{children:d})})]},a)}}}return x.jsxs(x.Fragment,{children:[x.jsxs(aE,{className:"tlui-shortcuts-dialog__header",children:[x.jsx(lE,{children:t("shortcuts-dialog.title")}),x.jsx(cE,{})]}),x.jsx(t0,{className:"tlui-shortcuts-dialog__body",children:e.map(r)}),x.jsx("div",{className:"tlui-dialog__scrim"})]})};function B8(){const t=Oe();return{languages:VS,currentLanguage:t.user.getLocale()}}const H8=ft.createContext({}),Xde=sr(function({overrides:n,children:e}){const r=Oe(),o=os(),a=r.getSelectedShapeIds().length,l=a>0,u=a>1,d=a>2,{languages:h,currentLanguage:g}=B8(),{addDialog:v}=up(),S=I.useMemo(()=>{const w=Bt([un("top",sM("LANGUAGE_MENU",{readonlyOk:!0}),_e({id:"keyboard-shortcuts",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect(){v({component:Gde})}}))]);return n?n(r,w,{actions:o,currentLanguage:g,languages:h,oneSelected:l,twoSelected:u,threeSelected:d}):w},[r,n,h,o,l,u,d,g,v]);return x.jsx(H8.Provider,{value:S,children:e})});function qde(){const t=ft.useContext(H8);if(!t)throw new Error("useHelpMenuSchema must be used inside of a helpTLUiMenuSchemaProvider.");return t}function V8(){const t=Oe();return He("useCanRedo",()=>t.getCanRedo(),[t])}function K8(){const t=Oe();return He("useCanUndo",()=>t.getCanUndo(),[t])}const Y8=ft.createContext({});function Qde({overrides:t,children:n}){var ce;const e=Oe(),r=os(),a=ul()<5,l=He("isDarkMode",()=>e.user.getIsDarkMode(),[e]),u=He("animationSpeed",()=>e.user.getAnimationSpeed(),[e]),d=He("edgeScrollSpeed",()=>e.user.getEdgeScrollSpeed(),[e]),h=He("isGridMode",()=>e.getInstanceState().isGridMode,[e]),g=He("isSnapMode",()=>e.user.getIsSnapMode(),[e]),v=He("isToolLock",()=>e.getInstanceState().isToolLocked,[e]),S=He("isFocusMode",()=>e.getInstanceState().isFocusMode,[e]),w=He("isDebugMode",()=>e.getInstanceState().isDebugMode,[e]),k=He("exportBackground",()=>e.getInstanceState().exportBackground,[e]),C=He("emptyPage",()=>e.getCurrentPageShapeIds().size===0,[e]),E=He("selectedCount",()=>e.getSelectedShapeIds().length,[e]),R=E===0,L=E>0,A=E>1,O=E>2,D=!!((ce=window.navigator.clipboard)!=null&&ce.write),z=cM(),U=j8(),Y=aM(),q=lM(),X=K8(),ie=V8(),pe=He("isZoomedTo100",()=>e.getZoomLevel()===1,[e]),ae=He("oneEmbedSelected",()=>{const ge=e.getOnlySelectedShape();return ge?!!(e.isShapeOfType(ge,"embed")&&ge.props.url&&!e.isShapeOrAncestorLocked(ge)):!1},[]),te=He("oneEmbeddableBookmarkSelected",()=>{const ge=e.getOnlySelectedShape();return ge?!!(e.isShapeOfType(ge,"bookmark")&&ge.props.url&&td(ge.props.url)&&!e.isShapeOrAncestorLocked(ge)):!1},[]),he=I.useMemo(()=>{const ge=uE([un("menu",Hc("file","menu.file",un("print",_e(r.print,{disabled:C}))),Hc("edit","menu.edit",un("undo-actions",_e(r.undo,{disabled:!X}),_e(r.redo,{disabled:!ie})),un("clipboard-actions",_e(r.cut,{disabled:R}),_e(r.copy,{disabled:R}),_e(r.paste,{disabled:!O8})),un("conversions",Hc("copy-as","menu.copy-as",un("copy-as-group",_e(r["copy-as-svg"],{disabled:C}),_e(r["copy-as-png"],{disabled:C||!D}),_e(r["copy-as-json"],{disabled:C})),un("export-bg",_e(r["toggle-transparent"],{checked:!k}))),Hc("export-as","menu.export-as",un("export-as-group",_e(r["export-as-svg"],{disabled:C}),_e(r["export-as-png"],{disabled:C}),_e(r["export-as-json"],{disabled:C})),un("export-bg",_e(r["toggle-transparent"],{checked:!k})))),un("set-selection-group",_e(r["select-all"],{disabled:C}),_e(r["select-none"],{disabled:!L})),un("selection",U&&_e(r["toggle-auto-size"]),z&&_e(r["edit-link"]),_e(r.duplicate,{disabled:!L}),Y&&_e(r.group),q&&_e(r.ungroup),_e(r["unlock-all"],{disabled:C})),un("delete-group",_e(r.delete,{disabled:!L})),un("embeds",ae&&_e(r["open-embed-link"]),ae&&_e(r["convert-to-bookmark"]),te&&_e(r["convert-to-embed"]))),Hc("view","menu.view",un("view-actions",_e(r["zoom-in"]),_e(r["zoom-out"]),_e(r["zoom-to-100"],{disabled:pe}),_e(r["zoom-to-fit"],{disabled:C}),_e(r["zoom-to-selection"],{disabled:C||!L})))),un("extras",_e(r["insert-embed"]),_e(r["insert-media"])),un("preferences",Hc("preferences","menu.preferences",un("preferences-actions",_e(r["toggle-snap-mode"],{checked:g}),_e(r["toggle-tool-lock"],{checked:v}),_e(r["toggle-grid"],{checked:h}),_e(r["toggle-dark-mode"],{checked:l}),_e(r["toggle-focus-mode"],{checked:S}),_e(r["toggle-edge-scrolling"],{checked:d===1}),_e(r["toggle-reduce-motion"],{checked:u===0}),_e(r["toggle-debug-mode"],{checked:w}))),a&&sM("LANGUAGE_MENU",{readonlyOk:!0}))]);return t?t(e,ge,{actions:r,noneSelected:R,oneSelected:L,twoSelected:A,threeSelected:O}):ge},[e,t,r,L,A,O,C,a,Y,q,z,D,U,R,X,ie,u,l,h,g,v,S,k,w,d,pe,te,ae]);return x.jsx(Y8.Provider,{value:he,children:n})}function Zde(){const t=ft.useContext(Y8);if(!t)throw new Error("useMenuSchema must be used inside of a TLUiMenuSchemaProvider.");return t}function ur(t){return{id:t.id,type:"item",readonlyOk:t.readonlyOk,toolItem:t}}const W8=ft.createContext([]);function Jde({overrides:t,children:n}){const e=Oe(),r=uM(),o=ft.useMemo(()=>{const a=Bt([ur(r.select),ur(r.hand),ur(r.draw),ur(r.eraser),ur(r.arrow),ur(r.text),ur(r.note),ur(r.asset),ur(r.rectangle),ur(r.ellipse),ur(r.diamond),ur(r.triangle),ur(r.trapezoid),ur(r.rhombus),ur(r.hexagon),ur(r.cloud),ur(r.star),ur(r.oval),ur(r["x-box"]),ur(r["check-box"]),ur(r["arrow-left"]),ur(r["arrow-up"]),ur(r["arrow-down"]),ur(r["arrow-right"]),ur(r.line),ur(r.highlight),ur(r.frame),ur(r.laser)]);return t?t(e,a,{tools:r}):a},[e,t,r]);return x.jsx(W8.Provider,{value:o,children:n})}function efe(){const t=ft.useContext(W8);if(!t)throw new Error("useToolbarSchema must be used within a ToolbarSchemaProvider");return t}function tfe(){const{addToast:t,removeToast:n,clearToasts:e}=ru(),{addDialog:r,clearDialogs:o,removeDialog:a,updateDialog:l}=up(),d=ul()<5,h=In();return I.useMemo(()=>({addToast:t,removeToast:n,clearToasts:e,addDialog:r,clearDialogs:o,removeDialog:a,updateDialog:l,msg:h,isMobile:d}),[r,t,o,e,h,a,n,l,d])}function nfe(t,n){const e={};for(const r of t)if(r.translations)for(const[o,a]of id(r.translations)){let l=e[o];l||(l=e[o]={}),Object.assign(l,a)}return{actionsMenu:(r,o,a)=>{for(const l of t)l.actionsMenu&&(o=l.actionsMenu(r,o,{...n,...a}));return o},actions:(r,o)=>{for(const a of t)a.actions&&(o=a.actions(r,o,n));return o},contextMenu:(r,o,a)=>{for(const l of t)l.contextMenu&&(o=l.contextMenu(r,o,{...n,...a}));return o},helpMenu:(r,o,a)=>{for(const l of t)l.helpMenu&&(o=l.helpMenu(r,o,{...n,...a}));return o},menu:(r,o,a)=>{for(const l of t)l.menu&&(o=l.menu(r,o,{...n,...a}));return o},toolbar:(r,o,a)=>{for(const l of t)l.toolbar&&(o=l.toolbar(r,o,{...n,...a}));return o},keyboardShortcutsMenu:(r,o,a)=>{for(const l of t)l.keyboardShortcutsMenu&&(o=l.keyboardShortcutsMenu(r,o,{...n,...a}));return o},tools:(r,o,a)=>{for(const l of t)l.tools&&(o=l.tools(r,o,{...n,...a}));return o},translations:e}}function G8(t){return I.useMemo(()=>t,t)}function rfe(t){const n=G8(t==null?[]:Array.isArray(t)?t:[t]);return I.useMemo(()=>{const e={};for(const r of n)if(r.translations)for(const[o,a]of id(r.translations)){let l=e[o];l||(l=e[o]={}),Object.assign(l,a)}return e},[n])}function ife(t){const n=tfe(),e=G8(t==null?[]:Array.isArray(t)?t:[t]);return I.useMemo(()=>nfe(e,n),[e,n])}function ofe({overrides:t,assetUrls:n,onUiEvent:e,forceMobile:r,children:o}){return x.jsx(Bce,{assetUrls:Nce(n),children:x.jsx(Kce,{overrides:rfe(t),children:x.jsx(pde,{onEvent:e,children:x.jsx(Ide,{children:x.jsx(Mde,{children:x.jsx(Fde,{forceMobile:r,children:x.jsx(sfe,{overrides:t,children:o})})})})})})})}function sfe({overrides:t,children:n}){const e=ife(t);return x.jsx(jde,{overrides:e.actions,children:x.jsx(Kde,{overrides:e.tools,children:x.jsx(Jde,{overrides:e.toolbar,children:x.jsx(Ude,{overrides:e.actionsMenu,children:x.jsx(Yde,{overrides:e.keyboardShortcutsMenu,children:x.jsx(Vde,{overrides:e.contextMenu,children:x.jsx(Xde,{overrides:e.helpMenu,children:x.jsx(Qde,{overrides:e.menu,children:n})})})})})})})})}function afe(){const t=Oe(),e=os()["back-to-content"],[r,o]=I.useState(!1);return I.useEffect(()=>{let a=!1;const l=setInterval(()=>{const u=t.getRenderingShapes(),d=t.getRenderingBounds(),g=u.filter(v=>v.maskedPageBounds&&d.includes(v.maskedPageBounds)).length===0&&t.getCurrentPageShapes().length>0;a!==g&&(o(g),a=g)},1e3);return()=>{clearInterval(l)}},[t]),r?x.jsx(kt,{iconLeft:e.icon,label:e.label,type:"low",onClick:()=>{e.onSelect("helper-buttons"),o(!1)}}):null}const lfe=I.createContext(void 0);function dM(t){const n=I.useContext(lfe);return t||n||"ltr"}const cfe=["top","right","bottom","left"],If=Math.min,Ea=Math.max,TC=Math.round,n1=Math.floor,Rf=t=>({x:t,y:t}),ufe={left:"right",right:"left",bottom:"top",top:"bottom"},dfe={start:"end",end:"start"};function PI(t,n,e){return Ea(t,If(n,e))}function dd(t,n){return typeof t=="function"?t(n):t}function fd(t){return t.split("-")[0]}function Qm(t){return t.split("-")[1]}function fM(t){return t==="x"?"y":"x"}function hM(t){return t==="y"?"height":"width"}function Zm(t){return["top","bottom"].includes(fd(t))?"y":"x"}function pM(t){return fM(Zm(t))}function ffe(t,n,e){e===void 0&&(e=!1);const r=Qm(t),o=pM(t),a=hM(o);let l=o==="x"?r===(e?"end":"start")?"right":"left":r==="start"?"bottom":"top";return n.reference[a]>n.floating[a]&&(l=kC(l)),[l,kC(l)]}function hfe(t){const n=kC(t);return[II(t),n,II(n)]}function II(t){return t.replace(/start|end/g,n=>dfe[n])}function pfe(t,n,e){const r=["left","right"],o=["right","left"],a=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return e?n?o:r:n?r:o;case"left":case"right":return n?a:l;default:return[]}}function gfe(t,n,e,r){const o=Qm(t);let a=pfe(fd(t),e==="start",r);return o&&(a=a.map(l=>l+"-"+o),n&&(a=a.concat(a.map(II)))),a}function kC(t){return t.replace(/left|right|bottom|top/g,n=>ufe[n])}function mfe(t){return{top:0,right:0,bottom:0,left:0,...t}}function X8(t){return typeof t!="number"?mfe(t):{top:t,right:t,bottom:t,left:t}}function PC(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function z5(t,n,e){let{reference:r,floating:o}=t;const a=Zm(n),l=pM(n),u=hM(l),d=fd(n),h=a==="y",g=r.x+r.width/2-o.width/2,v=r.y+r.height/2-o.height/2,S=r[u]/2-o[u]/2;let w;switch(d){case"top":w={x:g,y:r.y-o.height};break;case"bottom":w={x:g,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:v};break;case"left":w={x:r.x-o.width,y:v};break;default:w={x:r.x,y:r.y}}switch(Qm(n)){case"start":w[l]-=S*(e&&h?-1:1);break;case"end":w[l]+=S*(e&&h?-1:1);break}return w}const vfe=async(t,n,e)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:l}=e,u=a.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(n));let h=await l.getElementRects({reference:t,floating:n,strategy:o}),{x:g,y:v}=z5(h,r,d),S=r,w={},k=0;for(let C=0;C<u.length;C++){const{name:E,fn:R}=u[C],{x:L,y:A,data:O,reset:D}=await R({x:g,y:v,initialPlacement:r,placement:S,strategy:o,middlewareData:w,rects:h,platform:l,elements:{reference:t,floating:n}});if(g=L??g,v=A??v,w={...w,[E]:{...w[E],...O}},D&&k<=50){k++,typeof D=="object"&&(D.placement&&(S=D.placement),D.rects&&(h=D.rects===!0?await l.getElementRects({reference:t,floating:n,strategy:o}):D.rects),{x:g,y:v}=z5(h,S,d)),C=-1;continue}}return{x:g,y:v,placement:S,strategy:o,middlewareData:w}};async function n0(t,n){var e;n===void 0&&(n={});const{x:r,y:o,platform:a,rects:l,elements:u,strategy:d}=t,{boundary:h="clippingAncestors",rootBoundary:g="viewport",elementContext:v="floating",altBoundary:S=!1,padding:w=0}=dd(n,t),k=X8(w),E=u[S?v==="floating"?"reference":"floating":v],R=PC(await a.getClippingRect({element:(e=await(a.isElement==null?void 0:a.isElement(E)))==null||e?E:E.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:h,rootBoundary:g,strategy:d})),L=v==="floating"?{...l.floating,x:r,y:o}:l.reference,A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),O=await(a.isElement==null?void 0:a.isElement(A))?await(a.getScale==null?void 0:a.getScale(A))||{x:1,y:1}:{x:1,y:1},D=PC(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:L,offsetParent:A,strategy:d}):L);return{top:(R.top-D.top+k.top)/O.y,bottom:(D.bottom-R.bottom+k.bottom)/O.y,left:(R.left-D.left+k.left)/O.x,right:(D.right-R.right+k.right)/O.x}}const F5=t=>({name:"arrow",options:t,async fn(n){const{x:e,y:r,placement:o,rects:a,platform:l,elements:u,middlewareData:d}=n,{element:h,padding:g=0}=dd(t,n)||{};if(h==null)return{};const v=X8(g),S={x:e,y:r},w=pM(o),k=hM(w),C=await l.getDimensions(h),E=w==="y",R=E?"top":"left",L=E?"bottom":"right",A=E?"clientHeight":"clientWidth",O=a.reference[k]+a.reference[w]-S[w]-a.floating[k],D=S[w]-a.reference[w],z=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let U=z?z[A]:0;(!U||!await(l.isElement==null?void 0:l.isElement(z)))&&(U=u.floating[A]||a.floating[k]);const Y=O/2-D/2,q=U/2-C[k]/2-1,X=If(v[R],q),ie=If(v[L],q),pe=X,ae=U-C[k]-ie,te=U/2-C[k]/2+Y,he=PI(pe,te,ae),ce=!d.arrow&&Qm(o)!=null&&te!=he&&a.reference[k]/2-(te<pe?X:ie)-C[k]/2<0,ge=ce?te<pe?te-pe:te-ae:0;return{[w]:S[w]+ge,data:{[w]:he,centerOffset:te-he-ge,...ce&&{alignmentOffset:ge}},reset:ce}}}),yfe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(n){var e,r;const{placement:o,middlewareData:a,rects:l,initialPlacement:u,platform:d,elements:h}=n,{mainAxis:g=!0,crossAxis:v=!0,fallbackPlacements:S,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:C=!0,...E}=dd(t,n);if((e=a.arrow)!=null&&e.alignmentOffset)return{};const R=fd(o),L=fd(u)===u,A=await(d.isRTL==null?void 0:d.isRTL(h.floating)),O=S||(L||!C?[kC(u)]:hfe(u));!S&&k!=="none"&&O.push(...gfe(u,C,k,A));const D=[u,...O],z=await n0(n,E),U=[];let Y=((r=a.flip)==null?void 0:r.overflows)||[];if(g&&U.push(z[R]),v){const pe=ffe(o,l,A);U.push(z[pe[0]],z[pe[1]])}if(Y=[...Y,{placement:o,overflows:U}],!U.every(pe=>pe<=0)){var q,X;const pe=(((q=a.flip)==null?void 0:q.index)||0)+1,ae=D[pe];if(ae)return{data:{index:pe,overflows:Y},reset:{placement:ae}};let te=(X=Y.filter(he=>he.overflows[0]<=0).sort((he,ce)=>he.overflows[1]-ce.overflows[1])[0])==null?void 0:X.placement;if(!te)switch(w){case"bestFit":{var ie;const he=(ie=Y.map(ce=>[ce.placement,ce.overflows.filter(ge=>ge>0).reduce((ge,me)=>ge+me,0)]).sort((ce,ge)=>ce[1]-ge[1])[0])==null?void 0:ie[0];he&&(te=he);break}case"initialPlacement":te=u;break}if(o!==te)return{reset:{placement:te}}}return{}}}};function U5(t,n){return{top:t.top-n.height,right:t.right-n.width,bottom:t.bottom-n.height,left:t.left-n.width}}function B5(t){return cfe.some(n=>t[n]>=0)}const Sfe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(n){const{rects:e}=n,{strategy:r="referenceHidden",...o}=dd(t,n);switch(r){case"referenceHidden":{const a=await n0(n,{...o,elementContext:"reference"}),l=U5(a,e.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:B5(l)}}}case"escaped":{const a=await n0(n,{...o,altBoundary:!0}),l=U5(a,e.floating);return{data:{escapedOffsets:l,escaped:B5(l)}}}default:return{}}}}};async function bfe(t,n){const{placement:e,platform:r,elements:o}=t,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),l=fd(e),u=Qm(e),d=Zm(e)==="y",h=["left","top"].includes(l)?-1:1,g=a&&d?-1:1,v=dd(n,t);let{mainAxis:S,crossAxis:w,alignmentAxis:k}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...v};return u&&typeof k=="number"&&(w=u==="end"?k*-1:k),d?{x:w*g,y:S*h}:{x:S*h,y:w*g}}const wfe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(n){const{x:e,y:r}=n,o=await bfe(n,t);return{x:e+o.x,y:r+o.y,data:o}}}},xfe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(n){const{x:e,y:r,placement:o}=n,{mainAxis:a=!0,crossAxis:l=!1,limiter:u={fn:E=>{let{x:R,y:L}=E;return{x:R,y:L}}},...d}=dd(t,n),h={x:e,y:r},g=await n0(n,d),v=Zm(fd(o)),S=fM(v);let w=h[S],k=h[v];if(a){const E=S==="y"?"top":"left",R=S==="y"?"bottom":"right",L=w+g[E],A=w-g[R];w=PI(L,w,A)}if(l){const E=v==="y"?"top":"left",R=v==="y"?"bottom":"right",L=k+g[E],A=k-g[R];k=PI(L,k,A)}const C=u.fn({...n,[S]:w,[v]:k});return{...C,data:{x:C.x-e,y:C.y-r}}}}},Cfe=function(t){return t===void 0&&(t={}),{options:t,fn(n){const{x:e,y:r,placement:o,rects:a,middlewareData:l}=n,{offset:u=0,mainAxis:d=!0,crossAxis:h=!0}=dd(t,n),g={x:e,y:r},v=Zm(o),S=fM(v);let w=g[S],k=g[v];const C=dd(u,n),E=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(d){const A=S==="y"?"height":"width",O=a.reference[S]-a.floating[A]+E.mainAxis,D=a.reference[S]+a.reference[A]-E.mainAxis;w<O?w=O:w>D&&(w=D)}if(h){var R,L;const A=S==="y"?"width":"height",O=["top","left"].includes(fd(o)),D=a.reference[v]-a.floating[A]+(O&&((R=l.offset)==null?void 0:R[v])||0)+(O?0:E.crossAxis),z=a.reference[v]+a.reference[A]+(O?0:((L=l.offset)==null?void 0:L[v])||0)-(O?E.crossAxis:0);k<D?k=D:k>z&&(k=z)}return{[S]:w,[v]:k}}}},Efe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(n){const{placement:e,rects:r,platform:o,elements:a}=n,{apply:l=()=>{},...u}=dd(t,n),d=await n0(n,u),h=fd(e),g=Qm(e),v=Zm(e)==="y",{width:S,height:w}=r.floating;let k,C;h==="top"||h==="bottom"?(k=h,C=g===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(C=h,k=g==="end"?"top":"bottom");const E=w-d[k],R=S-d[C],L=!n.middlewareData.shift;let A=E,O=R;if(v){const z=S-d.left-d.right;O=g||L?If(R,z):z}else{const z=w-d.top-d.bottom;A=g||L?If(E,z):z}if(L&&!g){const z=Ea(d.left,0),U=Ea(d.right,0),Y=Ea(d.top,0),q=Ea(d.bottom,0);v?O=S-2*(z!==0||U!==0?z+U:Ea(d.left,d.right)):A=w-2*(Y!==0||q!==0?Y+q:Ea(d.top,d.bottom))}await l({...n,availableWidth:O,availableHeight:A});const D=await o.getDimensions(a.floating);return S!==D.width||w!==D.height?{reset:{rects:!0}}:{}}}};function Mf(t){return q8(t)?(t.nodeName||"").toLowerCase():"#document"}function Ra(t){var n;return(t==null||(n=t.ownerDocument)==null?void 0:n.defaultView)||window}function Sd(t){var n;return(n=(q8(t)?t.ownerDocument:t.document)||window.document)==null?void 0:n.documentElement}function q8(t){return t instanceof Node||t instanceof Ra(t).Node}function hd(t){return t instanceof Element||t instanceof Ra(t).Element}function Jc(t){return t instanceof HTMLElement||t instanceof Ra(t).HTMLElement}function H5(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ra(t).ShadowRoot}function I0(t){const{overflow:n,overflowX:e,overflowY:r,display:o}=ll(t);return/auto|scroll|overlay|hidden|clip/.test(n+r+e)&&!["inline","contents"].includes(o)}function _fe(t){return["table","td","th"].includes(Mf(t))}function gM(t){const n=mM(),e=ll(t);return e.transform!=="none"||e.perspective!=="none"||(e.containerType?e.containerType!=="normal":!1)||!n&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!n&&(e.filter?e.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(e.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(e.contain||"").includes(r))}function Tfe(t){let n=Dm(t);for(;Jc(n)&&!dE(n);){if(gM(n))return n;n=Dm(n)}return null}function mM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function dE(t){return["html","body","#document"].includes(Mf(t))}function ll(t){return Ra(t).getComputedStyle(t)}function fE(t){return hd(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Dm(t){if(Mf(t)==="html")return t;const n=t.assignedSlot||t.parentNode||H5(t)&&t.host||Sd(t);return H5(n)?n.host:n}function Q8(t){const n=Dm(t);return dE(n)?t.ownerDocument?t.ownerDocument.body:t.body:Jc(n)&&I0(n)?n:Q8(n)}function r0(t,n,e){var r;n===void 0&&(n=[]),e===void 0&&(e=!0);const o=Q8(t),a=o===((r=t.ownerDocument)==null?void 0:r.body),l=Ra(o);return a?n.concat(l,l.visualViewport||[],I0(o)?o:[],l.frameElement&&e?r0(l.frameElement):[]):n.concat(o,r0(o,[],e))}function Z8(t){const n=ll(t);let e=parseFloat(n.width)||0,r=parseFloat(n.height)||0;const o=Jc(t),a=o?t.offsetWidth:e,l=o?t.offsetHeight:r,u=TC(e)!==a||TC(r)!==l;return u&&(e=a,r=l),{width:e,height:r,$:u}}function vM(t){return hd(t)?t:t.contextElement}function km(t){const n=vM(t);if(!Jc(n))return Rf(1);const e=n.getBoundingClientRect(),{width:r,height:o,$:a}=Z8(n);let l=(a?TC(e.width):e.width)/r,u=(a?TC(e.height):e.height)/o;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const kfe=Rf(0);function J8(t){const n=Ra(t);return!mM()||!n.visualViewport?kfe:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function Pfe(t,n,e){return n===void 0&&(n=!1),!e||n&&e!==Ra(t)?!1:n}function rp(t,n,e,r){n===void 0&&(n=!1),e===void 0&&(e=!1);const o=t.getBoundingClientRect(),a=vM(t);let l=Rf(1);n&&(r?hd(r)&&(l=km(r)):l=km(t));const u=Pfe(a,e,r)?J8(a):Rf(0);let d=(o.left+u.x)/l.x,h=(o.top+u.y)/l.y,g=o.width/l.x,v=o.height/l.y;if(a){const S=Ra(a),w=r&&hd(r)?Ra(r):r;let k=S.frameElement;for(;k&&r&&w!==S;){const C=km(k),E=k.getBoundingClientRect(),R=ll(k),L=E.left+(k.clientLeft+parseFloat(R.paddingLeft))*C.x,A=E.top+(k.clientTop+parseFloat(R.paddingTop))*C.y;d*=C.x,h*=C.y,g*=C.x,v*=C.y,d+=L,h+=A,k=Ra(k).frameElement}}return PC({width:g,height:v,x:d,y:h})}function Ife(t){let{rect:n,offsetParent:e,strategy:r}=t;const o=Jc(e),a=Sd(e);if(e===a)return n;let l={scrollLeft:0,scrollTop:0},u=Rf(1);const d=Rf(0);if((o||!o&&r!=="fixed")&&((Mf(e)!=="body"||I0(a))&&(l=fE(e)),Jc(e))){const h=rp(e);u=km(e),d.x=h.x+e.clientLeft,d.y=h.y+e.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x,y:n.y*u.y-l.scrollTop*u.y+d.y}}function Rfe(t){return Array.from(t.getClientRects())}function ez(t){return rp(Sd(t)).left+fE(t).scrollLeft}function Mfe(t){const n=Sd(t),e=fE(t),r=t.ownerDocument.body,o=Ea(n.scrollWidth,n.clientWidth,r.scrollWidth,r.clientWidth),a=Ea(n.scrollHeight,n.clientHeight,r.scrollHeight,r.clientHeight);let l=-e.scrollLeft+ez(t);const u=-e.scrollTop;return ll(r).direction==="rtl"&&(l+=Ea(n.clientWidth,r.clientWidth)-o),{width:o,height:a,x:l,y:u}}function Afe(t,n){const e=Ra(t),r=Sd(t),o=e.visualViewport;let a=r.clientWidth,l=r.clientHeight,u=0,d=0;if(o){a=o.width,l=o.height;const h=mM();(!h||h&&n==="fixed")&&(u=o.offsetLeft,d=o.offsetTop)}return{width:a,height:l,x:u,y:d}}function $fe(t,n){const e=rp(t,!0,n==="fixed"),r=e.top+t.clientTop,o=e.left+t.clientLeft,a=Jc(t)?km(t):Rf(1),l=t.clientWidth*a.x,u=t.clientHeight*a.y,d=o*a.x,h=r*a.y;return{width:l,height:u,x:d,y:h}}function V5(t,n,e){let r;if(n==="viewport")r=Afe(t,e);else if(n==="document")r=Mfe(Sd(t));else if(hd(n))r=$fe(n,e);else{const o=J8(t);r={...n,x:n.x-o.x,y:n.y-o.y}}return PC(r)}function tz(t,n){const e=Dm(t);return e===n||!hd(e)||dE(e)?!1:ll(e).position==="fixed"||tz(e,n)}function Ofe(t,n){const e=n.get(t);if(e)return e;let r=r0(t,[],!1).filter(u=>hd(u)&&Mf(u)!=="body"),o=null;const a=ll(t).position==="fixed";let l=a?Dm(t):t;for(;hd(l)&&!dE(l);){const u=ll(l),d=gM(l);!d&&u.position==="fixed"&&(o=null),(a?!d&&!o:!d&&u.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||I0(l)&&!d&&tz(t,l))?r=r.filter(g=>g!==l):o=u,l=Dm(l)}return n.set(t,r),r}function Dfe(t){let{element:n,boundary:e,rootBoundary:r,strategy:o}=t;const l=[...e==="clippingAncestors"?Ofe(n,this._c):[].concat(e),r],u=l[0],d=l.reduce((h,g)=>{const v=V5(n,g,o);return h.top=Ea(v.top,h.top),h.right=If(v.right,h.right),h.bottom=If(v.bottom,h.bottom),h.left=Ea(v.left,h.left),h},V5(n,u,o));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function Lfe(t){return Z8(t)}function jfe(t,n,e){const r=Jc(n),o=Sd(n),a=e==="fixed",l=rp(t,!0,a,n);let u={scrollLeft:0,scrollTop:0};const d=Rf(0);if(r||!r&&!a)if((Mf(n)!=="body"||I0(o))&&(u=fE(n)),r){const h=rp(n,!0,a,n);d.x=h.x+n.clientLeft,d.y=h.y+n.clientTop}else o&&(d.x=ez(o));return{x:l.left+u.scrollLeft-d.x,y:l.top+u.scrollTop-d.y,width:l.width,height:l.height}}function K5(t,n){return!Jc(t)||ll(t).position==="fixed"?null:n?n(t):t.offsetParent}function nz(t,n){const e=Ra(t);if(!Jc(t))return e;let r=K5(t,n);for(;r&&_fe(r)&&ll(r).position==="static";)r=K5(r,n);return r&&(Mf(r)==="html"||Mf(r)==="body"&&ll(r).position==="static"&&!gM(r))?e:r||Tfe(t)||e}const Nfe=async function(t){let{reference:n,floating:e,strategy:r}=t;const o=this.getOffsetParent||nz,a=this.getDimensions;return{reference:jfe(n,await o(e),r),floating:{x:0,y:0,...await a(e)}}};function zfe(t){return ll(t).direction==="rtl"}const Ffe={convertOffsetParentRelativeRectToViewportRelativeRect:Ife,getDocumentElement:Sd,getClippingRect:Dfe,getOffsetParent:nz,getElementRects:Nfe,getClientRects:Rfe,getDimensions:Lfe,getScale:km,isElement:hd,isRTL:zfe};function Ufe(t,n){let e=null,r;const o=Sd(t);function a(){clearTimeout(r),e&&e.disconnect(),e=null}function l(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),a();const{left:h,top:g,width:v,height:S}=t.getBoundingClientRect();if(u||n(),!v||!S)return;const w=n1(g),k=n1(o.clientWidth-(h+v)),C=n1(o.clientHeight-(g+S)),E=n1(h),L={rootMargin:-w+"px "+-k+"px "+-C+"px "+-E+"px",threshold:Ea(0,If(1,d))||1};let A=!0;function O(D){const z=D[0].intersectionRatio;if(z!==d){if(!A)return l();z?l(!1,z):r=setTimeout(()=>{l(!1,1e-7)},100)}A=!1}try{e=new IntersectionObserver(O,{...L,root:o.ownerDocument})}catch{e=new IntersectionObserver(O,L)}e.observe(t)}return l(!0),a}function Bfe(t,n,e,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=vM(t),g=o||a?[...h?r0(h):[],...r0(n)]:[];g.forEach(R=>{o&&R.addEventListener("scroll",e,{passive:!0}),a&&R.addEventListener("resize",e)});const v=h&&u?Ufe(h,e):null;let S=-1,w=null;l&&(w=new ResizeObserver(R=>{let[L]=R;L&&L.target===h&&w&&(w.unobserve(n),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{w&&w.observe(n)})),e()}),h&&!d&&w.observe(h),w.observe(n));let k,C=d?rp(t):null;d&&E();function E(){const R=rp(t);C&&(R.x!==C.x||R.y!==C.y||R.width!==C.width||R.height!==C.height)&&e(),C=R,k=requestAnimationFrame(E)}return e(),()=>{g.forEach(R=>{o&&R.removeEventListener("scroll",e),a&&R.removeEventListener("resize",e)}),v&&v(),w&&w.disconnect(),w=null,d&&cancelAnimationFrame(k)}}const Hfe=(t,n,e)=>{const r=new Map,o={platform:Ffe,...e},a={...o.platform,_c:r};return vfe(t,n,{...o,platform:a})},Vfe=t=>{function n(e){return{}.hasOwnProperty.call(e,"current")}return{name:"arrow",options:t,fn(e){const{element:r,padding:o}=typeof t=="function"?t(e):t;return r&&n(r)?r.current!=null?F5({element:r.current,padding:o}).fn(e):{}:r?F5({element:r,padding:o}).fn(e):{}}}};var K1=typeof document<"u"?I.useLayoutEffect:I.useEffect;function IC(t,n){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(typeof t=="function"&&t.toString()===n.toString())return!0;let e,r,o;if(t&&n&&typeof t=="object"){if(Array.isArray(t)){if(e=t.length,e!=n.length)return!1;for(r=e;r--!==0;)if(!IC(t[r],n[r]))return!1;return!0}if(o=Object.keys(t),e=o.length,e!==Object.keys(n).length)return!1;for(r=e;r--!==0;)if(!{}.hasOwnProperty.call(n,o[r]))return!1;for(r=e;r--!==0;){const a=o[r];if(!(a==="_owner"&&t.$$typeof)&&!IC(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}function rz(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Y5(t,n){const e=rz(t);return Math.round(n*e)/e}function W5(t){const n=I.useRef(t);return K1(()=>{n.current=t}),n}function Kfe(t){t===void 0&&(t={});const{placement:n="bottom",strategy:e="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:l}={},transform:u=!0,whileElementsMounted:d,open:h}=t,[g,v]=I.useState({x:0,y:0,strategy:e,placement:n,middlewareData:{},isPositioned:!1}),[S,w]=I.useState(r);IC(S,r)||w(r);const[k,C]=I.useState(null),[E,R]=I.useState(null),L=I.useCallback(ce=>{ce!=z.current&&(z.current=ce,C(ce))},[C]),A=I.useCallback(ce=>{ce!==U.current&&(U.current=ce,R(ce))},[R]),O=a||k,D=l||E,z=I.useRef(null),U=I.useRef(null),Y=I.useRef(g),q=W5(d),X=W5(o),ie=I.useCallback(()=>{if(!z.current||!U.current)return;const ce={placement:n,strategy:e,middleware:S};X.current&&(ce.platform=X.current),Hfe(z.current,U.current,ce).then(ge=>{const me={...ge,isPositioned:!0};pe.current&&!IC(Y.current,me)&&(Y.current=me,Lm.flushSync(()=>{v(me)}))})},[S,n,e,X]);K1(()=>{h===!1&&Y.current.isPositioned&&(Y.current.isPositioned=!1,v(ce=>({...ce,isPositioned:!1})))},[h]);const pe=I.useRef(!1);K1(()=>(pe.current=!0,()=>{pe.current=!1}),[]),K1(()=>{if(O&&(z.current=O),D&&(U.current=D),O&&D){if(q.current)return q.current(O,D,ie);ie()}},[O,D,ie,q]);const ae=I.useMemo(()=>({reference:z,floating:U,setReference:L,setFloating:A}),[L,A]),te=I.useMemo(()=>({reference:O,floating:D}),[O,D]),he=I.useMemo(()=>{const ce={position:e,left:0,top:0};if(!te.floating)return ce;const ge=Y5(te.floating,g.x),me=Y5(te.floating,g.y);return u?{...ce,transform:"translate("+ge+"px, "+me+"px)",...rz(te.floating)>=1.5&&{willChange:"transform"}}:{position:e,left:ge,top:me}},[e,u,te.floating,g.x,g.y]);return I.useMemo(()=>({...g,update:ie,refs:ae,elements:te,floatingStyles:he}),[g,ie,ae,te,he])}function iz(t){const[n,e]=I.useState(void 0);return np(()=>{if(t){e({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let l,u;if("borderBoxSize"in a){const d=a.borderBoxSize,h=Array.isArray(d)?d[0]:d;l=h.inlineSize,u=h.blockSize}else l=t.offsetWidth,u=t.offsetHeight;e({width:l,height:u})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else e(void 0)},[t]),n}const oz="Popper",[sz,hE]=nu(oz),[Yfe,az]=sz(oz),Wfe=t=>{const{__scopePopper:n,children:e}=t,[r,o]=I.useState(null);return I.createElement(Yfe,{scope:n,anchor:r,onAnchorChange:o},e)},Gfe="PopperAnchor",Xfe=I.forwardRef((t,n)=>{const{__scopePopper:e,virtualRef:r,...o}=t,a=az(Gfe,e),l=I.useRef(null),u=Rr(n,l);return I.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:I.createElement(hr.div,Ze({},o,{ref:u}))}),lz="PopperContent",[qfe,Sve]=sz(lz),Qfe=I.forwardRef((t,n)=>{var e,r,o,a,l,u,d,h;const{__scopePopper:g,side:v="bottom",sideOffset:S=0,align:w="center",alignOffset:k=0,arrowPadding:C=0,avoidCollisions:E=!0,collisionBoundary:R=[],collisionPadding:L=0,sticky:A="partial",hideWhenDetached:O=!1,updatePositionStrategy:D="optimized",onPlaced:z,...U}=t,Y=az(lz,g),[q,X]=I.useState(null),ie=Rr(n,Xt=>X(Xt)),[pe,ae]=I.useState(null),te=iz(pe),he=(e=te==null?void 0:te.width)!==null&&e!==void 0?e:0,ce=(r=te==null?void 0:te.height)!==null&&r!==void 0?r:0,ge=v+(w!=="center"?"-"+w:""),me=typeof L=="number"?L:{top:0,right:0,bottom:0,left:0,...L},we=Array.isArray(R)?R:[R],V=we.length>0,Z={padding:me,boundary:we.filter(Zfe),altBoundary:V},{refs:Ce,floatingStyles:Ae,placement:De,isPositioned:Ie,middlewareData:Ne}=Kfe({strategy:"fixed",placement:ge,whileElementsMounted:(...Xt)=>Bfe(...Xt,{animationFrame:D==="always"}),elements:{reference:Y.anchor},middleware:[wfe({mainAxis:S+ce,alignmentAxis:k}),E&&xfe({mainAxis:!0,crossAxis:!1,limiter:A==="partial"?Cfe():void 0,...Z}),E&&yfe({...Z}),Efe({...Z,apply:({elements:Xt,rects:ln,availableWidth:jn,availableHeight:qr})=>{const{width:fi,height:jr}=ln.reference,Mr=Xt.floating.style;Mr.setProperty("--radix-popper-available-width",`${jn}px`),Mr.setProperty("--radix-popper-available-height",`${qr}px`),Mr.setProperty("--radix-popper-anchor-width",`${fi}px`),Mr.setProperty("--radix-popper-anchor-height",`${jr}px`)}}),pe&&Vfe({element:pe,padding:C}),Jfe({arrowWidth:he,arrowHeight:ce}),O&&Sfe({strategy:"referenceHidden",...Z})]}),[Ve,Ke]=cz(De),Xe=rs(z);np(()=>{Ie&&(Xe==null||Xe())},[Ie,Xe]);const at=(o=Ne.arrow)===null||o===void 0?void 0:o.x,_t=(a=Ne.arrow)===null||a===void 0?void 0:a.y,We=((l=Ne.arrow)===null||l===void 0?void 0:l.centerOffset)!==0,[Ht,dn]=I.useState();return np(()=>{q&&dn(window.getComputedStyle(q).zIndex)},[q]),I.createElement("div",{ref:Ce.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ae,transform:Ie?Ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ht,"--radix-popper-transform-origin":[(u=Ne.transformOrigin)===null||u===void 0?void 0:u.x,(d=Ne.transformOrigin)===null||d===void 0?void 0:d.y].join(" ")},dir:t.dir},I.createElement(qfe,{scope:g,placedSide:Ve,onArrowChange:ae,arrowX:at,arrowY:_t,shouldHideArrow:We},I.createElement(hr.div,Ze({"data-side":Ve,"data-align":Ke},U,{ref:ie,style:{...U.style,animation:Ie?void 0:"none",opacity:(h=Ne.hide)!==null&&h!==void 0&&h.referenceHidden?0:void 0}}))))});function Zfe(t){return t!==null}const Jfe=t=>({name:"transformOrigin",options:t,fn(n){var e,r,o,a,l;const{placement:u,rects:d,middlewareData:h}=n,v=((e=h.arrow)===null||e===void 0?void 0:e.centerOffset)!==0,S=v?0:t.arrowWidth,w=v?0:t.arrowHeight,[k,C]=cz(u),E={start:"0%",center:"50%",end:"100%"}[C],R=((r=(o=h.arrow)===null||o===void 0?void 0:o.x)!==null&&r!==void 0?r:0)+S/2,L=((a=(l=h.arrow)===null||l===void 0?void 0:l.y)!==null&&a!==void 0?a:0)+w/2;let A="",O="";return k==="bottom"?(A=v?E:`${R}px`,O=`${-w}px`):k==="top"?(A=v?E:`${R}px`,O=`${d.floating.height+w}px`):k==="right"?(A=`${-w}px`,O=v?E:`${L}px`):k==="left"&&(A=`${d.floating.width+w}px`,O=v?E:`${L}px`),{data:{x:A,y:O}}}});function cz(t){const[n,e="center"]=t.split("-");return[n,e]}const yM=Wfe,uz=Xfe,dz=Qfe,aP="rovingFocusGroup.onEntryFocus",ehe={bubbles:!1,cancelable:!0},SM="RovingFocusGroup",[RI,fz,the]=eE(SM),[nhe,hz]=nu(SM,[the]),[rhe,ihe]=nhe(SM),ohe=I.forwardRef((t,n)=>I.createElement(RI.Provider,{scope:t.__scopeRovingFocusGroup},I.createElement(RI.Slot,{scope:t.__scopeRovingFocusGroup},I.createElement(she,Ze({},t,{ref:n}))))),she=I.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:e,orientation:r,loop:o=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:h,...g}=t,v=I.useRef(null),S=Rr(n,v),w=dM(a),[k=null,C]=Ff({prop:l,defaultProp:u,onChange:d}),[E,R]=I.useState(!1),L=rs(h),A=fz(e),O=I.useRef(!1),[D,z]=I.useState(0);return I.useEffect(()=>{const U=v.current;if(U)return U.addEventListener(aP,L),()=>U.removeEventListener(aP,L)},[L]),I.createElement(rhe,{scope:e,orientation:r,dir:w,loop:o,currentTabStopId:k,onItemFocus:I.useCallback(U=>C(U),[C]),onItemShiftTab:I.useCallback(()=>R(!0),[]),onFocusableItemAdd:I.useCallback(()=>z(U=>U+1),[]),onFocusableItemRemove:I.useCallback(()=>z(U=>U-1),[])},I.createElement(hr.div,Ze({tabIndex:E||D===0?-1:0,"data-orientation":r},g,{ref:S,style:{outline:"none",...t.style},onMouseDown:Ct(t.onMouseDown,()=>{O.current=!0}),onFocus:Ct(t.onFocus,U=>{const Y=!O.current;if(U.target===U.currentTarget&&Y&&!E){const q=new CustomEvent(aP,ehe);if(U.currentTarget.dispatchEvent(q),!q.defaultPrevented){const X=A().filter(he=>he.focusable),ie=X.find(he=>he.active),pe=X.find(he=>he.id===k),te=[ie,pe,...X].filter(Boolean).map(he=>he.ref.current);pz(te)}}O.current=!1}),onBlur:Ct(t.onBlur,()=>R(!1))})))}),ahe="RovingFocusGroupItem",lhe=I.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:e,focusable:r=!0,active:o=!1,tabStopId:a,...l}=t,u=ad(),d=a||u,h=ihe(ahe,e),g=h.currentTabStopId===d,v=fz(e),{onFocusableItemAdd:S,onFocusableItemRemove:w}=h;return I.useEffect(()=>{if(r)return S(),()=>w()},[r,S,w]),I.createElement(RI.ItemSlot,{scope:e,id:d,focusable:r,active:o},I.createElement(hr.span,Ze({tabIndex:g?0:-1,"data-orientation":h.orientation},l,{ref:n,onMouseDown:Ct(t.onMouseDown,k=>{r?h.onItemFocus(d):k.preventDefault()}),onFocus:Ct(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:Ct(t.onKeyDown,k=>{if(k.key==="Tab"&&k.shiftKey){h.onItemShiftTab();return}if(k.target!==k.currentTarget)return;const C=dhe(k,h.orientation,h.dir);if(C!==void 0){k.preventDefault();let R=v().filter(L=>L.focusable).map(L=>L.ref.current);if(C==="last")R.reverse();else if(C==="prev"||C==="next"){C==="prev"&&R.reverse();const L=R.indexOf(k.currentTarget);R=h.loop?fhe(R,L+1):R.slice(L+1)}setTimeout(()=>pz(R))}})})))}),che={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function uhe(t,n){return n!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function dhe(t,n,e){const r=uhe(t.key,e);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return che[r]}function pz(t){const n=document.activeElement;for(const e of t)if(e===n||(e.focus(),document.activeElement!==n))return}function fhe(t,n){return t.map((e,r)=>t[(n+r)%t.length])}const hhe=ohe,phe=lhe,MI=["Enter"," "],ghe=["ArrowDown","PageUp","Home"],gz=["ArrowUp","PageDown","End"],mhe=[...ghe,...gz],vhe={ltr:[...MI,"ArrowRight"],rtl:[...MI,"ArrowLeft"]},yhe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pE="Menu",[i0,She,bhe]=eE(pE),[dp,gE]=nu(pE,[bhe,hE,hz]),mE=hE(),mz=hz(),[vz,Uf]=dp(pE),[whe,R0]=dp(pE),xhe=t=>{const{__scopeMenu:n,open:e=!1,children:r,dir:o,onOpenChange:a,modal:l=!0}=t,u=mE(n),[d,h]=I.useState(null),g=I.useRef(!1),v=rs(a),S=dM(o);return I.useEffect(()=>{const w=()=>{g.current=!0,document.addEventListener("pointerdown",k,{capture:!0,once:!0}),document.addEventListener("pointermove",k,{capture:!0,once:!0})},k=()=>g.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",k,{capture:!0}),document.removeEventListener("pointermove",k,{capture:!0})}},[]),I.createElement(yM,u,I.createElement(vz,{scope:n,open:e,onOpenChange:v,content:d,onContentChange:h},I.createElement(whe,{scope:n,onClose:I.useCallback(()=>v(!1),[v]),isUsingKeyboardRef:g,dir:S,modal:l},r)))},yz=I.forwardRef((t,n)=>{const{__scopeMenu:e,...r}=t,o=mE(e);return I.createElement(uz,Ze({},o,r,{ref:n}))}),Sz="MenuPortal",[Che,bz]=dp(Sz,{forceMount:void 0}),Ehe=t=>{const{__scopeMenu:n,forceMount:e,children:r,container:o}=t,a=Uf(Sz,n);return I.createElement(Che,{scope:n,forceMount:e},I.createElement(tc,{present:e||a.open},I.createElement(nE,{asChild:!0,container:o},r)))},Zl="MenuContent",[_he,bM]=dp(Zl),The=I.forwardRef((t,n)=>{const e=bz(Zl,t.__scopeMenu),{forceMount:r=e.forceMount,...o}=t,a=Uf(Zl,t.__scopeMenu),l=R0(Zl,t.__scopeMenu);return I.createElement(i0.Provider,{scope:t.__scopeMenu},I.createElement(tc,{present:r||a.open},I.createElement(i0.Slot,{scope:t.__scopeMenu},l.modal?I.createElement(khe,Ze({},o,{ref:n})):I.createElement(Phe,Ze({},o,{ref:n})))))}),khe=I.forwardRef((t,n)=>{const e=Uf(Zl,t.__scopeMenu),r=I.useRef(null),o=Rr(n,r);return I.useEffect(()=>{const a=r.current;if(a)return nM(a)},[]),I.createElement(wM,Ze({},t,{ref:o,trapFocus:e.open,disableOutsidePointerEvents:e.open,disableOutsideScroll:!0,onFocusOutside:Ct(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>e.onOpenChange(!1)}))}),Phe=I.forwardRef((t,n)=>{const e=Uf(Zl,t.__scopeMenu);return I.createElement(wM,Ze({},t,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>e.onOpenChange(!1)}))}),wM=I.forwardRef((t,n)=>{const{__scopeMenu:e,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:v,onInteractOutside:S,onDismiss:w,disableOutsideScroll:k,...C}=t,E=Uf(Zl,e),R=R0(Zl,e),L=mE(e),A=mz(e),O=She(e),[D,z]=I.useState(null),U=I.useRef(null),Y=Rr(n,U,E.onContentChange),q=I.useRef(0),X=I.useRef(""),ie=I.useRef(0),pe=I.useRef(null),ae=I.useRef("right"),te=I.useRef(0),he=k?tM:I.Fragment,ce=k?{as:tp,allowPinchZoom:!0}:void 0,ge=we=>{var V,Z;const Ce=X.current+we,Ae=O().filter(Xe=>!Xe.disabled),De=document.activeElement,Ie=(V=Ae.find(Xe=>Xe.ref.current===De))===null||V===void 0?void 0:V.textValue,Ne=Ae.map(Xe=>Xe.textValue),Ve=Bhe(Ne,Ce,Ie),Ke=(Z=Ae.find(Xe=>Xe.textValue===Ve))===null||Z===void 0?void 0:Z.ref.current;(function Xe(at){X.current=at,window.clearTimeout(q.current),at!==""&&(q.current=window.setTimeout(()=>Xe(""),1e3))})(Ce),Ke&&setTimeout(()=>Ke.focus())};I.useEffect(()=>()=>window.clearTimeout(q.current),[]),eM();const me=I.useCallback(we=>{var V,Z;return ae.current===((V=pe.current)===null||V===void 0?void 0:V.side)&&Vhe(we,(Z=pe.current)===null||Z===void 0?void 0:Z.area)},[]);return I.createElement(_he,{scope:e,searchRef:X,onItemEnter:I.useCallback(we=>{me(we)&&we.preventDefault()},[me]),onItemLeave:I.useCallback(we=>{var V;me(we)||((V=U.current)===null||V===void 0||V.focus(),z(null))},[me]),onTriggerLeave:I.useCallback(we=>{me(we)&&we.preventDefault()},[me]),pointerGraceTimerRef:ie,onPointerGraceIntentChange:I.useCallback(we=>{pe.current=we},[])},I.createElement(he,ce,I.createElement(JR,{asChild:!0,trapped:o,onMountAutoFocus:Ct(a,we=>{var V;we.preventDefault(),(V=U.current)===null||V===void 0||V.focus()}),onUnmountAutoFocus:l},I.createElement(tE,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:v,onInteractOutside:S,onDismiss:w},I.createElement(hhe,Ze({asChild:!0},A,{dir:R.dir,orientation:"vertical",loop:r,currentTabStopId:D,onCurrentTabStopIdChange:z,onEntryFocus:Ct(d,we=>{R.isUsingKeyboardRef.current||we.preventDefault()})}),I.createElement(dz,Ze({role:"menu","aria-orientation":"vertical","data-state":Tz(E.open),"data-radix-menu-content":"",dir:R.dir},L,C,{ref:Y,style:{outline:"none",...C.style},onKeyDown:Ct(C.onKeyDown,we=>{const Z=we.target.closest("[data-radix-menu-content]")===we.currentTarget,Ce=we.ctrlKey||we.altKey||we.metaKey,Ae=we.key.length===1;Z&&(we.key==="Tab"&&we.preventDefault(),!Ce&&Ae&&ge(we.key));const De=U.current;if(we.target!==De||!mhe.includes(we.key))return;we.preventDefault();const Ne=O().filter(Ve=>!Ve.disabled).map(Ve=>Ve.ref.current);gz.includes(we.key)&&Ne.reverse(),Fhe(Ne)}),onBlur:Ct(t.onBlur,we=>{we.currentTarget.contains(we.target)||(window.clearTimeout(q.current),X.current="")}),onPointerMove:Ct(t.onPointerMove,o0(we=>{const V=we.target,Z=te.current!==we.clientX;if(we.currentTarget.contains(V)&&Z){const Ce=we.clientX>te.current?"right":"left";ae.current=Ce,te.current=we.clientX}}))})))))))}),Ihe=I.forwardRef((t,n)=>{const{__scopeMenu:e,...r}=t;return I.createElement(hr.div,Ze({role:"group"},r,{ref:n}))}),AI="MenuItem",G5="menu.itemSelect",wz=I.forwardRef((t,n)=>{const{disabled:e=!1,onSelect:r,...o}=t,a=I.useRef(null),l=R0(AI,t.__scopeMenu),u=bM(AI,t.__scopeMenu),d=Rr(n,a),h=I.useRef(!1),g=()=>{const v=a.current;if(!e&&v){const S=new CustomEvent(G5,{bubbles:!0,cancelable:!0});v.addEventListener(G5,w=>r==null?void 0:r(w),{once:!0}),qR(v,S),S.defaultPrevented?h.current=!1:l.onClose()}};return I.createElement(xz,Ze({},o,{ref:d,disabled:e,onClick:Ct(t.onClick,g),onPointerDown:v=>{var S;(S=t.onPointerDown)===null||S===void 0||S.call(t,v),h.current=!0},onPointerUp:Ct(t.onPointerUp,v=>{var S;h.current||(S=v.currentTarget)===null||S===void 0||S.click()}),onKeyDown:Ct(t.onKeyDown,v=>{const S=u.searchRef.current!=="";e||S&&v.key===" "||MI.includes(v.key)&&(v.currentTarget.click(),v.preventDefault())})}))}),xz=I.forwardRef((t,n)=>{const{__scopeMenu:e,disabled:r=!1,textValue:o,...a}=t,l=bM(AI,e),u=mz(e),d=I.useRef(null),h=Rr(n,d),[g,v]=I.useState(!1),[S,w]=I.useState("");return I.useEffect(()=>{const k=d.current;if(k){var C;w(((C=k.textContent)!==null&&C!==void 0?C:"").trim())}},[a.children]),I.createElement(i0.ItemSlot,{scope:e,disabled:r,textValue:o??S},I.createElement(phe,Ze({asChild:!0},u,{focusable:!r}),I.createElement(hr.div,Ze({role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},a,{ref:h,onPointerMove:Ct(t.onPointerMove,o0(k=>{r?l.onItemLeave(k):(l.onItemEnter(k),k.defaultPrevented||k.currentTarget.focus())})),onPointerLeave:Ct(t.onPointerLeave,o0(k=>l.onItemLeave(k))),onFocus:Ct(t.onFocus,()=>v(!0)),onBlur:Ct(t.onBlur,()=>v(!1))}))))}),Rhe=I.forwardRef((t,n)=>{const{checked:e=!1,onCheckedChange:r,...o}=t;return I.createElement(Ahe,{scope:t.__scopeMenu,checked:e},I.createElement(wz,Ze({role:"menuitemcheckbox","aria-checked":RC(e)?"mixed":e},o,{ref:n,"data-state":kz(e),onSelect:Ct(o.onSelect,()=>r==null?void 0:r(RC(e)?!0:!e),{checkForDefaultPrevented:!1})})))}),Mhe="MenuRadioGroup";dp(Mhe,{value:void 0,onValueChange:()=>{}});const Cz="MenuItemIndicator",[Ahe,$he]=dp(Cz,{checked:!1}),Ohe=I.forwardRef((t,n)=>{const{__scopeMenu:e,forceMount:r,...o}=t,a=$he(Cz,e);return I.createElement(tc,{present:r||RC(a.checked)||a.checked===!0},I.createElement(hr.span,Ze({},o,{ref:n,"data-state":kz(a.checked)})))}),Ez="MenuSub",[Dhe,_z]=dp(Ez),Lhe=t=>{const{__scopeMenu:n,children:e,open:r=!1,onOpenChange:o}=t,a=Uf(Ez,n),l=mE(n),[u,d]=I.useState(null),[h,g]=I.useState(null),v=rs(o);return I.useEffect(()=>(a.open===!1&&v(!1),()=>v(!1)),[a.open,v]),I.createElement(yM,l,I.createElement(vz,{scope:n,open:r,onOpenChange:v,content:h,onContentChange:g},I.createElement(Dhe,{scope:n,contentId:ad(),triggerId:ad(),trigger:u,onTriggerChange:d},e)))},r1="MenuSubTrigger",jhe=I.forwardRef((t,n)=>{const e=Uf(r1,t.__scopeMenu),r=R0(r1,t.__scopeMenu),o=_z(r1,t.__scopeMenu),a=bM(r1,t.__scopeMenu),l=I.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:d}=a,h={__scopeMenu:t.__scopeMenu},g=I.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return I.useEffect(()=>g,[g]),I.useEffect(()=>{const v=u.current;return()=>{window.clearTimeout(v),d(null)}},[u,d]),I.createElement(yz,Ze({asChild:!0},h),I.createElement(xz,Ze({id:o.triggerId,"aria-haspopup":"menu","aria-expanded":e.open,"aria-controls":o.contentId,"data-state":Tz(e.open)},t,{ref:JC(n,o.onTriggerChange),onClick:v=>{var S;(S=t.onClick)===null||S===void 0||S.call(t,v),!(t.disabled||v.defaultPrevented)&&(v.currentTarget.focus(),e.open||e.onOpenChange(!0))},onPointerMove:Ct(t.onPointerMove,o0(v=>{a.onItemEnter(v),!v.defaultPrevented&&!t.disabled&&!e.open&&!l.current&&(a.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{e.onOpenChange(!0),g()},100))})),onPointerLeave:Ct(t.onPointerLeave,o0(v=>{var S;g();const w=(S=e.content)===null||S===void 0?void 0:S.getBoundingClientRect();if(w){var k;const C=(k=e.content)===null||k===void 0?void 0:k.dataset.side,E=C==="right",R=E?-5:5,L=w[E?"left":"right"],A=w[E?"right":"left"];a.onPointerGraceIntentChange({area:[{x:v.clientX+R,y:v.clientY},{x:L,y:w.top},{x:A,y:w.top},{x:A,y:w.bottom},{x:L,y:w.bottom}],side:C}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(v),v.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Ct(t.onKeyDown,v=>{const S=a.searchRef.current!=="";if(!(t.disabled||S&&v.key===" ")&&vhe[r.dir].includes(v.key)){var w;e.onOpenChange(!0),(w=e.content)===null||w===void 0||w.focus(),v.preventDefault()}})})))}),Nhe="MenuSubContent",zhe=I.forwardRef((t,n)=>{const e=bz(Zl,t.__scopeMenu),{forceMount:r=e.forceMount,...o}=t,a=Uf(Zl,t.__scopeMenu),l=R0(Zl,t.__scopeMenu),u=_z(Nhe,t.__scopeMenu),d=I.useRef(null),h=Rr(n,d);return I.createElement(i0.Provider,{scope:t.__scopeMenu},I.createElement(tc,{present:r||a.open},I.createElement(i0.Slot,{scope:t.__scopeMenu},I.createElement(wM,Ze({id:u.contentId,"aria-labelledby":u.triggerId},o,{ref:h,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{var v;l.isUsingKeyboardRef.current&&((v=d.current)===null||v===void 0||v.focus()),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:Ct(t.onFocusOutside,g=>{g.target!==u.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Ct(t.onEscapeKeyDown,g=>{l.onClose(),g.preventDefault()}),onKeyDown:Ct(t.onKeyDown,g=>{const v=g.currentTarget.contains(g.target),S=yhe[l.dir].includes(g.key);if(v&&S){var w;a.onOpenChange(!1),(w=u.trigger)===null||w===void 0||w.focus(),g.preventDefault()}})})))))});function Tz(t){return t?"open":"closed"}function RC(t){return t==="indeterminate"}function kz(t){return RC(t)?"indeterminate":t?"checked":"unchecked"}function Fhe(t){const n=document.activeElement;for(const e of t)if(e===n||(e.focus(),document.activeElement!==n))return}function Uhe(t,n){return t.map((e,r)=>t[(n+r)%t.length])}function Bhe(t,n,e){const o=n.length>1&&Array.from(n).every(h=>h===n[0])?n[0]:n,a=e?t.indexOf(e):-1;let l=Uhe(t,Math.max(a,0));o.length===1&&(l=l.filter(h=>h!==e));const d=l.find(h=>h.toLowerCase().startsWith(o.toLowerCase()));return d!==e?d:void 0}function Hhe(t,n){const{x:e,y:r}=t;let o=!1;for(let a=0,l=n.length-1;a<n.length;l=a++){const u=n[a].x,d=n[a].y,h=n[l].x,g=n[l].y;d>r!=g>r&&e<(h-u)*(r-d)/(g-d)+u&&(o=!o)}return o}function Vhe(t,n){if(!n)return!1;const e={x:t.clientX,y:t.clientY};return Hhe(e,n)}function o0(t){return n=>n.pointerType==="mouse"?t(n):void 0}const Pz=xhe,Iz=yz,Rz=Ehe,Mz=The,Az=Ihe,$z=wz,Oz=Rhe,Khe=Ohe,Dz=Lhe,Lz=jhe,jz=zhe,Nz="DropdownMenu",[Yhe,bve]=nu(Nz,[gE]),nc=gE(),[Whe,zz]=Yhe(Nz),Ghe=t=>{const{__scopeDropdownMenu:n,children:e,dir:r,open:o,defaultOpen:a,onOpenChange:l,modal:u=!0}=t,d=nc(n),h=I.useRef(null),[g=!1,v]=Ff({prop:o,defaultProp:a,onChange:l});return I.createElement(Whe,{scope:n,triggerId:ad(),triggerRef:h,contentId:ad(),open:g,onOpenChange:v,onOpenToggle:I.useCallback(()=>v(S=>!S),[v]),modal:u},I.createElement(Pz,Ze({},d,{open:g,onOpenChange:v,dir:r,modal:u}),e))},Xhe="DropdownMenuTrigger",qhe=I.forwardRef((t,n)=>{const{__scopeDropdownMenu:e,disabled:r=!1,...o}=t,a=zz(Xhe,e),l=nc(e);return I.createElement(Iz,Ze({asChild:!0},l),I.createElement(hr.button,Ze({type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r},o,{ref:JC(n,a.triggerRef),onPointerDown:Ct(t.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(a.onOpenToggle(),a.open||u.preventDefault())}),onKeyDown:Ct(t.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&a.onOpenToggle(),u.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})))}),Qhe=t=>{const{__scopeDropdownMenu:n,...e}=t,r=nc(n);return I.createElement(Rz,Ze({},r,e))},Zhe="DropdownMenuContent",Jhe=I.forwardRef((t,n)=>{const{__scopeDropdownMenu:e,...r}=t,o=zz(Zhe,e),a=nc(e),l=I.useRef(!1);return I.createElement(Mz,Ze({id:o.contentId,"aria-labelledby":o.triggerId},a,r,{ref:n,onCloseAutoFocus:Ct(t.onCloseAutoFocus,u=>{var d;l.current||(d=o.triggerRef.current)===null||d===void 0||d.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:Ct(t.onInteractOutside,u=>{const d=u.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,g=d.button===2||h;(!o.modal||g)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),epe=I.forwardRef((t,n)=>{const{__scopeDropdownMenu:e,...r}=t,o=nc(e);return I.createElement(Az,Ze({},o,r,{ref:n}))}),tpe=I.forwardRef((t,n)=>{const{__scopeDropdownMenu:e,...r}=t,o=nc(e);return I.createElement($z,Ze({},o,r,{ref:n}))}),npe=I.forwardRef((t,n)=>{const{__scopeDropdownMenu:e,...r}=t,o=nc(e);return I.createElement(Oz,Ze({},o,r,{ref:n}))}),rpe=I.forwardRef((t,n)=>{const{__scopeDropdownMenu:e,...r}=t,o=nc(e);return I.createElement(Khe,Ze({},o,r,{ref:n}))}),ipe=t=>{const{__scopeDropdownMenu:n,children:e,open:r,onOpenChange:o,defaultOpen:a}=t,l=nc(n),[u=!1,d]=Ff({prop:r,defaultProp:a,onChange:o});return I.createElement(Dz,Ze({},l,{open:u,onOpenChange:d}),e)},ope=I.forwardRef((t,n)=>{const{__scopeDropdownMenu:e,...r}=t,o=nc(e);return I.createElement(Lz,Ze({},o,r,{ref:n}))}),spe=I.forwardRef((t,n)=>{const{__scopeDropdownMenu:e,...r}=t,o=nc(e);return I.createElement(jz,Ze({},o,r,{ref:n,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),Fz=Ghe,s0=qhe,xM=Qhe,Uz=Jhe,ape=epe,hm=tpe,Bz=npe,lpe=rpe,cpe=ipe,upe=ope,dpe=spe;function fp(t,n){const e=Oe(),r=I.useRef(!1),o=qm(),a=I.useRef(0),l=I.useCallback(d=>{const h=Date.now();h-a.current<50||(a.current=h,r.current=d,e.batch(()=>{d?(e.complete(),e.addOpenMenu(t)):e.updateInstanceState({openMenus:e.getOpenMenus().filter(g=>!g.startsWith(t))}),n==null||n(d)}))},[e,t,n]),u=He("is menu open",()=>e.getOpenMenus().includes(t),[e,t]);return I.useEffect(()=>(r.current&&(o("open-menu",{source:"unknown",id:t}),e.addOpenMenu(t)),()=>{r.current&&(e.deleteOpenMenu(t),e.getOpenMenus().forEach(d=>{d.startsWith(t)&&(o("close-menu",{source:"unknown",id:t}),e.deleteOpenMenu(d))}),r.current=!1)}),[e,t,o]),[u,l]}function Af({id:t,children:n,modal:e=!1,debugOpen:r=!1}){const[o,a]=fp(t);return x.jsx(Fz,{open:r||o,dir:"ltr",modal:e,onOpenChange:a,children:n})}function M0({children:t,"data-testid":n}){return x.jsx(s0,{dir:"ltr","data-testid":n,asChild:!0,onTouchEnd:e=>Un(e),children:t})}function $f({side:t="bottom",align:n="start",sideOffset:e=8,alignOffset:r=8,children:o}){const a=is();return x.jsx(xM,{container:a,children:x.jsx(Uz,{className:"tlui-menu",align:n,sideOffset:e,side:t,alignOffset:r,collisionPadding:4,children:o})})}function CM({id:t,children:n}){const[e,r]=fp(t);return x.jsx(cpe,{open:e,onOpenChange:r,children:n})}function EM({label:t,"data-testid":n,"data-direction":e}){return x.jsx(upe,{dir:"ltr","data-direction":e,"data-testid":n,asChild:!0,children:x.jsx(kt,{type:"menu",className:"tlui-menu__submenu__trigger",label:t,icon:"chevron-right"})})}function _M({alignOffset:t=0,sideOffset:n=5,children:e}){const r=is();return x.jsx(xM,{container:r,children:x.jsx(dpe,{className:"tlui-menu tlui-menu__submenu__content",alignOffset:t,sideOffset:n,collisionPadding:4,children:e})})}function ld({children:t,size:n="medium"}){return x.jsx(ape,{dir:"ltr",className:"tlui-menu__group","data-size":n,children:t})}function _a({noClose:t,...n}){return x.jsx(hm,{dir:"ltr",asChild:!0,onClick:t||n.isChecked!==void 0?Un:void 0,children:x.jsx(kt,{...n})})}function Hz({children:t,onSelect:n,...e}){return x.jsxs(Bz,{dir:"ltr",className:"tlui-button tlui-button__menu tlui-button__checkbox",onSelect:r=>{n==null||n(r),Un(r)},...e,children:[x.jsx(Ia,{small:!0,icon:e.checked?"check":"checkbox-empty"}),t]})}function fpe({children:t,onSelect:n,...e}){return x.jsxs(Bz,{dir:"ltr",className:"tlui-button tlui-button__menu tlui-button__checkbox",onSelect:r=>{n==null||n(r),Un(r)},...e,children:[x.jsx("div",{className:"tlui-button__checkbox__indicator",children:x.jsx(lpe,{dir:"ltr",children:x.jsx(Ia,{icon:"check",small:!0})})}),t]})}let X5=0;function hpe(t,n){const e=Array(n),r=Math.floor(Math.sqrt(n));for(let o=0;o<n;o++)X5++,e[o]={id:Ir("box"+X5),type:"geo",x:o%r*132,y:Math.floor(o/r)*132};t.batch(()=>{t.createShapes(e).setSelectedShapes(e.map(o=>o.id))})}const ppe=I.memo(function({renderDebugMenuItems:n}){const e=In();return x.jsxs("div",{className:"tlui-debug-panel",children:[x.jsx(gpe,{}),x.jsx(mpe,{}),x.jsxs(Af,{id:"debug",children:[x.jsx(M0,{children:x.jsx(kt,{type:"icon",icon:"dots-horizontal",title:e("debug-panel.more")})}),x.jsx($f,{side:"top",align:"end",alignOffset:0,children:x.jsx(vpe,{renderDebugMenuItems:n})})]})]})}),gpe=sr(function(){const n=Oe();return x.jsx("div",{className:"tlui-debug-panel__current-state",children:n.getPath()})}),mpe=function(){const n=Oe(),e=He("rendering shapes count",()=>n.getRenderingShapes().length,[n]);return x.jsxs("div",{children:[e," Shapes"]})},vpe=sr(function({renderDebugMenuItems:n}){const e=Oe(),{addToast:r}=ru(),{addDialog:o}=up(),[a,l]=I.useState(!1);return x.jsxs(x.Fragment,{children:[x.jsxs(ld,{children:[x.jsx(_a,{type:"menu",onClick:()=>{r({id:dr(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0}),r({id:dr(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,actions:[{label:"Primary",type:"primary",onClick:()=>{}},{label:"Normal",type:"normal",onClick:()=>{}},{label:"Danger",type:"danger",onClick:()=>{}}]}),r({id:dr(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,icon:"twitter",actions:[{label:"Primary",type:"primary",onClick:()=>{}},{label:"Normal",type:"normal",onClick:()=>{}},{label:"Danger",type:"danger",onClick:()=>{}}]})},label:"Show toast"}),x.jsx(_a,{type:"menu",onClick:()=>{o({component:({onClose:u})=>x.jsx(Spe,{displayDontShowAgain:!0,onCancel:()=>{u()},onContinue:()=>{u()}}),onClose:()=>{}})},label:"Show dialog"}),x.jsx(_a,{type:"menu",onClick:()=>hpe(e,100),label:"Create 100 shapes"}),x.jsx(_a,{type:"menu",onClick:()=>{function u({children:S}){let w=0;if(!S.length)return 0;for(const k of[...S])w++,w+=u(k);return w}const d=e.getSelectedShapes(),h=d.length===0?e.getRenderingShapes():d,g=h.map(S=>document.getElementById(S.id).parentElement);let v=g.length;for(const S of g)v+=u(S);window.alert(`Shapes ${h.length}, DOM nodes:${v}`)},label:"Count shapes / nodes"}),(()=>{if(a)throw Error("oh no!")})(),x.jsx(_a,{type:"menu",onClick:()=>{l(!0)},label:"Throw error"}),x.jsx(_a,{type:"menu",onClick:()=>{YL()},label:"Hard reset"})]}),x.jsxs(ld,{children:[x.jsx(ES,{flag:kr.debugSvg}),x.jsx(ES,{flag:kr.forceSrgb}),x.jsx(ES,{flag:kr.debugGeometry}),x.jsx(ES,{flag:kr.hideShapes})]}),x.jsx(ld,{children:Object.values(ZY).map(u=>x.jsx(ES,{flag:u},u.name))}),n==null?void 0:n()]})});function ype({label:t,value:n,onChange:e}){return x.jsx(Hz,{title:t,checked:n,onSelect:()=>e(!n),children:x.jsx("span",{className:"tlui-button__label",draggable:!1,children:t})})}const ES=sr(function({flag:n,onChange:e}){return x.jsx(ype,{label:n.name.replace(/([a-z0-9])([A-Z])/g,r=>`${r[0]} ${r[1].toLowerCase()}`).replace(/^[a-z]/,r=>r.toUpperCase()),value:n.get(),onChange:r=>{n.set(r),e==null||e(r)}})});function Spe({title:t="title",body:n="hello hello hello",cancel:e="Cancel",confirm:r="Continue",displayDontShowAgain:o=!1,onCancel:a,onContinue:l}){const[u,d]=I.useState(!1);return x.jsxs(x.Fragment,{children:[x.jsxs(aE,{children:[x.jsx(lE,{children:t}),x.jsx(cE,{})]}),x.jsx(t0,{style:{maxWidth:350},children:n}),x.jsxs(rM,{className:"tlui-dialog__footer__actions",children:[o&&x.jsx(kt,{type:"normal",onClick:()=>d(!u),iconLeft:u?"check":"checkbox-empty",style:{marginRight:"auto"},children:"Don't show again"}),x.jsx(kt,{type:"normal",onClick:a,children:e}),x.jsx(kt,{type:"primary",onClick:async()=>l(),children:r})]})]})}const bpe=({id:t,component:n,onClose:e})=>{const{removeDialog:r}=up(),o=is(),a=I.useCallback(l=>{if(!l){if(e)try{e()}catch(u){console.warn(u)}r(t)}},[t,e,r]);return x.jsx(Zue,{onOpenChange:a,defaultOpen:!0,children:x.jsx(Jue,{container:o,children:x.jsx(ede,{dir:"ltr",className:"tlui-dialog__overlay",children:x.jsx(tde,{dir:"ltr",className:"tlui-dialog__content",children:x.jsx(n,{onClose:()=>a(!1)})})})})})};function wpe(){const{dialogs:t}=up();return x.jsx(x.Fragment,{children:t.map(n=>x.jsx(bpe,{...n},n.id))})}const xpe=ft.memo(wpe);function Cpe(){const t=Oe(),n=He("follow",()=>t.getInstanceState().followingUserId,[t]);return n?x.jsx(Epe,{userId:n}):null}function Epe({userId:t}){const n=d4(t);return n?x.jsx("div",{className:"tlui-following-indicator",style:{borderColor:n.color}}):null}function Vz(){const t=Oe(),{languages:n,currentLanguage:e}=B8(),r=I.useCallback(o=>t.user.updateUserPreferences({locale:o}),[t]);return x.jsxs(CM,{id:"help menu language",children:[x.jsx(EM,{label:"menu.language","data-direction":"left"}),x.jsx(_M,{sideOffset:-4,children:x.jsx(ld,{children:n.map(({locale:o,label:a})=>x.jsx(fpe,{title:o,checked:o===e,onSelect:()=>r(o),children:x.jsx("span",{className:"tlui-button__label",children:a})},o))})})]})}const _pe=I.memo(function(){const n=is(),e=In(),[r,o]=fp("help menu");return x.jsx("div",{className:"tlui-help-menu",children:x.jsxs(Fz,{dir:"ltr",open:r,onOpenChange:o,modal:!1,children:[x.jsx(s0,{asChild:!0,dir:"ltr",children:x.jsx(kt,{type:"help",className:"tlui-button",smallIcon:!0,title:e("help-menu.title"),icon:"question-mark"})}),x.jsx(xM,{container:n,children:x.jsx(Uz,{className:"tlui-menu",side:"top",sideOffset:8,align:"end",alignOffset:0,collisionPadding:4,children:x.jsx(Tpe,{})})})]})})});function Tpe(){const t=qde(),n=cl();function e(r){if(!r||n&&!r.readonlyOk)return null;switch(r.type){case"custom":{if(r.id==="LANGUAGE_MENU")return x.jsx(Vz,{},"item");break}case"group":return x.jsx(ld,{size:"small",children:r.children.map(e)},r.id);case"submenu":return x.jsxs(CM,{id:`help menu ${r.id}`,children:[x.jsx(EM,{label:r.label}),x.jsx(_M,{children:r.children.map(e)})]},r.id);case"item":{const{id:o,kbd:a,label:l,onSelect:u,icon:d}=r.actionItem;return x.jsx(_a,{type:"menu",kbd:a,label:l,onClick:()=>u("help-menu"),iconLeft:d},o)}}}return x.jsx(x.Fragment,{children:t.map(e)})}const Kz="Popover",[Yz,wve]=nu(Kz,[hE]),TM=hE(),[kpe,Jm]=Yz(Kz),Ppe=t=>{const{__scopePopover:n,children:e,open:r,defaultOpen:o,onOpenChange:a,modal:l=!1}=t,u=TM(n),d=I.useRef(null),[h,g]=I.useState(!1),[v=!1,S]=Ff({prop:r,defaultProp:o,onChange:a});return I.createElement(yM,u,I.createElement(kpe,{scope:n,contentId:ad(),triggerRef:d,open:v,onOpenChange:S,onOpenToggle:I.useCallback(()=>S(w=>!w),[S]),hasCustomAnchor:h,onCustomAnchorAdd:I.useCallback(()=>g(!0),[]),onCustomAnchorRemove:I.useCallback(()=>g(!1),[]),modal:l},e))},Ipe="PopoverTrigger",Rpe=I.forwardRef((t,n)=>{const{__scopePopover:e,...r}=t,o=Jm(Ipe,e),a=TM(e),l=Rr(n,o.triggerRef),u=I.createElement(hr.button,Ze({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Xz(o.open)},r,{ref:l,onClick:Ct(t.onClick,o.onOpenToggle)}));return o.hasCustomAnchor?u:I.createElement(uz,Ze({asChild:!0},a),u)}),Wz="PopoverPortal",[Mpe,Ape]=Yz(Wz,{forceMount:void 0}),$pe=t=>{const{__scopePopover:n,forceMount:e,children:r,container:o}=t,a=Jm(Wz,n);return I.createElement(Mpe,{scope:n,forceMount:e},I.createElement(tc,{present:e||a.open},I.createElement(nE,{asChild:!0,container:o},r)))},a0="PopoverContent",Ope=I.forwardRef((t,n)=>{const e=Ape(a0,t.__scopePopover),{forceMount:r=e.forceMount,...o}=t,a=Jm(a0,t.__scopePopover);return I.createElement(tc,{present:r||a.open},a.modal?I.createElement(Dpe,Ze({},o,{ref:n})):I.createElement(Lpe,Ze({},o,{ref:n})))}),Dpe=I.forwardRef((t,n)=>{const e=Jm(a0,t.__scopePopover),r=I.useRef(null),o=Rr(n,r),a=I.useRef(!1);return I.useEffect(()=>{const l=r.current;if(l)return nM(l)},[]),I.createElement(tM,{as:tp,allowPinchZoom:!0},I.createElement(Gz,Ze({},t,{ref:o,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ct(t.onCloseAutoFocus,l=>{var u;l.preventDefault(),a.current||(u=e.triggerRef.current)===null||u===void 0||u.focus()}),onPointerDownOutside:Ct(t.onPointerDownOutside,l=>{const u=l.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,h=u.button===2||d;a.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:Ct(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})))}),Lpe=I.forwardRef((t,n)=>{const e=Jm(a0,t.__scopePopover),r=I.useRef(!1),o=I.useRef(!1);return I.createElement(Gz,Ze({},t,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l;if((l=t.onCloseAutoFocus)===null||l===void 0||l.call(t,a),!a.defaultPrevented){var u;r.current||(u=e.triggerRef.current)===null||u===void 0||u.focus(),a.preventDefault()}r.current=!1,o.current=!1},onInteractOutside:a=>{var l,u;(l=t.onInteractOutside)===null||l===void 0||l.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const d=a.target;((u=e.triggerRef.current)===null||u===void 0?void 0:u.contains(d))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}}))}),Gz=I.forwardRef((t,n)=>{const{__scopePopover:e,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:g,...v}=t,S=Jm(a0,e),w=TM(e);return eM(),I.createElement(JR,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a},I.createElement(tE,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:g,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onDismiss:()=>S.onOpenChange(!1)},I.createElement(dz,Ze({"data-state":Xz(S.open),role:"dialog",id:S.contentId},w,v,{ref:n,style:{...v.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function Xz(t){return t?"open":"closed"}const jpe=Ppe,Npe=Rpe,qz=$pe,Qz=Ope,kM=({id:t,children:n,onOpenChange:e,open:r})=>{const[o,a]=fp(t,e);return x.jsx(jpe,{onOpenChange:a,open:r||o,children:x.jsx("div",{className:"tlui-popover",children:n})})},PM=({children:t,disabled:n,"data-testid":e})=>x.jsx(Npe,{"data-testid":e,disabled:n,asChild:!0,dir:"ltr",children:t}),Zz=({side:t,children:n,align:e="center",sideOffset:r=8,alignOffset:o=0})=>{const a=is();return x.jsx(qz,{container:a,children:x.jsx(Qz,{className:"tlui-popover__content",side:t,sideOffset:r,align:e,alignOffset:o,dir:"ltr",children:n})})},Jz=I.memo(function(){const n=In(),e=is(),r=Bde(),o=cl();function a(l){if(!l||o&&!l.readonlyOk)return null;switch(l.type){case"item":{const{id:u,icon:d,label:h,kbd:g,onSelect:v}=l.actionItem;return x.jsx(kt,{"data-testid":`menu-item.${l.id}`,icon:d,type:"icon",title:h?g?`${n(h)} ${Zc(g)}`:`${n(h)}`:g?`${Zc(g)}`:"",onClick:()=>v("actions-menu"),disabled:l.disabled},u)}}}return x.jsxs(kM,{id:"actions-menu",children:[x.jsx(PM,{children:x.jsx(kt,{className:"tlui-menu__trigger","data-testid":"main.action-menu",icon:"dots-vertical",title:n("actions-menu.title"),type:"icon",smallIcon:!0})}),x.jsx(qz,{container:e,children:x.jsx(Qz,{className:"tlui-popover__content",side:"bottom",dir:"ltr",sideOffset:6,children:x.jsx("div",{className:"tlui-actions-menu tlui-buttons__grid",children:r.map(a)})})})]})}),e7=sr(function(){const n=Oe(),e=os(),r=In(),o=e.duplicate;return x.jsx(kt,{icon:o.icon,type:"icon",onClick:()=>o.onSelect("quick-actions"),disabled:!(n.isIn("select")&&n.getSelectedShapeIds().length>0),title:`${r(o.label)} ${Zc(o.kbd)}`,smallIcon:!0})}),zpe=I.memo(function(){const n=In();return x.jsxs(Af,{id:"main menu",children:[x.jsx(M0,{children:x.jsx(kt,{type:"icon",className:"tlui-menu__trigger","data-testid":"main.menu",title:n("menu.title"),icon:"menu",smallIcon:!0})}),x.jsx($f,{alignOffset:0,sideOffset:6,children:x.jsx(Fpe,{})})]})});function Fpe(){const t=Oe(),n=In(),e=Zde(),r=ul(),o=cl();function a(l,u,d,h){if(!u)return null;switch(u.type){case"custom":return o&&!u.readonlyOk?null:u.id==="LANGUAGE_MENU"?x.jsx(Vz,{},"item"):null;case"group":return o&&!u.readonlyOk?null:x.jsx(ld,{size:h<=1?"medium":r<3||(d==null?void 0:d.type)==="submenu"&&h>2?"tiny":"medium",children:u.children.map(g=>a(l,g,u,h+1))},u.id);case"submenu":return o&&!u.readonlyOk?null:x.jsxs(CM,{id:`main menu ${d?d.id+" ":""}${u.id}`,children:[x.jsx(EM,{label:u.label,"data-testid":`menu-item.${u.id}`}),x.jsx(_M,{sideOffset:-4,alignOffset:-1,children:u.children.map(g=>a(l,g,u,h+1))})]},u.id);case"item":{if(o&&!u.readonlyOk)return null;const{id:g,checkbox:v,menuLabel:S,label:w,onSelect:k,kbd:C}=u.actionItem,E=S??w,R=E?n(E):void 0;return v?x.jsxs(Hz,{onSelect:()=>k("menu"),title:R||"",checked:u.checked,disabled:u.disabled,children:[R&&x.jsx("span",{className:"tlui-button__label",children:R}),C&&x.jsx(oE,{children:C})]},g):x.jsx(_a,{type:"menu","data-testid":`menu-item.${u.id}`,kbd:C,label:E,onClick:()=>k("menu"),disabled:u.disabled},g)}}}return x.jsx(x.Fragment,{children:e.map(l=>a(t,l,null,0))})}const Upe=function({name:n,id:e,isCurrentPage:r}){const o=Oe(),a=I.useRef(null),l=I.useCallback(d=>{o.renamePage(e,d||"New Page",{ephemeral:!0})},[o,e]),u=I.useCallback(d=>{o.mark("rename page"),o.renamePage(e,d||"New Page",{ephemeral:!1})},[o,e]);return x.jsx(iM,{className:"tlui-page-menu__item__input",ref:d=>a.current=d,defaultValue:n,onValueChange:l,onComplete:u,onCancel:u,shouldManuallyMaintainScrollPositionWhenFocused:!0,autofocus:r,autoselect:!0})},$I=(t,n,e,r)=>{let o;const a=t.getPages(),l=e>r?a[r-1]:a[r],u=e>r?a[r]:a[r+1];l&&!u?o=Zu(l.index):!l&&u?o=CQ(a[0].index):o=LS(l.index,u.index),o!==a[e].index&&(t.mark("moving page"),t.updatePage({id:n,index:o}))},q5=sr(function({index:n,listSize:e,item:r,onRename:o}){const a=Oe(),l=In(),u=a.getPages(),d=I.useCallback(()=>{a.mark("creating page");const S=cd.createId();a.duplicatePage(r.id,S)},[a,r]),h=I.useCallback(()=>{$I(a,r.id,n,n-1)},[a,r,n]),g=I.useCallback(()=>{$I(a,r.id,n,n+1)},[a,r,n]),v=I.useCallback(()=>{a.mark("deleting page"),a.deletePage(r.id)},[a,r]);return x.jsxs(Af,{id:`page item submenu ${n}`,children:[x.jsx(M0,{children:x.jsx(kt,{type:"icon",title:l("page-menu.submenu.title"),icon:"dots-vertical"})}),x.jsxs($f,{alignOffset:0,children:[x.jsxs(ld,{children:[o&&x.jsx(hm,{dir:"ltr",onSelect:o,asChild:!0,children:x.jsx(kt,{type:"menu",label:"page-menu.submenu.rename"})}),x.jsx(hm,{dir:"ltr",onSelect:d,disabled:u.length>=cC,asChild:!0,children:x.jsx(kt,{type:"menu",label:"page-menu.submenu.duplicate-page"})}),n>0&&x.jsx(hm,{dir:"ltr",onSelect:h,asChild:!0,children:x.jsx(kt,{type:"menu",label:"page-menu.submenu.move-up"})}),n<e-1&&x.jsx(hm,{dir:"ltr",onSelect:g,asChild:!0,children:x.jsx(kt,{type:"menu",label:"page-menu.submenu.move-down"})})]}),e>1&&x.jsx(ld,{children:x.jsx(hm,{dir:"ltr",onSelect:v,asChild:!0,children:x.jsx(kt,{type:"menu",label:"page-menu.submenu.delete"})})})]})]})}),Bpe=function(){const n=Oe(),e=In(),r=ul(),o=I.useCallback(()=>E(!1),[]),[a,l]=fp("page-menu",o),u=36,d=I.useRef(null),h=He("pages",()=>n.getPages(),[n]),g=He("currentPage",()=>n.getCurrentPage(),[n]),v=He("currentPageId",()=>n.getCurrentPageId(),[n]),S=cl(),w=He("maxPageCountReached",()=>n.getPages().length>=cC,[n]),k=He("isCoarsePointer",()=>n.getInstanceState().isCoarsePointer,[n]),[C,E]=I.useState(!1),R=I.useCallback(()=>{S||E(X=>!X)},[S]),L=I.useRef({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),[A,O]=I.useState(Object.fromEntries(h.map((X,ie)=>[X.id,{y:ie*u,offsetY:0,isSelected:!1}])));I.useLayoutEffect(()=>{O(Object.fromEntries(h.map((X,ie)=>[X.id,{y:ie*u,offsetY:0,isSelected:!1}])))},[u,h]),I.useEffect(()=>{a&&requestAnimationFrame(()=>{const X=document.querySelector(`[data-testid="page-menu-item-${v}"]`);if(X){const ie=d.current;if(!ie)return;const pe=X.offsetTop,ae=ie.scrollTop;pe<ae&&ie.scrollTo({top:pe});const te=pe+u,he=ie.scrollTop+ie.offsetHeight;te>he&&ie.scrollTo({top:te-ie.offsetHeight})}})},[u,v,a]);const D=I.useCallback(X=>{const{clientY:ie,currentTarget:pe}=X,{dataset:{id:ae,index:te}}=pe;if(!ae||!te)return;const he=L.current;h0(X.currentTarget,X),he.status="pointing",he.pointing={id:ae,index:+te};const ge=A[ae].y;he.startY=ie,he.startIndex=Math.max(0,Math.min(Math.round(ge/u),h.length-1))},[u,h.length,A]),z=I.useCallback(X=>{const ie=L.current;if(ie.status==="pointing"){const{clientY:pe}=X,ae=pe-ie.startY;Math.abs(ae)>5&&(ie.status="dragging")}if(ie.status==="dragging"){const{clientY:pe}=X,ae=pe-ie.startY,te=A[ie.pointing.id],{startIndex:he,pointing:ce}=ie,ge=te.y+ae,me=Math.max(0,Math.min(Math.round(ge/u),h.length-1)),we={...A};if(we[ce.id]={y:te.y,offsetY:ae,isSelected:!0},me!==ie.dragIndex){ie.dragIndex=me;for(let V=0;V<h.length;V++){const Z=h[V];if(Z.id===ie.pointing.id)continue;let{y:Ce}=we[Z.id];me===he?Ce=V*u:me<he?me<=V&&V<he?Ce=(V+1)*u:Ce=V*u:me>he&&(me>=V&&V>he?Ce=(V-1)*u:Ce=V*u),Ce!==we[Z.id].y&&(we[Z.id]={y:Ce,offsetY:0,isSelected:!0})}}O(we)}},[u,h,A]),U=I.useCallback(X=>{const ie=L.current;if(ie.status==="dragging"){const{id:pe,index:ae}=ie.pointing;$I(n,pe,ae,ie.dragIndex)}p0(X.currentTarget,X),ie.status="idle"},[n]),Y=I.useCallback(X=>{const ie=L.current;X.key==="Escape"&&(ie.status==="dragging"&&O(Object.fromEntries(h.map((pe,ae)=>[pe.id,{y:ae*u,offsetY:0,isSelected:!1}]))),ie.status="idle")},[u,h]),q=I.useCallback(()=>{S||n.batch(()=>{n.mark("creating page");const X=cd.createId();n.createPage({name:e("page-menu.new-page-initial-name"),id:X}),n.setCurrentPage(X),E(!0)})},[n,e,S]);return x.jsxs(kM,{id:"pages",onOpenChange:l,open:a,children:[x.jsx(PM,{children:x.jsx(kt,{className:"tlui-page-menu__trigger tlui-menu__trigger","data-testid":"main.page-menu",icon:"chevron-down",type:"menu",title:g.name,children:x.jsx("div",{className:"tlui-page-menu__name",children:g.name})})}),x.jsx(Zz,{side:"bottom",align:"start",sideOffset:6,children:x.jsxs("div",{className:"tlui-page-menu__wrapper",children:[x.jsxs("div",{className:"tlui-page-menu__header",children:[x.jsx("div",{className:"tlui-page-menu__header__title",children:e("page-menu.title")}),!S&&x.jsxs("div",{className:"tlui-buttons__horizontal",children:[x.jsx(kt,{type:"icon","data-testid":"page-menu.edit",title:e(C?"page-menu.edit-done":"page-menu.edit-start"),icon:C?"check":"edit",onClick:R}),x.jsx(kt,{type:"icon","data-testid":"page-menu.create",icon:"plus",title:e(w?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:w,onClick:q})]})]}),x.jsx("div",{className:"tlui-page-menu__list tlui-menu__group",style:{height:u*h.length+4},ref:d,children:h.map((X,ie)=>{const pe=A[X.id]??{position:ie*40,offsetY:0};return C?x.jsxs("div",{"data-testid":`page-menu-item-${X.id}`,className:"tlui-page_menu__item__sortable",style:{zIndex:X.id===g.id?888:ie,transform:`translate(0px, ${pe.y+pe.offsetY}px)`},children:[x.jsx(kt,{type:"icon",tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",icon:"drag-handle-dots",onPointerDown:D,onPointerUp:U,onPointerMove:z,onKeyDown:Y,"data-id":X.id,"data-index":ie}),r<5&&k?x.jsx(kt,{type:"normal",className:"tlui-page-menu__item__button",onClick:()=>{const ae=window.prompt("Rename page",X.name);ae&&ae!==X.name&&n.renamePage(X.id,ae)},onDoubleClick:R,isChecked:X.id===g.id,children:x.jsx("span",{children:X.name})}):x.jsx("div",{className:"tlui-page_menu__item__sortable__title",style:{height:u},children:x.jsx(Upe,{id:X.id,name:X.name,isCurrentPage:X.id===g.id})}),!S&&x.jsx("div",{className:"tlui-page_menu__item__submenu","data-isediting":C,children:x.jsx(q5,{index:ie,item:X,listSize:h.length})})]},X.id+"_editing"):x.jsxs("div",{"data-testid":`page-menu-item-${X.id}`,className:"tlui-page-menu__item",children:[x.jsxs(kt,{type:"normal",className:"tlui-page-menu__item__button tlui-page-menu__item__button__checkbox",onClick:()=>n.setCurrentPage(X.id),onDoubleClick:R,isChecked:X.id===g.id,title:e("page-menu.go-to-page"),children:[x.jsx("div",{className:"tlui-page-menu__item__button__check",children:X.id===g.id&&x.jsx(Ia,{icon:"check"})}),x.jsx("span",{children:X.name})]}),!S&&x.jsx("div",{className:"tlui-page_menu__item__submenu",children:x.jsx(q5,{index:ie,item:X,listSize:h.length,onRename:()=>{if(n.environment.isIos){const ae=window.prompt("Rename page",X.name);ae&&ae!==X.name&&n.renamePage(X.id,ae)}else n.batch(()=>{E(!0),n.setCurrentPage(X.id)})}})})]},X.id)})})]})})]})},t7=I.memo(function(){const n=In(),e=V8(),o=os().redo;return x.jsx(kt,{"data-testid":"main.redo",icon:o.icon,type:"icon",title:`${n(o.label)} ${Zc(o.kbd)}`,disabled:!e,onClick:()=>o.onSelect("quick-actions"),smallIcon:!0})}),n7=sr(function(){const n=Oe(),e=os(),r=In(),o=e.delete;return cl()?null:x.jsx(kt,{icon:o.icon,type:"icon",onClick:()=>{o.onSelect("quick-actions"),n.getContainer().focus()},disabled:!(n.isIn("select")&&n.getSelectedShapeIds().length>0),title:`${r(o.label)} ${Zc(o.kbd)}`,smallIcon:!0})}),r7=I.memo(function(){const n=In(),e=K8(),o=os().undo;return x.jsx(kt,{"data-testid":"main.undo",icon:o.icon,type:"icon",title:`${n(o.label)} ${Zc(o.kbd)}`,disabled:!e,onClick:()=>o.onSelect("quick-actions"),smallIcon:!0})}),Hpe=sr(function(){const n=Oe(),e=ul(),r=cl();return x.jsx("div",{className:"tlui-menu-zone",children:x.jsxs("div",{className:"tlui-buttons__horizontal",children:[x.jsx(zpe,{}),x.jsx(Bpe,{}),e>=6&&!r&&!n.isInAny("hand","zoom")&&x.jsxs(x.Fragment,{children:[x.jsx(r7,{}),x.jsx(t7,{}),x.jsx(n7,{}),x.jsx(e7,{}),x.jsx(Jz,{})]})]})})});function Vpe(t,n){const[e,r]=ft.useState(n);ft.useLayoutEffect(()=>{const a=localStorage.getItem(t);if(a)try{r(JSON.parse(a))}catch{console.error(`Could not restore value ${t} from local storage.`)}},[t]);const o=ft.useCallback(a=>{r(l=>{const u=typeof a=="function"?a(l):a;return localStorage.setItem(t,JSON.stringify(u)),u})},[t]);return[e,o]}class FS{constructor(n){T(this,"dpr",1);T(this,"colors",{shapeFill:"rgba(144, 144, 144, .1)",selectFill:"#2f80ed",viewportFill:"rgba(144, 144, 144, .1)"});T(this,"id",dr());T(this,"cvs",null);T(this,"pageBounds",[]);T(this,"collaborators",[]);T(this,"canvasScreenBounds",new Mt);T(this,"canvasPageBounds",new Mt);T(this,"contentPageBounds",new Mt);T(this,"contentScreenBounds",new Mt);T(this,"originPagePoint",new N);T(this,"originPageCenter",new N);T(this,"isInViewport",!1);T(this,"debug",!1);T(this,"updateContentScreenBounds",()=>{const{contentScreenBounds:n,contentPageBounds:e,canvasScreenBounds:r}=this;let{x:o,y:a,w:l,h:u}=n;if(e.w>e.h){const d=r.w/(e.w/e.h);d>r.h?(o=(r.w-r.w*(r.h/d))/2,a=0,l=r.w*(r.h/d),u=r.h):(o=0,a=(r.h-d)/2,l=r.w,u=d)}else if(e.w<e.h){const d=r.h/(e.h/e.w);o=(r.w-d)/2,a=0,l=d,u=r.h}else o=r.h/2,a=0,l=r.h,u=r.h;n.set(o,a,l,u)});T(this,"updateCanvasPageBounds",()=>{const{canvasPageBounds:n,canvasScreenBounds:e,contentPageBounds:r,contentScreenBounds:o}=this;n.set(0,0,r.width/(o.width/e.width),r.height/(o.height/e.height)),n.center=r.center});T(this,"getScreenPoint",(n,e)=>{const{canvasScreenBounds:r}=this,o=(n-r.minX)*this.dpr,a=(e-r.minY)*this.dpr;return{x:o,y:a}});T(this,"getPagePoint",(n,e)=>{const{contentPageBounds:r,contentScreenBounds:o,canvasPageBounds:a}=this,{x:l,y:u}=this.getScreenPoint(n,e);return new N(a.minX+l*r.width/o.width,a.minY+u*r.height/o.height,1)});T(this,"minimapScreenPointToPagePoint",(n,e,r=!1,o=!1)=>{const{editor:a}=this,l=a.getViewportPageBounds();let{x:u,y:d}=this.getPagePoint(n,e);if(o){const h=this.editor.getCurrentPageBounds(),g=l,v=((h==null?void 0:h.minX)??0)-g.width/2,S=((h==null?void 0:h.maxX)??0)+g.width/2,w=((h==null?void 0:h.minY)??0)-g.height/2,k=((h==null?void 0:h.maxY)??0)+g.height/2,C=Math.max(0,v+g.width-u),E=Math.max(0,-(S-g.width-u)),R=Math.max(0,w+g.height-d),L=Math.max(0,-(k-g.height-d)),A=Math.max(0,C-E),O=Math.max(0,E-C),D=Math.max(0,R-L),z=Math.max(0,L-R);A&&A>O?u+=A/2:O&&(u-=O/2),D&&D>z?d+=D/2:z&&(d-=z/2),u=Bc(u,v,S),d=Bc(d,w,k)}if(r){const{originPagePoint:h}=this,g=Math.abs(u-h.x),v=Math.abs(d-h.y);g>v?d=h.y:u=h.x}return new N(u,d)});T(this,"render",()=>{const{cvs:n,pageBounds:e}=this;this.updateCanvasPageBounds();const{editor:r,canvasScreenBounds:o,canvasPageBounds:a,contentPageBounds:l,contentScreenBounds:u}=this,{width:d,height:h}=o,g=r.getSelectedShapeIds(),v=r.getViewportPageBounds();if(!n||!e)return;const S=n.getContext("2d");if(!S)throw new Error("Minimap (shapes): Could not get context");S.resetTransform(),S.globalAlpha=1,S.clearRect(0,0,d,h);const w=u.width/l.width,k=u.height/l.height;S.translate((d-u.width)/2,(h-u.height)/2),S.scale(w,k),S.translate(-l.minX,-l.minY);const C=8/w,E=8/w,R=1/w,L=1/w,A=C/4,O=E/4,D=new Path2D,z=new Path2D,{shapeFill:U,selectFill:Y,viewportFill:q}=this.colors;let X;for(let he=0,ce=e.length;he<ce;he++)X=e[he],FS.roundedRect(g.includes(X.id)?z:D,X.minX,X.minY,X.width,X.height,Bc(C,R,X.width/A),Bc(E,L,X.height/O));if(S.fillStyle=U,S.fill(D),S.fillStyle=Y,S.fill(z),this.debug){const he=Mt.Common(e),{minX:ce,minY:ge,width:me,height:we}=he;S.strokeStyle="green",S.lineWidth=2/w,S.strokeRect(ce+1/w,ge+1/k,me-2/w,we-2/k)}{const{brush:he}=r.getInstanceState();if(he){const{x:ce,y:ge,w:me,h:we}=he;S.beginPath(),FS.sharpRect(S,ce,ge,me,we),S.closePath(),S.fillStyle=q,S.fill()}}{const{minX:he,minY:ce,width:ge,height:me}=v;S.beginPath();const we=12/w,V=12/w;FS.roundedRect(S,he,ce,ge,me,Math.min(ge/4,we),Math.min(me/4,V)),S.closePath(),S.fillStyle=q,S.fill(),this.debug&&(S.strokeStyle="orange",S.strokeRect(he+1/w,ce+1/k,ge-2/w,me-2/k))}const ie=2.5/w,pe=2.5/k,ae=r.getCurrentPageId();let te;for(let he=0;he<this.collaborators.length;he++)te=this.collaborators[he],te.currentPageId===ae&&(S.beginPath(),S.ellipse(Bc(te.cursor.x,a.minX+ie,a.maxX-ie),Bc(te.cursor.y,a.minY+pe,a.maxY-pe),5/w,5/k,0,0,or),S.fillStyle=te.color,S.fill());if(this.debug){S.lineWidth=2/w;{const{minX:he,minY:ce,width:ge,height:me}=l;S.strokeStyle="red",S.strokeRect(he+1/w,ce+1/k,ge-2/w,me-2/k)}{const{minX:he,minY:ce,width:ge,height:me}=a;S.strokeStyle="blue",S.strokeRect(he+1/w,ce+1/k,ge-2/w,me-2/k)}}});this.editor=n}setDpr(n){this.dpr=+n.toFixed(2)}static roundedRect(n,e,r,o,a,l,u){if(l<1&&u<1){n.rect(e,r,o,a);return}n.moveTo(e+l,r),n.lineTo(e+o-l,r),n.quadraticCurveTo(e+o,r,e+o,r+u),n.lineTo(e+o,r+a-u),n.quadraticCurveTo(e+o,r+a,e+o-l,r+a),n.lineTo(e+l,r+a),n.quadraticCurveTo(e,r+a,e,r+a-u),n.lineTo(e,r+u),n.quadraticCurveTo(e,r,e+l,r)}static sharpRect(n,e,r,o,a,l,u){n.rect(e,r,o,a)}}function Kpe({shapeFill:t,selectFill:n,viewportFill:e}){const r=Oe(),o=I.useRef(null),a=I.useRef(!1),l=FC(),u=CL("dpr",()=>r.getInstanceState().devicePixelRatio,[r]),d=I.useMemo(()=>r.store.query.records("instance_presence"),[r]),h=I.useMemo(()=>new FS(r),[r]);I.useEffect(()=>{const k=requestAnimationFrame(()=>{const C=getComputedStyle(r.getContainer());h.colors={shapeFill:C.getPropertyValue(t).trim(),selectFill:C.getPropertyValue(n).trim(),viewportFill:C.getPropertyValue(e).trim()},h.render()});return()=>{cancelAnimationFrame(k)}},[r,n,t,e,h,l]);const g=I.useCallback(k=>{if(!r.getCurrentPageShapeIds().size)return;const C=h.minimapScreenPointToPagePoint(k.clientX,k.clientY,!1,!1),E=h.minimapScreenPointToPagePoint(k.clientX,k.clientY,!1,!0);h.originPagePoint.setTo(E),h.originPageCenter.setTo(r.getViewportPageBounds().center),r.centerOnPoint(C,{duration:ed})},[r,h]),v=I.useCallback(k=>{const C=k.currentTarget;if(h0(C,k),!r.getCurrentPageShapeIds().size)return;a.current=!0,h.isInViewport=!1;const E=h.minimapScreenPointToPagePoint(k.clientX,k.clientY,!1,!1),R=h.minimapScreenPointToPagePoint(k.clientX,k.clientY,!1,!0),L=r.getViewportPageBounds();if(h.isInViewport=L.containsPoint(R),h.isInViewport)h.originPagePoint.setTo(R),h.originPageCenter.setTo(L.center);else{const O=N.Sub(L.center,L.point),D=N.Add(E,O);h.originPagePoint.setTo(D),h.originPageCenter.setTo(E),r.centerOnPoint(E,{duration:ed})}function A(O){C&&p0(C,O),a.current=!1,document.body.removeEventListener("pointerup",A)}document.body.addEventListener("pointerup",A)},[r,h]),S=I.useCallback(k=>{const C=h.minimapScreenPointToPagePoint(k.clientX,k.clientY,k.shiftKey,!0);if(a.current){if(h.isInViewport){const A=h.originPagePoint.clone().sub(h.originPageCenter);r.centerOnPoint(N.Sub(C,A));return}r.centerOnPoint(C)}const E=h.getPagePoint(k.clientX,k.clientY),R=r.pageToScreen(E),L={type:"pointer",target:"canvas",name:"pointer_move",...na(k),point:R,isPen:r.getInstanceState().isPenMode};r.dispatch(L)},[r,h]),w=I.useCallback(k=>{const C=i4(k);r.dispatch({type:"wheel",name:"wheel",delta:C,point:new N(k.clientX,k.clientY),shiftKey:k.shiftKey,altKey:k.altKey,ctrlKey:k.metaKey||k.ctrlKey})},[r]);return qh("update when dpr changes",()=>{const k=u.get();h.setDpr(k);const C=o.current,E=C.getBoundingClientRect(),R=E.width*k,L=E.height*k;C.width=R,C.height=L,h.canvasScreenBounds.set(E.x,E.y,R,L),h.cvs=o.current},[u,h]),qh("minimap render when pagebounds or collaborators changes",()=>{const k=r.getCurrentPageShapeIds(),C=r.getCurrentPageBounds(),E=r.getViewportPageBounds();u.get(),h.contentPageBounds=C?Mt.Expand(C,E):E,h.updateContentScreenBounds();const R=[];k.forEach(L=>{let A=r.getShapePageBounds(L);if(!A)return;const O=r.getShapeMask(L);if(O){const D=GP(O,A.corners);if(!D)return;A=Mt.FromPoints(D)}A&&(A.id=L,R.push(A))}),h.pageBounds=R,h.collaborators=d.get(),h.render()},[r,h]),x.jsx("div",{className:"tlui-minimap",children:x.jsx("canvas",{ref:o,className:"tlui-minimap__canvas",onDoubleClick:g,onPointerMove:S,onPointerDown:v,onWheel:w})})}const lP=sr(function(){const n=Oe(),e=In(),r=ul(),o=n.getZoomLevel(),a=n.getCurrentPageShapeIds().size>0,l=n.getSelectedShapeIds().length>0,u=n.getZoomLevel()===1,d=I.useCallback(()=>{n.resetZoom(n.getViewportScreenCenter(),{duration:ed})},[n]);return x.jsxs(Af,{id:"zoom",children:[x.jsx(M0,{children:x.jsx(kt,{type:"icon",title:`${e("navigation-zone.zoom")}`,"data-testid":"minimap.zoom-menu",className:r<5?"tlui-zoom-menu__button":"tlui-zoom-menu__button__pct",onDoubleClick:d,icon:r<4?"zoom-in":void 0,children:r<4?null:x.jsxs("span",{style:{flexGrow:0,textAlign:"center"},children:[Math.floor(o*100),"%"]})})}),x.jsx($f,{side:"top",align:"start",alignOffset:0,children:x.jsxs(ld,{children:[x.jsx(_S,{action:"zoom-in","data-testid":"minimap.zoom-menu.zoom-in",noClose:!0}),x.jsx(_S,{action:"zoom-out","data-testid":"minimap.zoom-menu.zoom-out",noClose:!0}),x.jsx(_S,{action:"zoom-to-100","data-testid":"minimap.zoom-menu.zoom-to-100",noClose:!0,disabled:u}),x.jsx(_S,{action:"zoom-to-fit",disabled:!a,"data-testid":"minimap.zoom-menu.zoom-to-fit",noClose:!0}),x.jsx(_S,{action:"zoom-to-selection",disabled:!l,"data-testid":"minimap.zoom-menu.zoom-to-selection",noClose:!0})]})})]})});function _S(t){const{action:n,disabled:e=!1,noClose:r=!1}=t,o=os();return x.jsx(_a,{type:"menu",label:o[n].label,kbd:o[n].kbd,"data-testid":t["data-testid"],onClick:()=>o[n].onSelect("zoom-menu"),noClose:r,disabled:e})}const Ype=I.memo(function(){const n=os(),e=In(),r=ul(),[o,a]=Vpe("minimap",!0),l=I.useCallback(()=>{a(u=>!u)},[a]);return r<4?null:x.jsxs("div",{className:"tlui-navigation-zone",children:[x.jsx("div",{className:"tlui-buttons__horizontal",children:r<6?x.jsx(lP,{}):o?x.jsxs(x.Fragment,{children:[x.jsx(lP,{}),x.jsx(kt,{type:"icon",icon:o?"chevrons-ne":"chevrons-sw","data-testid":"minimap.toggle",title:e("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle",onClick:l})]}):x.jsxs(x.Fragment,{children:[x.jsx(kt,{type:"icon",icon:"minus","data-testid":"minimap.zoom-out",title:`${e(n["zoom-out"].label)} ${Zc(n["zoom-out"].kbd)}`,onClick:()=>n["zoom-out"].onSelect("navigation-zone")}),x.jsx(lP,{}),x.jsx(kt,{type:"icon",icon:"plus","data-testid":"minimap.zoom-in",title:`${e(n["zoom-in"].label)} ${Zc(n["zoom-in"].kbd)}`,onClick:()=>n["zoom-in"].onSelect("navigation-zone")}),x.jsx(kt,{type:"icon",icon:o?"chevrons-ne":"chevrons-sw","data-testid":"minimap.toggle",title:e("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle",onClick:l})]})}),r>=6&&!o&&x.jsx(Kpe,{viewportFill:"--color-muted-1",selectFill:"--color-selected",shapeFill:"--color-text-3"})]})}),Wpe=sr(function(){const e=Oe().getInstanceState().isPenMode,r=os();if(!e)return null;const o=r["exit-pen-mode"];return x.jsx(kt,{type:"normal",label:o.label,iconLeft:o.icon,onClick:()=>o.onSelect("helper-buttons")})}),Gpe=sr(function(){const n=Oe(),e=os();if(!n.getInstanceState().followingUserId)return null;const r=e["stop-following"];return x.jsx(kt,{type:"normal",label:r.label,iconLeft:r.icon,onClick:()=>r.onSelect("people-menu")})}),Xpe=[oa,Jh,Rm,al];function i7(){const t=Oe();return He("getRelevantStyles",()=>{var r;const n=new XP(t.getSharedStyles()),e=t.getSelectedShapeIds().length>0||!!((r=t.root.getCurrent())!=null&&r.shapeType);if(n.size===0&&t.isIn("select")&&t.getSelectedShapeIds().length===0)for(const o of Xpe)n.applyValue(o,t.getStyleForNextShape(o));return n.size===0&&!e?null:{styles:n,opacity:t.getSharedOpacity()}},[t])}function qpe(t){const{uiType:n,items:e,title:r,style:o,value:a,onValueChange:l}=t,u=Oe(),d=In(),h=I.useRef(!1),{handleButtonClick:g,handleButtonPointerDown:v,handleButtonPointerEnter:S,handleButtonPointerUp:w}=I.useMemo(()=>{const C=()=>{h.current=!1,window.removeEventListener("pointerup",C)};return{handleButtonClick:O=>{const{id:D}=O.currentTarget.dataset;a.type==="shared"&&a.value===D||(u.mark("point picker item"),l(o,D,!1))},handleButtonPointerDown:O=>{const{id:D}=O.currentTarget.dataset;u.mark("point picker item"),l(o,D,!0),h.current=!0,window.addEventListener("pointerup",C)},handleButtonPointerEnter:O=>{if(!h.current)return;const{id:D}=O.currentTarget.dataset;l(o,D,!0)},handleButtonPointerUp:O=>{const{id:D}=O.currentTarget.dataset;l(o,D,!1)}}},[a,u,l,o]),k=He("theme",()=>ns({isDarkMode:u.user.getIsDarkMode()}),[u]);return x.jsx("div",{className:Wt("tlui-buttons__grid"),children:e.map(C=>x.jsx(kt,{type:"icon","data-id":C.value,"data-testid":`style.${n}.${C.value}`,"aria-label":C.value,"data-state":a.type==="shared"&&a.value===C.value?"hinted":void 0,title:r+" — "+d(`${n}-style.${C.value}`),className:Wt("tlui-button-grid__button"),style:o===oa?{color:k[C.value].solid}:void 0,onPointerEnter:S,onPointerDown:v,onPointerUp:w,onClick:g,icon:C.icon},C.value))})}const wm=I.memo(qpe);function o7(t,[n,e]){return Math.min(e,Math.max(n,t))}function Qpe(t){const n=I.useRef({value:t,previous:t});return I.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}const s7=["PageUp","PageDown"],a7=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],l7={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},A0="Slider",[OI,Zpe,Jpe]=eE(A0),[c7,xve]=nu(A0,[Jpe]),[ege,vE]=c7(A0),tge=I.forwardRef((t,n)=>{const{name:e,min:r=0,max:o=100,step:a=1,orientation:l="horizontal",disabled:u=!1,minStepsBetweenThumbs:d=0,defaultValue:h=[r],value:g,onValueChange:v=()=>{},onValueCommit:S=()=>{},inverted:w=!1,...k}=t,[C,E]=I.useState(null),R=Rr(n,te=>E(te)),L=I.useRef(new Set),A=I.useRef(0),O=l==="horizontal",D=C?!!C.closest("form"):!0,z=O?nge:rge,[U=[],Y]=Ff({prop:g,defaultProp:h,onChange:te=>{var he;(he=[...L.current][A.current])===null||he===void 0||he.focus(),v(te)}}),q=I.useRef(U);function X(te){const he=fge(U,te);ae(te,he)}function ie(te){ae(te,A.current)}function pe(){const te=q.current[A.current];U[A.current]!==te&&S(U)}function ae(te,he,{commit:ce}={commit:!1}){const ge=mge(a),me=vge(Math.round((te-r)/a)*a+r,ge),we=o7(me,[r,o]);Y((V=[])=>{const Z=uge(V,we,he);if(gge(Z,d*a)){A.current=Z.indexOf(we);const Ce=String(Z)!==String(V);return Ce&&ce&&S(Z),Ce?Z:V}else return V})}return I.createElement(ege,{scope:t.__scopeSlider,disabled:u,min:r,max:o,valueIndexToChangeRef:A,thumbs:L.current,values:U,orientation:l},I.createElement(OI.Provider,{scope:t.__scopeSlider},I.createElement(OI.Slot,{scope:t.__scopeSlider},I.createElement(z,Ze({"aria-disabled":u,"data-disabled":u?"":void 0},k,{ref:R,onPointerDown:Ct(k.onPointerDown,()=>{u||(q.current=U)}),min:r,max:o,inverted:w,onSlideStart:u?void 0:X,onSlideMove:u?void 0:ie,onSlideEnd:u?void 0:pe,onHomeKeyDown:()=>!u&&ae(r,0,{commit:!0}),onEndKeyDown:()=>!u&&ae(o,U.length-1,{commit:!0}),onStepKeyDown:({event:te,direction:he})=>{if(!u){const me=s7.includes(te.key)||te.shiftKey&&a7.includes(te.key)?10:1,we=A.current,V=U[we],Z=a*me*he;ae(V+Z,we,{commit:!0})}}})))),D&&U.map((te,he)=>I.createElement(cge,{key:he,name:e?e+(U.length>1?"[]":""):void 0,value:te})))}),[u7,d7]=c7(A0,{startEdge:"left",endEdge:"right",size:"width",direction:1}),nge=I.forwardRef((t,n)=>{const{min:e,max:r,dir:o,inverted:a,onSlideStart:l,onSlideMove:u,onSlideEnd:d,onStepKeyDown:h,...g}=t,[v,S]=I.useState(null),w=Rr(n,A=>S(A)),k=I.useRef(),C=dM(o),E=C==="ltr",R=E&&!a||!E&&a;function L(A){const O=k.current||v.getBoundingClientRect(),D=[0,O.width],U=IM(D,R?[e,r]:[r,e]);return k.current=O,U(A-O.left)}return I.createElement(u7,{scope:t.__scopeSlider,startEdge:R?"left":"right",endEdge:R?"right":"left",direction:R?1:-1,size:"width"},I.createElement(f7,Ze({dir:C,"data-orientation":"horizontal"},g,{ref:w,style:{...g.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:A=>{const O=L(A.clientX);l==null||l(O)},onSlideMove:A=>{const O=L(A.clientX);u==null||u(O)},onSlideEnd:()=>{k.current=void 0,d==null||d()},onStepKeyDown:A=>{const D=l7[R?"from-left":"from-right"].includes(A.key);h==null||h({event:A,direction:D?-1:1})}})))}),rge=I.forwardRef((t,n)=>{const{min:e,max:r,inverted:o,onSlideStart:a,onSlideMove:l,onSlideEnd:u,onStepKeyDown:d,...h}=t,g=I.useRef(null),v=Rr(n,g),S=I.useRef(),w=!o;function k(C){const E=S.current||g.current.getBoundingClientRect(),R=[0,E.height],A=IM(R,w?[r,e]:[e,r]);return S.current=E,A(C-E.top)}return I.createElement(u7,{scope:t.__scopeSlider,startEdge:w?"bottom":"top",endEdge:w?"top":"bottom",size:"height",direction:w?1:-1},I.createElement(f7,Ze({"data-orientation":"vertical"},h,{ref:v,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:C=>{const E=k(C.clientY);a==null||a(E)},onSlideMove:C=>{const E=k(C.clientY);l==null||l(E)},onSlideEnd:()=>{S.current=void 0,u==null||u()},onStepKeyDown:C=>{const R=l7[w?"from-bottom":"from-top"].includes(C.key);d==null||d({event:C,direction:R?-1:1})}})))}),f7=I.forwardRef((t,n)=>{const{__scopeSlider:e,onSlideStart:r,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:l,onEndKeyDown:u,onStepKeyDown:d,...h}=t,g=vE(A0,e);return I.createElement(hr.span,Ze({},h,{ref:n,onKeyDown:Ct(t.onKeyDown,v=>{v.key==="Home"?(l(v),v.preventDefault()):v.key==="End"?(u(v),v.preventDefault()):s7.concat(a7).includes(v.key)&&(d(v),v.preventDefault())}),onPointerDown:Ct(t.onPointerDown,v=>{const S=v.target;S.setPointerCapture(v.pointerId),v.preventDefault(),g.thumbs.has(S)?S.focus():r(v)}),onPointerMove:Ct(t.onPointerMove,v=>{v.target.hasPointerCapture(v.pointerId)&&o(v)}),onPointerUp:Ct(t.onPointerUp,v=>{const S=v.target;S.hasPointerCapture(v.pointerId)&&(S.releasePointerCapture(v.pointerId),a(v))})}))}),ige="SliderTrack",oge=I.forwardRef((t,n)=>{const{__scopeSlider:e,...r}=t,o=vE(ige,e);return I.createElement(hr.span,Ze({"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation},r,{ref:n}))}),Q5="SliderRange",sge=I.forwardRef((t,n)=>{const{__scopeSlider:e,...r}=t,o=vE(Q5,e),a=d7(Q5,e),l=I.useRef(null),u=Rr(n,l),d=o.values.length,h=o.values.map(S=>h7(S,o.min,o.max)),g=d>1?Math.min(...h):0,v=100-Math.max(...h);return I.createElement(hr.span,Ze({"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0},r,{ref:u,style:{...t.style,[a.startEdge]:g+"%",[a.endEdge]:v+"%"}}))}),Z5="SliderThumb",age=I.forwardRef((t,n)=>{const e=Zpe(t.__scopeSlider),[r,o]=I.useState(null),a=Rr(n,u=>o(u)),l=I.useMemo(()=>r?e().findIndex(u=>u.ref.current===r):-1,[e,r]);return I.createElement(lge,Ze({},t,{ref:a,index:l}))}),lge=I.forwardRef((t,n)=>{const{__scopeSlider:e,index:r,...o}=t,a=vE(Z5,e),l=d7(Z5,e),[u,d]=I.useState(null),h=Rr(n,E=>d(E)),g=iz(u),v=a.values[r],S=v===void 0?0:h7(v,a.min,a.max),w=dge(r,a.values.length),k=g==null?void 0:g[l.size],C=k?hge(k,S,l.direction):0;return I.useEffect(()=>{if(u)return a.thumbs.add(u),()=>{a.thumbs.delete(u)}},[u,a.thumbs]),I.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${S}% + ${C}px)`}},I.createElement(OI.ItemSlot,{scope:t.__scopeSlider},I.createElement(hr.span,Ze({role:"slider","aria-label":t["aria-label"]||w,"aria-valuemin":a.min,"aria-valuenow":v,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0},o,{ref:h,style:v===void 0?{display:"none"}:t.style,onFocus:Ct(t.onFocus,()=>{a.valueIndexToChangeRef.current=r})}))))}),cge=t=>{const{value:n,...e}=t,r=I.useRef(null),o=Qpe(n);return I.useEffect(()=>{const a=r.current,l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&d){const h=new Event("input",{bubbles:!0});d.call(a,n),a.dispatchEvent(h)}},[o,n]),I.createElement("input",Ze({style:{display:"none"}},e,{ref:r,defaultValue:n}))};function uge(t=[],n,e){const r=[...t];return r[e]=n,r.sort((o,a)=>o-a)}function h7(t,n,e){const a=100/(e-n)*(t-n);return o7(a,[0,100])}function dge(t,n){return n>2?`Value ${t+1} of ${n}`:n===2?["Minimum","Maximum"][t]:void 0}function fge(t,n){if(t.length===1)return 0;const e=t.map(o=>Math.abs(o-n)),r=Math.min(...e);return e.indexOf(r)}function hge(t,n,e){const r=t/2,a=IM([0,50],[0,r]);return(r-a(n)*e)*e}function pge(t){return t.slice(0,-1).map((n,e)=>t[e+1]-n)}function gge(t,n){if(n>0){const e=pge(t);return Math.min(...e)>=n}return!0}function IM(t,n){return e=>{if(t[0]===t[1]||n[0]===n[1])return n[0];const r=(n[1]-n[0])/(t[1]-t[0]);return n[0]+r*(e-t[0])}}function mge(t){return(String(t).split(".")[1]||"").length}function vge(t,n){const e=Math.pow(10,n);return Math.round(t*e)/e}const yge=tge,Sge=oge,bge=sge,wge=age,xge=I.memo(function(n){const{title:e,steps:r,value:o,label:a,onValueChange:l}=n,u=Oe(),d=In(),h=I.useCallback(S=>{l(S[0],!0)},[l]),g=I.useCallback(()=>{u.mark("click slider")},[u]),v=I.useCallback(()=>{o&&l(o,!1)},[o,l]);return x.jsx("div",{className:"tlui-slider__container",children:x.jsxs(yge,{"data-testid":n["data-testid"],className:"tlui-slider","area-label":"Opacity",dir:"ltr",min:0,max:r,step:1,value:o?[o]:void 0,onPointerDown:g,onValueChange:h,onPointerUp:v,title:e+" — "+d(a),children:[x.jsx(Sge,{className:"tlui-slider__track",dir:"ltr",children:o!==null&&x.jsx(bge,{className:"tlui-slider__range",dir:"ltr"})}),o!==null&&x.jsx(wge,{className:"tlui-slider__thumb",dir:"ltr"})]})})}),Cge=I.memo(function({label:n,uiTypeA:e,uiTypeB:r,labelA:o,labelB:a,itemsA:l,itemsB:u,styleA:d,styleB:h,valueA:g,valueB:v,onValueChange:S}){const w=In(),k=I.useMemo(()=>{var E;return((E=l.find(R=>g.type==="shared"&&g.value===R.value))==null?void 0:E.icon)??"mixed"},[l,g]),C=I.useMemo(()=>{var E;return((E=u.find(R=>v.type==="shared"&&v.value===R.value))==null?void 0:E.icon)??"mixed"},[u,v]);return g===void 0&&v===void 0?null:x.jsxs("div",{className:"tlui-style-panel__double-select-picker",children:[x.jsx("div",{title:w(n),className:"tlui-style-panel__double-select-picker-label",children:w(n)}),x.jsxs("div",{className:"tlui-buttons__horizontal",children:[x.jsxs(Af,{id:`style panel ${e} A`,children:[x.jsx(s0,{asChild:!0,onTouchEnd:E=>Un(E),children:x.jsx(kt,{type:"icon","data-testid":`style.${e}`,title:w(o)+" — "+(g===null||g.type==="mixed"?w("style-panel.mixed"):w(`${e}-style.${g.value}`)),icon:k,invertIcon:!0,smallIcon:!0})}),x.jsx($f,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:x.jsx("div",{className:"tlui-buttons__grid",children:l.map(E=>x.jsx(_a,{type:"icon",title:w(o)+" — "+w(`${e}-style.${E.value}`),"data-testid":`style.${e}.${E.value}`,icon:E.icon,onClick:()=>S(d,E.value,!1),invertIcon:!0},E.value))})})]}),x.jsxs(Af,{id:`style panel ${r}`,children:[x.jsx(s0,{asChild:!0,onTouchEnd:E=>Un(E),children:x.jsx(kt,{type:"icon","data-testid":`style.${r}`,title:w(a)+" — "+(v===null||v.type==="mixed"?w("style-panel.mixed"):w(`${r}-style.${v.value}`)),icon:C,smallIcon:!0})}),x.jsx($f,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:x.jsx("div",{className:"tlui-buttons__grid",children:u.map(E=>x.jsx(_a,{type:"icon",title:w(a)+" — "+w(`${r}-style.${E.value}`),"data-testid":`style.${r}.${E.value}`,icon:E.icon,onClick:()=>S(h,E.value,!1)},E.value))})})]})]})]})}),RM=I.memo(function({id:n,label:e,uiType:r,style:o,items:a,type:l,value:u,onValueChange:d}){const h=In(),g=I.useMemo(()=>{var v;return(v=a.find(S=>u.type==="shared"&&S.value===u.value))==null?void 0:v.icon},[a,u]);return x.jsxs(Af,{id:`style panel ${n}`,children:[x.jsx(s0,{asChild:!0,onTouchEnd:v=>Un(v),children:x.jsx(kt,{type:l,"data-testid":`style.${r}`,title:u.type==="mixed"?h("style-panel.mixed"):h(`${r}-style.${u.value}`),label:e,icon:g??"mixed"})}),x.jsx($f,{side:"left",align:"center",alignOffset:0,children:x.jsx("div",{className:"tlui-buttons__grid",children:a.map(v=>x.jsx(_a,{type:"icon","data-testid":`style.${r}.${v.value}`,title:h(`${r}-style.${v.value}`),icon:v.icon,onClick:()=>d(o,v.value,!1)},v.value))})})]})}),Gl={color:[{value:"black",icon:"color"},{value:"grey",icon:"color"},{value:"light-violet",icon:"color"},{value:"violet",icon:"color"},{value:"blue",icon:"color"},{value:"light-blue",icon:"color"},{value:"yellow",icon:"color"},{value:"orange",icon:"color"},{value:"green",icon:"color"},{value:"light-green",icon:"color"},{value:"light-red",icon:"color"},{value:"red",icon:"color"}],fill:[{value:"none",icon:"fill-none"},{value:"semi",icon:"fill-semi"},{value:"solid",icon:"fill-solid"},{value:"pattern",icon:"fill-pattern"}],dash:[{value:"draw",icon:"dash-draw"},{value:"dashed",icon:"dash-dashed"},{value:"dotted",icon:"dash-dotted"},{value:"solid",icon:"dash-solid"}],size:[{value:"s",icon:"size-small"},{value:"m",icon:"size-medium"},{value:"l",icon:"size-large"},{value:"xl",icon:"size-extra-large"}],font:[{value:"draw",icon:"font-draw"},{value:"sans",icon:"font-sans"},{value:"serif",icon:"font-serif"},{value:"mono",icon:"font-mono"}],horizontalAlign:[{value:"start",icon:"text-align-left"},{value:"middle",icon:"text-align-center"},{value:"end",icon:"text-align-right"}],verticalAlign:[{value:"start",icon:"vertical-align-start"},{value:"middle",icon:"vertical-align-center"},{value:"end",icon:"vertical-align-end"}],geo:[{value:"rectangle",icon:"geo-rectangle"},{value:"ellipse",icon:"geo-ellipse"},{value:"cloud",icon:"geo-cloud"},{value:"triangle",icon:"geo-triangle"},{value:"diamond",icon:"geo-diamond"},{value:"pentagon",icon:"geo-pentagon"},{value:"hexagon",icon:"geo-hexagon"},{value:"octagon",icon:"geo-octagon"},{value:"star",icon:"geo-star"},{value:"rhombus",icon:"geo-rhombus"},{value:"rhombus-2",icon:"geo-rhombus-2"},{value:"oval",icon:"geo-oval"},{value:"trapezoid",icon:"geo-trapezoid"},{value:"arrow-right",icon:"geo-arrow-right"},{value:"arrow-left",icon:"geo-arrow-left"},{value:"arrow-up",icon:"geo-arrow-up"},{value:"arrow-down",icon:"geo-arrow-down"},{value:"x-box",icon:"geo-x-box"},{value:"check-box",icon:"geo-check-box"}],arrowheadStart:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],arrowheadEnd:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],spline:[{value:"line",icon:"spline-line"},{value:"cubic",icon:"spline-cubic"}]},p7=function({isMobile:n}){const e=Oe(),r=i7(),o=I.useCallback(()=>{n||e.updateInstanceState({isChangingStyle:!1})},[e,n]);if(!r)return null;const{styles:a,opacity:l}=r,u=a.get(Yc),d=a.get(rC),h=a.get(nC),g=a.get(oC),v=a.get(Xc),S=u===void 0,w=d===void 0&&h===void 0,k=g===void 0,C=v===void 0;return x.jsxs("div",{className:"tlui-style-panel","data-ismobile":n,onPointerLeave:o,children:[x.jsx(Ege,{styles:a,opacity:l}),!C&&x.jsx(_ge,{styles:a}),!(S&&w&&k)&&x.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[x.jsx(Tge,{styles:a}),x.jsx(Pge,{styles:a}),x.jsx(kge,{styles:a})]})]})};function $0(){const t=Oe();return ft.useMemo(()=>function(e,r,o){t.batch(()=>{t.isIn("select")&&t.setStyleForSelectedShapes(e,r,{squashing:o}),t.setStyleForNextShapes(e,r,{squashing:o}),t.updateInstanceState({isChangingStyle:!0})})},[t])}const TS=[.1,.25,.5,.75,1];function Ege({styles:t,opacity:n}){const e=Oe(),r=In(),o=$0(),a=ft.useCallback((S,w)=>{const k=TS[S];e.batch(()=>{e.isIn("select")&&e.setOpacityForSelectedShapes(k,{ephemeral:w}),e.setOpacityForNextShapes(k,{ephemeral:w}),e.updateInstanceState({isChangingStyle:!0})})},[e]),l=t.get(oa),u=t.get(Rm),d=t.get(Jh),h=t.get(al),g=u!==void 0||d!==void 0||h!==void 0,v=n.type==="mixed"?-1:TS.indexOf(oK(TS,S=>Math.abs(S-n.value)));return x.jsxs(x.Fragment,{children:[x.jsxs("div",{tabIndex:-1,className:"tlui-style-panel__section__common","aria-label":"style panel styles",children:[l===void 0?null:x.jsx(wm,{title:r("style-panel.color"),uiType:"color",style:oa,items:Gl.color,value:l,onValueChange:o}),n===void 0?null:x.jsx(xge,{"data-testid":"style.opacity",value:v>=0?v:TS.length-1,label:n.type==="mixed"?"style-panel.mixed":`opacity-style.${n.value}`,onValueChange:a,steps:TS.length-1,title:r("style-panel.opacity")})]}),g&&x.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[u===void 0?null:x.jsx(wm,{title:r("style-panel.fill"),uiType:"fill",style:Rm,items:Gl.fill,value:u,onValueChange:o}),d===void 0?null:x.jsx(wm,{title:r("style-panel.dash"),uiType:"dash",style:Jh,items:Gl.dash,value:d,onValueChange:o}),h===void 0?null:x.jsx(wm,{title:r("style-panel.size"),uiType:"size",style:al,items:Gl.size,value:h,onValueChange:o})]})]})}function _ge({styles:t}){const n=In(),e=$0(),r=t.get(Xc),o=t.get(HS),a=t.get(iC);return r===void 0&&o===void 0?null:x.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel text",children:[r===void 0?null:x.jsx(wm,{title:n("style-panel.font"),uiType:"font",style:Xc,items:Gl.font,value:r,onValueChange:e}),o===void 0?null:x.jsxs("div",{className:"tlui-style-panel__row",children:[x.jsx(wm,{title:n("style-panel.align"),uiType:"align",style:HS,items:Gl.horizontalAlign,value:o,onValueChange:e}),x.jsx("div",{className:"tlui-style-panel__row__extra-button",children:a===void 0?x.jsx(kt,{type:"icon",title:n("style-panel.vertical-align"),"data-testid":"vertical-align",icon:"vertical-align-center",disabled:!0}):x.jsx(RM,{type:"icon",id:"geo-vertical-alignment",uiType:"verticalAlign",style:iC,items:Gl.verticalAlign,value:a,onValueChange:e})})]})]})}function Tge({styles:t}){const n=$0(),e=t.get(Yc);return e===void 0?null:x.jsx(RM,{id:"geo",type:"menu",label:"style-panel.geo",uiType:"geo",style:Yc,items:Gl.geo,value:e,onValueChange:n})}function kge({styles:t}){const n=$0(),e=t.get(oC);return e===void 0?null:x.jsx(RM,{id:"spline",type:"menu",label:"style-panel.spline",uiType:"spline",style:oC,items:Gl.spline,value:e,onValueChange:n})}function Pge({styles:t}){const n=$0(),e=t.get(rC),r=t.get(nC);return!e||!r?null:x.jsx(Cge,{label:"style-panel.arrowheads",uiTypeA:"arrowheadStart",styleA:nC,itemsA:Gl.arrowheadStart,valueA:r,uiTypeB:"arrowheadEnd",styleB:rC,itemsB:Gl.arrowheadEnd,valueB:e,onValueChange:n,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"})}function Ige({toast:t}){const{removeToast:n}=ru(),e=In(),r=a=>{a||n(t.id)},o=t.actions&&t.actions.length>0;return x.jsxs(Ace,{onOpenChange:r,className:"tlui-toast__container",duration:t.keepOpen?1/0:5e3,children:[t.icon&&x.jsx("div",{className:"tlui-toast__icon",children:x.jsx(Ia,{icon:t.icon})}),x.jsxs("div",{className:"tlui-toast__main",children:[x.jsxs("div",{className:"tlui-toast__content",children:[t.title&&x.jsx($ce,{className:"tlui-toast__title",children:t.title}),t.description&&x.jsx(Oce,{className:"tlui-toast__description",children:t.description})]}),t.actions&&x.jsxs("div",{className:"tlui-toast__actions",children:[t.actions.map((a,l)=>x.jsx(Dce,{altText:a.label,asChild:!0,onClick:a.onClick,children:x.jsx(kt,{type:a.type,children:a.label})},l)),x.jsx(_5,{asChild:!0,children:x.jsx(kt,{type:"normal",className:"tlui-toast__close",style:{marginLeft:"auto"},children:t.closeLabel??e("toast.close")})})]})]}),!o&&x.jsx(_5,{asChild:!0,children:x.jsx(kt,{type:"normal",className:"tlui-toast__close",children:t.closeLabel??e("toast.close")})})]})}function Rge(){const{toasts:t}=ru();return x.jsx(x.Fragment,{children:t.map(n=>x.jsx(Ige,{toast:n},n.id))})}const Mge=I.memo(Rge);function Age(){const{toasts:t}=ru(),[n,e]=I.useState(!1);return I.useEffect(()=>{let r=!1;return t.length?e(!0):setTimeout(()=>{r||e(!1)},1e3),()=>{r=!0}},[t.length,e]),n?x.jsx(gce,{className:"tlui-toast__viewport"}):null}function $ge(){const t=Oe(),n=In(),e=i7(),r=e==null?void 0:e.styles.get(oa),o=ns({isDarkMode:t.user.getIsDarkMode()}),a=((r==null?void 0:r.type)==="shared"?o[r.value]:o.black).solid,l=He("isHandOrEraserToolActive",()=>t.isInAny("hand","zoom","eraser","laser"),[t]),u=I.useCallback(d=>{d||t.updateInstanceState({isChangingStyle:!1})},[t]);return x.jsxs(kM,{id:"style menu",onOpenChange:u,children:[x.jsx(PM,{disabled:l,children:x.jsx(kt,{type:"tool","data-testid":"mobile.styles",style:{color:l?"var(--color-muted-1)":a},title:n("style-panel.title"),children:x.jsx(Ia,{icon:l?"blob":(r==null?void 0:r.type)==="mixed"?"mixed":"blob"})})}),x.jsx(Zz,{side:"top",align:"end",children:x.jsx(p7,{isMobile:!0})})]})}const Oge=["select","hand","draw","eraser","text","zoom","laser","highlight"];function Dge({activeToolId:t}){const n=Oe(),e=ul(),r=In(),o=He("is tool locked",()=>n.getInstanceState().isToolLocked,[n]);return!t||Oge.includes(t)?null:x.jsx(kt,{type:"normal",title:r("action.toggle-tool-lock"),className:Wt("tlui-toolbar__lock-button",{"tlui-toolbar__lock-button__mobile":e<5}),icon:o?"lock":"unlock",onClick:()=>n.updateInstanceState({isToolLocked:!o}),smallIcon:!0})}const Lge=I.memo(function(){const n=Oe(),e=In(),r=ul(),o=ft.useRef(void 0),a=cl(),l=efe(),u=l.find(E=>E.toolItem.id==="laser"),d=He("current tool id",()=>n.getCurrentToolId(),[n]),h=He("geo",()=>n.getSharedStyles().getAsKnownValue(Yc),[n]),g=!a,v=E=>E.label?`${e(E.label)} ${E.kbd?Zc(E.kbd):""}`:"",S=l.find(E=>fm(E.toolItem,d,h)),{itemsInPanel:w,itemsInDropdown:k,dropdownFirstItem:C}=ft.useMemo(()=>{const E=[],R=[];let L;const A=Math.min(8,5+r);for(let O=4;O<l.length;O++){const D=l[O];O<A?E.push(D):(D===S&&(L=D),R.push(D))}return L||(o.current||(o.current=R[0]),L=o.current,R.includes(L)||(L=R[0])),o.current=L,R.length<=2&&(E.push(...R),R.length=0),{itemsInPanel:E,itemsInDropdown:R,dropdownFirstItem:L}},[l,S,r]);return x.jsx("div",{className:"tlui-toolbar",children:x.jsxs("div",{className:"tlui-toolbar__inner",children:[x.jsxs("div",{className:"tlui-toolbar__left",children:[!a&&x.jsxs("div",{className:"tlui-toolbar__extras",children:[r<6&&!(d==="hand"||d==="zoom")&&x.jsxs("div",{className:"tlui-toolbar__extras__controls tlui-buttons__horizontal",children:[x.jsx(r7,{}),x.jsx(t7,{}),x.jsx(n7,{}),x.jsx(e7,{}),x.jsx(Jz,{})]}),x.jsx(Dge,{activeToolId:d})]}),x.jsxs("div",{className:Wt("tlui-toolbar__tools",{"tlui-toolbar__tools__mobile":r<5}),children:[l.slice(0,2).map(({toolItem:E})=>x.jsx(kS,{item:E,title:v(E),isSelected:fm(E,d,h)},E.id)),a&&u&&x.jsx(kS,{item:u.toolItem,title:v(u.toolItem),isSelected:fm(u.toolItem,d,h)},u.toolItem.id),g&&x.jsxs(x.Fragment,{children:[l.slice(2,4).map(({toolItem:E})=>x.jsx(kS,{item:E,title:v(E),isSelected:fm(E,d,h)},E.id)),w.map(({toolItem:E})=>x.jsx(kS,{item:E,title:v(E),isSelected:fm(E,d,h)},E.id)),k.length?x.jsxs(x.Fragment,{children:[x.jsx(kS,{item:C.toolItem,title:v(C.toolItem),isSelected:fm(C.toolItem,d,h)},C.toolItem.id),x.jsxs(Af,{id:"toolbar overflow",modal:!1,children:[x.jsx(M0,{children:x.jsx(kt,{className:"tlui-toolbar__overflow",icon:"chevron-up",type:"tool","data-testid":"tools.more",title:e("tool-panel.more")})}),x.jsx($f,{side:"top",align:"center",children:x.jsx(jge,{toolbarItems:k})})]})]}):null]})]})]}),r<5&&!a&&x.jsx("div",{className:"tlui-toolbar__tools",children:x.jsx($ge,{})})]})})}),jge=sr(function({toolbarItems:n}){const e=In();return x.jsx("div",{className:"tlui-buttons__grid",children:n.map(({toolItem:{id:r,meta:o,kbd:a,label:l,onSelect:u,icon:d}})=>x.jsx(_a,{type:"icon",className:"tlui-button-grid__button","data-testid":`tools.more.${r}`,"data-tool":r,"data-geo":(o==null?void 0:o.geo)??"","aria-label":l,onClick:()=>u("toolbar"),title:l?`${e(l)} ${a?Zc(a):""}`:"",icon:d},r))})});function kS({item:t,title:n,isSelected:e}){var r;return x.jsx(kt,{type:"tool","data-testid":`tools.${t.id}`,"data-tool":t.id,"data-geo":((r=t.meta)==null?void 0:r.geo)??"","aria-label":t.label,title:n,icon:t.icon,"data-state":e?"selected":void 0,onClick:()=>t.onSelect("toolbar"),onTouchStart:o=>{Un(o),t.onSelect("toolbar")}})}const fm=(t,n,e)=>{var r,o;return(r=t.meta)!=null&&r.geo?n==="geo"&&e===((o=t.meta)==null?void 0:o.geo):n===t.id};function Nge(){const t=Oe(),{addToast:n}=ru();I.useEffect(()=>{function e({name:r,count:o}){n({title:"Maximum Shapes Reached",description:`You've reached the maximum number of shapes allowed on ${r} (${o}). Please delete some shapes or move to a different page to continue.`})}return t.addListener("max-shapes",e),()=>{t.removeListener("max-shapes",e)}},[t,n])}const cP=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function uP(t,n,e,r){t.addEventListener?t.addEventListener(n,e,r):t.attachEvent&&t.attachEvent("on".concat(n),()=>{e(window.event)})}function g7(t,n){const e=n.slice(0,n.length-1);for(let r=0;r<e.length;r++)e[r]=t[e[r].toLowerCase()];return e}function m7(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");const n=t.split(",");let e=n.lastIndexOf("");for(;e>=0;)n[e-1]+=",",n.splice(e,1),e=n.lastIndexOf("");return n}function zge(t,n){const e=t.length>=n.length?t:n,r=t.length>=n.length?n:t;let o=!0;for(let a=0;a<e.length;a++)r.indexOf(e[a])===-1&&(o=!1);return o}const l0={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":cP?173:189,"=":cP?61:187,";":cP?59:186,"'":222,"[":219,"]":221,"\\":220},eu={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},DI={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Co={16:!1,18:!1,17:!1,91:!1},ni={};for(let t=1;t<20;t++)l0["f".concat(t)]=111+t;let Tr=[],J5=!1,v7="all";const y7=[],O0=t=>l0[t.toLowerCase()]||eu[t.toLowerCase()]||t.toUpperCase().charCodeAt(0),Fge=t=>Object.keys(l0).find(n=>l0[n]===t),Uge=t=>Object.keys(eu).find(n=>eu[n]===t);function S7(t){v7=t||"all"}function c0(){return v7||"all"}function Bge(){return Tr.slice(0)}function Hge(){return Tr.map(t=>Fge(t)||Uge(t)||String.fromCharCode(t))}function Vge(){const t=[];return Object.keys(ni).forEach(n=>{ni[n].forEach(e=>{let{key:r,scope:o,mods:a,shortcut:l}=e;t.push({scope:o,shortcut:l,mods:a,keys:r.split("+").map(u=>O0(u))})})}),t}function Kge(t){const n=t.target||t.srcElement,{tagName:e}=n;let r=!0;return(n.isContentEditable||(e==="INPUT"||e==="TEXTAREA"||e==="SELECT")&&!n.readOnly)&&(r=!1),r}function Yge(t){return typeof t=="string"&&(t=O0(t)),Tr.indexOf(t)!==-1}function Wge(t,n){let e,r;t||(t=c0());for(const o in ni)if(Object.prototype.hasOwnProperty.call(ni,o))for(e=ni[o],r=0;r<e.length;)e[r].scope===t?e.splice(r,1):r++;c0()===t&&S7(n||"all")}function Gge(t){let n=t.keyCode||t.which||t.charCode;const e=Tr.indexOf(n);if(e>=0&&Tr.splice(e,1),t.key&&t.key.toLowerCase()==="meta"&&Tr.splice(0,Tr.length),(n===93||n===224)&&(n=91),n in Co){Co[n]=!1;for(const r in eu)eu[r]===n&&(Xl[r]=!1)}}function b7(t){if(typeof t>"u")Object.keys(ni).forEach(o=>delete ni[o]);else if(Array.isArray(t))t.forEach(o=>{o.key&&dP(o)});else if(typeof t=="object")t.key&&dP(t);else if(typeof t=="string"){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];let[o,a]=e;typeof o=="function"&&(a=o,o=""),dP({key:t,scope:o,method:a,splitKey:"+"})}}const dP=t=>{let{key:n,scope:e,method:r,splitKey:o="+"}=t;m7(n).forEach(l=>{const u=l.split(o),d=u.length,h=u[d-1],g=h==="*"?"*":O0(h);if(!ni[g])return;e||(e=c0());const v=d>1?g7(eu,u):[];ni[g]=ni[g].filter(S=>!((r?S.method===r:!0)&&S.scope===e&&zge(S.mods,v)))})};function eL(t,n,e,r){if(n.element!==r)return;let o;if(n.scope===e||n.scope==="all"){o=n.mods.length>0;for(const a in Co)Object.prototype.hasOwnProperty.call(Co,a)&&(!Co[a]&&n.mods.indexOf(+a)>-1||Co[a]&&n.mods.indexOf(+a)===-1)&&(o=!1);(n.mods.length===0&&!Co[16]&&!Co[18]&&!Co[17]&&!Co[91]||o||n.shortcut==="*")&&(n.keys=[],n.keys=n.keys.concat(Tr),n.method(t,n)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0)))}}function tL(t,n){const e=ni["*"];let r=t.keyCode||t.which||t.charCode;if(!Xl.filter.call(this,t))return;if((r===93||r===224)&&(r=91),Tr.indexOf(r)===-1&&r!==229&&Tr.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach(a=>{const l=DI[a];t[a]&&Tr.indexOf(l)===-1?Tr.push(l):!t[a]&&Tr.indexOf(l)>-1?Tr.splice(Tr.indexOf(l),1):a==="metaKey"&&t[a]&&Tr.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(Tr=Tr.slice(Tr.indexOf(l))))}),r in Co){Co[r]=!0;for(const a in eu)eu[a]===r&&(Xl[a]=!0);if(!e)return}for(const a in Co)Object.prototype.hasOwnProperty.call(Co,a)&&(Co[a]=t[DI[a]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(Tr.indexOf(17)===-1&&Tr.push(17),Tr.indexOf(18)===-1&&Tr.push(18),Co[17]=!0,Co[18]=!0);const o=c0();if(e)for(let a=0;a<e.length;a++)e[a].scope===o&&(t.type==="keydown"&&e[a].keydown||t.type==="keyup"&&e[a].keyup)&&eL(t,e[a],o,n);if(r in ni){for(let a=0;a<ni[r].length;a++)if((t.type==="keydown"&&ni[r][a].keydown||t.type==="keyup"&&ni[r][a].keyup)&&ni[r][a].key){const l=ni[r][a],{splitKey:u}=l,d=l.key.split(u),h=[];for(let g=0;g<d.length;g++)h.push(O0(d[g]));h.sort().join("")===Tr.sort().join("")&&eL(t,l,o,n)}}}function Xge(t){return y7.indexOf(t)>-1}function Xl(t,n,e){Tr=[];const r=m7(t);let o=[],a="all",l=document,u=0,d=!1,h=!0,g="+",v=!1,S=!1;for(e===void 0&&typeof n=="function"&&(e=n),Object.prototype.toString.call(n)==="[object Object]"&&(n.scope&&(a=n.scope),n.element&&(l=n.element),n.keyup&&(d=n.keyup),n.keydown!==void 0&&(h=n.keydown),n.capture!==void 0&&(v=n.capture),typeof n.splitKey=="string"&&(g=n.splitKey),n.single===!0&&(S=!0)),typeof n=="string"&&(a=n),S&&b7(t,a);u<r.length;u++)t=r[u].split(g),o=[],t.length>1&&(o=g7(eu,t)),t=t[t.length-1],t=t==="*"?"*":O0(t),t in ni||(ni[t]=[]),ni[t].push({keyup:d,keydown:h,scope:a,mods:o,shortcut:r[u],method:e,key:r[u],splitKey:g,element:l});typeof l<"u"&&!Xge(l)&&window&&(y7.push(l),uP(l,"keydown",w=>{tL(w,l)},v),J5||(J5=!0,uP(window,"focus",()=>{Tr=[]},v)),uP(l,"keyup",w=>{tL(w,l),Gge(w)},v))}function qge(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(ni).forEach(e=>{ni[e].filter(o=>o.scope===n&&o.shortcut===t).forEach(o=>{o&&o.method&&o.method()})})}const fP={getPressedKeyString:Hge,setScope:S7,getScope:c0,deleteScope:Wge,getPressedKeyCodes:Bge,getAllKeyCodes:Vge,isPressed:Yge,filter:Kge,trigger:qge,unbind:b7,keyMap:l0,modifier:eu,modifierMap:DI};for(const t in fP)Object.prototype.hasOwnProperty.call(fP,t)&&(Xl[t]=fP[t]);if(typeof window<"u"){const t=window.hotkeys;Xl.noConflict=n=>(n&&window.hotkeys===Xl&&(window.hotkeys=t),Xl),window.hotkeys=Xl}const nL=["copy","cut","paste","asset"];function Qge(){const t=Oe(),n=cl(),e=os(),r=uM(),o=He("is focused",()=>t.getInstanceState().isFocused,[t]);I.useEffect(()=>{if(!o)return;const a=t.getContainer();Xl.setScope(t.store.id);const l=(d,h)=>{Xl(d,{element:a,scope:t.store.id},h)},u=()=>t.getIsMenuOpen()||t.getEditingShapeId()!==null||t.getCrashingError();for(const d of Object.values(e))d.kbd&&(n&&!d.readonlyOk||nL.includes(d.id)||l(rL(d.kbd),h=>{u()||(Un(h),d.onSelect("kbd"))}));for(const d of Object.values(r))!d.kbd||!d.readonlyOk&&t.getInstanceState().isReadonly||nL.includes(d.id)||l(rL(d.kbd),h=>{u()||(Un(h),d.onSelect("kbd"))});return()=>{Xl.deleteScope(t.store.id)}},[e,r,n,t,o])}function rL(t){return Zge(t).map(n=>{let e="";const r=n.split("");return r.length===1?e=r[0]:r[0]==="!"?e=`shift+${r[1]}`:r[0]==="?"?r.length===3&&r[1]==="!"?e=`alt+shift+${r[2]}`:e=`alt+${r[1]}`:r[0]==="$"?r[1]==="!"?e=`cmd+shift+${r[2]},ctrl+shift+${r[2]}`:r[1]==="?"?e=`cmd+⌥+${r[2]},ctrl+alt+${r[2]}`:e=`cmd+${r[1]},ctrl+${r[1]}`:e=n,e}).join(",")}function Zge(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");const n=t.split(",");let e=n.lastIndexOf("");for(;e>=0;)n[e-1]+=",",n.splice(e,1),e=n.lastIndexOf("");return n}const Jge=ft.memo(function({shareZone:n,topZone:e,renderDebugMenuItems:r,children:o,hideUi:a,...l}){return x.jsx(ofe,{...l,children:x.jsx(eme,{hideUi:a,shareZone:n,topZone:e,renderDebugMenuItems:r,children:o})})}),eme=ft.memo(function({children:n,hideUi:e,...r}){return x.jsxs(x.Fragment,{children:[n,e?null:x.jsx(tme,{...r})]})}),tme=ft.memo(function({shareZone:n,topZone:e,renderDebugMenuItems:r}){const o=Oe(),a=In(),l=ul(),u=He("isReadonlyMode",()=>o.getInstanceState().isReadonly,[o]),d=He("focus",()=>o.getInstanceState().isFocusMode,[o]),h=He("debug",()=>o.getInstanceState().isDebugMode,[o]);Qge(),Cde(),Nge();const{"toggle-focus-mode":g}=os();return x.jsx(YN,{children:x.jsxs("div",{className:Wt("tlui-layout",{"tlui-layout__mobile":l<5}),"data-breakpoint":l,children:[d?x.jsx("div",{className:"tlui-layout__top",children:x.jsx(kt,{type:"icon",className:"tlui-focus-button",title:`${a("focus-mode.toggle-focus-mode")}`,icon:"dot",onClick:()=>g.onSelect("menu")})}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"tlui-layout__top",children:[x.jsxs("div",{className:"tlui-layout__top__left",children:[x.jsx(Hpe,{}),x.jsxs("div",{className:"tlui-helper-buttons",children:[x.jsx(Wpe,{}),x.jsx(afe,{}),x.jsx(Gpe,{})]})]}),x.jsx("div",{className:"tlui-layout__top__center",children:e}),x.jsxs("div",{className:"tlui-layout__top__right",children:[n,l>=5&&!u&&x.jsx("div",{className:"tlui-style-panel__wrapper",children:x.jsx(p7,{})})]})]}),x.jsxs("div",{className:"tlui-layout__bottom",children:[x.jsxs("div",{className:"tlui-layout__bottom__main",children:[x.jsx(Ype,{}),x.jsx(Lge,{}),l>=4&&x.jsx(_pe,{})]}),h&&x.jsx(ppe,{renderDebugMenuItems:r??null})]})]}),x.jsx(Mge,{}),x.jsx(xpe,{}),x.jsx(Age,{}),x.jsx(Cpe,{})]})})}),w7="ContextMenu",[nme,Cve]=nu(w7,[gE]),iu=gE(),[rme,x7]=nme(w7),ime=t=>{const{__scopeContextMenu:n,children:e,onOpenChange:r,dir:o,modal:a=!0}=t,[l,u]=I.useState(!1),d=iu(n),h=rs(r),g=I.useCallback(v=>{u(v),h(v)},[h]);return I.createElement(rme,{scope:n,open:l,onOpenChange:g,modal:a},I.createElement(Pz,Ze({},d,{dir:o,open:l,onOpenChange:g,modal:a}),e))},ome="ContextMenuTrigger",sme=I.forwardRef((t,n)=>{const{__scopeContextMenu:e,disabled:r=!1,...o}=t,a=x7(ome,e),l=iu(e),u=I.useRef({x:0,y:0}),d=I.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...u.current})}),h=I.useRef(0),g=I.useCallback(()=>window.clearTimeout(h.current),[]),v=S=>{u.current={x:S.clientX,y:S.clientY},a.onOpenChange(!0)};return I.useEffect(()=>g,[g]),I.useEffect(()=>void(r&&g()),[r,g]),I.createElement(I.Fragment,null,I.createElement(Iz,Ze({},l,{virtualRef:d})),I.createElement(hr.span,Ze({"data-state":a.open?"open":"closed","data-disabled":r?"":void 0},o,{ref:n,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:r?t.onContextMenu:Ct(t.onContextMenu,S=>{g(),v(S),S.preventDefault()}),onPointerDown:r?t.onPointerDown:Ct(t.onPointerDown,i1(S=>{g(),h.current=window.setTimeout(()=>v(S),700)})),onPointerMove:r?t.onPointerMove:Ct(t.onPointerMove,i1(g)),onPointerCancel:r?t.onPointerCancel:Ct(t.onPointerCancel,i1(g)),onPointerUp:r?t.onPointerUp:Ct(t.onPointerUp,i1(g))})))}),ame=t=>{const{__scopeContextMenu:n,...e}=t,r=iu(n);return I.createElement(Rz,Ze({},r,e))},lme="ContextMenuContent",cme=I.forwardRef((t,n)=>{const{__scopeContextMenu:e,...r}=t,o=x7(lme,e),a=iu(e),l=I.useRef(!1);return I.createElement(Mz,Ze({},a,r,{ref:n,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:u=>{var d;(d=t.onCloseAutoFocus)===null||d===void 0||d.call(t,u),!u.defaultPrevented&&l.current&&u.preventDefault(),l.current=!1},onInteractOutside:u=>{var d;(d=t.onInteractOutside)===null||d===void 0||d.call(t,u),!u.defaultPrevented&&!o.modal&&(l.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),ume=I.forwardRef((t,n)=>{const{__scopeContextMenu:e,...r}=t,o=iu(e);return I.createElement(Az,Ze({},o,r,{ref:n}))}),dme=I.forwardRef((t,n)=>{const{__scopeContextMenu:e,...r}=t,o=iu(e);return I.createElement($z,Ze({},o,r,{ref:n}))}),fme=I.forwardRef((t,n)=>{const{__scopeContextMenu:e,...r}=t,o=iu(e);return I.createElement(Oz,Ze({},o,r,{ref:n}))}),hme=t=>{const{__scopeContextMenu:n,children:e,onOpenChange:r,open:o,defaultOpen:a}=t,l=iu(n),[u,d]=Ff({prop:o,defaultProp:a,onChange:r});return I.createElement(Dz,Ze({},l,{open:u,onOpenChange:d}),e)},pme=I.forwardRef((t,n)=>{const{__scopeContextMenu:e,...r}=t,o=iu(e);return I.createElement(Lz,Ze({},o,r,{ref:n}))}),gme=I.forwardRef((t,n)=>{const{__scopeContextMenu:e,...r}=t,o=iu(e);return I.createElement(jz,Ze({},o,r,{ref:n,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))});function i1(t){return n=>n.pointerType!=="mouse"?t(n):void 0}const mme=ime,vme=sme,LI=ame,yme=cme,jI=ume,NI=dme,Sme=fme,C7=hme,E7=pme,_7=gme,bme=sr(function(){const n=Oe(),e=is(),r=n.getPages(),o=n.getCurrentPageId(),a=In(),{addToast:l}=ru();return x.jsxs(C7,{children:[x.jsx(E7,{dir:"ltr",asChild:!0,children:x.jsx(kt,{type:"menu",label:"context-menu.move-to-page","data-testid":"menu-item.move-to-page",icon:"chevron-right"})}),x.jsx(LI,{container:e,children:x.jsxs(_7,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:[x.jsx(jI,{dir:"ltr",className:"tlui-menu__group","data-testid":"menu-item.pages",children:r.map(u=>x.jsx(NI,{disabled:o===u.id,onSelect:()=>{n.mark("move_shapes_to_page"),n.moveShapesToPage(n.getSelectedShapeIds(),u.id);const d=n.getPage(u.id);d&&l({title:"Changed Page",description:`Moved to ${d.name}.`,actions:[{label:"Go Back",type:"primary",onClick:()=>{n.mark("change-page"),n.setCurrentPage(o)}}]})},asChild:!0,children:x.jsx(kt,{type:"menu",title:u.name,className:"tlui-context-menu__move-to-page__name",children:x.jsx("span",{className:"tlui-button__label",children:u.name})})},u.id))},"pages"),x.jsx(jI,{dir:"ltr",className:"tlui-menu__group","data-testid":"menu-item.new-page",children:x.jsx(NI,{onSelect:()=>{const u=cd.createId(),d=n.getSelectedShapeIds();n.batch(()=>{n.mark("move_shapes_to_page"),n.createPage({name:a("page-menu.new-page-initial-name"),id:u}),n.moveShapesToPage(d,u)})},asChild:!0,children:x.jsx(kt,{type:"menu",title:a("context.pages.new-page"),className:"tlui-context-menu__move-to-page__name",children:x.jsx("span",{className:"tlui-button__label",children:a("context.pages.new-page")})})},"new-page")},"new-page")]})})]})}),wme=function({children:n}){const e=Oe(),r=z8(),o=I.useCallback(v=>{if(v){if(e.getInstanceState().isCoarsePointer){const S=e.getSelectedShapes(),{inputs:{currentPagePoint:w}}=e,k=e.getShapesAtPoint(w);if(!e.getSelectedShapes().length||!k.some(C=>S.includes(C))){const C=k.filter(E=>e.isShapeOrAncestorLocked(E));C.length&&e.select(...C.map(E=>E.id))}}}else{const S=e.getOnlySelectedShape();S&&e.isShapeOrAncestorLocked(S)&&e.setSelectedShapes([])}},[e]),[a,l]=fp("context menu",o),u=cl(),d=r.length===0||u&&r.every(v=>!v.readonlyOk),g=!He("isSelectToolActive",()=>e.getCurrentToolId()==="select",[e])||d;return x.jsxs(mme,{dir:"ltr",onOpenChange:l,modal:!1,children:[x.jsx(vme,{onContextMenu:g?Un:void 0,dir:"ltr",disabled:g,children:n}),a&&x.jsx(xme,{})]})},xme=I.forwardRef(function(){const n=Oe(),e=In(),r=z8(),[o,a]=fp("context menu sub"),l=cl(),u=ul(),d=is(),[h,g]=I.useState(!1);function v(S,w,k,C){if(!w||l&&!w.readonlyOk)return null;switch(w.type){case"custom":{switch(w.id){case"MOVE_TO_PAGE_MENU":return x.jsx(bme,{},w.id)}break}case"group":return x.jsx(jI,{dir:"ltr",className:Wt("tlui-menu__group",{"tlui-menu__group__small":(k==null?void 0:k.type)==="submenu"}),"data-testid":`menu-item.${w.id}`,children:w.children.map(E=>v(S,E,w,C+1))},w.id);case"submenu":return x.jsxs(C7,{onOpenChange:a,children:[x.jsx(E7,{dir:"ltr",disabled:w.disabled,asChild:!0,children:x.jsx(kt,{type:"menu",label:w.label,"data-testid":`menu-item.${w.id}`,icon:"chevron-right"})}),x.jsx(LI,{container:d,children:x.jsx(_7,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:w.children.map(E=>v(S,E,w,C+1))})})]},w.id);case"item":{if(l&&!w.readonlyOk)return null;const{id:E,checkbox:R,contextMenuLabel:L,label:A,onSelect:O,kbd:D,icon:z}=w.actionItem,U=L??A,Y=U?e(U):void 0;return R?x.jsxs(Sme,{className:"tlui-button tlui-button__menu tlui-button__checkbox",dir:"ltr",disabled:w.disabled,onSelect:q=>{O("context-menu"),Un(q)},title:Y||void 0,checked:w.checked,children:[x.jsx(Ia,{small:!0,icon:w.checked?"check":"checkbox-empty"}),Y&&x.jsx("span",{className:"tlui-button__label",draggable:!1,children:Y}),D&&x.jsx(oE,{children:D})]},E):x.jsx(NI,{dir:"ltr",asChild:!0,children:x.jsx(kt,{type:"menu","data-testid":`menu-item.${E}`,kbd:D,label:U,disabled:w.disabled,iconLeft:u<3&&C>2?z:void 0,onClick:()=>{h?g(!1):O("context-menu")}})},E)}}}return x.jsx(LI,{container:d,children:x.jsx(yme,{className:"tlui-menu scrollable",alignOffset:-4,collisionPadding:4,onContextMenu:Un,children:r.map(S=>v(n,S,null,0))})})}),o1=(t,n)=>{const[e,r]=I.useState(2);return I.useEffect(()=>{const{url:o,style:a="normal",weight:l="500",display:u,featureSettings:d,stretch:h,unicodeRange:g,variant:v}=n;let S=!1;r(2);const w={style:a,weight:l,display:u,featureSettings:d,stretch:h,unicodeRange:g,variant:v},k=new FontFace(t,`url(${o})`,w);return k.load().then(()=>{S||(document.fonts.add(k),r(0))}).catch(C=>{S||(console.error(C),r(1))}),k.$$_url=o,k.$$_fontface=`
@font-face {
	font-family: ${k.family};
	font-stretch: ${k.stretch};
	font-weight: ${k.weight};
	font-style: ${k.style};
	src: url("${o}") format("woff2")
}`,()=>{document.fonts.delete(k),S=!0}},[t,n]),e};function Cme(t){return{draw:{url:t.fonts.draw},serif:{url:t.fonts.serif},sansSerif:{url:t.fonts.sansSerif},monospace:{url:t.fonts.monospace}}}function Eme(t){const n=I.useMemo(()=>Cme(t),[t]),e=[o1("tldraw_draw",n.draw),o1("tldraw_serif",n.serif),o1("tldraw_sans",n.sansSerif),o1("tldraw_mono",n.monospace)];return{error:e.some(r=>r===1),done:!e.some(r=>r===2)}}function _me(t){const{children:n,maxImageDimension:e,maxAssetSize:r,acceptedImageMimeTypes:o,acceptedVideoMimeTypes:a,onMount:l,...u}=t,d=cJ(u.components??{}),h=YD(u.shapeUtils??[]),g=YD(u.tools??[]),v={initialState:"select",...u,components:I.useMemo(()=>({Scribble:H6,CollaboratorScribble:H6,SelectionForeground:Sse,SelectionBackground:vse,Handles:dse,HoveredShapeIndicator:fse,...d}),[d]),shapeUtils:I.useMemo(()=>[...Ale,...h],[h]),tools:I.useMemo(()=>[...Yle,...dae,...g],[g])},S=Lce(u.assetUrls),{done:w,error:k}=Eme(S);return k?x.jsx(oJ,{children:"Could not load assets. Please refresh the page."}):w?x.jsx(tJ,{...v,children:x.jsxs(Jge,{...v,children:[x.jsx(wme,{children:x.jsx(hR,{})}),x.jsx(Tme,{maxImageDimension:e,maxAssetSize:r,acceptedImageMimeTypes:o,acceptedVideoMimeTypes:a,onMount:l}),n]})}):x.jsx(N4,{children:"Loading assets..."})}function Tme({maxImageDimension:t=1e3,maxAssetSize:n=10*1024*1024,acceptedImageMimeTypes:e=["image/jpeg","image/png","image/gif","image/svg+xml"],acceptedVideoMimeTypes:r=["video/mp4","video/quicktime"],onMount:o}){const a=Oe(),l=kme(u=>{const d=[];return d.push(...$le(u)),Zse(u,{maxImageDimension:t,maxAssetSize:n,acceptedImageMimeTypes:e,acceptedVideoMimeTypes:r}),d.push(o==null?void 0:o(u)),()=>{d.forEach(h=>h==null?void 0:h())}});return I.useLayoutEffect(()=>{if(a)return l==null?void 0:l(a)},[a,l]),null}function kme(t){const n=I.useRef();return I.useLayoutEffect(()=>{n.current=t}),I.useDebugValue(t),I.useCallback((...e)=>{const r=n.current;return Qh(r,"fn does not exist"),r(...e)},[])}Ln({tldrawFileFormatVersion:IK,schema:Ln({schemaVersion:Ex,storeVersion:Ex,recordVersions:BP(nn,Ln({version:Ex,subTypeVersions:BP(nn,Ex).optional(),subTypeKey:nn.optional()}))}),records:_s(Ln({id:nn,typeName:nn}).allowUnknownProperties())});function re(t,n={}){const e=typeof t=="string"?t:t.src;if(typeof n=="function")return n(e);const{baseUrl:r=""}=n;return e.startsWith("data:")||e.match(/^https?:\/\//)?e:`${r.replace(/\/$/,"")}/${e.replace(/^\.?\//,"")}`}function Pme(t){return{fonts:{monospace:re("./fonts/IBMPlexMono-Medium.woff2",t),sansSerif:re("./fonts/IBMPlexSans-Medium.woff2",t),serif:re("./fonts/IBMPlexSerif-Medium.woff2",t),draw:re("./fonts/Shantell_Sans-Tldrawish.woff2",t)},icons:{"align-bottom-center":re("./icons/icon/align-bottom-center.svg",t),"align-bottom-left":re("./icons/icon/align-bottom-left.svg",t),"align-bottom-right":re("./icons/icon/align-bottom-right.svg",t),"align-bottom":re("./icons/icon/align-bottom.svg",t),"align-center-center":re("./icons/icon/align-center-center.svg",t),"align-center-horizontal":re("./icons/icon/align-center-horizontal.svg",t),"align-center-left":re("./icons/icon/align-center-left.svg",t),"align-center-right":re("./icons/icon/align-center-right.svg",t),"align-center-vertical":re("./icons/icon/align-center-vertical.svg",t),"align-left":re("./icons/icon/align-left.svg",t),"align-right":re("./icons/icon/align-right.svg",t),"align-top-center":re("./icons/icon/align-top-center.svg",t),"align-top-left":re("./icons/icon/align-top-left.svg",t),"align-top-right":re("./icons/icon/align-top-right.svg",t),"align-top":re("./icons/icon/align-top.svg",t),"arrow-left":re("./icons/icon/arrow-left.svg",t),"arrowhead-arrow":re("./icons/icon/arrowhead-arrow.svg",t),"arrowhead-bar":re("./icons/icon/arrowhead-bar.svg",t),"arrowhead-diamond":re("./icons/icon/arrowhead-diamond.svg",t),"arrowhead-dot":re("./icons/icon/arrowhead-dot.svg",t),"arrowhead-none":re("./icons/icon/arrowhead-none.svg",t),"arrowhead-square":re("./icons/icon/arrowhead-square.svg",t),"arrowhead-triangle-inverted":re("./icons/icon/arrowhead-triangle-inverted.svg",t),"arrowhead-triangle":re("./icons/icon/arrowhead-triangle.svg",t),"aspect-ratio":re("./icons/icon/aspect-ratio.svg",t),avatar:re("./icons/icon/avatar.svg",t),blob:re("./icons/icon/blob.svg",t),"bring-forward":re("./icons/icon/bring-forward.svg",t),"bring-to-front":re("./icons/icon/bring-to-front.svg",t),check:re("./icons/icon/check.svg",t),"checkbox-checked":re("./icons/icon/checkbox-checked.svg",t),"checkbox-empty":re("./icons/icon/checkbox-empty.svg",t),"chevron-down":re("./icons/icon/chevron-down.svg",t),"chevron-left":re("./icons/icon/chevron-left.svg",t),"chevron-right":re("./icons/icon/chevron-right.svg",t),"chevron-up":re("./icons/icon/chevron-up.svg",t),"chevrons-ne":re("./icons/icon/chevrons-ne.svg",t),"chevrons-sw":re("./icons/icon/chevrons-sw.svg",t),"clipboard-copied":re("./icons/icon/clipboard-copied.svg",t),"clipboard-copy":re("./icons/icon/clipboard-copy.svg",t),code:re("./icons/icon/code.svg",t),collab:re("./icons/icon/collab.svg",t),color:re("./icons/icon/color.svg",t),comment:re("./icons/icon/comment.svg",t),"cross-2":re("./icons/icon/cross-2.svg",t),cross:re("./icons/icon/cross.svg",t),"dash-dashed":re("./icons/icon/dash-dashed.svg",t),"dash-dotted":re("./icons/icon/dash-dotted.svg",t),"dash-draw":re("./icons/icon/dash-draw.svg",t),"dash-solid":re("./icons/icon/dash-solid.svg",t),discord:re("./icons/icon/discord.svg",t),"distribute-horizontal":re("./icons/icon/distribute-horizontal.svg",t),"distribute-vertical":re("./icons/icon/distribute-vertical.svg",t),dot:re("./icons/icon/dot.svg",t),"dots-horizontal":re("./icons/icon/dots-horizontal.svg",t),"dots-vertical":re("./icons/icon/dots-vertical.svg",t),"drag-handle-dots":re("./icons/icon/drag-handle-dots.svg",t),duplicate:re("./icons/icon/duplicate.svg",t),edit:re("./icons/icon/edit.svg",t),"external-link":re("./icons/icon/external-link.svg",t),file:re("./icons/icon/file.svg",t),"fill-none":re("./icons/icon/fill-none.svg",t),"fill-pattern":re("./icons/icon/fill-pattern.svg",t),"fill-semi":re("./icons/icon/fill-semi.svg",t),"fill-solid":re("./icons/icon/fill-solid.svg",t),follow:re("./icons/icon/follow.svg",t),following:re("./icons/icon/following.svg",t),"font-draw":re("./icons/icon/font-draw.svg",t),"font-mono":re("./icons/icon/font-mono.svg",t),"font-sans":re("./icons/icon/font-sans.svg",t),"font-serif":re("./icons/icon/font-serif.svg",t),"geo-arrow-down":re("./icons/icon/geo-arrow-down.svg",t),"geo-arrow-left":re("./icons/icon/geo-arrow-left.svg",t),"geo-arrow-right":re("./icons/icon/geo-arrow-right.svg",t),"geo-arrow-up":re("./icons/icon/geo-arrow-up.svg",t),"geo-check-box":re("./icons/icon/geo-check-box.svg",t),"geo-cloud":re("./icons/icon/geo-cloud.svg",t),"geo-diamond":re("./icons/icon/geo-diamond.svg",t),"geo-ellipse":re("./icons/icon/geo-ellipse.svg",t),"geo-hexagon":re("./icons/icon/geo-hexagon.svg",t),"geo-octagon":re("./icons/icon/geo-octagon.svg",t),"geo-oval":re("./icons/icon/geo-oval.svg",t),"geo-pentagon":re("./icons/icon/geo-pentagon.svg",t),"geo-rectangle":re("./icons/icon/geo-rectangle.svg",t),"geo-rhombus-2":re("./icons/icon/geo-rhombus-2.svg",t),"geo-rhombus":re("./icons/icon/geo-rhombus.svg",t),"geo-star":re("./icons/icon/geo-star.svg",t),"geo-trapezoid":re("./icons/icon/geo-trapezoid.svg",t),"geo-triangle":re("./icons/icon/geo-triangle.svg",t),"geo-x-box":re("./icons/icon/geo-x-box.svg",t),github:re("./icons/icon/github.svg",t),group:re("./icons/icon/group.svg",t),hidden:re("./icons/icon/hidden.svg",t),image:re("./icons/icon/image.svg",t),"info-circle":re("./icons/icon/info-circle.svg",t),leading:re("./icons/icon/leading.svg",t),link:re("./icons/icon/link.svg",t),"lock-small":re("./icons/icon/lock-small.svg",t),lock:re("./icons/icon/lock.svg",t),menu:re("./icons/icon/menu.svg",t),minus:re("./icons/icon/minus.svg",t),mixed:re("./icons/icon/mixed.svg",t),pack:re("./icons/icon/pack.svg",t),page:re("./icons/icon/page.svg",t),plus:re("./icons/icon/plus.svg",t),"question-mark-circle":re("./icons/icon/question-mark-circle.svg",t),"question-mark":re("./icons/icon/question-mark.svg",t),redo:re("./icons/icon/redo.svg",t),"reset-zoom":re("./icons/icon/reset-zoom.svg",t),"rotate-ccw":re("./icons/icon/rotate-ccw.svg",t),"rotate-cw":re("./icons/icon/rotate-cw.svg",t),ruler:re("./icons/icon/ruler.svg",t),search:re("./icons/icon/search.svg",t),"send-backward":re("./icons/icon/send-backward.svg",t),"send-to-back":re("./icons/icon/send-to-back.svg",t),"settings-horizontal":re("./icons/icon/settings-horizontal.svg",t),"settings-vertical-1":re("./icons/icon/settings-vertical-1.svg",t),"settings-vertical":re("./icons/icon/settings-vertical.svg",t),"share-1":re("./icons/icon/share-1.svg",t),"share-2":re("./icons/icon/share-2.svg",t),"size-extra-large":re("./icons/icon/size-extra-large.svg",t),"size-large":re("./icons/icon/size-large.svg",t),"size-medium":re("./icons/icon/size-medium.svg",t),"size-small":re("./icons/icon/size-small.svg",t),"spline-cubic":re("./icons/icon/spline-cubic.svg",t),"spline-line":re("./icons/icon/spline-line.svg",t),"stack-horizontal":re("./icons/icon/stack-horizontal.svg",t),"stack-vertical":re("./icons/icon/stack-vertical.svg",t),"status-offline":re("./icons/icon/status-offline.svg",t),"status-online":re("./icons/icon/status-online.svg",t),"stretch-horizontal":re("./icons/icon/stretch-horizontal.svg",t),"stretch-vertical":re("./icons/icon/stretch-vertical.svg",t),"text-align-center":re("./icons/icon/text-align-center.svg",t),"text-align-justify":re("./icons/icon/text-align-justify.svg",t),"text-align-left":re("./icons/icon/text-align-left.svg",t),"text-align-right":re("./icons/icon/text-align-right.svg",t),"tool-arrow":re("./icons/icon/tool-arrow.svg",t),"tool-embed":re("./icons/icon/tool-embed.svg",t),"tool-eraser":re("./icons/icon/tool-eraser.svg",t),"tool-frame":re("./icons/icon/tool-frame.svg",t),"tool-hand":re("./icons/icon/tool-hand.svg",t),"tool-highlight":re("./icons/icon/tool-highlight.svg",t),"tool-laser":re("./icons/icon/tool-laser.svg",t),"tool-line":re("./icons/icon/tool-line.svg",t),"tool-media":re("./icons/icon/tool-media.svg",t),"tool-note":re("./icons/icon/tool-note.svg",t),"tool-pencil":re("./icons/icon/tool-pencil.svg",t),"tool-pointer":re("./icons/icon/tool-pointer.svg",t),"tool-text":re("./icons/icon/tool-text.svg",t),trash:re("./icons/icon/trash.svg",t),"triangle-down":re("./icons/icon/triangle-down.svg",t),"triangle-up":re("./icons/icon/triangle-up.svg",t),twitter:re("./icons/icon/twitter.svg",t),undo:re("./icons/icon/undo.svg",t),ungroup:re("./icons/icon/ungroup.svg",t),"unlock-small":re("./icons/icon/unlock-small.svg",t),unlock:re("./icons/icon/unlock.svg",t),"vertical-align-center":re("./icons/icon/vertical-align-center.svg",t),"vertical-align-end":re("./icons/icon/vertical-align-end.svg",t),"vertical-align-start":re("./icons/icon/vertical-align-start.svg",t),visible:re("./icons/icon/visible.svg",t),"warning-triangle":re("./icons/icon/warning-triangle.svg",t),"zoom-in":re("./icons/icon/zoom-in.svg",t),"zoom-out":re("./icons/icon/zoom-out.svg",t)},translations:{ar:re("./translations/ar.json",t),ca:re("./translations/ca.json",t),cs:re("./translations/cs.json",t),da:re("./translations/da.json",t),de:re("./translations/de.json",t),en:re("./translations/en.json",t),es:re("./translations/es.json",t),fa:re("./translations/fa.json",t),fi:re("./translations/fi.json",t),fr:re("./translations/fr.json",t),gl:re("./translations/gl.json",t),he:re("./translations/he.json",t),"hi-in":re("./translations/hi-in.json",t),hu:re("./translations/hu.json",t),it:re("./translations/it.json",t),ja:re("./translations/ja.json",t),"ko-kr":re("./translations/ko-kr.json",t),ku:re("./translations/ku.json",t),languages:re("./translations/languages.json",t),main:re("./translations/main.json",t),my:re("./translations/my.json",t),ne:re("./translations/ne.json",t),no:re("./translations/no.json",t),pl:re("./translations/pl.json",t),"pt-br":re("./translations/pt-br.json",t),"pt-pt":re("./translations/pt-pt.json",t),ro:re("./translations/ro.json",t),ru:re("./translations/ru.json",t),sv:re("./translations/sv.json",t),te:re("./translations/te.json",t),th:re("./translations/th.json",t),tr:re("./translations/tr.json",t),uk:re("./translations/uk.json",t),vi:re("./translations/vi.json",t),"zh-cn":re("./translations/zh-cn.json",t),"zh-tw":re("./translations/zh-tw.json",t)},embedIcons:{codepen:re("./embed-icons/codepen.png",t),codesandbox:re("./embed-icons/codesandbox.png",t),excalidraw:re("./embed-icons/excalidraw.png",t),felt:re("./embed-icons/felt.png",t),figma:re("./embed-icons/figma.png",t),github_gist:re("./embed-icons/github_gist.png",t),google_calendar:re("./embed-icons/google_calendar.png",t),google_maps:re("./embed-icons/google_maps.png",t),google_slides:re("./embed-icons/google_slides.png",t),observable:re("./embed-icons/observable.png",t),replit:re("./embed-icons/replit.png",t),scratch:re("./embed-icons/scratch.png",t),spotify:re("./embed-icons/spotify.png",t),tldraw:re("./embed-icons/tldraw.png",t),val_town:re("./embed-icons/val_town.png",t),vimeo:re("./embed-icons/vimeo.png",t),youtube:re("./embed-icons/youtube.png",t)}}}class zI extends _m{constructor(){super(...arguments);T(this,"shapeType","linkDoc");T(this,"onDoubleClick",e=>{})}}T(zI,"id","linkDoc"),T(zI,"initial","idle");const Ime=Bn({currentVersion:1,migrators:{1:{up(t){return{...t}},down(t){return{...t}}}}}),Rme=Pi.defineEnum("linkDoc:weight",{defaultValue:"regular",values:["regular","bold"]});Pi.defineEnum("linkDoc:size",{defaultValue:"m",values:["s","m","l","xl"]});const Mme={w:Nt,h:Nt,color:oa,weight:Rme,size:al,docId:nn};async function Ame(t,n){let e=await Wc.fetchSyncPost(t,n);return e.code===0?e.data:null}async function $me(t){return Ame("/api/query/sql",{stmt:t})}async function Ome(t){let n=`select * from blocks where id ='${t}'`;return(await $me(n))[0]}function Dme(t){const[n,e]=I.useState(""),r=I.useRef(),o=t.shape,a=t.theme,l=d=>{Wc.openTab({app:window.siyuan.ws.app,doc:{id:d}})};I.useEffect(()=>{const d=t.docId;Ome(d).then(h=>{const g=h;g.type==="d"&&e(g.content),new Wc.Protyle(window.siyuan.ws.app,r.current,{action:["cb-get-html"],blockId:t.docId,mode:"wysiwyg",render:{background:!1,title:!1,gutter:!1,scroll:!1,breadcrumb:!1,breadcrumbDocName:!1},typewriterMode:!1})})},[]);let u;switch(o.props.size){case"s":u="small";break;case"m":u="medium";break;case"l":u="large";break;case"xl":u="x-large";break;default:u="medium"}return x.jsxs(I.Fragment,{children:[x.jsx("div",{className:"siyuan-doc-card-btn",onClick:()=>l(t.docId),onPointerDown:d=>d.stopPropagation(),children:"打开"}),n&&x.jsx("h3",{style:{marginBottom:"8px",color:a[o.props.color].solid},children:n}),x.jsx("div",{style:{background:"transparent",padding:"12px",overflow:"hidden",userSelect:"none",pointerEvents:"all",cursor:"pointer",backgroundColor:a[o.props.color].semi,fontWeight:o.props.weight,fontSize:u,color:a[o.props.color].solid,height:n?o.props.h-20:o.props.h},ref:r,id:"protyle",onPointerDown:d=>{d.stopPropagation()}})]})}class Y1 extends Pa{constructor(){super(...arguments);T(this,"isAspectRatioLocked",e=>!1);T(this,"canResize",e=>!0);T(this,"canBind",e=>!0);T(this,"onResize",(e,r)=>HC(e,r))}getDefaultProps(){return{w:300,h:300,color:"black",size:"m",weight:"regular",docId:""}}getGeometry(e){return new Qc({width:e.props.w,height:e.props.h,isFilled:!0})}component(e){const r=ns({isDarkMode:this.editor.user.isDarkMode});return x.jsx(ud,{id:e.id,className:"siyuan-doc-card",style:{pointerEvents:"all"},children:x.jsx(Dme,{docId:e.props.docId,shape:e,theme:r})})}indicator(e){return x.jsx("rect",{width:e.props.w,height:e.props.h})}}T(Y1,"type","linkDoc"),T(Y1,"props",Mme),T(Y1,"migrations",Ime);class FI extends _m{constructor(){super(...arguments);T(this,"shapeType","linkText");T(this,"onDoubleClick",e=>{})}}T(FI,"id","linkText"),T(FI,"initial","idle");const Lme=Bn({currentVersion:1,migrators:{1:{up(t){return{...t}},down(t){return{...t}}}}}),jme=Pi.defineEnum("linkText:weight",{defaultValue:"regular",values:["regular","bold"]});Pi.defineEnum("linkText:size",{defaultValue:"m",values:["s","m","l","xl"]});const Nme={w:Nt,h:Nt,color:oa,weight:jme,size:al,docId:nn,text:nn};function zme(t){const n=a=>{Wc.openTab({app:window.siyuan.ws.app,doc:{id:a}})};let e;const r=a=>{e=setTimeout(()=>{bf.plugin.addFloatLayer({ids:[t.docId],defIds:[t.docId],x:a.clientX,y:a.clientY})},1e3)},o=()=>{e&&clearTimeout(e)};return x.jsx(I.Fragment,{children:x.jsx("div",{className:"siyuan-link-card",onClick:()=>n(t.docId),onMouseEnter:a=>r(a),onMouseLeave:()=>o(),onPointerDown:a=>a.stopPropagation(),children:t.text})})}class W1 extends Pa{constructor(){super(...arguments);T(this,"isAspectRatioLocked",e=>!1);T(this,"canResize",e=>!0);T(this,"canBind",e=>!0);T(this,"onResize",(e,r)=>HC(e,r))}getDefaultProps(){return{w:300,h:300,color:"black",size:"m",weight:"regular",docId:"",text:""}}getGeometry(e){return new Qc({width:e.props.w,height:e.props.h,isFilled:!0})}component(e){const r=ns({isDarkMode:this.editor.user.isDarkMode});let o;switch(e.props.size){case"s":o="small";break;case"m":o="medium";break;case"l":o="large";break;case"xl":o="x-large";break;default:o="medium"}return x.jsx(ud,{id:e.id,className:"siyuan-doc-card",style:{padding:"12px",lineHeight:1.2,userSelect:"none",pointerEvents:"all",cursor:"pointer",fontWeight:e.props.weight,fontSize:o,color:r[e.props.color].solid},children:x.jsx(zme,{docId:e.props.docId,text:e.props.text})})}indicator(e){return x.jsx("rect",{width:e.props.w,height:e.props.h})}}T(W1,"type","linkText"),T(W1,"props",Nme),T(W1,"migrations",Lme);const Fme={tools(t,n){return n.linkDoc={id:"linkDoc",icon:"color",label:"linkDoc",kbd:"c",readonlyOk:!1,onSelect:()=>{t.setCurrentTool("linkDoc")}},n.linkText={id:"linkText",icon:"color",label:"linkText",kbd:"c",readonlyOk:!1,onSelect:()=>{t.setCurrentTool("linkText")}},n}},Ume=[Y1,W1],Bme=[zI,FI],iL=/^\{\{select \* from blocks where id=\'(\d+-.+)\'\}\}$/,oL=/^\(\((\d+\-.+) \'(.+)\'\)\)$/,T7=t=>{const n=t.initData,e=t.name,[r,o]=I.useState(null),a=Pme({baseUrl:"/plugins/siyuan-plugin-whiteboard/assets/"}),l=v=>{r||(o(v),Object.keys(n).length&&v.store.loadSnapshot(n),v.store.listen(()=>g(v)),v.registerExternalContentHandler("text",({type:S,point:w,text:k})=>{const C=w??v.getViewportPageCenter();if(S==="text")if(iL.test(k)){const R=iL.exec(k)[1];v.createShape({type:"linkDoc",x:C.x,y:C.y,props:{docId:R}})}else if(oL.test(k)){const E=oL.exec(k),R=E[1];v.createShape({type:"linkText",x:C.x,y:C.y,props:{docId:R,text:E[2]}})}else v.createShape({type:"text",x:C.x,y:C.y,props:{text:k}})}))};let u;function d(v,S){u&&clearTimeout(u),u=setTimeout(()=>v(),S)}function h(v){const S=v.store.getSnapshot();BI(e,S)}function g(v){d(()=>{h(v)},500)}return x.jsx(I.Fragment,{children:x.jsx("div",{className:"whiteboard-component",style:{width:"100%",height:"100%"},children:x.jsx(_me,{onMount:l,persistenceKey:e,assetUrls:a,shapeUtils:Ume,tools:Bme,overrides:Fme})})})};T7.propTypes={el:KI.object.isRequired};const MM=t=>x.jsx(T7,{initData:t.initData,name:t.name,el:t.el});MM.propTypes={el:KI.object.isRequired};function Hme(t){return t.addTab({type:"whiteboard",async init(){this.element.innerHTML='<div class="fn__flex fn__flex-1 fn__flex-column"><div style="border: none" class="whiteboard whiteboard-wrapper fn__flex fn__flex-1"></div></div>';const n=await HI(this.data.name),r=this.element.querySelector(".whiteboard-wrapper").attachShadow({mode:"open"}),o=document.createElement("style");fetch("/plugins/siyuan-plugin-whiteboard/index.css").then(u=>u.text()).then(u=>{o.innerText=u}),document.head.querySelectorAll("link[rel=stylesheet]").forEach(u=>{const d=u.getAttribute("href");if(!d)return;let h;if(d.startsWith("base")&&d.endsWith(".css"))h=window.location.pathname+"/"+d;else if(/^\S+base\.\S+\.css$/.test(d))h=d;else return;fetch(h).then(g=>g.text()).then(g=>{let v=document.createElement("style");v.innerText=g,r.appendChild(v)})}),r.appendChild(o);const a=document.createElement("div");a.style.flex="auto",r.appendChild(a);const l=nd.createRoot(a);l.render(ft.createElement(MM,{initData:n,name:this.data.name,el:this.element})),this.data.destroy=()=>{l&&l.unmount()}},beforeDestroy(){this.data.destroy&&this.data.destroy()}})}async function Vme(t){const n={files:[],plugin:t},e=await cL();e&&(n.files=e);let r;t.addDock({config:{position:"LeftBottom",size:{width:200,height:0},icon:"iconWhiteboard",title:t.i18n.title},data:{files:n.files},type:"WhiteboardDock",init(){r=nd.createRoot(this.element),r.render(ft.createElement(hL,n))}})}class Kme extends Wc.Plugin{constructor(){super(...arguments);T(this,"tab");T(this,"tabs")}onload(){bf.plugin=this,this.tab=null,this.tabs=[],this.addIcons(EV),Vme(this),this.tab=Hme(this);const e=async r=>{var a,l;const o=(l=(a=r.detail)==null?void 0:a.background)==null?void 0:l.ial["custom-whiteboard-id"];if(o){const u=r.detail.contentElement,d=await HI(o);nd.createRoot(u).render(ft.createElement(MM,{initData:d,name:o,el:u}))}};this.eventBus.on("loaded-protyle-dynamic",e),this.eventBus.on("loaded-protyle-static",e)}open(e){const r=Wc.openTab({app:this.app,custom:{icon:"iconWhiteboard",title:e,data:{name:e},id:"siyuan-plugin-whiteboardwhiteboard"}});this.tabs.push({name:e,tab:r})}closeTab(e){const r=this.tabs.find(o=>o.name===e);r&&r.tab.close()}}module.exports=Kme;
