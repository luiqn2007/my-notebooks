"use strict";var Os=Object.defineProperty;var Ss=(t,e,n)=>e in t?Os(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var W=(t,e,n)=>(Ss(t,typeof e!="symbol"?e+"":e,n),n);const Ie=require("siyuan");function oe(){}const Jt=t=>t;function Ki(t){return t()}function Xn(){return Object.create(null)}function ae(t){t.forEach(Ki)}function ct(t){return typeof t=="function"}function je(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let $t;function hn(t,e){return $t||($t=document.createElement("a")),$t.href=e,t===$t.href}function Ls(t){return Object.keys(t).length===0}function Kn(t){return t??""}function Rs(t){return t&&ct(t.destroy)?t.destroy:oe}function Jn(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const Ji=typeof window<"u";let Dn=Ji?()=>window.performance.now():()=>Date.now(),kn=Ji?t=>requestAnimationFrame(t):oe;const ft=new Set;function Qi(t){ft.forEach(e=>{e.c(t)||(ft.delete(e),e.f())}),ft.size!==0&&kn(Qi)}function An(t){let e;return ft.size===0&&kn(Qi),{promise:new Promise(n=>{ft.add(e={c:t,f:n})}),abort(){ft.delete(e)}}}function g(t,e){t.appendChild(e)}function es(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Cs(t){const e=y("style");return Ns(es(t),e),e.sheet}function Ns(t,e){return g(t.head||t,e),e.sheet}function S(t,e,n){t.insertBefore(e,n||null)}function I(t){t.parentNode&&t.parentNode.removeChild(t)}function Qt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function Q(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function z(t){return document.createTextNode(t)}function A(){return z(" ")}function we(){return z("")}function C(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function h(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Me(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function xs(t){return Array.from(t.childNodes)}function ce(t,e){e=""+e,t.data!==e&&(t.data=e)}function Qn(t,e){t.value=e??""}function U(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function ts(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,i,e),s}const zt=new Map;let Ht=0;function $s(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Ms(t,e){const n={stylesheet:Cs(e),rules:{}};return zt.set(t,n),n}function Tn(t,e,n,i,s,o,c,r=0){const a=16.666/i;let u=`{
`;for(let E=0;E<=1;E+=a){const m=e+(n-e)*o(E);u+=E*100+`%{${c(m,1-m)}}
`}const l=u+`100% {${c(n,1-n)}}
}`,d=`__svelte_${$s(l)}_${r}`,f=es(t),{stylesheet:p,rules:_}=zt.get(f)||Ms(f,t);_[d]||(_[d]=!0,p.insertRule(`@keyframes ${d} ${l}`,p.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${d} ${i}ms linear ${s}ms 1 both`,Ht+=1,d}function Bt(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),s=n.length-i.length;s&&(t.style.animation=i.join(", "),Ht-=s,Ht||Gs())}function Gs(){kn(()=>{Ht||(zt.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&I(e)}),zt.clear())})}function js(t,e,n,i){if(!e)return oe;const s=t.getBoundingClientRect();if(e.left===s.left&&e.right===s.right&&e.top===s.top&&e.bottom===s.bottom)return oe;const{delay:o=0,duration:c=300,easing:r=Jt,start:a=Dn()+o,end:u=a+c,tick:l=oe,css:d}=n(t,{from:e,to:s},i);let f=!0,p=!1,_;function v(){d&&(_=Tn(t,0,1,c,o,r,d)),o||(p=!0)}function E(){d&&Bt(t,_),f=!1}return An(m=>{if(!p&&m>=a&&(p=!0),p&&m>=u&&(l(1,0),E()),!f)return!1;if(p){const b=m-a,k=0+1*r(b/c);l(k,1-k)}return!0}),v(),l(0,1),E}function Ps(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:i}=e,s=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=i,Fs(t,s)}}function Fs(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const i=getComputedStyle(t),s=i.transform==="none"?"":i.transform;t.style.transform=`${s} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let At;function kt(t){At=t}function In(){if(!At)throw new Error("Function called outside component initialization");return At}function On(t){In().$$.on_mount.push(t)}function Sn(t){In().$$.on_destroy.push(t)}function en(){const t=In();return(e,n,{cancelable:i=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=ts(e,n,{cancelable:i});return s.slice().forEach(c=>{c.call(t,o)}),!o.defaultPrevented}return!0}}const dt=[],ei=[];let gt=[];const ti=[],zs=Promise.resolve();let pn=!1;function Hs(){pn||(pn=!0,zs.then(ns))}function lt(t){gt.push(t)}const fn=new Set;let ut=0;function ns(){if(ut!==0)return;const t=At;do{try{for(;ut<dt.length;){const e=dt[ut];ut++,kt(e),Bs(e.$$)}}catch(e){throw dt.length=0,ut=0,e}for(kt(null),dt.length=0,ut=0;ei.length;)ei.pop()();for(let e=0;e<gt.length;e+=1){const n=gt[e];fn.has(n)||(fn.add(n),n())}gt.length=0}while(dt.length);for(;ti.length;)ti.pop()();pn=!1,fn.clear(),kt(t)}function Bs(t){if(t.fragment!==null){t.update(),ae(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(lt)}}function Ws(t){const e=[],n=[];gt.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),gt=e}let wt;function is(){return wt||(wt=Promise.resolve(),wt.then(()=>{wt=null})),wt}function Wt(t,e,n){t.dispatchEvent(ts(`${e?"intro":"outro"}${n}`))}const jt=new Set;let Ze;function He(){Ze={r:0,c:[],p:Ze}}function Be(){Ze.r||ae(Ze.c),Ze=Ze.p}function Z(t,e){t&&t.i&&(jt.delete(t),t.i(e))}function X(t,e,n,i){if(t&&t.o){if(jt.has(t))return;jt.add(t),Ze.c.push(()=>{jt.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const ss={duration:0};function os(t,e,n){const i={direction:"in"};let s=e(t,n,i),o=!1,c,r,a=0;function u(){c&&Bt(t,c)}function l(){const{delay:f=0,duration:p=300,easing:_=Jt,tick:v=oe,css:E}=s||ss;E&&(c=Tn(t,0,1,p,f,_,E,a++)),v(0,1);const m=Dn()+f,b=m+p;r&&r.abort(),o=!0,lt(()=>Wt(t,!0,"start")),r=An(k=>{if(o){if(k>=b)return v(1,0),Wt(t,!0,"end"),u(),o=!1;if(k>=m){const O=_((k-m)/p);v(O,1-O)}}return o})}let d=!1;return{start(){d||(d=!0,Bt(t),ct(s)?(s=s(i),is().then(l)):l())},invalidate(){d=!1},end(){o&&(u(),o=!1)}}}function Ln(t,e,n){const i={direction:"out"};let s=e(t,n,i),o=!0,c;const r=Ze;r.r+=1;function a(){const{delay:u=0,duration:l=300,easing:d=Jt,tick:f=oe,css:p}=s||ss;p&&(c=Tn(t,1,0,l,u,d,p));const _=Dn()+u,v=_+l;lt(()=>Wt(t,!1,"start")),An(E=>{if(o){if(E>=v)return f(0,1),Wt(t,!1,"end"),--r.r||ae(r.c),!1;if(E>=_){const m=d((E-_)/l);f(1-m,m)}}return o})}return ct(s)?is().then(()=>{s=s(i),a()}):a(),{end(u){u&&s.tick&&s.tick(1,0),o&&(c&&Bt(t,c),o=!1)}}}function Xe(t,e){X(t,1,1,()=>{e.delete(t.key)})}function Us(t,e){t.f(),Xe(t,e)}function Ke(t,e,n,i,s,o,c,r,a,u,l,d){let f=t.length,p=o.length,_=f;const v={};for(;_--;)v[t[_].key]=_;const E=[],m=new Map,b=new Map,k=[];for(_=p;_--;){const T=d(s,o,_),w=n(T);let D=c.get(w);D?i&&k.push(()=>D.p(T,e)):(D=u(w,T),D.c()),m.set(w,E[_]=D),w in v&&b.set(w,Math.abs(_-v[w]))}const O=new Set,$=new Set;function R(T){Z(T,1),T.m(r,l),c.set(T.key,T),l=T.first,p--}for(;f&&p;){const T=E[p-1],w=t[f-1],D=T.key,P=w.key;T===w?(l=T.first,f--,p--):m.has(P)?!c.has(D)||O.has(D)?R(T):$.has(P)?f--:b.get(D)>b.get(P)?($.add(D),R(T)):(O.add(P),f--):(a(w,c),f--)}for(;f--;){const T=t[f];m.has(T.key)||a(T,c)}for(;p;)R(E[p-1]);return ae(k),E}function Ce(t){t&&t.c()}function Ee(t,e,n,i){const{fragment:s,after_update:o}=t.$$;s&&s.m(e,n),i||lt(()=>{const c=t.$$.on_mount.map(Ki).filter(ct);t.$$.on_destroy?t.$$.on_destroy.push(...c):ae(c),t.$$.on_mount=[]}),o.forEach(lt)}function De(t,e){const n=t.$$;n.fragment!==null&&(Ws(n.after_update),ae(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ys(t,e){t.$$.dirty[0]===-1&&(dt.push(t),Hs(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Pe(t,e,n,i,s,o,c,r=[-1]){const a=At;kt(t);const u=t.$$={fragment:null,ctx:[],props:o,update:oe,not_equal:s,bound:Xn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Xn(),dirty:r,skip_bound:!1,root:e.target||a.$$.root};c&&c(u.root);let l=!1;if(u.ctx=n?n(t,e.props||{},(d,f,...p)=>{const _=p.length?p[0]:f;return u.ctx&&s(u.ctx[d],u.ctx[d]=_)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](_),l&&Ys(t,d)),f}):[],u.update(),l=!0,ae(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const d=xs(e.target);u.fragment&&u.fragment.l(d),d.forEach(I)}else u.fragment&&u.fragment.c();e.intro&&Z(t.$$.fragment),Ee(t,e.target,e.anchor,e.customElement),ns()}kt(a)}class Fe{$destroy(){De(this,1),this.$destroy=oe}$on(e,n){if(!ct(n))return oe;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!Ls(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ls(t){const e=t-1;return e*e*e+1}function Zs(t,{from:e,to:n},i={}){const s=getComputedStyle(t),o=s.transform==="none"?"":s.transform,[c,r]=s.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*c/n.width-(n.left+c),u=e.top+e.height*r/n.height-(n.top+r),{delay:l=0,duration:d=p=>Math.sqrt(p)*120,easing:f=ls}=i;return{delay:l,duration:ct(d)?d(Math.sqrt(a*a+u*u)):d,easing:f,css:(p,_)=>{const v=_*a,E=_*u,m=p+_*e.width/n.width,b=p+_*e.height/n.height;return`transform: ${o} translate(${v}px, ${E}px) scale(${m}, ${b});`}}}const qs="finalize",Vs="consider";function pt(t,e,n){t.dispatchEvent(new CustomEvent(qs,{detail:{items:e,info:n}}))}function Ve(t,e,n){t.dispatchEvent(new CustomEvent(Vs,{detail:{items:e,info:n}}))}const tn="draggedEntered",St="draggedLeft",nn="draggedOverIndex",Rn="draggedLeftDocument",Ut={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function Xs(t,e,n){t.dispatchEvent(new CustomEvent(tn,{detail:{indexObj:e,draggedEl:n}}))}function Ks(t,e,n){t.dispatchEvent(new CustomEvent(St,{detail:{draggedEl:e,type:Ut.LEFT_FOR_ANOTHER,theOtherDz:n}}))}function Js(t,e){t.dispatchEvent(new CustomEvent(St,{detail:{draggedEl:e,type:Ut.OUTSIDE_OF_ANY}}))}function Qs(t,e,n){t.dispatchEvent(new CustomEvent(nn,{detail:{indexObj:e,draggedEl:n}}))}function eo(t){window.dispatchEvent(new CustomEvent(Rn,{detail:{draggedEl:t}}))}const ge={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:tn,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:nn,DRAGGED_LEFT:St,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},pe={POINTER:"pointer",KEYBOARD:"keyboard"},sn="isDndShadowItem",Cn="data-is-dnd-shadow-item-internal",to="data-is-dnd-shadow-item-hint",no="id:dnd-shadow-placeholder-0000",io="dnd-action-dragged-el";let fe="id",_n=0;function rs(){_n++}function cs(){if(_n===0)throw new Error("Bug! trying to decrement when there are no dropzones");_n--}const Nn=typeof window>"u";function as(t){let e;const n=t.getBoundingClientRect(),i=getComputedStyle(t),s=i.transform;if(s){let o,c,r,a;if(s.startsWith("matrix3d("))e=s.slice(9,-1).split(/, /),o=+e[0],c=+e[5],r=+e[12],a=+e[13];else if(s.startsWith("matrix("))e=s.slice(7,-1).split(/, /),o=+e[0],c=+e[3],r=+e[4],a=+e[5];else return n;const u=i.transformOrigin,l=n.x-r-(1-o)*parseFloat(u),d=n.y-a-(1-c)*parseFloat(u.slice(u.indexOf(" ")+1)),f=o?n.width/o:t.offsetWidth,p=c?n.height/c:t.offsetHeight;return{x:l,y:d,width:f,height:p,top:d,right:l+f,bottom:d+p,left:l}}else return n}function us(t){const e=as(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function xn(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function ds(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function so(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function $n(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function Tt(t){return ds(xn(t))}function ni(t,e){const n=Tt(t),i=us(e);return $n(n,i)}function oo(t,e){const n=Tt(t),i=Tt(e);return so(n,i)}function lo(t){const e=xn(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}function ro(t,e){const n=xn(e);return $n(t,n)?{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:Math.min(n.right,document.documentElement.clientWidth)-t.x}:null}let st;function Mn(){st=new Map}Mn();function co(t){st.delete(t)}function ao(t){const e=Array.from(t.children).findIndex(n=>n.getAttribute(Cn));if(e>=0)return st.has(t)||st.set(t,new Map),st.get(t).set(e,us(t.children[e])),e}function uo(t,e){if(!ni(t,e))return null;const n=e.children;if(n.length===0)return{index:0,isProximityBased:!0};const i=ao(e);for(let c=0;c<n.length;c++)if(ni(t,n[c])){const r=st.has(e)&&st.get(e).get(c);return r&&!$n(Tt(t),r)?{index:i,isProximityBased:!1}:{index:c,isProximityBased:!1}}let s=Number.MAX_VALUE,o;for(let c=0;c<n.length;c++){const r=oo(t,n[c]);r<s&&(s=r,o=c)}return{index:o,isProximityBased:!0}}const Et=25;function fs(){let t;function e(){t={directionObj:void 0,stepPx:0}}e();function n(o){const{directionObj:c,stepPx:r}=t;c&&(o.scrollBy(c.x*r,c.y*r),window.requestAnimationFrame(()=>n(o)))}function i(o){return Et-o}function s(o,c){if(!c)return!1;const r=ro(o,c);if(r===null)return e(),!1;const a=!!t.directionObj;let[u,l]=[!1,!1];return c.scrollHeight>c.clientHeight&&(r.bottom<Et?(u=!0,t.directionObj={x:0,y:1},t.stepPx=i(r.bottom)):r.top<Et&&(u=!0,t.directionObj={x:0,y:-1},t.stepPx=i(r.top)),!a&&u)||c.scrollWidth>c.clientWidth&&(r.right<Et?(l=!0,t.directionObj={x:1,y:0},t.stepPx=i(r.right)):r.left<Et&&(l=!0,t.directionObj={x:-1,y:0},t.stepPx=i(r.left)),!a&&l)?(n(c),!0):(e(),!1)}return{scrollIfNeeded:s,resetScrolling:e}}function Mt(t){return JSON.stringify(t,null,2)}function ii(t){if(!t)throw new Error("cannot get depth of a falsy node");return gs(t,0)}function gs(t,e=0){return t.parentElement?gs(t.parentElement,e+1):e-1}function fo(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}function go(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const ho=200,si=10,{scrollIfNeeded:po,resetScrolling:_o}=fs();let mn;function mo(t,e,n=ho){let i,s,o=!1,c;const r=Array.from(e).sort((u,l)=>ii(l)-ii(u));function a(){const u=Tt(t),l=po(u,i);if(!l&&c&&Math.abs(c.x-u.x)<si&&Math.abs(c.y-u.y)<si){mn=window.setTimeout(a,n);return}if(lo(t)){eo(t);return}c=u;let d=!1;for(const f of r){l&&co(i);const p=uo(t,f);if(p===null)continue;const{index:_}=p;d=!0,f!==i?(i&&Ks(i,t,f),Xs(f,p,t),i=f):_!==s&&(Qs(f,p,t),s=_);break}!d&&o&&i?(Js(i,t),i=void 0,s=void 0,o=!1):o=!0,mn=window.setTimeout(a,n)}a()}function vo(){clearTimeout(mn),_o(),Mn()}const yo=300;let Yt;function Zt(t){const e=t.touches?t.touches[0]:t;Yt={x:e.clientX,y:e.clientY}}const{scrollIfNeeded:bo,resetScrolling:wo}=fs();let hs;function ps(){Yt&&bo(Yt,document.documentElement)&&Mn(),hs=window.setTimeout(ps,yo)}function Eo(){window.addEventListener("mousemove",Zt),window.addEventListener("touchmove",Zt),ps()}function Do(){window.removeEventListener("mousemove",Zt),window.removeEventListener("touchmove",Zt),Yt=void 0,window.clearTimeout(hs),wo()}function ko(t){const e=t.cloneNode(!0),n=[],i=t.tagName==="SELECT",s=i?[t]:[...t.querySelectorAll("select")];for(const r of s)n.push(r.value);if(s.length>0){const r=i?[e]:[...e.querySelectorAll("select")];for(let a=0;a<r.length;a++){const u=r[a],l=n[a],d=u.querySelector(`option[value="${l}"`);d&&d.setAttribute("selected",!0)}}const o=t.tagName==="CANVAS",c=o?[t]:[...t.querySelectorAll("canvas")];if(c.length>0){const r=o?[e]:[...e.querySelectorAll("canvas")];for(let a=0;a<r.length;a++){const u=c[a],l=r[a];l.width=u.width,l.height=u.height,l.getContext("2d").drawImage(u,0,0)}}return e}const It=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),Ao={[It.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT]:!1};function _s(t){if(!It[t])throw new Error(`Can't get non existing feature flag ${t}! Supported flags: ${Object.keys(It)}`);return Ao[t]}const To=.2;function Qe(t){return`${t} ${To}s ease`}function Io(t,e){const n=t.getBoundingClientRect(),i=ko(t);ms(t,i),i.id=io,i.style.position="fixed";let s=n.top,o=n.left;if(i.style.top=`${s}px`,i.style.left=`${o}px`,e){const c=ds(n);s-=c.y-e.y,o-=c.x-e.x,window.setTimeout(()=>{i.style.top=`${s}px`,i.style.left=`${o}px`},0)}return i.style.margin="0",i.style.boxSizing="border-box",i.style.height=`${n.height}px`,i.style.width=`${n.width}px`,i.style.transition=`${Qe("top")}, ${Qe("left")}, ${Qe("background-color")}, ${Qe("opacity")}, ${Qe("color")} `,window.setTimeout(()=>i.style.transition+=`, ${Qe("width")}, ${Qe("height")}`,0),i.style.zIndex="9999",i.style.cursor="grabbing",i}function Oo(t){t.style.cursor="grab"}function So(t,e,n,i){ms(e,t);const s=e.getBoundingClientRect(),o=t.getBoundingClientRect(),c=s.width-o.width,r=s.height-o.height;if(c||r){const a={left:(n-o.left)/o.width,top:(i-o.top)/o.height};_s(It.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(t.style.height=`${s.height}px`,t.style.width=`${s.width}px`),t.style.left=`${parseFloat(t.style.left)-a.left*c}px`,t.style.top=`${parseFloat(t.style.top)-a.top*r}px`}}function ms(t,e){const n=window.getComputedStyle(t);Array.from(n).filter(i=>i.startsWith("background")||i.startsWith("padding")||i.startsWith("font")||i.startsWith("text")||i.startsWith("align")||i.startsWith("justify")||i.startsWith("display")||i.startsWith("flex")||i.startsWith("border")||i==="opacity"||i==="color"||i==="list-style-type"||_s(It.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&(i==="width"||i==="height")).forEach(i=>e.style.setProperty(i,n.getPropertyValue(i),n.getPropertyPriority(i)))}function Lo(t,e){t.draggable=!1,t.ondragstart=()=>!1,e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function vs(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function Ro(t){t.style.visibility="hidden",t.setAttribute(Cn,"true")}function Co(t){t.style.visibility="",t.removeAttribute(Cn)}function Pt(t,e=()=>{},n=()=>[]){t.forEach(i=>{const s=e(i);Object.keys(s).forEach(o=>{i.style[o]=s[o]}),n(i).forEach(o=>i.classList.add(o))})}function qt(t,e=()=>{},n=()=>[]){t.forEach(i=>{const s=e(i);Object.keys(s).forEach(o=>{i.style[o]=""}),n(i).forEach(o=>i.classList.contains(o)&&i.classList.remove(o))})}function No(t){const e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");const n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}const xo="--any--",$o=100,Mo=20,oi=3,li={outline:"rgba(255, 255, 102, 0.7) solid 2px"},ri="data-is-dnd-original-dragged-item";let xe,re,me,on,ee,ln,rt,ue,Ye,ye,nt=!1,Gn=!1,jn,Lt=!1,Ft=[];const Le=new Map,ne=new Map,gn=new WeakMap;function Go(t,e){Le.has(e)||Le.set(e,new Set),Le.get(e).has(t)||(Le.get(e).add(t),rs())}function ci(t,e){Le.get(e).delete(t),cs(),Le.get(e).size===0&&Le.delete(e)}function jo(){Eo();const t=Le.get(on);for(const i of t)i.addEventListener(tn,ys),i.addEventListener(St,bs),i.addEventListener(nn,ws);window.addEventListener(Rn,_t);const e=Math.max(...Array.from(t.keys()).map(i=>ne.get(i).dropAnimationDurationMs)),n=e===0?Mo:Math.max(e,$o);mo(re,t,n*1.07)}function Po(){Do();const t=Le.get(on);for(const e of t)e.removeEventListener(tn,ys),e.removeEventListener(St,bs),e.removeEventListener(nn,ws);window.removeEventListener(Rn,_t),vo()}function rn(t){return t.findIndex(e=>!!e[sn])}function Fo(t){return{...t,[sn]:!0,[fe]:no}}function ys(t){let{items:e,dropFromOthersDisabled:n}=ne.get(t.currentTarget);if(n&&t.currentTarget!==ee)return;if(Lt=!1,e=e.filter(c=>c[fe]!==rt[fe]),ee!==t.currentTarget){const r=ne.get(ee).items.filter(a=>!a[sn]);Ve(ee,r,{trigger:ge.DRAGGED_ENTERED_ANOTHER,id:me[fe],source:pe.POINTER})}const{index:i,isProximityBased:s}=t.detail.indexObj,o=s&&i===t.currentTarget.children.length-1?i+1:i;ue=t.currentTarget,e.splice(o,0,rt),Ve(t.currentTarget,e,{trigger:ge.DRAGGED_ENTERED,id:me[fe],source:pe.POINTER})}function bs(t){if(!nt)return;const{items:e,dropFromOthersDisabled:n}=ne.get(t.currentTarget);if(n&&t.currentTarget!==ee&&t.currentTarget!==ue)return;const i=rn(e);i!==-1&&e.splice(i,1),ue=void 0;const{type:s,theOtherDz:o}=t.detail;if(s===Ut.OUTSIDE_OF_ANY||s===Ut.LEFT_FOR_ANOTHER&&o!==ee&&ne.get(o).dropFromOthersDisabled){Lt=!0,ue=ee;const c=ne.get(ee).items;c.splice(ln,0,rt),Ve(ee,c,{trigger:ge.DRAGGED_LEFT_ALL,id:me[fe],source:pe.POINTER})}Ve(t.currentTarget,e,{trigger:ge.DRAGGED_LEFT,id:me[fe],source:pe.POINTER})}function ws(t){const{items:e,dropFromOthersDisabled:n}=ne.get(t.currentTarget);if(n&&t.currentTarget!==ee)return;Lt=!1;const{index:i}=t.detail.indexObj,s=rn(e);s!==-1&&e.splice(s,1),e.splice(i,0,rt),Ve(t.currentTarget,e,{trigger:ge.DRAGGED_OVER_INDEX,id:me[fe],source:pe.POINTER})}function Vt(t){t.preventDefault();const e=t.touches?t.touches[0]:t;ye={x:e.clientX,y:e.clientY},re.style.transform=`translate3d(${ye.x-Ye.x}px, ${ye.y-Ye.y}px, 0)`}function _t(){Gn=!0,window.removeEventListener("mousemove",Vt),window.removeEventListener("touchmove",Vt),window.removeEventListener("mouseup",_t),window.removeEventListener("touchend",_t),Po(),Oo(re),ue||(ue=ee);let{items:t,type:e}=ne.get(ue);qt(Le.get(e),s=>ne.get(s).dropTargetStyle,s=>ne.get(s).dropTargetClasses);let n=rn(t);n===-1&&(ue===ee?n=ln:ue.children.length>0&&(n=ue.children.length-1)),t=t.map(s=>s[sn]?me:s);function i(){jn(),pt(ue,t,{trigger:Lt?ge.DROPPED_OUTSIDE_OF_ANY:ge.DROPPED_INTO_ZONE,id:me[fe],source:pe.POINTER}),ue!==ee&&pt(ee,ne.get(ee).items,{trigger:ge.DROPPED_INTO_ANOTHER,id:me[fe],source:pe.POINTER}),n!==-1&&Co(ue.children[n]),Bo()}n!==-1&&zo(n,i)}function zo(t,e){const n=as(ue.children[t]),i={x:n.left-parseFloat(re.style.left),y:n.top-parseFloat(re.style.top)},{dropAnimationDurationMs:s}=ne.get(ue),o=`transform ${s}ms ease`;re.style.transition=re.style.transition?re.style.transition+","+o:o,re.style.transform=`translate3d(${i.x}px, ${i.y}px, 0)`,window.setTimeout(e,s)}function Ho(t,e){Ft.push({dz:t,destroy:e}),window.requestAnimationFrame(()=>{vs(t),document.body.appendChild(t)})}function Bo(){re.remove(),xe.remove(),Ft.length&&(Ft.forEach(({dz:t,destroy:e})=>{e(),t.remove()}),Ft=[]),re=void 0,xe=void 0,me=void 0,on=void 0,ee=void 0,ln=void 0,rt=void 0,ue=void 0,Ye=void 0,ye=void 0,nt=!1,Gn=!1,jn=void 0,Lt=!1}function Wo(t,e){let n=!1;const i={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:li,dropTargetClasses:[],transformDraggedElement:()=>{},centreDraggedOnCursor:!1};let s=new Map;function o(){window.addEventListener("mousemove",a,{passive:!1}),window.addEventListener("touchmove",a,{passive:!1,capture:!1}),window.addEventListener("mouseup",r,{passive:!1}),window.addEventListener("touchend",r,{passive:!1})}function c(){window.removeEventListener("mousemove",a),window.removeEventListener("touchmove",a),window.removeEventListener("mouseup",r),window.removeEventListener("touchend",r)}function r(){c(),xe=void 0,Ye=void 0,ye=void 0}function a(f){f.preventDefault();const p=f.touches?f.touches[0]:f;ye={x:p.clientX,y:p.clientY},(Math.abs(ye.x-Ye.x)>=oi||Math.abs(ye.y-Ye.y)>=oi)&&(c(),l())}function u(f){if(f.target!==f.currentTarget&&(f.target.value!==void 0||f.target.isContentEditable)||f.button||nt)return;f.stopPropagation();const p=f.touches?f.touches[0]:f;Ye={x:p.clientX,y:p.clientY},ye={...Ye},xe=f.currentTarget,o()}function l(){nt=!0;const f=s.get(xe);ln=f,ee=xe.parentElement;const p=ee.closest("dialog")||ee.getRootNode(),_=p.body||p,{items:v,type:E,centreDraggedOnCursor:m}=i;me=v[f],on=E,rt=Fo(me),re=Io(xe,m&&ye),xe.setAttribute(ri,!0);function b(){re.parentElement?window.requestAnimationFrame(b):(_.appendChild(re),re.focus(),jo(),vs(xe),_.appendChild(xe))}window.requestAnimationFrame(b),Pt(Array.from(Le.get(i.type)).filter(k=>k===ee||!ne.get(k).dropFromOthersDisabled),k=>ne.get(k).dropTargetStyle,k=>ne.get(k).dropTargetClasses),v.splice(f,1,rt),jn=No(ee),Ve(ee,v,{trigger:ge.DRAG_STARTED,id:me[fe],source:pe.POINTER}),window.addEventListener("mousemove",Vt,{passive:!1}),window.addEventListener("touchmove",Vt,{passive:!1,capture:!1}),window.addEventListener("mouseup",_t,{passive:!1}),window.addEventListener("touchend",_t,{passive:!1})}function d({items:f=void 0,flipDurationMs:p=0,type:_=xo,dragDisabled:v=!1,morphDisabled:E=!1,dropFromOthersDisabled:m=!1,dropTargetStyle:b=li,dropTargetClasses:k=[],transformDraggedElement:O=()=>{},centreDraggedOnCursor:$=!1}){i.dropAnimationDurationMs=p,i.type&&_!==i.type&&ci(t,i.type),i.type=_,i.items=[...f],i.dragDisabled=v,i.morphDisabled=E,i.transformDraggedElement=O,i.centreDraggedOnCursor=$,n&&nt&&!Gn&&(!fo(b,i.dropTargetStyle)||!go(k,i.dropTargetClasses))&&(qt([t],()=>i.dropTargetStyle,()=>k),Pt([t],()=>b,()=>k)),i.dropTargetStyle=b,i.dropTargetClasses=[...k];function R(w,D){return ne.get(w)?ne.get(w)[D]:i[D]}n&&nt&&i.dropFromOthersDisabled!==m&&(m?qt([t],w=>R(w,"dropTargetStyle"),w=>R(w,"dropTargetClasses")):Pt([t],w=>R(w,"dropTargetStyle"),w=>R(w,"dropTargetClasses"))),i.dropFromOthersDisabled=m,ne.set(t,i),Go(t,_);const T=rn(i.items);for(let w=0;w<t.children.length;w++){const D=t.children[w];if(Lo(D,v),w===T){i.transformDraggedElement(re,me,w),E||So(re,D,ye.x,ye.y),Ro(D);continue}D.removeEventListener("mousedown",gn.get(D)),D.removeEventListener("touchstart",gn.get(D)),v||(D.addEventListener("mousedown",u),D.addEventListener("touchstart",u),gn.set(D,u)),s.set(D,w),n||(n=!0)}}return d(e),{update:f=>{d(f)},destroy:()=>{function f(){ci(t,ne.get(t).type),ne.delete(t)}nt&&!t.closest(`[${ri}]`)?Ho(t,f):f()}}}const vn={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},Es={[vn.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[vn.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"},Uo="dnd-action-aria-alert";let te;function yn(){te||(te=document.createElement("div"),function(){te.id=Uo,te.style.position="fixed",te.style.bottom="0",te.style.left="0",te.style.zIndex="-5",te.style.opacity="0",te.style.height="0",te.style.width="0",te.setAttribute("role","alert")}(),document.body.prepend(te),Object.entries(Es).forEach(([t,e])=>document.body.prepend(qo(t,e))))}function Yo(){return Nn?null:(document.readyState==="complete"?yn():window.addEventListener("DOMContentLoaded",yn),{...vn})}function Zo(){Nn||!te||(Object.keys(Es).forEach(t=>{var e;return(e=document.getElementById(t))==null?void 0:e.remove()}),te.remove(),te=void 0)}function qo(t,e){const n=document.createElement("div");return n.id=t,n.innerHTML=`<p>${e}</p>`,n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}function ht(t){if(Nn)return;te||yn(),te.innerHTML="";const e=document.createTextNode(t);te.appendChild(e),te.style.display="none",te.style.display="inline"}const Vo="--any--",ai={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let be=!1,bn,de,ot="",tt,$e,qe="";const Xt=new WeakSet,ui=new WeakMap,di=new WeakMap,wn=new Map,le=new Map,Oe=new Map;let Kt;function Xo(t,e){Oe.size===0&&(Kt=Yo(),window.addEventListener("keydown",Ds),window.addEventListener("click",ks)),Oe.has(e)||Oe.set(e,new Set),Oe.get(e).has(t)||(Oe.get(e).add(t),rs())}function fi(t,e){de===t&&Ot(),Oe.get(e).delete(t),cs(),Oe.get(e).size===0&&Oe.delete(e),Oe.size===0&&(window.removeEventListener("keydown",Ds),window.removeEventListener("click",ks),Kt=void 0,Zo())}function Ds(t){if(be)switch(t.key){case"Escape":{Ot();break}}}function ks(){be&&(Xt.has(document.activeElement)||Ot())}function Ko(t){if(!be)return;const e=t.currentTarget;if(e===de)return;ot=e.getAttribute("aria-label")||"";const{items:n}=le.get(de),i=n.find(u=>u[fe]===$e),s=n.indexOf(i),o=n.splice(s,1)[0],{items:c,autoAriaDisabled:r}=le.get(e);e.getBoundingClientRect().top<de.getBoundingClientRect().top||e.getBoundingClientRect().left<de.getBoundingClientRect().left?(c.push(o),r||ht(`Moved item ${qe} to the end of the list ${ot}`)):(c.unshift(o),r||ht(`Moved item ${qe} to the beginning of the list ${ot}`)),pt(de,n,{trigger:ge.DROPPED_INTO_ANOTHER,id:$e,source:pe.KEYBOARD}),pt(e,c,{trigger:ge.DROPPED_INTO_ZONE,id:$e,source:pe.KEYBOARD}),de=e}function As(){wn.forEach(({update:t},e)=>t(le.get(e)))}function Ot(t=!0){le.get(de).autoAriaDisabled||ht(`Stopped dragging item ${qe}`),Xt.has(document.activeElement)&&document.activeElement.blur(),t&&Ve(de,le.get(de).items,{trigger:ge.DRAG_STOPPED,id:$e,source:pe.KEYBOARD}),qt(Oe.get(bn),e=>le.get(e).dropTargetStyle,e=>le.get(e).dropTargetClasses),tt=null,$e=null,qe="",bn=null,de=null,ot="",be=!1,As()}function Jo(t,e){const n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:ai,dropTargetClasses:[],autoAriaDisabled:!1};function i(l,d,f){l.length<=1||l.splice(f,1,l.splice(d,1,l[f])[0])}function s(l){switch(l.key){case"Enter":case" ":{if((l.target.disabled!==void 0||l.target.href||l.target.isContentEditable)&&!Xt.has(l.target))return;l.preventDefault(),l.stopPropagation(),be?Ot():o(l);break}case"ArrowDown":case"ArrowRight":{if(!be)return;l.preventDefault(),l.stopPropagation();const{items:d}=le.get(t),f=Array.from(t.children),p=f.indexOf(l.currentTarget);p<f.length-1&&(n.autoAriaDisabled||ht(`Moved item ${qe} to position ${p+2} in the list ${ot}`),i(d,p,p+1),pt(t,d,{trigger:ge.DROPPED_INTO_ZONE,id:$e,source:pe.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!be)return;l.preventDefault(),l.stopPropagation();const{items:d}=le.get(t),p=Array.from(t.children).indexOf(l.currentTarget);p>0&&(n.autoAriaDisabled||ht(`Moved item ${qe} to position ${p} in the list ${ot}`),i(d,p,p-1),pt(t,d,{trigger:ge.DROPPED_INTO_ZONE,id:$e,source:pe.KEYBOARD}));break}}}function o(l){r(l.currentTarget),de=t,bn=n.type,be=!0;const d=Array.from(Oe.get(n.type)).filter(f=>f===de||!le.get(f).dropFromOthersDisabled);if(Pt(d,f=>le.get(f).dropTargetStyle,f=>le.get(f).dropTargetClasses),!n.autoAriaDisabled){let f=`Started dragging item ${qe}. Use the arrow keys to move it within its list ${ot}`;d.length>1&&(f+=", or tab to another list in order to move the item into it"),ht(f)}Ve(t,le.get(t).items,{trigger:ge.DRAG_STARTED,id:$e,source:pe.KEYBOARD}),As()}function c(l){be&&l.currentTarget!==tt&&(l.stopPropagation(),Ot(!1),o(l))}function r(l){const{items:d}=le.get(t),f=Array.from(t.children),p=f.indexOf(l);tt=l,tt.tabIndex=n.zoneItemTabIndex,$e=d[p][fe],qe=f[p].getAttribute("aria-label")||""}function a({items:l=[],type:d=Vo,dragDisabled:f=!1,zoneTabIndex:p=0,zoneItemTabIndex:_=0,dropFromOthersDisabled:v=!1,dropTargetStyle:E=ai,dropTargetClasses:m=[],autoAriaDisabled:b=!1}){n.items=[...l],n.dragDisabled=f,n.dropFromOthersDisabled=v,n.zoneTabIndex=p,n.zoneItemTabIndex=_,n.dropTargetStyle=E,n.dropTargetClasses=m,n.autoAriaDisabled=b,n.type&&d!==n.type&&fi(t,n.type),n.type=d,Xo(t,d),b||(t.setAttribute("aria-disabled",f),t.setAttribute("role","list"),t.setAttribute("aria-describedby",f?Kt.DND_ZONE_DRAG_DISABLED:Kt.DND_ZONE_ACTIVE)),le.set(t,n),be?t.tabIndex=t===de||tt.contains(t)||n.dropFromOthersDisabled||de&&n.type!==le.get(de).type?-1:0:t.tabIndex=n.zoneTabIndex,t.addEventListener("focus",Ko);for(let k=0;k<t.children.length;k++){const O=t.children[k];Xt.add(O),O.tabIndex=be?-1:n.zoneItemTabIndex,b||O.setAttribute("role","listitem"),O.removeEventListener("keydown",ui.get(O)),O.removeEventListener("click",di.get(O)),f||(O.addEventListener("keydown",s),ui.set(O,s),O.addEventListener("click",c),di.set(O,c)),be&&n.items[k][fe]===$e&&(tt=O,tt.tabIndex=n.zoneItemTabIndex,O.focus())}}a(e);const u={update:l=>{a(l)},destroy:()=>{fi(t,n.type),le.delete(t),wn.delete(t)}};return wn.set(t,u),u}function Qo(t,e){if(el(t))return{update:()=>{},destroy:()=>{}};gi(e);const n=Wo(t,e),i=Jo(t,e);return{update:s=>{gi(s),n.update(s),i.update(s)},destroy:()=>{n.destroy(),i.destroy()}}}function el(t){return!!t.closest(`[${to}="true"]`)}function gi(t){const{items:e,flipDurationMs:n,type:i,dragDisabled:s,morphDisabled:o,dropFromOthersDisabled:c,zoneTabIndex:r,zoneItemTabIndex:a,dropTargetStyle:u,dropTargetClasses:l,transformDraggedElement:d,autoAriaDisabled:f,centreDraggedOnCursor:p,..._}=t;if(Object.keys(_).length>0&&console.warn("dndzone will ignore unknown options",_),!e)throw new Error("no 'items' key provided to dndzone");const v=e.find(E=>!{}.hasOwnProperty.call(E,fe));if(v)throw new Error(`missing '${fe}' property for item ${Mt(v)}`);if(l&&!Array.isArray(l))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof l}, ${Mt(l)}`);if(r&&!hi(r))throw new Error(`zoneTabIndex should be a number but instead it is a ${typeof r}, ${Mt(r)}`);if(a&&!hi(a))throw new Error(`zoneItemTabIndex should be a number but instead it is a ${typeof a}, ${Mt(a)}`)}function hi(t){return!isNaN(t)&&function(e){return(e|0)===e}(parseFloat(t))}function tl(t){let e,n=pi(t[1])+"",i;return{c(){e=y("span"),i=z(n),h(e,"class","emoji-unicode svelte-u9knhy"),U(e,"font-size",t[2]+"px")},m(s,o){S(s,e,o),g(e,i)},p(s,o){o&2&&n!==(n=pi(s[1])+"")&&ce(i,n),o&4&&U(e,"font-size",s[2]+"px")},d(s){s&&I(e)}}}function nl(t){let e,n;return{c(){e=Q("svg"),n=Q("use"),Me(n,"xlink:href",t[1]),U(e,"margin","5px")},m(i,s){S(i,e,s),g(e,n)},p(i,s){s&2&&Me(n,"xlink:href",i[1])},d(i){i&&I(e)}}}function il(t){let e,n;return{c(){e=y("img"),h(e,"class",""),hn(e.src,n="/emojis/"+t[1])||h(e,"src",n),h(e,"alt",""),U(e,"width","75%")},m(i,s){S(i,e,s)},p(i,s){s&2&&!hn(e.src,n="/emojis/"+i[1])&&h(e,"src",n)},d(i){i&&I(e)}}}function sl(t){let e;function n(o,c){return o[0]==="custom"?il:o[0]==="#icon"?nl:tl}let i=n(t),s=i(t);return{c(){e=y("div"),s.c(),h(e,"class","emoji-div svelte-u9knhy"),h(e,"style",t[3])},m(o,c){S(o,e,c),s.m(e,null)},p(o,[c]){i===(i=n(o))&&s?s.p(o,c):(s.d(1),s=i(o),s&&(s.c(),s.m(e,null))),c&8&&h(e,"style",o[3])},i:oe,o:oe,d(o){o&&I(e),s.d()}}}function pi(t){try{return String.fromCodePoint(parseInt(t,16))}catch{return""}}function ol(t,e,n){let{type:i}=e,{code:s}=e,{width:o=null}=e,{unicodeFontSize:c=30}=e,r="";return t.$$set=a=>{"type"in a&&n(0,i=a.type),"code"in a&&n(1,s=a.code),"width"in a&&n(4,o=a.width),"unicodeFontSize"in a&&n(2,c=a.unicodeFontSize)},t.$$.update=()=>{t.$$.dirty&16&&o&&(typeof o=="number"?n(3,r=`width: ${o}px; height: ${o}px;`):n(3,r=`width: ${o}; height: ${o};`))},[i,s,c,r,o]}class Pn extends Fe{constructor(e){super(),Pe(this,e,ol,sl,je,{type:0,code:1,width:4,unicodeFontSize:2})}}let ie;const ll=t=>{ie=t};function mt(t){if(t<0)return"--:--:--";t=Math.round(t);let e=Math.floor(t/3600),n=Math.floor(t%3600/60),i=t%60,s=[];return s.push(e.toString().padStart(2,"0")),s.push(n.toString().padStart(2,"0")),s.push(i.toString().padStart(2,"0")),s.join(":")}function Ge(t){let e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate();return`${e}-${n.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}`}function rl(t){return Ge(new Date(t))}let Y,cl=t=>{Y=t};function al(t,e="",n){let i=`
    <div class="b3-form__icon">
        <svg class="b3-form__icon-icon"><use xlink:href="#iconEdit"></use></svg>
        <input
            class="b3-text-field fn__block b3-form__icon-input"
            id="input-text" value="${e}" placeholder="${n||""}"
        />
    </div>
    `;return new Promise((s,o)=>{Ie.confirm(t,i,c=>{let r=c.element.querySelector("#input-text");s(r.value)},()=>{o()})})}const _i=window.siyuan,ul=(t,e,n,i)=>{const s=new Ie.Dialog({title:t,content:`<div class="b3-dialog__content">
    <div class="ft__breakword">${e}</div>
</div>
<div class="b3-dialog__action">
    <button class="b3-button b3-button--cancel">${_i.languages.cancel}</button><div class="fn__space"></div>
    <button class="b3-button b3-button--text" id="confirmDialogConfirmBtn">${_i.languages.confirm}</button>
</div>`,width:"520px"}),o=s.element.querySelector(".b3-dialog__content>div.ft__breakword"),c=s.element.querySelectorAll(".b3-button");return c[0].addEventListener("click",()=>{i&&i(o),s.destroy()}),c[1].addEventListener("click",()=>{n&&n(o),s.destroy()}),s};let Gt=class{constructor(e){W(this,"id");W(this,"emoji");W(this,"title");W(this,"isGroup");W(this,"groupId");let n=Date.now()-16725312e5;this.id=e.id??`#${n.toString(36).toUpperCase()}`,this.emoji=e.emoji,this.title=e.title,this.isGroup=e.isGroup??!1,this.groupId=e.groupId??""}dump(){return{id:this.id,emoji:this.emoji,title:this.title,isGroup:this.isGroup===!0?!0:void 0,groupId:this.groupId!==""?this.groupId:void 0}}};const dl=[{id:"#001",emoji:{type:"objects",code:"1f4bb"},title:"Learning",isGroup:!1},{id:"#002",emoji:{type:"objects",code:"270f"},title:"Writing",isGroup:!1},{id:"#003",emoji:{type:"objects",code:"1f914"},title:"Thinking",isGroup:!1}],Dt="",fl={id:"#Active::GoBack",title:"back",emoji:{type:"#icon",code:"#iconBack"},isGroup:!1};class Se{constructor(){W(this,"id2Actives");W(this,"group2Actives");this.id2Actives=new Map,this.group2Actives=new Map,this.group2Actives.set(Dt,[])}dump(){let e=Array.from(this.group2Actives.keys());e=e.sort((i,s)=>i>s?1:i<s?-1:0);let n=[];return e.forEach(i=>{this.group2Actives.get(i).forEach(o=>{n.push(o.dump())})}),n}get(e){var n;return(n=this.id2Actives.get(e))==null?void 0:n.dump()}allGroups(){let e=Array.from(this.group2Actives.keys());return e.splice(e.indexOf(Dt),1),e.map(n=>this.id2Actives.get(n).dump())}groupActiveCount(e=""){var n;return console.debug("groupActiveCount",e),((n=this.group2Actives.get(e))==null?void 0:n.length)??0}getGroupActives(e=""){e=e??"";let n=this.group2Actives.get(e);return n?n.map(i=>i.dump()):[]}setGroupActives(e,n){n||(n=Dt);let i=e.map(s=>s instanceof Gt?s:new Gt(s));this.group2Actives.set(n,i),i.forEach(s=>{s.groupId=n,this.id2Actives.set(s.id,s)}),Y.emit("on-active-updated")}add(e,n=!0){if(console.log("Add active",e),this.id2Actives.has(e.id))return console.error("Active already exists",e),!1;let i=e instanceof Gt?e:new Gt(e),s=e==null?void 0:e.groupId;this.id2Actives.set(i.id,i),s=s??Dt;let o=this.group2Actives.get(s);return o||(o=[],this.group2Actives.set(s,o)),o.push(i),i.groupId=s,i.isGroup&&this.group2Actives.set(i.id,[]),n&&Y.emit("on-active-updated"),!0}del(e){let n=this.id2Actives.get(e.id);if(!n)return console.error("Active not found",e),!1;let i=e.groupId??Dt,s=this.group2Actives.get(i);if(!s)return console.error("Group not found",e),!1;this.id2Actives.delete(e.id);let o=s.findIndex(c=>c.id===e.id);return o<0?(console.error("Active not found in group",e),!1):(s.splice(o,1),n.isGroup&&(console.log("删除分组",e),this.group2Actives.delete(e.id)),Y.emit("on-active-updated",n),!0)}update(e){let n=this.id2Actives.get(e.id);if(!n)return console.error("Active not found",e),!1;n.emoji=e.emoji,n.title=e.title,n.isGroup=e.isGroup??!1;let i=n.groupId;if(n.groupId=e.groupId??"",i!==n.groupId){let s=this.group2Actives.get(i);if(!s)return!1;let o=s.findIndex(r=>r.id===e.id);if(o<0)return!1;s.splice(o,1);let c=this.group2Actives.get(n.groupId);c?c.push(n):this.group2Actives.set(n.groupId,[n])}return console.debug("ActiveHub: Update active",n),Y.emit("on-active-updated",n),!0}}W(Se,"RootGroup",""),W(Se,"SpecialActives",{Back:fl});let se=new Se;class gl{constructor(e){W(this,"active");W(this,"beg");W(this,"end");W(this,"elapsed");W(this,"procedure");W(this,"memo");W(this,"timer");W(this,"currentInterval");W(this,"runningElapsed");W(this,"runId");W(this,"status");W(this,"callbacks",[]);this.active=e,this.procedure=[],this.beg=null,this.end=null,this.elapsed=0,this.memo="",this.runningElapsed=0,this.callbacks=[],this.status="pause"}export(){return{active:this.active,beg:this.beg,end:this.end,procedure:this.procedure,elapsed:this.elapsed,memo:this.memo}}addCallback(e){this.callbacks.push(e)}updateActiveCallback(){}start(){let e=Date.now();this.beg=e;let n={beg:e,end:-1,elapsed:0};this.procedure.push(n),this.currentInterval=n,this.timer=setInterval(()=>{let i=Date.now()-this.currentInterval.beg;this.currentInterval.elapsed=i,this.runningElapsed=this.elapsed+i,this.callbacks.forEach(s=>{s(this.runningElapsed)})},1e3)}pause(){if(!this.currentInterval)return;let e=Date.now();this.currentInterval.end=e,this.currentInterval.elapsed=e-this.currentInterval.beg,this.elapsed+=this.currentInterval.elapsed,this.runningElapsed=this.elapsed,clearInterval(this.timer),this.currentInterval=null}stop(){this.currentInterval&&(this.pause(),this.end=Date.now(),this.callbacks=[])}del(){this.currentInterval&&(this.timer&&(clearInterval(this.timer),this.timer=null),this.currentInterval=null,this.callbacks=[])}}class hl{constructor(){W(this,"sessions");this.sessions={}}size(){return Object.keys(this.sessions).length}new(e){let n=new gl(e),i=`${e.id}#${Date.now()}`;return this.sessions[i]=n,n.runId=i,n}del(e){let n=typeof e=="string"?e:e.runId;delete this.sessions[n],console.log("Delete session",e)}pause(){for(let e in this.sessions)this.sessions[e].pause()}}let Re=new hl;const mi=(t,e)=>t.beg<e.beg?1:t.beg>e.beg?-1:t.end<e.end?1:t.end>e.end?-1:0,vi="log-index.json",yi=t=>(t=t??new Date().getFullYear(),`logs/${t}-history.json`);class pl{constructor(){W(this,"plugin");W(this,"logHistory");W(this,"index");this.plugin=null,this.logHistory=new Map,this.index=new Map}async init(e){console.log("TimeLogManager.init()"),this.plugin=e;let n=new Date().getFullYear(),i=await e.loadData(vi)||{};for(let o in i)this.index.set(parseInt(o),void 0);let s=await e.loadData(yi(n))||{};for(let o in s)this.logHistory.set(o,s[o]),this.updateIndex(o)}pickHistory(e,n){let i=this.index.get(e);if(!i)return{};if(!n){let o={};for(let c of i.keys()){let r=i==null?void 0:i.get(c);if(!(r===void 0||r.size===0))for(let a of r)o[a]=this.logHistory.get(a)}return o}let s={};for(let o of n){let c=i==null?void 0:i.get(o);if(!(c===void 0||c.size===0))for(let r of c)s[r]=this.logHistory.get(r)}return s}updateIndex(e){let n=new Date(e),i=n.getFullYear(),s=n.getMonth()+1,o=this.index.get(i);o||(o=new Map,this.index.set(i,o));let c=o.get(s);c||(c=new Set,o.set(s,c)),c.add(e)}add(e){let n=rl(e.beg),i=this.logHistory.get(n);i||(i=[],this.logHistory.set(n,i)),i.push(e),this.updateIndex(n)}async save(){let e={};for(let n of this.index.keys()){let i=this.index.get(n);e[n]=i.keys()}await this.plugin.saveData(vi,e);for(let n of this.index.keys())if(this.index.get(n)!==void 0){const s=yi(n),o=this.pickHistory(n);await this.plugin.saveData(s,o)}}allLogs(){let e=Array.from(this.logHistory.keys());e=e.sort((i,s)=>i>s?-1:i<s?1:0);let n=[];return e.forEach(i=>{let s=this.logHistory.get(i);s=s.sort(mi),s.forEach(c=>{c.procedure=c.procedure.sort((r,a)=>r.beg>a.beg?-1:r.beg<a.beg?1:0)});let o=new Date(i);o.setHours(0,0,0,0),n.push({date:new Date(o),timeLogs:s})}),n}getDateLogs(e){return e=e.sort((n,i)=>n>i?-1:n<i?1:0),e=e.filter(n=>this.logHistory.has(n)),e.map(n=>{let i=this.logHistory.get(n);return i=i.sort(mi),i.forEach(s=>{s.procedure=s.procedure.sort((o,c)=>o.beg>c.beg?-1:o.beg<c.beg?1:0)}),{date:new Date(n),timeLogs:i}})}queryYearLogs(e){let n=this.index.get(e);if(!n)return[];let i=[];return n.forEach(s=>{i=[...i,...s]}),this.getDateLogs(i)}queryMonthLogs(e,n){let i=this.index.get(e);if(!i)return[];let s=i.get(n);return s?this.getDateLogs(Array.from(s)):[]}queryDateLogs(e){let n=Ge(e);return this.getDateLogs([n])}qeuryDurationLogs(e,n){let i=Array.from(this.logHistory.keys()),s=Ge(e),o=Ge(n),c=i.filter(r=>r>=s&&r<=o);return this.getDateLogs(c)}}let it=new pl;function bi(t){let e,n=t[1].title+"",i;return{c(){e=y("div"),i=z(n),h(e,"class","hint svelte-1h4q7dt"),U(e,"font-size",t[0].title+"px"),U(e,"width",t[0].item+"px"),U(e,"line-height",t[0].title+6+"px")},m(s,o){S(s,e,o),g(e,i)},p(s,o){o&2&&n!==(n=s[1].title+"")&&ce(i,n),o&1&&U(e,"font-size",s[0].title+"px"),o&1&&U(e,"width",s[0].item+"px"),o&1&&U(e,"line-height",s[0].title+6+"px")},d(s){s&&I(e)}}}function _l(t){var p;let e,n,i,s,o,c,r,a,u,l,d;o=new Pn({props:{type:t[1].emoji.type,code:t[1].emoji.code,width:t[0].emoji+"px",unicodeFontSize:(p=t[0])==null?void 0:p.emojiFontsize}});let f=t[2]&&bi(t);return{c(){e=y("div"),n=y("div"),i=z(t[6]),s=A(),Ce(o.$$.fragment),c=A(),f&&f.c(),h(n,"class","sub-actives svelte-1h4q7dt"),h(n,"style",t[5]),h(e,"class","active b3-tooltips b3-tooltips__s svelte-1h4q7dt"),h(e,"aria-label",r=t[1].title),h(e,"style",a="width: "+t[0].item+"px; height: "+t[4]+"px; "+t[3])},m(_,v){S(_,e,v),g(e,n),g(n,i),g(e,s),Ee(o,e,null),g(e,c),f&&f.m(e,null),u=!0,l||(d=[C(e,"click",t[8]),C(e,"contextmenu",t[9]),C(e,"keypress",ml)],l=!0)},p(_,[v]){var m;const E={};v&2&&(E.type=_[1].emoji.type),v&2&&(E.code=_[1].emoji.code),v&1&&(E.width=_[0].emoji+"px"),v&1&&(E.unicodeFontSize=(m=_[0])==null?void 0:m.emojiFontsize),o.$set(E),_[2]?f?f.p(_,v):(f=bi(_),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(!u||v&2&&r!==(r=_[1].title))&&h(e,"aria-label",r),(!u||v&9&&a!==(a="width: "+_[0].item+"px; height: "+_[4]+"px; "+_[3]))&&h(e,"style",a)},i(_){u||(Z(o.$$.fragment,_),u=!0)},o(_){X(o.$$.fragment,_),u=!1},d(_){_&&I(e),De(o),f&&f.d(),l=!1,ae(d)}}}const ml=()=>{};function vl(t,e,n){let{size:i}=e,{active:s}=e,{showTitle:o=!0}=e,{style:c=""}=e,r=s.title?i.emoji+i.title+6:i.emoji,a=s.isGroup===!0?"":"display: none;",u=se.groupActiveCount(s.id);const l=en(),d=p=>{l("click"),p.stopPropagation()},f=p=>{l("contextmenu"),p.stopPropagation()};return t.$$set=p=>{"size"in p&&n(0,i=p.size),"active"in p&&n(1,s=p.active),"showTitle"in p&&n(2,o=p.showTitle),"style"in p&&n(3,c=p.style)},[i,s,o,c,r,a,u,l,d,f]}class Fn extends Fe{constructor(e){super(),Pe(this,e,vl,_l,je,{size:0,active:1,showTitle:2,style:3})}}function wi(t,e,n){const i=t.slice();return i[9]=e[n],i[11]=n,i}function Ei(t,e){let n,i,s,o,c,r=oe,a;function u(){return e[7](e[9])}function l(){return e[8](e[9])}return i=new Fn({props:{size:e[3],active:e[9]}}),i.$on("click",u),i.$on("contextmenu",l),{key:t,first:null,c(){n=y("div"),Ce(i.$$.fragment),s=A(),h(n,"class",""),h(n,"data-index",o=e[11]),this.first=n},m(d,f){S(d,n,f),Ee(i,n,null),g(n,s),a=!0},p(d,f){e=d;const p={};f&1&&(p.active=e[9]),i.$set(p),(!a||f&1&&o!==(o=e[11]))&&h(n,"data-index",o)},r(){c=n.getBoundingClientRect()},f(){Ps(n),r()},a(){r(),r=js(n,c,Zs,{duration:200})},i(d){a||(Z(i.$$.fragment,d),a=!0)},o(d){X(i.$$.fragment,d),a=!1},d(d){d&&I(n),De(i)}}}function yl(t){let e,n=[],i=new Map,s,o,c,r,a=t[0];const u=l=>l[9].id;for(let l=0;l<a.length;l+=1){let d=wi(t,a,l),f=u(d);i.set(f,n[l]=Ei(f,d))}return{c(){e=y("section");for(let l=0;l<n.length;l+=1)n[l].c();h(e,"class","all-actives svelte-1ertgdr"),h(e,"id","all-actives")},m(l,d){S(l,e,d);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);o=!0,c||(r=[Rs(s=Qo.call(null,e,{items:t[0],dragDisabled:t[1]})),C(e,"consider",t[5]),C(e,"finalize",t[6]),C(e,"resize",t[4])],c=!0)},p(l,[d]){if(d&13){a=l[0],He();for(let f=0;f<n.length;f+=1)n[f].r();n=Ke(n,d,u,1,l,a,i,e,Us,Ei,null,wi);for(let f=0;f<n.length;f+=1)n[f].a();Be()}s&&ct(s.update)&&d&3&&s.update.call(null,{items:l[0],dragDisabled:l[1]})},i(l){if(!o){for(let d=0;d<a.length;d+=1)Z(n[d]);o=!0}},o(l){for(let d=0;d<n.length;d+=1)X(n[d]);o=!1},d(l){l&&I(e);for(let d=0;d<n.length;d+=1)n[d].d();c=!1,ae(r)}}}const Di=60;function bl(t,e,n){let{actives:i}=e,{dragDisabled:s=!0}=e;const o=en(),c={item:Di,emoji:40,title:12},r=f=>{let p=f.target;var _=p.offsetWidth,v=Math.floor(_/Di);p.style.flexBasis=_/v+"px"};function a(f){n(0,i=f.detail.items)}function u(f){n(0,i=f.detail.items),o("reordered",i)}const l=f=>{o("click",f)},d=f=>{o("contextmenu",f)};return t.$$set=f=>{"actives"in f&&n(0,i=f.actives),"dragDisabled"in f&&n(1,s=f.dragDisabled)},[i,s,o,c,r,a,u,l,d]}class Ts extends Fe{constructor(e){super(),Pe(this,e,bl,yl,je,{actives:0,dragDisabled:1})}}function ki(t,{delay:e=0,duration:n=400,easing:i=Jt}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:o=>`opacity: ${o*s}`}}function En(t,{delay:e=0,duration:n=400,easing:i=ls,x:s=0,y:o=0,opacity:c=0}={}){const r=getComputedStyle(t),a=+r.opacity,u=r.transform==="none"?"":r.transform,l=a*(1-c),[d,f]=Jn(s),[p,_]=Jn(o);return{delay:e,duration:n,easing:i,css:(v,E)=>`
			transform: ${u} translate(${(1-v)*d}${f}, ${(1-v)*p}${_});
			opacity: ${a-l*E}`}}function wl(t){let e,n,i;return{c(){e=y("button"),e.textContent=`${ie.ui_logging_active.start}`,h(e,"class","btn-start svelte-ydn1wa")},m(s,o){S(s,e,o),n||(i=C(e,"click",t[4]),n=!0)},p:oe,d(s){s&&I(e),n=!1,i()}}}function El(t){let e,n,i;return{c(){e=y("button"),e.textContent=`${ie.ui_logging_active.pause}`,h(e,"class","btn-pause svelte-ydn1wa")},m(s,o){S(s,e,o),n||(i=C(e,"click",t[5]),n=!0)},p:oe,d(s){s&&I(e),n=!1,i()}}}function Dl(t){let e,n,i,s,o,c,r=t[1].title+"",a,u,l,d,f,p,_=t[0].memo+"",v,E,m,b,k,O,$,R,T,w,D;i=new Fn({props:{size:{item:40,emoji:30,title:12,emojiFontsize:25},active:t[1],showTitle:!1,style:"margin-right: 5px;"}});function P(H,j){if(H[3]=="running")return El;if(H[3]=="pause")return wl}let F=P(t),M=F&&F(t);return{c(){e=y("div"),n=y("div"),Ce(i.$$.fragment),s=A(),o=y("div"),c=y("div"),a=z(r),u=A(),l=y("div"),d=z(t[2]),f=A(),p=y("div"),v=z(_),E=A(),m=y("div"),M&&M.c(),b=A(),k=y("button"),k.textContent=`${ie.ui_logging_active.stop}`,O=A(),$=y("div"),$.innerHTML='<svg class="svelte-ydn1wa"><use xlink:href="#iconClose"></use></svg>',h(c,"class","running-title svelte-ydn1wa"),h(l,"class","running-time svelte-ydn1wa"),h(p,"class","running-memo svelte-ydn1wa"),h(o,"class","running svelte-ydn1wa"),h(k,"class","btn-stop svelte-ydn1wa"),h(m,"class","action-button svelte-ydn1wa"),h($,"class","close-action svelte-ydn1wa"),h(e,"class","running-active svelte-ydn1wa")},m(H,j){S(H,e,j),g(e,n),Ee(i,n,null),g(e,s),g(e,o),g(o,c),g(c,a),g(o,u),g(o,l),g(l,d),g(o,f),g(o,p),g(p,v),g(e,E),g(e,m),M&&M.m(m,null),g(m,b),g(m,k),g(e,O),g(e,$),T=!0,w||(D=[C(o,"keypress",kl),C(o,"click",t[8]),C(k,"click",t[6]),C($,"click",t[7]),C($,"keypress",Al)],w=!0)},p(H,[j]){const G={};j&2&&(G.active=H[1]),i.$set(G),(!T||j&2)&&r!==(r=H[1].title+"")&&ce(a,r),(!T||j&4)&&ce(d,H[2]),(!T||j&1)&&_!==(_=H[0].memo+"")&&ce(v,_),F===(F=P(H))&&M?M.p(H,j):(M&&M.d(1),M=F&&F(H),M&&(M.c(),M.m(m,b)))},i(H){T||(Z(i.$$.fragment,H),R&&R.end(1),T=!0)},o(H){X(i.$$.fragment,H),R=Ln(e,En,{x:200,duration:250}),T=!1},d(H){H&&I(e),De(i),M&&M.d(),H&&R&&R.end(),w=!1,ae(D)}}}const kl=()=>{},Al=()=>{};function Tl(t,e,n){let{session:i}=e,s;const o=()=>{n(1,s=i.active)};On(()=>{console.debug("Mount session",i)}),Sn(()=>{console.debug("Destroy session",i)});let c=mt(i.elapsed/1e3);const r=_=>{n(2,c=mt(_/1e3))};i.addCallback(r),i.updateActiveCallback=o;let a=i.status;const u=()=>{a!="stop"&&(n(3,a="running"),i.start())},l=()=>{a!="stop"&&(n(3,a="pause"),i.pause())},d=()=>{n(3,a="stop"),i.stop(),Y.emit("on-session-stop",i)},f=_=>{i.del(),Y.emit("on-session-del",i),_.stopPropagation()},p=()=>{al(ie.ui_logging_active.memo,i.memo,ie.ui_logging_active.input_memo).then(_=>{n(0,i.memo=_,i)})};return t.$$set=_=>{"session"in _&&n(0,i=_.session)},t.$$.update=()=>{t.$$.dirty&1&&n(1,s=i.active)},[i,s,c,a,u,l,d,f,p]}class Il extends Fe{constructor(e){super(),Pe(this,e,Tl,Dl,je,{session:0})}}function Ai(t,e,n){const i=t.slice();return i[10]=e[n],i}function Ti(t,e){let n,i,s;return i=new Il({props:{session:e[10]}}),{key:t,first:null,c(){n=we(),Ce(i.$$.fragment),this.first=n},m(o,c){S(o,n,c),Ee(i,o,c),s=!0},p(o,c){e=o;const r={};c&2&&(r.session=e[10]),i.$set(r)},i(o){s||(Z(i.$$.fragment,o),s=!0)},o(o){X(i.$$.fragment,o),s=!1},d(o){o&&I(n),De(i,o)}}}function Ol(t){let e,n,i,s,o,c,r=ie.name+"",a,u,l,d,f,p,_,v,E,m,b,k,O,$,R,T,w,D,P,F,M,H,j,G=[],V=new Map,ve,N,L,x,K,ke=t[1];const Ae=B=>B[10].runId;for(let B=0;B<ke.length;B+=1){let J=Ai(t,ke,B),_e=Ae(J);V.set(_e,G[B]=Ti(_e,J))}return N=new Ts({props:{actives:t[0]}}),N.$on("click",t[3]),N.$on("contextmenu",t[4]),{c(){e=y("div"),n=y("div"),i=y("div"),s=Q("svg"),o=Q("use"),c=A(),a=z(r),u=A(),l=y("span"),d=A(),f=y("span"),p=A(),_=y("span"),v=Q("svg"),E=Q("use"),m=A(),b=y("span"),k=A(),O=y("span"),$=Q("svg"),R=Q("use"),T=A(),w=y("span"),D=A(),P=y("span"),F=Q("svg"),M=Q("use"),H=A(),j=y("section");for(let B=0;B<G.length;B+=1)G[B].c();ve=A(),Ce(N.$$.fragment),Me(o,"xlink:href","#iconTimeLogger"),h(s,"class","block__logoicon"),h(i,"class","block__logo"),h(l,"class","fn__flex-1"),h(f,"class","fn__space"),Me(E,"xlink:href","#iconSettings"),h(v,"class",""),h(_,"class","block__icon b3-tooltips b3-tooltips__sw"),h(_,"aria-label",ie.ui_main.setting),h(b,"class","fn__space"),Me(R,"xlink:href","#iconAlignCenter"),h(O,"class","block__icon b3-tooltips b3-tooltips__sw"),h(O,"aria-label",ie.ui_main.history),h(w,"class","fn__space"),Me(M,"xlink:href","#iconMin"),h(P,"data-type","min"),h(P,"class","block__icon b3-tooltips b3-tooltips__sw"),h(P,"aria-label",ie.ui_main.min+" Ctrl+W"),h(n,"class","block__icons"),h(j,"id","running-action-list"),h(e,"class","fn__flex-1"),U(e,"padding-bottom","25px"),U(e,"overflow-x","hidden")},m(B,J){S(B,e,J),g(e,n),g(n,i),g(i,s),g(s,o),g(i,c),g(i,a),g(n,u),g(n,l),g(n,d),g(n,f),g(n,p),g(n,_),g(_,v),g(v,E),g(n,m),g(n,b),g(n,k),g(n,O),g(O,$),g($,R),g(n,T),g(n,w),g(n,D),g(n,P),g(P,F),g(F,M),g(e,H),g(e,j);for(let _e=0;_e<G.length;_e+=1)G[_e]&&G[_e].m(j,null);g(e,ve),Ee(N,e,null),L=!0,x||(K=[C(_,"click",t[5]),C(_,"keydown",t[2]),C(O,"click",t[6]),C(O,"keydown",t[2])],x=!0)},p(B,[J]){J&2&&(ke=B[1],He(),G=Ke(G,J,Ae,1,B,ke,V,j,Xe,Ti,null,Ai),Be());const _e={};J&1&&(_e.actives=B[0]),N.$set(_e)},i(B){if(!L){for(let J=0;J<ke.length;J+=1)Z(G[J]);Z(N.$$.fragment,B),L=!0}},o(B){for(let J=0;J<G.length;J+=1)X(G[J]);X(N.$$.fragment,B),L=!1},d(B){B&&I(e);for(let J=0;J<G.length;J+=1)G[J].d();De(N),x=!1,ae(K)}}}function Sl(t,e,n){let i="",s;const o=()=>{console.debug("Update Current Actives in group",i),n(0,s=se.getGroupActives(i)),i!==""&&n(0,s=[Se.SpecialActives.Back,...s]),console.debug(s)};o();const c=()=>{};let r=[];On(()=>{Y.on("on-session-stop",l),Y.on("on-session-del",l),Y.on("on-active-updated",o);let p=[];for(let _ in Re.sessions)p.push(Re.sessions[_]);n(1,r=p)}),Sn(()=>{Y.off("on-session-stop",l),Y.off("on-session-del",l),Y.off("on-active-updated",o)});const a=p=>{let _=p.detail;if(_.isGroup)i=_.id,o();else if(_.id===Se.SpecialActives.Back.id)i=Se.RootGroup,o();else{let v=Re.new(p.detail);n(1,r=[...r,v])}},u=p=>{if(p.detail.id===Se.SpecialActives.Back.id)i=Se.RootGroup,o();else{let v=Re.new(p.detail);n(1,r=[...r,v])}},l=p=>{let _=p.detail;n(1,r=r.filter(v=>v.runId!=_.runId))};return[s,r,c,a,u,()=>{Y.emit("open-settings")},()=>{Y.emit("open-log-history")}]}class Ll extends Fe{constructor(e){super(),Pe(this,e,Sl,Ol,je,{})}}function Ii(t,e,n){const i=t.slice();return i[4]=e[n],i[6]=n,i}function Oi(t,e){let n,i,s,o,c=e[4].title+"",r,a,u,l,d,f,p;i=new Pn({props:{type:e[4].emoji.type,code:e[4].emoji.code,width:"40px"}});function _(){return e[3](e[6],e[4])}return{key:t,first:null,c(){n=y("div"),Ce(i.$$.fragment),s=A(),o=y("div"),r=z(c),a=A(),h(o,"class","actives-list-item-title svelte-1u01y0s"),h(o,"style",""),h(n,"class",u="actives-list-item "+(e[1]===e[6]?"choosen-item":"")+" svelte-1u01y0s"),h(n,"data-index",l=e[6]),this.first=n},m(v,E){S(v,n,E),Ee(i,n,null),g(n,s),g(n,o),g(o,r),g(n,a),d=!0,f||(p=[C(n,"click",_),C(n,"keypress",Cl)],f=!0)},p(v,E){e=v;const m={};E&1&&(m.type=e[4].emoji.type),E&1&&(m.code=e[4].emoji.code),i.$set(m),(!d||E&1)&&c!==(c=e[4].title+"")&&ce(r,c),(!d||E&3&&u!==(u="actives-list-item "+(e[1]===e[6]?"choosen-item":"")+" svelte-1u01y0s"))&&h(n,"class",u),(!d||E&1&&l!==(l=e[6]))&&h(n,"data-index",l)},i(v){d||(Z(i.$$.fragment,v),d=!0)},o(v){X(i.$$.fragment,v),d=!1},d(v){v&&I(n),De(i),f=!1,ae(p)}}}function Rl(t){let e,n=[],i=new Map,s,o=t[0];const c=r=>r[4].id;for(let r=0;r<o.length;r+=1){let a=Ii(t,o,r),u=c(a);i.set(u,n[r]=Oi(u,a))}return{c(){e=y("section");for(let r=0;r<n.length;r+=1)n[r].c();h(e,"class","actives-list svelte-1u01y0s")},m(r,a){S(r,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);s=!0},p(r,[a]){a&7&&(o=r[0],He(),n=Ke(n,a,c,1,r,o,i,e,Xe,Oi,null,Ii),Be())},i(r){if(!s){for(let a=0;a<o.length;a+=1)Z(n[a]);s=!0}},o(r){for(let a=0;a<n.length;a+=1)X(n[a]);s=!1},d(r){r&&I(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}const Cl=()=>{};function Nl(t,e,n){let{actives:i}=e,s=-1;const o=en(),c=(r,a)=>{n(1,s=s===r?-1:r),o("click",s===r?a:void 0)};return t.$$set=r=>{"actives"in r&&n(0,i=r.actives)},[i,s,o,c]}class xl extends Fe{constructor(e){super(),Pe(this,e,Nl,Rl,je,{actives:0})}}function Si(t,e,n){const i=t.slice();return i[7]=e[n],i[9]=n,i}function Li(t,e,n){const i=t.slice();return i[10]=e[n],i}function Ri(t,e,n){const i=t.slice();return i[10]=e[n],i}function $l(t){let e,n=t[1][t[7]].title+"",i,s,o,c,r=t[1][t[7]].items,a=[];for(let u=0;u<r.length;u+=1)a[u]=Ci(Li(t,r,u));return{c(){e=y("div"),i=z(n),s=A(),o=y("div");for(let u=0;u<a.length;u+=1)a[u].c();c=A(),h(e,"class","emojis__title"),h(e,"data-type",t[9]),U(o,"min-height","336px"),h(o,"class","emojis__content")},m(u,l){S(u,e,l),g(e,i),S(u,s,l),S(u,o,l);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(o,null);g(o,c)},p(u,l){if(l&7){r=u[1][u[7]].items;let d;for(d=0;d<r.length;d+=1){const f=Li(u,r,d);a[d]?a[d].p(f,l):(a[d]=Ci(f),a[d].c(),a[d].m(o,c))}for(;d<a.length;d+=1)a[d].d(1);a.length=r.length}},d(u){u&&I(e),u&&I(s),u&&I(o),Qt(a,u)}}}function Ml(t){let e,n=t[1].custom.items.length>0&&Gl(t);return{c(){n&&n.c(),e=we()},m(i,s){n&&n.m(i,s),S(i,e,s)},p(i,s){i[1].custom.items.length>0&&n.p(i,s)},d(i){n&&n.d(i),i&&I(e)}}}function Ci(t){let e,n=Pl(t[10].unicode)+"",i,s,o;function c(){return t[4](t[7],t[10])}return{c(){e=y("button"),i=z(n),h(e,"data-unicode",t[10].unicode),h(e,"class","emojis__item ariaLabel"),h(e,"aria-label",t[10].description)},m(r,a){S(r,e,a),g(e,i),s||(o=C(e,"click",c),s=!0)},p(r,a){t=r},d(r){r&&I(e),s=!1,o()}}}function Gl(t){let e,n=t[1][t[7]].title+"",i,s,o,c=t[1][t[7]].items,r=[];for(let a=0;a<c.length;a+=1)r[a]=Ni(Ri(t,c,a));return{c(){e=y("div"),i=z(n),s=A();for(let a=0;a<r.length;a+=1)r[a].c();o=we(),h(e,"class","emojis__title"),h(e,"data-type",t[9])},m(a,u){S(a,e,u),g(e,i),S(a,s,u);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(a,u);S(a,o,u)},p(a,u){if(u&7){c=a[1][a[7]].items;let l;for(l=0;l<c.length;l+=1){const d=Ri(a,c,l);r[l]?r[l].p(d,u):(r[l]=Ni(d),r[l].c(),r[l].m(o.parentNode,o))}for(;l<r.length;l+=1)r[l].d(1);r.length=c.length}},d(a){a&&I(e),a&&I(s),Qt(r,a),a&&I(o)}}}function Ni(t){let e,n,i,s,o,c;function r(){return t[3](t[7],t[10])}return{c(){e=y("button"),n=y("img"),s=A(),h(n,"class",""),hn(n.src,i="/emojis/"+t[10].unicode)||h(n,"src",i),h(n,"alt",""),h(e,"data-unicode",t[10].unicode),h(e,"class","emojis__item ariaLabel"),h(e,"aria-label",t[10].description)},m(a,u){S(a,e,u),g(e,n),g(e,s),o||(c=C(e,"click",r),o=!0)},p(a,u){t=a},d(a){a&&I(e),o=!1,c()}}}function xi(t){let e;function n(o,c){return o[7]==="custom"?Ml:$l}let s=n(t)(t);return{c(){s.c(),e=we()},m(o,c){s.m(o,c),S(o,e,c)},p(o,c){s.p(o,c)},d(o){s.d(o),o&&I(e)}}}function jl(t){let e,n,i=t[0],s=[];for(let o=0;o<i.length;o+=1)s[o]=xi(Si(t,i,o));return{c(){e=y("div"),n=y("div");for(let o=0;o<s.length;o+=1)s[o].c();h(n,"class","emojis__panel"),h(e,"class","emojis")},m(o,c){S(o,e,c),g(e,n);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(n,null)},p(o,[c]){if(c&7){i=o[0];let r;for(r=0;r<i.length;r+=1){const a=Si(o,i,r);s[r]?s[r].p(a,c):(s[r]=xi(a),s[r].c(),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}},i:oe,o:oe,d(o){o&&I(e),Qt(s,o)}}}function Pl(t){try{return String.fromCodePoint(parseInt(t,16))}catch{return""}}function Fl(t){const e=en();let n=["custom","objects","nature","activity","food","travel","symbols"],s=(()=>{let a={};for(let u of n)a[u]={items:[],title:""};for(let u of window.siyuan.emojis){let l=u.id;l in a&&(a[l].items=u.items,a[l].title=u.title)}return a})();const o=(a,u)=>{e("choose",{type:a,unicode:u})};return[n,s,o,(a,u)=>o(a,u.unicode),(a,u)=>o(a,u.unicode)]}class zl extends Fe{constructor(e){super(),Pe(this,e,Fl,jl,je,{})}}function Hl(){const t=new Ie.Dialog({title:"选择图标",content:'<div id="IconChooser" style="width: 100%; height: 100%; margin-left: 8px;"/>',width:"400px",height:"400px"});let e=t.element.querySelector("#IconChooser"),n=new zl({target:e});return new Promise((i,s)=>{n.$on("choose",({detail:o})=>{t.destroy(),i(o)})})}function $i(t){let e,n,i,s=(t[3].id??ie.active.new)+"",o,c,r,a=ie.group+"",u,l,d,f,p,_,v,E,m=t[4].config_title+"",b,k,O,$,R,T,w,D,P,F,M,H=t[4].config_icon+"",j,G,V,ve,N,L,x,K,ke,Ae,B,J=t[4].config_group+"",_e,zn,Rt,Hn,cn,Bn,Ct,ze,Wn,We,an,Un,un,Yn,Ue,vt,Zn,yt,Nt,bt,Je,dn,qn;function Vn(q,Te){var at;return(at=q[3])!=null&&at.groupId?Wl:Bl}let xt=Vn(t),Ne=xt(t),he=t[3].id&&Mi(t);return K=new Pn({props:{type:t[3].emoji.type,code:t[3].emoji.code,width:40,unicodeFontSize:30}}),{c(){e=y("div"),n=y("div"),i=y("div"),o=z(s),c=A(),r=y("div"),u=z(a),l=z(`:
                    `),Ne.c(),d=A(),f=y("div"),p=A(),he&&he.c(),_=A(),v=y("div"),E=y("div"),b=z(m),k=A(),O=y("div"),O.textContent=`${t[4].config_title_text}`,$=A(),R=y("span"),T=A(),w=y("div"),D=y("input"),P=A(),F=y("div"),M=y("div"),j=z(H),G=A(),V=y("div"),V.textContent=`${t[4].config_icon_text}`,ve=A(),N=y("span"),L=A(),x=y("div"),Ce(K.$$.fragment),ke=A(),Ae=y("div"),B=y("div"),_e=z(J),zn=A(),Rt=y("div"),Rt.textContent=`${t[4].config_group_text}`,Hn=A(),cn=y("span"),Bn=A(),Ct=y("div"),ze=y("input"),Wn=A(),We=y("div"),an=y("div"),Un=A(),un=y("span"),Yn=A(),Ue=y("div"),vt=y("button"),vt.textContent=`${t[4].btn_cancel}`,Zn=A(),yt=y("button"),yt.textContent=`${t[4].btn_save}`,h(i,"class","b3-label__text"),h(r,"class","b3-label__text"),h(f,"class","fn__flex-1"),U(n,"display","flex"),U(n,"padding","16px 24px"),U(n,"gap","25px"),h(O,"class","b3-label__text"),h(E,"class","fn__flex-1"),h(R,"class","fn__space"),h(D,"class","b3-text-field fn__flex-center fn__size200"),h(w,"class","fn__flex-center fn__size200 attr-value svelte-16dkjvu"),h(v,"class","fn__flex b3-label"),h(V,"class","b3-label__text"),h(M,"class","fn__flex-1"),h(N,"class","fn__space"),h(x,"class","fn__flex-center fn__size200 attr-value svelte-16dkjvu"),U(x,"cursor","pointer"),h(F,"class","fn__flex b3-label"),h(Rt,"class","b3-label__text"),h(B,"class","fn__flex-1"),h(cn,"class","fn__space"),h(ze,"class","b3-switch fn__flex-center"),h(ze,"type","checkbox"),ze.disabled=t[2],h(Ct,"class","fn__flex-center fn__size200 attr-value svelte-16dkjvu"),h(Ae,"class","fn__flex b3-label"),h(an,"class","fn__flex-1"),h(un,"class","fn__space"),h(vt,"class","b3-button b3-button--cancel"),h(yt,"class","b3-button b3-button--text"),h(Ue,"class","fn__flex-center fn__size200 attr-value svelte-16dkjvu"),U(Ue,"display","flex"),U(Ue,"gap","10px"),h(We,"class","fn__flex b3-label"),h(e,"id","selected-active"),h(e,"class","svelte-16dkjvu")},m(q,Te){S(q,e,Te),g(e,n),g(n,i),g(i,o),g(n,c),g(n,r),g(r,u),g(r,l),Ne.m(r,null),g(n,d),g(n,f),g(n,p),he&&he.m(n,null),g(e,_),g(e,v),g(v,E),g(E,b),g(E,k),g(E,O),g(v,$),g(v,R),g(v,T),g(v,w),g(w,D),Qn(D,t[3].title),g(e,P),g(e,F),g(F,M),g(M,j),g(M,G),g(M,V),g(F,ve),g(F,N),g(F,L),g(F,x),Ee(K,x,null),g(e,ke),g(e,Ae),g(Ae,B),g(B,_e),g(B,zn),g(B,Rt),g(Ae,Hn),g(Ae,cn),g(Ae,Bn),g(Ae,Ct),g(Ct,ze),ze.checked=t[3].isGroup,g(e,Wn),g(e,We),g(We,an),g(We,Un),g(We,un),g(We,Yn),g(We,Ue),g(Ue,vt),g(Ue,Zn),g(Ue,yt),Je=!0,dn||(qn=[C(D,"input",t[17]),C(x,"click",t[8]),C(x,"keypress",Kl),C(ze,"change",t[18]),C(vt,"click",t[19]),C(yt,"click",t[11])],dn=!0)},p(q,Te){(!Je||Te&8)&&s!==(s=(q[3].id??ie.active.new)+"")&&ce(o,s),xt===(xt=Vn(q))&&Ne?Ne.p(q,Te):(Ne.d(1),Ne=xt(q),Ne&&(Ne.c(),Ne.m(r,null))),q[3].id?he?he.p(q,Te):(he=Mi(q),he.c(),he.m(n,null)):he&&(he.d(1),he=null),Te&8&&D.value!==q[3].title&&Qn(D,q[3].title);const at={};Te&8&&(at.type=q[3].emoji.type),Te&8&&(at.code=q[3].emoji.code),K.$set(at),(!Je||Te&4)&&(ze.disabled=q[2]),Te&8&&(ze.checked=q[3].isGroup)},i(q){Je||(Z(K.$$.fragment,q),lt(()=>{Je&&(bt&&bt.end(1),Nt=os(e,En,{y:200,duration:100}),Nt.start())}),Je=!0)},o(q){X(K.$$.fragment,q),Nt&&Nt.invalidate(),bt=Ln(e,En,{y:200,duration:100}),Je=!1},d(q){q&&I(e),Ne.d(),he&&he.d(),De(K),q&&bt&&bt.end(),dn=!1,ae(qn)}}}function Bl(t){let e;return{c(){e=z("/")},m(n,i){S(n,e,i)},p:oe,d(n){n&&I(e)}}}function Wl(t){let e=se.get(t[3].groupId).title+"",n;return{c(){n=z(e)},m(i,s){S(i,n,s)},p(i,s){s&8&&e!==(e=se.get(i[3].groupId).title+"")&&ce(n,e)},d(i){i&&I(n)}}}function Mi(t){let e,n,i,s,o,c,r,a,u,l;return{c(){e=y("div"),n=Q("svg"),i=Q("use"),o=A(),c=y("div"),r=Q("svg"),a=Q("use"),Me(i,"xlink:href","#iconMoveToGroup"),U(n,"width","20px"),U(n,"height","20px"),U(n,"color","var(--b3-theme-error)"),h(e,"class","b3-tooltips b3-tooltips__s"),h(e,"style",s=t[3].isGroup===!0?"display: none":""),h(e,"aria-label",t[4].confirm_move),Me(a,"xlink:href","#iconTrashcan"),U(r,"width","20px"),U(r,"height","20px"),U(r,"color","var(--b3-theme-error)"),h(c,"class","b3-tooltips b3-tooltips__s"),h(c,"aria-label",t[4].del)},m(d,f){S(d,e,f),g(e,n),g(n,i),S(d,o,f),S(d,c,f),g(c,r),g(r,a),u||(l=[C(e,"click",t[13]),C(e,"keypress",Vl),C(c,"click",t[9]),C(c,"keypress",Xl)],u=!0)},p(d,f){f&8&&s!==(s=d[3].isGroup===!0?"display: none":"")&&h(e,"style",s)},d(d){d&&I(e),d&&I(o),d&&I(c),u=!1,ae(l)}}}function Ul(t){let e,n,i,s=ie.group+"",o,c,r=(t[0]==""?"/":se.get(t[0]).title)+"",a,u,l,d,f,p,_,v,E,m,b,k,O,$,R,T,w,D,P,F,M,H,j,G,V,ve,N;$=new Ts({props:{actives:t[1],dragDisabled:!1}}),$.$on("click",t[7]),$.$on("reordered",t[12]);let L=t[3]&&$i(t);return{c(){e=y("main"),n=y("div"),i=y("div"),o=z(s),c=z(": "),a=z(r),u=A(),l=y("div"),d=Q("svg"),f=Q("use"),_=A(),v=y("div"),E=Q("svg"),m=Q("use"),k=A(),O=y("div"),Ce($.$$.fragment),R=A(),L&&L.c(),T=A(),w=y("div"),D=Q("svg"),P=Q("circle"),F=Q("rect"),M=Q("rect"),h(i,"class","fn__flex-1"),Me(f,"xlink:href","#iconBack"),h(l,"class","toolbar__item svelte-16dkjvu"),h(l,"style",p=t[0]===""?"display: none;":""),Me(m,"xlink:href","#iconSettings"),h(v,"class","toolbar__item svelte-16dkjvu"),h(v,"style",b=t[0]===""?"display: none;":""),h(n,"class","block__icons svelte-16dkjvu"),h(O,"id","all-actives"),h(e,"class","svelte-16dkjvu"),h(P,"cx","12"),h(P,"cy","12"),h(P,"r","11"),h(P,"fill",t[6].circle),h(F,"x","10"),h(F,"y","5"),h(F,"width","4"),h(F,"height","14"),h(F,"fill",t[6].rect),h(M,"x","5"),h(M,"y","10"),h(M,"width","14"),h(M,"height","4"),h(M,"fill",t[6].rect),h(D,"xmlns","http://www.w3.org/2000/svg"),h(D,"viewBox","0 0 24 24"),h(w,"id","btn-add"),h(w,"style",H="width: 24px; height: 24px; "+(t[3]?"display: none":"")),h(w,"class","svelte-16dkjvu")},m(x,K){S(x,e,K),g(e,n),g(n,i),g(i,o),g(i,c),g(i,a),g(n,u),g(n,l),g(l,d),g(d,f),g(n,_),g(n,v),g(v,E),g(E,m),g(e,k),g(e,O),Ee($,O,null),g(e,R),L&&L.m(e,null),S(x,T,K),S(x,w,K),g(w,D),g(D,P),g(D,F),g(D,M),V=!0,ve||(N=[C(l,"click",t[14]),C(l,"keydown",Yl),C(v,"click",t[15]),C(v,"keydown",Zl),C(O,"click",t[16]),C(O,"keypress",ql),C(w,"click",t[10]),C(w,"keypress",Jl)],ve=!0)},p(x,[K]){(!V||K&1)&&r!==(r=(x[0]==""?"/":se.get(x[0]).title)+"")&&ce(a,r),(!V||K&1&&p!==(p=x[0]===""?"display: none;":""))&&h(l,"style",p),(!V||K&1&&b!==(b=x[0]===""?"display: none;":""))&&h(v,"style",b);const ke={};K&2&&(ke.actives=x[1]),$.$set(ke),x[3]?L?(L.p(x,K),K&8&&Z(L,1)):(L=$i(x),L.c(),Z(L,1),L.m(e,null)):L&&(He(),X(L,1,1,()=>{L=null}),Be()),(!V||K&8&&H!==(H="width: 24px; height: 24px; "+(x[3]?"display: none":"")))&&h(w,"style",H)},i(x){V||(Z($.$$.fragment,x),Z(L),lt(()=>{V&&(G&&G.end(1),j=os(w,ki,{duration:100}),j.start())}),V=!0)},o(x){X($.$$.fragment,x),X(L),j&&j.invalidate(),G=Ln(w,ki,{duration:100}),V=!1},d(x){x&&I(e),De($),L&&L.d(),x&&I(T),x&&I(w),x&&G&&G.end(),ve=!1,ae(N)}}}const Yl=()=>{},Zl=()=>{},ql=()=>{},Vl=()=>{},Xl=()=>{},Kl=()=>{},Jl=()=>{};function Ql(t,e,n){let i="",s=se.getGroupActives(i),o=!0;const c=ie.ui_active_config;On(()=>{Y.on("on-active-updated",r)}),Sn(()=>{Y.off("on-active-updated",r)});const r=()=>{console.groupCollapsed("sy-time-logger: updateActives"),console.log("Update Current Actives in group",i),n(1,s=se.getGroupActives(i)),console.log(s),console.groupEnd()};let a=getComputedStyle(document.documentElement);const u={circle:a.getPropertyValue("--b3-theme-primary"),rect:a.getPropertyValue("--b3-theme-on-primary")};let l;const d=w=>{w.preventDefault(),console.groupCollapsed("sy-time-logger: Config Active");let D=w.detail;console.log("select active",D),D.isGroup===!0?(n(0,i=D.id),r()):(n(3,l=w.detail),console.log("focusedActive",l)),console.groupEnd(),w.stopPropagation()},f=()=>{console.log("choose icon"),Hl().then(w=>{console.log("choose icon",w);let D={type:w.type,code:w.unicode};n(3,l.emoji=D,l)})},p=()=>{if(l.isGroup&&se.groupActiveCount(l.id)>0){Ie.showMessage(c.msg_del_empty,5e3,"error");return}Ie.confirm(c.confirm_del,c.confirm_del_text,()=>{se.del(l),l.isGroup&&(n(0,i=l.groupId??Se.RootGroup),r()),n(3,l=null)})},_=()=>{n(3,l={emoji:{type:"symbols",code:"1f518"},title:ie.active.new,isGroup:!1,id:void 0,groupId:i===""?void 0:i}),n(2,o=i!=="")},v=()=>{console.log("save"),l.id!==void 0?se.update(l):(se.add(l),n(2,o=!0)),n(3,l=null)},E=w=>{console.log("reordered",w.detail),se.setGroupActives(w.detail,i)},m=()=>{console.log("move to group",l);let w=se.allGroups().filter(G=>G.id!==i);w=[{id:"",title:ie.active.root,emoji:{type:"symbols",code:"1f518"},isGroup:!0},...w];let P,F=ul(c.confirm_move,`<div id='move-to-group' style="height: 100%;"></div>`,()=>{console.log("selectedActive",P),(P==null?void 0:P.isGroup)===!0&&(P==null?void 0:P.id)!==l.groupId&&(n(3,l.isGroup=!1,l),n(3,l.groupId=P.id,l))}),M=F.element.querySelector(".b3-dialog__container");M.style.maxHeight="400px";let H=F.element.querySelector("#move-to-group");new xl({target:H,props:{actives:w}}).$on("click",G=>{P=G.detail})},b=()=>{n(3,l=null),n(0,i=Se.RootGroup),r()},k=()=>{let w=se.get(i);n(3,l=w)},O=()=>{n(3,l=null)};function $(){l.title=this.value,n(3,l)}function R(){l.isGroup=this.checked,n(3,l)}return[i,s,o,l,c,r,u,d,f,p,_,v,E,m,b,k,O,$,R,()=>{n(3,l=null)}]}class er extends Fe{constructor(e){super(),Pe(this,e,Ql,Ul,je,{})}}function tr(t){let e,n,i,s,o,c,r=t[2].title+"",a,u,l,d=t[4](t[0].beg)+"",f,p,_=t[4](t[0].end)+"",v,E,m,b=(t[1].memo??"")+"",k,O,$,R;return i=new Fn({props:{size:{item:40,emoji:30,title:12,emojiFontsize:25},active:t[2],showTitle:!1,style:"margin-right: 5px;"}}),{c(){e=y("div"),n=y("div"),Ce(i.$$.fragment),s=A(),o=y("div"),c=y("div"),a=z(r),u=A(),l=y("div"),f=z(d),p=z(" - "),v=z(_),E=A(),m=y("div"),k=z(b),O=A(),$=y("div"),$.textContent=`${mt(t[3]/1e3)}`,h(c,"class","timelog-title svelte-1xk8i9y"),h(l,"class","timelog-interval svelte-1xk8i9y"),h(m,"class","timelog-memo svelte-1xk8i9y"),h(o,"class","timelog svelte-1xk8i9y"),h($,"class","timelog-duration svelte-1xk8i9y"),h(e,"class","timelog-item svelte-1xk8i9y")},m(T,w){S(T,e,w),g(e,n),Ee(i,n,null),g(e,s),g(e,o),g(o,c),g(c,a),g(o,u),g(o,l),g(l,f),g(l,p),g(l,v),g(o,E),g(o,m),g(m,k),g(e,O),g(e,$),R=!0},p(T,[w]){const D={};w&4&&(D.active=T[2]),i.$set(D),(!R||w&4)&&r!==(r=T[2].title+"")&&ce(a,r),(!R||w&1)&&d!==(d=T[4](T[0].beg)+"")&&ce(f,d),(!R||w&1)&&_!==(_=T[4](T[0].end)+"")&&ce(v,_),(!R||w&2)&&b!==(b=(T[1].memo??"")+"")&&ce(k,b)},i(T){R||(Z(i.$$.fragment,T),R=!0)},o(T){X(i.$$.fragment,T),R=!1},d(T){T&&I(e),De(i)}}}function nr(t,e,n){let{interval:i}=e,{log:s}=e,o=s.active,c=se.get(o.id);o=c||o;const r=i.end-i.beg,a=u=>{if(u<=0)return"Now";let l=new Date(u),d=l.getHours().toString().padStart(2,"0"),f=l.getMinutes().toString().padStart(2,"0"),p=l.getSeconds().toString().padStart(2,"0");return`${d}:${f}:${p}`};return t.$$set=u=>{"interval"in u&&n(0,i=u.interval),"log"in u&&n(1,s=u.log)},[i,s,o,r,a]}class Is extends Fe{constructor(e){super(),Pe(this,e,nr,tr,je,{interval:0,log:1})}}function ir(t){const e=new Date(t.getTime());let n=e.getDay();n-=1,n=n<0?6:n;const i=new Date(e);i.setDate(e.getDate()-n);const s=new Date(e);return s.setDate(e.getDate()+(6-n)),{index:Math.ceil((e.getDate()-i.getDate()+1)/7),start:i,end:s}}function Gi(t,e,n){const i=t.slice();return i[14]=e[n],i[16]=n,i}function ji(t,e,n){const i=t.slice();return i[17]=e[n],i}function Pi(t,e,n){const i=t.slice();return i[20]=e[n],i}function Fi(t,e,n){const i=t.slice();return i[23]=e[n],i}function zi(t,e,n){const i=t.slice();return i[20]=e[n],i}function Hi(t,e,n){const i=t.slice();return i[28]=e[n],i}function Bi(t){let e,n,i,s,o,c,r,a=t[4],u=[];for(let l=0;l<a.length;l+=1)u[l]=Wi(Hi(t,a,l));return{c(){e=y("div"),n=y("div"),n.textContent="<",i=A();for(let l=0;l<u.length;l+=1)u[l].c();s=A(),o=y("div"),o.textContent=">",h(n,"class","svelte-l5icdu"),h(o,"class","svelte-l5icdu"),h(e,"class","scope-menu svelte-l5icdu")},m(l,d){S(l,e,d),g(e,n),g(e,i);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(e,null);g(e,s),g(e,o),c||(r=[C(n,"click",t[9]),C(o,"click",t[11])],c=!0)},p(l,d){if(d&82){a=l[4];let f;for(f=0;f<a.length;f+=1){const p=Hi(l,a,f);u[f]?u[f].p(p,d):(u[f]=Wi(p),u[f].c(),u[f].m(e,s))}for(;f<u.length;f+=1)u[f].d(1);u.length=a.length}},d(l){l&&I(e),Qt(u,l),c=!1,ae(r)}}}function Wi(t){let e,n=t[28]+"",i,s,o,c;function r(){return t[10](t[28])}return{c(){e=y("div"),i=z(n),h(e,"data-type",t[28]),h(e,"class",s=Kn(t[28]===t[1].type?"current-type":"")+" svelte-l5icdu")},m(a,u){S(a,e,u),g(e,i),o||(c=C(e,"click",r),o=!0)},p(a,u){t=a,u&2&&s!==(s=Kn(t[28]===t[1].type?"current-type":"")+" svelte-l5icdu")&&h(e,"class",s)},d(a){a&&I(e),o=!1,c()}}}function sr(t){let e,n,i,s=[],o=new Map,c,r,a=Object.values(Re.sessions).reverse();const u=l=>l[23].runId;for(let l=0;l<a.length;l+=1){let d=Fi(t,a,l),f=u(d);o.set(f,s[l]=Yi(f,d))}return{c(){e=y("div"),n=y("span"),n.textContent=`${ie.ui_history.running}`,i=A();for(let l=0;l<s.length;l+=1)s[l].c();c=we(),h(n,"class","log-date-str svelte-l5icdu"),h(e,"class","log-date svelte-l5icdu")},m(l,d){S(l,e,d),g(e,n),S(l,i,d);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(l,d);S(l,c,d),r=!0},p(l,d){d&0&&(a=Object.values(Re.sessions).reverse(),He(),s=Ke(s,d,u,1,l,a,o,c.parentNode,Xe,Yi,c,Fi),Be())},i(l){if(!r){for(let d=0;d<a.length;d+=1)Z(s[d]);r=!0}},o(l){for(let d=0;d<s.length;d+=1)X(s[d]);r=!1},d(l){l&&I(e),l&&I(i);for(let d=0;d<s.length;d+=1)s[d].d(l);l&&I(c)}}}function Ui(t,e){let n,i,s;return i=new Is({props:{interval:e[20],log:e[23].export()}}),{key:t,first:null,c(){n=we(),Ce(i.$$.fragment),this.first=n},m(o,c){S(o,n,c),Ee(i,o,c),s=!0},p(o,c){e=o},i(o){s||(Z(i.$$.fragment,o),s=!0)},o(o){X(i.$$.fragment,o),s=!1},d(o){o&&I(n),De(i,o)}}}function Yi(t,e){let n,i=[],s=new Map,o,c,r=e[23].procedure.reverse();const a=u=>u[20].beg;for(let u=0;u<r.length;u+=1){let l=zi(e,r,u),d=a(l);s.set(d,i[u]=Ui(d,l))}return{key:t,first:null,c(){n=we();for(let u=0;u<i.length;u+=1)i[u].c();o=we(),this.first=n},m(u,l){S(u,n,l);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(u,l);S(u,o,l),c=!0},p(u,l){e=u,l&0&&(r=e[23].procedure.reverse(),He(),i=Ke(i,l,a,1,e,r,s,o.parentNode,Xe,Ui,o,zi),Be())},i(u){if(!c){for(let l=0;l<r.length;l+=1)Z(i[l]);c=!0}},o(u){for(let l=0;l<i.length;l+=1)X(i[l]);c=!1},d(u){u&&I(n);for(let l=0;l<i.length;l+=1)i[l].d(u);u&&I(o)}}}function Zi(t,e){let n,i,s;return i=new Is({props:{interval:e[20],log:e[17]}}),{key:t,first:null,c(){n=we(),Ce(i.$$.fragment),this.first=n},m(o,c){S(o,n,c),Ee(i,o,c),s=!0},p(o,c){e=o;const r={};c&1&&(r.interval=e[20]),c&1&&(r.log=e[17]),i.$set(r)},i(o){s||(Z(i.$$.fragment,o),s=!0)},o(o){X(i.$$.fragment,o),s=!1},d(o){o&&I(n),De(i,o)}}}function qi(t,e){let n,i=[],s=new Map,o,c,r=e[17].procedure;const a=u=>u[20].beg;for(let u=0;u<r.length;u+=1){let l=Pi(e,r,u),d=a(l);s.set(d,i[u]=Zi(d,l))}return{key:t,first:null,c(){n=we();for(let u=0;u<i.length;u+=1)i[u].c();o=we(),this.first=n},m(u,l){S(u,n,l);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(u,l);S(u,o,l),c=!0},p(u,l){e=u,l&1&&(r=e[17].procedure,He(),i=Ke(i,l,a,1,e,r,s,o.parentNode,Xe,Zi,o,Pi),Be())},i(u){if(!c){for(let l=0;l<r.length;l+=1)Z(i[l]);c=!0}},o(u){for(let l=0;l<i.length;l+=1)X(i[l]);c=!1},d(u){u&&I(n);for(let l=0;l<i.length;l+=1)i[l].d(u);u&&I(o)}}}function Vi(t,e){let n,i,s=Ge(e[14].date)+"",o,c,r,a=e[5][e[16]]+"",u,l,d=[],f=new Map,p,_,v=e[14].timeLogs;const E=m=>m[17].beg;for(let m=0;m<v.length;m+=1){let b=ji(e,v,m),k=E(b);f.set(k,d[m]=qi(k,b))}return{key:t,first:null,c(){n=y("div"),i=y("span"),o=z(s),c=A(),r=y("span"),u=z(a),l=A();for(let m=0;m<d.length;m+=1)d[m].c();p=we(),h(i,"class","log-date-str svelte-l5icdu"),h(r,"class","counter b3-tooltips b3-tooltips__sw svelte-l5icdu"),h(r,"aria-label",ie.ui_history.cnt),h(n,"class","log-date svelte-l5icdu"),this.first=n},m(m,b){S(m,n,b),g(n,i),g(i,o),g(n,c),g(n,r),g(r,u),S(m,l,b);for(let k=0;k<d.length;k+=1)d[k]&&d[k].m(m,b);S(m,p,b),_=!0},p(m,b){e=m,(!_||b&1)&&s!==(s=Ge(e[14].date)+"")&&ce(o,s),(!_||b&1)&&a!==(a=e[5][e[16]]+"")&&ce(u,a),b&1&&(v=e[14].timeLogs,He(),d=Ke(d,b,E,1,e,v,f,p.parentNode,Xe,qi,p,ji),Be())},i(m){if(!_){for(let b=0;b<v.length;b+=1)Z(d[b]);_=!0}},o(m){for(let b=0;b<d.length;b+=1)X(d[b]);_=!1},d(m){m&&I(n),m&&I(l);for(let b=0;b<d.length;b+=1)d[b].d(m);m&&I(p)}}}function or(t){let e,n,i,s,o,c,r=t[1].value+"",a,u,l,d=ie.ui_history.sumOfElapsed+"",f,p,_=mt(t[2]/1e3)+"",v,E,m,b,k,O,$,R,T=Re.size()>0,w,D=[],P=new Map,F,M,H,j=t[3]&&Bi(t),G=T&&sr(t),V=t[0];const ve=N=>N[14].date;for(let N=0;N<V.length;N+=1){let L=Gi(t,V,N),x=ve(L);P.set(x,D[N]=Vi(x,L))}return{c(){e=y("main"),n=y("div"),i=y("div"),s=A(),o=y("div"),c=y("div"),a=z(r),u=A(),l=y("div"),f=z(d),p=z(": "),v=z(_),E=A(),m=y("div"),b=A(),k=y("div"),O=A(),j&&j.c(),$=A(),R=y("section"),G&&G.c(),w=A();for(let N=0;N<D.length;N+=1)D[N].c();U(i,"width","20%"),h(c,"class","svelte-l5icdu"),h(l,"class","svelte-l5icdu"),h(m,"class","triangle-button svelte-l5icdu"),h(o,"class","history-scope svelte-l5icdu"),U(k,"width","20%"),h(n,"class","banner svelte-l5icdu"),h(R,"class","svelte-l5icdu"),h(e,"class","svelte-l5icdu")},m(N,L){S(N,e,L),g(e,n),g(n,i),g(n,s),g(n,o),g(o,c),g(c,a),g(o,u),g(o,l),g(l,f),g(l,p),g(l,v),g(o,E),g(o,m),g(n,b),g(n,k),g(e,O),j&&j.m(e,null),g(e,$),g(e,R),G&&G.m(R,null),g(R,w);for(let x=0;x<D.length;x+=1)D[x]&&D[x].m(R,null);F=!0,M||(H=[C(o,"click",t[8]),C(o,"keypress",lr)],M=!0)},p(N,[L]){(!F||L&2)&&r!==(r=N[1].value+"")&&ce(a,r),(!F||L&4)&&_!==(_=mt(N[2]/1e3)+"")&&ce(v,_),N[3]?j?j.p(N,L):(j=Bi(N),j.c(),j.m(e,$)):j&&(j.d(1),j=null),T&&G.p(N,L),L&33&&(V=N[0],He(),D=Ke(D,L,ve,1,N,V,P,R,Xe,Vi,null,Gi),Be())},i(N){if(!F){Z(G);for(let L=0;L<V.length;L+=1)Z(D[L]);F=!0}},o(N){X(G);for(let L=0;L<D.length;L+=1)X(D[L]);F=!1},d(N){N&&I(e),j&&j.d(),G&&G.d();for(let L=0;L<D.length;L+=1)D[L].d();M=!1,ae(H)}}}const lr=()=>{};function rr(t,e,n){const i=["day","week","month","year"];let s={type:"year",date:new Date,beg:new Date,end:null,value:new Date().getFullYear()},o,{dateLogs:c=[]}=e;const r=()=>{if(console.log("Update Date Log"),s.type==="year")n(0,c=it.queryYearLogs(s.date.getFullYear()));else if(s.type==="month"){let m=s.date.getFullYear(),b=s.date.getMonth()+1;n(0,c=it.queryMonthLogs(m,b))}else s.type==="day"?n(0,c=it.queryDateLogs(s.date)):s.type==="week"&&n(0,c=it.qeuryDurationLogs(s.beg,s.end));n(2,o=0),c.map(m=>{m.timeLogs.map(b=>{n(2,o+=b.elapsed)})})};r();let a=[];c.forEach(m=>{let b=0;m.timeLogs.forEach(k=>{b+=k.procedure.length}),a.push(b)});const u=()=>{let m=s.date,b=s.type;if(b==="year")n(1,s.value=m.getFullYear(),s);else if(b==="month")n(1,s.value=Ge(m).slice(0,-3),s);else if(b==="day")n(1,s.value=Ge(m),s);else if(b==="week"){let k=ir(m);n(1,s.beg=k.start,s),n(1,s.end=k.end,s),n(1,s.value=`${Ge(s.beg)} ~ ${Ge(s.end)}`,s)}},l=m=>{n(1,s.type=m,s),u(),r()},d=m=>{let b=s.date,k=s.type;k==="year"?b.setFullYear(b.getFullYear()+m):k==="month"?b.setMonth(b.getMonth()+m):k==="day"?b.setDate(b.getDate()+m):k==="week"&&b.setDate(b.getDate()+m*7),u(),r()};let f=!1;const p=()=>{n(3,f=!f)},_=()=>d(-1),v=m=>l(m),E=()=>d(1);return t.$$set=m=>{"dateLogs"in m&&n(0,c=m.dateLogs)},[c,s,o,f,i,a,l,d,p,_,v,E]}class cr extends Fe{constructor(e){super(),Pe(this,e,rr,or,je,{dateLogs:0})}}const Xi="time-log.json",et="actives.json";class ar extends Ie.Plugin{constructor(){super(...arguments);W(this,"isMobile")}async onload(){const n=Ie.getFrontend();this.isMobile=n==="mobile"||n==="browser-mobile",cl(this.eventBus),ll(this.i18n),Se.SpecialActives.Back.title=this.i18n.goback,this.addIcons('<symbol id="iconTimeLogger" viewBox="0 0 1024 1024"><path d="M926.25224691 926.25224691h-51.91961494c1.65700898-67.108864-35.07335691-130.90371003-84.78362654-191.38453808-0.27616816-0.27616816-0.27616816-0.55233633-0.55233633-0.82850448-33.41634791-40.32055203-72.35605913-79.26026325-109.91492952-116.2667973-35.34952507-35.07335691-71.52755463-70.97521831-101.07754823-105.77240705 29.27382545-34.79718875 65.45185502-70.69905013 101.07754823-105.77240705 37.55887038-37.00653407 76.4985816-75.94624527 109.91492952-116.2667973 0.27616816-0.27616816 0.55233633-0.55233633 0.8285045-1.10467265 49.71026963-60.48082805 86.16446736-124.27567408 84.78362654-191.10836991H926.25224691c28.72148912 0 51.91961495-23.19812583 51.91961496-51.91961496s-23.19812583-51.91961495-51.91961496-51.91961493H97.74775309c-28.72148912 0-51.64344678 23.19812583-51.64344678 51.91961493S69.02626397 97.74775309 97.74775309 97.74775309h51.64344677c-1.65700898 66.83269584 34.79718875 130.62754187 84.50745838 190.83220174 0.55233633 0.55233633 0.8285045 1.10467265 1.10467266 1.38084082 33.41634791 40.32055203 72.35605913 78.98409508 109.91492952 116.2667973 35.34952507 35.07335691 71.52755463 70.97521831 101.07754823 105.77240705-29.27382545 34.79718875-65.45185502 70.69905013-101.07754823 105.77240705-37.55887038 37.00653407-76.4985816 75.94624527-109.91492952 116.2667973-0.27616816 0.27616816-0.55233633 0.8285045-0.8285045 1.10467265-49.71026963 60.20465988-86.16446736 123.99950592-84.50745837 191.10836991H97.74775309c-28.72148912 0-51.64344678 23.19812583-51.64344678 51.91961496s23.19812583 51.91961495 51.64344678 51.91961493h828.50449382c28.72148912 0 51.91961495-23.19812583 51.91961496-51.91961493S954.97373603 926.25224691 926.25224691 926.25224691zM297.14116794 201.31081482c-28.72148912-38.38737488-45.291579-72.35605913-43.35840186-103.56306173h516.43446784c1.93317715 31.2070026-14.63691274 65.17568685-43.35840186 103.56306173H297.14116794z m120.68548792 131.17987818l-27.61681645-27.61681647H633.51399243l-27.61681646 27.61681647c-32.03550709 31.75933893-64.89951868 64.34718237-94.17334413 97.21119395-28.99765728-32.86401158-61.86166887-65.45185502-93.89717598-97.21119395z m0 359.018614c32.03550709-31.75933893 64.89951868-64.34718237 94.17334414-97.21119395 29.27382545 33.14017975 62.13783703 65.45185502 94.17334414 97.21119395l27.61681645 27.61681647H390.48600757c8.83738127-9.11354943 17.67476253-17.9509307 27.34064829-27.61681647z m-164.04388978 234.74293991c-1.93317715-31.2070026 14.63691274-65.17568685 43.35840186-103.56306173h429.71766412c28.72148912 38.38737488 45.291579 72.35605913 43.35840186 103.56306173h-516.43446784z" p-id="6262"></path></symbol>'),this.addIcons('<symbol id="iconMoveToGroup" viewBox="0 0 1024 1024"><path d="M352 432c0 13.248 5.376 25.248 14.064 33.936l112 112c8.688 8.688 20.688 14.064 33.936 14.064s25.248-5.376 33.936-14.064l112-112a48 48 0 1 0-67.872-67.872L560 428.128V128a48 48 0 1 0-96 0v300.112l-30.064-30.064A48 48 0 0 0 352 432z m668.8 158.784l-127.648-335.056A48 48 0 0 0 848 224H608v96h206.912l91.44 240H752a48 48 0 0 0-48 48v48H320v-48a48 48 0 0 0-48-48H117.648l91.424-240H416v-96H176c-20.8 0-38.496 13.232-45.168 31.712L3.2 590.784c-2.064 5.344-3.2 11.152-3.2 17.216v304a48 48 0 0 0 48 48h928a48 48 0 0 0 48-48V608c0-6.064-1.12-11.872-3.2-17.216z" fill="#218dc5" p-id="6544"></path></symbol>'),this.addDock({config:{position:"RightBottom",size:{width:320,height:0},icon:"iconTimeLogger",title:"Timer Logger"},data:{text:"Timer Logger",timelogger:null},type:"dock_tab",init(){this.element.innerHTML='<div id="TimeLogger"/>',this.data.timelogger=new Ll({target:this.element.querySelector("#TimeLogger")})},destroy(){this.data.timelogger.$destroy(),this.data.timelogger=null,Re.pause()}}),Y.on("on-session-stop",o=>{let c=o.detail,r=c.export();if(r.elapsed==0)return;let a=this.i18n.msg_session_stop.replace("${title}",c.active.title).replace("${elapsed}",mt(r.elapsed/1e3));Ie.showMessage(a),it.add(r),it.save()});const i=o=>{let c=o.detail;Re.del(c)};Y.on("on-session-stop",i),Y.on("on-session-del",i),Y.on("open-settings",()=>{this.openSetting()}),Y.on("save-data",o=>{let{name:c,data:r}=o.detail;this.data[c]=r,this.saveData(c,r)}),Y.on("load-data",o=>{let{name:c,callback:r}=o.detail;this.loadData(c).then(a=>{this.data[c]=a,r(a)})}),Y.on("on-active-updated",o=>{let c=o.detail;if(this.data[et]=se.dump(),this.saveData(et,this.data[et]),console.log("on-active-updated",this.data[et]),!!c)for(let r in Re.sessions){let a=Re.sessions[r];a.active.id===c.id&&(a.active=c,a.updateActiveCallback())}}),Y.on("open-log-history",()=>{let c=new Ie.Dialog({title:this.i18n.dialog_history,content:'<div id="LogHistory" style="height: 100%;"/>',width:"500px",height:"500px"}).element.querySelector("#LogHistory");new cr({target:c})}),await it.init(this);let s=await this.loadData(et);this.data[et]=s||dl;for(let o of this.data[et])se.add(o,!1)}onunload(){this.saveData(Xi,this.data[Xi])}openSetting(){let i=new Ie.Dialog({title:this.i18n.dialog_setting,content:'<div id="ActiveConfig" style="height: 100%;"/>',width:"500px",height:"600px"}).element.querySelector("#ActiveConfig");new er({target:i})}addMenu(n){const i=new Ie.Menu("topBarSample");this.isMobile?i.fullscreen():i.open({x:n.right,y:n.bottom,isLeft:!0})}}module.exports=ar;
