{"ID":"20240317011912-9nt4f7l","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f630","id":"20240317011912-9nt4f7l","title":"MethodHandle","updated":"20240317012721"},"Children":[{"ID":"20240317011921-txck5hl","Type":"NodeParagraph","Properties":{"id":"20240317011921-txck5hl","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240317011921"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"MethodHandle"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​：方法句柄（又称方法指针），轻量级的 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"Method"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​，表示对一个函数的引用"}]},{"ID":"20240317011921-j27i95n","Type":"NodeParagraph","Properties":{"id":"20240317011921-j27i95n","updated":"20240317012017"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MethodHandle"},{"Type":"NodeText","Data":"​ 可以直接使用，可以代替反射的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Method"},{"Type":"NodeText","Data":"​，具有类似原生调用的效率，使用步骤如下："}]},{"ID":"20240317012018-c5bf352","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240317012018-c5bf352","updated":"20240317012721"},"Children":[{"ID":"20240317012019-i83iuu2","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240317012019-i83iuu2","updated":"20240317012019"},"Children":[{"ID":"20240317012019-oarqozx","Type":"NodeParagraph","Properties":{"id":"20240317012019-oarqozx","updated":"20240317012106"},"Children":[{"Type":"NodeText","Data":"创建 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MethodType"},{"Type":"NodeText","Data":"​ 对象，指定方法签名。每个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MethodHandle"},{"Type":"NodeText","Data":"​ 对应一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MethodType"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240317012107-od3lk7c","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240317012107-od3lk7c","updated":"20240317012721"},"Children":[{"ID":"20240317012107-b8j106k","Type":"NodeParagraph","Properties":{"id":"20240317012107-b8j106k","updated":"20240317012721"},"Children":[{"Type":"NodeText","Data":"调用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MethodHandles.lookup()"},{"Type":"NodeText","Data":"​​ 获取 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Lookup"},{"Type":"NodeText","Data":"​​ 对象，根据方法类型不同使用 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240316011000-so1i5zo","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"findStatic"},{"Type":"NodeText","Data":"​​、"},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240316011032-hpyomfe","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"findSpecial"},{"Type":"NodeText","Data":"​​、"},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240316011020-v4x83a6","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"findVirtual"},{"Type":"NodeText","Data":"​​ 查找方法"}]}]},{"ID":"20240317012208-6sbfrpc","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240317012208-6sbfrpc","updated":"20240317012248"},"Children":[{"ID":"20240317012208-dgz2t4w","Type":"NodeParagraph","Properties":{"id":"20240317012208-dgz2t4w","updated":"20240317012248"},"Children":[{"Type":"NodeText","Data":"使用获取的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MethodHandle"},{"Type":"NodeText","Data":"​ 方法句柄的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ionvoke"},{"Type":"NodeText","Data":"​ 或 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"invokeExact"},{"Type":"NodeText","Data":"​ 方法调用方法"}]}]}]},{"ID":"20240317011921-f45m1yw","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240317011921-f45m1yw","updated":"20240317012652"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public class MyClass {\n\n    public void foo(int i) {\n        System.out.println(i);\n    }\n}\n\npublic static void main(String[] args) throws Throwable {\n    // V(I)\n    MethodType methodType = MethodType.methodType(Void.TYPE, Integer.TYPE);\n    // void MyClass::foo(int)\n    MethodHandle foo = MethodHandles.lookup().findVirtual(MyClass.class, \"foo\", methodType);\n    // new MyClass().foo(10)\n    foo.invoke(new MyClass(), 10);\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240317012653-lze6rqb","Type":"NodeParagraph","Properties":{"id":"20240317012653-lze6rqb"}}]}