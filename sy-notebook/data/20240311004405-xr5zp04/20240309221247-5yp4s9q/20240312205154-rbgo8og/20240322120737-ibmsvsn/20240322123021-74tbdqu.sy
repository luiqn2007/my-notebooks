{"ID":"20240322123021-74tbdqu","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f630","id":"20240322123021-74tbdqu","title":"switch 实现","type":"doc","updated":"20240322130329"},"Children":[{"ID":"20240322124937-qrwljv6","Type":"NodeList","ListData":{},"Properties":{"id":"20240322124937-qrwljv6","updated":"20240322130329"},"Children":[{"ID":"20240322124939-apotzm9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240322124939-apotzm9","updated":"20240322130329"},"Children":[{"ID":"20240322124939-nsidsc7","Type":"NodeParagraph","Properties":{"id":"20240322124939-nsidsc7","updated":"20240322124942"},"Children":[{"Type":"NodeText","Data":"紧凑版："}]},{"ID":"20240322125042-on70yr1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240322125042-on70yr1","updated":"20240322125042"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"static int chooseNear(int i) {\n    switch (i) {\n        case 100: return 0;\n        case 101: return 1;\n        case 104: return 4;\n        default:  return -1;\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240322125745-bv8e7l3","Type":"NodeSuperBlock","Properties":{"id":"20240322125745-bv8e7l3","updated":"20240322130329"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240322125050-zrw4604","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240322125050-zrw4604","updated":"20240322125616"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"DexByteCodeTest.chooseNear:(I)I\n0000: packed-switch v1, 0000000c // 指向一个 packed-switch-payload 结构\n0003: const/4 v0, #int -1\n0004: return v0                  // default 分支\n0005: const/4 v0, #int 0\n0006: goto 0004                  // 100 分支\n0007: const/4 v0, #int 1\n0008: goto 0004                  // 101 分支\n0009: const/4 v0, #int 4\n000a: goto 0004                  // 104 分支\n000b: nop\n000c: packed-switch-payload\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240322125052-5oami61","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240322125052-5oami61","updated":"20240322130329"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"struct packed-switch-payload {\n    ushort ident;      // 0x0100\n    ushort size;       // case 数量\n    int    first_key;  // 起始 switch 值\n    int[]  targets;    // 所有 case 选项的代码地址\n                       //  [0] = 0x05\n                       //  [1] = 0x07\n                       //  [2] = 0x03\n                       //  [3] = 0x03\n                       //  [4] = 0x09\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]}]},{"ID":"20240322125031-v6r6yz5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240322125031-v6r6yz5","updated":"20240322130312"},"Children":[{"ID":"20240322125031-fcq9la9","Type":"NodeParagraph","Properties":{"id":"20240322125031-fcq9la9","updated":"20240322125040"},"Children":[{"Type":"NodeText","Data":"稀疏版："}]},{"ID":"20240322125924-95feamr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240322125924-95feamr","updated":"20240322125924"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"static int chooseFar(int i) {\n    switch (i) {\n        case 1  : return 1;\n        case 10 : return 10;\n        case 100: return 100;\n        default:  return -1;\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240322125918-jhzxhm3","Type":"NodeSuperBlock","Properties":{"id":"20240322125918-jhzxhm3","updated":"20240322130312"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240322125918-nlequ42","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240322125918-nlequ42","updated":"20240322130125"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"DexByteCodeTest.chooseFar:(I)I\n0000: sparse-switch v1, 0000000e // 指向一个 sparse-switch-data 结构\n0003: const/4 v0, #int -1\n0004: return v0                  // default 分支\n0005: const/4 v0, #int 1\n0006: goto 0004                  // 1 分支\n0007: const/16 v0, #int 10\n0009: goto 0004                  // 10 分支\n000a: const/16 v0, #int 100\n000c: goto 0004                  // 100 分支\n000d: nop\n000e: sparse-switch-data (14 units)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240322125918-ltazd4a","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240322125918-ltazd4a","updated":"20240322130312"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"struct packed-switch-payload {\n    ushort ident;    // 0x0200\n    ushort size;     // case 数量\n    int[]  keys;     // 升序排列的 case 值\n                     //  [1, 10, 100]\n    int[]  targets;  // 所有 case 选项的代码地址\n                     //  [0] = 0x05\n                     //  [1] = 0x07\n                     //  [2] = 0x0A\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]}]}]},{"ID":"20240322125904-39nuqap","Type":"NodeParagraph","Properties":{"id":"20240322125904-39nuqap"}}]}