{"ID":"20240515023218-k8qn9xj","Spec":"1","Type":"NodeDocument","Properties":{"icon":"mysql.ico","id":"20240515023218-k8qn9xj","title":"外键","type":"doc","updated":"20240515023236"},"Children":[{"ID":"20240515023236-xxijxoh","Type":"NodeParagraph","Properties":{"id":"20240515023236-xxijxoh","updated":"20240515023236"},"Children":[{"Type":"NodeText","Data":"若一张表上某字段指向了另一张表上的数据，称该表为另一张表的子表，另一张表为父表。"}]},{"ID":"20240515023236-d395o6e","Type":"NodeParagraph","Properties":{"id":"20240515023236-d395o6e","updated":"20240515023236"},"Children":[{"Type":"NodeText","Data":"若要将两张表建立外键关系，可以有两种办法。假设表 A 的 rid 字段指向了表 B 某条数据的 id 字段，其中建立的外键名可以自由定义："}]},{"ID":"20240515023236-furd9ha","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240515023236-furd9ha","updated":"20240515023236"},"Children":[{"Type":"NodeText","Data":"添加"}]},{"ID":"20240515023236-t5zsbup","Type":"NodeList","ListData":{},"Properties":{"id":"20240515023236-t5zsbup","updated":"20240515023236"},"Children":[{"ID":"20240515023236-ns6rifa","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515023236-ns6rifa","updated":"20240515023236"},"Children":[{"ID":"20240515023236-5h9kiq3","Type":"NodeParagraph","Properties":{"id":"20240515023236-5h9kiq3","updated":"20240515023236"},"Children":[{"Type":"NodeText","Data":"建表时添加："}]}]}]},{"ID":"20240515023236-3qjijix","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240515023236-3qjijix","updated":"20240515023236"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bXlzcWw="},{"Type":"NodeCodeBlockCode","Data":"create table A (\n    -- ... 其中已完成 rid 的定义\n    constraint 外键名 foreign key(rid) references B(id)\n) ...;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240515023236-79mm2pl","Type":"NodeList","ListData":{},"Properties":{"id":"20240515023236-79mm2pl","updated":"20240515023236"},"Children":[{"ID":"20240515023236-hj6kas5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515023236-hj6kas5","updated":"20240515023236"},"Children":[{"ID":"20240515023236-n0i5czw","Type":"NodeParagraph","Properties":{"id":"20240515023236-n0i5czw","updated":"20240515023236"},"Children":[{"Type":"NodeText","Data":"建表后添加："}]}]}]},{"ID":"20240515023236-yv9wovd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240515023236-yv9wovd","updated":"20240515023236"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bXlzcWw="},{"Type":"NodeCodeBlockCode","Data":"alter table A add constraint 外键名 foreign key(rid) references B(id);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240515023236-s36e59i","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240515023236-s36e59i","updated":"20240515023236"},"Children":[{"Type":"NodeText","Data":"删除"}]},{"ID":"20240515023236-3j308so","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240515023236-3j308so","updated":"20240515023236"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bXlzcWw="},{"Type":"NodeCodeBlockCode","Data":"alter table A drop foreign key 外键名;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240515023236-nd6aqhg","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240515023236-nd6aqhg","updated":"20240515023236"},"Children":[{"Type":"NodeText","Data":"行为"}]},{"ID":"20240515023236-ssd4wuv","Type":"NodeParagraph","Properties":{"id":"20240515023236-ssd4wuv","updated":"20240515023236"},"Children":[{"Type":"NodeText","Data":"当主表中某数据存在外键引用时，删除或修改该数据，其结果根据外键删除、更新行为发生变化："}]},{"ID":"20240515023236-7vgpcx4","Type":"NodeTable","TableAligns":[0,0,0],"Properties":{"colgroup":"||","id":"20240515023236-7vgpcx4","updated":"20240515023236"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"行为"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"说明"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"其他"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"NO ACTION"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"不允许删除或更新"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"默认值"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"RESTRICT"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"不允许删除或更新"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"等效于 NO ACTION"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"CASCADE"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"将关联数据同时删除或更新"}]},{"Type":"NodeTableCell","Data":"td"}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"SET NULL"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"将关联数据外键值设为 null"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"要求关联数据对应字段允许为 null"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"SET DEFAULT"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"将关联数据外键值设为默认值"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Innodb 暂不支持"}]}]}]},{"ID":"20240515023236-z7x812e","Type":"NodeParagraph","Properties":{"id":"20240515023236-z7x812e","updated":"20240515023236"},"Children":[{"Type":"NodeText","Data":"在添加外键时，在尾部添加 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"on 行为"},{"Type":"NodeText","Data":"​ 即可设定其行为"}]},{"ID":"20240515023236-ra0uyp8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240515023236-ra0uyp8","updated":"20240515023236"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bXlzcWw="},{"Type":"NodeCodeBlockCode","Data":"alter table A add constraint 外键名 foreign key(rid) references B(id) on set null;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}