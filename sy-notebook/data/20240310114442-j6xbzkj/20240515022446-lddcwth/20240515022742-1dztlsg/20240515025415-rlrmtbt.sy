{"ID":"20240515025415-rlrmtbt","Spec":"1","Type":"NodeDocument","Properties":{"icon":"mysql.ico","id":"20240515025415-rlrmtbt","title":"全局锁","type":"doc","updated":"20240515025428"},"Children":[{"ID":"20240515025428-faxtx3f","Type":"NodeParagraph","Properties":{"id":"20240515025428-faxtx3f","updated":"20240515025428"},"Children":[{"Type":"NodeText","Data":"对整个数据库实例加锁，加锁后数据库处于只读状态，DML、DDL、事务提交等都叫被阻塞"}]},{"ID":"20240515025428-2a7zul6","Type":"NodeParagraph","Properties":{"id":"20240515025428-2a7zul6","updated":"20240515025428"},"Children":[{"Type":"NodeText","Data":"常在全库的备份等场景需要获取一致性视图、保证数据完整性时使用"}]},{"ID":"20240515025428-bvvhsfc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240515025428-bvvhsfc","updated":"20240515025428"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bXlzcWw="},{"Type":"NodeCodeBlockCode","Data":"# 加全局锁\nflush tables with read lock;\n\n# 执行 SQL 语句\n# bash 语句\n# mysqldump -u用户名 -p密码 数据库名 \u003e 备份文件.sql\n\n# 释放锁\nunlock tables;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240515025428-av4a9i1","Type":"NodeParagraph","Properties":{"id":"20240515025428-av4a9i1","updated":"20240515025428"},"Children":[{"Type":"NodeText","Data":"在主库的全局锁锁定期间，无法进行任何更新，也不能执行主库同步的二进制日志，否则会导致主从延迟"}]},{"ID":"20240515025428-izsqbaj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240515025428-izsqbaj","updated":"20240515025428"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"# 不需要加锁的备份\n# 原理：镜像读\n# mysqldump --single-transaction -u用户名 -p密码 数据库名 \u003e 备份文件.sql\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}