{"ID":"20240515022742-1dztlsg","Spec":"1","Type":"NodeDocument","Properties":{"icon":"mysql.ico","id":"20240515022742-1dztlsg","title":"锁","type":"doc","updated":"20240515025523"},"Children":[{"ID":"20240515025358-tnl4t8p","Type":"NodeParagraph","Properties":{"id":"20240515025358-tnl4t8p","updated":"20240515025409"},"Children":[{"Type":"NodeText","Data":"保证并发访问的一致性、有效性的手段，按粒度可分为："}]},{"ID":"20240515025358-hsnspmz","Type":"NodeList","ListData":{},"Properties":{"id":"20240515025358-hsnspmz","updated":"20240515025523"},"Children":[{"ID":"20240515025358-ixmwesv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515025358-ixmwesv","updated":"20240515025513"},"Children":[{"ID":"20240515025358-k1ojbo3","Type":"NodeParagraph","Properties":{"id":"20240515025358-k1ojbo3","updated":"20240515025513"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240515025415-rlrmtbt","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"全局锁"},{"Type":"NodeText","Data":"：锁数据库中所有表"}]}]},{"ID":"20240515025358-mjdq06q","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515025358-mjdq06q","updated":"20240515025520"},"Children":[{"ID":"20240515025358-l7q8s2d","Type":"NodeParagraph","Properties":{"id":"20240515025358-l7q8s2d","updated":"20240515025520"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240515025437-upfo3er","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"表级锁"},{"Type":"NodeText","Data":"：锁操作的整张表"}]}]},{"ID":"20240515025358-q515842","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515025358-q515842","updated":"20240515025523"},"Children":[{"ID":"20240515025358-gl3kf4o","Type":"NodeParagraph","Properties":{"id":"20240515025358-gl3kf4o","updated":"20240515025523"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240515025506-t1qa33r","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"行级锁"},{"Type":"NodeText","Data":"：锁操作的行"}]}]}]},{"ID":"20240515025358-wjvdd10","Type":"NodeParagraph","Properties":{"id":"20240515025358-wjvdd10","updated":"20240515025358"},"Children":[{"Type":"NodeText","Data":"锁是一种资源，或者说是一种标记，在资源未被释放（存在标记）时某些行为将被限制（阻塞），等到锁被释放（标记被清除）时继续执行"}]},{"ID":"20240515025358-7s8xht1","Type":"NodeParagraph","Properties":{"id":"20240515025358-7s8xht1","updated":"20240515025358"},"Children":[{"Type":"NodeText","Data":"查看元数据锁可查询 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"metadata_locks"},{"Type":"NodeText","Data":"​ 表"}]},{"ID":"20240515025358-8qg412z","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240515025358-8qg412z","updated":"20240515025358"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bXlzcWw="},{"Type":"NodeCodeBlockCode","Data":"select object_type, object_schema, object_name, lock_type, lock_duration\n    from performance_schema.metadata_locks;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240515025358-btlc63l","Type":"NodeParagraph","Properties":{"id":"20240515025358-btlc63l","updated":"20240515025358"},"Children":[{"Type":"NodeText","Data":"查看除元数据锁外其他锁可查询 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"data_locks"},{"Type":"NodeText","Data":"​ 表"}]},{"ID":"20240515025358-m8o0y04","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240515025358-m8o0y04","updated":"20240515025358"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bXlzcWw="},{"Type":"NodeCodeBlockCode","Data":"select object_schema, object_name, index_name, lock_type, lock_mode, lock_data\n    from performance_schema.data_locks;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}