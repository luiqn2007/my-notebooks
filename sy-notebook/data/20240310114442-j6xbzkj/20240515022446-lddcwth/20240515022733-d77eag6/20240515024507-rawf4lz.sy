{"ID":"20240515024507-rawf4lz","Spec":"1","Type":"NodeDocument","Properties":{"icon":"mysql.ico","id":"20240515024507-rawf4lz","title":"order by","type":"doc","updated":"20240515024524"},"Children":[{"ID":"20240515024515-sz3phw3","Type":"NodeParagraph","Properties":{"id":"20240515024515-sz3phw3","updated":"20240515024515"},"Children":[{"Type":"NodeText","Data":"MySQL 具有两种排序方式，优化主要是将 Using filesort 通过建立索引转变成 Using index"}]},{"ID":"20240515024515-1gy7uwg","Type":"NodeList","ListData":{},"Properties":{"id":"20240515024515-1gy7uwg","updated":"20240515024515"},"Children":[{"ID":"20240515024515-svaxsnk","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515024515-svaxsnk","updated":"20240515024515"},"Children":[{"ID":"20240515024515-a4ooa4a","Type":"NodeParagraph","Properties":{"id":"20240515024515-a4ooa4a","updated":"20240515024515"},"Children":[{"Type":"NodeText","Data":"Using index：通过有序的索引扫描直接返回数据不需要额外的排序"}]}]},{"ID":"20240515024515-li1pa6k","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515024515-li1pa6k","updated":"20240515024515"},"Children":[{"ID":"20240515024515-6nykbbi","Type":"NodeParagraph","Properties":{"id":"20240515024515-6nykbbi","updated":"20240515024515"},"Children":[{"Type":"NodeText","Data":"Using filesort：所有不通过索引直接返回结果的排序。一般 通过表索引或全表扫描，去读到满足条件的行，之后在排序缓冲区 sort buffer 中排序（超出缓冲区大小则使用磁盘文件）"}]}]}]},{"ID":"20240515024515-jv47m6b","Type":"NodeParagraph","Properties":{"id":"20240515024515-jv47m6b","updated":"20240515024515"},"Children":[{"Type":"NodeText","Data":"尽量使使用的索引包含 order by 的键，使用联合索引且需要与联合索引的字段顺序相同，各字段排序方式全部相同或全部相反（排序方式写在字段之后，默认 asc）"}]},{"ID":"20240515024515-32u0r5x","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240515024515-32u0r5x","updated":"20240515024515"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bXlzcWw="},{"Type":"NodeCodeBlockCode","Data":"create index 索引名 on 表名(字段1 asc, 字段2 desc, ...);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240515024523-grpfp0h","Type":"NodeBlockquote","Properties":{"id":"20240515024523-grpfp0h","updated":"20240515024524"},"Children":[{"ID":"20240515024519-y28djk6","Type":"NodeParagraph","Properties":{"id":"20240515024519-y28djk6","updated":"20240515024524"},"Children":[{"Type":"NodeText","Data":"order by 原则："}]},{"ID":"20240515024519-fpl4m93","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240515024519-fpl4m93","updated":"20240515024524"},"Children":[{"ID":"20240515024519-e8ddogx","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240515024519-e8ddogx","updated":"20240515024519"},"Children":[{"ID":"20240515024519-aqnq6oc","Type":"NodeParagraph","Properties":{"id":"20240515024519-aqnq6oc","updated":"20240515024519"},"Children":[{"Type":"NodeText","Data":"根据排序字段建立索引，多字段联合索引遵循最左前缀法则"}]}]},{"ID":"20240515024519-uvvmoll","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240515024519-uvvmoll","updated":"20240515024519"},"Children":[{"ID":"20240515024519-urth2x3","Type":"NodeParagraph","Properties":{"id":"20240515024519-urth2x3","updated":"20240515024519"},"Children":[{"Type":"NodeText","Data":"使用覆盖索引"}]}]},{"ID":"20240515024519-bxolykd","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240515024519-bxolykd","updated":"20240515024519"},"Children":[{"ID":"20240515024519-lrwf8pb","Type":"NodeParagraph","Properties":{"id":"20240515024519-lrwf8pb","updated":"20240515024519"},"Children":[{"Type":"NodeText","Data":"多字段排序，升序、降序不同时，联合排序需要声明 ASC DESC"}]}]},{"ID":"20240515024519-6rd0yes","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20240515024519-6rd0yes","updated":"20240515024519"},"Children":[{"ID":"20240515024519-xj0ug8k","Type":"NodeParagraph","Properties":{"id":"20240515024519-xj0ug8k","updated":"20240515024519"},"Children":[{"Type":"NodeText","Data":"不可避免需要用到 filesort，可以在数据量较大的情况下适当提高缓冲区大小（sort_buffer_size，默认 256K）"}]}]}]},{"Type":"NodeBlockquoteMarker","Data":"\u003e"}]}]}