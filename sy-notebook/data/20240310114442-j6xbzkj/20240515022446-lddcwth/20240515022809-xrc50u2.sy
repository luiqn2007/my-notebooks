{"ID":"20240515022809-xrc50u2","Spec":"1","Type":"NodeDocument","Properties":{"icon":"mysql.ico","id":"20240515022809-xrc50u2","title":"分库分表及读写分离","type":"doc","updated":"20240515030425"},"Children":[{"ID":"20240515030425-3xxz3vh","Type":"NodeParagraph","Properties":{"id":"20240515030425-3xxz3vh","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"分库分表主要解决数据库数据量过大时，产生的以下问题："}]},{"ID":"20240515030425-unokcyg","Type":"NodeList","ListData":{},"Properties":{"id":"20240515030425-unokcyg","updated":"20240515030425"},"Children":[{"ID":"20240515030425-qwt6g6s","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-qwt6g6s","updated":"20240515030425"},"Children":[{"ID":"20240515030425-guffmdx","Type":"NodeParagraph","Properties":{"id":"20240515030425-guffmdx","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"IO 瓶颈"}]},{"ID":"20240515030425-ov8a1v0","Type":"NodeList","ListData":{},"Properties":{"id":"20240515030425-ov8a1v0","updated":"20240515030425"},"Children":[{"ID":"20240515030425-vwvc2fb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-vwvc2fb","updated":"20240515030425"},"Children":[{"ID":"20240515030425-mnbr9rn","Type":"NodeParagraph","Properties":{"id":"20240515030425-mnbr9rn","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"热点数据太多，数据库缓存不足，产生大量磁盘 IO"}]}]},{"ID":"20240515030425-u8bslg3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-u8bslg3","updated":"20240515030425"},"Children":[{"ID":"20240515030425-y8xt220","Type":"NodeParagraph","Properties":{"id":"20240515030425-y8xt220","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"请求数据过多，产生网络 IO"}]}]}]}]},{"ID":"20240515030425-lko8smn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-lko8smn","updated":"20240515030425"},"Children":[{"ID":"20240515030425-mtxk0y8","Type":"NodeParagraph","Properties":{"id":"20240515030425-mtxk0y8","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"CPU 瓶颈：排序、分组、联查、聚合等 SQL 消耗大量 CPU 资源"}]}]}]},{"ID":"20240515030428-clfmyjb","Type":"NodeParagraph","Properties":{"id":"20240515030428-clfmyjb","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240515030437"},"Children":[{"Type":"NodeText","Data":"分库分表：将存储于单台服务器中的数据分散的存储到多台服务器中， 缓解单一服务器的性能瓶颈"}]},{"ID":"20240515030425-z51pxmr","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240515030425-z51pxmr","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"拆分策略"}]},{"ID":"20240515030425-xlqqo0n","Type":"NodeParagraph","Properties":{"id":"20240515030425-xlqqo0n","updated":"20240515030426"},"Children":[{"Type":"NodeText","Data":"根据拆分维度分为垂直拆分和水平拆分，根据拆分粒度分为分库和分表"}]},{"ID":"20240515030425-cmyp4k1","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240515030425-cmyp4k1","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"垂直分库"}]},{"ID":"20240515030500-qgpfus2","Type":"NodeSuperBlock","Properties":{"id":"20240515030500-qgpfus2","updated":"20240515030501"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240515030453-f4szyyq","Type":"NodeSuperBlock","Properties":{"id":"20240515030453-f4szyyq","updated":"20240515030501"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240515030425-lgsovbs","Type":"NodeParagraph","Properties":{"id":"20240515030425-lgsovbs","updated":"20240515030453"},"Children":[{"Type":"NodeText","Data":"以表为依据，根据业务将不同表拆分到不同数据库中，以缓解单个库数据过于庞大、访问过于频繁的问题"}]},{"ID":"20240515030425-86m8u32","Type":"NodeList","ListData":{},"Properties":{"id":"20240515030425-86m8u32","updated":"20240515030453"},"Children":[{"ID":"20240515030425-b18sl5s","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-b18sl5s","updated":"20240515030425"},"Children":[{"ID":"20240515030425-l2lf727","Type":"NodeParagraph","Properties":{"id":"20240515030425-l2lf727","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"每个库的表结构不同"}]}]},{"ID":"20240515030425-h36lv2o","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-h36lv2o","updated":"20240515030425"},"Children":[{"ID":"20240515030425-c3v1er7","Type":"NodeParagraph","Properties":{"id":"20240515030425-c3v1er7","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"每个库的数据不同"}]}]},{"ID":"20240515030425-tuikvve","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-tuikvve","updated":"20240515030425"},"Children":[{"ID":"20240515030425-1j78ymb","Type":"NodeParagraph","Properties":{"id":"20240515030425-1j78ymb","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"全部数据为所有库的并集"}]}]}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240515030425-e7mwu9a","Type":"NodeParagraph","Properties":{"id":"20240515030425-e7mwu9a","updated":"20240515030501"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20230920011251"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20230920011251-20240515030444-nuf9jm3.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240515030425-wc68yub","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240515030425-wc68yub","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"垂直分表"}]},{"ID":"20240515030514-3ywmvt8","Type":"NodeSuperBlock","Properties":{"id":"20240515030514-3ywmvt8","updated":"20240515030514"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240515030512-zlxubqz","Type":"NodeSuperBlock","Properties":{"id":"20240515030512-zlxubqz","updated":"20240515030514"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240515030425-jf5d62n","Type":"NodeParagraph","Properties":{"id":"20240515030425-jf5d62n","updated":"20240515030512"},"Children":[{"Type":"NodeText","Data":"以字段为依据，根据字段属性将不同字段拆分到不同表中，以缓解单个表数据过于庞大、访问过于频繁的问题"}]},{"ID":"20240515030425-9lap2o9","Type":"NodeList","ListData":{},"Properties":{"id":"20240515030425-9lap2o9","updated":"20240515030512"},"Children":[{"ID":"20240515030425-xej3tpc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-xej3tpc","updated":"20240515030425"},"Children":[{"ID":"20240515030425-m8adbfy","Type":"NodeParagraph","Properties":{"id":"20240515030425-m8adbfy","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"每个表的表结构不同"}]}]},{"ID":"20240515030425-8ffk40k","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-8ffk40k","updated":"20240515030425"},"Children":[{"ID":"20240515030425-1a1149l","Type":"NodeParagraph","Properties":{"id":"20240515030425-1a1149l","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"每个表的数据不同，通常通过一列主键或外键相关联"}]}]},{"ID":"20240515030425-lz8zrao","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-lz8zrao","updated":"20240515030425"},"Children":[{"ID":"20240515030425-pl2wmpn","Type":"NodeParagraph","Properties":{"id":"20240515030425-pl2wmpn","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"全部表数据为所有表的并集"}]}]}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240515030506-w444bpi","Type":"NodeParagraph","Properties":{"id":"20240515030506-w444bpi","updated":"20240515030514"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20230920011342"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20230920011342-20240515030506-0jzsz5b.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240515030425-8tmibgp","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240515030425-8tmibgp","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"水平分库"}]},{"ID":"20240515030525-9ri5enp","Type":"NodeSuperBlock","Properties":{"id":"20240515030525-9ri5enp","updated":"20240515030526"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240515030524-4jpqxn8","Type":"NodeSuperBlock","Properties":{"id":"20240515030524-4jpqxn8","updated":"20240515030526"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240515030425-3ystpjz","Type":"NodeParagraph","Properties":{"id":"20240515030425-3ystpjz","updated":"20240515030524"},"Children":[{"Type":"NodeText","Data":"以字段为依据，按一定策略将一个库拆分到多个库中"}]},{"ID":"20240515030425-ggedj2b","Type":"NodeList","ListData":{},"Properties":{"id":"20240515030425-ggedj2b","updated":"20240515030524"},"Children":[{"ID":"20240515030425-6muznf2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-6muznf2","updated":"20240515030425"},"Children":[{"ID":"20240515030425-re4c2mi","Type":"NodeParagraph","Properties":{"id":"20240515030425-re4c2mi","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"每个库的表结构相同"}]}]},{"ID":"20240515030425-6hm6qu6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-6hm6qu6","updated":"20240515030425"},"Children":[{"ID":"20240515030425-rcy54ep","Type":"NodeParagraph","Properties":{"id":"20240515030425-rcy54ep","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"每个库的数据不同"}]}]},{"ID":"20240515030425-tv17ofp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-tv17ofp","updated":"20240515030425"},"Children":[{"ID":"20240515030425-l355doi","Type":"NodeParagraph","Properties":{"id":"20240515030425-l355doi","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"全部数据为所有库的并集"}]}]}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240515030520-kfgff0s","Type":"NodeParagraph","Properties":{"id":"20240515030520-kfgff0s","updated":"20240515030526"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20230920011741"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20230920011741-20240515030520-znbiji6.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240515030425-rb5r0ho","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240515030425-rb5r0ho","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"水平分表"}]},{"ID":"20240515030535-03bpbfl","Type":"NodeSuperBlock","Properties":{"id":"20240515030535-03bpbfl","updated":"20240515030536"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240515030534-amtxukd","Type":"NodeSuperBlock","Properties":{"id":"20240515030534-amtxukd","updated":"20240515030536"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240515030425-05urcsy","Type":"NodeParagraph","Properties":{"id":"20240515030425-05urcsy","updated":"20240515030534"},"Children":[{"Type":"NodeText","Data":"以字段为依据，按一定策略将一个表拆分到多个表中"}]},{"ID":"20240515030425-jgarzo5","Type":"NodeList","ListData":{},"Properties":{"id":"20240515030425-jgarzo5","updated":"20240515030534"},"Children":[{"ID":"20240515030425-fnbw2q5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-fnbw2q5","updated":"20240515030425"},"Children":[{"ID":"20240515030425-dmspdqs","Type":"NodeParagraph","Properties":{"id":"20240515030425-dmspdqs","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"每个表的表结构相同"}]}]},{"ID":"20240515030425-npcx1cr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-npcx1cr","updated":"20240515030425"},"Children":[{"ID":"20240515030425-k8aymrj","Type":"NodeParagraph","Properties":{"id":"20240515030425-k8aymrj","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"每个表的数据不同"}]}]},{"ID":"20240515030425-i6nqk74","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-i6nqk74","updated":"20240515030425"},"Children":[{"ID":"20240515030425-sv5v8kq","Type":"NodeParagraph","Properties":{"id":"20240515030425-sv5v8kq","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"全部表数据为所有表的并集"}]}]}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240515030425-tr39j1z","Type":"NodeParagraph","Properties":{"id":"20240515030425-tr39j1z","updated":"20240515030536"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20230920011912"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20230920011912-20240515030530-icb3bai.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240515030425-rxmjg48","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240515030425-rxmjg48","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"读写分离"}]},{"ID":"20240515030425-n7czmz5","Type":"NodeParagraph","Properties":{"id":"20240515030425-n7czmz5","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"读写分离基于主从数据库，将数据库读写操作分开对应不同数据库服务器。主数据库提供写操作，从数据库提供读操作。"}]},{"ID":"20240515030425-7ng77re","Type":"NodeParagraph","Properties":{"id":"20240515030425-7ng77re","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"MySQL 的读写分离也通过 MyCat，同时支持 Oracle 和 SQL Server 等"}]},{"ID":"20240515030425-bo7aiyq","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240515030425-bo7aiyq","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"实现"}]},{"ID":"20240515030425-odxxdkq","Type":"NodeParagraph","Properties":{"id":"20240515030425-odxxdkq","updated":"20240515030553"},"Children":[{"Type":"NodeText","Data":"目前主要的实现技术有两个"}]},{"ID":"20240515030425-a5zdv54","Type":"NodeList","ListData":{},"Properties":{"id":"20240515030425-a5zdv54","updated":"20240515030553"},"Children":[{"ID":"20240515030425-6g378eg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-6g378eg","updated":"20240515030425"},"Children":[{"ID":"20240515030425-67tled5","Type":"NodeParagraph","Properties":{"id":"20240515030425-67tled5","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"shardingJDBC：基于 AOP，在应用程序中对 SQL 进行拦截、解析、改写、路由，只支持 Java，性能较高"}]}]},{"ID":"20240515030425-puqtczu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240515030425-puqtczu","updated":"20240515030425"},"Children":[{"ID":"20240515030425-rtlmxlx","Type":"NodeParagraph","Properties":{"id":"20240515030425-rtlmxlx","updated":"20240515030425"},"Children":[{"Type":"NodeText","Data":"MyCat：数据库中间件，根据数据库请求进行改写和路由，性能不及前者，详见 [[MyCat 中间件]]"}]}]}]},{"ID":"20240515030545-bgcdmgr","Type":"NodeParagraph","Properties":{"id":"20240515030545-bgcdmgr","updated":"20240515030553"}}]}