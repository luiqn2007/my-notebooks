{"ID":"20240608024348-4fyamf5","Spec":"1","Type":"NodeDocument","Properties":{"icon":"docker.png","id":"20240608024348-4fyamf5","title":"单体应用容器化","type":"doc","updated":"20240608030740"},"Children":[{"ID":"20240608024359-2a7e2t7","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240608024359-2a7e2t7","updated":"20240608030740"},"Children":[{"ID":"20240608024359-4mvzlqn","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240608024359-4mvzlqn","updated":"20240608024359"},"Children":[{"ID":"20240608024359-9um1ja2","Type":"NodeParagraph","Properties":{"id":"20240608024359-9um1ja2","updated":"20240608024359"},"Children":[{"Type":"NodeText","Data":"获取应用代码"}]},{"ID":"20240608024510-i1yq7dl","Type":"NodeParagraph","Properties":{"id":"20240608024510-i1yq7dl","updated":"20240608024541"},"Children":[{"Type":"NodeText","Data":"创建 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"psweb"},{"Type":"NodeText","Data":"​ 目录并将应用复制进去，这里是一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"web"},{"Type":"NodeText","Data":"​ 应用"}]}]},{"ID":"20240608024359-kemz7ym","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240608024359-kemz7ym","updated":"20240608024359"},"Children":[{"ID":"20240608024359-qwp92mm","Type":"NodeParagraph","Properties":{"id":"20240608024359-qwp92mm","updated":"20240608030040"},"Children":[{"Type":"NodeText","Data":"分析 Dockerfile，创建 Dockerfile 文件"}]},{"ID":"20240608024542-lz241ev","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240608024542-lz241ev","updated":"20240608024553"},"Children":[{"ID":"20240608024553-tjalh3u","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240608024553-tjalh3u","updated":"20240608024553"},"Children":[{"ID":"20240608024553-qtktesl","Type":"NodeParagraph","Properties":{"id":"20240608024553-qtktesl","updated":"20240608030013"},"Children":[{"Type":"NodeText","Data":"基础镜像层：容器模拟的系统、环境等，这里使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"alpine"},{"Type":"NodeText","Data":"​，一个轻量级 Linux 环境"}]},{"ID":"20240608030013-fri5pfc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240608030013-fri5pfc","updated":"20240608030022"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"ZG9ja2Vy"},{"Type":"NodeCodeBlockCode","Data":"FROM alpine\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240608025847-26ei243","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240608025847-26ei243"},"Children":[{"ID":"20240608025847-58zamy3","Type":"NodeParagraph","Properties":{"id":"20240608025847-58zamy3","updated":"20240608030059"},"Children":[{"Type":"NodeText","Data":"设置元信息，当前镜像的维护者"}]},{"ID":"20240608030107-yb09c52","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240608030107-yb09c52","updated":"20240608030132"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"ZG9ja2Vy"},{"Type":"NodeCodeBlockCode","Data":"LABEL mantainer=\"abc@hotmail.com\"\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240608030102-bnd1wa7","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240608030102-bnd1wa7"},"Children":[{"ID":"20240608030102-cph1lf0","Type":"NodeParagraph","Properties":{"id":"20240608030102-cph1lf0","updated":"20240608030156"},"Children":[{"Type":"NodeText","Data":"安装依赖，这里需要 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"node"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240608030203-yxj9ko3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240608030203-yxj9ko3","updated":"20240608030226"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"ZG9ja2Vy"},{"Type":"NodeCodeBlockCode","Data":"RUN apk add --update nodejs nodejs-npm\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240608030156-dccbz4v","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20240608030156-dccbz4v"},"Children":[{"ID":"20240608030156-5js6649","Type":"NodeParagraph","Properties":{"id":"20240608030156-5js6649","updated":"20240608030249"},"Children":[{"Type":"NodeText","Data":"复制源码并设置为工作目录"}]},{"ID":"20240608030339-rv28hpk","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240608030339-rv28hpk","updated":"20240608030355"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"ZG9ja2Vy"},{"Type":"NodeCodeBlockCode","Data":"COPY . /src\nWORKDIR /src\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240608030231-ogpepr7","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20240608030231-ogpepr7"},"Children":[{"ID":"20240608030231-gwthct0","Type":"NodeParagraph","Properties":{"id":"20240608030231-gwthct0","updated":"20240608030318"},"Children":[{"Type":"NodeText","Data":"安装 npm 依赖"}]},{"ID":"20240608030357-rsd5ccg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240608030357-rsd5ccg","updated":"20240608030405"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"ZG9ja2Vy"},{"Type":"NodeCodeBlockCode","Data":"RUN npm install\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240608030318-7jf23dp","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ni4=","Num":6},"Properties":{"id":"20240608030318-7jf23dp"},"Children":[{"ID":"20240608030318-wwn7z85","Type":"NodeParagraph","Properties":{"id":"20240608030318-wwn7z85","updated":"20240608030327"},"Children":[{"Type":"NodeText","Data":"设置端口"}]},{"ID":"20240608030414-xinhfzr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240608030414-xinhfzr","updated":"20240608030421"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"ZG9ja2Vy"},{"Type":"NodeCodeBlockCode","Data":"EXPOSE 8080\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240608030327-3v7e8rt","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ny4=","Num":7},"Properties":{"id":"20240608030327-3v7e8rt"},"Children":[{"ID":"20240608030327-v006zv6","Type":"NodeParagraph","Properties":{"id":"20240608030327-v006zv6","updated":"20240608030331"},"Children":[{"Type":"NodeText","Data":"指定入口"}]},{"ID":"20240608030425-830q0dz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240608030425-830q0dz","updated":"20240608030450"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"ZG9ja2Vy"},{"Type":"NodeCodeBlockCode","Data":"ENTRYPOINT [\"node\", \"./app.js\"]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]},{"ID":"20240608024359-3vqlzad","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240608024359-3vqlzad","updated":"20240608030740"},"Children":[{"ID":"20240608024359-qwgbdig","Type":"NodeParagraph","Properties":{"id":"20240608024359-qwgbdig","updated":"20240608024359"},"Children":[{"Type":"NodeText","Data":"构建应用镜像"}]},{"ID":"20240608030452-xl02jlq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240608030452-xl02jlq","updated":"20240608030508"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker image build -t web:latest\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240608030516-dlv5nfm","Type":"NodeParagraph","Properties":{"id":"20240608030516-dlv5nfm","updated":"20240608030716"},"Children":[{"Type":"NodeText","Data":"创建后可以发布到 Docker Hub，需要提供 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"registry=docker.os"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"tag=latest"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"repository(无默认值)"},{"Type":"NodeText","Data":"​ 三个值"}]},{"ID":"20240608030529-3ouni9r","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240608030529-3ouni9r","updated":"20240608030740"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"# 登录 Docker Hub 账号\ndocker login\ndocker image tag web:latest tddocker/web:latest\ndocker image push tddocker/web:latest\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240608024359-xjli0aj","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20240608024359-xjli0aj","updated":"20240608024359"},"Children":[{"ID":"20240608024359-8kc0gwd","Type":"NodeParagraph","Properties":{"id":"20240608024359-8kc0gwd","updated":"20240608024359"},"Children":[{"Type":"NodeText","Data":"运行应用"}]}]},{"ID":"20240608024359-qlvmqet","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20240608024359-qlvmqet","updated":"20240608024359"},"Children":[{"ID":"20240608024359-18gevds","Type":"NodeParagraph","Properties":{"id":"20240608024359-18gevds","updated":"20240608024359"},"Children":[{"Type":"NodeText","Data":"测试应用"}]}]},{"ID":"20240608024359-ej616un","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ni4=","Num":6},"Properties":{"id":"20240608024359-ej616un","updated":"20240608024359"},"Children":[{"ID":"20240608024359-50nchmx","Type":"NodeParagraph","Properties":{"id":"20240608024359-50nchmx","updated":"20240608024359"},"Children":[{"Type":"NodeText","Data":"应用化细节"}]}]}]}]}