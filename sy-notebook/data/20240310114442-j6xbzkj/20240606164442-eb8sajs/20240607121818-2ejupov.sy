{"ID":"20240607121818-2ejupov","Spec":"1","Type":"NodeDocument","Properties":{"icon":"docker.png","id":"20240607121818-2ejupov","title":"Docker 容器","type":"doc","updated":"20240608020457"},"Children":[{"ID":"20240608004204-w2nj5s8","Type":"NodeParagraph","Properties":{"id":"20240608004204-w2nj5s8","updated":"20240608004315"},"Children":[{"Type":"NodeText","Data":"默认情况下，Docker 为容器提供无限的资源，尽可能使用宿主的资源。也可以通过参数限定。"}]},{"ID":"20240608004332-bzncln8","Type":"NodeParagraph","Properties":{"id":"20240608004332-bzncln8","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240608004432"},"Children":[{"Type":"NodeText","Data":"许多功能需要宿主机内核支持，可以使用 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"docker info"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 查看，不支持的功能会出现在最后的 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"WARNING"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 条目中"}]},{"ID":"20240607121818-3gu5g8g","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240607121818-3gu5g8g","updated":"20240608020457"},"Children":[{"Type":"NodeText","Data":"内存限制"}]},{"ID":"20240608004122-6g0lg97","Type":"NodeParagraph","Properties":{"id":"20240608004122-6g0lg97","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240608004701"},"Children":[{"Type":"NodeText","Data":"OOM 异常：Out of memory exception，没有足够内存进行任务，通常由于内存溢出、内存泄漏等问题产生"}]},{"ID":"20240608004701-43my8p8","Type":"NodeParagraph","Properties":{"id":"20240608004701-43my8p8","updated":"20240608004836"},"Children":[{"Type":"NodeText","Data":"产生 OOM 异常时，dockerd 通过调整 Docker 守护进程优先级减轻被系统杀死的风险。"}]},{"ID":"20240608004908-nmxx43j","Type":"NodeParagraph","Properties":{"id":"20240608004908-nmxx43j","updated":"20240608005134"},"Children":[{"Type":"NodeText","Data":"每个容器在 Linux 也有自己的分数："}]},{"ID":"20240608005134-jind4qa","Type":"NodeList","ListData":{},"Properties":{"id":"20240608005134-jind4qa","updated":"20240608011045"},"Children":[{"ID":"20240608005135-zxsalp2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608005135-zxsalp2","updated":"20240608005135"},"Children":[{"ID":"20240608005135-plis3k7","Type":"NodeParagraph","Properties":{"id":"20240608005135-plis3k7","updated":"20240608005315"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--oom-score-adj:\u0026lt;score\u0026gt;"},{"Type":"NodeText","Data":"​：指定容器评分，评分高的优先被杀，范围 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"[-1000, 1000]"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20240608005404-h7v0wv7","Type":"NodeParagraph","Properties":{"id":"20240608005404-h7v0wv7","updated":"20240608005459"},"Children":[{"Type":"NodeText","Data":"内存限制为一个整数接 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"b"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"k"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"m"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"g"},{"Type":"NodeText","Data":"​ 后缀，表示 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"B"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"KB"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MB"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"GB"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240608005728-2cvax55","Type":"NodeList","ListData":{},"Properties":{"id":"20240608005728-2cvax55","updated":"20240608005746"},"Children":[{"ID":"20240608005746-poy6fop","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608005746-poy6fop","updated":"20240608005746"},"Children":[{"ID":"20240608005746-5ggwza6","Type":"NodeParagraph","Properties":{"id":"20240608005746-5ggwza6","updated":"20240608005855"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--memory"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-m"},{"Type":"NodeText","Data":"​：内存可用最大值。设置该参数后允许的最小值为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"4m"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240608005856-7nl4mmy","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608005856-7nl4mmy"},"Children":[{"ID":"20240608005856-zj24jy1","Type":"NodeParagraph","Properties":{"id":"20240608005856-zj24jy1","updated":"20240608010005"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--kernel-memory"},{"Type":"NodeText","Data":"​：容器可使用的最大内核内存量，可能会阻塞宿主机"}]}]}]},{"ID":"20240608010009-8tqcbvj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240608010009-8tqcbvj","updated":"20240608010039"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker run -it name streel --memory 256m\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240608010213-6s953aw","Type":"NodeList","ListData":{},"Properties":{"id":"20240608010213-6s953aw","updated":"20240608011055"},"Children":[{"ID":"20240608010214-8vnqmlf","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608010214-8vnqmlf","updated":"20240608011028"},"Children":[{"ID":"20240608010214-0dkqq4n","Type":"NodeParagraph","Properties":{"id":"20240608010214-0dkqq4n","updated":"20240608011028"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--memory-reservation"},{"Type":"NodeText","Data":"​：允许指定小于 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--memory"},{"Type":"NodeText","Data":"​ 的软限制，当宿主机内存不足时会激活该限制，仅 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--memory"},{"Type":"NodeText","Data":"​ 设置后可用"}]}]},{"ID":"20240608005150-uk42lkd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608005150-uk42lkd","updated":"20240608011055"},"Children":[{"ID":"20240608005150-171i0ps","Type":"NodeParagraph","Properties":{"id":"20240608005150-171i0ps","updated":"20240608011045"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--oom-kill-disable"},{"Type":"NodeText","Data":"​：关闭 OOM 优先级机制，仅 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--memory"},{"Type":"NodeText","Data":"​ 设置后可用"}]}]}]},{"ID":"20240608010955-k72a7bf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240608010955-k72a7bf","updated":"20240608011129"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker run -it name streel --memory 256m --memory-reservation 128m\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240608011155-cb271vt","Type":"NodeParagraph","Properties":{"id":"20240608011155-cb271vt","updated":"20240608011351"},"Children":[{"Type":"NodeText","Data":"所有内存限制可以通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/sys/fs/cgroup/memory/docker/\u0026lt;container id\u0026gt;/memory"},{"Type":"NodeText","Data":"​ 查询，单位字节"}]},{"ID":"20240608011252-e43myt8","Type":"NodeList","ListData":{},"Properties":{"id":"20240608011252-e43myt8","updated":"20240608011631"},"Children":[{"ID":"20240608011253-6a7f0d2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608011253-6a7f0d2","updated":"20240608011253"},"Children":[{"ID":"20240608011253-9kgbljv","Type":"NodeParagraph","Properties":{"id":"20240608011253-9kgbljv","updated":"20240608011405"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".../memory.limit_imen_bytes"},{"Type":"NodeText","Data":"​："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-memory"},{"Type":"NodeText","Data":"​ 值"}]}]},{"ID":"20240608011347-fknvl8s","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608011347-fknvl8s"},"Children":[{"ID":"20240608011347-4esece9","Type":"NodeParagraph","Properties":{"id":"20240608011347-4esece9","updated":"20240608011441"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".../memory.soft_limit_in_bytes"},{"Type":"NodeText","Data":"​："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--memory-reservation"},{"Type":"NodeText","Data":"​ 值"}]}]},{"ID":"20240608011441-ojin9ux","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608011441-ojin9ux"},"Children":[{"ID":"20240608011441-8ug82dl","Type":"NodeParagraph","Properties":{"id":"20240608011441-8ug82dl","updated":"20240608011529"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".../memory.oom_control"},{"Type":"NodeText","Data":"​："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--oom-kill-disable"},{"Type":"NodeText","Data":"​，1 表示开启"}]}]},{"ID":"20240608011543-euh493j","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608011543-euh493j","updated":"20240608011631"},"Children":[{"ID":"20240608011543-6hp8poo","Type":"NodeParagraph","Properties":{"id":"20240608011543-6hp8poo","updated":"20240608011631"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".../memory.memsw.limit_in_bytes"},{"Type":"NodeText","Data":"​："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--memory-swap"},{"Type":"NodeText","Data":"​ 值"}]}]}]},{"ID":"20240608005733-n5pih3s","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240608005733-n5pih3s","updated":"20240608020457"},"Children":[{"Type":"NodeText","Data":"交换分区"}]},{"ID":"20240608010044-ch0uuar","Type":"NodeList","ListData":{},"Properties":{"id":"20240608010044-ch0uuar","updated":"20240608010203"},"Children":[{"ID":"20240608010054-pj2377y","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608010054-pj2377y","updated":"20240608010054"},"Children":[{"ID":"20240608010054-mafhdwz","Type":"NodeParagraph","Properties":{"id":"20240608010054-mafhdwz","updated":"20240608010114"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--memory-swap"},{"Type":"NodeText","Data":"​：容器可用交换分区大小"}]}]},{"ID":"20240608010114-axhw1uu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608010114-axhw1uu","updated":"20240608010203"},"Children":[{"ID":"20240608010114-okfvc2v","Type":"NodeParagraph","Properties":{"id":"20240608010114-okfvc2v","updated":"20240608010203"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--memory-swappiness"},{"Type":"NodeText","Data":"​：容器使用交换分区的倾向性，可取值 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"[0-100]"},{"Type":"NodeText","Data":"​，100 为能用就用"}]}]}]},{"ID":"20240608004111-ecqtpyf","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240608004111-ecqtpyf","updated":"20240608020457"},"Children":[{"Type":"NodeText","Data":"CPU 限制"}]},{"ID":"20240608011706-9zegkk8","Type":"NodeParagraph","Properties":{"id":"20240608011706-9zegkk8","updated":"20240608011733"},"Children":[{"Type":"NodeText","Data":"通常来说，CPU 密集型程序优先级越低越好，IO 密集型优先级越高越好"}]},{"ID":"20240608011733-0npjbhb","Type":"NodeParagraph","Properties":{"id":"20240608011733-0npjbhb","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240608011849"},"Children":[{"Type":"NodeText","Data":"数据处理、视频编解码等属于 CPU 密集型，涉及到网络、硬盘的 Web、并发等应用属于 IO 密集型"}]},{"ID":"20240608011920-hj71bv6","Type":"NodeParagraph","Properties":{"id":"20240608011920-hj71bv6","updated":"20240608012150"},"Children":[{"Type":"NodeText","Data":"Linux 核心进程调度基于完全公平调度 CFS（Completely Fair Scheduler），基于权重的公平队列算法。每个任务关联一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"vruntime"},{"Type":"NodeText","Data":"​ 表示 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"占用时间/优先级"},{"Type":"NodeText","Data":"​ 的值，每次挑选该值较小的任务运行"}]},{"ID":"20240608012231-ulm4bj7","Type":"NodeList","ListData":{},"Properties":{"id":"20240608012231-ulm4bj7","updated":"20240608012232"},"Children":[{"ID":"20240608012232-dgceubb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608012232-dgceubb","updated":"20240608012232"},"Children":[{"ID":"20240608012232-aaeuocd","Type":"NodeParagraph","Properties":{"id":"20240608012232-aaeuocd","updated":"20240608012521"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--cpus \u0026lt;core-count\u0026gt;"},{"Type":"NodeText","Data":"​：任务可占用的 CPU 数量"}]},{"ID":"20240608012517-wv851gi","Type":"NodeParagraph","Properties":{"id":"20240608012517-wv851gi","style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);","updated":"20240608012524"},"Children":[{"Type":"NodeText","Data":"可以为小数，不能超过总 CPU 核心数"}]},{"ID":"20240608012524-ntpvkpi","Type":"NodeParagraph","Properties":{"id":"20240608012524-ntpvkpi","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240608012550"},"Children":[{"Type":"NodeText","Data":"及时设置为 1 也有可能在多个核心运行，但总占用为 1 个核"}]}]},{"ID":"20240608012448-bbatugx","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608012448-bbatugx"},"Children":[{"ID":"20240608012448-fzz0jyi","Type":"NodeParagraph","Properties":{"id":"20240608012448-fzz0jyi","updated":"20240608012508"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--cpuset-cpus \u0026lt;n\u0026gt;"},{"Type":"NodeText","Data":"​：指定任务使用第 n 个 CPU"}]}]},{"ID":"20240608012622-3806oom","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608012622-3806oom"},"Children":[{"ID":"20240608012622-pjse3fm","Type":"NodeParagraph","Properties":{"id":"20240608012622-pjse3fm","updated":"20240608012643"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--cpu-shares \u0026lt;n\u0026gt;"},{"Type":"NodeText","Data":"​：对 CPU 按比例划分"}]}]}]},{"ID":"20240608012656-mi9tg36","Type":"NodeParagraph","Properties":{"id":"20240608012656-mi9tg36","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240608012752"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"--cpu-shares"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 可以在运行时修改 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"/sys/fs/cgroup/cup,cpuacct/docker/\u0026lt;container id\u0026gt;/cpu.shares"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 修改，修改后立即生效"}]},{"ID":"20240608004117-gbe5zjt","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240608004117-gbe5zjt","updated":"20240608020457"},"Children":[{"Type":"NodeText","Data":"底层技术"}]},{"ID":"20240608012818-v19fqcf","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240608012818-v19fqcf","updated":"20240608020457"},"Children":[{"Type":"NodeText","Data":"Cgroup"}]},{"ID":"20240608013818-0b2q4ph","Type":"NodeParagraph","Properties":{"id":"20240608013818-0b2q4ph","updated":"20240608014128"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Controlgroups"},{"Type":"NodeText","Data":"​，群组控制技术，Docker 利用该技术对共享资源进行分配、限制、审计及管理等。"}]},{"ID":"20240608014129-lk49p2h","Type":"NodeParagraph","Properties":{"id":"20240608014129-lk49p2h","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240608014152"},"Children":[{"Type":"NodeText","Data":"该技术利用 Linux 内核提供的限制、记录、隔离进程使用物理资源的功能"}]},{"ID":"20240608014142-tl64pxo","Type":"NodeParagraph","Properties":{"id":"20240608014142-tl64pxo","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240608014230"},"Children":[{"Type":"NodeText","Data":"子系统：资源控制器，每种子系统都是一个资源的分配器"}]},{"ID":"20240608014237-jriuup8","Type":"NodeParagraph","Properties":{"id":"20240608014237-jriuup8","updated":"20240608014339"},"Children":[{"Type":"NodeText","Data":"先挂载子系统，在每个子系统内创建不同 Cgroup 节点，完成对硬件资源的控制，以此取代虚拟化技术分割资源。"}]},{"ID":"20240608014347-4hafs68","Type":"NodeParagraph","Properties":{"id":"20240608014347-4hafs68","updated":"20240608014445"},"Children":[{"Type":"NodeText","Data":"Cgroup 默认提供诸多资源组，用于管理几乎所有服务器资源："}]},{"ID":"20240608014445-4izdtp6","Type":"NodeList","ListData":{},"Properties":{"id":"20240608014445-4izdtp6","updated":"20240608014446"},"Children":[{"ID":"20240608014446-xfvc7j2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608014446-xfvc7j2","updated":"20240608014446"},"Children":[{"ID":"20240608014446-jekcn2e","Type":"NodeParagraph","Properties":{"id":"20240608014446-jekcn2e","updated":"20240608014508"},"Children":[{"Type":"NodeText","Data":"CPU："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cpu"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/sys/fs/cgroup/cpu/docker"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240608014509-nvsk287","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608014509-nvsk287"},"Children":[{"ID":"20240608014509-4145gui","Type":"NodeParagraph","Properties":{"id":"20240608014509-4145gui","updated":"20240608014531"},"Children":[{"Type":"NodeText","Data":"内存："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mem"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/sys/fs/cgroup/memory/docker"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240608014535-45eetqw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608014535-45eetqw"},"Children":[{"ID":"20240608014535-241wemc","Type":"NodeParagraph","Properties":{"id":"20240608014535-241wemc","updated":"20240608014552"},"Children":[{"Type":"NodeText","Data":"磁盘 IO："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"iops"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/sys/fs/cgroup/blkio/docker"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20240608014557-wvqd4ct","Type":"NodeParagraph","Properties":{"id":"20240608014557-wvqd4ct","updated":"20240608014706"},"Children":[{"Type":"NodeText","Data":"Docker 会在宿主机该目录下为每个容器创建一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cgroup"},{"Type":"NodeText","Data":"​ 目录，以容器 id 为名"}]},{"ID":"20240608013812-s4px1ny","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240608013812-s4px1ny","updated":"20240608020457"},"Children":[{"Type":"NodeText","Data":"Namespace"}]},{"ID":"20240608014805-crdcgqv","Type":"NodeParagraph","Properties":{"id":"20240608014805-crdcgqv","updated":"20240608014944"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Namespace"},{"Type":"NodeText","Data":"​ 管理容器的全局唯一资源，如网卡设备、文件系统等，实现容器间的资源隔离。"}]},{"ID":"20240608014945-i0i37k7","Type":"NodeParagraph","Properties":{"id":"20240608014945-i0i37k7","updated":"20240608015122"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Namespace"},{"Type":"NodeText","Data":"​ 主要为每个容器提供进程间隔离，每个容器有独立的运行空间，每个运行空间有独立且可使用的系统。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Namespace"},{"Type":"NodeText","Data":"​ 保证容器之间不会互相干扰，每个容器也不会访问命名空间之外的资源。"}]},{"ID":"20240608015122-7fw9hgk","Type":"NodeParagraph","Properties":{"id":"20240608015122-7fw9hgk","updated":"20240608015134"},"Children":[{"Type":"NodeText","Data":"Linux 提供 6 种 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Namespace"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240608015135-e2o2hwe","Type":"NodeList","ListData":{},"Properties":{"id":"20240608015135-e2o2hwe","updated":"20240608020107"},"Children":[{"ID":"20240608015135-w8p88g3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608015135-w8p88g3","updated":"20240608015135"},"Children":[{"ID":"20240608015135-7ijx6e0","Type":"NodeParagraph","Properties":{"id":"20240608015135-7ijx6e0","updated":"20240608015348"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Mount Namespace"},{"Type":"NodeText","Data":"​：简称 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mnt Namespace"},{"Type":"NodeText","Data":"​，让每个容器有自己独立的文件系统"}]}]},{"ID":"20240608015340-tht6jsm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608015340-tht6jsm"},"Children":[{"ID":"20240608015340-6yt35bm","Type":"NodeParagraph","Properties":{"id":"20240608015340-6yt35bm","updated":"20240608015443"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"UTS Namespace"},{"Type":"NodeText","Data":"​：让每个容器有自己独立的主机名和域名，使之可以成为网络上的独立节点"}]}]},{"ID":"20240608015444-5a0y5t5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608015444-5a0y5t5"},"Children":[{"ID":"20240608015444-suhgt1r","Type":"NodeParagraph","Properties":{"id":"20240608015444-suhgt1r","updated":"20240608015657"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"IPC Namespace"},{"Type":"NodeText","Data":"​：让每个容器有自己独立的共享内存和信号量，实现容器内进程间通信与宿主独立。与 VM 不同的是，容器进程交互实质上是宿主机上具有相同 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"PID Namespace"},{"Type":"NodeText","Data":"​ 的进程之间的交互"}]}]},{"ID":"20240608015352-x6iwm65","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608015352-x6iwm65"},"Children":[{"ID":"20240608015352-vjgak8t","Type":"NodeParagraph","Properties":{"id":"20240608015352-vjgak8t","updated":"20240608015652"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"PID Namespace"},{"Type":"NodeText","Data":"​：让每个容器有自己独立的 PID，不同 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Namespace"},{"Type":"NodeText","Data":"​ 可以有相同的 PID"}]},{"ID":"20240608015722-kiyxyok","Type":"NodeParagraph","Properties":{"id":"20240608015722-kiyxyok","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240608015750"},"Children":[{"Type":"NodeText","Data":"容器中 PID=1 的进程是容器本身进程，但不是宿主机的 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"init"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 进程"}]}]},{"ID":"20240608015750-xs5kavo","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608015750-xs5kavo"},"Children":[{"ID":"20240608015750-obt45r5","Type":"NodeParagraph","Properties":{"id":"20240608015750-obt45r5","updated":"20240608015948"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Network Namespace"},{"Type":"NodeText","Data":"​：简称 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"net Namespace"},{"Type":"NodeText","Data":"​，让每个容器具有自己的网卡设备、路由等资源（网络设备，IP 地址，路由表，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/proc/net"},{"Type":"NodeText","Data":"​ 等），每个容器使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"veth"},{"Type":"NodeText","Data":"​ 的方式将虚拟网卡与宿主机网卡的一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Docker Bridge"},{"Type":"NodeText","Data":"​ 连接"}]}]},{"ID":"20240608015948-m715vfi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240608015948-m715vfi","updated":"20240608020107"},"Children":[{"ID":"20240608015948-7ickwov","Type":"NodeParagraph","Properties":{"id":"20240608015948-7ickwov","updated":"20240608020043"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"User Namespace"},{"Type":"NodeText","Data":"​：隔离安全相关的标识符和树形，包括用户、组、用户空间等"}]},{"ID":"20240608020044-1s4diia","Type":"NodeParagraph","Properties":{"id":"20240608020044-1s4diia","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240608020107"},"Children":[{"Type":"NodeText","Data":"容器中允许存在 ID=0 的用户"}]}]}]},{"ID":"20240608020230-tcyk1fv","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240608020230-tcyk1fv","updated":"20240608020457"},"Children":[{"Type":"NodeText","Data":"联合文件系统 AUFS"}]},{"ID":"20240608020237-1rl2mdv","Type":"NodeParagraph","Properties":{"id":"20240608020237-1rl2mdv","updated":"20240608020353"},"Children":[{"Type":"NodeText","Data":"分层、轻量级、高性能文件系统，允许将不同文件系统结构叠加到一起，使之看起来像一个文件系统"}]},{"ID":"20240608020353-ddhygk4","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240608020353-ddhygk4","updated":"20240608020457"},"Children":[{"Type":"NodeText","Data":"LXC"}]},{"ID":"20240608020356-p4hhhmt","Type":"NodeParagraph","Properties":{"id":"20240608020356-p4hhhmt","updated":"20240608020457"},"Children":[{"Type":"NodeText","Data":"提供共享宿主机内核的系统级虚拟化方法，运行时不需要加载系统内核，多容器共享宿主机一个内核以提高启动速度，减少物理资源占用"}]}]}