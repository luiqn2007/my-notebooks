{"ID":"20240609191551-boop4gc","Spec":"1","Type":"NodeDocument","Properties":{"icon":"docker.png","id":"20240609191551-boop4gc","title":"清理日志","type":"doc","updated":"20240609192139"},"Children":[{"ID":"20240609191551-avuego6","Type":"NodeParagraph","Properties":{"id":"20240609191551-avuego6","updated":"20240609191703"},"Children":[{"Type":"NodeText","Data":"对于正在运行的容器，直接删除 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".log"},{"Type":"NodeText","Data":"​ 文件是不行的，因为当前文件正在被使用。正确的方法应该是"}]},{"ID":"20240609191704-djyp9hn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240609191704-djyp9hn","updated":"20240609191722"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cat /dev/null \u003e *-json.log\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240609191717-kaq2ct6","Type":"NodeParagraph","Properties":{"id":"20240609191717-kaq2ct6","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240609191759"},"Children":[{"Type":"NodeText","Data":"通过 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"rm -rf"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 删除后重启 Docker 也不是不行"}]},{"ID":"20240609191800-9o1gqhu","Type":"NodeParagraph","Properties":{"id":"20240609191800-9o1gqhu","updated":"20240609191945"},"Children":[{"Type":"NodeText","Data":"通过配置 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker compress"},{"Type":"NodeText","Data":"​ 可以限制日志文件大小，需要重启容器"}]},{"ID":"20240609191853-aua8yws","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240609191853-aua8yws","updated":"20240609191930"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"eWFtbA=="},{"Type":"NodeCodeBlockCode","Data":"nginx:\n  logging:\n    options:\n      max-size: '5g'\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240609191930-5kh3rzq","Type":"NodeParagraph","Properties":{"id":"20240609191930-5kh3rzq","updated":"20240609192015"},"Children":[{"Type":"NodeText","Data":"全局日志文件大小限制则需要修改 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"daemon.json"},{"Type":"NodeText","Data":"​："}]},{"ID":"20240609192015-7ehhl8y","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240609192015-7ehhl8y","updated":"20240609192058"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anNvbg=="},{"Type":"NodeCodeBlockCode","Data":"{\n  \"log-ops\": { \"max-size\": \"500m\", \"max-file\": \"3\" }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240609192059-abyzz5b","Type":"NodeParagraph","Properties":{"id":"20240609192059-abyzz5b","updated":"20240609192139"},"Children":[{"Type":"NodeText","Data":"设置后重启 Docker，但仅对之后创建的产生作用"}]}]}