{"ID":"20240609030640-blotkm1","Spec":"1","Type":"NodeDocument","Properties":{"icon":"docker.png","id":"20240609030640-blotkm1","title":"user-defined","type":"doc","updated":"20240609040841"},"Children":[{"ID":"20240609030640-49hkvqy","Type":"NodeParagraph","Properties":{"id":"20240609030640-49hkvqy","updated":"20240609032249"},"Children":[{"Type":"NodeText","Data":"自定义模式，根据业务需求创建 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"user-defined"},{"Type":"NodeText","Data":"​ 网络。"}]},{"ID":"20240609032254-j6f80e0","Type":"NodeParagraph","Properties":{"id":"20240609032254-j6f80e0","updated":"20240609032304"},"Children":[{"Type":"NodeText","Data":"Docker 提供网络驱动有 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bridge"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"overlay"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"macvlan"},{"Type":"NodeText","Data":"​ 三种，后两种用于创建跨主机网络。"}]},{"ID":"20240609032307-qzijo8n","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240609032307-qzijo8n","updated":"20240609033238"},"Children":[{"ID":"20240609032309-92l6jmd","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240609032309-92l6jmd","updated":"20240609032309"},"Children":[{"ID":"20240609032309-wmcdljt","Type":"NodeParagraph","Properties":{"id":"20240609032309-wmcdljt","updated":"20240609032429"},"Children":[{"Type":"NodeText","Data":"通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bridge"},{"Type":"NodeText","Data":"​ 驱动器创建一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bridge"},{"Type":"NodeText","Data":"​ 网络，该命令返回该网络 id"}]},{"ID":"20240609032353-evb2oul","Type":"NodeParagraph","Properties":{"id":"20240609032353-evb2oul","updated":"20240609032406"},"Children":[{"Type":"NodeText","Data":"这里创建了一个名为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"my_net"},{"Type":"NodeText","Data":"​ 的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bridge"},{"Type":"NodeText","Data":"​ 类型网络"}]},{"ID":"20240609032335-qzlodac","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240609032335-qzlodac","updated":"20240609032351"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker network create --driver bridge my_net\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240609032922-hbe5t59","Type":"NodeSuperBlock","Properties":{"id":"20240609032922-hbe5t59"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240609032432-2xes6iu","Type":"NodeParagraph","Properties":{"id":"20240609032432-2xes6iu","updated":"20240609032447"},"Children":[{"Type":"NodeText","Data":"可以使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker network ls"},{"Type":"NodeText","Data":"​ 查看所有网络"}]},{"ID":"20240609032500-u4fyij4","Type":"NodeParagraph","Properties":{"id":"20240609032500-u4fyij4","updated":"20240609032851"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240609032500-3au23w4.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240609032925-3a4zxzl","Type":"NodeSuperBlock","Properties":{"id":"20240609032925-3a4zxzl"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240609032934-uu1dpex","Type":"NodeSuperBlock","Properties":{"id":"20240609032934-uu1dpex"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240609032518-v44eigm","Type":"NodeParagraph","Properties":{"id":"20240609032518-v44eigm","updated":"20240609032929"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker network inspect \u0026lt;NAME\u0026gt;"},{"Type":"NodeText","Data":"​ 可以查看网络配置"}]},{"ID":"20240609032930-bc496qq","Type":"NodeParagraph","Properties":{"id":"20240609032930-bc496qq","updated":"20240609032930"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"IPAM.Config.Subnet"},{"Type":"NodeText","Data":"​ 即 Docker 自动分配的网段"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240609032913-08028bk","Type":"NodeParagraph","Properties":{"id":"20240609032913-08028bk","updated":"20240609032913"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240609032851-wmk0ri1.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240609032615-uwjpk3b","Type":"NodeParagraph","Properties":{"id":"20240609032615-uwjpk3b","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240609032759"},"Children":[{"Type":"NodeText","Data":"可以在创建时通过指定 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"--subnet"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"--gateway"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 设置 IP 和子网段"}]},{"ID":"20240609032759-amsgepu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240609032759-amsgepu","updated":"20240609032835"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker network create --driver bridge --subnet 127.18.0.0/16 --gateway 127.18.0.1 my_net\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240609032330-my08hr2","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240609032330-my08hr2","updated":"20240609033238"},"Children":[{"ID":"20240609032330-5mm4l2q","Type":"NodeParagraph","Properties":{"id":"20240609032330-5mm4l2q","updated":"20240609033009"},"Children":[{"Type":"NodeText","Data":"使用自定义网络：在创建容器时，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--network=\u0026lt;NAME\u0026gt;"},{"Type":"NodeText","Data":"​ 即可"}]},{"ID":"20240609033010-e906xap","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240609033010-e906xap","updated":"20240609033034"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker run -it -P --net=my_net busybox\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240609033051-1qh4a3w","Type":"NodeParagraph","Properties":{"id":"20240609033051-1qh4a3w","updated":"20240609033145"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"当第一步使用了"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"code strong","TextMarkTextContent":"--subnet"},{"Type":"NodeText","Data":"​ "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"参数时"},{"Type":"NodeText","Data":"，可以使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--ip"},{"Type":"NodeText","Data":"​ 指定静态 IP"}]},{"ID":"20240609033145-xx4x1on","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240609033145-xx4x1on","updated":"20240609033206"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker run -it -P --net=my_net --ip 127.18.0.7 busybox\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240609033214-otnzpso","Type":"NodeParagraph","Properties":{"id":"20240609033214-otnzpso","style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);","updated":"20240609033238"},"Children":[{"Type":"NodeText","Data":"只有使用 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);"},"TextMarkType":"code","TextMarkTextContent":"--subnet"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);\"}"},{"Type":"NodeText","Data":"​ 创建的网络才能指定 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);"},"TextMarkType":"code","TextMarkTextContent":"--ip"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);\"}"},{"Type":"NodeText","Data":"​，否则会报错"}]}]}]},{"ID":"20240609033643-j88fqhs","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240609033643-j88fqhs","updated":"20240609040841"},"Children":[{"Type":"NodeText","Data":"容器间网络通信"}]},{"ID":"20240609032157-4wtop0o","Type":"NodeParagraph","Properties":{"id":"20240609032157-4wtop0o","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240609033931"},"Children":[{"Type":"NodeText","Data":"使用自定义网络创建的 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"bridge"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 类型网络创建的容器，互相之间可以直接通过 IP 和网关地址通信；默认 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"bridge"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 模式的不行"}]},{"ID":"20240609033638-dbzhjb1","Type":"NodeList","ListData":{},"Properties":{"id":"20240609033638-dbzhjb1","updated":"20240609033931"},"Children":[{"ID":"20240609033639-jfefkdn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240609033639-jfefkdn","updated":"20240609033845"},"Children":[{"ID":"20240609033639-ft7w8j4","Type":"NodeParagraph","Properties":{"id":"20240609033639-ft7w8j4","updated":"20240609033845"},"Children":[{"Type":"NodeText","Data":"使用同一个自定义 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bridge"},{"Type":"NodeText","Data":"​ 类型网络的容器，互相之间默认有域名解析（即可以直接通过容器名称访问其他容器，可 ping 通容器名）"}]}]},{"ID":"20240609033743-jkijypj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240609033743-jkijypj"},"Children":[{"ID":"20240609033743-vvhcy13","Type":"NodeParagraph","Properties":{"id":"20240609033743-vvhcy13","updated":"20240609033819"},"Children":[{"Type":"NodeText","Data":"使用自定义 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bridge"},{"Type":"NodeText","Data":"​ 类型网络的容器，与宿主系统之间默认是有解析的"}]}]},{"ID":"20240609033819-2fy3ol5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240609033819-2fy3ol5","updated":"20240609033851"},"Children":[{"ID":"20240609033819-rd080a7","Type":"NodeParagraph","Properties":{"id":"20240609033819-rd080a7","updated":"20240609033851"},"Children":[{"Type":"NodeText","Data":"使用系统自带网桥的容器，互相之间默认是没有解析的"}]}]}]},{"ID":"20240609040111-kv1p0oo","Type":"NodeParagraph","Properties":{"id":"20240609040111-kv1p0oo","updated":"20240609040354"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code em","TextMarkTextContent":"vm1"},{"Type":"NodeText","Data":"​ "},{"Type":"NodeTextMark","TextMarkType":"em","TextMarkTextContent":"可以被"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"code em","TextMarkTextContent":"ping"},{"Type":"NodeText","Data":"​ "},{"Type":"NodeTextMark","TextMarkType":"em","TextMarkTextContent":"通，并被替换为容器 IP"}]},{"ID":"20240609033933-sp4mnd6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240609033933-sp4mnd6","updated":"20240609040357"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker network create --driver bridge my_net1\ndocker run -it --name vm1 --network=my_net1 ubuntu\nping vm1\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240609040355-0autis9","Type":"NodeParagraph","Properties":{"id":"20240609040355-0autis9","updated":"20240609040506"},"Children":[{"Type":"NodeText","Data":"若要在两个网桥的容器之间通信，可以添加相应网桥的网卡即可"}]},{"ID":"20240609040506-knjdnkg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240609040506-knjdnkg","updated":"20240609040709"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker network create --driver bridge my_net2\ndocker run --name vm2 --network=my_net2 ubuntu\ndocker network connect my_net2 vm1\ndocker attach vm1\nping vm2\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240609040709-mqx2bri","Type":"NodeList","ListData":{},"Properties":{"id":"20240609040709-mqx2bri","updated":"20240609040841"},"Children":[{"ID":"20240609040715-1fwcvbu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240609040715-1fwcvbu","updated":"20240609040715"},"Children":[{"ID":"20240609040715-9l8nhg9","Type":"NodeParagraph","Properties":{"id":"20240609040715-9l8nhg9","updated":"20240609040730"},"Children":[{"Type":"NodeText","Data":"自定义 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bridge"},{"Type":"NodeText","Data":"​ 之间，可以随意添加对方网卡"}]}]},{"ID":"20240609040730-8km2abx","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240609040730-8km2abx"},"Children":[{"ID":"20240609040730-k2qamj7","Type":"NodeParagraph","Properties":{"id":"20240609040730-k2qamj7","updated":"20240609040813"},"Children":[{"Type":"NodeText","Data":"Docker 自带 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bridge0"},{"Type":"NodeText","Data":"​ 与自定义网络之间，只能是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bridge0"},{"Type":"NodeText","Data":"​ 容器添加自定义 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bridge"},{"Type":"NodeText","Data":"​ 容器的网卡"}]}]},{"ID":"20240609040813-cxbf3vb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240609040813-cxbf3vb","updated":"20240609040841"},"Children":[{"ID":"20240609040813-za0ne6m","Type":"NodeParagraph","Properties":{"id":"20240609040813-za0ne6m","updated":"20240609040841"},"Children":[{"Type":"NodeText","Data":"使用自带 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bridge0"},{"Type":"NodeText","Data":"​ 容器之间可以直接通信（虽然没有解析）"}]}]}]}]}