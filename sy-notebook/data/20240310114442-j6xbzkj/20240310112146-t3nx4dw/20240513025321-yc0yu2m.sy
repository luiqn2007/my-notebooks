{"ID":"20240513025321-yc0yu2m","Spec":"1","Type":"NodeDocument","Properties":{"icon":"aliyun.ico","id":"20240513025321-yc0yu2m","title":"Alibaba Cloud Linux 安装 MySql","type":"doc","updated":"20240513025939"},"Children":[{"ID":"20240513025613-7j9mesb","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513025613-7j9mesb","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"安装 MySQL 服务"}]},{"ID":"20240513025613-0a7affa","Type":"NodeParagraph","Properties":{"id":"20240513025613-0a7affa","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"sudo dnf install mysql-server"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513025628-zff8mk6","Type":"NodeParagraph","Properties":{"id":"20240513025628-zff8mk6","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20231201162451"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20231201162451-20240513025628-0ku3b9z.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513025613-44wq4kc","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513025613-44wq4kc","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"运行 MySQL 服务"}]},{"ID":"20240513025613-fewpumm","Type":"NodeParagraph","Properties":{"id":"20240513025613-fewpumm","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"MySQL 8.0 默认服务名为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysqld"},{"Type":"NodeText","Data":"​，先检查当前服务状态："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"systemctl status mysqld"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513025636-0th55pw","Type":"NodeParagraph","Properties":{"id":"20240513025636-0th55pw","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20231201162714"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20231201162714-20240513025636-sx3mwk3.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513025613-awxs81r","Type":"NodeParagraph","Properties":{"id":"20240513025613-awxs81r","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"启动并确认服务状态："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"systemctl start mysqld"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513025642-0xl7n5l","Type":"NodeParagraph","Properties":{"id":"20240513025642-0xl7n5l","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20231201163046"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20231201163046-20240513025642-6xp4vvm.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513025613-nycu5d1","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513025613-nycu5d1","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"配置 MySQL root 用户"}]},{"ID":"20240513025613-yxedw42","Type":"NodeParagraph","Properties":{"id":"20240513025613-yxedw42","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"通过查看 mysqld.log，可见默认 MySQL root 账号无密码："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"sudo vi /var/log/mysql/mysqld.log"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513025657-4jf6vb5","Type":"NodeParagraph","Properties":{"id":"20240513025657-4jf6vb5","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20231201163847"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20231201163847-20240513025657-7pwqs5n.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513025613-fs3vwqp","Type":"NodeParagraph","Properties":{"id":"20240513025613-fs3vwqp","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"直接登录 MySQL root 账号，修改密码："}]},{"ID":"20240513025613-cw9gfjn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513025613-cw9gfjn","updated":"20240513025613"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"mysql -uroot\nset password for root@localhost = '_P4mJej7s=eWuxsQcjwL';\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513025715-rzjxhv4","Type":"NodeParagraph","Properties":{"id":"20240513025715-rzjxhv4","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20231201164456"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20231201164456-20240513025715-5qipgcp.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513025613-njkgluu","Type":"NodeParagraph","Properties":{"id":"20240513025613-njkgluu","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"之后退出重新登陆检查是否设置成功。"}]},{"ID":"20240513025722-mv0pmvc","Type":"NodeParagraph","Properties":{"id":"20240513025722-mv0pmvc","updated":"20240513025613"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20231201164558"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20231201164558-20240513025722-huwobn2.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513025800-ml81k85","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513025800-ml81k85","updated":"20240513025800"},"Children":[{"Type":"NodeText","Data":"开放远程连接"}]},{"ID":"20240513025800-7pmu4gl","Type":"NodeParagraph","Properties":{"id":"20240513025800-7pmu4gl","updated":"20240513025849"},"Children":[{"Type":"NodeText","Data":"下一步是开放远程连接，用于在调试期间查看数据库能否按我们要求的进行修改。创建一个账户 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Host=%"},{"Type":"NodeText","Data":"​ 即可允许所有外部连接。同时需要开放 3306 端口。"}]},{"ID":"20240513025800-fu2fduy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513025800-fu2fduy","updated":"20240513025800"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bXlzcWw="},{"Type":"NodeCodeBlockCode","Data":"use mysql;\n# 用于管理的用户\ncreate user db_questions_admin@'%' identified by '3U4jcX_Kcyx5iMDr9_uu';\n\n# 权限设置\nuse db_questions;\ngrant all privileges on db_questions to db_questions_admin@'%';\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513025822-qz3jm6t","Type":"NodeParagraph","Properties":{"id":"20240513025822-qz3jm6t","updated":"20240513025822"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20231203170514"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20231203170514-20240513025822-7dtl52z.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513025939-yvvckqd","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513025939-yvvckqd","updated":"20240513025939"},"Children":[{"Type":"NodeText","Data":"自增主键"}]},{"ID":"20240513025939-krwn02z","Type":"NodeParagraph","Properties":{"id":"20240513025939-krwn02z","updated":"20240513025939"},"Children":[{"Type":"NodeText","Data":"向数据库插入数据时，自增主键的值可以通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"GeneratedKeyHolder"},{"Type":"NodeText","Data":"​ 获取："}]},{"ID":"20240513025939-m5mkf5d","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513025939-m5mkf5d","updated":"20240513025939"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"a290bGlu"},{"Type":"NodeCodeBlockCode","Data":"val keyHolder = GeneratedKeyHolder()\nval sql = \"insert into 课程信息表(课程名称) value (?);\"\nval creator = PreparedStatementCreator {\n    val ps = it.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)\n    ps.setString(1, lessonName)\n    return@PreparedStatementCreator ps\n}\ntemplate.update(creator, keyHolder)\nreturn keyHolder.key!!.toInt()\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}