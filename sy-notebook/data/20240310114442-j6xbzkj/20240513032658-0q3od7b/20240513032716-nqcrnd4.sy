{"ID":"20240513032716-nqcrnd4","Spec":"1","Type":"NodeDocument","Properties":{"icon":"git.ico","id":"20240513032716-nqcrnd4","title":"Git 仓库服务器端搭建","type":"doc","updated":"20240513032823"},"Children":[{"ID":"20240513032720-koetjn8","Type":"NodeParagraph","Properties":{"id":"20240513032720-koetjn8","updated":"20240513032720"},"Children":[{"Type":"NodeText","Data":"这里我用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"WSL"},{"Type":"NodeText","Data":"​ 的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Ubuntu 22.04.1"},{"Type":"NodeText","Data":"​ 为例，已将源设置为国内源。"}]},{"ID":"20240513032720-f5dy4so","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240513032720-f5dy4so","updated":"20240513032720"},"Children":[{"ID":"20240513032720-fyrp354","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240513032720-fyrp354","updated":"20240513032720"},"Children":[{"ID":"20240513032720-byvh3gb","Type":"NodeParagraph","Properties":{"id":"20240513032720-byvh3gb","updated":"20240513032720"},"Children":[{"Type":"NodeText","Data":"创建 git 用户名并设置权限，专用于 git 仓库修改"}]}]}]},{"ID":"20240513032720-nkmrj8h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513032720-nkmrj8h","updated":"20240513032720"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"groupadd git # 创建组 git\nadduser git -g git # 新用户就叫 git, 设置其用户组为 git\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513032720-4pxa9bk","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240513032720-4pxa9bk","updated":"20240513032720"},"Children":[{"ID":"20240513032720-vbpvx89","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240513032720-vbpvx89","updated":"20240513032720"},"Children":[{"ID":"20240513032720-h34izo7","Type":"NodeParagraph","Properties":{"id":"20240513032720-h34izo7","updated":"20240513032720"},"Children":[{"Type":"NodeText","Data":"初始化对应 git 仓库"}]}]}]},{"ID":"20240513032720-j7r55s8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513032720-j7r55s8","updated":"20240513032720"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cd ..\ncd git # 进入 git 用户的主文件夹 /home/git\nmkdir gittmp.git # 创建 git 项目文件夹，一般 git 仓库目录以 .git 结尾\nchown -R git:git gittmp.git # 将 gittmp.git 的所有者设置为 git 组的 git 用户\ncd gittmp.git/\ngit --bare init # 初始化仓库\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513032720-qkawpk7","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240513032720-qkawpk7","updated":"20240513032720"},"Children":[{"ID":"20240513032720-gjbj1ir","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240513032720-gjbj1ir","updated":"20240513032720"},"Children":[{"ID":"20240513032720-7na1jvu","Type":"NodeParagraph","Properties":{"id":"20240513032720-7na1jvu","updated":"20240513032720"},"Children":[{"Type":"NodeText","Data":"设置认证方法，这里使用 ssh 登录"}]}]}]},{"ID":"20240513032720-yzl5lom","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513032720-yzl5lom","updated":"20240513032720"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cd .. # 返回 /home/git\nmkdir .ssh # 创建 /home/git/.ssh 用于保存公钥\nchmod 755 .ssh # /home/git/.ssh 目录只能由拥有者修改，其他用户只能访问\ncd .ssh # 进入 /home/git/.ssh\nnano authorized_keys # 这里用 nano 打开（创建） authorized_keys 文件，也可以用 echo, vi 等\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513032720-ee6a6bx","Type":"NodeParagraph","Properties":{"id":"20240513032720-ee6a6bx","updated":"20240513032720"},"Children":[{"Type":"NodeText","Data":"打开 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"authorized_keys"},{"Type":"NodeText","Data":"​ 后，向里面添加 rsa 公钥即可，公钥在客户端使用"}]},{"ID":"20240513032720-3rhck6q","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513032720-3rhck6q","updated":"20240513032720"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"ssh-keygen -t rsa -C \"你自己的github对应的邮箱地址\"\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513032720-xi8el8i","Type":"NodeParagraph","Properties":{"id":"20240513032720-xi8el8i","updated":"20240513032720"},"Children":[{"Type":"NodeText","Data":"密码可选，加的话会在每次 push 时要求密码创建。然后 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"用户名/.ssh/id_rsa.pub"},{"Type":"NodeText","Data":"​ 文件内容即公钥。"}]},{"ID":"20240513032720-wjtprvn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513032720-wjtprvn","updated":"20240513032720"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"chmod 644 authorized_keys # 修改 authorized_keys 权限，不可执行\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513032720-gfvy8ze","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240513032720-gfvy8ze","updated":"20240513032720"},"Children":[{"ID":"20240513032720-1onxekb","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20240513032720-1onxekb","updated":"20240513032720"},"Children":[{"ID":"20240513032720-zsu5fco","Type":"NodeParagraph","Properties":{"id":"20240513032720-zsu5fco","updated":"20240513032720"},"Children":[{"Type":"NodeText","Data":"配置 ssh 服务器"}]}]}]},{"ID":"20240513032720-qczb37s","Type":"NodeParagraph","Properties":{"id":"20240513032720-qczb37s","updated":"20240513032720"},"Children":[{"Type":"NodeText","Data":"首先安装 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"openssh-server"},{"Type":"NodeText","Data":"​，这里以 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ubuntu"},{"Type":"NodeText","Data":"​ 为例"}]},{"ID":"20240513032720-mkkky2n","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513032720-mkkky2n","updated":"20240513032720"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"sudo apt-get install openssh-server # 安装服务器\nsudo service ssh start # 启动 ssh 服务\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513032720-67cqoak","Type":"NodeParagraph","Properties":{"id":"20240513032720-67cqoak","updated":"20240513032720"},"Children":[{"Type":"NodeText","Data":"之后，配置 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ssh"},{"Type":"NodeText","Data":"​ 服务器"}]},{"ID":"20240513032720-8ir5uoj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513032720-8ir5uoj","updated":"20240513032720"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"sudo nano /etc/ssh/sshd_config\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513032720-xd12kdy","Type":"NodeParagraph","Properties":{"id":"20240513032720-xd12kdy","updated":"20240513032720"},"Children":[{"Type":"NodeText","Data":"在里面将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Port"},{"Type":"NodeText","Data":"​ 到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ListenAddress"},{"Type":"NodeText","Data":"​ 部分前面的注释取消掉："}]},{"ID":"20240513032749-ykocftg","Type":"NodeParagraph","Properties":{"id":"20240513032749-ykocftg","updated":"20240513032749"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20221212203912"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20221212203912-20240513032749-4o629rh.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513032720-za85jlz","Type":"NodeParagraph","Properties":{"id":"20240513032720-za85jlz","updated":"20240513032720"},"Children":[{"Type":"NodeText","Data":"之后重启服务器"}]},{"ID":"20240513032720-fdw4m63","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513032720-fdw4m63","updated":"20240513032720"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"sudo service ssh restart\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513032720-p7pfsfs","Type":"NodeParagraph","Properties":{"id":"20240513032720-p7pfsfs","updated":"20240513032720"},"Children":[{"Type":"NodeText","Data":"然后查看当前服务器 ip，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"inet"},{"Type":"NodeText","Data":"​ 字段即为 ip"}]},{"ID":"20240513032720-eib29e5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513032720-eib29e5","updated":"20240513032720"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"ifconfig\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513032803-6nj77my","Type":"NodeParagraph","Properties":{"id":"20240513032803-6nj77my","updated":"20240513032803"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20221212204305"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20221212204305-20240513032803-fmujv39.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513032720-q3txdp9","Type":"NodeParagraph","Properties":{"id":"20240513032720-q3txdp9","updated":"20240513032720"},"Children":[{"Type":"NodeText","Data":"之后，在本地使用 ssh 连接一下试试"}]},{"ID":"20240513032720-k30250m","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513032720-k30250m","updated":"20240513032720"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"ssh -T git@[之前的 ip 地址]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513032809-0t6fn35","Type":"NodeParagraph","Properties":{"id":"20240513032809-0t6fn35","updated":"20240513032809"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20221212204427"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20221212204427-20240513032809-tnjhaof.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513032720-wkut2tr","Type":"NodeParagraph","Properties":{"id":"20240513032720-wkut2tr","updated":"20240513032720"},"Children":[{"Type":"NodeText","Data":"这样表示没问题了，可以将远程的仓库 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"clone"},{"Type":"NodeText","Data":"​ 到本地了："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"git clone [之前创建的用户名]@[ip 地址]:[仓库目录]"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20240513032720-autki96","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513032720-autki96","updated":"20240513032720"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"git clone git@172.31.35.231:/home/git/gittmp.git\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513032820-8w561dy","Type":"NodeParagraph","Properties":{"id":"20240513032820-8w561dy","updated":"20240513032820"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20221212205407"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20221212205407-20240513032820-kfvs77m.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513032823-ei29hrt","Type":"NodeParagraph","Properties":{"id":"20240513032823-ei29hrt"}}]}