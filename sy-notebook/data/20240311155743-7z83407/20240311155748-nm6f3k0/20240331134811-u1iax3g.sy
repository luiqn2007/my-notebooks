{"ID":"20240331134811-u1iax3g","Spec":"1","Type":"NodeDocument","Properties":{"icon":"spring.png","id":"20240331134811-u1iax3g","title":"面向切面编程","type":"doc","updated":"20240410013100"},"Children":[{"ID":"20240331134811-k8otan0","Type":"NodeParagraph","Properties":{"id":"20240331134811-k8otan0","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240410002746"},"Children":[{"Type":"NodeText","Data":"切面：将分布在多个类中的职责封装到单独的类中，称为"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"em","TextMarkTextContent":"切面"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"，被分配的职责称为"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"em","TextMarkTextContent":"横切关注点"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"}]},{"ID":"20240410003450-v9jlwcv","Type":"NodeParagraph","Properties":{"id":"20240410003450-v9jlwcv","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240410003630"},"Children":[{"Type":"NodeText","Data":"通知：实现"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"em","TextMarkTextContent":"横切关注点"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"的一个切面方法称为"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"em","TextMarkTextContent":"通知"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"，通知与标识通知适用方法的切入点相关联，通知适用方法称为"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"em","TextMarkTextContent":"连接点"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"}]},{"ID":"20240410002712-3sx17ft","Type":"NodeParagraph","Properties":{"id":"20240410002712-3sx17ft","updated":"20240410013100"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240410012854-a8x4dhe","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"Spring AOP"},{"Type":"NodeText","Data":" 能胜任大多数 AOP 场景，或使用 AspectJ 作为 AOP 框架使用。Spring AOP 允许使用 AspectJ 注解样式或使用 "},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240410012952-j6tdvn7","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"XML 配置"},{"Type":"NodeText","Data":"开发切面。"}]},{"ID":"20240410010517-j13krgt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240410010517-j13krgt","updated":"20240410012359"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Aspect\n@Component\n@EnableAspectJAutoProxy\npublic class LoggingAspect {\n\n    private final Logger logger = LogManager.getLogger();\n\n    @Before(\"execution(* com.example.mybank.service.*Service.*(..))\")\n    public void log(JoinPoint joinPoint) {\n        logger.info(\"Enter: {}'s {}\",\n                joinPoint.getTarget().getClass().getSimpleName(),\n                joinPoint.getSignature().getName());\n\n        Object[] args = joinPoint.getArgs();\n        for (int i = 0; i \u003c args.length; i++) {\n            logger.info(\"Argument {}: {}\", i, args[i]);\n        }\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240410010522-1nscexz","Type":"NodeParagraph","Properties":{"id":"20240410010522-1nscexz","updated":"20240410010748"},"Children":[{"Type":"NodeText","Data":"该 AOP 表示在调用任何 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"com.example.mybank.service.*Service"},{"Type":"NodeText","Data":"​ 类的方法时先调用该 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"log"},{"Type":"NodeText","Data":"​ 方法，打印输出。"}]},{"ID":"20240410012345-mgnkgg0","Type":"NodeList","ListData":{},"Properties":{"id":"20240410012345-mgnkgg0","updated":"20240410013047"},"Children":[{"ID":"20240410012345-58u2oas","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240410012345-58u2oas","updated":"20240410012345"},"Children":[{"ID":"20240410012345-lwtu7h0","Type":"NodeParagraph","Properties":{"id":"20240410012345-lwtu7h0","updated":"20240410012446"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@EnableAspectJAutoProxy"},{"Type":"NodeText","Data":"​ 表示开启切面，与 XML "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;aop:aspectj-autoproxy /\u0026gt;"},{"Type":"NodeText","Data":"​ 等效"}]}]},{"ID":"20240410012446-wscal8s","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240410012446-wscal8s"},"Children":[{"ID":"20240410012446-etergm4","Type":"NodeParagraph","Properties":{"id":"20240410012446-etergm4","updated":"20240410012516"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Aspect"},{"Type":"NodeText","Data":"​ 声明该 bean 是一个 AOP 切面"}]}]},{"ID":"20240410012534-7fu5bau","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240410012534-7fu5bau","updated":"20240410013047"},"Children":[{"ID":"20240410012534-0do8dvn","Type":"NodeParagraph","Properties":{"id":"20240410012534-0do8dvn","updated":"20240410013047"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Before"},{"Type":"NodeText","Data":"​ 表示该方法是对匹配方法之前的"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240410012928-tiwq70t","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"通知"},{"Type":"NodeText","Data":"，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"value"},{"Type":"NodeText","Data":"​ 属性指定了"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240410012909-7z7mvq5","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"切入点表达式"}]}]},{"ID":"20240410012700-z1e7uze","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240410012700-z1e7uze","updated":"20240410012725"},"Children":[{"ID":"20240410012700-ab3z45n","Type":"NodeParagraph","Properties":{"id":"20240410012700-ab3z45n","updated":"20240410012725"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"JoinPoint"},{"Type":"NodeText","Data":"​ 参数包含了调入点的函数上下文信息"}]}]}]},{"ID":"20240410013050-4vfsjk4","Type":"NodeParagraph","Properties":{"id":"20240410013050-4vfsjk4"}}]}