{"ID":"20240406160834-mlolrl6","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f4e6","id":"20240406160834-mlolrl6","title":"å‘é€ JMS ä¿¡æ¯","type":"doc","updated":"20240407223333"},"Children":[{"ID":"20240407003222-a26gcrw","Type":"NodeParagraph","Properties":{"id":"20240407003222-a26gcrw","updated":"20240407003250"},"Children":[{"Type":"NodeText","Data":"é¦–å…ˆï¼Œéœ€è¦å®šä¹‰ JMS é€šé“ã€‚"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"amq:queue"},{"Type":"NodeText","Data":"â€‹ æ ‡ç­¾åˆ›å»ºä¸€ä¸ª JMS é˜Ÿåˆ—ï¼Œ"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"physicalName"},{"Type":"NodeText","Data":"â€‹ è¡¨ç¤ºåœ¨ ActiveMQ ä¸­çš„åç§°ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶"},{"Type":"NodeTextMark","TextMarkType":"text","TextMarkTextContent":"ğŸ“¦"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240406234718-zigm8zx","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"æ‰‹åŠ¨åˆ›å»ºé˜Ÿåˆ—"},{"Type":"NodeText","Data":"ã€‚"}]},{"ID":"20240407010343-n5g4i6f","Type":"NodeParagraph","Properties":{"id":"20240407010343-n5g4i6f","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240407010527"},"Children":[{"Type":"NodeText","Data":"â€‹"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"id"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"â€‹ å‚æ•°æ˜¯é˜Ÿåˆ—å¯¹åº” "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"ActiveMQQueue"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"â€‹ bean å¯¹è±¡çš„ "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"id"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"â€‹ï¼Œ"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"physicalName"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"â€‹ æ‰æ˜¯çœŸæ­£ JMS é˜Ÿåˆ—çš„åç§°ã€‚åé¢ç”¨åˆ°çš„åŸºæœ¬éƒ½æ˜¯ "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"physicalName"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"â€‹"}]},{"ID":"20240407003223-doodi5g","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240407003223-doodi5g","updated":"20240407003318"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"eG1s"},{"Type":"NodeCodeBlockCode","Data":"\u003cbeans ...\n       xmlns:amq=\"http://activemq.apache.org/schema/core\"\n       xsi:schemaLocation=\"...\n                           http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd\"\u003e\n\n    \u003camq:queue id=\"fixedDepositDestination\" physicalName=\"aQueueDestination\" /\u003e\n    \u003camq:queue id=\"emailQueueDestination\" physicalName=\"emailQueueDestination\" /\u003e\n\u003c/beans\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240407223049-zh3b5tj","Type":"NodeBlockquote","Properties":{"id":"20240407223049-zh3b5tj","updated":"20240407223134"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20240407223119-bsqaju8","Type":"NodeParagraph","Properties":{"id":"20240407223119-bsqaju8","updated":"20240407223123"},"Children":[{"Type":"NodeText","Data":"Java é…ç½®"}]},{"ID":"20240407223123-b4f1rd6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240407223123-b4f1rd6","updated":"20240407223134"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Bean\npublic ActiveMQQueue fixedDepositDestination() {\n    return new ActiveMQQueue(\"aQueueDestination\");\n}\n@Bean\npublic ActiveMQQueue emailMessageDestination() {\n    return new ActiveMQQueue(\"emailQueueDestination\");\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240407003448-uqvonbw","Type":"NodeParagraph","Properties":{"id":"20240407003448-uqvonbw","updated":"20240407003449"},"Children":[{"Type":"NodeText","Data":"â€‹"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"JmsTemplate"},{"Type":"NodeText","Data":"â€‹ å’Œ "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"JmsTransactionManager"},{"Type":"NodeText","Data":"â€‹ æ˜¯ä¸€ä¸ªç”¨äºä¿¡æ¯çš„äº‹åŠ¡ç®¡ç†å™¨ï¼Œ"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"defaultDestination"},{"Type":"NodeText","Data":"â€‹ ä¸ºé»˜è®¤çš„ JMS é˜Ÿåˆ—"}]},{"ID":"20240407003505-apcci01","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240407003505-apcci01","updated":"20240407003518"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"eG1s"},{"Type":"NodeCodeBlockCode","Data":"\u003cbeans ...\n       xmlns:amq=\"http://activemq.apache.org/schema/core\"\n       xsi:schemaLocation=\"...\n                           http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd\"\u003e\n\n    \u003cbean id=\"jmsTemplate\" class=\"org.springframework.jms.core.JmsTemplate\"\u003e\n        \u003cproperty name=\"connectionFactory\" ref=\"jmsFactory\" /\u003e\n        \u003cproperty name=\"defaultDestination\" ref=\"fixedDepositDestination\" /\u003e\n    \u003c/bean\u003e\n\n    \u003cbean id=\"jmsTxManager\" class=\"org.springframework.jms.connection.JmsTransactionManager\"\u003e\n        \u003cproperty name=\"connectionFactory\" ref=\"cachingConnectionFactory\"/\u003e\n    \u003c/bean\u003e\n\n\u003c/beans\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240407223215-ad20fs3","Type":"NodeBlockquote","Properties":{"id":"20240407223215-ad20fs3","updated":"20240407223242"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20240407223215-g02rm3k","Type":"NodeParagraph","Properties":{"id":"20240407223215-g02rm3k","updated":"20240407223215"},"Children":[{"Type":"NodeText","Data":"Java é…ç½®"}]},{"ID":"20240407223215-dkdliku","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240407223215-dkdliku","updated":"20240407223242"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Bean\npublic JmsTemplate jmsTemplate(ActiveMQConnectionFactory connectionFactory, @Qualifier(\"fixedDepositDestination\") ActiveMQQueue defaultQueue) {\n    JmsTemplate jmsTemplate = new JmsTemplate(connectionFactory);\n    jmsTemplate.setDefaultDestination(defaultQueue);\n    return jmsTemplate;\n}\n@Bean\npublic JmsTransactionManager jmsTxManager(CachingConnectionFactory connectionFactory) {\n    return new JmsTransactionManager(connectionFactory);\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240406160834-pd4uxyd","Type":"NodeParagraph","Properties":{"id":"20240406160834-pd4uxyd","updated":"20240407003652"},"Children":[{"Type":"NodeText","Data":"Spring "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"JmsTemplate"},{"Type":"NodeText","Data":"â€‹ ç®€åŒ–åŒæ­¥å’Œå‘é€ JMS ä¿¡æ¯çš„æ–¹å¼ï¼Œæä¾›ä¸€ä¸ªç»Ÿä¸€æŠ½è±¡å±‚ï¼Œä¸éœ€è¦å¤„ç†åº•å±‚ API"}]},{"ID":"20240407003652-jxyco0o","Type":"NodeList","ListData":{},"Properties":{"id":"20240407003652-jxyco0o","updated":"20240407003813"},"Children":[{"ID":"20240407003653-pn14s2d","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240407003653-pn14s2d","updated":"20240407003653"},"Children":[{"ID":"20240407003653-oxpc80d","Type":"NodeParagraph","Properties":{"id":"20240407003653-oxpc80d","updated":"20240407003706"},"Children":[{"Type":"NodeText","Data":"ä½¿ç”¨ "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"send"},{"Type":"NodeText","Data":"â€‹ æ–¹æ³•æ‰‹åŠ¨æ„å»º "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Message"},{"Type":"NodeText","Data":"â€‹ å¯¹è±¡"}]}]},{"ID":"20240407003706-q21d7so","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240407003706-q21d7so","updated":"20240407003813"},"Children":[{"ID":"20240407003706-ah0z1dp","Type":"NodeParagraph","Properties":{"id":"20240407003706-ah0z1dp","updated":"20240407003813"},"Children":[{"Type":"NodeText","Data":"ä½¿ç”¨ "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"convertAndSend"},{"Type":"NodeText","Data":"â€‹ ä½¿ç”¨"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240407001531-efp1lhu","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"å†…ç½®æ¶ˆæ¯ç±»å‹è½¬æ¢"},{"Type":"NodeText","Data":"å°† "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"String"},{"Type":"NodeText","Data":"â€‹ã€"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"byte[]"},{"Type":"NodeText","Data":"â€‹ã€"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Map"},{"Type":"NodeText","Data":"â€‹ å¯¹è±¡è½¬æ¢ä¸º "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Message"},{"Type":"NodeText","Data":"â€‹ å¯¹è±¡"}]}]}]},{"ID":"20240406164922-e9td1rw","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240406164922-e9td1rw","updated":"20240406225207"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public class FixedDepositServiceImpl extends ServiceTemplate implements FixedDepositService {\n\n    @Resource(name = \"fixedDepositDao\")\n    private FixedDepositDao fixedDepositDao;\n\n    @Autowired\n    private JmsTemplate jmsTemplate;\n\n    @Transactional(\"jmsTxManager\")\n    public int createFixedDeposit(FixedDepositDetails fixedDepositDetails) {\n        jmsTemplate.send(\"emailQueueDestination\", session -\u003e {\n            TextMessage message = session.createTextMessage();\n            message.setText(fixedDepositDetails.getEmail());\n            return message;\n        });\n\n        int result = fixedDepositDao.createFixedDetail(fixedDepositDetails);\n\n        jmsTemplate.send(\"aQueueDestination\", session -\u003e {\n            ObjectMessage message = session.createObjectMessage();\n            message.setObject(fixedDepositDetails);\n            return message;\n        });\n\n        return result;\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240406225029-chc5wry","Type":"NodeParagraph","Properties":{"id":"20240406225029-chc5wry","updated":"20240406231826"},"Children":[{"Type":"NodeText","Data":"â€‹"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"createFixedDeposit"},{"Type":"NodeText","Data":"â€‹ æŒ‡å®šäº‹åŠ¡ç®¡ç†å™¨ä¸º "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"jmsTxManager"},{"Type":"NodeText","Data":"â€‹ã€‚é€šè¿‡ "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"JmsTemplate"},{"Type":"NodeText","Data":"â€‹ å‘ "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"emailQueueDestination"},{"Type":"NodeText","Data":"â€‹ å’Œ "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"aQueueDestination"},{"Type":"NodeText","Data":"â€‹ ä¸¤ä¸ªé˜Ÿåˆ—å‘é€æ¶ˆæ¯ï¼Œä¸éœ€è¦æ˜¾å¼åˆ›å»º "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Connection"},{"Type":"NodeText","Data":"â€‹ å’Œ "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Session"},{"Type":"NodeText","Data":"â€‹ã€‚"}]},{"ID":"20240406231943-57czakx","Type":"NodeParagraph","Properties":{"id":"20240406231943-57czakx","updated":"20240406232100"},"Children":[{"Type":"NodeText","Data":"å¦‚æœéœ€è¦ä½¿ç”¨ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼Œå¯ä»¥ä½¿ç”¨ "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"TransactionTemplate"},{"Type":"NodeText","Data":"â€‹ï¼Œå¹¶å°† "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"transactionManager"},{"Type":"NodeText","Data":"â€‹ å±æ€§è®¾ç½®ä¸º "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"jmsTxManager"},{"Type":"NodeText","Data":"â€‹"}]},{"ID":"20240406232105-5y5ylcn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240406232105-5y5ylcn","updated":"20240406232202"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"eG1s"},{"Type":"NodeCodeBlockCode","Data":"\u003cbean id=\"transactionTemplate\" class=\"org.springframework.transaction.support.TransactionTemplate\"\u003e\n    \u003cproperty name=\"transactionManager\" ref=\"jmsTxManager\" /\u003e\n\u003c/bean\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240406232101-c1zizfg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240406232101-c1zizfg","updated":"20240406232726"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Autowired\nprivate TransactionTemplate transactionTemplate;\n\npublic int createFixedDeposit(FixedDepositDetails fixedDepositDetails) {\n    return transactionTemplate.execute(status -\u003e {\n        jmsTemplate.send(\"emailQueueDestination\", session -\u003e {\n            TextMessage message = session.createTextMessage();\n            message.setText(fixedDepositDetails.getEmail());\n            return message;\n        });\n        int result = fixedDepositDao.createFixedDetail(fixedDepositDetails);\n        jmsTemplate.send(\"aQueueDestination\", session -\u003e {\n            ObjectMessage message = session.createObjectMessage();\n            message.setObject(fixedDepositDetails);\n            return message;\n        });\n        return result;\n    });\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}