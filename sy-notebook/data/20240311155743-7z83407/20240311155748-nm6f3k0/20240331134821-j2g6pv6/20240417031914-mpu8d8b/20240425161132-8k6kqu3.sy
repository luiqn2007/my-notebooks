{"ID":"20240425161132-8k6kqu3","Spec":"1","Type":"NodeDocument","Properties":{"icon":"spring.png","id":"20240425161132-8k6kqu3","title":"构建状态信息","type":"doc","updated":"20240425161308"},"Children":[{"ID":"20240425161308-dd1t9rr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240425161308-dd1t9rr","updated":"20240425161308"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Controller\n@RequestMapping(\"/fixedDeposits\")\npublic class FixedDepositsController {\n\n    @Autowired\n    private FixedDepositService fixedDepositService;\n\n    @GetMapping\n    public ResponseEntity\u003cList\u003cFixedDepositDetails\u003e\u003e getFixedDepositDetails() {\n        return ResponseEntity.ok(fixedDepositService.getFixedDeposits());\n    }\n  \n    @GetMapping(params = \"id\")\n    public ResponseEntity\u003cFixedDepositDetails\u003e getFixedDepositDetails(@RequestParam int id) {\n        return ResponseEntity.ok(fixedDepositService.getFixedDepositDetails(id));\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240425161308-oykd3vo","Type":"NodeParagraph","Properties":{"id":"20240425161308-oykd3vo","updated":"20240425161308"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240425135559-cofq8fq.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240425161308-4m2jayh","Type":"NodeParagraph","Properties":{"id":"20240425161308-4m2jayh","updated":"20240425161308"},"Children":[{"Type":"NodeText","Data":"响应信息设置方法有："}]},{"ID":"20240425161308-z2kowng","Type":"NodeList","ListData":{},"Properties":{"id":"20240425161308-z2kowng","updated":"20240425161308"},"Children":[{"ID":"20240425161308-abaxriw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240425161308-abaxriw","updated":"20240425161308"},"Children":[{"ID":"20240425161308-42lhtsf","Type":"NodeParagraph","Properties":{"id":"20240425161308-42lhtsf","updated":"20240425161308"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code inline-memo","TextMarkInlineMemoContent":"由响应头、响应体和状态码组成的 HTTP 响应，响应体由 Spring MVC 写入","TextMarkTextContent":"ResponseEntity"},{"Type":"NodeText","Data":"​ 或 "},{"Type":"NodeTextMark","TextMarkType":"code inline-memo","TextMarkInlineMemoContent":"ResponseEntity 的基类，不包含状态代码","TextMarkTextContent":"HttpEntity"},{"Type":"NodeText","Data":"​，Spring 使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"HttpMessageConverter"},{"Type":"NodeText","Data":"​ 将其转换为 Json 并返回"}]},{"ID":"20240425161308-0ly9abc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240425161308-0ly9abc","updated":"20240425161308"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@GetMapping\npublic ResponseEntity\u003cList\u003cFixedDepositDetails\u003e\u003e getFixedDepositDetails() {\n    return ResponseEntity.ok(fixedDepositService.getFixedDeposits());\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240425161308-nog46q9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240425161308-nog46q9","updated":"20240425161308"},"Children":[{"ID":"20240425161308-vs067e5","Type":"NodeParagraph","Properties":{"id":"20240425161308-vs067e5","updated":"20240425161308"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@RequestMapping"},{"Type":"NodeText","Data":"​ 注解方法传入一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"HttpServletResponse"},{"Type":"NodeText","Data":"​ 变量，通过其 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"getWriter()"},{"Type":"NodeText","Data":"​ 方法向响应体写入任意内容，此时可以返回 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"void"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240425161308-ktum3tx","Type":"NodeParagraph","Properties":{"id":"20240425161308-ktum3tx","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240425161308"},"Children":[{"Type":"NodeText","Data":"应使用 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"ResponseEntity"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 或 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"HttpEntity"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 提高控制器可测试性，尽量避免直接写入 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"HttpServletResponse"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240425161308-957rufy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240425161308-957rufy","updated":"20240425161308"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@GetMapping(params = \"id\")\npublic void getFixedDepositDetails(@RequestParam int id, HttpServletResponse response) throws IOException {\n    FixedDepositDetails fixedDepositDetails = fixedDepositService.getFixedDepositDetails(id);\n    String data = gson.toJson(fixedDepositDetails);\n    response.getWriter().write(data);\n    response.setStatus(HttpServletResponse.SC_OK);\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240425161308-zk9bwa0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240425161308-zk9bwa0","updated":"20240425161308"},"Children":[{"ID":"20240425161308-qrkprif","Type":"NodeParagraph","Properties":{"id":"20240425161308-qrkprif","updated":"20240425161308"},"Children":[{"Type":"NodeText","Data":"直接使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@ResponseBody"},{"Type":"NodeText","Data":"​ 注解方法，返回值对象将转换为 Json 并返回，可以使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@ResponseStatus"},{"Type":"NodeText","Data":"​ 注解设置 HTTP 响应码"}]},{"ID":"20240425161308-gu6o9io","Type":"NodeParagraph","Properties":{"id":"20240425161308-gu6o9io","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240425161308"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"@ResponseStatus"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 还可以注解 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"exceptionHandler"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 方法"}]},{"ID":"20240425161308-n1a9mor","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240425161308-n1a9mor","updated":"20240425161308"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@GetMapping(params = \"accountId\")\n@ResponseBody\n@ResponseStatus(HttpStatus.OK)\npublic List\u003cFixedDepositDetails\u003e getFixedDepositDetailsByAccount(@RequestParam int accountId) {\n    return fixedDepositService.findFixedDepositsByBankAccount(accountId);\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20240425161308-m6pkegh","Type":"NodeParagraph","Properties":{"id":"20240425161308-m6pkegh","updated":"20240425161308"}}]}