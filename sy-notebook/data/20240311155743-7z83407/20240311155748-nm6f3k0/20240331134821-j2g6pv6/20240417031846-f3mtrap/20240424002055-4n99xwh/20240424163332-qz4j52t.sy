{"ID":"20240424163332-qz4j52t","Spec":"1","Type":"NodeDocument","Properties":{"icon":"spring.png","id":"20240424163332-qz4j52t","title":"创建模型特性","type":"doc","updated":"20240424164615"},"Children":[{"ID":"20240424163355-68g67i7","Type":"NodeParagraph","Properties":{"id":"20240424163355-68g67i7","updated":"20240424163355"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@ModelAttribute"},{"Type":"NodeText","Data":"​ 注解应用于方法时，表示该方法向 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Model"},{"Type":"NodeText","Data":"​ 提供一个或多个模型特性，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"value"},{"Type":"NodeText","Data":"​ 参数表示提供的模型名，省略使用首字母小写的类名"}]},{"ID":"20240424163355-wlp4o45","Type":"NodeParagraph","Properties":{"id":"20240424163355-wlp4o45","style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);","updated":"20240424163355"},"Children":[{"Type":"NodeText","Data":"模型特性会自动添加到 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);"},"TextMarkType":"code","TextMarkTextContent":"Model"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);\"}"},{"Type":"NodeText","Data":"​ 对象上。如果直接返回 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);"},"TextMarkType":"code","TextMarkTextContent":"ModelAndView"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);\"}"},{"Type":"NodeText","Data":"​ 会覆盖其中的值，可以返回字符串表示视图名称，并通过参数传入的 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);"},"TextMarkType":"code","TextMarkTextContent":"Model"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);\"}"},{"Type":"NodeText","Data":"​ 对象附加数据。"}]},{"ID":"20240424163355-43fyfg3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240424163355-43fyfg3","updated":"20240424163355"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@PostMapping(params = \"fdAction=createFDForm\")\npublic String showOpenFixedDepositForm(Model model) {\n    // 在这里的时候，getFixedDepositDetails() 已经被调用了\n    // 此时 model 中已经存在 fixedDepositDetails 对象了\n    model.addAttribute(\"errors\", Map.of());\n    return \"createFixedDepositForm\";\n}\n\n@ModelAttribute(\"fixedDepositDetails\")\npublic FixedDepositDetails getFixedDepositDetails() {\n    FixedDepositDetails fixedDepositDetails = FixedDepositDetails.builder()\n            .email(\"You must enter a valid email\")\n            .build();\n    LOGGER.info(\"getFixedDepositDetails() called, return a new instance of FixedDepositDetails\");\n    return fixedDepositDetails;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240424163355-owndj72","Type":"NodeParagraph","Properties":{"id":"20240424163355-owndj72","updated":"20240424164205"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@ModelAttribute"},{"Type":"NodeText","Data":"​ 注解的方法与 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@RequestMapping"},{"Type":"NodeText","Data":"​ 注解的方法是一致的，因此可以在一个函数中同时使用两个注解，也可以在一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@ModelAttribute"},{"Type":"NodeText","Data":"​ 注解的方法中传入 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Model"},{"Type":"NodeText","Data":"​ 变量，添加多个模型特性。"}]},{"ID":"20240424163355-w1h679x","Type":"NodeParagraph","Properties":{"id":"20240424163355-w1h679x","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240424164615"},"Children":[{"Type":"NodeText","Data":"当 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"@ModelAttribute"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​​ 与 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"@RequestMapping"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​​ 注解同时存在时，其返回值被认为是模型特性而非视图名称。此时视图名称由 Spring 的 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code inline-memo","TextMarkInlineMemoContent":"默认使用 DefaultRequestToViewNameTranslator，使用删除前导、尾部/ 和扩展名后剩余部分作为视图名称：_esc_newline__esc_newline_- http://localhost:8080/doSomething.html 解析后为 doSomething_esc_newline__esc_newline_- http://localhost:8080/fixedDepositDetails/list 解析后为 fixedDepositDetails/list","TextMarkTextContent":"RequestToViewNameTranslator"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​​ 类决定。"}]},{"ID":"20240424163355-owrspfz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240424163355-owrspfz","updated":"20240424163355"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@RequestMapping(\"/fixedDeposit\")\npublic class FixedDepositController {\n    // 视图名称: fixedDeposit/list.html\n    @GetMapping(path = \"/list\")\n    @ModelAttribute(\"fdList\")\n    public List\u003cFixedDepositDetails\u003e listFixedDeposits() {\n        return fixedDepositService.getFixedDeposits();\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240424163355-pipzcd6","Type":"NodeParagraph","Properties":{"id":"20240424163355-pipzcd6","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240424164032"},"Children":[{"Type":"NodeText","Data":"当 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"@ModelAttribute"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 与 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"@RequestMapping"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 注解同时存在时，仅会在请求符合要求时才创建该对象。"}]},{"ID":"20240424163837-0idsoj2","Type":"NodeParagraph","Properties":{"id":"20240424163837-0idsoj2"}}]}