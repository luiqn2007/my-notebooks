{"ID":"20240425174328-bts5wh5","Spec":"1","Type":"NodeDocument","Properties":{"icon":"spring.png","id":"20240425174328-bts5wh5","title":"类型转换与格式化","type":"doc","updated":"20240430113952"},"Children":[{"ID":"20240429044753-ylpuz78","Type":"NodeParagraph","Properties":{"id":"20240429044753-ylpuz78","updated":"20240429113048"},"Children":[{"Type":"NodeText","Data":"XML 中自定义的类型转换器和格式化器通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ForamttingConversionServiceFactoryBean"},{"Type":"NodeText","Data":"​ 注册到 Spring 中，代码中使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"WebMvcConfigurer#addFormatters"},{"Type":"NodeText","Data":"​ 注册"}]},{"ID":"20240425174328-q8ewszq","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240425174328-q8ewszq","updated":"20240429044740"},"Children":[{"Type":"NodeText","Data":"转换器"}]},{"ID":"20240426094738-p0sr3px","Type":"NodeParagraph","Properties":{"id":"20240426094738-p0sr3px","updated":"20240429114427"},"Children":[{"Type":"NodeText","Data":"Spring 提供 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Converter\u0026lt;S, T\u0026gt;"},{"Type":"NodeText","Data":"​ 接口表示从 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"S"},{"Type":"NodeText","Data":"​ 类型转换为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"T"},{"Type":"NodeText","Data":"​ 类型，对数据绑定自动生效，也可以通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ConversionService"},{"Type":"NodeText","Data":"​ 手动调用。"}]},{"ID":"20240429044346-0xnz6ye","Type":"NodeParagraph","Properties":{"id":"20240429044346-0xnz6ye","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240429044740"},"Children":[{"Type":"NodeText","Data":"Spring 内置转换器位于 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"org.springframework.core.convert.support"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"org.springframework.format"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 包中"}]},{"ID":"20240429114502-x6332t0","Type":"NodeParagraph","Properties":{"id":"20240429114502-x6332t0","updated":"20240429114505"},"Children":[{"Type":"NodeText","Data":"注册："}]},{"ID":"20240429114505-2ieqzoi","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240429114505-2ieqzoi","updated":"20240429114636"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public class WebConfigurer implements WebMvcConfigurer, ApplicationContextAware {\n    @Setter\n    private ApplicationContext applicationContext;\n\n    @Override\n    public void addFormatters(FormatterRegistry registry) {\n        // Integer -\u003e FixedDepositDetails 转换器（implements Converter\u003cInteger, FDD\u003e）\n        IdToFixedDepositDetailsConverter fddConverter = new IdToFixedDepositDetailsConverter();\n        fddConverter.setFixedDepositService(applicationContext.getBean(FixedDepositService.class));\n        registry.addConverter(fddConverter);\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240429114244-mhtisix","Type":"NodeSuperBlock","Properties":{"id":"20240429114244-mhtisix","updated":"20240429114500"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240429114344-jp14vye","Type":"NodeSuperBlock","Properties":{"id":"20240429114344-jp14vye","updated":"20240429114500"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240429045403-ajbvzkh","Type":"NodeParagraph","Properties":{"id":"20240429045403-ajbvzkh","updated":"20240429114457"},"Children":[{"Type":"NodeText","Data":"使用数据绑定"}]},{"ID":"20240429113900-uy2lnp4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240429113900-uy2lnp4","updated":"20240429114344"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@GetMapping(params = \"fdAction=view\")\npublic ModelAndView viewFixedDepositDetails(\n       @RequestParam FixedDepositDetails fixedDepositId\n) {\n    // ...\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240429114330-g8hpyqz","Type":"NodeSuperBlock","Properties":{"id":"20240429114330-g8hpyqz","updated":"20240429114331"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240429114321-l5j1z73","Type":"NodeParagraph","Properties":{"id":"20240429114321-l5j1z73","updated":"20240429114331"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ConversionService"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240429044951-fc3286i","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240429044951-fc3286i","updated":"20240429114331"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Autowired\nprivate ConversionService conversionService;\n\n@GetMapping(params = \"fdAction=view\")\npublic ModelAndView viewFixedDepositDetails(@RequestParam int fixedDepositId) {\n    FixedDepositDetails fixedDepositDetails = \n         conversionService.convert(fixedDepositId, FixedDepositDetails.class);\n    // ....\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240426094730-0lsp9a5","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240426094730-0lsp9a5","updated":"20240426094810"},"Children":[{"Type":"NodeText","Data":"格式化器"}]},{"ID":"20240427124246-lzmz70i","Type":"NodeParagraph","Properties":{"id":"20240427124246-lzmz70i","updated":"20240429120404"},"Children":[{"Type":"NodeText","Data":"Spring 提供 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Formatter\u0026lt;T\u0026gt;"},{"Type":"NodeText","Data":"​ 接口表示将类型 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"T"},{"Type":"NodeText","Data":"​ 与字符串之间的互相转换，支持 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Locale"},{"Type":"NodeText","Data":"​ 语言和区域检查，是比 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"PropertyEditor"},{"Type":"NodeText","Data":"​ 更强大的替代方案。"}]},{"ID":"20240429122640-qsciwqx","Type":"NodeList","ListData":{},"Properties":{"id":"20240429122640-qsciwqx","updated":"20240429122828"},"Children":[{"ID":"20240429122642-anz9em9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240429122642-anz9em9","updated":"20240429122656"},"Children":[{"ID":"20240429122642-f0yeh1j","Type":"NodeParagraph","Properties":{"id":"20240429122642-f0yeh1j","updated":"20240429122656"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Formatter\u0026lt;T\u0026gt;"},{"Type":"NodeText","Data":"​：类型 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"T"},{"Type":"NodeText","Data":"​ 与字符串之间的互相转换"}]}]},{"ID":"20240429122656-y205rv6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240429122656-y205rv6","updated":"20240429122828"},"Children":[{"ID":"20240429122656-pvfvzra","Type":"NodeParagraph","Properties":{"id":"20240429122656-pvfvzra","updated":"20240429122828"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AnnotationFormatterFactory"},{"Type":"NodeText","Data":"​：支持指定一个注解，只格式化被注解字段，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"addFormatterForFieldAnnotation"},{"Type":"NodeText","Data":"​ 方法注册"}]}]}]},{"ID":"20240430113913-hcdz8u2","Type":"NodeParagraph","Properties":{"id":"20240430113913-hcdz8u2","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240430113952"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"Thymeleaf"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 本身不支持直接调用 Spring 的 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"Formatter"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​，需要手动转换"}]}]}