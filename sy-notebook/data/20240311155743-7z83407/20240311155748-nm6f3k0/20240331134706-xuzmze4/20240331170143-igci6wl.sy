{"ID":"20240331170143-igci6wl","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f4e6","id":"20240331170143-igci6wl","title":"路径扫描与组件索引","type":"doc","updated":"20240401010621"},"Children":[{"ID":"20240331170209-4kh9792","Type":"NodeParagraph","Properties":{"id":"20240331170209-4kh9792","updated":"20240331170209"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@ComponentScan"},{"Type":"NodeText","Data":"​ 注解对应一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;component-scan\u0026gt;"},{"Type":"NodeText","Data":"​ 元素，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"basePackages"},{"Type":"NodeText","Data":"​ 属性指定搜索 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Component"},{"Type":"NodeText","Data":"​ 或 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Named"},{"Type":"NodeText","Data":"​ 的包。"}]},{"ID":"20240331170853-hhu5ytj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240331170853-hhu5ytj","updated":"20240331170858"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Configuration\n@ComponentScan(basePackages = {\"com.example.mybank\"})\npublic class BankAppConfiguration {\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240331170209-r1nccva","Type":"NodeParagraph","Properties":{"id":"20240331170209-r1nccva","updated":"20240401000007"},"Children":[{"Type":"NodeText","Data":"Spring 5 新增组件索引功能用以取代路径扫描。在编译时生成组件索引，在应用程序启动时使用索引而不是类路径扫描来加载 Spring 组件。组件索引由 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"CandidateComponentsIndexer"},{"Type":"NodeText","Data":"​ 注解处理器完成，位于 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"spring-context-indexer"},{"Type":"NodeText","Data":"​ 模块中。"}]},{"ID":"20240401005335-pdrebbt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240401005335-pdrebbt","updated":"20240401005432"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z3JhZGxl"},{"Type":"NodeCodeBlockCode","Data":"dependencies {\n    // ...\n\n    // https://mvnrepository.com/artifact/org.springframework/spring-context-indexer\n    annotationProcessor group: 'org.springframework', name: 'dependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jdbc'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.boot:spring-boot-starter-activemq'\n    implementation 'org.springframework.boot:spring-boot-starter-cache'\n    implementation 'org.springframework.boot:spring-boot-starter-validation'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.springframework.security:spring-security-test'\n    runtimeOnly 'com.mysql:mysql-connector-j'\n\n    // https://mvnrepository.com/artifact/org.springframework/spring-context-indexer\n    annotationProcessor group: 'org.springframework', name: 'spring-context-indexer', version: '6.1.5'\n\n    implementation 'it.unimi.dsi:fastutil:8.5.9'\n\n    // https://mvnrepository.com/artifact/jakarta.inject/jakarta.inject-api\n    implementation group: 'jakarta.inject', name: 'jakarta.inject-api', version: '2.0.1'\n\n    // https://mvnrepository.com/artifact/org.projectlombok/lombok\n    annotationProcessor \"org.projectlombok:lombok:${lombok_version}\"\n    compileOnly \"org.projectlombok:lombok:${lombok_version}\"\n    testAnnotationProcessor \"org.projectlombok:lombok:${lombok_version}\"\n    testCompileOnly \"org.projectlombok:lombok:${lombok_version}\"\n}', version: '6.1.5'\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240401000007-maj74n5","Type":"NodeParagraph","Properties":{"id":"20240401000007-maj74n5","updated":"20240401005502"},"Children":[{"Type":"NodeText","Data":"只要正确配置了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"spring-context-indexer"},{"Type":"NodeText","Data":"​ 注解处理器，无需进行其他配置，即可启用组件索引。组件索引需要对应的类上带有 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Indexed"},{"Type":"NodeText","Data":"​ 注解。"}]},{"ID":"20240401000411-lx9swdy","Type":"NodeParagraph","Properties":{"id":"20240401000411-lx9swdy","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240401005955"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"@Component"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 注解的类默认都带有 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"@Indexed"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 注解，使用 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"@Named"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 注解的类型也能识别"}]},{"ID":"20240401005956-70j13b0","Type":"NodeParagraph","Properties":{"id":"20240401005956-70j13b0","updated":"20240401010608"},"Children":[{"Type":"NodeText","Data":"运行 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"build"},{"Type":"NodeText","Data":"​ （"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"compile"},{"Type":"NodeText","Data":"​）后，可以在编译生成的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"META-INF"},{"Type":"NodeText","Data":"​ 下看到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"spring.components"},{"Type":"NodeText","Data":"​ 文件，包含了所有 bean 类"}]},{"ID":"20240401010609-1jkja2r","Type":"NodeParagraph","Properties":{"id":"20240401010609-1jkja2r","updated":"20240401010621"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240401010621-gyfla01.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240401000505-8xmtpxn","Type":"NodeParagraph","Properties":{"id":"20240401000505-8xmtpxn","style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);","updated":"20240401001904"},"Children":[{"Type":"NodeText","Data":"Spring 6.1 起弃用并移除，被 AOT 编译引擎取代"}]},{"ID":"20240401001629-c1eczfx","Type":"NodeList","ListData":{"Typ":3},"Properties":{"id":"20240401001629-c1eczfx","updated":"20240401002902"},"Children":[{"ID":"20240401001634-as2rbj0","Type":"NodeListItem","ListData":{"Typ":3,"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240401001634-as2rbj0","updated":"20240401002902"},"Children":[{"Type":"NodeTaskListItemMarker"},{"ID":"20240401001634-9pclsxv","Type":"NodeParagraph","Properties":{"id":"20240401001634-9pclsxv","updated":"20240401002902"},"Children":[{"Type":"NodeText","Data":"AOT 编译引擎取代 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"CandidateComponentsIndexer"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20240401002903-fo3o91y","Type":"NodeParagraph","Properties":{"id":"20240401002903-fo3o91y"}}]}