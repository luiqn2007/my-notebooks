{"ID":"20240329122119-mdl75gt","Spec":"1","Type":"NodeDocument","Properties":{"icon":"spring.png","id":"20240329122119-mdl75gt","title":"使用 BeanPostProcessor 实现 InstanceValidator 接口 bean 的自查","type":"doc","updated":"20240329122255"},"Children":[{"ID":"20240329122237-391gtt2","Type":"NodeParagraph","Properties":{"id":"20240329122237-391gtt2","updated":"20240329122255"},"Children":[{"Type":"NodeText","Data":"这是一个 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240329075220-g61ihxt","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"BeanPostProcessor"},{"Type":"NodeText","Data":"​ 的实现"}]},{"ID":"20240329122145-eokmqdv","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240329122145-eokmqdv","updated":"20240329122145"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public class FixedDepositJdbcDao extends FixedDepositDao implements InstanceValidator {\n\n    @Override\n    public void validateInstance() {\n        LOGGER.info(\"FixedDepositJdbcDao: Validating instance\");\n        if (connection == null) {\n            LOGGER.error(\"FixedDepositJdbcDao: Failed to obtain DatabaseConnection instance.\");\n        }\n    }\n}\n\n@Setter\n@Getter\npublic class InstanceValidationBeanPostProcessor implements BeanPostProcessor, Ordered {\n\n    private static final Logger LOGGER = LogManager.getLogger();\n\n    private int order;\n\n    public InstanceValidationBeanPostProcessor() {\n        LOGGER.info(\"Create InstanceValidationBeanPostProcessor\");\n    }\n\n    public Object postProcessAfterInitialization(Object bean, String beanName) {\n        LOGGER.info(\"PostProcessing bean {}\", beanName);\n        if (bean instanceof InstanceValidator validator) {\n            LOGGER.info(\"Validating instance of {}\", beanName);\n            validator.validateInstance();\n        }\n        return bean;\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240329122145-stovs10","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240329122145-stovs10","updated":"20240329122145"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"eG1s"},{"Type":"NodeCodeBlockCode","Data":"\u003cbean class=\"com.example.mybank.postprocessor.InstanceValidationBeanPostProcessor\" p:order=\"1\" /\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240329122145-ily658c","Type":"NodeParagraph","Properties":{"id":"20240329122145-ily658c","updated":"20240329122145"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240329081104-vztnglp.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]}]}