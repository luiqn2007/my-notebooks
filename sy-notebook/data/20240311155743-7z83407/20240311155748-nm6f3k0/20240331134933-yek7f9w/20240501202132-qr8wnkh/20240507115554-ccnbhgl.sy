{"ID":"20240507115554-ccnbhgl","Spec":"1","Type":"NodeDocument","Properties":{"icon":"spring.png","id":"20240507115554-ccnbhgl","title":"域对象安全配置","type":"doc","updated":"20240508021558"},"Children":[{"ID":"20240507115554-gk5exkx","Type":"NodeParagraph","Properties":{"id":"20240507115554-gk5exkx","updated":"20240508020748"},"Children":[{"Type":"NodeText","Data":"如果 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@PerAuthorize"},{"Type":"NodeText","Data":"​ 注解的函数接收一个域对象，则该注解可以处理对该域对象的保护，验证用户是否具有对应权限"}]},{"ID":"20240507120856-91pfzjo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240507120856-91pfzjo","updated":"20240508020609"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@PreAuthorize(\"hasPermission(#fixedDepositDetails, write)\")\nvoid editFixedDeposit(FixedDepositDetails fixedDepositDetails);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240508020609-ab50bn2","Type":"NodeParagraph","Properties":{"id":"20240508020609-ab50bn2","updated":"20240508020729"},"Children":[{"Type":"NodeText","Data":"如果传入的参数是一个域对象标识符（如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"id"},{"Type":"NodeText","Data":"​），也可以进行权限检查，第二个参数为域对象类型全类名"}]},{"ID":"20240508020731-96jpd5p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240508020731-96jpd5p","updated":"20240508020738"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@PreAuthorize(\"hasPermission(#fixedDepositId, 'com.example.mybank.domain.FixedDepositDetails', write)\")\nvoid provideAccessToAdmin(int fixedDepositId);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240508020738-wwwfg53","Type":"NodeParagraph","Properties":{"id":"20240508020738-wwwfg53","updated":"20240508020934"},"Children":[{"Type":"NodeText","Data":"如果需要多个权限校验，可以使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"and"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"or"},{"Type":"NodeText","Data":"​ 等运算符"}]},{"ID":"20240508020934-fgnkvcx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240508020934-fgnkvcx","updated":"20240508021031"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@PreAuthorize(\"hasPermission(#id, 'com.example.mybank.domain.FixedDepositDetails', read) or \" +\n              \"hasPermission(#id, 'com.example.mybank.domain.FixedDepositDetails', admin)\")\nFixedDepositDetails getFixedDepositDetails(int id);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240508021056-sldzuig","Type":"NodeParagraph","Properties":{"id":"20240508021056-sldzuig","updated":"20240508021529"},"Children":[{"Type":"NodeText","Data":"如果返回值是一个列表，可以使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@PostFilter"},{"Type":"NodeText","Data":"​ 进行过滤，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"filterObject"},{"Type":"NodeText","Data":"​ 指代每个域对象"}]},{"ID":"20240508021117-upcxq0c","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240508021117-upcxq0c","updated":"20240508021557"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@PreAuthorize(\"hasRole('ROLE_CUSTOM')\")\n@PostFilter(\"hasPermission(filterObject, read) or hasPermission(filterObject, admin)\")\nList\u003cFixedDepositDetails\u003e getFixedDeposits();\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240508021558-fxpw58r","Type":"NodeParagraph","Properties":{"id":"20240508021558-fxpw58r"}}]}