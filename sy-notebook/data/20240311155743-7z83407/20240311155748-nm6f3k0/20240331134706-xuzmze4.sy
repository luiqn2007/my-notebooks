{"ID":"20240331134706-xuzmze4","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f4e6","id":"20240331134706-xuzmze4","title":"Java 容器配置","type":"doc","updated":"20240331170301"},"Children":[{"ID":"20240331134706-2ndmhvm","Type":"NodeParagraph","Properties":{"id":"20240331134706-2ndmhvm","updated":"20240331163351"},"Children":[{"Type":"NodeText","Data":"可以使用 Java 注解替代 XML 配置 Spring 容器，其核心为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Configuration"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240331163313-4nje485","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"@Bean"},{"Type":"NodeText","Data":"​ 注解。"}]},{"ID":"20240331155449-nd2uh6h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240331155449-nd2uh6h","updated":"20240331160341"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class BankAppConfiguration {\n  \n    @Bean\n    public FixedDepositService fixedDepositService() throws Exception {\n        return new FixedDepositServiceImpl(Constants.EVENT_SENDER_PROPERTY_FILE_PATH);\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240331164200-x78xqnq","Type":"NodeParagraph","Properties":{"id":"20240331164200-x78xqnq","updated":"20240331164517"},"Children":[{"Type":"NodeText","Data":"配置好的容器通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AnnotationConfigApplicationContext"},{"Type":"NodeText","Data":"​ 创建。"}]},{"ID":"20240331164511-n0lawir","Type":"NodeList","ListData":{},"Properties":{"id":"20240331164511-n0lawir","updated":"20240331165440"},"Children":[{"ID":"20240331164512-124bgcq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240331164512-124bgcq","updated":"20240331164512"},"Children":[{"ID":"20240331164512-i1rko5c","Type":"NodeParagraph","Properties":{"id":"20240331164512-i1rko5c","updated":"20240331164819"},"Children":[{"Type":"NodeText","Data":"将所有被 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Configuration"},{"Type":"NodeText","Data":"​ 注解的类作为参数传入 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AnnotationConfigApplicationContext"},{"Type":"NodeText","Data":"​ 中"}]},{"ID":"20240331165000-lx2zrvt","Type":"NodeList","ListData":{},"Properties":{"id":"20240331165000-lx2zrvt"},"Children":[{"ID":"20240331164819-050qwye","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240331164819-050qwye"},"Children":[{"ID":"20240331164819-115monm","Type":"NodeParagraph","Properties":{"id":"20240331164819-115monm","updated":"20240331165243"},"Children":[{"Type":"NodeText","Data":"如果在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Component"},{"Type":"NodeText","Data":"​ 或 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Named"},{"Type":"NodeText","Data":"​ 注解的类使用了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Bean"},{"Type":"NodeText","Data":"​，则被注解类也应作为容器配置类传入"}]}]}]}]},{"ID":"20240331165357-gdqozsj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240331165357-gdqozsj","updated":"20240331165440"},"Children":[{"ID":"20240331165357-xmc6qn6","Type":"NodeParagraph","Properties":{"id":"20240331165357-xmc6qn6","updated":"20240331165440"},"Children":[{"Type":"NodeText","Data":"可以先创建 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AnnotationConfigApplicationContext"},{"Type":"NodeText","Data":"​ 再注入容器配置类，最后要通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"refresh()"},{"Type":"NodeText","Data":"​ 刷新容器"}]},{"ID":"20240331165425-qw37gbt","Type":"NodeList","ListData":{},"Properties":{"id":"20240331165425-qw37gbt","updated":"20240331165434"},"Children":[{"ID":"20240331165322-vmgln14","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240331165322-vmgln14","updated":"20240331165430"},"Children":[{"ID":"20240331165322-7h50ywy","Type":"NodeParagraph","Properties":{"id":"20240331165322-7h50ywy","updated":"20240331165430"},"Children":[{"Type":"NodeText","Data":"通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"scan"},{"Type":"NodeText","Data":"​ 传入包名，由 Spring 扫描容器配置类"}]}]},{"ID":"20240331165350-n8chvzx","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240331165350-n8chvzx","updated":"20240331165434"},"Children":[{"ID":"20240331165350-3zuikds","Type":"NodeParagraph","Properties":{"id":"20240331165350-3zuikds","updated":"20240331165434"},"Children":[{"Type":"NodeText","Data":"通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"register"},{"Type":"NodeText","Data":"​ 传入容器配置类"}]}]}]}]},{"ID":"20240331164605-vyni52n","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240331164605-vyni52n"},"Children":[{"ID":"20240331164605-tyuag2d","Type":"NodeParagraph","Properties":{"id":"20240331164605-tyuag2d","updated":"20240331164654"},"Children":[{"Type":"NodeText","Data":"作为容器配置在构造函数传入的类也被初始化为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bean"},{"Type":"NodeText","Data":"​，因此可以通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"getBean"},{"Type":"NodeText","Data":"​ 获取"}]}]}]},{"ID":"20240331164245-5ckrcr1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240331164245-5ckrcr1","updated":"20240331164724"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@SpringBootApplication\npublic class BankAppWithAnnotation {\n    public static void main(String[] args) {\n        ApplicationContext context = new AnnotationConfigApplicationContext(BankAppConfiguration.class);\n        BankAppConfiguration configuration = context.getBean(BankAppConfiguration.class);\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240331162012-f8h8vy9","Type":"NodeParagraph","Properties":{"id":"20240331162012-f8h8vy9","updated":"20240331170214"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Configuration"},{"Type":"NodeText","Data":"​ 声明了一个容器配置，相当于一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;beans\u0026gt;"},{"Type":"NodeText","Data":"​ 标签。该注解依赖于 GCLIB 库，由 GCLIB 负责子类化，因此不能将其声明为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"final"},{"Type":"NodeText","Data":"​ 的。"}]},{"ID":"20240331170227-c3mn5qy","Type":"NodeParagraph","Properties":{"id":"20240331170227-c3mn5qy","updated":"20240331170300"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;beans\u0026gt;"},{"Type":"NodeText","Data":"​ 的其他子标签通过对应的元素在其中配置："}]},{"ID":"20240331170300-xpjaurp","Type":"NodeList","ListData":{},"Properties":{"id":"20240331170300-xpjaurp","updated":"20240331170301"},"Children":[{"ID":"20240331170301-mquk30t","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240331170301-mquk30t","updated":"20240331170301"},"Children":[{"ID":"20240331170301-h3kga6x","Type":"NodeParagraph","Properties":{"id":"20240331170301-h3kga6x","updated":"20240331170329"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;bean\u0026gt;"},{"Type":"NodeText","Data":"​：通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Bean"},{"Type":"NodeText","Data":"​ 修饰"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240331163313-4nje485","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"注入方法"}]}]},{"ID":"20240331170329-jfuotrs","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240331170329-jfuotrs"},"Children":[{"ID":"20240331170329-gplhmx7","Type":"NodeParagraph","Properties":{"id":"20240331170329-gplhmx7","updated":"20240331170435"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;component-scan\u0026gt;"},{"Type":"NodeText","Data":"​：使用"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240331170143-igci6wl","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"路径扫描或组件索引"}]}]},{"ID":"20240331170436-9to6er4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240331170436-9to6er4"},"Children":[{"ID":"20240331170436-n5otdws","Type":"NodeParagraph","Properties":{"id":"20240331170436-n5otdws","updated":"20240331170556"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;import\u0026gt;"},{"Type":"NodeText","Data":"​："},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240331170525-bbw5jna","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"导入其他 Java 容器配置"}]}]}]}]}