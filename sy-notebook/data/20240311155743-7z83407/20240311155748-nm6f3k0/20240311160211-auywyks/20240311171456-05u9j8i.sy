{"ID":"20240311171456-05u9j8i","Spec":"1","Type":"NodeDocument","Properties":{"icon":"spring.png","id":"20240311171456-05u9j8i","title":"基于构造器的 DI","type":"doc","updated":"20240504130559"},"Children":[{"ID":"20240311171502-8i09a6o","Type":"NodeParagraph","Properties":{"id":"20240311171502-8i09a6o","updated":"20240411015747"},"Children":[{"Type":"NodeText","Data":"基于构造器的注入包括构造函数和工厂函数。对于构造函数，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;constructor-arg\u0026gt;"},{"Type":"NodeText","Data":"​ 子标签提供，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"index"},{"Type":"NodeText","Data":"​ 指定参数位置。"}]},{"ID":"20240411014957-gqgo8cb","Type":"NodeParagraph","Properties":{"id":"20240411014957-gqgo8cb","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240504130533"},"Children":[{"Type":"NodeText","Data":"除根据位置注入参数外，还可以根据"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"block-ref","TextMarkBlockRefID":"20240311171842-2ercimr","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"类型"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"或"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"block-ref","TextMarkBlockRefID":"20240311171927-9lihe48","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"参数名"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"注入，这使得当修改构造函数参数顺序时，不必要过多修改 bean 类的配置文件"}]},{"ID":"20240504130550-4m1zg3k","Type":"NodeParagraph","Properties":{"id":"20240504130550-4m1zg3k","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240504130552"},"Children":[{"Type":"NodeText","Data":"基于构造函数的 DI 与基于 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"setter"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 的 DI 可以组合使用"}]},{"ID":"20240311171502-7h92z8s","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240311171502-7h92z8s","updated":"20240311171502"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"eG1s"},{"Type":"NodeCodeBlockCode","Data":"\u003cbean id=\"personalBankingService\" class=\"com.example.mybank.chapter02.PersonalBankingService\"\u003e\n    \u003cconstructor-arg index=\"0\" ref=\"jmsMessageSender\" /\u003e\n    \u003cconstructor-arg index=\"1\" ref=\"emailMessageSender\" /\u003e\n    \u003cconstructor-arg index=\"2\" ref=\"webServiceInvoker\" /\u003e\n\u003c/bean\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240311171502-e9poq9q","Type":"NodeParagraph","Properties":{"id":"20240311171502-e9poq9q","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240504130559"},"Children":[{"Type":"NodeText","Data":"使用工厂方法创建对象时，工厂方法的参数被认为是构造函数的参数"}]},{"ID":"20240411015625-9x08m7d","Type":"NodeSuperBlock","Properties":{"id":"20240411015625-9x08m7d","updated":"20240504130556"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240411015625-oavkin2","Type":"NodeSuperBlock","Properties":{"id":"20240411015625-oavkin2","updated":"20240411015758"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240411015625-d5qsesh","Type":"NodeParagraph","Properties":{"id":"20240411015625-d5qsesh","updated":"20240411015758"},"Children":[{"Type":"NodeText","Data":"设我们有工厂类和工厂方法："}]},{"ID":"20240411015625-iu3ibki","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240411015625-iu3ibki","updated":"20240411015625"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"CustomDateEditorpublic class FixedDepositDaoFactory {\n    public FixedDepositDao getFixedDepositDao(String type) {\n        return switch (type.toLowerCase(Locale.ROOT)) {\n            case \"jdbc\" -\u003e new FixedDepositJdbcDao();\n            case \"hibernate\" -\u003e new FixedDepositHibernateDao();\n            case \"ibatis\" -\u003e new FixedDepositIbatisDao();\n            default -\u003e new FixedDepositDao();\n        };\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240411015625-a9fa4sk","Type":"NodeSuperBlock","Properties":{"id":"20240411015625-a9fa4sk","updated":"20240411015625"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240411015625-u2x8mlu","Type":"NodeParagraph","Properties":{"id":"20240411015625-u2x8mlu","updated":"20240411015625"},"Children":[{"Type":"NodeText","Data":"在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bean"},{"Type":"NodeText","Data":"​ 中创建对应 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"factory"},{"Type":"NodeText","Data":"​ 以及对应参数："}]},{"ID":"20240411015625-3zmao7z","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240411015625-3zmao7z","updated":"20240411015625"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"eG1s"},{"Type":"NodeCodeBlockCode","Data":"\u003cbean id=\"daoFactory\" \n      class=\"com.example.mybank.dao.FixedDepositDaoFactory\" /\u003e\n\n\u003cbean id=\"databaseInfo\" \n      class=\"com.example.mybank.DatabaseInfo\" /\u003e\n\n\u003c!-- FixedDepositJdbcDao 中存在 setDatabaseInfo 方法 --\u003e\n\u003cbean id=\"dao\" \n      factory-bean=\"daoFactory\" \n      factory-method=\"getFixedDepositDao\"\u003e\n    \u003cconstructor-arg index=\"0\" value=\"jdbc\" /\u003e\n    \u003cproperty name=\"databaseInfo\" ref=\"databaseInfo\" /\u003e\n\u003c/bean\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240311171537-i54g6mw","Type":"NodeParagraph","Properties":{"id":"20240311171537-i54g6mw"}}]}