{"ID":"20240331090448-hy2sfqd","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f4e6","id":"20240331090448-hy2sfqd","title":"Validator 对象验证","type":"doc","updated":"20240403124504"},"Children":[{"ID":"20240331090448-3wjqn71","Type":"NodeParagraph","Properties":{"id":"20240331090448-3wjqn71","updated":"20240403124434"},"Children":[{"Type":"NodeText","Data":"Spring Validation API 提供 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Validator"},{"Type":"NodeText","Data":"​ 接口，允许对应用程序层中的对象进行验证。"}]},{"ID":"20240403124449-q1k47l4","Type":"NodeParagraph","Properties":{"id":"20240403124449-q1k47l4","updated":"20240403124449"},"Children":[{"Type":"NodeText","Data":"首先，我们需要创建一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"org.springframework.validation.Validator"},{"Type":"NodeText","Data":"​ 接口的实现类："}]},{"ID":"20240403124449-q2w60p6","Type":"NodeList","ListData":{},"Properties":{"id":"20240403124449-q2w60p6","updated":"20240403124449"},"Children":[{"ID":"20240403124449-w4sfnlh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240403124449-w4sfnlh","updated":"20240403124449"},"Children":[{"ID":"20240403124449-8xti32b","Type":"NodeParagraph","Properties":{"id":"20240403124449-8xti32b","updated":"20240403124449"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"supports"},{"Type":"NodeText","Data":"​：校验给定 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bean"},{"Type":"NodeText","Data":"​ 类型是否需要校验"}]}]},{"ID":"20240403124449-aanu77x","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240403124449-aanu77x","updated":"20240403124449"},"Children":[{"ID":"20240403124449-vlk14fe","Type":"NodeParagraph","Properties":{"id":"20240403124449-vlk14fe","updated":"20240403124449"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"validate"},{"Type":"NodeText","Data":"​：进行校验，若出现错误，将错误放入 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Errors"},{"Type":"NodeText","Data":"​ 参数中"}]}]}]},{"ID":"20240403124449-pmbt82r","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240403124449-pmbt82r","updated":"20240403124449"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public class FixedDepositValidator implements Validator {\n\n    @Override\n    public boolean supports(Class\u003c?\u003e clazz) {\n        return FixedDepositDao.class.isAssignableFrom(clazz);\n    }\n\n    @Override\n    public void validate(Object target, Errors errors) {\n        FixedDepositDetails fixedDepositDetails = (FixedDepositDetails) target;\n        if (fixedDepositDetails.getDepositAmount() == 0) {\n            errors.reject(\"zeroDepositAmount\");\n        }\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240403124449-czxamid","Type":"NodeParagraph","Properties":{"id":"20240403124449-czxamid","updated":"20240403124449"},"Children":[{"Type":"NodeText","Data":"之后，在需要的地方进行校验"}]},{"ID":"20240403124449-j01k90j","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240403124449-j01k90j","updated":"20240403124449"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public boolean createFixedDeposit(FixedDepositDetails fdd) {\n    BeanPropertyBindingResult bindingResult = new BeanPropertyBindingResult(fdd, \"fixedDepositDetails\");\n    FixedDepositValidator validator = new FixedDepositValidator();\n    validator.validate(fdd, bindingResult);\n    if (bindingResult.hasErrors()) {\n        LOGGER.error(\"Validation failed for FixedDepositDetails\");\n        return false;\n    }\n\n    // 校验通过\n    // do something ...\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240331105953-5v0uife","Type":"NodeParagraph","Properties":{"id":"20240331105953-5v0uife","updated":"20240331112025"},"Children":[{"Type":"NodeText","Data":"基础的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Validator"},{"Type":"NodeText","Data":"​ 校验接口可以直接使用，基于 "},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240331110028-8pfxozk","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"JSR380"},{"Type":"NodeText","Data":" 与 Hibernate Validator 的校验需要依赖于 Spring Validation API"}]},{"ID":"20240331111849-4h6hs0i","Type":"NodeBlockquote","Properties":{"id":"20240331111849-4h6hs0i","updated":"20240331112358"},"Children":[{"ID":"20240331112004-8y54du5","Type":"NodeParagraph","Properties":{"id":"20240331112004-8y54du5","updated":"20240331112120"},"Children":[{"Type":"NodeText","Data":"Spring Validation API 需要引入 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"org.springframework.boot:spring-boot-starter-validation"},{"Type":"NodeText","Data":"​ 依赖，包含 JSR380 与 Hibernate Validator"}]},{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20240331111855-ead4vir","Type":"NodeParagraph","Properties":{"id":"20240331111855-ead4vir","updated":"20240331111956"},"Children":[{"Type":"NodeText","Data":"JSR380 单独使用需要引入 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"jakarta.validation:jakarta.validation-api"},{"Type":"NodeText","Data":"​ 依赖"}]},{"ID":"20240331111956-1yrh8m0","Type":"NodeParagraph","Properties":{"id":"20240331111956-1yrh8m0","updated":"20240331112358"},"Children":[{"Type":"NodeText","Data":"Hibernate Validator 提供了 JSR380 的参考实现，并依赖于 JSR341（统一表达式语言）"}]}]},{"ID":"20240331112027-rxzg60e","Type":"NodeParagraph","Properties":{"id":"20240331112027-rxzg60e","updated":"20240331121208"},"Children":[{"Type":"NodeText","Data":"同时，Spring 也支持 "},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240331121004-vr1u84f","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"JSR380 对方法的校验"},{"Type":"NodeText","Data":"。"}]},{"ID":"20240403124504-rt1sddr","Type":"NodeParagraph","Properties":{"id":"20240403124504-rt1sddr"}}]}