{"ID":"20240330152111-s0e3rnz","Spec":"1","Type":"NodeDocument","Properties":{"icon":"spring.png","id":"20240330152111-s0e3rnz","title":"自定义标识符","type":"doc","updated":"20240330154435"},"Children":[{"ID":"20240330152111-srd4s1t","Type":"NodeParagraph","Properties":{"id":"20240330152111-srd4s1t","updated":"20240330153323"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Qualifier"},{"Type":"NodeText","Data":"​ 作为元注解时，其作用是声明自定义限定符注解，即使用自定义的几个标志作为自动装配的依据。"}]},{"ID":"20240330153323-uopixjm","Type":"NodeParagraph","Properties":{"id":"20240330153323-uopixjm","updated":"20240330154046"},"Children":[{"Type":"NodeText","Data":"首先，我们使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Qualifier"},{"Type":"NodeText","Data":"​ 创建一个注解。下面的例子中，我们根据 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BankType"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"TransformMode"},{"Type":"NodeText","Data":"​ 两个枚举选择具体的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bean"},{"Type":"NodeText","Data":"​ 类。我们自定义的标识符就是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BankType"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"TransformMode"},{"Type":"NodeText","Data":"​ 两个枚举值的排列组合。"}]},{"ID":"20240330153436-jzzkm16","Type":"NodeSuperBlock","Properties":{"id":"20240330153436-jzzkm16","updated":"20240330153437"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240330153429-gcx8qyw","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240330153429-gcx8qyw","updated":"20240330153437"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public enum BankType {\n    SAME, DIFF\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240330153434-y2ckc6d","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240330153434-y2ckc6d","updated":"20240330153437"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public enum TransformMode {\n    IMMEDIATE, NORMAL\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240330153443-q447cfs","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240330153443-q447cfs","updated":"20240330153443"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Target({ElementType.FIELD, ElementType.PARAMETER, ElementType.TYPE, ElementType.ANNOTATION_TYPE})\n@Retention(RetentionPolicy.RUNTIME)\n@Qualifier\npublic @interface FundTransfer {\n\n    TransformMode transformSpeed();\n    BankType bankType();\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240330153444-c92m5np","Type":"NodeParagraph","Properties":{"id":"20240330153444-c92m5np","updated":"20240330153933"},"Children":[{"Type":"NodeText","Data":"同时还需要通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"CustomAutowireConfigurer"},{"Type":"NodeText","Data":"​ 注册该注解。"}]},{"ID":"20240330153934-sza3rle","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240330153934-sza3rle","updated":"20240330153940"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"eG1s"},{"Type":"NodeCodeBlockCode","Data":"\u003cbean class=\"org.springframework.beans.factory.annotation.CustomAutowireConfigurer\"\u003e\n    \u003cproperty name=\"customQualifierTypes\"\u003e\n        \u003cset\u003e\n            \u003cvalue\u003ecom.example.mybank.annotation.FundTransfer\u003c/value\u003e\n        \u003c/set\u003e\n    \u003c/property\u003e\n\u003c/bean\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240330153941-cd1sq29","Type":"NodeParagraph","Properties":{"id":"20240330153941-cd1sq29","updated":"20240330154052"},"Children":[{"Type":"NodeText","Data":"然后，创建不同的 bean 类，对不同类使用不同标识符进行注解。"}]},{"ID":"20240330154220-4zn6zj1","Type":"NodeSuperBlock","Properties":{"id":"20240330154220-4zn6zj1","updated":"20240330154220"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240330154212-ddrnwha","Type":"NodeSuperBlock","Properties":{"id":"20240330154212-ddrnwha","updated":"20240330154220"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240330154106-72pl9ns","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240330154106-72pl9ns","updated":"20240330154212"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Service\n@FundTransfer(\n  transformSpeed = TransformMode.IMMEDIATE,\n  bankType = BankType.DIFF)\npublic class ImmediateDiffBank\n implements FundTransferService {\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240330154114-gyg6mj6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240330154114-gyg6mj6","updated":"20240330154212"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Service\n@FundTransfer(\n  transformSpeed = TransformMode.IMMEDIATE,\n  bankType = BankType.SAME)\npublic class ImmediateSameBank\n implements FundTransferService {\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240330154215-3utvoo1","Type":"NodeSuperBlock","Properties":{"id":"20240330154215-3utvoo1","updated":"20240330154220"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240330154120-ewa5flb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240330154120-ewa5flb","updated":"20240330154215"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Service\n@FundTransfer(\n  transformSpeed = TransformMode.NORMAL,\n  bankType = BankType.DIFF)\npublic class NormalDiffBank\n implements FundTransferService {\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240330154126-3d8u3n7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240330154126-3d8u3n7","updated":"20240330154215"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Service\n@FundTransfer(\n  transformSpeed = TransformMode.NORMAL,\n  bankType = BankType.SAME)\npublic class NormalSameBank\n implements FundTransferService {\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240330154220-ifrwblj","Type":"NodeParagraph","Properties":{"id":"20240330154220-ifrwblj","updated":"20240330154245"},"Children":[{"Type":"NodeText","Data":"最后，根据不同标识符自动装配即可。"}]},{"ID":"20240330154433-ogvszmy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240330154433-ogvszmy","updated":"20240330154433"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Getter\n@Component\npublic class FundTransferProcessor {\n\n    @Autowired\n    @FundTransfer(transformSpeed = TransformMode.IMMEDIATE, bankType = BankType.SAME)\n    private FundTransferService sameBankImmediateFundTransferService;\n\n    @Autowired\n    @FundTransfer(transformSpeed = TransformMode.IMMEDIATE, bankType = BankType.DIFF)\n    private FundTransferService diffBankImmediateFundTransferService;\n\n    @Autowired\n    @FundTransfer(transformSpeed = TransformMode.NORMAL, bankType = BankType.SAME)\n    private FundTransferService sameBankNormalFundTransferService;\n\n    @Autowired\n    @FundTransfer(transformSpeed = TransformMode.NORMAL, bankType = BankType.DIFF)\n    private FundTransferService diffBankNormalFundTransferService;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240330154435-yt9ocvu","Type":"NodeParagraph","Properties":{"id":"20240330154435-yt9ocvu"}}]}