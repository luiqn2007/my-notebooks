{"ID":"20240410012928-tiwq70t","Spec":"1","Type":"NodeDocument","Properties":{"icon":"spring.png","id":"20240410012928-tiwq70t","title":"通知类型","type":"doc","updated":"20240411013811"},"Children":[{"ID":"20240410012940-4jamteh","Type":"NodeParagraph","Properties":{"id":"20240410012940-4jamteh","updated":"20240410025839"},"Children":[{"Type":"NodeText","Data":"通知类型包括："}]},{"ID":"20240410025839-3er9h1z","Type":"NodeList","ListData":{},"Properties":{"id":"20240410025839-3er9h1z","updated":"20240411013337"},"Children":[{"ID":"20240410025839-7oev02d","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240410025839-7oev02d","updated":"20240410025839"},"Children":[{"ID":"20240410025839-fwxxlov","Type":"NodeParagraph","Properties":{"id":"20240410025839-fwxxlov","updated":"20240410030111"},"Children":[{"Type":"NodeText","Data":"前置："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Before"},{"Type":"NodeText","Data":"​，在执行目标方法之前执行"}]},{"ID":"20240410030150-i399h5w","Type":"NodeParagraph","Properties":{"id":"20240410030150-i399h5w","updated":"20240410030639"},"Children":[{"Type":"NodeText","Data":"形参列表为一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"JoinPoint"},{"Type":"NodeText","Data":"​ 变量，存储目标方法的信息，可获取传递给目标的参数；无返回值"}]}]},{"ID":"20240410025912-nskyde5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240410025912-nskyde5"},"Children":[{"ID":"20240410025912-gn4e8u6","Type":"NodeParagraph","Properties":{"id":"20240410025912-gn4e8u6","updated":"20240410163741"},"Children":[{"Type":"NodeText","Data":"后置："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@After"},{"Type":"NodeText","Data":"​，目标方法执行完方法后执行，不管方法是否抛出异常都会触发调用"}]}]},{"ID":"20240410025957-j68yphz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240410025957-j68yphz","updated":"20240411013337"},"Children":[{"ID":"20240410025957-mm623f4","Type":"NodeParagraph","Properties":{"id":"20240410025957-mm623f4","updated":"20240410163842"},"Children":[{"Type":"NodeText","Data":"围绕："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Around"},{"Type":"NodeText","Data":"​，目标方法执行前后都会触发调用"}]},{"ID":"20240410163931-as814qu","Type":"NodeParagraph","Properties":{"id":"20240410163931-as814qu","updated":"20240410164216"},"Children":[{"Type":"NodeText","Data":"形参列表为一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ProceedingJoinPoint"},{"Type":"NodeText","Data":"​ 变量，当且仅当调用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"proceed"},{"Type":"NodeText","Data":"​ 方法时才会调用目标方法"}]},{"ID":"20240410164244-sqi85f4","Type":"NodeParagraph","Properties":{"id":"20240410164244-sqi85f4","updated":"20240410164333"},"Children":[{"Type":"NodeText","Data":"相当于拦截了目标方法的调用"}]},{"ID":"20240410164335-zbxm95m","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240410164335-zbxm95m","updated":"20240411013337"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Around(\"execution(* com.example.mybank.service.*Service.*(..))\")\npublic Object logInvokeTime(ProceedingJoinPoint joinPoint) {\n    Object returnObj = null;\n    StopWatch stopWatch = new StopWatch();\n    stopWatch.start(joinPoint.getSignature().getName());\n    try {\n        returnObj = joinPoint.proceed();\n    } catch (Throwable ignored) {\n    }\n    stopWatch.stop();\n    logger.info(stopWatch.prettyPrint());\n    return returnObj;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240410025923-83pmrky","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240410025923-83pmrky","updated":"20240411012853"},"Children":[{"ID":"20240410025923-eg0ilus","Type":"NodeParagraph","Properties":{"id":"20240410025923-eg0ilus","updated":"20240410120544"},"Children":[{"Type":"NodeText","Data":"函数返回后："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@AfterReturning"},{"Type":"NodeText","Data":"​，在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"return"},{"Type":"NodeText","Data":"​ 之后调用"}]},{"ID":"20240410030400-y354rpu","Type":"NodeParagraph","Properties":{"id":"20240410030400-y354rpu","updated":"20240410030419"},"Children":[{"Type":"NodeText","Data":"若目标方法抛出异常，不会执行该通知"}]},{"ID":"20240410030419-f6ino0u","Type":"NodeParagraph","Properties":{"id":"20240410030419-f6ino0u","updated":"20240410030432"},"Children":[{"Type":"NodeText","Data":"允许在该通知内修改返回值"}]},{"ID":"20240410122643-4s6mxr3","Type":"NodeParagraph","Properties":{"id":"20240410122643-4s6mxr3","updated":"20240410122744"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"returning"},{"Type":"NodeText","Data":"​ 属性用于指定返回值参数名"}]},{"ID":"20240410030529-1db32ci","Type":"NodeParagraph","Properties":{"id":"20240410030529-1db32ci","updated":"20240410030642"},"Children":[{"Type":"NodeText","Data":"形参列表为一个"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"JoinPoint"},{"Type":"NodeText","Data":"​ 和一个其他类型（返回值类型）用于接收返回值；无返回值"}]},{"ID":"20240410122954-ci17kix","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240410122954-ci17kix","updated":"20240411012853"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@AfterReturning(value=\"...\", returning=\"aValue\")\npublic void afterCreateBankAccountMethodAdvice(JoinPoint joinPoint, int aValue) { ... }\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240410025915-fjc6r93","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240410025915-fjc6r93","updated":"20240410025920"},"Children":[{"ID":"20240410025915-0odcslg","Type":"NodeParagraph","Properties":{"id":"20240410025915-0odcslg","updated":"20240410120542"},"Children":[{"Type":"NodeText","Data":"异常抛出后："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"AfterThrowing"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240410122746-js9zxvz","Type":"NodeParagraph","Properties":{"id":"20240410122746-js9zxvz","updated":"20240410122918"},"Children":[{"Type":"NodeText","Data":"当方法内抛出异常后执行该通知"}]},{"ID":"20240410122918-ux0dscm","Type":"NodeParagraph","Properties":{"id":"20240410122918-ux0dscm","updated":"20240410123401"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"throwing"},{"Type":"NodeText","Data":"​ 属性用于指定异常名，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"exception"},{"Type":"NodeText","Data":"​ 属性用于指定异常类型（可选）"}]},{"ID":"20240410123246-4bl88og","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240410123246-4bl88og","updated":"20240410123319"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@AfterReturning(value=\"...\", throwing=\"exception\", exception=\"...\")\npublic void afterCreateBankAccountMethodAdvice(JoinPoint joinPoint, Throwable exception) { ... }\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20240410155535-tef2yw5","Type":"NodeParagraph","Properties":{"id":"20240410155535-tef2yw5","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240411013811"},"Children":[{"Type":"NodeText","Data":"还可以通过特殊接口创建通知，取代注解的使用，在对应类中实现 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"MethodBeforeAdvice"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 等 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"org.springframework.aop"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 下的接口即可。"}]}]}