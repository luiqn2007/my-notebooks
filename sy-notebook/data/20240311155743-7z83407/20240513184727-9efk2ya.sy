{"ID":"20240513184727-9efk2ya","Spec":"1","Type":"NodeDocument","Properties":{"icon":"sqlalchemy.ico","id":"20240513184727-9efk2ya","title":"SQLAlchemy","type":"doc","updated":"20240513185721"},"Children":[{"ID":"20240513185615-025f6x9","Type":"NodeParagraph","Properties":{"id":"20240513185615-025f6x9","updated":"20240513185615"},"Children":[{"Type":"NodeText","Data":"Python 的 ORM 框架，主要有Engine 框架引擎、Connection Pool连接池、Dialect （DB API 类型）、Schema/Type 数据库架构类型、SQL 表达式语句五部分组成"}]},{"ID":"20240513185615-ujhdt86","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185615-ujhdt86","updated":"20240513185615"},"Children":[{"ID":"20240513185615-o3wwy45","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185615-o3wwy45","updated":"20240513185615"},"Children":[{"ID":"20240513185615-x2v7b6v","Type":"NodeParagraph","Properties":{"id":"20240513185615-x2v7b6v","updated":"20240513185615"},"Children":[{"Type":"NodeText","Data":"开发效率高：SQLAlchemy 几乎不需要调用原生 SQL 语句"}]}]},{"ID":"20240513185615-0u1uk96","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185615-0u1uk96","updated":"20240513185615"},"Children":[{"ID":"20240513185615-gv6rdck","Type":"NodeParagraph","Properties":{"id":"20240513185615-gv6rdck","updated":"20240513185615"},"Children":[{"Type":"NodeText","Data":"安全性强：ORM 最底层会自动修复一些安全问题，如 SQL 注入等"}]}]},{"ID":"20240513185615-z6wiefy","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185615-z6wiefy","updated":"20240513185615"},"Children":[{"ID":"20240513185615-wlt1zcy","Type":"NodeParagraph","Properties":{"id":"20240513185615-wlt1zcy","updated":"20240513185615"},"Children":[{"Type":"NodeText","Data":"灵活性强：一套代码，可适配 SQLite，MySQL，Oracle，PostgreSQL 等多种关系型数据库，不用关心底层 SQL 语言细节"}]}]}]},{"ID":"20240513185615-6cnxm8w","Type":"NodeParagraph","Properties":{"id":"20240513185615-6cnxm8w","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240513185626"},"Children":[{"Type":"NodeText","Data":"ORM：Object Relation Mapping，对象关系映射，解决面向对象语言与关系型数据库之间相互不匹配的技术，在提供持久化类与表的映射关系的情况下，将对象持久化到数据库中"}]},{"ID":"20240513185636-door8gk","Type":"NodeParagraph","Properties":{"id":"20240513185636-door8gk","updated":"20240513185636"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20230730130431"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20230730130431-20240513185636-9v81drv.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513185615-coz2p49","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185615-coz2p49","updated":"20240513185615"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"pip3 install sqlalchemy\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513185711-wxsz2ag","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513185711-wxsz2ag","updated":"20240513185717"},"Children":[{"Type":"NodeText","Data":"连接与绑定"}]},{"ID":"20240513185721-x9kge1p","Type":"NodeParagraph","Properties":{"id":"20240513185721-x9kge1p","updated":"20240513185721"},"Children":[{"Type":"NodeText","Data":"根据使用的连接驱动不同，使用的连接字符串也不同"}]},{"ID":"20240513185721-lz3qcgf","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185721-lz3qcgf","updated":"20240513185721"},"Children":[{"ID":"20240513185721-r2z30n3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185721-r2z30n3","updated":"20240513185721"},"Children":[{"ID":"20240513185721-owrxkjx","Type":"NodeParagraph","Properties":{"id":"20240513185721-owrxkjx","updated":"20240513185721"},"Children":[{"Type":"NodeText","Data":"MYSQL-Python："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql+mysqldb://user:pwd@host:port/dbname"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240513185721-vuji7h1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185721-vuji7h1","updated":"20240513185721"},"Children":[{"ID":"20240513185721-qbaox82","Type":"NodeParagraph","Properties":{"id":"20240513185721-qbaox82","updated":"20240513185721"},"Children":[{"Type":"NodeText","Data":"pymysql："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql+pymysql://user:pwd@host:port/dbname?options"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240513185721-siamydj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185721-siamydj","updated":"20240513185721"},"Children":[{"ID":"20240513185721-uffk23j","Type":"NodeParagraph","Properties":{"id":"20240513185721-uffk23j","updated":"20240513185721"},"Children":[{"Type":"NodeText","Data":"MYSQL-Connector："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql+mysqlconnector://user:pwd@host:port/dbname"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240513185721-def9ri7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185721-def9ri7","updated":"20240513185721"},"Children":[{"ID":"20240513185721-whvthcr","Type":"NodeParagraph","Properties":{"id":"20240513185721-whvthcr","updated":"20240513185721"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cx_Oracle"},{"Type":"NodeText","Data":"​："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"oracle+cx_oracle://user:pwd@host:port/dbname?k=v\u0026amp;k=v..."},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20240513185721-5ih0g73","Type":"NodeParagraph","Properties":{"id":"20240513185721-5ih0g73","updated":"20240513185721"},"Children":[{"Type":"NodeText","Data":"根据连接字符串就可以创建引擎并绑定会话了"}]},{"ID":"20240513185721-05a1u8o","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185721-05a1u8o","updated":"20240513185721"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"from sqlalchemy import create_engine\n# 创建 Engine\nengine = create_engine(\n    url='mysql+pymysql://root:...@localhost:3306/db1?charset=utf8mb4',\n    # 连接池大小\n    pool_size=10,\n    # 超过连接池后，最大还允许创建几个连接\n    max_overflow=0,\n    # 连接超时，单位 秒\n    pool_timeout=10,\n    # 多久回收一次连接池的连接\n    pool_recycle=1,\n    # 是否列出执行的 SQL 语句\n    echo=True\n)\n\nfrom sqlalchemy.orm import sessionmaker\nfrom sqlalchemy.orm import scoped_session\n# 绑定会话\nSession = sessionmaker(bind=engine)\n# 开启一个会话\nsession = scoped_session(Session)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}