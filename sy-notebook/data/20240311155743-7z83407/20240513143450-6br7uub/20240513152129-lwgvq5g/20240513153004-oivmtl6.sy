{"ID":"20240513153004-oivmtl6","Spec":"1","Type":"NodeDocument","Properties":{"icon":"opengl.png","id":"20240513153004-oivmtl6","title":"摄像机","type":"doc","updated":"20240513153710"},"Children":[{"ID":"20240513153004-1jzr7h6","Type":"NodeParagraph","Properties":{"id":"20240513153004-1jzr7h6","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240513153350"},"Children":[{"Type":"NodeText","Data":"摄像机并非 OpenGL 概念，而是一个虚拟的观察视角，实现时也是将场景中的所有物体向反方向移动以模拟摄像机的移动。"}]},{"ID":"20240513153026-9u7a6zy","Type":"NodeParagraph","Properties":{"id":"20240513153026-9u7a6zy","updated":"20240513153026"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20230911020252"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20230911020252-20240513153025-zrudwql.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513153034-w5jyipg","Type":"NodeParagraph","Properties":{"id":"20240513153034-w5jyipg","updated":"20240513153034"},"Children":[{"Type":"NodeText","Data":"摄像机通常有以下几个参数："}]},{"ID":"20240513153034-k3x392r","Type":"NodeList","ListData":{},"Properties":{"id":"20240513153034-k3x392r","updated":"20240513153128"},"Children":[{"ID":"20240513153034-40cmi7c","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513153034-40cmi7c","updated":"20240513153034"},"Children":[{"ID":"20240513153034-zyyxq4c","Type":"NodeParagraph","Properties":{"id":"20240513153034-zyyxq4c","updated":"20240513153034"},"Children":[{"Type":"NodeText","Data":"摄像机位置 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cameraPos"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240513153034-mipwwf0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513153034-mipwwf0","updated":"20240513153128"},"Children":[{"ID":"20240513153034-9zrhd0f","Type":"NodeParagraph","Properties":{"id":"20240513153034-9zrhd0f","updated":"20240513153034"},"Children":[{"Type":"NodeText","Data":"摄像机方向"}]},{"ID":"20240513153249-k6jx9or","Type":"NodeSuperBlock","Properties":{"id":"20240513153249-k6jx9or","updated":"20240513153128"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240513153034-otmhl8i","Type":"NodeList","ListData":{},"Properties":{"id":"20240513153034-otmhl8i","updated":"20240513153435"},"Children":[{"ID":"20240513153034-ibty5eq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513153034-ibty5eq","updated":"20240513153034"},"Children":[{"ID":"20240513153034-1q0v7jr","Type":"NodeParagraph","Properties":{"id":"20240513153034-1q0v7jr","updated":"20240513153034"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cameraTarget"},{"Type":"NodeText","Data":"​：摄像机所注视的点坐标"}]}]},{"ID":"20240513153034-80movdj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513153034-80movdj","updated":"20240513153435"},"Children":[{"ID":"20240513153034-orbvhzq","Type":"NodeParagraph","Properties":{"id":"20240513153034-orbvhzq","updated":"20240513153034"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cameraDirection"},{"Type":"NodeText","Data":"​：摄像机视线，实际是摄像机方向的反方向，作为 z 轴使用"}]},{"ID":"20240513153209-up2r9ex","Type":"NodeParagraph","Properties":{"id":"20240513153209-up2r9ex","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240513153435"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"cameraDirection"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 可以通过 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"cameraPos"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"cameraDirection"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 计算"}]}]}]},{"ID":"20240513153034-2ricewo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513153034-2ricewo","updated":"20240513153128"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"vec3 cameraPos;\nvec3 cameraTarget;\nvec3 cameraDirection = normalize(cameraPos - cameraTarget);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]}]},{"ID":"20240513153042-y5ukie1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513153042-y5ukie1","updated":"20240513153452"},"Children":[{"ID":"20240513153042-hx6cg40","Type":"NodeParagraph","Properties":{"id":"20240513153042-hx6cg40","updated":"20240513153046"},"Children":[{"Type":"NodeText","Data":"摄像机其他几个坐标轴。"}]},{"ID":"20240513153428-vcqo7wr","Type":"NodeSuperBlock","Properties":{"id":"20240513153428-vcqo7wr","updated":"20240513153452"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240513153034-9anmc8w","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240513153034-9anmc8w","updated":"20240513153428"},"Children":[{"ID":"20240513153034-ae35wvt","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240513153034-ae35wvt","updated":"20240513153034"},"Children":[{"ID":"20240513153034-lhl9nvq","Type":"NodeParagraph","Properties":{"id":"20240513153034-lhl9nvq","updated":"20240513153407"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cameraRight"},{"Type":"NodeText","Data":"​：X 轴"}]},{"ID":"20240513153403-0moytuv","Type":"NodeParagraph","Properties":{"id":"20240513153403-0moytuv","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240513153405"},"Children":[{"Type":"NodeText","Data":"找一个 YOZ 平面中的其他向量与 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"cameraDirection"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 做叉乘，归一化"}]}]},{"ID":"20240513153034-shuwjq6","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240513153034-shuwjq6","updated":"20240513153415"},"Children":[{"ID":"20240513153034-gsusu17","Type":"NodeParagraph","Properties":{"id":"20240513153034-gsusu17","updated":"20240513153412"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cameraUp"},{"Type":"NodeText","Data":"​：Y 轴"}]},{"ID":"20240513153412-vcprruj","Type":"NodeParagraph","Properties":{"id":"20240513153412-vcprruj","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240513153415"},"Children":[{"Type":"NodeText","Data":"将 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"cameraRight"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 与 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"cameraDirection"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 做叉乘"}]}]}]},{"ID":"20240513153334-7lbk0y0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513153334-7lbk0y0","updated":"20240513153452"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"vec3 cameraDirection;\nvec3 up; // 找一个 YOZ 平面中的其他向量\nvec3 cameraRight = normalize(cross(up, cameraDirection));\nvec3 cameraUp = cross(cameraDirection, cameraRight);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]}]}]},{"ID":"20240513153325-strdjrc","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513153325-strdjrc","updated":"20240513153528"},"Children":[{"Type":"NodeText","Data":"LookAt 矩阵"}]},{"ID":"20240513153533-oywba1h","Type":"NodeParagraph","Properties":{"id":"20240513153533-oywba1h","updated":"20240513153550"},"Children":[{"Type":"NodeText","Data":"摄像机对应的是 3D 渲染中的观察空间，生成观察矩阵 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"View Matrix"},{"Type":"NodeText","Data":"​，即 LookAt 矩阵。"}]},{"ID":"20240513153653-dc2i7kn","Type":"NodeSuperBlock","Properties":{"id":"20240513153653-dc2i7kn","updated":"20240513153654"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240513153533-mrryvwy","Type":"NodeMathBlock","Properties":{"id":"20240513153533-mrryvwy","updated":"20240513153654"},"Children":[{"Type":"NodeMathBlockOpenMarker"},{"Type":"NodeMathBlockContent","Data":"LookAt = \\begin{bmatrix} \\color{red}{R_x} \u0026 \\color{red}{R_y} \u0026 \\color{red}{R_z} \u0026 0 \\\\ \\color{green}{U_x} \u0026 \\color{green}{U_y} \u0026 \\color{green}{U_z} \u0026 0 \\\\ \\color{blue}{D_x} \u0026 \\color{blue}{D_y} \u0026 \\color{blue}{D_z} \u0026 0 \\\\ 0 \u0026 0 \u0026 0  \u0026 1 \\end{bmatrix} * \\begin{bmatrix} 1 \u0026 0 \u0026 0 \u0026 -\\color{purple}{P_x} \\\\ 0 \u0026 1 \u0026 0 \u0026 -\\color{purple}{P_y} \\\\ 0 \u0026 0 \u0026 1 \u0026 -\\color{purple}{P_z} \\\\ 0 \u0026 0 \u0026 0  \u0026 1 \\end{bmatrix}"},{"Type":"NodeMathBlockCloseMarker"}]},{"ID":"20240513153617-32f4il8","Type":"NodeTable","TableAligns":[0,0],"Properties":{"colgroup":"min-width: 60px;|min-width: 60px;","id":"20240513153617-32f4il8","updated":"20240513153654"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"符号"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"向量"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"R"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cameraRight"},{"Type":"NodeText","Data":"​"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"U"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cameraUp"},{"Type":"NodeText","Data":"​"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"D"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cameraDirection"},{"Type":"NodeText","Data":"​"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"P"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cameraPos"},{"Type":"NodeText","Data":"​"}]}]}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240513153533-dmib7k2","Type":"NodeParagraph","Properties":{"id":"20240513153533-dmib7k2","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240513153539"},"Children":[{"Type":"NodeText","Data":"OpenGL 矩阵为按列存储，提交 uniform 值时按列提交"}]},{"ID":"20240513153710-bbvr8dz","Type":"NodeParagraph","Properties":{"id":"20240513153710-bbvr8dz","updated":"20240513153719"}}]}