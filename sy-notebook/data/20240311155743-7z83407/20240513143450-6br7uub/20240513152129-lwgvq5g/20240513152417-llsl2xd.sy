{"ID":"20240513152417-llsl2xd","Spec":"1","Type":"NodeDocument","Properties":{"icon":"opengl.png","id":"20240513152417-llsl2xd","title":"投影","type":"doc","updated":"20240513152821"},"Children":[{"ID":"20240513152430-2idbvm0","Type":"NodeParagraph","Properties":{"id":"20240513152430-2idbvm0","updated":"20240513152430"},"Children":[{"Type":"NodeText","Data":"为了将顶点坐标从观察变换到裁剪空间，我们需要定义一个投影矩阵(Projection Matrix)，它指定了一个范围的坐标，比如在每个维度上的-1000到1000。"}]},{"ID":"20240513152449-l928yxu","Type":"NodeParagraph","Properties":{"id":"20240513152449-l928yxu","updated":"20240513152523"},"Children":[{"Type":"NodeText","Data":"投影矩阵接着会将在这个指定的范围内的坐标变换为标准化设备坐标的范围 (-1.0, 1.0)。所有在范围外的坐标不会被映射到在-1.0到1.0的范围之间，将被裁剪掉"}]},{"ID":"20240513152639-qyk0mpj","Type":"NodeParagraph","Properties":{"id":"20240513152639-qyk0mpj","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240513152641"},"Children":[{"Type":"NodeText","Data":"平截头体：由投影矩阵创建的观察箱，通常使用正射投影或透视投影"}]},{"ID":"20240513152642-bbncduy","Type":"NodeParagraph","Properties":{"id":"20240513152642-bbncduy","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240513152648"},"Children":[{"Type":"NodeText","Data":"透视除法：Perspective Division，每次顶点着色器执行后自动进行，将一个 vec4 类型的齐次坐标 xyz 分量同时除以 z 分量，转换为三维坐标系"}]},{"ID":"20240513152430-lbezi8v","Type":"NodeBlockquote","Properties":{"id":"20240513152430-lbezi8v","updated":"20240513152707"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20240513152707-8hp5jkb","Type":"NodeParagraph","Properties":{"id":"20240513152707-8hp5jkb","updated":"20240513152707"},"Children":[{"Type":"NodeText","Data":"投影矩阵可以通过 GLM 库创建。"}]}]},{"ID":"20240513152757-qpo0mzp","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513152757-qpo0mzp","updated":"20240513152800"},"Children":[{"Type":"NodeText","Data":"正射投影"}]},{"ID":"20240513152620-vrrx5xb","Type":"NodeParagraph","Properties":{"id":"20240513152620-vrrx5xb","updated":"20240513152831"},"Children":[{"Type":"NodeText","Data":"正射投影 Orthographic Projection 的平截头体是立方体，立方体之外的顶点都会被裁剪掉，由宽、高、近平面、远平面四个值指定。"}]},{"ID":"20240513152718-9rvz882","Type":"NodeSuperBlock","Properties":{"id":"20240513152718-9rvz882","updated":"20240513152800"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240513152620-aaw6slq","Type":"NodeParagraph","Properties":{"id":"20240513152620-aaw6slq","style":"width: 25%; flex: 0 0 auto;","updated":"20240513152754"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20230911002743"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20230911002743-20240513152558-eb87ile.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513152715-yzg0yq5","Type":"NodeSuperBlock","Properties":{"id":"20240513152715-yzg0yq5","updated":"20240513152741"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240513152620-hc4ywwt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513152620-hc4ywwt","updated":"20240513152716"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"glm::ortho\u003cfloat\u003e(left, right, bottom, top, zNear, zFar);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513152620-z99rhso","Type":"NodeParagraph","Properties":{"id":"20240513152620-z99rhso","updated":"20240513152716"},"Children":[{"Type":"NodeText","Data":"正射投影可以直接将平截头体内的顶点坐标映射为标准化坐标，因为 w 分量没有改变。"}]},{"ID":"20240513152620-nmrlgpu","Type":"NodeParagraph","Properties":{"id":"20240513152620-nmrlgpu","updated":"20240513152716"},"Children":[{"Type":"NodeText","Data":"正交投影直接将坐标投影到 2D 平面，实际上并不很真实，因为没有考虑透视，但可以反映真实的长度比例，常用于 2D、建筑、工程学绘图。"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240513152620-ev6ghqk","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513152620-ev6ghqk","updated":"20240513152806"},"Children":[{"Type":"NodeText","Data":"透视投影"}]},{"ID":"20240513152823-qo5lsc1","Type":"NodeParagraph","Properties":{"id":"20240513152823-qo5lsc1","updated":"20240513152841"},"Children":[{"Type":"NodeText","Data":"透视投影 Perspective Projection 将给定的平截头体范围映射到裁剪空间，除此之外还修改了每个顶点坐标的 w 值，从而使得离观察者越远的顶点坐标 w 分量越大。"}]},{"ID":"20240513152843-rol8hpd","Type":"NodeParagraph","Properties":{"id":"20240513152843-rol8hpd","updated":"20240513152847"},"Children":[{"Type":"NodeText","Data":"最终顶点坐标的每个分量都会除以它的 w 分量，距离观察者越远顶点坐标就会越小。"}]},{"ID":"20240513152939-lj81qdu","Type":"NodeSuperBlock","Properties":{"id":"20240513152939-lj81qdu","updated":"20240513152821"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240513152819-kyonmhy","Type":"NodeParagraph","Properties":{"id":"20240513152819-kyonmhy","style":"width: 25%; flex: 0 0 auto;","updated":"20240513152821"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20230911012705"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20230911012705-20240513152819-tbt9kj6.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513152937-t7okjzy","Type":"NodeSuperBlock","Properties":{"id":"20240513152937-t7okjzy","updated":"20240513152940"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240513152901-4ysyt2u","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513152901-4ysyt2u","updated":"20240513152938"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"glm::perspective\u003cfloat\u003e(fov, aspect, near, far);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513152901-hztm8ks","Type":"NodeList","ListData":{},"Properties":{"id":"20240513152901-hztm8ks","updated":"20240513152938"},"Children":[{"ID":"20240513152922-551u7sz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513152922-551u7sz","updated":"20240513152934"},"Children":[{"ID":"20240513152922-fshtfmi","Type":"NodeParagraph","Properties":{"id":"20240513152922-fshtfmi","updated":"20240513152924"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"fov"},{"Type":"NodeText","Data":"​ 表示视野（Field of View），即观察空间大小，参数使用弧度，可以使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"glm::radians"},{"Type":"NodeText","Data":"​ 转换"}]},{"ID":"20240513152910-1g02yky","Type":"NodeParagraph","Properties":{"id":"20240513152910-1g02yky","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240513152934"},"Children":[{"Type":"NodeText","Data":"45° 通常能表示比较真实的效果，而末日风格会更大一点。一般不会超过 60°。"}]}]},{"ID":"20240513152925-mi1eu7v","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513152925-mi1eu7v"},"Children":[{"ID":"20240513152925-da9syxw","Type":"NodeParagraph","Properties":{"id":"20240513152925-da9syxw","updated":"20240513152927"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"aspect"},{"Type":"NodeText","Data":"​ 为宽高比，即实际窗口大小 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"width / heigth"},{"Type":"NodeText","Data":"​ 值"}]}]},{"ID":"20240513152929-5z1v8dc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513152929-5z1v8dc","updated":"20240513152931"},"Children":[{"ID":"20240513152929-wxq9k93","Type":"NodeParagraph","Properties":{"id":"20240513152929-wxq9k93","updated":"20240513152931"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"near"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"far"},{"Type":"NodeText","Data":"​ 表示近平面、远平面，通常为 0.1 和 100"}]}]}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240513152901-crpb7gg","Type":"NodeParagraph","Properties":{"id":"20240513152901-crpb7gg","updated":"20240513152927"}},{"ID":"20240513152901-bymvmii","Type":"NodeParagraph","Properties":{"id":"20240513152901-bymvmii","updated":"20240513152931"}},{"ID":"20240513152918-z6xold1","Type":"NodeParagraph","Properties":{"id":"20240513152918-z6xold1"}}]}