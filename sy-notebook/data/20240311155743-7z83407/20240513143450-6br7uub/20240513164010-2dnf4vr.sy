{"ID":"20240513164010-2dnf4vr","Spec":"1","Type":"NodeDocument","Properties":{"icon":"opengl.png","id":"20240513164010-2dnf4vr","title":"模板测试","type":"doc","updated":"20240513164401"},"Children":[{"ID":"20240513164020-r8q2ir4","Type":"NodeParagraph","Properties":{"id":"20240513164020-r8q2ir4","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240513164032"},"Children":[{"Type":"NodeText","Data":"模板测试：将片段与模板缓冲中的数据进行比较，测试未通过则片段被丢弃"}]},{"ID":"20240513164035-p7emcvd","Type":"NodeParagraph","Properties":{"id":"20240513164035-p7emcvd","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240513164047"},"Children":[{"Type":"NodeText","Data":"模板缓冲：存储模板值，通常为8位，由 GLFW 创建窗口时对当前窗口创建"}]},{"ID":"20240513164010-vtwxbv0","Type":"NodeParagraph","Properties":{"id":"20240513164010-vtwxbv0","updated":"20240513164041"},"Children":[{"Type":"NodeText","Data":"模板测试位于片元着色器执行之后，深度测试之前。"}]},{"ID":"20240513164048-vz0ysfz","Type":"NodeParagraph","Properties":{"id":"20240513164048-vz0ysfz","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240513164055"},"Children":[{"Type":"NodeText","Data":"类似深度测试，默认情况下模板缓冲也是关闭的，需要通过 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"glEnable(GL_STENCIL_TEST)"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 开启测试，并在每次渲染时通过 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"glClear(GL_STENCIL_BUFFER_BIT)"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 清空模板缓冲区数据。"}]},{"ID":"20240513164113-cfksn28","Type":"NodeList","ListData":{},"Properties":{"id":"20240513164113-cfksn28","updated":"20240513164254"},"Children":[{"ID":"20240513164113-11cybxd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513164113-11cybxd","updated":"20240513164113"},"Children":[{"ID":"20240513164113-dqqxs61","Type":"NodeParagraph","Properties":{"id":"20240513164113-dqqxs61","updated":"20240513164113"},"Children":[{"Type":"NodeText","Data":"启用或关闭测试，默认关闭"}]},{"ID":"20240513164113-kvf52fp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513164113-kvf52fp","updated":"20240513164113"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"// 启用深度测试\nglEnable(GL_STENCIL_TEST);\n// 关闭深度测试\nglDisable(GL_STENCIL_TEST);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240513164116-v6wu74d","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513164116-v6wu74d"},"Children":[{"ID":"20240513164116-4y04k44","Type":"NodeParagraph","Properties":{"id":"20240513164116-4y04k44","updated":"20240513164120"},"Children":[{"Type":"NodeText","Data":"清空深度缓冲区，每次绘制前调用，否则绘制结果会受上一次渲染影响"}]},{"ID":"20240513164113-z67yraq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513164113-z67yraq","updated":"20240513164113"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"glClear(GL_STENCIL_BUFFER_BIT);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240513164120-aqsk2jt","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513164120-aqsk2jt"},"Children":[{"ID":"20240513164120-n1bsj9h","Type":"NodeParagraph","Properties":{"id":"20240513164120-n1bsj9h","updated":"20240513164143"},"Children":[{"Type":"NodeText","Data":"设置位掩码。之后写入模板缓冲的值将与该值进行 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;"},{"Type":"NodeText","Data":"​ 位运算，默认为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"0xFF"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513164113-pbo6rzz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513164113-pbo6rzz","updated":"20240513164113"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"glStencilMask(0xFF);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513164152-58k0wgp","Type":"NodeParagraph","Properties":{"id":"20240513164152-58k0wgp","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240513164155"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"glClear"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 也受位掩码影响"}]}]},{"ID":"20240513164137-1punafd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513164137-1punafd"},"Children":[{"ID":"20240513164137-j6nub92","Type":"NodeParagraph","Properties":{"id":"20240513164137-j6nub92","updated":"20240513164142"},"Children":[{"Type":"NodeText","Data":"设置模板测试方法"}]},{"ID":"20240513164113-b0h040r","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513164113-b0h040r","updated":"20240513164113"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"glStencilFunc(func, ref, mask);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513164113-l91f0e5","Type":"NodeList","ListData":{},"Properties":{"id":"20240513164113-l91f0e5","updated":"20240513164113"},"Children":[{"ID":"20240513164113-etwfktp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513164113-etwfktp","updated":"20240513164113"},"Children":[{"ID":"20240513164113-gjub6b2","Type":"NodeParagraph","Properties":{"id":"20240513164113-gjub6b2","updated":"20240513164113"},"Children":[{"Type":"NodeText","Data":"func：模板值与 ref 值进行测试的方法，与[[OpenGL 深度测试]]中 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"glDepthFunc"},{"Type":"NodeText","Data":"​ 的值相同"}]}]},{"ID":"20240513164113-ve3cv61","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513164113-ve3cv61","updated":"20240513164113"},"Children":[{"ID":"20240513164113-ddou7re","Type":"NodeParagraph","Properties":{"id":"20240513164113-ddou7re","updated":"20240513164113"},"Children":[{"Type":"NodeText","Data":"ref：模板参考值，参与模板测试方法进行比较"}]}]},{"ID":"20240513164113-zgkcmt6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513164113-zgkcmt6","updated":"20240513164113"},"Children":[{"ID":"20240513164113-6klykl5","Type":"NodeParagraph","Properties":{"id":"20240513164113-6klykl5","updated":"20240513164113"},"Children":[{"Type":"NodeText","Data":"mask：掩码，模板值在与 ref 值进行比较之前，先与该值进行 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;"},{"Type":"NodeText","Data":"​ 运算"}]}]}]}]},{"ID":"20240513164208-sdgtg1h","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513164208-sdgtg1h","updated":"20240513164254"},"Children":[{"ID":"20240513164208-3hhxbyg","Type":"NodeParagraph","Properties":{"id":"20240513164208-3hhxbyg","updated":"20240513164208"},"Children":[{"Type":"NodeText","Data":"设置模板测试行为"}]},{"ID":"20240513164113-vferxok","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513164113-vferxok","updated":"20240513164226"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"glStencilOp(sfail, dpfail, dppass);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513164253-g4ra7su","Type":"NodeSuperBlock","Properties":{"id":"20240513164253-g4ra7su","updated":"20240513164254"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240513164113-tuulfr5","Type":"NodeList","ListData":{},"Properties":{"id":"20240513164113-tuulfr5","updated":"20240513164254"},"Children":[{"ID":"20240513164113-pjtmssh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513164113-pjtmssh","updated":"20240513164113"},"Children":[{"ID":"20240513164113-f3knu55","Type":"NodeParagraph","Properties":{"id":"20240513164113-f3knu55","updated":"20240513164113"},"Children":[{"Type":"NodeText","Data":"sfail：模板测试时失败的行为"}]}]},{"ID":"20240513164113-slh67wc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513164113-slh67wc","updated":"20240513164113"},"Children":[{"ID":"20240513164113-1vc7st5","Type":"NodeParagraph","Properties":{"id":"20240513164113-1vc7st5","updated":"20240513164113"},"Children":[{"Type":"NodeText","Data":"dpfail：模板测试通过，深度测试失败时的行为"}]}]},{"ID":"20240513164113-dlqpra7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513164113-dlqpra7","updated":"20240513164113"},"Children":[{"ID":"20240513164113-p9clkfc","Type":"NodeParagraph","Properties":{"id":"20240513164113-p9clkfc","updated":"20240513164113"},"Children":[{"Type":"NodeText","Data":"dppass：模板测试通过，深度测试也通过时的行为"}]}]}]},{"ID":"20240513164113-hb5b7mg","Type":"NodeTable","TableAligns":[0,0],"Properties":{"colgroup":"|","id":"20240513164113-hb5b7mg","updated":"20240513164254"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"测试行为"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeText","Data":"说明"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"GL_KEEP/GL_INVERT"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"保留原值或按位取反"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"GL_ZERO/GL_REPLACE"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"将模板值替换为 0 或 ref"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"GL_INCR/GL_DECR"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"将模板值 +1 或 -1，不会超过最大或最小值"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"GL_INCR_WRAP/GL_DECR_WRAP"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"将模板值 +1 或 -1，超过则归零或置为最大值（无符号溢出）"}]}]}]},{"Type":"NodeSuperBlockCloseMarker"}]}]}]},{"ID":"20240513164113-ht0f54e","Type":"NodeParagraph","Properties":{"id":"20240513164113-ht0f54e","updated":"20240513164319"}},{"ID":"20240513164325-l1ja6wu","Type":"NodeParagraph","Properties":{"id":"20240513164325-l1ja6wu","updated":"20240513164325"},"Children":[{"Type":"NodeText","Data":"使用模板的过程通常为："}]},{"ID":"20240513164325-h9jez72","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240513164325-h9jez72","updated":"20240513164325"},"Children":[{"ID":"20240513164325-lbtr328","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240513164325-lbtr328","updated":"20240513164325"},"Children":[{"ID":"20240513164325-ctfv0ni","Type":"NodeParagraph","Properties":{"id":"20240513164325-ctfv0ni","updated":"20240513164325"},"Children":[{"Type":"NodeText","Data":"将模板的测试方法设置为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"GL_ALWAYS"},{"Type":"NodeText","Data":"​："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"glStencilFunc(GL_ALWAYS, 1, 0xFF)"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240513164325-7eeqeiu","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240513164325-7eeqeiu","updated":"20240513164325"},"Children":[{"ID":"20240513164325-lmdeyqg","Type":"NodeParagraph","Properties":{"id":"20240513164325-lmdeyqg","updated":"20240513164325"},"Children":[{"Type":"NodeText","Data":"渲染物体，更新模板缓冲区（绘制模板同时也会绘制到屏幕）"}]}]},{"ID":"20240513164325-33itk8g","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240513164325-33itk8g","updated":"20240513164325"},"Children":[{"ID":"20240513164325-hz2ibdg","Type":"NodeParagraph","Properties":{"id":"20240513164325-hz2ibdg","updated":"20240513164325"},"Children":[{"Type":"NodeText","Data":"设置测试方法和行为同时更新屏幕"}]}]}]},{"ID":"20240513164400-lan0pk0","Type":"NodeParagraph","Properties":{"id":"20240513164400-lan0pk0","updated":"20240513164401"},"Children":[{"Type":"NodeText","Data":"绘制时，当且仅当模板缓冲区测试通过时才会被绘制到屏幕。"}]}]}