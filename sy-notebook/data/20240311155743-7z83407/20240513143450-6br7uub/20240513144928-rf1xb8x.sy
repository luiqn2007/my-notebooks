{"ID":"20240513144928-rf1xb8x","Spec":"1","Type":"NodeDocument","Properties":{"icon":"opengl.png","id":"20240513144928-rf1xb8x","title":"GLSL","type":"doc","updated":"20240513150821"},"Children":[{"ID":"20240513144928-ksrenmo","Type":"NodeParagraph","Properties":{"id":"20240513144928-ksrenmo","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240513145003"},"Children":[{"Type":"NodeText","Data":"GLSL：OpenGL Shader Language，OpenGL 着色器语言。类似 C 语言，额外提供针对向量和矩阵的操作。"}]},{"ID":"20240513145013-hzp2zo7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513145013-hzp2zo7","updated":"20240513145013"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"#version 460 core\n\nlayout (location = 0) in vec3 pos;\n\nvoid main() {\n    gl_Position = vec4(pos, 1);\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513145013-6g352p9","Type":"NodeList","ListData":{},"Properties":{"id":"20240513145013-6g352p9","updated":"20240513145013"},"Children":[{"ID":"20240513145013-2a4ffzj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145013-2a4ffzj","updated":"20240513145013"},"Children":[{"ID":"20240513145013-durat0y","Type":"NodeParagraph","Properties":{"id":"20240513145013-durat0y","updated":"20240513145013"},"Children":[{"Type":"NodeText","Data":"版本声明：使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"#version"},{"Type":"NodeText","Data":"​ 声明的版本，应与程序使用的 OpenGL 版本相匹配"}]}]},{"ID":"20240513145013-hgvf3w0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145013-hgvf3w0","updated":"20240513145013"},"Children":[{"ID":"20240513145013-bkitxa0","Type":"NodeParagraph","Properties":{"id":"20240513145013-bkitxa0","updated":"20240513145013"},"Children":[{"Type":"NodeText","Data":"配置变量：所有变量可以使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"in"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"out"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"uniform"},{"Type":"NodeText","Data":"​ 进行修饰"}]},{"ID":"20240513145013-xj5pi4f","Type":"NodeList","ListData":{},"Properties":{"id":"20240513145013-xj5pi4f","updated":"20240513145013"},"Children":[{"ID":"20240513145013-sgqzefi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145013-sgqzefi","updated":"20240513145013"},"Children":[{"ID":"20240513145013-vnfkp1t","Type":"NodeParagraph","Properties":{"id":"20240513145013-vnfkp1t","updated":"20240513145013"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"in"},{"Type":"NodeText","Data":"​：输入变量，顶点着色器的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"in"},{"Type":"NodeText","Data":"​ 变量来自代码通过 VAO 传入，其他着色器来自前一个着色器的同名同类型 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"out"},{"Type":"NodeText","Data":"​ 类型变量"}]},{"ID":"20240513145013-0ffj39b","Type":"NodeList","ListData":{},"Properties":{"id":"20240513145013-0ffj39b","updated":"20240513145013"},"Children":[{"ID":"20240513145013-9s2jzfj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145013-9s2jzfj","updated":"20240513145013"},"Children":[{"ID":"20240513145013-uzoz9pz","Type":"NodeParagraph","Properties":{"id":"20240513145013-uzoz9pz","updated":"20240513145013"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"in"},{"Type":"NodeText","Data":"​ 未使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"location"},{"Type":"NodeText","Data":"​ 指定位置，可通过两种方式获取："}]},{"ID":"20240513145013-4l1mvsg","Type":"NodeList","ListData":{},"Properties":{"id":"20240513145013-4l1mvsg","updated":"20240513145013"},"Children":[{"ID":"20240513145013-l39n7nn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145013-l39n7nn","updated":"20240513145013"},"Children":[{"ID":"20240513145013-dbxs5qw","Type":"NodeParagraph","Properties":{"id":"20240513145013-dbxs5qw","updated":"20240513145013"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"glGetAttribLocation(变量名)"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240513145013-9parhvw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145013-9parhvw","updated":"20240513145013"},"Children":[{"ID":"20240513145013-fzfa0ah","Type":"NodeParagraph","Properties":{"id":"20240513145013-fzfa0ah","updated":"20240513145013"},"Children":[{"Type":"NodeText","Data":"着色器编译时，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"glBindAttribLocation"},{"Type":"NodeText","Data":"​ 绑定，相当用指定 location"}]}]}]}]},{"ID":"20240513145013-j8j1ozr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145013-j8j1ozr","updated":"20240513145013"},"Children":[{"ID":"20240513145013-ybud6h0","Type":"NodeParagraph","Properties":{"id":"20240513145013-ybud6h0","updated":"20240513145013"},"Children":[{"Type":"NodeText","Data":"设备支持的最大 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"in"},{"Type":"NodeText","Data":"​ 类型变量个数由 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"glGetInteger(GL_MAX_VERTEX_ATTRIBS)"},{"Type":"NodeText","Data":"​ 获取，但至少支持 16 个包含 4 个分量的属性"}]}]}]}]},{"ID":"20240513145013-8d2fa5e","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145013-8d2fa5e","updated":"20240513145013"},"Children":[{"ID":"20240513145013-1iuliat","Type":"NodeParagraph","Properties":{"id":"20240513145013-1iuliat","updated":"20240513145013"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"out"},{"Type":"NodeText","Data":"​：输出变量，输出到下一阶段，由下一阶段的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"in"},{"Type":"NodeText","Data":"​ 变量接收，片元着色器输出到颜色空间，支持多个输出"}]}]},{"ID":"20240513145013-koe3w3e","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145013-koe3w3e","updated":"20240513145013"},"Children":[{"ID":"20240513145013-p90mh3m","Type":"NodeParagraph","Properties":{"id":"20240513145013-p90mh3m","updated":"20240513145013"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"uniform"},{"Type":"NodeText","Data":"​：共享数据，由程序传入，但对着色器只读。不同着色器同名同类型的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"uniform"},{"Type":"NodeText","Data":"​ 变量值相同"}]},{"ID":"20240513145013-xrfeol2","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240513145013-xrfeol2","updated":"20240513145013"},"Children":[{"ID":"20240513145013-9v1fum1","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240513145013-9v1fum1","updated":"20240513145013"},"Children":[{"ID":"20240513145013-dmkfgr5","Type":"NodeParagraph","Properties":{"id":"20240513145013-dmkfgr5","updated":"20240513145013"},"Children":[{"Type":"NodeText","Data":"激活对应着色器程序（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"glUseProgram"},{"Type":"NodeText","Data":"​）"}]}]},{"ID":"20240513145013-45uoxfx","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240513145013-45uoxfx","updated":"20240513145013"},"Children":[{"ID":"20240513145013-6qv7ffk","Type":"NodeParagraph","Properties":{"id":"20240513145013-6qv7ffk","updated":"20240513145013"},"Children":[{"Type":"NodeText","Data":"获取 Uniform 变量位置（location 属性，或 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"glGetUniformLocation"},{"Type":"NodeText","Data":"​）"}]}]},{"ID":"20240513145013-6rvem38","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20240513145013-6rvem38","updated":"20240513145013"},"Children":[{"ID":"20240513145013-lw28dpj","Type":"NodeParagraph","Properties":{"id":"20240513145013-lw28dpj","updated":"20240513145013"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"glUniformXxx"},{"Type":"NodeText","Data":"​ 赋值，其中 Xxx 为类型"}]}]}]}]}]}]}]},{"ID":"20240513145044-7c07e3i","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513145044-7c07e3i","updated":"20240513145044"},"Children":[{"Type":"NodeText","Data":"数据类型"}]},{"ID":"20240513145044-ns6n9x2","Type":"NodeParagraph","Properties":{"id":"20240513145044-ns6n9x2","updated":"20240513145045"},"Children":[{"Type":"NodeText","Data":"GLSL 支持各种基本类型、结构体，并额外原生支持向量和矩阵"}]},{"ID":"20240513145044-yucd9iq","Type":"NodeList","ListData":{},"Properties":{"id":"20240513145044-yucd9iq","updated":"20240513150821"},"Children":[{"ID":"20240513145044-wx90mtc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145044-wx90mtc","updated":"20240513145044"},"Children":[{"ID":"20240513145044-0rr34g0","Type":"NodeParagraph","Properties":{"id":"20240513145044-0rr34g0","updated":"20240513145044"},"Children":[{"Type":"NodeText","Data":"基本类型："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"int"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"uint"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"float"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"double"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bool"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240513145044-hacxbol","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145044-hacxbol","updated":"20240513145044"},"Children":[{"ID":"20240513145044-63ie9lu","Type":"NodeParagraph","Properties":{"id":"20240513145044-63ie9lu","updated":"20240513145044"},"Children":[{"Type":"NodeText","Data":"结构体，详见 [[OpenGL 高级 GLSL]]"}]},{"ID":"20240513145100-i2611pn","Type":"NodeList","ListData":{"Typ":3},"Properties":{"id":"20240513145100-i2611pn","updated":"20240513145100"},"Children":[{"ID":"20240513145100-zgxinzi","Type":"NodeListItem","ListData":{"Typ":3,"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145100-zgxinzi","updated":"20240513145100"},"Children":[{"Type":"NodeTaskListItemMarker"},{"ID":"20240513145100-y51u6k0","Type":"NodeParagraph","Properties":{"id":"20240513145100-y51u6k0","updated":"20240513145104"},"Children":[{"Type":"NodeText","Data":"OpenGL 高级 GLSL"}]}]}]}]},{"ID":"20240513145044-84lh6ck","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145044-84lh6ck","updated":"20240513145044"},"Children":[{"ID":"20240513145044-m37r0q8","Type":"NodeParagraph","Properties":{"id":"20240513145044-m37r0q8","updated":"20240513145044"},"Children":[{"Type":"NodeText","Data":"向量 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"[T]vec[N]"},{"Type":"NodeText","Data":"​，矩阵 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"[T]mat[N]x[M]"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513145044-cat4z71","Type":"NodeList","ListData":{},"Properties":{"id":"20240513145044-cat4z71","updated":"20240513145044"},"Children":[{"ID":"20240513145044-kdsska3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145044-kdsska3","updated":"20240513145044"},"Children":[{"ID":"20240513145044-hxwznfq","Type":"NodeParagraph","Properties":{"id":"20240513145044-hxwznfq","updated":"20240513145044"},"Children":[{"Type":"NodeText","Data":"T：内部元素类型，省略表示 float，b 为 bool，i 为 int，u 为 uint，d 为 double"}]}]},{"ID":"20240513145044-hb2yosq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145044-hb2yosq","updated":"20240513145044"},"Children":[{"ID":"20240513145044-teoj17w","Type":"NodeParagraph","Properties":{"id":"20240513145044-teoj17w","updated":"20240513145044"},"Children":[{"Type":"NodeText","Data":"N、M：元素个数，取值范围 $[1, 4]$"}]}]}]}]},{"ID":"20240513145044-ucwc499","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513145044-ucwc499","updated":"20240513150821"},"Children":[{"ID":"20240513145044-cni4ujw","Type":"NodeParagraph","Properties":{"id":"20240513145044-cni4ujw","updated":"20240513150821"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240513150727-cdzw6yv","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"采样器"},{"Type":"NodeText","Data":"："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"sampler2D"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"sampler3D"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20240513145044-iw2gv17","Type":"NodeParagraph","Properties":{"id":"20240513145044-iw2gv17","updated":"20240513145045"},"Children":[{"Type":"NodeText","Data":"向量各分量可以通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"rgba"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"xyzw"},{"Type":"NodeText","Data":"​ 或 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"stpq"},{"Type":"NodeText","Data":"​ 访问，但不能混合使用"}]},{"ID":"20240513145044-zykeutw","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513145044-zykeutw","updated":"20240513145128"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"vec4 v4 = vec4(1, 2, 3, 4);\nvec3 v3rgb = v4.rgb;\nvec3 v3xyz = v4.xyz;\nbool b1 = v3rgb == v3xyz; // true\nvec3 v3rba = v4.rba;      // 正确\nvec3 v3 = rgx;            // 编译错误\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513145044-2m66ax8","Type":"NodeParagraph","Properties":{"id":"20240513145044-2m66ax8","updated":"20240513145045"},"Children":[{"Type":"NodeText","Data":"通过向量的构造，可以将各向量互相组合"}]},{"ID":"20240513145044-bxyz6dr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513145044-bxyz6dr","updated":"20240513145045"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"vec3 color = vec3(1, 0.5f, 1);\nvec4 colorRGBA = vec4(color, 1); // 1 0.5 1 1\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513145044-mlgcani","Type":"NodeParagraph","Properties":{"id":"20240513145044-mlgcani","updated":"20240513145045"},"Children":[{"Type":"NodeText","Data":"矩阵也可以拆分为向量，或者由向量通过构造函数创建。"}]}]}