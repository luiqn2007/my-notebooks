{"ID":"20240513164337-lp1kf1u","Spec":"1","Type":"NodeDocument","Properties":{"icon":"opengl.png","id":"20240513164337-lp1kf1u","title":"使用模板","type":"doc","updated":"20240513164417"},"Children":[{"ID":"20240513164350-al31klz","Type":"NodeParagraph","Properties":{"id":"20240513164350-al31klz","updated":"20240513164417"},"Children":[{"Type":"NodeText","Data":"初始化："}]},{"ID":"20240513164350-ahreakz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513164350-ahreakz","updated":"20240513164350"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"glEnable(GL_DEPTH_TEST);\nglEnable(GL_STENCIL_TEST);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513164350-kukyrqc","Type":"NodeParagraph","Properties":{"id":"20240513164350-kukyrqc","updated":"20240513164350"},"Children":[{"Type":"NodeText","Data":"渲染过程，以渲染物品边框为例："}]},{"ID":"20240513164350-0uo5b6x","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513164350-0uo5b6x","updated":"20240513164350"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"// 模板缓冲区置 0\nglStencilFunc(GL_NOTEQUAL, 1, 0xFF);\nglStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE);\nglClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);\n\nglStencilMask(0x00);\n// 渲染与模板测试无关的图形，也不会写入模板缓冲区\n// do draw...\n\nglStencilFunc(GL_ALWAYS, 0x01, 0xFF);\nglStencilMask(0xFF);\n// 渲染，此处图形被渲染内容同时被写入模板中（写入为 0x01）\n// do draw...\n\nglStencilFunc(GL_NOT_EQUIAL, 0x01, 0xFF);\nglStencilMask(0x00);\nglDisable(GL_DEPTH_TEST); // 关闭深度测试\n// 渲染，此处渲染边框\n//     渲染区域比前面的物品略大（大出边框宽度）\n//     渲染时上面渲染过的纹理位置将会被丢弃\n// do draw...\n\n// 恢复环境\nglStencilFunc(GL_ALWAYS, 0x00, 0xFF);\nglStencilMask(0xFF);\nglEnable(GL_DEPTH_TEST);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}