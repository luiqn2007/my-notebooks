{"ID":"20240513154512-pbcqxzb","Spec":"1","Type":"NodeDocument","Properties":{"icon":"opengl.png","id":"20240513154512-pbcqxzb","title":"漫反射","type":"doc","updated":"20240513154754"},"Children":[{"ID":"20240513154517-1ezoqxg","Type":"NodeParagraph","Properties":{"id":"20240513154517-1ezoqxg","updated":"20240513154517"},"Children":[{"Type":"NodeText","Data":"漫反射模拟从环境光中获取的平行光光源，如太阳光等，需要利用法向量信息"}]},{"ID":"20240513154517-44g7iky","Type":"NodeList","ListData":{},"Properties":{"id":"20240513154517-44g7iky","updated":"20240513154749"},"Children":[{"ID":"20240513154517-ptqivrg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513154517-ptqivrg","updated":"20240513154517"},"Children":[{"ID":"20240513154517-roqtl3e","Type":"NodeParagraph","Properties":{"id":"20240513154517-roqtl3e","updated":"20240513154517"},"Children":[{"Type":"NodeText","Data":"顶点属性：指定顶点的法向量信息，顶点的世界坐标"}]}]},{"ID":"20240513154517-01b1mzf","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513154517-01b1mzf","updated":"20240513154749"},"Children":[{"ID":"20240513154517-az175ro","Type":"NodeParagraph","Properties":{"id":"20240513154517-az175ro","updated":"20240513154517"},"Children":[{"Type":"NodeText","Data":"uniform数据：光源位置，法向量变换矩阵等信息"}]},{"ID":"20240513154517-ho31suo","Type":"NodeList","ListData":{},"Properties":{"id":"20240513154517-ho31suo","updated":"20240513154749"},"Children":[{"ID":"20240513154517-ingkfkx","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513154517-ingkfkx","updated":"20240513154749"},"Children":[{"ID":"20240513154517-nu14jfi","Type":"NodeParagraph","Properties":{"id":"20240513154517-nu14jfi","updated":"20240513154517"},"Children":[{"Type":"NodeText","Data":"法向量变换矩阵：可选，仅在对模型进行不等比缩放时生效，使用模型矩阵可计算"}]},{"ID":"20240513154531-gdqqy78","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513154531-gdqqy78","updated":"20240513154749"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z2xzbA=="},{"Type":"NodeCodeBlockCode","Data":"mat4 normalMatrix = mat4(transpose(invert(modelMatrix)));\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]}]},{"ID":"20240513154521-td2ou8c","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513154521-td2ou8c","updated":"20240513154754"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Z2xzbA=="},{"Type":"NodeCodeBlockCode","Data":"vec3 vNormal;\nvec3 position;\n\nuniform mat4 normalMatrix;\nuniform vec3 lightPos;\nuniform vec3 lightColor;\n\n// 顶点位置的世界坐标\nvec3 vPosition = vec3(modelMatrix * vec4(position, 1));\n// 漫反射颜色\nvec3 norm = normalize(normalMatrix * vNormal);\nvec3 lightDir = normalize(lightPos - vPosition);\nfloat diff = max(dot(norm, lightDir), 0);\nvec3 diffuseColor = diff * lightColor;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513154537-7ktq0v8","Type":"NodeParagraph","Properties":{"id":"20240513154537-7ktq0v8"}}]}