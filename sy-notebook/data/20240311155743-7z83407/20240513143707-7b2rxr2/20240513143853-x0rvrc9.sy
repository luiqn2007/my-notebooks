{"ID":"20240513143853-x0rvrc9","Spec":"1","Type":"NodeDocument","Properties":{"icon":"freetype.ico","id":"20240513143853-x0rvrc9","title":"绘制文本","type":"doc","updated":"20240513143909"},"Children":[{"ID":"20240513143853-gkx4aqe","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513143853-gkx4aqe","updated":"20240513143858"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"char ch, name[2];\nint p = 0;\n// 计算绘制坐标\nfloat x, y0;\nfloat x0 = x;\nwhile ((ch = string[p++]))\n{\n\tif (!at_-\u003echars_.contains(ch))\n\t{\n\t\tchar ss[200];\n\t\tsprintf_s(ss, 200, \"找不到纹理：[%c]\", ch);\n\t\tthrow exception(ss);\n\t}\n\t// set_font_info 传入的值\n\tconst auto\u0026 [width, height, bx, by, adv] = ...;\n\tx0 -= ((adv \u003e\u003e 6) * scale) / 2;\n}\n\nname[1] = '\\0';\np = 0;\nwhile ((ch = string[p++]))\n{\n\tname[0] = ch;\n\t// 纹理坐标，(u, v) 为起点，(w, h) 为宽高\n\tconst auto\u0026 [u, v, w, h] = ...;\n\t// set_font_info 传入的值\n\tconst auto\u0026 [width, height, bx, by, adv] = ...;\n\n\tx0 += bx * scale;\n\ty0 -= (height - by) * scale;\n\tconst float x1 = width * scale + x0;\n\tconst float y1 = height * scale + y0;\n\n\tconst float uu = u + w;\n\tconst float vv = v + h;\n\n    // (x0, y0): (u, v)\n    // (x0, y1): (u, vv)\n    // (x1, y0): (uu, v)\n  \n    // (x0, y1): (u, vv)\n    // (x1, y1): (uu, vv)\n    // (x1, y0): (uu, v)\n    draw(x0, y0, x1, y1, u, v, uu, vv);\n\tx0 += (adv \u003e\u003e 6) * scale; // adv * 64\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513143909-3ea7r0q","Type":"NodeParagraph","Properties":{"id":"20240513143909-3ea7r0q"}}]}