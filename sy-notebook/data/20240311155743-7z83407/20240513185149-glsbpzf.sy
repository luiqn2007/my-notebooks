{"ID":"20240513185149-glsbpzf","Spec":"1","Type":"NodeDocument","Properties":{"icon":"python.ico","id":"20240513185149-glsbpzf","title":"pymysql","type":"doc","updated":"20240513185222"},"Children":[{"ID":"20240513185222-r7kqz2s","Type":"NodeParagraph","Properties":{"id":"20240513185222-r7kqz2s","updated":"20240513185222"},"Children":[{"Type":"NodeText","Data":"Python 使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"pymysql"},{"Type":"NodeText","Data":"​ 操作 MySQL 数据库。"}]},{"ID":"20240513185222-8e34ri5","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513185222-8e34ri5","updated":"20240513185222"},"Children":[{"Type":"NodeText","Data":"连接"}]},{"ID":"20240513185222-r7oymk7","Type":"NodeParagraph","Properties":{"id":"20240513185222-r7oymk7","updated":"20240513185223"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Connection"},{"Type":"NodeText","Data":"​ 类连接。"}]},{"ID":"20240513185222-16369nu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185222-16369nu","updated":"20240513185223"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"from pymysql import Connection\n\nconn = Connection(\n    # 主机地址\n    host='localhost',\n    # 登陆用户名\n    user='***',\n    # 登陆密码\n    password='***'\n)\n\nwith conn:\n    # 使用数据库\n    pass\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513185222-bblzq2d","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513185222-bblzq2d","updated":"20240513185222"},"Children":[{"Type":"NodeText","Data":"操作"}]},{"ID":"20240513185222-yklbs74","Type":"NodeParagraph","Properties":{"id":"20240513185222-yklbs74","updated":"20240513185223"},"Children":[{"Type":"NodeText","Data":"操作即操作数据库，执行 SQL 语句，主要有两种：查询语句与非查询语句。"}]},{"ID":"20240513185222-mg18g7d","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240513185222-mg18g7d","updated":"20240513185223"},"Children":[{"Type":"NodeText","Data":"执行"}]},{"ID":"20240513185222-dxey41d","Type":"NodeParagraph","Properties":{"id":"20240513185222-dxey41d","updated":"20240513185223"},"Children":[{"Type":"NodeText","Data":"首先要选择表"}]},{"ID":"20240513185222-fpsma9w","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185222-fpsma9w","updated":"20240513185223"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"with conn:\n    conn.select_db('mydatabase')\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513185222-rmg3rb6","Type":"NodeParagraph","Properties":{"id":"20240513185222-rmg3rb6","updated":"20240513185223"},"Children":[{"Type":"NodeText","Data":"之后，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"conn.cursor()"},{"Type":"NodeText","Data":"​ 获取 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cursor"},{"Type":"NodeText","Data":"​ 对象，并通过该对象执行 SQL 语句"}]},{"ID":"20240513185222-ukjmm3v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185222-ukjmm3v","updated":"20240513185223"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"with conn:\n    conn.select_db('mydatabase')\n    cur = conn.cursor()\n    ret = cur.execute('create table test_table ('\n                      'id smallint primary key auto_increment,'\n                      'name varchar(50) not null'\n                      ') comment \\'test database\\'')\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513185222-7gx3lbw","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240513185222-7gx3lbw","updated":"20240513185223"},"Children":[{"Type":"NodeText","Data":"查询"}]},{"ID":"20240513185222-zeomd4r","Type":"NodeParagraph","Properties":{"id":"20240513185222-zeomd4r","updated":"20240513185223"},"Children":[{"Type":"NodeText","Data":"若 SQL 语句为查询语句，则 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cur.execute"},{"Type":"NodeText","Data":"​ 方法返回数据条数。使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"fetch"},{"Type":"NodeText","Data":"​ 系列函数可获取查询结果，返回类型为元组"}]},{"ID":"20240513185222-uvvc2hq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185222-uvvc2hq","updated":"20240513185223"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"with conn:\n    conn.select_db('mydatabase')\n    cur = conn.cursor()\n    # 8\n    count = cur.execute('show databases')\n    print(count)\n  \n    # (('information_schema',), \n    #  ('mydatabase',), \n    #  ('mysql',),\n    #  ('performance_schema',),\n    #  ('sakila',),\n    #  ('sys',),\n    #  ('test',),\n    #  ('world',))\n    db = cur.fetchall()\n    print(db)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513185222-mv1l8gw","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240513185222-mv1l8gw","updated":"20240513185223"},"Children":[{"Type":"NodeText","Data":"修改"}]},{"ID":"20240513185222-nvmi6fm","Type":"NodeParagraph","Properties":{"id":"20240513185222-nvmi6fm","updated":"20240513185223"},"Children":[{"Type":"NodeText","Data":"若要修改数据库内容，不管是针对数据库、表还是数据，均需要 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"conn.commit()"},{"Type":"NodeText","Data":"​ 提交"}]},{"ID":"20240513185222-ku0d2db","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185222-ku0d2db","updated":"20240513185223"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"with conn:\n    conn.select_db('mydatabase')\n    cur = conn.cursor()\n    cur.execute('insert into test_table (name) values (\\'lq\\')')\n    conn.commit()\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513185222-6rtpd9d","Type":"NodeParagraph","Properties":{"id":"20240513185222-6rtpd9d","updated":"20240513185223"},"Children":[{"Type":"NodeText","Data":"在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Connection"},{"Type":"NodeText","Data":"​ 构造中有一个参数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"autocommit"},{"Type":"NodeText","Data":"​ 可用于开启自动提交"}]},{"ID":"20240513185222-gfub0gq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185222-gfub0gq","updated":"20240513185223"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"conn = Connection(\n    host='localhost',\n    user='***',\n    password='***',\n    # 自动提交\n    autocommit=True\n)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513185222-81318my","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513185222-81318my","updated":"20240513185222"},"Children":[{"Type":"NodeText","Data":"其他可用驱动"}]},{"ID":"20240513185222-wfnhyn9","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185222-wfnhyn9","updated":"20240513185223"},"Children":[{"ID":"20240513185222-6wnbius","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185222-6wnbius","updated":"20240513185222"},"Children":[{"ID":"20240513185222-pwdyaq3","Type":"NodeParagraph","Properties":{"id":"20240513185222-pwdyaq3","updated":"20240513185222"},"Children":[{"Type":"NodeText","Data":"MYSQL-python：仅支持 Python 2"}]}]},{"ID":"20240513185222-ejam03u","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185222-ejam03u","updated":"20240513185222"},"Children":[{"ID":"20240513185222-ziw7j64","Type":"NodeParagraph","Properties":{"id":"20240513185222-ziw7j64","updated":"20240513185222"},"Children":[{"Type":"NodeText","Data":"mysqlclient：MYSQL-python 的 Python3 分支，执行效率最高，但需要配置环境"}]}]},{"ID":"20240513185222-d8zg9e8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185222-d8zg9e8","updated":"20240513185222"},"Children":[{"ID":"20240513185222-2zwf37z","Type":"NodeParagraph","Properties":{"id":"20240513185222-2zwf37z","updated":"20240513185222"},"Children":[{"Type":"NodeText","Data":"pymysql：纯 Python 实现，效率不如 mysqlclient 但可以与 Python 无缝衔接"}]}]},{"ID":"20240513185222-dxq1hfa","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185222-dxq1hfa","updated":"20240513185222"},"Children":[{"ID":"20240513185222-bp1xv6b","Type":"NodeParagraph","Properties":{"id":"20240513185222-bp1xv6b","updated":"20240513185222"},"Children":[{"Type":"NodeText","Data":"mysql-connector-python：MySQL 提供的纯 Python 驱动，效率不如 pymysql"}]}]}]}]}