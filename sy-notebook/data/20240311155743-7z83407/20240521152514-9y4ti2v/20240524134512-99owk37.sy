{"ID":"20240524134512-99owk37","Spec":"1","Type":"NodeDocument","Properties":{"icon":"vue.svg","id":"20240524134512-99owk37","title":"渲染函数","type":"doc","updated":"20240525184548"},"Children":[{"ID":"20240525174516-z1yzt19","Type":"NodeParagraph","Properties":{"id":"20240525174516-z1yzt19","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240525174556"},"Children":[{"Type":"NodeText","Data":"虚拟渲染：使用 JavaScript 创建 DOM 元素的方法"}]},{"ID":"20240524134512-oauozus","Type":"NodeParagraph","Properties":{"id":"20240524134512-oauozus","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240525174610"},"Children":[{"Type":"NodeText","Data":"应尽可能使用模板创建 HTML，虚拟渲染仅在必要时候使用"}]},{"ID":"20240525180801-e4r9c2g","Type":"NodeParagraph","Properties":{"id":"20240525180801-e4r9c2g","updated":"20240525182052"},"Children":[{"Type":"NodeText","Data":"在组件配置的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"render"},{"Type":"NodeText","Data":"​ 方法中使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Vue.h(tag, props, children)"},{"Type":"NodeText","Data":"​ 创建虚拟 DOM 元素（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VNode"},{"Type":"NodeText","Data":"​），实现虚拟渲染"}]},{"ID":"20240525180916-uq9s3ww","Type":"NodeParagraph","Properties":{"id":"20240525180916-uq9s3ww","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240525180937"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"Vue.h"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 是 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"Vue.createVNode"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 的别名"}]},{"ID":"20240525181113-8nnjs2m","Type":"NodeList","ListData":{},"Properties":{"id":"20240525181113-8nnjs2m","updated":"20240525183922"},"Children":[{"ID":"20240525181117-9231q3c","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240525181117-9231q3c","updated":"20240525181117"},"Children":[{"ID":"20240525181117-geqpj0s","Type":"NodeParagraph","Properties":{"id":"20240525181117-geqpj0s","updated":"20240525181205"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"tag"},{"Type":"NodeText","Data":"​：代表虚拟 DOM 的元素类型"}]},{"ID":"20240525181210-j7x6bjk","Type":"NodeList","ListData":{},"Properties":{"id":"20240525181210-j7x6bjk"},"Children":[{"ID":"20240525181210-090f5q3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240525181210-090f5q3"},"Children":[{"ID":"20240525181210-ivd51lv","Type":"NodeParagraph","Properties":{"id":"20240525181210-ivd51lv","updated":"20240525181312"},"Children":[{"Type":"NodeText","Data":"HTML 标签：DOM 标签类型字符串，如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;a\u0026gt;"},{"Type":"NodeText","Data":"​ 对应的是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'a'"},{"Type":"NodeText","Data":"​ 等"}]}]},{"ID":"20240525181236-myrt6bt","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240525181236-myrt6bt"},"Children":[{"ID":"20240525181236-u8nlvmt","Type":"NodeParagraph","Properties":{"id":"20240525181236-u8nlvmt","updated":"20240525181247"},"Children":[{"Type":"NodeText","Data":"组件：组件对象"}]}]},{"ID":"20240525181247-fkbq3lj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240525181247-fkbq3lj"},"Children":[{"ID":"20240525181247-5nqcyn0","Type":"NodeParagraph","Properties":{"id":"20240525181247-5nqcyn0","updated":"20240525181249"},"Children":[{"Type":"NodeText","Data":"函数"}]}]},{"ID":"20240525181252-g5h9xw1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240525181252-g5h9xw1"},"Children":[{"ID":"20240525181252-m8t7c6b","Type":"NodeParagraph","Properties":{"id":"20240525181252-m8t7c6b","updated":"20240525181257"},"Children":[{"Type":"NodeText","Data":"注释："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"null"},{"Type":"NodeText","Data":"​"}]}]}]}]},{"ID":"20240525181120-hqq2kn0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240525181120-hqq2kn0"},"Children":[{"ID":"20240525181120-o9sbx5s","Type":"NodeParagraph","Properties":{"id":"20240525181120-o9sbx5s","updated":"20240525181536"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"props"},{"Type":"NodeText","Data":"​：可选，一个对象，包含该元素的属性，事件，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"props"},{"Type":"NodeText","Data":"​ 等"}]}]},{"ID":"20240525181129-fwld6tr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240525181129-fwld6tr","updated":"20240525183922"},"Children":[{"ID":"20240525181129-km5th6k","Type":"NodeParagraph","Properties":{"id":"20240525181129-km5th6k","updated":"20240525183922"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"children"},{"Type":"NodeText","Data":"​：可选，该元素的子元素，是一个给定类型的对象或数组，可包含类型为："}]},{"ID":"20240525181621-i01bsyc","Type":"NodeList","ListData":{},"Properties":{"id":"20240525181621-i01bsyc","updated":"20240525181714"},"Children":[{"ID":"20240525181620-093nqaj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240525181620-093nqaj"},"Children":[{"ID":"20240525181620-mk9fw4e","Type":"NodeParagraph","Properties":{"id":"20240525181620-mk9fw4e","updated":"20240525181645"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Vue.h"},{"Type":"NodeText","Data":"​ 创建的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VNode"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240525181647-n96c3hq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240525181647-n96c3hq"},"Children":[{"ID":"20240525181647-pyrixvi","Type":"NodeParagraph","Properties":{"id":"20240525181647-pyrixvi","updated":"20240525181703"},"Children":[{"Type":"NodeText","Data":"字符串，可转换为文本 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VNode"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240525181703-7yywl6q","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240525181703-7yywl6q","updated":"20240525181714"},"Children":[{"ID":"20240525181703-csjmnqu","Type":"NodeParagraph","Properties":{"id":"20240525181703-csjmnqu","updated":"20240525181714"},"Children":[{"Type":"NodeText","Data":"有 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"slot"},{"Type":"NodeText","Data":"​ 的对象"}]}]}]}]}]},{"ID":"20240525180959-v2xobb7","Type":"NodeParagraph","Properties":{"id":"20240525180959-v2xobb7","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240525181451"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"Vue,h"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 函数中可以通过 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"this"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 访问传递进来的函数，通过 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"$slots"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 创建 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"\u0026lt;slot\u0026gt;"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​，其中 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"$slot.default()"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 表示没有 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"name"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 的 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"slot"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240525182446-kwlp7u1","Type":"NodeSuperBlock","Properties":{"id":"20240525182446-kwlp7u1","updated":"20240525182446"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240525182439-of7fv4z","Type":"NodeParagraph","Properties":{"id":"20240525182439-of7fv4z","updated":"20240525182446"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240525182439-xw98in7.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240525174611-gcb5aq2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240525174611-gcb5aq2","updated":"20240525182446"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA=="},{"Type":"NodeCodeBlockCode","Data":"\u003cdiv id=\"app\"\u003e\n    \u003canchored-heading :level=\"1\" title=\"锚点 1\"\u003eHello World111!\u003c/anchored-heading\u003e\n    \u003canchored-heading :level=\"2\" title=\"锚点 2\"\u003eHello World222!\u003c/anchored-heading\u003e\n    \u003canchored-heading :level=\"3\" title=\"锚点 3\"\u003eHello World333!\u003c/anchored-heading\u003e\n    \u003canchored-heading :level=\"4\" title=\"锚点 4\"\u003eHello World444!\u003c/anchored-heading\u003e\n    \u003canchored-heading :level=\"5\" title=\"锚点 5\"\u003eHello World555!\u003c/anchored-heading\u003e\n\u003c/div\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240525180736-o2xxd7r","Type":"NodeParagraph","Properties":{"id":"20240525180736-o2xxd7r","updated":"20240525181827"},"Children":[{"Type":"NodeText","Data":"使用模板创建 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"anchored-heading"},{"Type":"NodeText","Data":"​ 组件要使用大量 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"v-if"},{"Type":"NodeText","Data":"​ 分支，冗长且不利于扩展"}]},{"ID":"20240525181851-fn96x7c","Type":"NodeSuperBlock","Properties":{"id":"20240525181851-fn96x7c","updated":"20240525182011"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240525181828-27tdfkj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240525181828-27tdfkj","updated":"20240525182011"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA=="},{"Type":"NodeCodeBlockCode","Data":"\u003cdiv id=\"myanchored\"\u003e\n    \u003ch1 v-if     =\"level === 1\"\u003e\u003ca :href=\"'#' + title\"\u003e\u003cslot\u003e\u003c/slot\u003e\u003c/a\u003e\u003c/h1\u003e\n    \u003ch2 v-else-if=\"level === 2\"\u003e\u003ca :href=\"'#' + title\"\u003e\u003cslot\u003e\u003c/slot\u003e\u003c/a\u003e\u003c/h2\u003e\n    \u003ch3 v-else-if=\"level === 3\"\u003e\u003ca :href=\"'#' + title\"\u003e\u003cslot\u003e\u003c/slot\u003e\u003c/a\u003e\u003c/h3\u003e\n    \u003ch4 v-else-if=\"level === 4\"\u003e\u003ca :href=\"'#' + title\"\u003e\u003cslot\u003e\u003c/slot\u003e\u003c/a\u003e\u003c/h4\u003e\n    \u003ch5 v-else-if=\"level === 5\"\u003e\u003ca :href=\"'#' + title\"\u003e\u003cslot\u003e\u003c/slot\u003e\u003c/a\u003e\u003c/h5\u003e\n\u003c/div\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240525181846-ign0hd7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240525181846-ign0hd7","updated":"20240525181955"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"const MyAnchored = {\n    template: '#myanchored',\n    props: {\n        level: Number,\n        title: String\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240525181958-fdj4jl2","Type":"NodeParagraph","Properties":{"id":"20240525181958-fdj4jl2","updated":"20240525182116"},"Children":[{"Type":"NodeText","Data":"可以自定义 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"render"},{"Type":"NodeText","Data":"​ 方法使用渲染函数渲染"}]},{"ID":"20240525182116-mhpd4pt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240525182116-mhpd4pt","updated":"20240525182309"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"const MyAnchored = {\n    render() {\n        // \u003ch{level}\u003e\u003ca href=\"#{title}\"\u003e\u003cslot\u003e\u003c/slot\u003e\u003c/a\u003e\u003c/h{level}\u003e\n        return Vue.h(`h${this.level}`, [\n            Vue.h('a', {\n                href: `#${this.title}`\n            }, this.$slots.default())\n        ])\n    },\n    props: {\n        level: Number,\n        title: String\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240525182330-r6t8jb0","Type":"NodeParagraph","Properties":{"id":"20240525182330-r6t8jb0","updated":"20240525182405"},"Children":[{"Type":"NodeText","Data":"对应的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"app"},{"Type":"NodeText","Data":"​ 程序配置："}]},{"ID":"20240525182347-30merjq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240525182347-30merjq","updated":"20240525182354"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"Vue.createApp({})\n    .component('anchored-heading', MyAnchored)\n    .mount('#app')\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240525182556-fnq7xbw","Type":"NodeParagraph","Properties":{"id":"20240525182556-fnq7xbw","style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);","updated":"20240525182731"},"Children":[{"Type":"NodeText","Data":"渲染函数创建的元素只能用一次，无法复用，但可以通过创建一个工厂函数实现创建多个相同的元素"}]},{"ID":"20240525184503-hf7vynv","Type":"NodeSuperBlock","Properties":{"id":"20240525184503-hf7vynv","updated":"20240525184546"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240525182733-wrgl89k","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240525182733-wrgl89k","updated":"20240525184509"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"Vue.createApp({}).component('my-com', {\n    render() {\n        const myParagraph = Vue.h('p', 'hi')\n        // 错误\n        return Vue.h('div', \n                     [myParagraph, myParagraph])\n    }\n})\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240525183927-b9yydry","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240525183927-b9yydry","updated":"20240525184546"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"function createParagraph() {\n    return Vue.h('p', 'hi')\n}\nVue.createApp({})\n    .component('my-com', {\n        render() { // ok\n            return Vue.h('div', \n                         [createParagraph(), createParagraph()])\n        }\n    })\n    .mount('#app')\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240525184548-06xg16o","Type":"NodeParagraph","Properties":{"id":"20240525184548-06xg16o"}}]}