{"ID":"20240531020010-5iqcbxu","Spec":"1","Type":"NodeDocument","Properties":{"icon":"vue.svg","id":"20240531020010-5iqcbxu","title":"state 与计算属性","type":"doc","updated":"20240531033012"},"Children":[{"ID":"20240531020010-zk6ski6","Type":"NodeParagraph","Properties":{"id":"20240531020010-zk6ski6","updated":"20240531021926"},"Children":[{"Type":"NodeText","Data":"Vuex 使用单一状态树，一个对象包含了所有应用层级状态作为唯一数据源，每个应用仅包含一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"store"},{"Type":"NodeText","Data":"​ 实例"}]},{"ID":"20240531020356-ck4gy2p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240531020356-ck4gy2p","updated":"20240531021933"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"import { createStore } from 'vuex'\n\nexport default createStore({\n  state: {\n    count: 0\n  },\n  mutations: {\n    increment(state) {\n      state.count++\n    }\n  },\n})\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240531030202-94yn940","Type":"NodeParagraph","Properties":{"id":"20240531030202-94yn940","updated":"20240531030443"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"store"},{"Type":"NodeText","Data":"​ 对象通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"this.$store.state"},{"Type":"NodeText","Data":"​ 访问，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"this.$store.commit('\u0026lt;mutations\u0026gt;')"},{"Type":"NodeText","Data":"​ 修改"}]},{"ID":"20240531025646-nt2m3zy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240531025646-nt2m3zy","updated":"20240531030443"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA=="},{"Type":"NodeCodeBlockCode","Data":"\u003ctemplate\u003e\n  \u003cdiv\u003e计数器：{{ $store.state.count }}\u003c/div\u003e\n  \u003cbutton @click=\"$store.commit('increment')\"\u003e+\u003c/button\u003e\n\u003c/template\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240531025710-ynn58c6","Type":"NodeParagraph","Properties":{"id":"20240531025710-ynn58c6","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240531031530"},"Children":[{"Type":"NodeText","Data":"允许计算属性通过 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"$store.state"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 访问 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"store"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 中的属性，并可以自动更新"}]},{"ID":"20240531025613-uvql2cn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240531025613-uvql2cn","updated":"20240531031530"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"computed: {\n  count() {\n    return this.$store.state.count\n  }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240531030211-cusyo6n","Type":"NodeParagraph","Properties":{"id":"20240531030211-cusyo6n","updated":"20240531031530"},"Children":[{"Type":"NodeText","Data":"若一个组件需要获取多个状态，声明计算属性会很麻烦，可以通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mapState"},{"Type":"NodeText","Data":"​ 函数辅助生成计算属性"}]},{"ID":"20240531030631-89p0s4v","Type":"NodeList","ListData":{},"Properties":{"id":"20240531030631-89p0s4v","updated":"20240531031530"},"Children":[{"ID":"20240531030632-1yf8bz7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531030632-1yf8bz7","updated":"20240531030632"},"Children":[{"ID":"20240531030632-8csx9xz","Type":"NodeParagraph","Properties":{"id":"20240531030632-8csx9xz","updated":"20240531030928"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mapState(object)"},{"Type":"NodeText","Data":"​：对象键为计算属性名，值为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"state =\u0026gt; value"},{"Type":"NodeText","Data":"​ 或 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"string"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240531030745-je26kxm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240531030745-je26kxm","updated":"20240531031117"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"import { mapState } from 'vuex'\n\nexport default {\n    data() { return { localCount: 0 } },\n    computed: mapState({\n        count: state =\u003e state.count,\n        // 等价于 state =\u003e state['count']\n        countAtlas: 'count',\n        // 使用完整函数可以访问 this\n        countPlusLocalState(state) {\n            return state.count + this.localCount\n        }\n    })\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240531030730-b7p9wij","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531030730-b7p9wij"},"Children":[{"ID":"20240531030730-qfh9sej","Type":"NodeParagraph","Properties":{"id":"20240531030730-qfh9sej","updated":"20240531031215"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mapState(string[])"},{"Type":"NodeText","Data":"​：为每一个字符串生成计算函数，并对应 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"state"},{"Type":"NodeText","Data":"​ 中的同名状态"}]},{"ID":"20240531031219-6kfeovo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240531031219-6kfeovo","updated":"20240531031410"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"import { mapState } from 'vuex'\n\nexport default {\n    // 等价于 mapState({ count: 'count' })\n    computed: mapState(['count'])\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20240531031434-2fcklgx","Type":"NodeParagraph","Properties":{"id":"20240531031434-2fcklgx","updated":"20240531031530"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mapState"},{"Type":"NodeText","Data":"​ 返回的是一个对象，因此可以通过对象展开运算符与其他本地计算属性混合"}]},{"ID":"20240531031518-xzj4sz2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240531031518-xzj4sz2","updated":"20240531031644"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"import { mapState } from 'vuex'\n\nexport default {\n    computed: {\n        localComputed() { /* do something */ },\n        ...mapState(['count'])\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240531031630-t386u75","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240531031630-t386u75","updated":"20240531033012"},"Children":[{"Type":"NodeText","Data":"例：state 与计算属性"}]},{"ID":"20240531032716-nidjvhc","Type":"NodeList","ListData":{},"Properties":{"id":"20240531032716-nidjvhc","updated":"20240531033012"},"Children":[{"ID":"20240531032756-pnd2s47","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531032756-pnd2s47","updated":"20240531032756"},"Children":[{"ID":"20240531032756-z6e56qu","Type":"NodeParagraph","Properties":{"id":"20240531032756-z6e56qu","updated":"20240531032756"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"src/store/index.js"},{"Type":"NodeText","Data":"​：保存一些公共属性"}]},{"ID":"20240531032735-k2hv7v0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240531032735-k2hv7v0","updated":"20240531032749"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"import { createStore } from 'vuex'\n\nexport default createStore({\n  state: {\n    bookAuthor: '陈恒',\n    BISBN: '97873025985036',\n    bookPrice: 99.8,\n    bookPress: '清华大学出版社',\n  }\n})\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240531032803-mib4mej","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531032803-mib4mej"},"Children":[{"ID":"20240531032803-kz93p1p","Type":"NodeParagraph","Properties":{"id":"20240531032803-kz93p1p","updated":"20240531032842"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"src/main.js"},{"Type":"NodeText","Data":"​：引用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Vuex"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240531032843-czoazdw","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240531032843-czoazdw","updated":"20240531032850"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"import { createApp } from 'vue'\nimport App from './App.vue'\nimport store from './store'\n\ncreateApp(App).use(store).mount('#app')\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240531032823-6s5lt41","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531032823-6s5lt41","updated":"20240531033012"},"Children":[{"ID":"20240531032823-ddr2q5u","Type":"NodeParagraph","Properties":{"id":"20240531032823-ddr2q5u","updated":"20240531032900"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"src/App.vue"},{"Type":"NodeText","Data":"​：展示数据"}]},{"ID":"20240531032900-0k4qmxr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240531032900-0k4qmxr","updated":"20240531033012"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA=="},{"Type":"NodeCodeBlockCode","Data":"\u003ctemplate\u003e\n  \u003c!-- 直接访问 $store 的全局数据 --\u003e\n  \u003cdiv\u003e\n    \u003ch3\u003e{{ bookName }}\u003c/h3\u003e\n    \u003ch3\u003e作者：{{ $store.state.bookAuthor }}\u003c/h3\u003e\n    \u003ch3\u003e出版社：{{ $store.state.bookPress }}\u003c/h3\u003e\n    \u003ch3\u003eISBN：{{ $store.state.BISBN }}\u003c/h3\u003e\n    \u003ch3\u003e价格：{{ $store.state.bookPrice }}\u003c/h3\u003e\n  \u003c/div\u003e\n  \u003chr\u003e\n  \u003c!-- 通过计算属性访问数据 --\u003e\n  \u003cdiv\u003e\n    \u003ch3\u003e{{ bookName }}\u003c/h3\u003e\n    \u003ch3\u003e作者：{{ bookAuthor }}\u003c/h3\u003e\n    \u003ch3\u003e出版社：{{ bookPress }}\u003c/h3\u003e\n    \u003ch3\u003eISBN：{{ BISBN }}\u003c/h3\u003e\n    \u003ch3\u003e价格：{{ bookPrice }}\u003c/h3\u003e\n  \u003c/div\u003e\n\u003c/template\u003e\n\n\u003cscript\u003e\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'App',\n  data() {\n    return {\n      bookName: 'SSM + SpringBoot + Vue.js 全栈开发从入门到实战（微课视频版）'\n    }\n  },\n  computed: {\n    bookPress() {\n      return this.$store.state.bookPress\n    },\n    ...mapState(['BISBN', 'bookPrice', 'bookAuthor'])\n  }\n}\n\u003c/script\u003e\n\n\u003cstyle\u003e\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n\u003c/style\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20240531032748-cmn1dfi","Type":"NodeParagraph","Properties":{"id":"20240531032748-cmn1dfi"}}]}