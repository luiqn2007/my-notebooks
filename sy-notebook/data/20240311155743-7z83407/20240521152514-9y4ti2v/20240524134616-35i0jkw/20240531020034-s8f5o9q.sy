{"ID":"20240531020034-s8f5o9q","Spec":"1","Type":"NodeDocument","Properties":{"icon":"vue.svg","id":"20240531020034-s8f5o9q","title":"mutations 与 actions","type":"doc","updated":"20240531120418"},"Children":[{"ID":"20240531120413-f9cjecx","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240531120413-f9cjecx","updated":"20240531120418"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mutations"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240531020034-ofvigpa","Type":"NodeParagraph","Properties":{"id":"20240531020034-ofvigpa","updated":"20240531120415"},"Children":[{"Type":"NodeText","Data":"提交 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mutations"},{"Type":"NodeText","Data":"​ 是更改 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"store"},{"Type":"NodeText","Data":"​ 状态的唯一方法，类似于事件。"}]},{"ID":"20240531120209-598l4xu","Type":"NodeParagraph","Properties":{"id":"20240531120209-598l4xu","style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);","updated":"20240531120415"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);"},"TextMarkType":"code","TextMarkTextContent":"mutations"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);\"}"},{"Type":"NodeText","Data":"​ 是唯一可以直接修改 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);"},"TextMarkType":"code","TextMarkTextContent":"state"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);\"}"},{"Type":"NodeText","Data":"​ 的方式，"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);"},"TextMarkType":"code","TextMarkTextContent":"actions"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);\"}"},{"Type":"NodeText","Data":"​ 通过 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);"},"TextMarkType":"code","TextMarkTextContent":"mutations"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);\"}"},{"Type":"NodeText","Data":"​ 间接修改 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);"},"TextMarkType":"code","TextMarkTextContent":"state"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-error-color);background-color: var(--b3-card-error-background);\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240531112833-pfln74m","Type":"NodeList","ListData":{},"Properties":{"id":"20240531112833-pfln74m","updated":"20240531120415"},"Children":[{"ID":"20240531112834-33e1g1n","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531112834-33e1g1n","updated":"20240531112834"},"Children":[{"ID":"20240531112834-gvogxwr","Type":"NodeParagraph","Properties":{"id":"20240531112834-gvogxwr","updated":"20240531113146"},"Children":[{"Type":"NodeText","Data":"每个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mutation"},{"Type":"NodeText","Data":"​ 都有一个类型（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"type"},{"Type":"NodeText","Data":"​："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"string"},{"Type":"NodeText","Data":"​）和回调函数（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"handler"},{"Type":"NodeText","Data":"​："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"(state, ...) =\u0026gt; void"},{"Type":"NodeText","Data":"​）"}]}]},{"ID":"20240531113120-3w2asnr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531113120-3w2asnr"},"Children":[{"ID":"20240531113120-wnm5sji","Type":"NodeParagraph","Properties":{"id":"20240531113120-wnm5sji","updated":"20240531113656"},"Children":[{"Type":"NodeText","Data":"只能在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mutation"},{"Type":"NodeText","Data":"​ 的回调函数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"handler"},{"Type":"NodeText","Data":"​ 中更改 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"state"},{"Type":"NodeText","Data":"​。"}]}]},{"ID":"20240531113659-09si945","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531113659-09si945","updated":"20240531113720"},"Children":[{"ID":"20240531113659-i0ics9z","Type":"NodeParagraph","Properties":{"id":"20240531113659-i0ics9z","updated":"20240531113720"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"handler"},{"Type":"NodeText","Data":"​ 接收第一个参数固定为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"state"},{"Type":"NodeText","Data":"​，还可以接收其他需要的参数，且必须为"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"同步函数"}]}]},{"ID":"20240531112946-l1165vn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531112946-l1165vn"},"Children":[{"ID":"20240531112946-fc8gl4p","Type":"NodeParagraph","Properties":{"id":"20240531112946-fc8gl4p","updated":"20240531113226"},"Children":[{"Type":"NodeText","Data":"不能直接调用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mutation"},{"Type":"NodeText","Data":"​，需要通过提交的方式触发 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"$store.commit()"},{"Type":"NodeText","Data":"​ -- 类似于触发事件"}]}]}]},{"ID":"20240531113234-l3n2hvr","Type":"NodeParagraph","Properties":{"id":"20240531113234-l3n2hvr","updated":"20240531120415"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"handler"},{"Type":"NodeText","Data":"​ 函数包含除 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"state"},{"Type":"NodeText","Data":"​ 外的其它参数时，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"commit"},{"Type":"NodeText","Data":"​ 函数接收的参数形式可以是："}]},{"ID":"20240531113251-6hjgtw2","Type":"NodeList","ListData":{},"Properties":{"id":"20240531113251-6hjgtw2","updated":"20240531120415"},"Children":[{"ID":"20240531113252-2evkfzc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531113252-2evkfzc","updated":"20240531113252"},"Children":[{"ID":"20240531113252-dc6k28b","Type":"NodeParagraph","Properties":{"id":"20240531113252-dc6k28b","updated":"20240531113449"},"Children":[{"Type":"NodeText","Data":"提交载荷："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"$store.commit(\u0026lt;type\u0026gt;, \u0026lt;payload\u0026gt;)"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;payload\u0026gt;"},{"Type":"NodeText","Data":"​ 即额外参数，称为载荷"}]}]},{"ID":"20240531113450-w64hof5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531113450-w64hof5"},"Children":[{"ID":"20240531113450-9nhtvft","Type":"NodeParagraph","Properties":{"id":"20240531113450-9nhtvft","updated":"20240531113522"},"Children":[{"Type":"NodeText","Data":"对象："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"$store.commit(object)"},{"Type":"NodeText","Data":"​，要求 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"object"},{"Type":"NodeText","Data":"​ 中包含一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"type"},{"Type":"NodeText","Data":"​ 属性"}]}]}]},{"ID":"20240531113523-xpua0e1","Type":"NodeParagraph","Properties":{"id":"20240531113523-xpua0e1","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240531120415"},"Children":[{"Type":"NodeText","Data":"ES2015 支持使用常量作为计算属性命名，推荐使用常量"}]},{"ID":"20240531114010-2kwhjd5","Type":"NodeSuperBlock","Properties":{"id":"20240531114010-2kwhjd5","updated":"20240531120415"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240531113831-35x3lvw","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240531113831-35x3lvw","updated":"20240531114011"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"// mutation-types\nexport const SOME_MUTATION = 'SOME_MUTATION'\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240531113840-lwri29c","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240531113840-lwri29c","updated":"20240531114011"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"// store.js\nconst store = createStore({\n    mutations: {\n        [SOME_MUTATION]: state =\u003e { .. }\n    }\n})\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240531114016-v163g2u","Type":"NodeParagraph","Properties":{"id":"20240531114016-v163g2u","updated":"20240531120415"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mapMutations"},{"Type":"NodeText","Data":"​ 函数可以将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mutations"},{"Type":"NodeText","Data":"​ 映射到组件中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"methods"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"需要在根节点注入"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"code strong","TextMarkTextContent":"store"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240531114157-3fqpoj1","Type":"NodeList","ListData":{},"Properties":{"id":"20240531114157-3fqpoj1","updated":"20240531120415"},"Children":[{"ID":"20240531114158-f7pdk6k","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531114158-f7pdk6k","updated":"20240531114158"},"Children":[{"ID":"20240531114158-vv7qvsa","Type":"NodeParagraph","Properties":{"id":"20240531114158-vv7qvsa","updated":"20240531114211"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mapMutations(string[])"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240531114215-97qbhg6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531114215-97qbhg6"},"Children":[{"ID":"20240531114215-a9s297i","Type":"NodeParagraph","Properties":{"id":"20240531114215-a9s297i","updated":"20240531114324"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mapMutations(object)"},{"Type":"NodeText","Data":"​，其中 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"key"},{"Type":"NodeText","Data":"​ 为函数名，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"value"},{"Type":"NodeText","Data":"​ 为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mutation"},{"Type":"NodeText","Data":"​ 名"}]}]},{"ID":"20240531114330-28lq7sc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531114330-28lq7sc","updated":"20240531114351"},"Children":[{"ID":"20240531114330-wnh4rir","Type":"NodeParagraph","Properties":{"id":"20240531114330-wnh4rir","updated":"20240531114351"},"Children":[{"Type":"NodeText","Data":"支持 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"..."},{"Type":"NodeText","Data":"​ 对象展开"}]}]}]},{"ID":"20240531120205-k7gc6ok","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240531120205-k7gc6ok","updated":"20240531120418"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"actions"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240531120209-y66hyvs","Type":"NodeParagraph","Properties":{"id":"20240531120209-y66hyvs","updated":"20240531120418"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"actions"},{"Type":"NodeText","Data":"​ 类似 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mutations"},{"Type":"NodeText","Data":"​ 可以用于该变 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"state"},{"Type":"NodeText","Data":"​，但 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"actions"},{"Type":"NodeText","Data":"​ 不直接该变 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"state"},{"Type":"NodeText","Data":"​，而是通过提交 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mutation"},{"Type":"NodeText","Data":"​ 的形式修改 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"state"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240531120209-wjmupgi","Type":"NodeParagraph","Properties":{"id":"20240531120209-wjmupgi","updated":"20240531120418"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"actions"},{"Type":"NodeText","Data":"​ 与 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mutations"},{"Type":"NodeText","Data":"​ 的使用方式基本相同，除了："}]},{"ID":"20240531120209-vai07vk","Type":"NodeList","ListData":{},"Properties":{"id":"20240531120209-vai07vk","updated":"20240531120418"},"Children":[{"ID":"20240531120209-87uslxg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531120209-87uslxg","updated":"20240531120209"},"Children":[{"ID":"20240531120209-afe8dja","Type":"NodeParagraph","Properties":{"id":"20240531120209-afe8dja","updated":"20240531120209"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"$store.dispatch"},{"Type":"NodeText","Data":"​ 触发，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"dispatch"},{"Type":"NodeText","Data":"​ 同样支持载荷和对象形式"}]}]},{"ID":"20240531120209-lsgmsyc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531120209-lsgmsyc","updated":"20240531120209"},"Children":[{"ID":"20240531120209-0hjupfs","Type":"NodeParagraph","Properties":{"id":"20240531120209-0hjupfs","updated":"20240531120209"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mapActions"},{"Type":"NodeText","Data":"​ 辅助映射到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"methods"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240531120209-mcbqmh3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240531120209-mcbqmh3","updated":"20240531120209"},"Children":[{"ID":"20240531120209-jjb86c2","Type":"NodeParagraph","Properties":{"id":"20240531120209-jjb86c2","updated":"20240531120209"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"支持异步函数"}]}]}]},{"ID":"20240531120209-thf6gfs","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240531120209-thf6gfs","updated":"20240531120418"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"import { INCREMENT, INCREMENT_BY } from '@/mutations'\n\nexport default createStore({\n  state: {\n    count: 0\n  },\n  mutations: {\n    [INCREMENT](state) {\n      state.count++\n    },\n    [INCREMENT_BY](state, amount) {\n      state.count += amount\n    }\n  },\n  actions: {\n    increment(context) {\n      context.commit(INCREMENT)\n    },\n    incrementBy(context, amount) {\n      context.commit(INCREMENT, amount)\n    }\n  }\n})\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240531120405-v1465kh","Type":"NodeParagraph","Properties":{"id":"20240531120405-v1465kh","updated":"20240531120418"}}]}