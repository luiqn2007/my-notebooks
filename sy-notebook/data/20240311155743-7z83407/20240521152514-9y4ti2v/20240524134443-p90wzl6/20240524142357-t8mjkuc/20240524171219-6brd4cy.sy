{"ID":"20240524171219-6brd4cy","Spec":"1","Type":"NodeDocument","Properties":{"icon":"vue.svg","id":"20240524171219-6brd4cy","title":"JS 动画","type":"doc","updated":"20240524173219"},"Children":[{"ID":"20240524171943-v5j50zs","Type":"NodeParagraph","Properties":{"id":"20240524171943-v5j50zs","updated":"20240524171948"},"Children":[{"Type":"NodeText","Data":"通过注册 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"JavaScript"},{"Type":"NodeText","Data":"​ 事件，使用代码控制过渡和动画"}]},{"ID":"20240524171943-vtyc40z","Type":"NodeList","ListData":{},"Properties":{"id":"20240524171943-vtyc40z","updated":"20240524171943"},"Children":[{"ID":"20240524171943-nlmn0gx","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240524171943-nlmn0gx","updated":"20240524171943"},"Children":[{"ID":"20240524171943-8mv909e","Type":"NodeParagraph","Properties":{"id":"20240524171943-8mv909e","updated":"20240524171943"},"Children":[{"Type":"NodeText","Data":"动画事件，事件处理函数第一个参数为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"el"},{"Type":"NodeText","Data":"​，第二个参数为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"done"},{"Type":"NodeText","Data":"​："}]},{"ID":"20240524171943-b6v3520","Type":"NodeList","ListData":{},"Properties":{"id":"20240524171943-b6v3520","updated":"20240524171943"},"Children":[{"ID":"20240524171943-toz5532","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240524171943-toz5532","updated":"20240524171943"},"Children":[{"ID":"20240524171943-7sq2a4g","Type":"NodeParagraph","Properties":{"id":"20240524171943-7sq2a4g","updated":"20240524171943"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"before-enter"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"enter"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"after-enter"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"enter-cancelled"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240524171943-680cw0q","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240524171943-680cw0q","updated":"20240524171943"},"Children":[{"ID":"20240524171943-xykcrky","Type":"NodeParagraph","Properties":{"id":"20240524171943-xykcrky","updated":"20240524171943"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"before-leave"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"leave"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"after-leave"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"leave-cancelled"},{"Type":"NodeText","Data":"​"}]}]}]}]},{"ID":"20240524171943-xws99x5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240524171943-xws99x5","updated":"20240524171943"},"Children":[{"ID":"20240524171943-1r2qd07","Type":"NodeParagraph","Properties":{"id":"20240524171943-1r2qd07","updated":"20240524171943"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"done"},{"Type":"NodeText","Data":"​ 参数是一个函数，当动画完成后必须调用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"done()"},{"Type":"NodeText","Data":"​ 通知 Vue 完成"}]}]}]},{"ID":"20240524171943-wrjwhl1","Type":"NodeParagraph","Properties":{"id":"20240524171943-wrjwhl1","updated":"20240524171943"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"JS"},{"Type":"NodeText","Data":"​ 控制的动画和 CSS 过渡动画可以同时存在"}]},{"ID":"20240524171943-6s7een8","Type":"NodeList","ListData":{},"Properties":{"id":"20240524171943-6s7een8","updated":"20240524171943"},"Children":[{"ID":"20240524171943-evs38ji","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240524171943-evs38ji","updated":"20240524171943"},"Children":[{"ID":"20240524171943-ask74af","Type":"NodeParagraph","Properties":{"id":"20240524171943-ask74af","updated":"20240524171943"},"Children":[{"Type":"NodeText","Data":"同时使用 CSS 过渡动画和 JS 动画时，JS 事件中 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"done"},{"Type":"NodeText","Data":"​ 可以不调用，CSS 动画完成后自动完成"}]}]},{"ID":"20240524171943-hy2iyrj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240524171943-hy2iyrj","updated":"20240524171943"},"Children":[{"ID":"20240524171943-26lco2m","Type":"NodeParagraph","Properties":{"id":"20240524171943-26lco2m","updated":"20240524171943"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":":css=\u0026quot;false\u0026quot;"},{"Type":"NodeText","Data":"​ 属性表示禁用 CSS 动画，可以防止 CSS 动画参数对 JS 动画的影响"}]}]}]},{"ID":"20240524172933-xohydlb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240524172933-xohydlb","updated":"20240524173219"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"Vue.createApp({\n    data() {\n        return {\n            show: false\n        }\n    },\n    methods: {\n        beforeEnter(el) {\n            // 初始状态，只触发一次\n            el.style.transform = 'translate(0, 0)'\n        },\n        enter(el, done) {\n            // 获取 offsetWidth 强制刷新动画\n            el.offsetWidth\n            // 动画设置\n            el.style.transform = 'translate(200px, -200px)'\n            el.style.transition = 'all 3s cubic-bezier(0, 0.54, 0.55, 1.18)'\n            // done 调用后不再触发 enter，并触发一次 after-enter\n            done()\n        },\n        alterEnter(el) {\n            this.show = !this.show\n        }\n    }\n}).mount('#app')\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240524172947-kg3f1ck","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240524172947-kg3f1ck","updated":"20240524173003"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA=="},{"Type":"NodeCodeBlockCode","Data":"\u003cdiv id=\"app\"\u003e\n    \u003cbutton @click=\"show = !show\" class=\"btn\"\u003e添加到购物车\u003c/button\u003e\n    \u003ctransition \n            @before-enter=\"beforeEnter\" \n            @enter=\"enter\"\n            @after-enter=\"afterEnter\"\u003e\n        \u003cdiv v-if=\"show\" class=\"ball\"\u003e\u003c/div\u003e\n    \u003c/transition\u003e\n\u003c/div\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240524173004-qjekk9g","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240524173004-qjekk9g","updated":"20240524173014"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Y3Nz"},{"Type":"NodeCodeBlockCode","Data":".ball {\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    background: green;\n    position: absolute;\n    z-index: 99;\n    top: 200px;\n    left: 100px;\n}\n.btn {\n    position: absolute;\n    top: 200px;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}