{"ID":"20240525022055-p9015w2","Spec":"1","Type":"NodeDocument","Properties":{"icon":"vue.svg","id":"20240525022055-p9015w2","title":"例：给定时间与当前时间差转换","type":"doc","updated":"20240525024024"},"Children":[{"ID":"20240525024023-7k5p9d0","Type":"NodeSuperBlock","Properties":{"id":"20240525024023-7k5p9d0","updated":"20240525024024"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240525024021-tcd5h6t","Type":"NodeSuperBlock","Properties":{"id":"20240525024021-tcd5h6t","updated":"20240525024024"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240525023938-tfvt9o1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240525023938-tfvt9o1","updated":"20240525024021"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"Vue.createApp({\n    data() {\n        return {\n            nowTime: new Date().getTime(),\n            beforeTime: 1628407242588\n        }\n    }\n}).directive('time', {\n    beforeMount(el, binding) {\n        el.innerHTML = getFormatTime(binding.value)\n        el.timeout = setInterval(function () {\n            el.innerHTML = getFormatTime(binding.value)\n        }, 60000)\n    },\n    unmounted(el) {\n        clearInterval(el.timeout)\n        delete el.timeout\n    }\n}).mount('#app')\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240525023940-1qjgup8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240525023940-1qjgup8","updated":"20240525024021"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA=="},{"Type":"NodeCodeBlockCode","Data":"\u003cdiv id=\"app\"\u003e\n    \u003cdiv v-time=\"nowTime\"\u003e\u003c/div\u003e\n    \u003cdiv v-time=\"beforeTime\"\u003e\u003c/div\u003e\n\u003c/div\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240525022055-19vg7ao","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240525022055-19vg7ao","updated":"20240525024024"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"// 获取当前时间戳\nfunction getUnix() {\n    return new Date().getTime()\n}\n// 获取今天 0 点时间戳\nfunction getTodayUnit() {\n    const date = new Date()\n    date.setHours(0)\n    date.setMinutes(0)\n    date.setSeconds(0)\n    date.setMilliseconds(0)\n    return date.getTime()\n}\n// 获取标准时间\nfunction getNormalDate(time) {\n    const date = new Date(time)\n    const month = date.getMonth() + 1\n    const monthFormat = month \u003c 10 ? ('0' + month) : month\n    const day = date.getDate() \u003c 10 \n                ? ('0' + date.getDate()) \n                : date.getDate()\n    return `${date.getFullYear()}-${monthFormat}-${day}`\n}\n// 获取格式化后的时间\nfunction getFormatTime(timeStamp) {\n    const now = getUnix()\n    const today = getTodayUnit()\n    const timer = (now - timeStamp) / 1000\n    let timeFormat = ''\n    if (timer \u003c= 0) timeFormat = '刚刚'\n    // 1min 之前\n    else if (Math.floor(timer / 60) \u003c= 0) timeFormat = '刚刚'\n    // 1min - 1h\n    else if (timer \u003c 3600)\n        timeFormat = Math.floor(timer / 60) + ' 分钟前'\n    // 1h - 1d\n    else if (timer \u003e= 3600 \u0026\u0026 (timeStamp - today) \u003e= 0)\n        timeFormat = Math.floor(timer / 3600) + ' 小时前'\n    // 1d - 1m\n    else if (timer / 86400 \u003c= 31)\n        timeFormat = Math.ceil(timer / 86400) + ' 天前'\n    // \u003e1m: XX年XX月XX日\n    else timeFormat = getNormalDate(timeStamp)\n    return timeFormat\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240525023943-xt865cx","Type":"NodeParagraph","Properties":{"id":"20240525023943-xt865cx"}}]}