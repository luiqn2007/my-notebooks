{"ID":"20240523163325-1qb9082","Spec":"1","Type":"NodeDocument","Properties":{"icon":"vue.svg","id":"20240523163325-1qb9082","title":"数据验证","type":"doc","updated":"20240524005200"},"Children":[{"ID":"20240523163325-yt7xt01","Type":"NodeParagraph","Properties":{"id":"20240523163325-yt7xt01","updated":"20240523163525"},"Children":[{"Type":"NodeText","Data":"当组件需要接收第三方传入的数据时，最好进行数据验证，通过对象类型的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"props"},{"Type":"NodeText","Data":"​ 块实现："}]},{"ID":"20240523170839-c8g1i9y","Type":"NodeList","ListData":{},"Properties":{"id":"20240523170839-c8g1i9y","updated":"20240524004817"},"Children":[{"ID":"20240523170841-czgt307","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240523170841-czgt307","updated":"20240523170841"},"Children":[{"ID":"20240523170841-ltt33k0","Type":"NodeParagraph","Properties":{"id":"20240523170841-ltt33k0","updated":"20240524004328"},"Children":[{"Type":"NodeText","Data":"仅判断类型：属性值为类型的构造或其数组"}]},{"ID":"20240523170931-snjh3bq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240523170931-snjh3bq","updated":"20240524004458"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"props: {\n    // num 参数只能是数字\n    num: Number,\n    // strnum 参数可以是数字或字符串\n    strnum: [Number, String]\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240523170846-sx8y3r1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240523170846-sx8y3r1","updated":"20240524004637"},"Children":[{"ID":"20240523170846-9an98bb","Type":"NodeParagraph","Properties":{"id":"20240523170846-9an98bb","updated":"20240524004357"},"Children":[{"Type":"NodeText","Data":"必要性检查：属性值为一个对象，且包含 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"required: true"},{"Type":"NodeText","Data":"​ 属性"}]},{"ID":"20240524004521-dyxdk8h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240524004521-dyxdk8h","updated":"20240524004637"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"props: {\n    // 必须包含 isrequired 参数，且该参数类型为字符串\n    isrequired: {type: String, required: true}\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240524004357-qiup7oj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240524004357-qiup7oj","updated":"20240524004755"},"Children":[{"ID":"20240524004357-jaroxah","Type":"NodeParagraph","Properties":{"id":"20240524004357-jaroxah","updated":"20240524004457"},"Children":[{"Type":"NodeText","Data":"默认值：属性值为一个对象，且包含 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"default"},{"Type":"NodeText","Data":"​ 属性。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"default"},{"Type":"NodeText","Data":"​ 属性值可以是默认值，也可以是一个产生值的函数"}]},{"ID":"20240524004532-z9ajxeq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240524004532-z9ajxeq","updated":"20240524004755"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"props: {\n    // numdefault 参数必须是数字，且默认值为 100\n    numdefault: {type: Number, default: 100},\n    // objectdefault 参数为对象，且默认值通过给定函数创建 { message: 'hello' }\n    objectdefault: {\n        type: Object, default: () =\u003e { return {message: 'hello'} }\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240524004436-rd46f0h","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240524004436-rd46f0h","updated":"20240524004817"},"Children":[{"ID":"20240524004436-7dn2gey","Type":"NodeParagraph","Properties":{"id":"20240524004436-7dn2gey","updated":"20240524004516"},"Children":[{"Type":"NodeText","Data":"自定义校验：属性值为一个对象，且包含 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"validator"},{"Type":"NodeText","Data":"​ 属性。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"validator"},{"Type":"NodeText","Data":"​ 属性值为一个用于校验的函数，返回 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bool"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240524004536-0l9by2c","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240524004536-0l9by2c","updated":"20240524004817"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"props: {\n    // myfun 校验函数为给定函数\n    myfun: {\n        validator: value =\u003e ['success', 'warning', 'danger'].indexOf(value) !== -1\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20240524004857-tb6p1o5","Type":"NodeSuperBlock","Properties":{"id":"20240524004857-tb6p1o5","updated":"20240524004944"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240523163522-zmvb9bp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240523163522-zmvb9bp","updated":"20240524004944"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"Vue.createApp({})\n  .component('validate-post', {\n    props: {\n      num: Number,\n      strnum: [Number, String],\n      isrequired: {type: String, required: true},\n      numdefault: {type: Number, default: 100},\n      objectdefault: {\n        type: Object, default: () =\u003e { return {message: 'hello'} }\n      },\n      myfun: {\n        validator: value =\u003e \n          ['success', 'warning', 'danger'].indexOf(value) !== -1\n      }\n    },\n    template: '#validate'\n  })\n  .mount('#validate-post-demo')\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240523170746-1v91pqh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240523170746-1v91pqh","updated":"20240524004857"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA=="},{"Type":"NodeCodeBlockCode","Data":"\u003ctemplate id=\"validate\"\u003e\n    \u003cdiv\u003e\n        \u003ch4\u003e{{num}}\u003c/h4\u003e\n        \u003ch4\u003e{{strnum}}\u003c/h4\u003e\n        \u003ch4\u003e{{isrequired}}\u003c/h4\u003e\n        \u003ch4\u003e{{numdefault}}\u003c/h4\u003e\n        \u003ch4\u003e{{objectdefault}}\u003c/h4\u003e\n        \u003ch4\u003e{{myfun}}\u003c/h4\u003e\n    \u003c/div\u003e\n\u003c/template\u003e\n\n\u003cdiv id=\"validate-post-demo\"\u003e\n    \u003cvalidate-post :num=\"200\"\n                   :strnum=\"'sdf'\"\n                   :isrequired=\"'abc'\"\n                   :numdefault=\"300\"\n                   :objectdefault=\"{a: 'a'}\"\n                   :myfun=\"'aaa'\"\u003e\u003c/validate-post\u003e\n\u003c/div\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240524005118-qcsb6up","Type":"NodeSuperBlock","Properties":{"id":"20240524005118-qcsb6up","updated":"20240524005200"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240524005131-5e3lddq","Type":"NodeSuperBlock","Properties":{"id":"20240524005131-5e3lddq","updated":"20240524005200"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240524005047-lcp85yh","Type":"NodeParagraph","Properties":{"id":"20240524005047-lcp85yh","updated":"20240524005131"},"Children":[{"Type":"NodeText","Data":"虽然所有条目都正常显示出来了，但控制台可以看见，Vue 产生了一个警告，提示 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"myfun"},{"Type":"NodeText","Data":"​ 校验失败"}]},{"ID":"20240524005126-2e87ump","Type":"NodeParagraph","Properties":{"id":"20240524005126-2e87ump","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240524005200"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"myfun"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 校验函数表示给定值必须是 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"success"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"warning"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"danger"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 三者之一"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240524005044-lolly4j","Type":"NodeParagraph","Properties":{"id":"20240524005044-lolly4j","updated":"20240524005119"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20240524005044-2r55tyi.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeSuperBlockCloseMarker"}]}]}