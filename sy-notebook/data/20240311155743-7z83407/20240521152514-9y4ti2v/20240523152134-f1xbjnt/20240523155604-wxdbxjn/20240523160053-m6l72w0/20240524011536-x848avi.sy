{"ID":"20240524011536-x848avi","Spec":"1","Type":"NodeDocument","Properties":{"icon":"vue.svg","id":"20240524011536-x848avi","title":"中央事件总线 mitt","type":"doc","updated":"20240524015304"},"Children":[{"ID":"20240524011536-enww2yz","Type":"NodeParagraph","Properties":{"id":"20240524011536-enww2yz","updated":"20240524011652"},"Children":[{"Type":"NodeText","Data":"Vue 推荐使用一个空 Vue 实例作为中央事件总线媒介。"}]},{"ID":"20240524011655-fbgnx93","Type":"NodeParagraph","Properties":{"id":"20240524011655-fbgnx93","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240524011741"},"Children":[{"Type":"NodeText","Data":"Vue.js 3.x 移除了 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"$on"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"$off"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"$once"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ API，推荐使用 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"mitt"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 外部库实现"}]},{"ID":"20240524011757-8bz384e","Type":"NodeParagraph","Properties":{"id":"20240524011757-8bz384e","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240524012012"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"mitt"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​："},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"https://www.npmjs.com/package/mitt"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240524014903-ae63u9d","Type":"NodeList","ListData":{},"Properties":{"id":"20240524014903-ae63u9d","updated":"20240524015304"},"Children":[{"ID":"20240524014905-ydci4ey","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240524014905-ydci4ey","updated":"20240524014905"},"Children":[{"ID":"20240524014905-ctcnwz8","Type":"NodeParagraph","Properties":{"id":"20240524014905-ctcnwz8","updated":"20240524015048"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"buyer"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"seller"},{"Type":"NodeText","Data":"​ 元素模板，包含一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"h1"},{"Type":"NodeText","Data":"​ 用于显示来自对方的消息"}]},{"ID":"20240524015022-wzojawm","Type":"NodeSuperBlock","Properties":{"id":"20240524015022-wzojawm"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240524015008-qo8wp1q","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240524015008-qo8wp1q","updated":"20240524015013"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA=="},{"Type":"NodeCodeBlockCode","Data":"\u003cdiv id=\"buyer\"\u003e\n    \u003ch1\u003e{{message1}}\u003c/h1\u003e\n    \u003cbutton @click=\"transferb\"\u003e我是买方，向卖方传递信息\u003c/button\u003e\n\u003c/div\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240524015014-dznpy1b","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240524015014-dznpy1b","updated":"20240524015020"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA=="},{"Type":"NodeCodeBlockCode","Data":"\u003cdiv id=\"seller\"\u003e\n    \u003ch1\u003e{{message2}}\u003c/h1\u003e\n    \u003cbutton @click=\"transfers\"\u003e我是卖方，向买方传递信息\u003c/button\u003e\n\u003c/div\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]}]},{"ID":"20240524015228-wn590rb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240524015228-wn590rb","updated":"20240524015304"},"Children":[{"ID":"20240524015228-922d9uu","Type":"NodeParagraph","Properties":{"id":"20240524015228-922d9uu","updated":"20240524015304"},"Children":[{"Type":"NodeText","Data":"初始化 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mitt"},{"Type":"NodeText","Data":"​，创建事件总线 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bus"},{"Type":"NodeText","Data":"​ 实例"}]},{"ID":"20240524015243-bhyypzq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240524015243-bhyypzq","updated":"20240524015250"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA=="},{"Type":"NodeCodeBlockCode","Data":"\u003cscript src=\"https://unpkg.com/mitt/dist/mitt.umd.js\"\u003e\u003c/script\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240524015234-jlf96m1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240524015234-jlf96m1","updated":"20240524015241"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"const bus = mitt()\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20240524014931-ghqueqt","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240524014931-ghqueqt"},"Children":[{"ID":"20240524014931-znz4eke","Type":"NodeParagraph","Properties":{"id":"20240524014931-znz4eke","updated":"20240524015223"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"buyer"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"seller"},{"Type":"NodeText","Data":"​ app 创建，在对应方法发送事件，在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mounted"},{"Type":"NodeText","Data":"​ 事件中注册事件处理器"}]},{"ID":"20240524015121-pmjy4s7","Type":"NodeSuperBlock","Properties":{"id":"20240524015121-pmjy4s7"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240524015051-g1t7jmk","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240524015051-g1t7jmk","updated":"20240524015112"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"const buyer = Vue.createApp({\n    data() {\n        return {\n            message1: ''\n        }\n    },\n    methods: {\n        transferb() {\n            bus.emit('on-message1', '来自买方的信息')\n        }\n    },\n    mounted() {\n        bus.on('on-message2', msg =\u003e this.message1 = msg)\n    }\n}).mount('#buyer')\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240524015056-op7h5id","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240524015056-op7h5id","updated":"20240524015118"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"const seller = Vue.createApp({\n    data() {\n        return {\n            message2: ''\n        }\n    },\n    methods: {\n        transfers() {\n            bus.emit('on-message2', '来自卖方的信息')\n        }\n    },\n    mounted() {\n        bus.on('on-message1', msg =\u003e this.message2 = msg)\n    }\n}).mount('#seller')\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]}]}]}]}