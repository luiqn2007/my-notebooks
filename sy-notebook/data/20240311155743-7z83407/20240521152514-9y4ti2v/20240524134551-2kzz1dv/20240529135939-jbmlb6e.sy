{"ID":"20240529135939-jbmlb6e","Spec":"1","Type":"NodeDocument","Properties":{"icon":"vue.svg","id":"20240529135939-jbmlb6e","title":"路由钩子函数","type":"doc","updated":"20240530153110"},"Children":[{"ID":"20240529135939-ju68efn","Type":"NodeParagraph","Properties":{"id":"20240529135939-ju68efn","updated":"20240530150046"}},{"ID":"20240530150529-xk2zf7f","Type":"NodeParagraph","Properties":{"id":"20240530150529-xk2zf7f","updated":"20240530150605"},"Children":[{"Type":"NodeText","Data":"路由钩子函数允许在路由变化时进行一些特殊操作，又称路由守卫、导航守卫"}]},{"ID":"20240530151026-dmv2x6f","Type":"NodeParagraph","Properties":{"id":"20240530151026-dmv2x6f","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240530151052"},"Children":[{"Type":"NodeText","Data":"路由钩子函数允许使用 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"async"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 异步函数"}]},{"ID":"20240530150654-lbexk66","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240530150654-lbexk66","updated":"20240530153110"},"Children":[{"Type":"NodeText","Data":"全局路由钩子函数"}]},{"ID":"20240530150719-zufvtxp","Type":"NodeParagraph","Properties":{"id":"20240530150719-zufvtxp","updated":"20240530150832"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"router.\u0026lt;钩子名称\u0026gt;(function)"},{"Type":"NodeText","Data":"​ 注册全局路由钩子函数"}]},{"ID":"20240530151919-nesf8v6","Type":"NodeList","ListData":{},"Properties":{"id":"20240530151919-nesf8v6","updated":"20240530151919"},"Children":[{"ID":"20240530150856-t2178ck","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240530150856-t2178ck","updated":"20240530151919"},"Children":[{"ID":"20240530150856-tvuzxsf","Type":"NodeParagraph","Properties":{"id":"20240530150856-tvuzxsf","updated":"20240530151614"},"Children":[{"Type":"NodeText","Data":"前置钩子函数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"beforeEach: (to, from[, next]) =\u0026gt; false|string|object"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240530150951-n1qiqmv","Type":"NodeList","ListData":{},"Properties":{"id":"20240530150951-n1qiqmv"},"Children":[{"ID":"20240530150931-df25cil","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240530150931-df25cil"},"Children":[{"ID":"20240530150931-eps583p","Type":"NodeParagraph","Properties":{"id":"20240530150931-eps583p","updated":"20240530151110"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"to"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"from"},{"Type":"NodeText","Data":"​ 表示目标导航地址和当前导航地址"}]}]},{"ID":"20240530151111-bn5t4as","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240530151111-bn5t4as"},"Children":[{"ID":"20240530151111-n155wm8","Type":"NodeParagraph","Properties":{"id":"20240530151111-n155wm8","updated":"20240530151510"},"Children":[{"Type":"NodeText","Data":"返回值为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"false"},{"Type":"NodeText","Data":"​ 时表示取消本次导航，返回 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"string"},{"Type":"NodeText","Data":"​ 或对象表示新的目标地址"}]}]},{"ID":"20240530151256-0rthwxn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240530151256-0rthwxn"},"Children":[{"ID":"20240530151256-5v2rqdf","Type":"NodeParagraph","Properties":{"id":"20240530151256-5v2rqdf","updated":"20240530151546"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"next"},{"Type":"NodeText","Data":"​ 为旧版本参数，现在仍可以使用"}]}]}]}]},{"ID":"20240530151546-idxczjk","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240530151546-idxczjk","updated":"20240530151919"},"Children":[{"ID":"20240530151546-3axtcah","Type":"NodeParagraph","Properties":{"id":"20240530151546-3axtcah","updated":"20240530151811"},"Children":[{"Type":"NodeText","Data":"解析钩子函数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"beforeResolve: to =\u0026gt; undefined|false"},{"Type":"NodeText","Data":"​，此时可以访问 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"meta"},{"Type":"NodeText","Data":"​，返回 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"false"},{"Type":"NodeText","Data":"​ 表示取消跳转"}]}]},{"ID":"20240530151817-iv1m2wq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240530151817-iv1m2wq","updated":"20240530151919"},"Children":[{"ID":"20240530151817-33nhyib","Type":"NodeParagraph","Properties":{"id":"20240530151817-33nhyib","updated":"20240530151851"},"Children":[{"Type":"NodeText","Data":"后置钩子函数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"afterEach: (to, from) =\u0026gt; undefined"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20240530151201-en570cr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240530151201-en570cr","updated":"20240530151538"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"const router = createRouter({ ... })\nrouter.beforeEach((to, from) =\u003e {\n    if (!isAuthenticated      // 验证是否登录\n     \u0026\u0026 to.name != 'Login') { // 防止循环路由\n        return { name: 'Login' }\n    }\n})\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240530150703-2sblncc","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240530150703-2sblncc","updated":"20240530153110"},"Children":[{"Type":"NodeText","Data":"某个路由钩子函数"}]},{"ID":"20240530151923-mxoaevf","Type":"NodeParagraph","Properties":{"id":"20240530151923-mxoaevf","updated":"20240530152008"},"Children":[{"Type":"NodeText","Data":"适用于某个路由的钩子函数，在路由定义时声明"}]},{"ID":"20240530151934-g0qdv0q","Type":"NodeList","ListData":{},"Properties":{"id":"20240530151934-g0qdv0q","updated":"20240530152626"},"Children":[{"ID":"20240530151935-xhx1vnn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240530151935-xhx1vnn","updated":"20240530152626"},"Children":[{"ID":"20240530151935-dm3hib8","Type":"NodeParagraph","Properties":{"id":"20240530151935-dm3hib8","updated":"20240530152157"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"beforeEnter(to, from) =\u0026gt; undefined|false|object"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240530152543-5e2b69d","Type":"NodeParagraph","Properties":{"id":"20240530152543-5e2b69d","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240530152626"},"Children":[{"Type":"NodeText","Data":"仅在进入路由时触发，仅 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"hash"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"query"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"params"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 变化不会触发"}]},{"ID":"20240530152204-3uuvzr0","Type":"NodeParagraph","Properties":{"id":"20240530152204-3uuvzr0","updated":"20240530152227"},"Children":[{"Type":"NodeText","Data":"允许通过数组接收多个函数"}]},{"ID":"20240530152231-u345r9d","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240530152231-u345r9d","updated":"20240530152422"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"const routes = [{\n  path: '/',\n  name: 'home',\n  component: HomeView,\n  // 钩子函数\n  beforeEnter:[removeQueryParams, removeHash]\n}]\n\nfunction removeQuery(to) { return { path: to.path, hash: to.hash, query: {} } }\nfunction removeHash(to)  { return { path: to.path, query: to.query, hash: '' } }\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20240530152010-hw7dmbm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240530152010-hw7dmbm","updated":"20240530152056"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"const routes = [{\n  path: '/',\n  name: 'home',\n  component: HomeView,\n  // 钩子函数\n  beforeEnter: (to, from) =\u003e false\n}]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240530150659-sm0e76f","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240530150659-sm0e76f","updated":"20240530153110"},"Children":[{"Type":"NodeText","Data":"组件路由钩子函数"}]},{"ID":"20240530152151-d9rnjym","Type":"NodeParagraph","Properties":{"id":"20240530152151-d9rnjym","updated":"20240530152453"},"Children":[{"Type":"NodeText","Data":"定义在组件中的钩子函数"}]},{"ID":"20240530152502-qa4blmb","Type":"NodeList","ListData":{},"Properties":{"id":"20240530152502-qa4blmb","updated":"20240530153110"},"Children":[{"ID":"20240530152504-bn1absy","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240530152504-bn1absy","updated":"20240530153110"},"Children":[{"ID":"20240530152504-ubm6kry","Type":"NodeParagraph","Properties":{"id":"20240530152504-ubm6kry","updated":"20240530152922"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"beforeRouterEnter(to, from, next: vm =\u0026gt; {})"},{"Type":"NodeText","Data":"​：组件创建前调用，此时 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"this"},{"Type":"NodeText","Data":"​ 无法访问"}]},{"ID":"20240530153016-hihjeko","Type":"NodeParagraph","Properties":{"id":"20240530153016-hihjeko","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240530153110"},"Children":[{"Type":"NodeText","Data":"仅 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"beforeRouterEnter"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 包含 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"next"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 参数，其他钩子可以直接访问 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"this"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 不需要 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"next"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 函数"}]},{"ID":"20240530152925-jkrzi23","Type":"NodeParagraph","Properties":{"id":"20240530152925-jkrzi23","updated":"20240530153000"},"Children":[{"Type":"NodeText","Data":"可以通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"next"},{"Type":"NodeText","Data":"​ 参数访问组件 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"vm"},{"Type":"NodeText","Data":"​，将在导航确认组件创建后调用"}]}]},{"ID":"20240530152526-s98kp19","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240530152526-s98kp19"},"Children":[{"ID":"20240530152526-xx22xcj","Type":"NodeParagraph","Properties":{"id":"20240530152526-xx22xcj","updated":"20240530152832"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"beforeRouterUpdate(to, from)"},{"Type":"NodeText","Data":"​："},{"Type":"NodeTextMark","TextMarkType":"inline-memo","TextMarkInlineMemoContent":"如路由 /user/:id 从 /user/1 跳转到 /user/2","TextMarkTextContent":"路由改变，该组件被复用"},{"Type":"NodeText","Data":"时调用，可访问 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"this"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240530152527-eskxeya","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240530152527-eskxeya"},"Children":[{"ID":"20240530152527-82nh77c","Type":"NodeParagraph","Properties":{"id":"20240530152527-82nh77c","updated":"20240530152853"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"beforeRouterLeave(to, from)"},{"Type":"NodeText","Data":"​：导航离开组件时调用，可以访问 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"this"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20240530152832-nd00389","Type":"NodeParagraph","Properties":{"id":"20240530152832-nd00389"}}]}