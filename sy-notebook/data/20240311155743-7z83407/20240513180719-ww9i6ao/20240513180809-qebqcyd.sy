{"ID":"20240513180809-qebqcyd","Spec":"1","Type":"NodeDocument","Properties":{"icon":"minecraft.ico","id":"20240513180809-qebqcyd","title":"游戏注册表","type":"doc","updated":"20240513180924"},"Children":[{"ID":"20240513180815-ncuki57","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513180815-ncuki57","updated":"20240513180815"},"Children":[{"Type":"NodeText","Data":"添加元素"}]},{"ID":"20240513180815-4xegqm4","Type":"NodeParagraph","Properties":{"id":"20240513180815-4xegqm4","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"记录向游戏注册表添加元素，如物品、方块等，的一般过程"}]},{"ID":"20240513180815-2z9wm41","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513180815-2z9wm41","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"1.20.2-Forge"}]},{"ID":"20240513180815-njfozes","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240513180815-njfozes","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"基本注册"}]},{"ID":"20240513180815-407otvg","Type":"NodeParagraph","Properties":{"id":"20240513180815-407otvg","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"推荐通过 Forge 提供的 DeferredRegister 注册"}]},{"ID":"20240513180815-feo5l5x","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513180815-feo5l5x","updated":"20240513180816"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"// 注册元素，可以在任何注册事件结束前调用（比如作为某个类的静态成员）\nDeferredRegister\u003cT\u003e REGISTER = DeferredRegister.create(reg, MODID);\n// NeoForge 与 LexForge 类似，只是返回的类型为 DeferredHolder\nRegistryObject\u003cT\u003e OBJECT = REGISTER.register(name, supplier);\n\n// 注册 DeferredRegister，可以在当前mod加载时调用（比如在mod主类的构造函数中）\nIEventBus bus = FMLJavaModLoadingContext.get().getModEventBus();\nREGISTER.register(bus);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513180815-1qhyneb","Type":"NodeList","ListData":{},"Properties":{"id":"20240513180815-1qhyneb","updated":"20240513180816"},"Children":[{"ID":"20240513180815-kprb9sx","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513180815-kprb9sx","updated":"20240513180815"},"Children":[{"ID":"20240513180815-1qa4v3g","Type":"NodeParagraph","Properties":{"id":"20240513180815-1qa4v3g","updated":"20240513180815"},"Children":[{"Type":"NodeText","Data":"MODID：mod id"}]}]},{"ID":"20240513180815-kccsqmj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513180815-kccsqmj","updated":"20240513180815"},"Children":[{"ID":"20240513180815-372z4e1","Type":"NodeParagraph","Properties":{"id":"20240513180815-372z4e1","updated":"20240513180815"},"Children":[{"Type":"NodeText","Data":"name：元素名称，注册名为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MODID:name"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240513180815-ca4dqfk","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513180815-ca4dqfk","updated":"20240513180815"},"Children":[{"ID":"20240513180815-tx3gxmn","Type":"NodeParagraph","Properties":{"id":"20240513180815-tx3gxmn","updated":"20240513180815"},"Children":[{"Type":"NodeText","Data":"supplier：元素的创建方式，仅会执行一次"}]}]},{"ID":"20240513180815-e1vj6tt","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513180815-e1vj6tt","updated":"20240513180815"},"Children":[{"ID":"20240513180815-jy9mu0m","Type":"NodeParagraph","Properties":{"id":"20240513180815-jy9mu0m","updated":"20240513180815"},"Children":[{"Type":"NodeText","Data":"reg：要注册到的注册表，针对不同类型的元素，可选值如下："}]},{"ID":"20240513180815-2n5usyf","Type":"NodeList","ListData":{},"Properties":{"id":"20240513180815-2n5usyf","updated":"20240513180815"},"Children":[{"ID":"20240513180815-aplhrqg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513180815-aplhrqg","updated":"20240513180815"},"Children":[{"ID":"20240513180815-mv8wjdp","Type":"NodeParagraph","Properties":{"id":"20240513180815-mv8wjdp","updated":"20240513180815"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ForgeRegistries"},{"Type":"NodeText","Data":"​ 类中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"IForgeRegistry"},{"Type":"NodeText","Data":"​ 成员"}]}]},{"ID":"20240513180815-ogm262l","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513180815-ogm262l","updated":"20240513180815"},"Children":[{"ID":"20240513180815-dfegd4i","Type":"NodeParagraph","Properties":{"id":"20240513180815-dfegd4i","updated":"20240513180815"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ForgeRegistries.Keys"},{"Type":"NodeText","Data":"​ 中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ResourceKey\u0026lt;Registry\u0026lt;T\u0026gt;\u0026gt;"},{"Type":"NodeText","Data":"​ 成员"}]}]},{"ID":"20240513180815-qnw3erl","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513180815-qnw3erl","updated":"20240513180815"},"Children":[{"ID":"20240513180815-kt80ncp","Type":"NodeParagraph","Properties":{"id":"20240513180815-kt80ncp","updated":"20240513180815"},"Children":[{"Type":"NodeText","Data":"某个其他 mod 特定注册表的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ResourceKey"},{"Type":"NodeText","Data":"​ 或 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ResourceLocation"},{"Type":"NodeText","Data":"​"}]}]}]}]}]},{"ID":"20240513180815-r4yoklv","Type":"NodeParagraph","Properties":{"id":"20240513180815-r4yoklv","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"实际上，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"DeferredRegister"},{"Type":"NodeText","Data":"​ 内部封装了 Forge 提供的注册事件，因此可以直接使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"RegisterEvent"},{"Type":"NodeText","Data":"​ 事件注册。"}]},{"ID":"20240513180924-m286w72","Type":"NodeParagraph","Properties":{"id":"20240513180924-m286w72","updated":"20240513180924"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"Pasted image 20240114130605"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/Pasted image 20240114130605-20240513180924-03ed9oc.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513180815-xjt30q6","Type":"NodeParagraph","Properties":{"id":"20240513180815-xjt30q6","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"如果要向现有创造模式物品栏标签添加物品，通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BuildCreativeModeTabContentsEvent"},{"Type":"NodeText","Data":"​ 事件完成："}]},{"ID":"20240513180815-rhtunx5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513180815-rhtunx5","updated":"20240513180816"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public void accept(BuildCreativeModeTabContentsEvent event) {\n    if (Objects.equals(tab, event.getTabKey())) {\n        event.accept(item);\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513180815-1gn27s5","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240513180815-1gn27s5","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"注册表"}]},{"ID":"20240513180815-9wckjh9","Type":"NodeParagraph","Properties":{"id":"20240513180815-9wckjh9","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"自定义注册表通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"DeferredRegister"},{"Type":"NodeText","Data":"​ 创建。在创建 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"DeferredRegister"},{"Type":"NodeText","Data":"​ 后通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"makeRegistry"},{"Type":"NodeText","Data":"​ 创建："}]},{"ID":"20240513180815-68a66ki","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513180815-68a66ki","updated":"20240513180816"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"// LexForge\nSupplier\u003cIForgeRegistry\u003cT\u003e\u003e registry = \n    dr.makeRegistry(() -\u003e new RegistryBuilder\u003cT\u003e().hasTags());\n\n// NeoForge\nRegistry\u003cT\u003e registry = dr.makeRegistry(builder -\u003e builder.sync(true));\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513180815-1rhut2g","Type":"NodeParagraph","Properties":{"id":"20240513180815-1rhut2g","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"LexForge 创建的 Registry 不是在 MC 原版注册表中（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BuiltInRegistries.REGISTRY"},{"Type":"NodeText","Data":"​），而是需要通过Forge的注册表获取，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"IForgeRegistry"},{"Type":"NodeText","Data":"​ 也不继承自 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Registry"},{"Type":"NodeText","Data":"​，如果需要获取原版 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Registry"},{"Type":"NodeText","Data":"​ 对象需要进行转化："}]},{"ID":"20240513180815-gg4duua","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513180815-gg4duua","updated":"20240513180816"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"// 获取 IForgeRegistry\nIForgeRegistry\u003cT\u003e reg = RegistryManager.ACTIVE.getRegistry(key);\n\n// 获取 Registry\nRegistry\u003cT\u003e reg = GameData.getWrapper(key, Lifecycle.stable());\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513180815-f9ow9ny","Type":"NodeParagraph","Properties":{"id":"20240513180815-f9ow9ny","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"对于 NexForge，如果是自定义注册表，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"makeRegistry"},{"Type":"NodeText","Data":"​ 本身便返回一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Registry\u0026lt;T\u0026gt;"},{"Type":"NodeText","Data":"​；如果是原版注册表，可以通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BuiltInRegistries.REGISTRY.get(key)"},{"Type":"NodeText","Data":"​ 获取。"}]},{"ID":"20240513180815-ht1ufwh","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513180815-ht1ufwh","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"1.20.2-Fabric"}]},{"ID":"20240513180815-hi7k2ri","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240513180815-hi7k2ri","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"基本注册"}]},{"ID":"20240513180815-ypafqll","Type":"NodeParagraph","Properties":{"id":"20240513180815-ypafqll","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"Fabric 直接使用原版注册表系统。在主类 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"initialize()"},{"Type":"NodeText","Data":"​ 方法中注册。"}]},{"ID":"20240513180815-yeu3320","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513180815-yeu3320","updated":"20240513180816"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"// key: ResourceKey\u003cRegistry\u003cT\u003e\u003e\n// value: T\nResourceLocation id = new ResourceLocation(modId, name);\nResourceKey\u003cT\u003e eKey = ResourceKey.create(key, id);\nRegistry.register(registry, eKey, value);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513180815-tkqcope","Type":"NodeParagraph","Properties":{"id":"20240513180815-tkqcope","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"将物品添加到现有 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"CreativeModeTab"},{"Type":"NodeText","Data":"​ 通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ItemGroupEvents.modifyEntriesEvent"},{"Type":"NodeText","Data":"​ 完成"}]},{"ID":"20240513180815-0kntt2k","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513180815-0kntt2k","updated":"20240513180816"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"// tab: ResourceKey\u003cCreativeModeTab\u003e\nItemGroupEvents.modifyEntriesEvent(tab)\n    .register(entries -\u003e entries.accept(item));\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513180815-uvxixkr","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20240513180815-uvxixkr","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"注册表"}]},{"ID":"20240513180815-vjsjtib","Type":"NodeParagraph","Properties":{"id":"20240513180815-vjsjtib","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"所有注册表通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"BuiltInRegistries.REGISTRY"},{"Type":"NodeText","Data":"​ 获取"}]},{"ID":"20240513180815-zfsnbha","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513180815-zfsnbha","updated":"20240513180816"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"registry = (Registry\u003cT\u003e) BuiltInRegistries.REGISTRY.get(key.location());\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513180815-ylaujhx","Type":"NodeParagraph","Properties":{"id":"20240513180815-ylaujhx","updated":"20240513180816"},"Children":[{"Type":"NodeText","Data":"自定义注册表通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"FabricRegistryBuilder"},{"Type":"NodeText","Data":"​ 创建，返回 Registry 对象"}]},{"ID":"20240513180815-nq03e6v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513180815-nq03e6v","updated":"20240513180816"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"registry = FabricRegistryBuilder.createSimple(key)\n        .attribute(RegistryAttribute.SYNCED)\n        .buildAndRegister();\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}