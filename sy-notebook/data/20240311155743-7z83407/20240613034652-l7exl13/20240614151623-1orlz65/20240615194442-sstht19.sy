{"ID":"20240615194442-sstht19","Spec":"1","Type":"NodeDocument","Properties":{"icon":"qt6.ico","id":"20240615194442-sstht19","title":"信号与槽","type":"doc","updated":"20240616032553"},"Children":[{"ID":"20240615194442-2cllf1d","Type":"NodeParagraph","Properties":{"id":"20240615194442-2cllf1d","updated":"20240615203017"},"Children":[{"Type":"NodeText","Data":"信号与"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240614181617-xiyoa8i","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"事件"},{"Type":"NodeText","Data":"有区别也有关联。所有实现了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"QWidget"},{"Type":"NodeText","Data":"​ 的控件类都支持信号机制。"}]},{"ID":"20240615203035-pzchctq","Type":"NodeParagraph","Properties":{"id":"20240615203035-pzchctq","updated":"20240615203108"},"Children":[{"Type":"NodeText","Data":"槽是处理信号的函数，通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"connect"},{"Type":"NodeText","Data":"​ 建立连接"}]},{"ID":"20240615203138-c0xgwhc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240615203138-c0xgwhc","updated":"20240615203243"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"\u003cWidget 对象\u003e.\u003c信号\u003e(\u003c参数\u003e).connect(\u003c槽函数\u003e)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240615203207-k7k563c","Type":"NodeList","ListData":{},"Properties":{"id":"20240615203207-k7k563c","updated":"20240615203339"},"Children":[{"ID":"20240615203207-b7hzgl5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240615203207-b7hzgl5","updated":"20240615203207"},"Children":[{"ID":"20240615203207-rkhqten","Type":"NodeParagraph","Properties":{"id":"20240615203207-rkhqten","updated":"20240615203227"},"Children":[{"Type":"NodeText","Data":"一个信号可以连接多个槽，也可以连接另一个信号"}]}]},{"ID":"20240615203258-yaacxyp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240615203258-yaacxyp"},"Children":[{"ID":"20240615203258-ik2aeu5","Type":"NodeParagraph","Properties":{"id":"20240615203258-ik2aeu5","updated":"20240615203305"},"Children":[{"Type":"NodeText","Data":"一个槽可以监听多个信号"}]}]},{"ID":"20240615203227-44pffg7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240615203227-44pffg7"},"Children":[{"ID":"20240615203227-khj6vu2","Type":"NodeParagraph","Properties":{"id":"20240615203227-khj6vu2","updated":"20240615203255"},"Children":[{"Type":"NodeText","Data":"信号参数可以是任何类型"}]}]},{"ID":"20240615203315-t390qc8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240615203315-t390qc8"},"Children":[{"ID":"20240615203315-b89zvkz","Type":"NodeParagraph","Properties":{"id":"20240615203315-b89zvkz","updated":"20240615203332"},"Children":[{"Type":"NodeText","Data":"信号/槽可以是异步连接，也可以跨进程"}]}]},{"ID":"20240615203332-93qqtfz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240615203332-93qqtfz","updated":"20240615203339"},"Children":[{"ID":"20240615203332-9h7h83j","Type":"NodeParagraph","Properties":{"id":"20240615203332-9h7h83j","updated":"20240615203339"},"Children":[{"Type":"NodeText","Data":"信号可以断开"}]}]}]},{"ID":"20240615202840-0knwiux","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240615202840-0knwiux","updated":"20240616032553"},"Children":[{"Type":"NodeText","Data":"系统信号"}]},{"ID":"20240615202904-ubqknb4","Type":"NodeList","ListData":{},"Properties":{"id":"20240615202904-ubqknb4","updated":"20240615202947"},"Children":[{"ID":"20240615202923-drvkcaq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240615202923-drvkcaq","updated":"20240615202947"},"Children":[{"ID":"20240615202923-su0kg3l","Type":"NodeParagraph","Properties":{"id":"20240615202923-su0kg3l","updated":"20240615202947"},"Children":[{"Type":"NodeText","Data":"对某个事件的封装，如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"QMouseReleaseEvent"},{"Type":"NodeText","Data":"​ 事件对应 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"clicked"},{"Type":"NodeText","Data":"​ 信号"}]}]}]},{"ID":"20240615202844-ps9t6sz","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240615202844-ps9t6sz","updated":"20240616032553"},"Children":[{"Type":"NodeText","Data":"自定义信号"}]},{"ID":"20240615203352-3licyfh","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240615203352-3licyfh","updated":"20240616032553"},"Children":[{"Type":"NodeText","Data":"创建信号"}]},{"ID":"20240615203850-rhzzvhl","Type":"NodeParagraph","Properties":{"id":"20240615203850-rhzzvhl","updated":"20240615203854"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"QtCore.pyqtSignal"},{"Type":"NodeText","Data":"​ 创建槽函数"}]},{"ID":"20240615203430-q3zuvpm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240615203430-q3zuvpm","updated":"20240615203854"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"class pyqtSignal:\n    def __init__(self, *types, name: str) -\u003e None\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240615203606-rdf7dfs","Type":"NodeList","ListData":{},"Properties":{"id":"20240615203606-rdf7dfs","updated":"20240615203926"},"Children":[{"ID":"20240615203926-twamtpe","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240615203926-twamtpe","updated":"20240615203926"},"Children":[{"ID":"20240615203926-2bcf7s2","Type":"NodeParagraph","Properties":{"id":"20240615203926-2bcf7s2","updated":"20240615204006"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"types"},{"Type":"NodeText","Data":"​：信号参数类型，可以是"},{"Type":"NodeTextMark","TextMarkType":"inline-memo","TextMarkInlineMemoContent":"字符串、日期、布尔、数字、列表、字典、元组","TextMarkTextContent":"标准 Python 数据类型"}]}]},{"ID":"20240615203928-0ozyvbt","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240615203928-0ozyvbt"},"Children":[{"ID":"20240615203928-hl9r7ty","Type":"NodeParagraph","Properties":{"id":"20240615203928-hl9r7ty","updated":"20240615203931"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"name"},{"Type":"NodeText","Data":"​：为信号名，默认使用类属性名"}]}]}]},{"ID":"20240615204418-2pm8c0s","Type":"NodeParagraph","Properties":{"id":"20240615204418-2pm8c0s","updated":"20240615204428"},"Children":[{"Type":"NodeText","Data":"自定义的信号通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"emit"},{"Type":"NodeText","Data":"​ 发送"}]},{"ID":"20240615203840-2xahyqr","Type":"NodeParagraph","Properties":{"id":"20240615203840-2xahyqr","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240615204041"},"Children":[{"Type":"NodeText","Data":"信号只能在 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"QObject"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 的子类中定义"}]},{"ID":"20240615203400-ongk55e","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240615203400-ongk55e","updated":"20240616032553"},"Children":[{"Type":"NodeText","Data":"绑定槽函数"}]},{"ID":"20240615204006-qjovbh9","Type":"NodeParagraph","Properties":{"id":"20240615204006-qjovbh9","updated":"20240615204526"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"connect"},{"Type":"NodeText","Data":"​ 将信号绑定到槽函数上，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"disconnect"},{"Type":"NodeText","Data":"​ 解除槽函数与信号的绑定"}]},{"ID":"20240615204623-ix9k66f","Type":"NodeList","ListData":{},"Properties":{"id":"20240615204623-ix9k66f","updated":"20240615204656"},"Children":[{"ID":"20240615204634-ukhxvqd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240615204634-ukhxvqd","updated":"20240615204652"},"Children":[{"ID":"20240615204634-3be2tao","Type":"NodeParagraph","Properties":{"id":"20240615204634-3be2tao","updated":"20240615204652"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"type"},{"Type":"NodeText","Data":"​：连接类型"}]}]}]},{"ID":"20240615204529-7oo8x7l","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240615204529-7oo8x7l","updated":"20240615204622"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"QObject.signal.connect(self, slot, type=None, no_receiver_check=False)\nQObject.signal.disconnect(self, slot=None)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240615204845-zvgxz5s","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240615204845-zvgxz5s","updated":"20240616032553"},"Children":[{"Type":"NodeText","Data":"实例"}]},{"ID":"20240615205242-sav39tx","Type":"NodeParagraph","Properties":{"id":"20240615205242-sav39tx","updated":"20240615205316"},"Children":[{"Type":"NodeText","Data":"创建 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MyWidget"},{"Type":"NodeText","Data":"​ 类，并在其中创建 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"closeWindow"},{"Type":"NodeText","Data":"​ 信号，该信号不需要参数"}]},{"ID":"20240615205336-ab5o4n5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240615205336-ab5o4n5","updated":"20240615205347"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"class MyWidget(QWidget):\n    closeWindow = pyqtSignal()\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240615205347-nxf1hgz","Type":"NodeParagraph","Properties":{"id":"20240615205347-nxf1hgz","updated":"20240615205423"},"Children":[{"Type":"NodeText","Data":"创建一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"QPushButton"},{"Type":"NodeText","Data":"​ 控件，将其 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"clicked"},{"Type":"NodeText","Data":"​ 信号绑定到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"onClicked"},{"Type":"NodeText","Data":"​ 槽函数中"}]},{"ID":"20240615205423-61su3is","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240615205423-61su3is","updated":"20240615205440"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"class MyWidget(QWidget):\n    def __init__(self, parent=None):\n        btn = QPushButton('关闭窗口', self)\n        btn.clicked.connect(self.onClicked)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240615205444-qa9tl31","Type":"NodeParagraph","Properties":{"id":"20240615205444-qa9tl31","updated":"20240615205500"},"Children":[{"Type":"NodeText","Data":"将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"closeWindow"},{"Type":"NodeText","Data":"​ 信号绑定到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"onClose"},{"Type":"NodeText","Data":"​ 槽函数中"}]},{"ID":"20240615205501-2iq282e","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240615205501-2iq282e","updated":"20240615205512"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"class MyWidget(QWidget):\n    def __init__(self, parent=None):\n        self.closeWindow.connect(self.onClose)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240615205512-9qdqc52","Type":"NodeParagraph","Properties":{"id":"20240615205512-9qdqc52","updated":"20240615205548"},"Children":[{"Type":"NodeText","Data":"实现 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"onClicked"},{"Type":"NodeText","Data":"​ 槽函数，触发 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"closeWindow"},{"Type":"NodeText","Data":"​ 信号"}]},{"ID":"20240615205548-ws2g2r5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240615205548-ws2g2r5","updated":"20240615205557"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"class MyWidget(QWidget):\n    def onClicked(self):\n        self.closeWindow.emit()\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240615205602-0v32tsa","Type":"NodeParagraph","Properties":{"id":"20240615205602-0v32tsa","updated":"20240615205619"},"Children":[{"Type":"NodeText","Data":"实现 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"onClose"},{"Type":"NodeText","Data":"​ 槽函数，调用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"close()"},{"Type":"NodeText","Data":"​ 函数关闭窗口"}]},{"ID":"20240615205619-e6pl2ur","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240615205619-e6pl2ur","updated":"20240615205628"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"class MyWidget(QWidget):\n    def onClose(self):\n        self.close()\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240616032532-508n7dg","Type":"NodeParagraph","Properties":{"id":"20240616032532-508n7dg","updated":"20240616032534"},"Children":[{"Type":"NodeText","Data":"完整代码："}]},{"ID":"20240616032516-upgc2gr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","id":"20240616032516-upgc2gr","updated":"20240616032530"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"import sys\n\nfrom PyQt6.QtCore import pyqtSignal\nfrom PyQt6.QtWidgets import QApplication, QWidget, QPushButton\n\n\nclass MyWidget(QWidget):\n\n    closeWindow = pyqtSignal()\n\n    def __init__(self, parent=None):\n        super().__init__(parent)\n        self.setWindowTitle('自定义信号测试')\n        self.resize(200, 100)\n\n        btn = QPushButton('关闭窗口', self)\n        btn.clicked.connect(self.onClicked)\n\n        self.closeWindow.connect(self.onClose)\n\n    def onClicked(self):\n        self.closeWindow.emit()\n\n    def onClose(self):\n        self.close()\n\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    w = MyWidget()\n    w.show()\n    sys.exit(app.exec())\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240616032553-4xsk6cw","Type":"NodeParagraph","Properties":{"id":"20240616032553-4xsk6cw"}}]}