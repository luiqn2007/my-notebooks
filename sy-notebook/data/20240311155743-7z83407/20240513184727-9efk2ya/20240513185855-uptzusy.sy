{"ID":"20240513185855-uptzusy","Spec":"1","Type":"NodeDocument","Properties":{"icon":"sqlalchemy.ico","id":"20240513185855-uptzusy","title":"表操作","type":"doc","updated":"20240513185908"},"Children":[{"ID":"20240513185855-qyqntsk","Type":"NodeParagraph","Properties":{"id":"20240513185855-qyqntsk","updated":"20240513185856"},"Children":[{"Type":"NodeText","Data":"表操作"}]},{"ID":"20240513185908-it5fexy","Type":"NodeParagraph","Properties":{"id":"20240513185908-it5fexy","updated":"20240513185908"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Base.metadata"},{"Type":"NodeText","Data":"​ 可对表进行增删操作，但无法修改 - 只能删除重建，或者自己执行 SQL 语句"}]},{"ID":"20240513185908-d27padl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185908-d27padl","updated":"20240513185908"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"meta = Base.metadata     # type:sqlalchemy.schema.MetaData\nmeta.drop_all(engine)    # 删除所有表\nmeta.create_all(engine)  # 根据之前定义的表创建所有表\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513185908-g9ao87q","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20240513185908-g9ao87q","updated":"20240513185908"},"Children":[{"Type":"NodeText","Data":"记录"}]},{"ID":"20240513185908-uoc3tyb","Type":"NodeParagraph","Properties":{"id":"20240513185908-uoc3tyb","updated":"20240513185908"},"Children":[{"Type":"NodeText","Data":"记录操作基本使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"session"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513185908-yur7cls","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513185908-yur7cls","updated":"20240513185908"},"Children":[{"Type":"NodeText","Data":"增加"}]},{"ID":"20240513185908-fkr1uiv","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185908-fkr1uiv","updated":"20240513185908"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"# 增加一条数据并关闭连接\ninstance = XxxTableData(\n    name='Name',\n    phone=123456,\n    addr=\"Addr\"\n)                       # 准备数据\nsession.add(instance)   # 添加, add_all 可以一次提交多条\nsession.commit()        # 提交\nsession.close()         # 关闭，或使用 session.remove() 回收\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513185908-92wwlbl","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513185908-92wwlbl","updated":"20240513185908"},"Children":[{"Type":"NodeText","Data":"修改"}]},{"ID":"20240513185908-dep58kg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185908-dep58kg","updated":"20240513185908"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"# update 表名 set name=name+'son' where name='Jake'\n(session.query(XxxTableData)\n .filter_by(name='Jake')\n .update({'name': XxxTableData.name + 'son'}, synchronize_session=False))\n\nsession.commit()        # 提交\nsession.close()         # 关闭，或使用 session.remove() 回收\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513185908-kdjccwy","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513185908-kdjccwy","updated":"20240513185908"},"Children":[{"Type":"NodeText","Data":"删除"}]},{"ID":"20240513185908-dshmqs2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185908-dshmqs2","updated":"20240513185908"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"# delete from 表名 where name='Jake'\n(session.query(XxxTableData)\n .filter_by(name='Jake')\n .delete())\n\nsession.commit()        # 提交\nsession.close()         # 关闭，或使用 session.remove() 回收\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}