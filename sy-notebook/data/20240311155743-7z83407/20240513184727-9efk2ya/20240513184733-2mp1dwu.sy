{"ID":"20240513184733-2mp1dwu","Spec":"1","Type":"NodeDocument","Properties":{"icon":"sqlalchemy.ico","id":"20240513184733-2mp1dwu","title":"表映射","type":"doc","updated":"20240513185837"},"Children":[{"ID":"20240513185837-09qr5hc","Type":"NodeParagraph","Properties":{"id":"20240513185837-09qr5hc","updated":"20240513185837"},"Children":[{"Type":"NodeText","Data":"将一张表映射到一个 Python 类需要以下步骤："}]},{"ID":"20240513185837-54y9k6x","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20240513185837-54y9k6x","updated":"20240513185837"},"Children":[{"ID":"20240513185837-26uzjbx","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20240513185837-26uzjbx","updated":"20240513185837"},"Children":[{"ID":"20240513185837-h7ekd3r","Type":"NodeParagraph","Properties":{"id":"20240513185837-h7ekd3r","updated":"20240513185837"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"declarative_base()"},{"Type":"NodeText","Data":"​ 获取基类，并使类继承自该基类"}]}]},{"ID":"20240513185837-fmp85r2","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20240513185837-fmp85r2","updated":"20240513185837"},"Children":[{"ID":"20240513185837-no2cnep","Type":"NodeParagraph","Properties":{"id":"20240513185837-no2cnep","updated":"20240513185837"},"Children":[{"Type":"NodeText","Data":"填充表字段"}]},{"ID":"20240513185837-zk90rp8","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185837-zk90rp8","updated":"20240513185837"},"Children":[{"ID":"20240513185837-kkadcbl","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185837-kkadcbl","updated":"20240513185837"},"Children":[{"ID":"20240513185837-2254pj2","Type":"NodeParagraph","Properties":{"id":"20240513185837-2254pj2","updated":"20240513185837"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"__tablename__"},{"Type":"NodeText","Data":"​：表名"}]}]},{"ID":"20240513185837-yudif1v","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185837-yudif1v","updated":"20240513185837"},"Children":[{"ID":"20240513185837-qfjov57","Type":"NodeParagraph","Properties":{"id":"20240513185837-qfjov57","updated":"20240513185837"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Column"},{"Type":"NodeText","Data":"​ 类变量：字段"}]}]},{"ID":"20240513185837-8htqk65","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185837-8htqk65","updated":"20240513185837"},"Children":[{"ID":"20240513185837-n3i2y4m","Type":"NodeParagraph","Properties":{"id":"20240513185837-n3i2y4m","updated":"20240513185837"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"__table__args"},{"Type":"NodeText","Data":"​：约束与索引"}]}]}]}]}]},{"ID":"20240513185837-t6b7rng","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185837-t6b7rng","updated":"20240513185837"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"# 用于创建基类\nfrom sqlalchemy.orm import declarative_base\n# 数据库中的数据类型\nfrom sqlalchemy import Integer, String, Enum, DECIMAL, DateTime\n# 字段\nfrom sqlalchemy import Column\n# 索引及约束\nfrom sqlalchemy import Index, UniqueConstraint\n\n\nBase = declarative_base()\n\nclass XxxTableData(Base):\n    # 表名\n    __tablename__ = '表名'\n    # 字段\n    id = Column(Integer, primary_key=True, autoincrement=True, comment='主键自增')\n    name = Column(String(32), index=True, nullable=False, comment='姓名，非空')\n    phone = Column(DECIMAL(6), nullable=False, unique=True, comment='电话，非空唯一')\n    gender = Column(Enum('male', 'female'), comment='性别')\n    addr = Column(String(64), comment='地址')\n    create_time = Column(DateTime, default=datetime.datetime.now, comment='创建时间，默认当前时间')\n    # 约束及索引\n    __table__args__ = (\n        UniqueConstraint('name', 'phone'),          # 联合唯一约束\n        Index('name', 'addr', unique=True)  # 联合唯一索引\n    )\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}