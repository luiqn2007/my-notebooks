{"ID":"20240513185913-v2clo8q","Spec":"1","Type":"NodeDocument","Properties":{"icon":"sqlalchemy.ico","id":"20240513185913-v2clo8q","title":"表查询","type":"doc","updated":"20240513185925"},"Children":[{"ID":"20240513185925-g6nzz8b","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513185925-g6nzz8b","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"一般查询"}]},{"ID":"20240513185925-xof41v6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185925-xof41v6","updated":"20240513185925"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"session.query(表或列).filter(条件)...\n\nsession.commit()        # 提交\nsession.close()         # 关闭，或使用 session.remove() 回收\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513185925-bfzqo0i","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185925-bfzqo0i","updated":"20240513185925"},"Children":[{"ID":"20240513185925-5ejkss9","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-5ejkss9","updated":"20240513185925"},"Children":[{"ID":"20240513185925-je58384","Type":"NodeParagraph","Properties":{"id":"20240513185925-je58384","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"表或列：即查询的列及 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"from"},{"Type":"NodeText","Data":"​ 字句"}]},{"ID":"20240513185925-15bkbc5","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185925-15bkbc5","updated":"20240513185925"},"Children":[{"ID":"20240513185925-kwf1e65","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-kwf1e65","updated":"20240513185925"},"Children":[{"ID":"20240513185925-4df2aiu","Type":"NodeParagraph","Properties":{"id":"20240513185925-4df2aiu","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"可以是数据表（如 XxxTableData），相当于 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"select * from 表名"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240513185925-l1olps6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-l1olps6","updated":"20240513185925"},"Children":[{"ID":"20240513185925-zt628ky","Type":"NodeParagraph","Properties":{"id":"20240513185925-zt628ky","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"可以是数据表的几个字段对象（以下简称字段），相当于 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"select 列名 from 表名"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240513185925-qiozweu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-qiozweu","updated":"20240513185925"},"Children":[{"ID":"20240513185925-ta32slr","Type":"NodeParagraph","Properties":{"id":"20240513185925-ta32slr","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"可以是数据表字段的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"label(name)"},{"Type":"NodeText","Data":"​ 方法返回值，相当于 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"select 列名 as name from 表名"},{"Type":"NodeText","Data":"​"}]}]}]}]},{"ID":"20240513185925-2wvjkyv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-2wvjkyv","updated":"20240513185925"},"Children":[{"ID":"20240513185925-v5jskas","Type":"NodeParagraph","Properties":{"id":"20240513185925-v5jskas","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"where"},{"Type":"NodeText","Data":"​ 字句："}]},{"ID":"20240513185925-z8fqnfn","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185925-z8fqnfn","updated":"20240513185925"},"Children":[{"ID":"20240513185925-1jaelyo","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-1jaelyo","updated":"20240513185925"},"Children":[{"ID":"20240513185925-9yd7olt","Type":"NodeParagraph","Properties":{"id":"20240513185925-9yd7olt","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"filter(字段 ==/\u0026gt;=/\u0026lt;= 值)"},{"Type":"NodeText","Data":"​：自定义的运算符返回的不是 bool"}]},{"ID":"20240513185925-49cgqqj","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185925-49cgqqj","updated":"20240513185925"},"Children":[{"ID":"20240513185925-ijj33ox","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-ijj33ox","updated":"20240513185925"},"Children":[{"ID":"20240513185925-oinzi63","Type":"NodeParagraph","Properties":{"id":"20240513185925-oinzi63","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"sqlalchemy.and_"},{"Type":"NodeText","Data":"​：and 连接的多个条件"}]}]},{"ID":"20240513185925-8ea6dxt","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-8ea6dxt","updated":"20240513185925"},"Children":[{"ID":"20240513185925-ybznshw","Type":"NodeParagraph","Properties":{"id":"20240513185925-ybznshw","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"sqlalchemy.or_"},{"Type":"NodeText","Data":"​：or 连接的多个条件"}]}]},{"ID":"20240513185925-lkqo4sv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-lkqo4sv","updated":"20240513185925"},"Children":[{"ID":"20240513185925-z9dykdi","Type":"NodeParagraph","Properties":{"id":"20240513185925-z9dykdi","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"sqlalchemy.not_"},{"Type":"NodeText","Data":"​：not 修饰的条件"}]}]},{"ID":"20240513185925-4mcm6er","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-4mcm6er","updated":"20240513185925"},"Children":[{"ID":"20240513185925-gexfucf","Type":"NodeParagraph","Properties":{"id":"20240513185925-gexfucf","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"字段.between(a, b)"},{"Type":"NodeText","Data":"​：字段 between a and b"}]}]},{"ID":"20240513185925-e5qm4b3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-e5qm4b3","updated":"20240513185925"},"Children":[{"ID":"20240513185925-h0l24uy","Type":"NodeParagraph","Properties":{"id":"20240513185925-h0l24uy","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"字段.in_((...))"},{"Type":"NodeText","Data":"​：字段 in (...)"}]},{"ID":"20240513185925-v14ewey","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185925-v14ewey","updated":"20240513185925"},"Children":[{"ID":"20240513185925-6y27d45","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-6y27d45","updated":"20240513185925"},"Children":[{"ID":"20240513185925-i5n4r06","Type":"NodeParagraph","Properties":{"id":"20240513185925-i5n4r06","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"~数据字段.in_((...))"},{"Type":"NodeText","Data":"​：字段 not in (...)"}]}]}]}]},{"ID":"20240513185925-4v20c0f","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-4v20c0f","updated":"20240513185925"},"Children":[{"ID":"20240513185925-txjniu2","Type":"NodeParagraph","Properties":{"id":"20240513185925-txjniu2","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"字段.like(str)"},{"Type":"NodeText","Data":"​：字段 like str"}]}]},{"ID":"20240513185925-ddpii5z","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-ddpii5z","updated":"20240513185925"},"Children":[{"ID":"20240513185925-2bhlcq4","Type":"NodeParagraph","Properties":{"id":"20240513185925-2bhlcq4","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"字段.is_(obj)"},{"Type":"NodeText","Data":"​：字段 is obj"}]}]}]}]},{"ID":"20240513185925-q2uh861","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-q2uh861","updated":"20240513185925"},"Children":[{"ID":"20240513185925-7a95vwy","Type":"NodeParagraph","Properties":{"id":"20240513185925-7a95vwy","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"filter_by(**kvargs)"},{"Type":"NodeText","Data":"​：判断某个键与值是否相等，相当于 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"where k=v"},{"Type":"NodeText","Data":"​"}]}]}]}]},{"ID":"20240513185925-gnfiszi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-gnfiszi","updated":"20240513185925"},"Children":[{"ID":"20240513185925-49kejmb","Type":"NodeParagraph","Properties":{"id":"20240513185925-49kejmb","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"limit：分页"}]}]},{"ID":"20240513185925-2bwape8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-2bwape8","updated":"20240513185925"},"Children":[{"ID":"20240513185925-boyc68y","Type":"NodeParagraph","Properties":{"id":"20240513185925-boyc68y","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"order by：使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"order_by(字段.asc())"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"order_by(字段.desc())"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513185925-20iflgl","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185925-20iflgl","updated":"20240513185925"},"Children":[{"ID":"20240513185925-xvkb97c","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-xvkb97c","updated":"20240513185925"},"Children":[{"ID":"20240513185925-ps6qvbv","Type":"NodeParagraph","Properties":{"id":"20240513185925-ps6qvbv","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"having：使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"having"},{"Type":"NodeText","Data":"​ 方法"}]}]}]}]},{"ID":"20240513185925-8ckku1a","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-8ckku1a","updated":"20240513185925"},"Children":[{"ID":"20240513185925-g98wisz","Type":"NodeParagraph","Properties":{"id":"20240513185925-g98wisz","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"聚合函数：使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"sqlalchemy.func"},{"Type":"NodeText","Data":"​ 包下的函数包装"}]}]},{"ID":"20240513185925-whedezu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-whedezu","updated":"20240513185925"},"Children":[{"ID":"20240513185925-h7dnimv","Type":"NodeParagraph","Properties":{"id":"20240513185925-h7dnimv","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"数据获取：可使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".all()[:]"},{"Type":"NodeText","Data":"​ 对 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"all()"},{"Type":"NodeText","Data":"​ 返回的值进行切片"}]},{"ID":"20240513185925-9fdw8zo","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185925-9fdw8zo","updated":"20240513185925"},"Children":[{"ID":"20240513185925-34j6ehw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-34j6ehw","updated":"20240513185925"},"Children":[{"ID":"20240513185925-7il3ivh","Type":"NodeParagraph","Properties":{"id":"20240513185925-7il3ivh","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"仅返回第一个："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".first()"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513185925-w2l4ar5","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185925-w2l4ar5","updated":"20240513185925"},"Children":[{"ID":"20240513185925-ku6334b","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-ku6334b","updated":"20240513185925"},"Children":[{"ID":"20240513185925-brtkkxz","Type":"NodeParagraph","Properties":{"id":"20240513185925-brtkkxz","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"one()"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"one_or_null()"},{"Type":"NodeText","Data":"​：第一个，表空则异常或 NULL"}]}]}]}]},{"ID":"20240513185925-cgdwmzd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-cgdwmzd","updated":"20240513185925"},"Children":[{"ID":"20240513185925-nnemm0t","Type":"NodeParagraph","Properties":{"id":"20240513185925-nnemm0t","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"all()"},{"Type":"NodeText","Data":"​ 返回的值支持 for 循环和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"len()"},{"Type":"NodeText","Data":"​ 长度查询"}]}]},{"ID":"20240513185925-vvj3lt1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-vvj3lt1","updated":"20240513185925"},"Children":[{"ID":"20240513185925-agh7kkm","Type":"NodeParagraph","Properties":{"id":"20240513185925-agh7kkm","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"get(n)"},{"Type":"NodeText","Data":"​：返回第 n 个"}]}]},{"ID":"20240513185925-3va1ep1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-3va1ep1","updated":"20240513185925"},"Children":[{"ID":"20240513185925-fdf3obj","Type":"NodeParagraph","Properties":{"id":"20240513185925-fdf3obj","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"exists()"},{"Type":"NodeText","Data":"​：是否非空"}]}]},{"ID":"20240513185925-12k1erd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-12k1erd","updated":"20240513185925"},"Children":[{"ID":"20240513185925-a7qv4lc","Type":"NodeParagraph","Properties":{"id":"20240513185925-a7qv4lc","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"count()"},{"Type":"NodeText","Data":"​：个数"}]}]}]}]}]},{"ID":"20240513185925-pfq7bbi","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513185925-pfq7bbi","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"join"}]},{"ID":"20240513185925-7ctivvd","Type":"NodeParagraph","Properties":{"id":"20240513185925-7ctivvd","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"SQLALchemy 只支持 LEFT JOIN 查询，RIGHT JOIN 只要交换下表位置即可。"}]},{"ID":"20240513185925-ynsblg4","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185925-ynsblg4","updated":"20240513185925"},"Children":[{"ID":"20240513185925-oip7nv4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-oip7nv4","updated":"20240513185925"},"Children":[{"ID":"20240513185925-rbs24c3","Type":"NodeParagraph","Properties":{"id":"20240513185925-rbs24c3","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"join(右表, 连接条件, isouter=True)"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240513185925-u4f8c1m","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185925-u4f8c1m","updated":"20240513185925"},"Children":[{"ID":"20240513185925-38t2w67","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-38t2w67","updated":"20240513185925"},"Children":[{"ID":"20240513185925-b9d4l1w","Type":"NodeParagraph","Properties":{"id":"20240513185925-b9d4l1w","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"右表：联查的右表"}]}]},{"ID":"20240513185925-5qr09cm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-5qr09cm","updated":"20240513185925"},"Children":[{"ID":"20240513185925-ln5clc5","Type":"NodeParagraph","Properties":{"id":"20240513185925-ln5clc5","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"连接条件：on 字句"}]}]},{"ID":"20240513185925-huex3ot","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-huex3ot","updated":"20240513185925"},"Children":[{"ID":"20240513185925-j3uctif","Type":"NodeParagraph","Properties":{"id":"20240513185925-j3uctif","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"isouter：True 表示 OUTER，False 表示 INNER"}]}]}]}]}]},{"ID":"20240513185925-l5frvx2","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513185925-l5frvx2","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"union"}]},{"ID":"20240513185925-mwx3z4i","Type":"NodeParagraph","Properties":{"id":"20240513185925-mwx3z4i","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"这里的第一个查询、第二个查询是指 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"all()"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"first()"},{"Type":"NodeText","Data":"​ 之前的"}]},{"ID":"20240513185925-86idybb","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185925-86idybb","updated":"20240513185925"},"Children":[{"ID":"20240513185925-8axcoer","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-8axcoer","updated":"20240513185925"},"Children":[{"ID":"20240513185925-472e8ua","Type":"NodeParagraph","Properties":{"id":"20240513185925-472e8ua","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"第一个查询.union(第二个查询)"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240513185925-rhj572k","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-rhj572k","updated":"20240513185925"},"Children":[{"ID":"20240513185925-mkv9ggd","Type":"NodeParagraph","Properties":{"id":"20240513185925-mkv9ggd","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"第一个查询.union_all(第二个查询)"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20240513185925-8hn6ze4","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513185925-8hn6ze4","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"子查询"}]},{"ID":"20240513185925-82tvrfc","Type":"NodeParagraph","Properties":{"id":"20240513185925-82tvrfc","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"子查询通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"subquery"},{"Type":"NodeText","Data":"​ 创建"}]},{"ID":"20240513185925-c6uni8v","Type":"NodeList","ListData":{},"Properties":{"id":"20240513185925-c6uni8v","updated":"20240513185925"},"Children":[{"ID":"20240513185925-u18fw0e","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240513185925-u18fw0e","updated":"20240513185925"},"Children":[{"ID":"20240513185925-h2ul88i","Type":"NodeParagraph","Properties":{"id":"20240513185925-h2ul88i","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"第一个查询.subquery()"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20240513185925-lgxag49","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20240513185925-lgxag49","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"relationship"}]},{"ID":"20240513185925-u5cdrsn","Type":"NodeParagraph","Properties":{"id":"20240513185925-u5cdrsn","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"若两个包存在外键的关联，可使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"relationship"},{"Type":"NodeText","Data":"​ 直接根据外键访问另一个表的数据"}]},{"ID":"20240513185925-cqo7o6m","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185925-cqo7o6m","updated":"20240513185925"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"from sqlalchemy import ForeignKey\nfrom sqlalchemy.orm import relationship\n\nclass Address(Base):\n    __tablename__ = 'addresses'\n    # ...\n    # 外键 连接到 users 表的 id 字段\n    user_id = Column(Integer, ForeignKey('users.id'))\n    # user 字段连接到 User 类对应的表（即 users 表）\n    # 会自动找到连接到 users 表的外键，即 user_id，并以此查询 users 表数据返回\n    user = relationship('User', back_populates='addresses')\n\n\nclass User(Base):\n    __tablename__ = 'users'\n    # ...\n    id = Column(Integer)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513185925-nz8972o","Type":"NodeParagraph","Properties":{"id":"20240513185925-nz8972o","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"如果需要处理多对多的关系，则需要一张中间表（可没有具体表只有对象），中间表保存两个外键都是主键，分别连接两张表；创建 relationship 时传入中间表即可"}]},{"ID":"20240513185925-rfwzuzb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240513185925-rfwzuzb","updated":"20240513185925"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHl0aG9u"},{"Type":"NodeCodeBlockCode","Data":"# 每一个 Post 都有多个 Keyword\n# 每一个 Keyword 都有多个 Post\n# 我们不需要具体的表类，有一个对象用于查询的中间联系表即可\n# 但表名不能与现有表重复\nfrom sqlachemy import Table\npost_keywords = Table('post_keywords', Base.metadata,\n\t\t\t\t\t Column('post_id', ForeignKey('posts.id'), primary_key=True),\n\t\t\t\t\t Column('keyward_id', ForeignKey('keywards.id'), primary_key=True))\n\n\nclass Post(Base):\n    __tablename__ = 'posts'\n    id = Column(Integer, primary_key=True)\n    keyward_id = Column(Integer, ForeignKey('keywards.id'))\n    # 建立关系\n    keywards = relationship('Keyward', secondary=post_keywords, back_populates='posts')\n\n\nclass Keyward(Base):\n    __tablename__ = 'keywards'\n    id = Column(Integer, primary_key=True)\n    post_id = Column(Integer, ForeignKey('posts.id'))\n    posts = relationship('Post', secondary=post_keywords, back_populates='keywards')\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240513185925-ta2bilc","Type":"NodeParagraph","Properties":{"id":"20240513185925-ta2bilc","updated":"20240513185925"},"Children":[{"Type":"NodeText","Data":"使用 back_populates 时需要两个表都有对应的字段。如果只有一个可用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"backref"},{"Type":"NodeText","Data":"​，由 SQLAlchemy 自动创建（不建议）"}]}]}