{"ID":"20240529135959-gv0fqsm","Spec":"1","Type":"NodeDocument","Properties":{"icon":"vue.svg","id":"20240529135959-gv0fqsm","title":"例：登录权限验证","type":"doc","updated":"20240530202649"},"Children":[{"ID":"20240529135959-9kbkukr","Type":"NodeBlockquote","Properties":{"id":"20240529135959-9kbkukr","updated":"20240530154518"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20240530154017-bj7vv96","Type":"NodeList","ListData":{},"Properties":{"id":"20240530154017-bj7vv96","updated":"20240530154518"},"Children":[{"ID":"20240530154021-ffz42nl","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240530154021-ffz42nl","updated":"20240530154505"},"Children":[{"ID":"20240530154021-dabxrb0","Type":"NodeParagraph","Properties":{"id":"20240530154021-dabxrb0","updated":"20240530154505"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"App.vue"},{"Type":"NodeText","Data":"​ 导航到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"LoginView.vue"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MainView.vue"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"HomeView.vue"},{"Type":"NodeText","Data":"​ 组件"}]}]},{"ID":"20240530154101-o7rhsy2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240530154101-o7rhsy2","updated":"20240530154518"},"Children":[{"ID":"20240530154101-gxuymia","Type":"NodeParagraph","Properties":{"id":"20240530154101-gxuymia","updated":"20240530154518"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"HomeView.vue"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MainView.vue"},{"Type":"NodeText","Data":"​ 仅在成功登陆时可访问"}]}]}]}]},{"ID":"20240530154137-6coih8r","Type":"NodeParagraph","Properties":{"id":"20240530154137-6coih8r","updated":"20240530160347"},"Children":[{"Type":"NodeText","Data":"路由 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"src/router/index.js"},{"Type":"NodeText","Data":"​："}]},{"ID":"20240530160332-imsnheo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240530160332-imsnheo","updated":"20240530160512"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"import { createRouter, createWebHistory } from 'vue-router'\nimport HomeView from '../views/HomeView.vue'\nimport LoginView from '@/views/LoginView'\nimport MainView from '@/views/MainView'\n\nconst routes = [\n  {\n    path: '/login',\n    name: 'login',\n    component: LoginView\n  },\n  {\n    path: '/home',\n    name: 'home',\n    component: HomeView,\n    meta: { auth: true }\n  },\n  {\n    path: '/main',\n    name: 'main',\n    component: MainView,\n    meta: { auth: true }\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n})\n\nrouter.beforeEach((to) =\u003e {\n  if (to.meta.auth) {\n    if (window.sessionStorage.getItem('user') == null) {\n      alert('未登录，无法访问')\n      return {\n        path: 'login',\n        query: { redirect: to.fullPath }\n      }\n    }\n  }\n})\n\nexport default router\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240530160348-ddwr78l","Type":"NodeParagraph","Properties":{"id":"20240530160348-ddwr78l","updated":"20240530160541"},"Children":[{"Type":"NodeText","Data":"登录页 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"LoginView.vue"},{"Type":"NodeText","Data":"​："}]},{"ID":"20240530160541-4ritwzx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240530160541-4ritwzx","updated":"20240530160548"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA=="},{"Type":"NodeCodeBlockCode","Data":"\u003ctemplate\u003e\n  \u003cdiv class=\"about\"\u003e\n    \u003ch1\u003e登录页面\u003c/h1\u003e\n    \u003cform\u003e\n      \u003clabel\u003e用户名：\u003cinput type=\"text\" v-model=\"uname\" placeholder=\"请输入用户名\"\u003e\u003c/label\u003e\u003cbr\u003e\u003cbr\u003e\n      \u003clabel\u003e密码：\u003cinput type=\"password\" v-model=\"upwd\" placeholder=\"请输入密码\"\u003e\u003c/label\u003e\u003cbr\u003e\u003cbr\u003e\n      \u003cbutton type=\"button\" @click=\"login\" :disabled=\"isDisable\"\u003e登录\u003c/button\u003e\n      \u003cbutton type=\"reset\"\u003e重置\u003c/button\u003e\n    \u003c/form\u003e\n  \u003c/div\u003e\n\u003c/template\u003e\n\u003cscript\u003e\nexport default {\n  data() {\n    return {\n      isDisable: false,\n      uname: \"\",\n      upwd: \"\"\n    }\n  },\n  methods: {\n    login() {\n      this.isDisable = true\n      if (this.uname === 'zhangsan' \u0026\u0026 this.upwd === '123456') {\n        alert('登陆成功')\n        window.sessionStorage.setItem('user', this.uname)\n        const p = this.$route.query.redirect \n        this.$router.replace({\n          path: p === '/' || p === undefined ? '/main' : p \n        })\n      } else {\n        alert('登录失败')\n        this.isDisable = false\n      }\n    }\n  }\n}\n\u003c/script\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240530160555-wxogf86","Type":"NodeParagraph","Properties":{"id":"20240530160555-wxogf86","updated":"20240530160607"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MainView.vue"},{"Type":"NodeText","Data":"​："}]},{"ID":"20240530160607-q2kdw1o","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240530160607-q2kdw1o","updated":"20240530160612"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA=="},{"Type":"NodeCodeBlockCode","Data":"\u003ctemplate\u003e\n  \u003cdiv class=\"about\"\u003e\n    \u003ch1\u003e欢迎\u003c/h1\u003e\n    \u003cdiv\u003e{{ uname }} 登陆成功\u003c/div\u003e\n  \u003c/div\u003e\n\u003c/template\u003e\n\u003cscript\u003e\nexport default {\n  data() {\n    return {\n      uname: window.sessionStorage.getItem('user')\n    }\n  }\n}\n\u003c/script\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240530160621-93d52bm","Type":"NodeParagraph","Properties":{"id":"20240530160621-93d52bm","updated":"20240530160626"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"App.vue"},{"Type":"NodeText","Data":"​："}]},{"ID":"20240530160626-fpwbgah","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240530160626-fpwbgah","updated":"20240530160637"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA=="},{"Type":"NodeCodeBlockCode","Data":"\u003ctemplate\u003e\n  \u003cnav\u003e\n    \u003crouter-link to=\"/login\"\u003eLogin\u003c/router-link\u003e |\n    \u003crouter-link to=\"/main\"\u003eMain\u003c/router-link\u003e\n    \u003crouter-link to=\"/home\"\u003eMain\u003c/router-link\u003e\n  \u003c/nav\u003e\n  \u003crouter-view/\u003e\n\u003c/template\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240530202649-c8xhqcn","Type":"NodeParagraph","Properties":{"id":"20240530202649-c8xhqcn"}}]}