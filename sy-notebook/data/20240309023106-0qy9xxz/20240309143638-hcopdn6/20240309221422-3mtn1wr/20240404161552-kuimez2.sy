{"ID":"20240404161552-kuimez2","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f468-200d-1f9bd","id":"20240404161552-kuimez2","tags":"Java21,实验性功能","title":"Vector API","type":"doc","updated":"20240404161607"},"Children":[{"ID":"20240404161607-tazerpn","Type":"NodeParagraph","Properties":{"id":"20240404161607-tazerpn","updated":"20240404161607"},"Children":[{"Type":"NodeText","Data":"Pamana 子项目，JEP448，包含针对向量计算的一系列操作，通过对编译后的 CPU 指令优化以达到超过标量计算的性能"}]},{"ID":"20240404161607-g4flks9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240404161607-g4flks9","updated":"20240404161607"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"void scalarComputation(float[] a, float[] b, float[] c) {\n   for (int i = 0; i \u003c a.length; i++) {\n        c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;\n   }\n}\n\nstatic final VectorSpecies\u003cFloat\u003e SPECIES = FloatVector.SPECIES_PREFERRED;\n\nvoid vectorComputation(float[] a, float[] b, float[] c) {\n    int i = 0;\n    int upperBound = SPECIES.loopBound(a.length);\n    for (; i \u003c upperBound; i += SPECIES.length()) {\n        // FloatVector va, vb, vc;\n        var va = FloatVector.fromArray(SPECIES, a, i);\n        var vb = FloatVector.fromArray(SPECIES, b, i);\n        var vc = va.mul(va)\n                   .add(vb.mul(vb))\n                   .neg();\n        vc.intoArray(c, i);\n    }\n    for (; i \u003c a.length; i++) {\n        c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240404161607-urfeyne","Type":"NodeParagraph","Properties":{"id":"20240404161607-urfeyne","updated":"20240404161607"},"Children":[{"Type":"NodeText","Data":"以上代码等效于"}]},{"ID":"20240404161607-65cwx5s","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240404161607-65cwx5s","updated":"20240404161607"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"for (int i = 0; i \u003c a.length; i++) {  \n    c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;  \n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}