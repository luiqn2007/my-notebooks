{"ID":"20240404160158-gtbwdzn","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f468-200d-1f9bd","id":"20240404160158-gtbwdzn","tags":"Java21,实验性功能","title":"Record Patterns","type":"doc","updated":"20240404160210"},"Children":[{"ID":"20240404160210-g679ntj","Type":"NodeParagraph","Properties":{"id":"20240404160210-g679ntj","updated":"20240404160210"},"Children":[{"Type":"NodeText","Data":"JEP440，进行模式匹配时，允许对 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"record"},{"Type":"NodeText","Data":"​ 类进行解构甚至嵌套解构，解构时可以使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"var"},{"Type":"NodeText","Data":"​ 推导"}]},{"ID":"20240404160210-gw3e71d","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240404160210-gw3e71d","updated":"20240404160210"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"record Tuner(int pitchInHz, Note note) implements Effect {}\nrecord Note(String note) {}\n\nclass TunerApplier {\n    static String apply(Effect effect, Guitar guitar) {\n        return switch(effect) {\n            case Tuner(int pitch, Note(String note)) -\u003e \n                String.format(\"Tuner active with pitch %d on note %s\", pitch, note);\n            // var 版本\n            case Tuner(var pitch, Note(var note)) -\u003e \n                String.format(\"Tuner active with pitch %d on note %s\", pitch, note);\n        };\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240404160210-ewo0rv0","Type":"NodeParagraph","Properties":{"id":"20240404160210-ewo0rv0","updated":"20240404160210"},"Children":[{"Type":"NodeText","Data":"该模式同样适用于 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"for-in"},{"Type":"NodeText","Data":"​ 循环"}]},{"ID":"20240404160210-wcbo225","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240404160210-wcbo225","updated":"20240404160210"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"record Delay(int timeInMs) implements Effect {}\n\nclass DelayPrinter {\n    static void printDelays(List\u003cDelay\u003e delays) {\n        for (Delay(var timeInMs) : delays) {\n            // do something\n            System.out.println(\"Delay found with timeInMs=\" + timeInMs);\n        }\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240404160210-fq4pcug","Type":"NodeParagraph","Properties":{"id":"20240404160210-fq4pcug","updated":"20240404160210"},"Children":[{"Type":"NodeText","Data":"以及 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"instanceof"},{"Type":"NodeText","Data":"​ 判断"}]},{"ID":"20240404160210-wp6rc9n","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240404160210-wp6rc9n","updated":"20240404160210"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"record Delay(int timeInMs) implements Effect {}\n\nclass DelayPrinter {\n    static void printDelays(Object delay) {\n        if (delay instanceof Delay(var timeInMs)) {\n            // do something\n            System.out.println(\"Delay found with timeInMs=\" + timeInMs);\n        }\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}