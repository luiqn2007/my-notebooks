{"ID":"20240409212410-u8u5da6","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f980","id":"20240409212410-u8u5da6","title":"裸指针","type":"doc","updated":"20240409212425"},"Children":[{"ID":"20240409212425-qrp332u","Type":"NodeParagraph","Properties":{"id":"20240409212425-qrp332u","updated":"20240409212425"},"Children":[{"Type":"NodeText","Data":"裸指针包括 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"*const T"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"*mut T"},{"Type":"NodeText","Data":"​，这里的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"*"},{"Type":"NodeText","Data":"​ 是作为类型的一部分而非运算符，与智能指针的区别在于"}]},{"ID":"20240409212425-204l53r","Type":"NodeList","ListData":{},"Properties":{"id":"20240409212425-204l53r","updated":"20240409212425"},"Children":[{"ID":"20240409212425-l3bu642","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409212425-l3bu642","updated":"20240409212425"},"Children":[{"ID":"20240409212425-h19q8qx","Type":"NodeParagraph","Properties":{"id":"20240409212425-h19q8qx","updated":"20240409212425"},"Children":[{"Type":"NodeText","Data":"允许忽略借用规则，可同时有多个可变和不可变指针"}]}]},{"ID":"20240409212425-wzd8lgc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409212425-wzd8lgc","updated":"20240409212425"},"Children":[{"ID":"20240409212425-rvmd0a3","Type":"NodeParagraph","Properties":{"id":"20240409212425-rvmd0a3","updated":"20240409212425"},"Children":[{"Type":"NodeText","Data":"不保证指向有效内存"}]}]},{"ID":"20240409212425-2fewyte","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409212425-2fewyte","updated":"20240409212425"},"Children":[{"ID":"20240409212425-y489yqc","Type":"NodeParagraph","Properties":{"id":"20240409212425-y489yqc","updated":"20240409212425"},"Children":[{"Type":"NodeText","Data":"允许为空"}]}]},{"ID":"20240409212425-rl8xgew","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409212425-rl8xgew","updated":"20240409212425"},"Children":[{"ID":"20240409212425-1lrzv8p","Type":"NodeParagraph","Properties":{"id":"20240409212425-1lrzv8p","updated":"20240409212425"},"Children":[{"Type":"NodeText","Data":"不被自动清理"}]}]}]},{"ID":"20240409212425-k368jvr","Type":"NodeParagraph","Properties":{"id":"20240409212425-k368jvr","updated":"20240409212425"},"Children":[{"Type":"NodeText","Data":"允许在安全 Rust 中创建裸指针，但只能在不安全 Rust 中解引用"}]},{"ID":"20240409212425-he7dy58","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409212425-he7dy58","updated":"20240409212425"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"fn main() {\n    let mut num = 5;\n    let r1 = \u0026num as *const i32;\n    let r2 = \u0026mut num as *mut i32;\n\n    unsafe {\n        // r1 is 5, r2 is 5\n        println!(\"r1 is {}, r2 is {}\", *r1, *r2)\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409212425-1yan1el","Type":"NodeParagraph","Properties":{"id":"20240409212425-1yan1el","updated":"20240409212425"},"Children":[{"Type":"NodeText","Data":"裸指针很多时候是不安全的"}]},{"ID":"20240409212425-1wkqxhz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409212425-1wkqxhz","updated":"20240409212425"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"use std::slice;\n\nfn main() {\n    let address = 0x012345usize;\n    // 指向 0x012345 内存，但谁知道这里有啥玩意...\n    let r = address as *mut i32;\n    let slice = unsafe {\n        // 谁知道这块内存有啥...\n        slice::from_raw_parts_mut(r, 10000)\n    };\n}\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}