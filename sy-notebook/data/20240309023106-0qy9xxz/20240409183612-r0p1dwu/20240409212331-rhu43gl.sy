{"ID":"20240409212331-rhu43gl","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f980","id":"20240409212331-rhu43gl","title":"Cargo","type":"doc","updated":"20240409213058"},"Children":[{"ID":"20240409212331-us5dstn","Type":"NodeParagraph","Properties":{"id":"20240409212331-us5dstn","updated":"20240409213009"},"Children":[{"Type":"NodeText","Data":"Cargo 用于发布一个包。Rust 的发布配置是预定义的一组构建参数，默认有两个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"dev"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"release"},{"Type":"NodeText","Data":"​。当运行 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo build"},{"Type":"NodeText","Data":"​ 时，使用 dev 配置，运行\n​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo build --release"},{"Type":"NodeText","Data":"​ 则使用 release 配置。在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Cargo.toml"},{"Type":"NodeText","Data":"​ 中可配置发布配置 profile。"}]},{"ID":"20240409212906-zsj9cum","Type":"NodeParagraph","Properties":{"id":"20240409212906-zsj9cum","updated":"20240409212906"},"Children":[{"Type":"NodeText","Data":"Rust 的发布配置是预定义的一组构建参数，默认有两个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"dev"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"release"},{"Type":"NodeText","Data":"​。当运行 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo build"},{"Type":"NodeText","Data":"​ 时，使用 dev 配置，运行\n​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo build --release"},{"Type":"NodeText","Data":"​ 则使用 release 配置。"}]},{"ID":"20240409212906-wcvvybm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409212906-wcvvybm","updated":"20240409212906"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"dG9tbA=="},{"Type":"NodeCodeBlockCode","Data":"[profile.dev]\nopt-level = 0\n\n[profile.release]\nopt-level = 3\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409212913-34enrkk","Type":"NodeParagraph","Properties":{"id":"20240409212913-34enrkk","updated":"20240409213018"},"Children":[{"Type":"NodeText","Data":"发布时，首先在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"crates.io"},{"Type":"NodeText","Data":"​ 上注册一个账号并获取一个 API token，在 cargo 登录 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo login [token]"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20240409213015-58pin9s","Type":"NodeParagraph","Properties":{"id":"20240409213015-58pin9s","updated":"20240409213015"},"Children":[{"Type":"NodeText","Data":"在发布之前，需要在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Cargo.toml"},{"Type":"NodeText","Data":"​ 的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"[package]"},{"Type":"NodeText","Data":"​ 部分添加元信息"}]},{"ID":"20240409213015-8cni5k1","Type":"NodeTable","TableAligns":[2,1],"Properties":{"colgroup":"|","id":"20240409213015-8cni5k1","updated":"20240409213015"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"信息名"}]},{"Type":"NodeTableCell","Data":"th","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"说明"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"name"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"项目名，所有发布在 crate.io 的项目不可同名"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"license"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"许可，根据 "},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"http://spdx.org/licenses/","TextMarkTextContent":"Linux 基金会"},{"Type":"NodeText","Data":" 列出的标识符，使用 OR 分隔"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"license-file"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"许可，若不使用 spdx 的许可，通过该字段指定许可文件"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"version"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"根据 "},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://semver.org/","TextMarkTextContent":"Semantic Versioning"},{"Type":"NodeText","Data":" 的版本号"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"author"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"列表，作者"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"edition"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"编译用 Rust 版本，可选 2015 和 2018，默认 2018"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"description"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"描述"}]}]}]},{"ID":"20240409213015-5bgxy25","Type":"NodeParagraph","Properties":{"id":"20240409213015-5bgxy25","updated":"20240409213015"},"Children":[{"Type":"NodeText","Data":"准备好后，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo publish"},{"Type":"NodeText","Data":"​ 发布到 crate.io"}]},{"ID":"20240409213015-p4dz02d","Type":"NodeParagraph","Properties":{"id":"20240409213015-p4dz02d","updated":"20240409213015"},"Children":[{"Type":"NodeText","Data":"若某个版本有重大问题或被破坏，可使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo yank --vers [version]"},{"Type":"NodeText","Data":"​ 撤回版本。撤回后已依赖该版本的项目仍能从 crate.io 下载该版本，但新项目无法依赖该版本。"}]},{"ID":"20240409213015-7l726fw","Type":"NodeParagraph","Properties":{"id":"20240409213015-7l726fw","updated":"20240409213015"},"Children":[{"Type":"NodeText","Data":"撤回并不能删除代码，可使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo yank --vers [version] --undo"},{"Type":"NodeText","Data":"​ 撤回撤回（...）"}]},{"ID":"20240409213024-gxag7c8","Type":"NodeParagraph","Properties":{"id":"20240409213024-gxag7c8","updated":"20240409213042"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo install"},{"Type":"NodeText","Data":"​ 可向本地安装对应包的二进制 crate，其安装目录是 Rust 安装目录的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bin"},{"Type":"NodeText","Data":"​ 子目录。"}]},{"ID":"20240409213042-9pa10dz","Type":"NodeParagraph","Properties":{"id":"20240409213042-9pa10dz","updated":"20240409213058"},"Children":[{"Type":"NodeText","Data":"Cargo 允许在不修改 Cargo 的前提下向 Cargo 添加子命令。在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"$PATH"},{"Type":"NodeText","Data":"​ 中若存在类似 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo-something"},{"Type":"NodeText","Data":"​ 的二进制文件，则可以通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo something"},{"Type":"NodeText","Data":"​ 的形式调用。可使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo --list"},{"Type":"NodeText","Data":"​ 列举所有自定义命令。"}]}]}