{"ID":"20240409190042-7wgyumd","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f980","id":"20240409190042-7wgyumd","title":"Result","type":"doc","updated":"20240409191508"},"Children":[{"ID":"20240409191508-o7qhfxy","Type":"NodeParagraph","Properties":{"id":"20240409191508-o7qhfxy","updated":"20240409191508"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Result\u0026lt;T, E\u0026gt;"},{"Type":"NodeText","Data":"​ 是一个枚举，包含 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Ok"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Err"},{"Type":"NodeText","Data":"​ 两个值。"}]},{"ID":"20240409191508-fq5udy1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409191508-fq5udy1","updated":"20240409191508"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"use std::fs::File;\n\nfn main() {\n    let f = File::open(\"hello.txt\");\n\n    // Can't open file because Os { code: 2, kind: NotFound, message: \"系统找不到指定的文件。\" }\n    let f = match f {\n        Ok(file) =\u003e file,\n        Err(error) =\u003e panic!(\"Can't open file because {:?}\", error)\n    };\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409191508-e9o8gdn","Type":"NodeParagraph","Properties":{"id":"20240409191508-e9o8gdn","updated":"20240409191508"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Result"},{"Type":"NodeText","Data":"​ 存在一系列简写方法: "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"unwarp"},{"Type":"NodeText","Data":"​ 系列方法和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"expect"},{"Type":"NodeText","Data":"​ 方法，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"expect"},{"Type":"NodeText","Data":"​ 允许自定义错误信息"}]},{"ID":"20240409191508-0f3atqm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409191508-0f3atqm","updated":"20240409191508"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"use std::fs::File;\n\nfn main() {\n    // 解包，若有错误则执行闭包\n    let f0 = File::open(\"hello0.txt\").unwrap_or_else(|error| {\n        // Warn: 系统找不到指定的文件。 (os error 2)\n        println!(\"Warn: {}\", error);\n        File::create(\"hello0.txt\").unwrap()\n    });\n\n    // 解包，若有错误直接通过 panic 抛出\n    // thread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 2, kind: NotFound, message: \"系统找不到指定的文件。\" }'\n    let f1 = File::open(\"hello1.txt\").unwrap();\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409191508-nitj625","Type":"NodeParagraph","Properties":{"id":"20240409191508-nitj625","updated":"20240409191508"},"Children":[{"Type":"NodeText","Data":"传递异常也是很常见的操作，将异常传递给外部方法处理"}]},{"ID":"20240409191508-s06z8tu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409191508-s06z8tu","updated":"20240409191508"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"fn read_from_file(file: \u0026str) -\u003e Result\u003cString, io::Error\u003e {\n    let f = File::open(file);\n\n    let mut f = match f {\n        Ok(file) =\u003e file,\n        // 传递 1\n        Err(error) =\u003e return Err(error)\n    };\n\n    let mut result = String::new();\n    match f.read_to_string(\u0026mut result) {\n        Ok(_) =\u003e Ok(result),\n        // 传递 2\n        Err(e) =\u003e Err(e)\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409191508-4vzqiay","Type":"NodeParagraph","Properties":{"id":"20240409191508-4vzqiay","updated":"20240409191508"},"Children":[{"Type":"NodeText","Data":"此时可通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"?"},{"Type":"NodeText","Data":"​ 运算符简写，函数返回值必须是 Result 类型。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"main()"},{"Type":"NodeText","Data":"​ 函数允许返回 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Result\u0026lt;(), E\u0026gt;"},{"Type":"NodeText","Data":"​ 类型"}]},{"ID":"20240409191508-ffw4n9e","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409191508-ffw4n9e","updated":"20240409191508"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"fn read_from_file(file: \u0026str) -\u003e Result\u003cString, io::Error\u003e {\n    // 传递 1\n    let mut f = File::open(file)?;\n    let mut result = String::new();\n    // 传递 2\n    f.read_to_string(\u0026mut result)?;\n    Ok(result)\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409191508-i7o8any","Type":"NodeParagraph","Properties":{"id":"20240409191508-i7o8any","updated":"20240409191508"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"?"},{"Type":"NodeText","Data":"​ 支持链式调用"}]},{"ID":"20240409191508-6vavoz6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409191508-6vavoz6","updated":"20240409191508"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"fn read_from_file(file: \u0026str) -\u003e Result\u003cString, io::Error\u003e {\n    let mut result = String::new();\n    //            传递 1                        传递 2\n    File::open(file)?.read_to_string(\u0026mut result)?;\n    Ok(result)\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}