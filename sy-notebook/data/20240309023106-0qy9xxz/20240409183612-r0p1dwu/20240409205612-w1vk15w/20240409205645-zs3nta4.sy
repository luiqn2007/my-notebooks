{"ID":"20240409205645-zs3nta4","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f980","id":"20240409205645-zs3nta4","title":"移动与复制","type":"doc","updated":"20240409205652"},"Children":[{"ID":"20240409205652-qrkxl46","Type":"NodeParagraph","Properties":{"id":"20240409205652-qrkxl46","updated":"20240409205652"},"Children":[{"Type":"NodeText","Data":"在 Rust 中，类似 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"s1 = s2"},{"Type":"NodeText","Data":"​ 这样的指针操作在以下情况下触发移动，s2 获取 s1 的一份浅拷贝后 s1 会被丢弃"}]},{"ID":"20240409205652-3s3inna","Type":"NodeList","ListData":{},"Properties":{"id":"20240409205652-3s3inna","updated":"20240409205652"},"Children":[{"ID":"20240409205652-las8zuf","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409205652-las8zuf","updated":"20240409205652"},"Children":[{"ID":"20240409205652-dryaxf2","Type":"NodeParagraph","Properties":{"id":"20240409205652-dryaxf2","updated":"20240409205652"},"Children":[{"Type":"NodeText","Data":"分配在栈上的变量"}]}]},{"ID":"20240409205652-n3cq9kc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409205652-n3cq9kc","updated":"20240409205652"},"Children":[{"ID":"20240409205652-5yioj0y","Type":"NodeParagraph","Properties":{"id":"20240409205652-5yioj0y","updated":"20240409205652"},"Children":[{"Type":"NodeText","Data":"分配在堆上，但未实现 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Copy"},{"Type":"NodeText","Data":"​ Trait 的对象"}]}]}]},{"ID":"20240409205652-3i1i6kl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409205652-3i1i6kl","updated":"20240409205652"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"let s1 = String::from(\"Hello\");\nlet s2 = s1;\n\n// let s1 = String::from(\"Hello\");\n//     -- move occurs because `s1` has type `String`, which does not implement the `Copy` trait\n// let s2 = s1;\n//          -- value moved here\nprintln!(\"{}\", s1);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409205652-jbouxbu","Type":"NodeParagraph","Properties":{"id":"20240409205652-jbouxbu","updated":"20240409205652"},"Children":[{"Type":"NodeText","Data":"对于栈上变量，类似 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"s1 = s2"},{"Type":"NodeText","Data":"​ 的做法实际上是对值的复制"}]},{"ID":"20240409205652-bxtcmvd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409205652-bxtcmvd","updated":"20240409205652"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"let s1 = \"123\";\nlet s2 = s1;\n\n// 123\nprintln!(\"{}\", s1);\n// 123\nprintln!(\"{}\", s2);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409205652-zajpe7w","Type":"NodeParagraph","Properties":{"id":"20240409205652-zajpe7w","updated":"20240409205652"},"Children":[{"Type":"NodeText","Data":"Rust 中有一个名为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Copy"},{"Type":"NodeText","Data":"​ 的 trait，实现后可实现类似栈上变量的直接复制，Rust 某些类已经实现了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Copy"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240409205652-okxrqle","Type":"NodeList","ListData":{},"Properties":{"id":"20240409205652-okxrqle","updated":"20240409205652"},"Children":[{"ID":"20240409205652-p3pm31d","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409205652-p3pm31d","updated":"20240409205652"},"Children":[{"ID":"20240409205652-hsgnke2","Type":"NodeParagraph","Properties":{"id":"20240409205652-hsgnke2","updated":"20240409205652"},"Children":[{"Type":"NodeText","Data":"所有整数类型，浮点类型，布尔类型，字符类型。"}]}]},{"ID":"20240409205652-z5431up","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409205652-z5431up","updated":"20240409205652"},"Children":[{"ID":"20240409205652-s8ky92v","Type":"NodeParagraph","Properties":{"id":"20240409205652-s8ky92v","updated":"20240409205652"},"Children":[{"Type":"NodeText","Data":"元组中，当且仅当其包含的类型都实现了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Copy"},{"Type":"NodeText","Data":"​, 如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"(i32, i64)"},{"Type":"NodeText","Data":"​ 实现了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Copy"},{"Type":"NodeText","Data":"​, 但 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"(i32, String)"},{"Type":"NodeText","Data":"​ 未实现。"}]}]}]}]}