{"ID":"20240428142304-pbxu539","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f980","id":"20240428142304-pbxu539","title":"const 泛型","type":"doc","updated":"20240428142756"},"Children":[{"ID":"20240428142600-3owegah","Type":"NodeParagraph","Properties":{"id":"20240428142600-3owegah","updated":"20240428142638"},"Children":[{"Type":"NodeText","Data":"允许在泛型参数中使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"const"},{"Type":"NodeText","Data":"​ 值和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"const"},{"Type":"NodeText","Data":"​ 表达式"}]},{"ID":"20240428142304-79h95ct","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240428142304-79h95ct","updated":"20240428142558"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"fn display_array\u003cT: std::fmt::Debug, const N: usize\u003e(arr: [T; N]) {\n    println!(\"{:?}\", arr);\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240428142619-uadlye7","Type":"NodeParagraph","Properties":{"id":"20240428142619-uadlye7","updated":"20240428142705"},"Children":[{"Type":"NodeText","Data":"该特性可用于在编译时计算和校验"}]},{"ID":"20240428142755-tze260f","Type":"NodeSuperBlock","Properties":{"id":"20240428142755-tze260f","updated":"20240428142756"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240428142706-rzetfrk","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240428142706-rzetfrk","updated":"20240428142756"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"// 目前只能在nightly版本下使用\n#![allow(incomplete_features)]\n#![feature(generic_const_exprs)]\n\nfn something\u003cT\u003e(val: T)\nwhere\n    Assert\u003c{ core::mem::size_of::\u003cT\u003e() \u003c 768 }\u003e: IsTrue,\n    //       ^-----------------------------^ 这里是一个 const 表达式\n{\n    //\n}\n\nfn main() {\n    something([0u8; 0]); // ok\n    something([0u8; 512]); // ok\n    something([0u8; 1024]); // 编译错误，数组长度是1024字节，超过了768字节的参数长度限制\n}\n\n// ---\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240428142752-ri2bgrl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240428142752-ri2bgrl","updated":"20240428142756"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"pub enum Assert\u003cconst CHECK: bool\u003e {\n    //\n}\n\npub trait IsTrue {\n    //\n}\n\nimpl IsTrue for Assert\u003ctrue\u003e {\n    //\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]}]}