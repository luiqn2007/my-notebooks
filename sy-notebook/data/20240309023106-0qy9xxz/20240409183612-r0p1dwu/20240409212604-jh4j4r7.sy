{"ID":"20240409212604-jh4j4r7","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f980","id":"20240409212604-jh4j4r7","title":"测试","type":"doc","updated":"20240409212826"},"Children":[{"ID":"20240409212604-dy2auhe","Type":"NodeParagraph","Properties":{"id":"20240409212604-dy2auhe","updated":"20240409212612"},"Children":[{"Type":"NodeText","Data":"Rust 提供一系列用于编写测试的功能，包括 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"test"},{"Type":"NodeText","Data":"​ 属性，一些宏和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"should_panic"},{"Type":"NodeText","Data":"​ 属性"}]},{"ID":"20240409212619-o9akii2","Type":"NodeParagraph","Properties":{"id":"20240409212619-o9akii2","updated":"20240409212619"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo new"},{"Type":"NodeText","Data":"​ 创建的项目会自动生成一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"tests"},{"Type":"NodeText","Data":"​ module，为测试函数的样板。"}]},{"ID":"20240409212820-ydkmusw","Type":"NodeParagraph","Properties":{"id":"20240409212820-ydkmusw","updated":"20240409212820"},"Children":[{"Type":"NodeText","Data":"一个测试函数应当以 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"#[test]"},{"Type":"NodeText","Data":"​ 属性注释，之后可通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo test"},{"Type":"NodeText","Data":"​ 运行测试"}]},{"ID":"20240409212626-m3osqm8","Type":"NodeParagraph","Properties":{"id":"20240409212626-m3osqm8","updated":"20240409212826"},"Children":[{"Type":"NodeText","Data":"当测试不通过应触发 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"panic"},{"Type":"NodeText","Data":"​ 即可，Rust 提供了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"assert!"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"assert_eq!"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"assert_ne!"},{"Type":"NodeText","Data":"​ 宏用来进行比较。"}]},{"ID":"20240409212619-68cx3os","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409212619-68cx3os","updated":"20240409212619"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"#[test]\nfn a_test_method() {\n   // do something\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409212804-wfnv2nn","Type":"NodeParagraph","Properties":{"id":"20240409212804-wfnv2nn","updated":"20240409212810"},"Children":[{"Type":"NodeText","Data":"若测试触发 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"panic"},{"Type":"NodeText","Data":"​ 表示通过，需要对方法使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"#[should_panic]"},{"Type":"NodeText","Data":"​ 属性。"}]},{"ID":"20240409212626-e6ajsve","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409212626-e6ajsve","updated":"20240409212626"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"#[test]\n#[should_panic]\nfn a_test_method() {\n   // do something\n   panic!(\"Test pass\");\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409212637-26dzjlo","Type":"NodeParagraph","Properties":{"id":"20240409212637-26dzjlo","updated":"20240409212637"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo test"},{"Type":"NodeText","Data":"​ 启动测试，Cargo 测试也有若干参数"}]},{"ID":"20240409212637-9ms2z68","Type":"NodeTable","TableAligns":[2,1],"Properties":{"colgroup":"|","id":"20240409212637-9ms2z68","updated":"20240409212637"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"属性"}]},{"Type":"NodeTableCell","Data":"th","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"说明"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--test-threads=n"},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"使用 n 个线程并行测试"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--nocapture"},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"显示 print 和 println 的输出"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"method_name"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"运行特定测试，所有测试方法中以 method_name 开头的方法"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"--ignored"},{"Type":"NodeText","Data":"​"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":1,"Children":[{"Type":"NodeText","Data":"不执行有 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"#[ignore]"},{"Type":"NodeText","Data":"​ 属性的测试方法"}]}]}]},{"ID":"20240409212639-jv59ib5","Type":"NodeParagraph","Properties":{"id":"20240409212639-jv59ib5","updated":"20240409212724"},"Children":[{"Type":"NodeText","Data":"以 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"#[cfg(test)]"},{"Type":"NodeText","Data":"​ 注解的模块表示该模块只有在执行 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo test"},{"Type":"NodeText","Data":"​ 时才编译和运行的代码，而 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo build"},{"Type":"NodeText","Data":"​ 时不运行。"}]},{"ID":"20240409212726-r0yt6c6","Type":"NodeParagraph","Properties":{"id":"20240409212726-r0yt6c6","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240409212732"},"Children":[{"Type":"NodeText","Data":"在测试函数中允许使用私有函数，即测试代码可以测试私有函数。"}]},{"ID":"20240409212648-ykfjtui","Type":"NodeParagraph","Properties":{"id":"20240409212648-ykfjtui","updated":"20240409212648"},"Children":[{"Type":"NodeText","Data":"集成测试用于测试库的共有 API，其对于项目来说是一个独立库。集成测试代码位于 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"tests"},{"Type":"NodeText","Data":"​ 文件夹中，该文件夹与 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"src"},{"Type":"NodeText","Data":"​ 同级。"}]},{"ID":"20240409212648-itu287d","Type":"NodeParagraph","Properties":{"id":"20240409212648-itu287d","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240409212659"},"Children":[{"Type":"NodeText","Data":"不需要在 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"tests"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 中使用 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"#[cfg(test)]"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​，Cargo 可自动识别只有在 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"cargo test"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 时运行。"}]},{"ID":"20240409212700-tshj9by","Type":"NodeParagraph","Properties":{"id":"20240409212700-tshj9by"}}]}