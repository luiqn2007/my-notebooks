{"ID":"20240409213526-h4dxy92","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f980","id":"20240409213526-h4dxy92","title":"String","type":"doc","updated":"20240428124508"},"Children":[{"ID":"20240409213536-m9ra1cb","Type":"NodeParagraph","Properties":{"id":"20240409213536-m9ra1cb","updated":"20240409213536"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"String"},{"Type":"NodeText","Data":"​ 是 Rust 标准库提供的 UTF-8 可变字符串结构。"}]},{"ID":"20240409213536-7gvi076","Type":"NodeParagraph","Properties":{"id":"20240409213536-7gvi076","updated":"20240427191932"},"Children":[{"Type":"NodeText","Data":"在 Rust Core 中，字符串只有一种类型 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"str"},{"Type":"NodeText","Data":"​, 它常以引用的形式 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;str"},{"Type":"NodeText","Data":"​ 出现，因此我们常提到的字符串包含了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"String"},{"Type":"NodeText","Data":"​ 类型和切片 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;str"},{"Type":"NodeText","Data":"​ 类型。"}]},{"ID":"20240409213536-9zmz3vs","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409213536-9zmz3vs","updated":"20240409213536"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"let a = \"123\"; // \u0026str\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240428120450-hy77ju9","Type":"NodeBlockquote","Properties":{"id":"20240428120450-hy77ju9","updated":"20240428120507"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20240428120507-d321r96","Type":"NodeParagraph","Properties":{"id":"20240428120507-d321r96","updated":"20240428120507"},"Children":[{"Type":"NodeText","Data":"Rust 还存在其他一系列字符串类型，如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"OsString"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"OsStr"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"CString"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"CStr"},{"Type":"NodeText","Data":"​ 等，用的不多。其他 Crate 也提供了更多字符串类型。"}]},{"ID":"20240428120507-a3b4wai","Type":"NodeList","ListData":{},"Properties":{"id":"20240428120507-a3b4wai","updated":"20240428120507"},"Children":[{"ID":"20240428120507-j0yg5fy","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240428120507-j0yg5fy","updated":"20240428120507"},"Children":[{"ID":"20240428120507-uei7q78","Type":"NodeParagraph","Properties":{"id":"20240428120507-uei7q78","updated":"20240428120507"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"OsString"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"OsStr"},{"Type":"NodeText","Data":"​ 主要为了解决 Windows API 使用未经检查的 UTF16 编码，而 Rust 则使用 UTF8 编码，为了保证转换不出错而设置的"}]}]},{"ID":"20240428120507-r8bhw0t","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240428120507-r8bhw0t","updated":"20240428120507"},"Children":[{"ID":"20240428120507-yn4jgmv","Type":"NodeParagraph","Properties":{"id":"20240428120507-yn4jgmv","updated":"20240428120507"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"CString"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"CStr"},{"Type":"NodeText","Data":"​ 主要为了兼容 C 库中使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'\\0'"},{"Type":"NodeText","Data":"​ 结尾的字符串而设计，Rust 核心中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"str"},{"Type":"NodeText","Data":"​ 类型本身保存长度因此不需要 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'\\0'"},{"Type":"NodeText","Data":"​"}]}]}]}]},{"ID":"20240409213536-la21q9t","Type":"NodeParagraph","Properties":{"id":"20240409213536-la21q9t","updated":"20240409213536"},"Children":[{"Type":"NodeText","Data":"String 类型可以通过以下几个方法创建："}]},{"ID":"20240409213536-jolbo99","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409213536-jolbo99","updated":"20240409213536"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"fn main() {\n    let str1 = \"hello\".to_string(); // 通过 \u0026str 创建\n    let str2 = String::new(); // 空字符串\n    let str3 = String::from(\"hello\"); \n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409213536-7o2de84","Type":"NodeParagraph","Properties":{"id":"20240409213536-7o2de84","updated":"20240409213536"},"Children":[{"Type":"NodeText","Data":"可通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"push"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"push_str"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"add"},{"Type":"NodeText","Data":"​/"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"+"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"format!"},{"Type":"NodeText","Data":"​ 连接字符串"}]},{"ID":"20240409213536-txiqpm7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409213536-txiqpm7","updated":"20240409213536"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"fn main() {\n    // \"\"\n    let mut str = String::new();\n    // \"Hello\"\n    str.push_str(\"Hello\");\n    // \"Hello!\"\n    str.push('!');\n    // \"Hello!~~~\"\n    let str2 = str + \"~~~\"; // String::add\n    // \"Hello!~~~, !!!\"\n    let str3 = format!(\"{}, {}\", str2, \"!!!\");\n\n    assert_eq!(str3, \"Hello!~~~, !!!\")\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409213536-vwq137y","Type":"NodeParagraph","Properties":{"id":"20240409213536-vwq137y","updated":"20240409213536"},"Children":[{"Type":"NodeText","Data":"字符串切片和长度都是字节长度，其长度不一定是字符串字符个数"}]},{"ID":"20240428120945-0fygtgg","Type":"NodeParagraph","Properties":{"id":"20240428120945-0fygtgg","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240428124508"},"Children":[{"Type":"NodeText","Data":"因此对字符串取切片时，起止点必须落在字符边界位置，可使用 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"String::chars()"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 获取所有字符"}]},{"ID":"20240409213536-ttuuuys","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409213536-ttuuuys","updated":"20240428124441"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"fn main() {\n    let str = \"你好！\";\n    // len=9\n    println!(\"len={}\", str.len());\n    // 0..3=你\n    println!(\"0..3={}\", \u0026str[0..3]);\n    // thread 'main' panicked at 'byte index 1 is not a char boundary; it is inside '你' (bytes 0..3) of `你好！`', src\\main.rs:5:26\n    // UTF-8 中，一个汉字使用三个字节表示\n    println!(\"0..1={}\", \u0026str[0..1]);\n    for x in str.bytes() {\n        // 228, 189, 160, 229, 165, 189, 239, 188, 129, \n        print!(\"{}, \", x)\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240410201516-q3hqal4","Type":"NodeParagraph","Properties":{"id":"20240410201516-q3hqal4","updated":"20240428124440"},"Children":[{"Type":"NodeText","Data":"修改方法："}]},{"ID":"20240428124253-yqyg7eh","Type":"NodeList","ListData":{},"Properties":{"id":"20240428124253-yqyg7eh","updated":"20240428124440"},"Children":[{"ID":"20240428124253-mbgwkf7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240428124253-mbgwkf7","updated":"20240428124253"},"Children":[{"ID":"20240428124253-ae71w67","Type":"NodeParagraph","Properties":{"id":"20240428124253-ae71w67","updated":"20240428124253"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"replace"},{"Type":"NodeText","Data":"​ 及其变形，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"push"},{"Type":"NodeText","Data":"​/"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"insert"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"pop"},{"Type":"NodeText","Data":"​/"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"remove(idx)"},{"Type":"NodeText","Data":"​/"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"truncate"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"trim"},{"Type":"NodeText","Data":"​ 等"}]}]},{"ID":"20240428124258-w7trfe5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240428124258-w7trfe5","updated":"20240428124328"},"Children":[{"ID":"20240428124258-bc3jheu","Type":"NodeParagraph","Properties":{"id":"20240428124258-bc3jheu","updated":"20240428124328"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"+"},{"Type":"NodeText","Data":"​/"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"+="},{"Type":"NodeText","Data":"​ 运算符"}]}]}]},{"ID":"20240410201538-t72yzxj","Type":"NodeParagraph","Properties":{"id":"20240410201538-t72yzxj","updated":"20240428124440"}}]}