{"ID":"20240409194427-7v57fm4","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f980","id":"20240409194427-7v57fm4","title":"Deref","type":"doc","updated":"20240409220502"},"Children":[{"ID":"20240409220502-f9ou1dq","Type":"NodeParagraph","Properties":{"id":"20240409220502-f9ou1dq","updated":"20240409220502"},"Children":[{"Type":"NodeText","Data":"智能指针允许通过解引用获取内部数据的引用"}]},{"ID":"20240409220502-8mzwnrn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409220502-8mzwnrn","updated":"20240409220502"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"fn main() {\n    let a = 5;\n    let b = \u0026a;\n    let c = Box::new(a);\n\n    assert_eq!(a, 5);\n    assert_eq!(a, *b);\n    // 智能指针解引用\n    assert_eq!(a, *c);\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409220502-eg092cb","Type":"NodeParagraph","Properties":{"id":"20240409220502-eg092cb","updated":"20240409220502"},"Children":[{"Type":"NodeText","Data":"实现 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Deref"},{"Type":"NodeText","Data":"​ 允许重载解引用运算符 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"*"},{"Type":"NodeText","Data":"​，可以将引用转换为被引用数据"}]},{"ID":"20240409220502-9u7ob67","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409220502-9u7ob67","updated":"20240409220502"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"use std::ops::Deref;\n\nstruct MyBox\u003cT\u003e(T);\n\nimpl MyBox\u003cT\u003e {\n    fn new(x: T) -\u003e MyBox\u003cT\u003e {\n        MyBox(T)\n    }\n}\n\nimpl\u003cT\u003e Deref for MyBox\u003cT\u003e {\n    type Target = T;\n\n    fn deref(\u0026self) -\u003e \u0026Self::Target {\n        \u0026self.0\n    }\n}\n\nfn main() {\n    let x = 5;\n    let y = MyBox(x);\n\n    assert_eq!(5, *y)\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409220502-gwyacir","Type":"NodeParagraph","Properties":{"id":"20240409220502-gwyacir","updated":"20240409220502"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"deref"},{"Type":"NodeText","Data":"​ 方法返回一个解引用时返回数据的引用值。实现后可通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"*"},{"Type":"NodeText","Data":"​ 将指针结构体解引用成指定数据类型 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"type Target T;"},{"Type":"NodeText","Data":"​ 定义了关联类型。\n实现了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Deref"},{"Type":"NodeText","Data":"​ 的结构作为引用参数传递时可隐式转换为对应类型的引用"}]},{"ID":"20240409220502-aa5hutd","Type":"NodeList","ListData":{},"Properties":{"id":"20240409220502-aa5hutd","updated":"20240409220502"},"Children":[{"ID":"20240409220502-7qt6zmd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409220502-7qt6zmd","updated":"20240409220502"},"Children":[{"ID":"20240409220502-buffhgh","Type":"NodeParagraph","Properties":{"id":"20240409220502-buffhgh","updated":"20240409220502"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"T: Deref\u0026lt;Target=U\u0026gt;"},{"Type":"NodeText","Data":"​: "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;T"},{"Type":"NodeText","Data":"​ -\u003e "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;U"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240409220502-z0fbhh8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409220502-z0fbhh8","updated":"20240409220502"},"Children":[{"ID":"20240409220502-7znj9t1","Type":"NodeParagraph","Properties":{"id":"20240409220502-7znj9t1","updated":"20240409220502"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"T: Deref\u0026lt;Target=U\u0026gt;"},{"Type":"NodeText","Data":"​: "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;mut T"},{"Type":"NodeText","Data":"​ -\u003e "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;U"},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20240409220502-qlhmbxv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409220502-qlhmbxv","updated":"20240409220502"},"Children":[{"ID":"20240409220502-t70ir3d","Type":"NodeParagraph","Properties":{"id":"20240409220502-t70ir3d","updated":"20240409220502"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"T: DerefMut\u0026lt;Target=U\u0026gt;"},{"Type":"NodeText","Data":"​: "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;mut T"},{"Type":"NodeText","Data":"​ -\u003e "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;mut U"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20240409220502-03i2efn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409220502-03i2efn","updated":"20240409220502"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"fn print(s: \u0026str) {\n    println!(\"{}\", s);\n}\n\nfn main() {\n    let s = MyBox(String::from(\"abc\"));\n    // \u0026MyBox\u003cString\u003e -\u003e \u0026String\n    // \u0026String -\u003e \u0026str\n    print(\u0026s);\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}