{"ID":"20240409192036-d4r9671","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f980","id":"20240409192036-d4r9671","title":"结构体方法","type":"doc","updated":"20240409192201"},"Children":[{"ID":"20240409192041-eh4clq0","Type":"NodeParagraph","Properties":{"id":"20240409192041-eh4clq0","updated":"20240409192041"},"Children":[{"Type":"NodeText","Data":"与函数类似，方法可以有参数和返回值，不同于函数的是需要在结构体上下文中定义，且第一个参数始终是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"self"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20240409192041-0eqomek","Type":"NodeParagraph","Properties":{"id":"20240409192041-0eqomek","updated":"20240409192041"},"Children":[{"Type":"NodeText","Data":"定义结构体方法需要把方法放入一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"impl"},{"Type":"NodeText","Data":"​ 块中（implementation）。方法第一个参数可以是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"self"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;self"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"*self"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026amp;mut self"},{"Type":"NodeText","Data":"​ 等。与 C 语言的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"-\u0026gt;"},{"Type":"NodeText","Data":"​ 运算符不同，Rust 在结构体变量使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"."},{"Type":"NodeText","Data":"​ 运算符时会自动根据方法推断出调用者的签名与其匹配，即 自动引用和解引用。"}]},{"ID":"20240409192041-51ynr7d","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409192041-51ynr7d","updated":"20240409192041"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"struct Rectangle {\n    width: u32,\n    height: u32\n}\n\nimpl Rectangle {\n    fn area(\u0026self) -\u003e u32 {\n        self.width * self.height\n    }\n}\n\nfn main() {\n    let rect = Rectangle { width: 30, height: 50 };\n    // The area of the rectangle is 1500 square pixels.\n    println!(\"The area of the rectangle is {} square pixels.\", rect.area());\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409192157-7xviccl","Type":"NodeParagraph","Properties":{"id":"20240409192157-7xviccl","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240409192200"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"impl"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 块可以有多个。"}]},{"ID":"20240409192041-tqwj4qy","Type":"NodeParagraph","Properties":{"id":"20240409192041-tqwj4qy","updated":"20240409192158"},"Children":[{"Type":"NodeText","Data":"在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"impl"},{"Type":"NodeText","Data":"​ 块中定义的且不以 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"self"},{"Type":"NodeText","Data":"​ 为第一参数的函数称为关联函数。通常这些函数用作结构体的构造函数，如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"String::from"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20240409192041-4mo4cqn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409192041-4mo4cqn","updated":"20240409192041"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"impl Rectangle {\n    fn square(size: u32) -\u003e Rectangle {\n        Rectangle { width: size, height: size }\n    }\n}\n\nfn main() {\n    let square = Rectangle::square(20);\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409192201-44dgb3s","Type":"NodeParagraph","Properties":{"id":"20240409192201-44dgb3s"}}]}