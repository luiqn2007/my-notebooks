{"ID":"20240409204547-0xqtv0q","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f980","id":"20240409204547-0xqtv0q","title":"生命周期","type":"doc","updated":"20240428161325"},"Children":[{"ID":"20240409204547-m9onwm1","Type":"NodeParagraph","Properties":{"id":"20240409204547-m9onwm1","updated":"20240409205603"},"Children":[{"Type":"NodeText","Data":"Rust 的每个变量都有其生命周期，通过生命周期注释指定。"}]},{"ID":"20240409204852-dewbq2d","Type":"NodeParagraph","Properties":{"id":"20240409204852-dewbq2d","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240412210622"},"Children":[{"Type":"NodeText","Data":"生命周期注解：向编译器提供引用如何关联泛型，允许编译器在很多情况下判断引用值的有效性，用于方法和结构体"}]},{"ID":"20240409204908-6bjw3xx","Type":"NodeParagraph","Properties":{"id":"20240409204908-6bjw3xx","updated":"20240412210619"},"Children":[{"Type":"NodeText","Data":"生命周期注解使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'"},{"Type":"NodeText","Data":"​ 标记，不改变引用的生命周期，仅仅是标记了某些引用的生命周期，使编译器可以检查使用的引用是否符合。"}]},{"ID":"20240409204908-cpiceg8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409204908-cpiceg8","updated":"20240428153900"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"fn main() {\n    // 引用变量上的生命周期\n    let a = 0;\n    let a1: \u0026'a i32 = \u0026a;\n    let a2: \u0026'a mut i32 = \n\n    // VV\n    println!(\"{}\", largest(\"A\", \"VV\"));\n}\n\nfn largest\u003c'a\u003e(a: \u0026'a str, b: \u0026'a str) -\u003e \u0026'a str {\n    if a.len() \u003e b.len() {\n        a\n    } else {\n        b\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409204908-a1t403t","Type":"NodeParagraph","Properties":{"id":"20240409204908-a1t403t","updated":"20240428153947"},"Children":[{"Type":"NodeText","Data":"在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"largest"},{"Type":"NodeText","Data":"​ 函数中，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"\u0026lt;'a\u0026gt;"},{"Type":"NodeText","Data":"​ 表示一个生命周期，在函数中表示 a b 以及返回值三个引用包含相同的生命周期"}]},{"ID":"20240409204908-haj1ual","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409204908-haj1ual","updated":"20240409204908"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"fn first_word(s: \u0026str) -\u003e \u0026str {\n    s[0..1]\n}\n\n// 等效于\nfn first_word2\u003c'a\u003e(s: \u0026'a str) -\u003e \u0026'a str {\n    s[0..1]\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240428133713-wbr4j71","Type":"NodeParagraph","Properties":{"id":"20240428133713-wbr4j71","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240428133715"},"Children":[{"Type":"NodeText","Data":"若要在结构体中使用引用需要指定生命周期，在结构体中存储一个引用而不指定生命周期将是无效的。"}]},{"ID":"20240428133713-9q2b2zr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240428133713-9q2b2zr","updated":"20240428133713"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"struct User {\n    //   |\n    // 2 |     username: \u0026str,\n    //   |               ^ expected named lifetime parameter\n    //   |\n    // help: consider introducing a named lifetime parameter\n    //   |\n    // 1 ~ struct User\u003c'a\u003e {\n    // 2 ~     username: \u0026'a str,\n    //   |\n    username: \u0026str,\n    email: \u0026str,\n    sign_in_count: i64,\n    active: bool,\n}\n\nfn main() {\n    let user = User {\n        username: \"a_user\",\n        email: \"u@email.com\",\n        sign_in_count: 1,\n        active: false\n    };\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240428154039-ztw7nec","Type":"NodeParagraph","Properties":{"id":"20240428154039-ztw7nec"}}]}