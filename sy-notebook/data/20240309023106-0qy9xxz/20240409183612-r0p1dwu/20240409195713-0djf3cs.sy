{"ID":"20240409195713-0djf3cs","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f980","id":"20240409195713-0djf3cs","title":"宏","type":"doc","updated":"20240427173347"},"Children":[{"ID":"20240409195720-prfvqdx","Type":"NodeParagraph","Properties":{"id":"20240409195720-prfvqdx","updated":"20240427172841"},"Children":[{"Type":"NodeText","Data":"宏 Macro 是 Rust 提供的一系列功能。"}]},{"ID":"20240427172238-ojwqt1q","Type":"NodeParagraph","Properties":{"id":"20240427172238-ojwqt1q","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240427172742"},"Children":[{"Type":"NodeText","Data":"从根本上说宏是为写其他代码而写代码的方式，即元编程。"}]},{"ID":"20240409195720-5qix7my","Type":"NodeList","ListData":{},"Properties":{"id":"20240409195720-5qix7my","updated":"20240427172830"},"Children":[{"ID":"20240409195720-3qdp45q","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409195720-3qdp45q","updated":"20240427172808"},"Children":[{"ID":"20240409195720-31tl8xo","Type":"NodeParagraph","Properties":{"id":"20240409195720-31tl8xo","updated":"20240427172808"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"macro_rules!"},{"Type":"NodeText","Data":"​ 的"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240427172033-l19l85c","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"声明宏"}]}]},{"ID":"20240409195720-vb35cqh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409195720-vb35cqh","updated":"20240427172819"},"Children":[{"ID":"20240409195720-u7d042a","Type":"NodeParagraph","Properties":{"id":"20240409195720-u7d042a","updated":"20240427172819"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240427172442-8t8a0rd","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"自定义"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"#[derive]"},{"Type":"NodeText","Data":"​ 宏在结构体和枚举上指定通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"derive"},{"Type":"NodeText","Data":"​ 属性添加的代码"}]}]},{"ID":"20240409195720-07dp5wo","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409195720-07dp5wo","updated":"20240427172827"},"Children":[{"ID":"20240409195720-w1rkvyf","Type":"NodeParagraph","Properties":{"id":"20240409195720-w1rkvyf","updated":"20240427172827"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240427172619-4r1ywqk","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"类属性宏"},{"Type":"NodeText","Data":"定义用于任意项目的自定义属性"}]}]},{"ID":"20240409195720-lubkqp7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409195720-lubkqp7","updated":"20240427172830"},"Children":[{"ID":"20240409195720-s4zgjqm","Type":"NodeParagraph","Properties":{"id":"20240409195720-s4zgjqm","updated":"20240427172830"},"Children":[{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240427172708-y93jwrw","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"类函数宏"},{"Type":"NodeText","Data":"类似函数，但作用于作为参数传递的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"token"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20240409195720-4q658zj","Type":"NodeParagraph","Properties":{"id":"20240409195720-4q658zj","updated":"20240409195720"},"Children":[{"Type":"NodeText","Data":"元编程可用于减少大量代码编写和维护代码，在某些位置也扮演了函数的作用。其与函数的差异在于"}]},{"ID":"20240409195720-pbesoew","Type":"NodeList","ListData":{},"Properties":{"id":"20240409195720-pbesoew","updated":"20240409195720"},"Children":[{"ID":"20240409195720-z1stsa3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409195720-z1stsa3","updated":"20240409195720"},"Children":[{"ID":"20240409195720-wxlwbno","Type":"NodeParagraph","Properties":{"id":"20240409195720-wxlwbno","updated":"20240409195720"},"Children":[{"Type":"NodeText","Data":"函数必须声明固定的参数列表和返回值，宏则可以接受不同数量的参数"}]}]},{"ID":"20240409195720-q84op7c","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409195720-q84op7c","updated":"20240409195720"},"Children":[{"ID":"20240409195720-cu2pg4l","Type":"NodeParagraph","Properties":{"id":"20240409195720-cu2pg4l","updated":"20240409195720"},"Children":[{"Type":"NodeText","Data":"宏可以在编译器翻译代码之前展开，如给一个给定类型实现 trait 等"}]}]},{"ID":"20240409195720-t0i4kx8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409195720-t0i4kx8","updated":"20240409195720"},"Children":[{"ID":"20240409195720-cmiizzb","Type":"NodeParagraph","Properties":{"id":"20240409195720-cmiizzb","updated":"20240409195720"},"Children":[{"Type":"NodeText","Data":"实现宏比函数更复杂，因为要间接生成代码，因此比直接写代码更加复杂 更难阅读"}]}]},{"ID":"20240409195720-nr0uyol","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240409195720-nr0uyol","updated":"20240409195720"},"Children":[{"ID":"20240409195720-szklpg0","Type":"NodeParagraph","Properties":{"id":"20240409195720-szklpg0","updated":"20240409195720"},"Children":[{"Type":"NodeText","Data":"在文件中调用宏之前必须定义或引用它，而函数则可以在任何地方定义和调用"}]}]}]},{"ID":"20240427173016-lshthcf","Type":"NodeParagraph","Properties":{"id":"20240427173016-lshthcf","updated":"20240427173033"},"Children":[{"Type":"NodeText","Data":"Rust 存在很多自定义宏，用于实现不同功能"}]},{"ID":"20240427173041-4qbbou5","Type":"NodeList","ListData":{},"Properties":{"id":"20240427173041-4qbbou5","updated":"20240427173347"},"Children":[{"ID":"20240427173042-85donxx","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240427173042-85donxx","updated":"20240427173042"},"Children":[{"ID":"20240427173042-x3dsvex","Type":"NodeParagraph","Properties":{"id":"20240427173042-x3dsvex","updated":"20240427173132"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"std::fmt"},{"Type":"NodeText","Data":"​ 中定义了很多"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240422120659-0a1qc7p","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"用于格式化文本和输出的宏"}]}]},{"ID":"20240427173133-twtr098","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240427173133-twtr098","updated":"20240427173347"},"Children":[{"ID":"20240427173133-if3l1l1","Type":"NodeParagraph","Properties":{"id":"20240427173133-if3l1l1","updated":"20240427173347"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code block-ref","TextMarkBlockRefID":"20240427172959-lhgeard","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"cfg!"},{"Type":"NodeText","Data":"​ 宏可以仅在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"debug"},{"Type":"NodeText","Data":"​ 模式下执行判断"}]}]}]}]}