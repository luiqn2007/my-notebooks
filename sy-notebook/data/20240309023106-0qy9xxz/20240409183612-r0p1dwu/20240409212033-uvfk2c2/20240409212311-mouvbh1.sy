{"ID":"20240409212311-mouvbh1","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f980","id":"20240409212311-mouvbh1","title":"Workspace","type":"doc","updated":"20240409212338"},"Children":[{"ID":"20240409212319-xtgmlt0","Type":"NodeParagraph","Properties":{"id":"20240409212319-xtgmlt0","updated":"20240409212319"},"Children":[{"Type":"NodeText","Data":"当项目持续增大，一个库 Crate 不断增大，可以将一个 Crate 再拆分为多个 Crate，此时可在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Cargo.toml"},{"Type":"NodeText","Data":"​ 中进行配置"}]},{"ID":"20240409212319-0wif6sc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409212319-0wif6sc","updated":"20240409212319"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"dG9tbA=="},{"Type":"NodeCodeBlockCode","Data":"[workspace]\nmembers = [\n    'test_crate'\n]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409212319-mqw4bte","Type":"NodeParagraph","Properties":{"id":"20240409212319-mqw4bte","updated":"20240409212319"},"Children":[{"Type":"NodeText","Data":"之后，在项目目录中新建 Crate:"}]},{"ID":"20240409212319-ueztvg5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409212319-ueztvg5","updated":"20240409212319"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cargo new test_crate\n# Created binary (application) `test_crate` package\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409212319-t3zanis","Type":"NodeParagraph","Properties":{"id":"20240409212319-t3zanis","updated":"20240409212319"},"Children":[{"Type":"NodeText","Data":"此时，项目目录中已经存在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"test_crate"},{"Type":"NodeText","Data":"​ 目录及对应的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"src"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Cargo.toml"},{"Type":"NodeText","Data":"​ 文件，但没有 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Cargo.lock"},{"Type":"NodeText","Data":"​ 文件。在主项目中添加对应依赖则使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"path"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240409212319-bqvovj5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409212319-bqvovj5","updated":"20240409212319"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"dG9tbA=="},{"Type":"NodeCodeBlockCode","Data":"[dependencies]\ntest_crate = { path='./test_crate' }\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240409212319-thjf0rd","Type":"NodeParagraph","Properties":{"id":"20240409212319-thjf0rd","updated":"20240409212319"},"Children":[{"Type":"NodeText","Data":"之后运行时，需要指定依赖的二进制包 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo run -p test_crate"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20240409212319-18d6rmi","Type":"NodeParagraph","Properties":{"id":"20240409212319-18d6rmi","updated":"20240409212319"},"Children":[{"Type":"NodeText","Data":"同一个工作空间中只存在一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Cargo.lock"},{"Type":"NodeText","Data":"​，也就是说只存在一份依赖列表，保证了使用的依赖版本一致性。但子 Crate 之间依赖并不共享，顶级 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Cargo.toml"},{"Type":"NodeText","Data":"​ 指定的依赖则可被所有子 Cargo 访问"}]},{"ID":"20240409212319-yl01ui8","Type":"NodeParagraph","Properties":{"id":"20240409212319-yl01ui8","updated":"20240409212319"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo publish"},{"Type":"NodeText","Data":"​ 发布时，应将所有子 Cargo 分别发布。"}]},{"ID":"20240409212319-rsrc9x9","Type":"NodeParagraph","Properties":{"id":"20240409212319-rsrc9x9","updated":"20240409212319"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cargo test"},{"Type":"NodeText","Data":"​ 进行单元测试时，在顶级目录中运行会同时测试所有子 Crate 的测试方法。"}]},{"ID":"20240409212319-u98yep0","Type":"NodeParagraph","Properties":{"id":"20240409212319-u98yep0","updated":"20240409212338"},"Children":[{"Type":"NodeText","Data":"有关 Crate 相关可见 "},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240409212331-rhu43gl","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"Cargo"}]},{"ID":"20240409212321-p9n1qot","Type":"NodeParagraph","Properties":{"id":"20240409212321-p9n1qot"}}]}