{"ID":"20240409220854-2avrafo","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f980","id":"20240409220854-2avrafo","title":"消息队列","type":"doc","updated":"20240409220941"},"Children":[{"ID":"20240409220930-u7mobiz","Type":"NodeParagraph","Properties":{"id":"20240409220930-u7mobiz","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20240409220941"},"Children":[{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"inline-memo","TextMarkInlineMemoContent":"Do not communicate by sharing memory; instead, share memory by communicating.","TextMarkTextContent":"不要通过共享内存来通讯，而是通过通讯来共享内存"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"}]},{"ID":"20240409220922-m8la527","Type":"NodeSuperBlock","Properties":{"id":"20240409220922-m8la527","updated":"20240409220923"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240409220920-4df5lx4","Type":"NodeSuperBlock","Properties":{"id":"20240409220920-4df5lx4","updated":"20240409220923"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240409220907-6dvnvdk","Type":"NodeParagraph","Properties":{"id":"20240409220907-6dvnvdk","updated":"20240409220920"},"Children":[{"Type":"NodeText","Data":"通道使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mpsc::channel"},{"Type":"NodeText","Data":"​ 创建通道，每个通道可以有多个写入数据端，但只有一个读取数据端"}]},{"ID":"20240409220907-u0y1hwp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409220907-u0y1hwp","updated":"20240409220920"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"use std::sync::mpsc::channel;\nuse std::thread;\n\nfn main() {\n    let (tx, rx) = channel();\n\n    // 需要子线程闭包捕获 tx\n    thread::spawn(move || {\n        tx.send(String::from(\"Hi\")).unwrap();\n    });\n\n    let received = rx.recv().unwrap();\n    println!(\"Get {}\", received)\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240409220916-rvhxxy3","Type":"NodeSuperBlock","Properties":{"id":"20240409220916-rvhxxy3","updated":"20240409220923"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"row"},{"ID":"20240409220907-vn3k9lc","Type":"NodeParagraph","Properties":{"id":"20240409220907-vn3k9lc","updated":"20240409220920"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"clone()"},{"Type":"NodeText","Data":"​ 创建多个发送者"}]},{"ID":"20240409220907-zz045zj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240409220907-zz045zj","updated":"20240409220920"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"use std::sync::mpsc::channel;\nuse std::thread;\n\nfn main() {\n    let (tx, rx) = channel();\n\n    let tx1 = tx.clone();\n    thread::spawn(move || {\n        tx1.send(String::from(\"Hi\")).unwrap();\n    });\n\n    thread::spawn(move || {\n        tx.send(String::from(\"Hello\")).unwrap();\n    });\n\n    for received in rx {\n        println!(\"Get {}\", received)\n    }\n}\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"Type":"NodeSuperBlockCloseMarker"}]}]}