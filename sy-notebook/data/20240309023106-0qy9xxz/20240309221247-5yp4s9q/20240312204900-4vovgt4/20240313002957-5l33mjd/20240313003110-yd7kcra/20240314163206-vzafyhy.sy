{"ID":"20240314163206-vzafyhy","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f921","id":"20240314163206-vzafyhy","title":"try-catch-finally 实现原理","updated":"20240314180011"},"Children":[{"ID":"20240314175130-ku5o3os","Type":"NodeSuperBlock","Properties":{"id":"20240314175130-ku5o3os","updated":"20240314175402"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240314163206-nhkrdwd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240314163206-nhkrdwd","updated":"20240314175147"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public void test() {\n    try {\n        tryItOut();\n    } catch (RuntimeException e) {\n        handleException(e);\n    } finally {\n        handleFinally();\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240314175126-hqnpgoh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240314175126-hqnpgoh","updated":"20240314175402"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"// 等价实现\npublic void test() {\n    try {\n        tryItOut();\n        handleFinally();\n    } catch (RuntimeException e) {\n        try {\n            handleException(e);\n            handleFinally();\n        } catch (Throwable ee) {\n            handleFinally();\n            throw ee;\n        }\n    } catch (Throwable e) {\n        handleFinally();\n        throw e\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240314163935-4rfv1bp","Type":"NodeParagraph","Properties":{"id":"20240314163935-4rfv1bp","updated":"20240314163946"},"Children":[{"Type":"NodeTextMark","TextMarkType":"text","TextMarkTextContent":"🤡"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240313003110-yd7kcra","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"字节码指令"},{"Type":"NodeText","Data":"执行过程如下："}]},{"ID":"20240314164053-mt1i28y","Type":"NodeWidget","Data":"\u003ciframe src=\"/widgets/widget-excalidraw\" data-src=\"/widgets/widget-excalidraw\" data-subtype=\"widget\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" style=\"width: 977px; height: 873px;\"\u003e\u003c/iframe\u003e","Properties":{"custom-data-assets":"assets/widget-excalidraw/0-20240314175113-jtnvud2","custom-options":"\u0026#123;\u0026quot;gridModeEnabled\u0026quot;:true,\u0026quot;exportBackground\u0026quot;:true,\u0026quot;theme\u0026quot;:\u0026quot;light\u0026quot;\u0026#125;","data-assets":"assets/widget-excalidraw/0-20240314175113-jtnvud2","id":"20240314164053-mt1i28y","options":"\u0026#123;\u0026quot;gridModeEnabled\u0026quot;:true,\u0026quot;exportBackground\u0026quot;:true,\u0026quot;theme\u0026quot;:\u0026quot;light\u0026quot;\u0026#125;","updated":"20240314164053"}},{"ID":"20240314171421-0q1t3zj","Type":"NodeParagraph","Properties":{"id":"20240314171421-0q1t3zj","updated":"20240314175509"},"Children":[{"Type":"NodeText","Data":"结论："}]},{"ID":"20240314175528-h5279n1","Type":"NodeList","ListData":{},"Properties":{"id":"20240314175528-h5279n1","updated":"20240314180011"},"Children":[{"ID":"20240314175904-k92bxo2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240314175904-k92bxo2","updated":"20240314175928"},"Children":[{"ID":"20240314175904-3nrkrrv","Type":"NodeParagraph","Properties":{"id":"20240314175904-3nrkrrv","updated":"20240314175923"},"Children":[{"Type":"NodeText","Data":"产生异常时，跳转地址通过查询异常表获取"}]}]},{"ID":"20240314175529-uftmabl","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240314175529-uftmabl","updated":"20240314175936"},"Children":[{"ID":"20240314175529-dx5liy3","Type":"NodeParagraph","Properties":{"id":"20240314175529-dx5liy3","updated":"20240314175529"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"finally"},{"Type":"NodeText","Data":"​ 块代码是直接插入到每个分支，而不是通过跳转实现的"}]}]},{"ID":"20240314175532-kqbyde1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240314175532-kqbyde1","updated":"20240314180011"},"Children":[{"ID":"20240314175532-580kdij","Type":"NodeParagraph","Properties":{"id":"20240314175532-580kdij","updated":"20240314180011"},"Children":[{"Type":"NodeText","Data":"使用的局部变量表比 Class 文件记录的变量表多 1（第 24 条指令），用于直接抛出异常"}]}]},{"ID":"20240314175627-052kgi6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240314175627-052kgi6"},"Children":[{"ID":"20240314175627-ba5iii9","Type":"NodeParagraph","Properties":{"id":"20240314175627-ba5iii9","updated":"20240314175745"},"Children":[{"Type":"NodeText","Data":"产生异常时，虚拟机自动将异常信息对象（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Throwable"},{"Type":"NodeText","Data":"​）入栈，跳转到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"catch"},{"Type":"NodeText","Data":"​ 分支时栈顶元素为异常信息"}]}]}]},{"ID":"20240314175708-6vfhffw","Type":"NodeParagraph","Properties":{"id":"20240314175708-6vfhffw"}}]}