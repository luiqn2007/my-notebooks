{"ID":"20240314172637-gn27vl6","Spec":"1","Type":"NodeDocument","Properties":{"icon":"1f921","id":"20240314172637-gn27vl6","title":"含 return 的 finally 字节码原理","updated":"20240314225946"},"Children":[{"ID":"20240314214319-12pbpiy","Type":"NodeSuperBlock","Properties":{"id":"20240314214319-12pbpiy","updated":"20240314215742"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240314214319-b9fgxhx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240314214319-b9fgxhx","updated":"20240314215742"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public static int test() {\n    int i = 100;\n    try {\n        return i;\n    } finally {\n        ++i;\n    }\n}"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240314214319-xz8nji4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240314214319-xz8nji4","updated":"20240314215449"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"// 等价实现\npublic void test() {\n    try {\n        tryItOut();\n        handleFinally();\n    } catch (RuntimeException e) {\n        try {\n            handleException(e);\n            handleFinally();\n        } catch (Throwable ee) {\n            handleFinally();\n            throw ee;\n        }\n    } catch (Throwable e) {\n        handleFinally();\n        throw e\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240314214319-w1nuhu2","Type":"NodeParagraph","Properties":{"id":"20240314214319-w1nuhu2","updated":"20240314225411"},"Children":[{"Type":"NodeText","Data":"执行过程如下："}]},{"ID":"20240314215747-7l9ij7e","Type":"NodeWidget","Data":"\u003ciframe src=\"/widgets/widget-excalidraw\" data-src=\"/widgets/widget-excalidraw\" data-subtype=\"widget\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" style=\"width: 977px; height: 262px;\"\u003e\u003c/iframe\u003e","Properties":{"custom-data-assets":"assets/widget-excalidraw/0-20240314232000-7zqcmj7","custom-options":"\u0026#123;\u0026quot;gridModeEnabled\u0026quot;:true,\u0026quot;exportBackground\u0026quot;:true,\u0026quot;theme\u0026quot;:\u0026quot;light\u0026quot;\u0026#125;","data-assets":"assets/widget-excalidraw/0-20240314232000-7zqcmj7","id":"20240314215747-7l9ij7e","options":"\u0026#123;\u0026quot;gridModeEnabled\u0026quot;:true,\u0026quot;exportBackground\u0026quot;:true,\u0026quot;theme\u0026quot;:\u0026quot;light\u0026quot;\u0026#125;","updated":"20240314215747"}},{"ID":"20240314224244-fiph05n","Type":"NodeParagraph","Properties":{"id":"20240314224244-fiph05n","updated":"20240314225607"},"Children":[{"Type":"NodeText","Data":"结论：与"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20240314163206-vzafyhy","TextMarkBlockRefSubtype":"s","TextMarkTextContent":"普通的 try-catch 块相比"},{"Type":"NodeText","Data":"，虚拟机在进入 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"finally"},{"Type":"NodeText","Data":"​ 块前将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"return"},{"Type":"NodeText","Data":"​ 结果进行缓存，因此 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"finally"},{"Type":"NodeText","Data":"​ 块不影响返回值。"}]}]}