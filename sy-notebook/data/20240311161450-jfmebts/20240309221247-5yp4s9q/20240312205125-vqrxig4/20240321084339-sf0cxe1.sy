{"ID":"20240321084339-sf0cxe1","Spec":"1","Type":"NodeDocument","Properties":{"icon":"jclasslib256x256.png","id":"20240321084339-sf0cxe1","title":"自定义 ClassLoader 加载加密后的 class","type":"doc","updated":"20240321084427"},"Children":[{"ID":"20240321084408-apwwned","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240321084408-apwwned","updated":"20240321084408"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"public class MyCustomClassLoader extends ClassLoader {\n\n    @Override\n    protected Class\u003c?\u003e findClass(String name) throws ClassNotFoundException {\n        byte[] bytes = getClassFileBytes(name);\n        return defineClass(name, bytes, 0, bytes.length);\n    }\n  \n    private static byte[] getClassFileBytes(String fileName) {\n        try {\n            byte[] bytes = Files.readAllBytes(new File(fileName).toPath());\n      \n            // 解密 class 字节码\n            // do something\n      \n            return bytes;\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}