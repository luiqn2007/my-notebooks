{"ID":"20240317124236-5fwy98d","Spec":"1","Type":"NodeDocument","Properties":{"icon":"jclasslib256x256.png","id":"20240317124236-5fwy98d","title":"javac desugar","type":"doc","updated":"20240317134302"},"Children":[{"ID":"20240317124236-xprlhep","Type":"NodeParagraph","Properties":{"id":"20240317124236-xprlhep","updated":"20240317125503"},"Children":[{"Type":"NodeText","Data":"该步骤用于解"},{"Type":"NodeTextMark","TextMarkType":"inline-memo","TextMarkInlineMemoContent":"泛型、内部类、try-with-resources、for-each、自动拆装箱、字符串和枚举的 switch、++、--、变长参数等","TextMarkTextContent":"语法糖"}]},{"ID":"20240317124617-l008j72","Type":"NodeParagraph","Properties":{"id":"20240317124617-l008j72","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240317124723"},"Children":[{"Type":"NodeText","Data":"泛型擦除和根据泛型的类型转换由 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"com.sun.tools.javac.comp.TransTypes"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 完成"}]},{"ID":"20240317125212-znel7rz","Type":"NodeSuperBlock","Properties":{"id":"20240317125212-znel7rz","updated":"20240317125212"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240317125010-ufu6slo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240317125010-ufu6slo","updated":"20240317125212"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"List\u003cLong\u003e idList = new ArrayList\u003c\u003e();\nidList.add(1L);\nlong firstId = idList.get(0);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240317125106-48j8mgz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240317125106-48j8mgz","updated":"20240317125212"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"List idList = new ArrayList();\nidList.add(Long.valueOf(1L));\nlong firstId = ((Long) idList.get(0)).longValue();\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240317124645-2cbyrw7","Type":"NodeParagraph","Properties":{"id":"20240317124645-2cbyrw7","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20240317124706"},"Children":[{"Type":"NodeText","Data":"除泛型外的语法糖由 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"com.sun.tools.javac.comp.Lower"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 完成"}]},{"ID":"20240317125449-eabp2xo","Type":"NodeList","ListData":{},"Properties":{"id":"20240317125449-eabp2xo","updated":"20240317125438"},"Children":[{"ID":"20240317125450-41fx69b","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240317125450-41fx69b","updated":"20240317125438"},"Children":[{"ID":"20240317125450-4ulyqyf","Type":"NodeParagraph","Properties":{"id":"20240317125450-4ulyqyf","updated":"20240317125502"},"Children":[{"Type":"NodeText","Data":"去除逻辑死代码（不可访问的 if 块等）"}]},{"ID":"20240317125443-h299gwx","Type":"NodeSuperBlock","Properties":{"id":"20240317125443-h299gwx","updated":"20240317125438"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240317124729-tecwwaa","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240317124729-tecwwaa","updated":"20240317125444"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"if (false) {\n    System.out.println(\"String #1 false\");\n} else {\n    System.out.println(\"String #2 true\");\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240317125428-try57bc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240317125428-try57bc","updated":"20240317125438"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"System.out.println(\"String #2 true\");\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]}]}]},{"ID":"20240317125532-0uak9qb","Type":"NodeList","ListData":{},"Properties":{"id":"20240317125532-0uak9qb","updated":"20240317134302"},"Children":[{"ID":"20240317125535-dfz82yg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20240317125535-dfz82yg","updated":"20240317134302"},"Children":[{"ID":"20240317125535-oda5klm","Type":"NodeParagraph","Properties":{"id":"20240317125535-oda5klm","updated":"20240317133444"},"Children":[{"Type":"NodeText","Data":"String、枚举类的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"switch"},{"Type":"NodeText","Data":"​"}]},{"ID":"20240317133624-s8evbmm","Type":"NodeSuperBlock","Properties":{"id":"20240317133624-s8evbmm","updated":"20240317133624"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240317133444-k2ysz8c","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240317133444-k2ysz8c","updated":"20240317133624"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"String s;\nswitch(s) {\n    case \"A\": ...\n    case \"B\": ...\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240317133500-ohwrl3m","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240317133500-ohwrl3m","updated":"20240317133624"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"String s;\nswitch(s.hashCode()) {\n    case \"A\".hashCode(): {\n        if (\"A\".equals(s)) ...\n    }\n    case \"B\".hashCode(): {\n        if (\"B\".equals(s)) ...\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]},{"ID":"20240317133731-by6nii8","Type":"NodeParagraph","Properties":{"id":"20240317133731-by6nii8","updated":"20240317133858"},"Children":[{"Type":"NodeText","Data":"对于枚举，编译器会生成一个中间类，维护一个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"SwitchMap"},{"Type":"NodeText","Data":"​ 数组，记录 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ordinal"},{"Type":"NodeText","Data":"​ 与递增整数序列的映射关系"}]},{"ID":"20240317134235-njca7ac","Type":"NodeParagraph","Properties":{"id":"20240317134235-njca7ac","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20240317134302"},"Children":[{"Type":"NodeText","Data":"为了提供更好的性能，"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);"},"TextMarkType":"code","TextMarkTextContent":"ordinal()"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);\"}"},{"Type":"NodeText","Data":"​ 值不一定是连续的"}]},{"ID":"20240317133634-6k8mu2b","Type":"NodeSuperBlock","Properties":{"id":"20240317133634-6k8mu2b","updated":"20240317134217"},"Children":[{"Type":"NodeSuperBlockOpenMarker"},{"Type":"NodeSuperBlockLayoutMarker","Data":"col"},{"ID":"20240317133501-lfv58bv","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240317133501-lfv58bv","updated":"20240317133714"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"enum Color { RED, BLUE }\nColor color;\nswitch (color) {\n    case RED: ...\n    case BLUE: ...\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20240317133452-vg52pw4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20240317133452-vg52pw4","updated":"20240317134217"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"class Outer$0 {\n    synthetic static final int[] $SwitchMap$Color = \n                                     new int[Color.values().length];\n    static {\n        $SwitchMap$Color[Color.RED.ordinal()] = 1;\n        $SwitchMap$Color[Color.BLUE.ordinal()] = 2;\n    }\n}\n\nColor color;\nswitch(Outer$0.$SwitchMap$Color[color.ordinal()]) {\n    case 1: ...\n    case 2: ...\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"Type":"NodeSuperBlockCloseMarker"}]}]}]},{"ID":"20240317134219-60eisxt","Type":"NodeParagraph","Properties":{"id":"20240317134219-60eisxt"}}]}